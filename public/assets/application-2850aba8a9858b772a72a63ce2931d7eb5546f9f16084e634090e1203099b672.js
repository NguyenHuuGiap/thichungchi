/*! jQuery v1.11.2 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.2",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},eb=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function gb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+rb(o[l]);w=ab.test(a)&&pb(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function hb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ib(a){return a[u]=!0,a}function jb(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function kb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function lb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function nb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function ob(a){return ib(function(b){return b=+b,ib(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pb(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=gb.support={},f=gb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=gb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",eb,!1):e.attachEvent&&e.attachEvent("onunload",eb)),p=!f(g),c.attributes=jb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=jb(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=jb(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(jb(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),jb(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&jb(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return lb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?lb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},gb.matches=function(a,b){return gb(a,null,null,b)},gb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return gb(b,n,null,[a]).length>0},gb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},gb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},gb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},gb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=gb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=gb.selectors={cacheLength:50,createPseudo:ib,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||gb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&gb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=gb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||gb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ib(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ib(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ib(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ib(function(a){return function(b){return gb(a,b).length>0}}),contains:ib(function(a){return a=a.replace(cb,db),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ib(function(a){return W.test(a||"")||gb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:ob(function(){return[0]}),last:ob(function(a,b){return[b-1]}),eq:ob(function(a,b,c){return[0>c?c+b:c]}),even:ob(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:ob(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:ob(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:ob(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=mb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=nb(b);function qb(){}qb.prototype=d.filters=d.pseudos,d.setFilters=new qb,g=gb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?gb.error(a):z(a,i).slice(0)};function rb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function tb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ub(a,b,c){for(var d=0,e=b.length;e>d;d++)gb(a,b[d],c);return c}function vb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wb(a,b,c,d,e,f){return d&&!d[u]&&(d=wb(d)),e&&!e[u]&&(e=wb(e,f)),ib(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ub(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:vb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=vb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=vb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sb(function(a){return a===b},h,!0),l=sb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sb(tb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wb(i>1&&tb(m),i>1&&rb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xb(a.slice(i,e)),f>e&&xb(a=a.slice(e)),f>e&&rb(a))}m.push(c)}return tb(m)}function yb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=vb(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&gb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ib(f):f}return h=gb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,yb(e,d)),f.selector=a}return f},i=gb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&pb(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&rb(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&pb(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=jb(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),jb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||kb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&jb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||kb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),jb(function(a){return null==a.getAttribute("disabled")})||kb(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),gb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)
}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});

(function($, undefined) {

/**
 * Unobtrusive scripting adapter for jQuery
 * https://github.com/rails/jquery-ujs
 *
 * Requires jQuery 1.8.0 or later.
 *
 * Released under the MIT license
 *
 */

  // Cut down on the number of issues from people inadvertently including jquery_ujs twice
  // by detecting and raising an error when it happens.
  'use strict';

  if ( $.rails !== undefined ) {
    $.error('jquery-ujs has already been loaded!');
  }

  // Shorthand to make it a little easier to call public rails functions from within rails.js
  var rails;
  var $document = $(document);

  $.rails = rails = {
    // Link elements bound by jquery-ujs
    linkClickSelector: 'a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]',

    // Button elements bound by jquery-ujs
    buttonClickSelector: 'button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)',

    // Select elements bound by jquery-ujs
    inputChangeSelector: 'select[data-remote], input[data-remote], textarea[data-remote]',

    // Form elements bound by jquery-ujs
    formSubmitSelector: 'form',

    // Form input elements bound by jquery-ujs
    formInputClickSelector: 'form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])',

    // Form input elements disabled during form submission
    disableSelector: 'input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled',

    // Form input elements re-enabled after form submission
    enableSelector: 'input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled',

    // Form required input elements
    requiredInputSelector: 'input[name][required]:not([disabled]), textarea[name][required]:not([disabled])',

    // Form file input elements
    fileInputSelector: 'input[name][type=file]:not([disabled])',

    // Link onClick disable selector with possible reenable after remote submission
    linkDisableSelector: 'a[data-disable-with], a[data-disable]',

    // Button onClick disable selector with possible reenable after remote submission
    buttonDisableSelector: 'button[data-remote][data-disable-with], button[data-remote][data-disable]',

    // Up-to-date Cross-Site Request Forgery token
    csrfToken: function() {
     return $('meta[name=csrf-token]').attr('content');
    },

    // URL param that must contain the CSRF token
    csrfParam: function() {
     return $('meta[name=csrf-param]').attr('content');
    },

    // Make sure that every Ajax request sends the CSRF token
    CSRFProtection: function(xhr) {
      var token = rails.csrfToken();
      if (token) xhr.setRequestHeader('X-CSRF-Token', token);
    },

    // Make sure that all forms have actual up-to-date tokens (cached forms contain old ones)
    refreshCSRFTokens: function(){
      $('form input[name="' + rails.csrfParam() + '"]').val(rails.csrfToken());
    },

    // Triggers an event on an element and returns false if the event result is false
    fire: function(obj, name, data) {
      var event = $.Event(name);
      obj.trigger(event, data);
      return event.result !== false;
    },

    // Default confirm dialog, may be overridden with custom confirm dialog in $.rails.confirm
    confirm: function(message) {
      return confirm(message);
    },

    // Default ajax function, may be overridden with custom function in $.rails.ajax
    ajax: function(options) {
      return $.ajax(options);
    },

    // Default way to get an element's href. May be overridden at $.rails.href.
    href: function(element) {
      return element[0].href;
    },

    // Checks "data-remote" if true to handle the request through a XHR request.
    isRemote: function(element) {
      return element.data('remote') !== undefined && element.data('remote') !== false;
    },

    // Submits "remote" forms and links with ajax
    handleRemote: function(element) {
      var method, url, data, withCredentials, dataType, options;

      if (rails.fire(element, 'ajax:before')) {
        withCredentials = element.data('with-credentials') || null;
        dataType = element.data('type') || ($.ajaxSettings && $.ajaxSettings.dataType);

        if (element.is('form')) {
          method = element.data('ujs:submit-button-formmethod') || element.attr('method');
          url = element.data('ujs:submit-button-formaction') || element.attr('action');
          data = $(element[0]).serializeArray();
          // memoized value from clicked submit button
          var button = element.data('ujs:submit-button');
          if (button) {
            data.push(button);
            element.data('ujs:submit-button', null);
          }
          element.data('ujs:submit-button-formmethod', null);
          element.data('ujs:submit-button-formaction', null);
        } else if (element.is(rails.inputChangeSelector)) {
          method = element.data('method');
          url = element.data('url');
          data = element.serialize();
          if (element.data('params')) data = data + '&' + element.data('params');
        } else if (element.is(rails.buttonClickSelector)) {
          method = element.data('method') || 'get';
          url = element.data('url');
          data = element.serialize();
          if (element.data('params')) data = data + '&' + element.data('params');
        } else {
          method = element.data('method');
          url = rails.href(element);
          data = element.data('params') || null;
        }

        options = {
          type: method || 'GET', data: data, dataType: dataType,
          // stopping the "ajax:beforeSend" event will cancel the ajax request
          beforeSend: function(xhr, settings) {
            if (settings.dataType === undefined) {
              xhr.setRequestHeader('accept', '*/*;q=0.5, ' + settings.accepts.script);
            }
            if (rails.fire(element, 'ajax:beforeSend', [xhr, settings])) {
              element.trigger('ajax:send', xhr);
            } else {
              return false;
            }
          },
          success: function(data, status, xhr) {
            element.trigger('ajax:success', [data, status, xhr]);
          },
          complete: function(xhr, status) {
            element.trigger('ajax:complete', [xhr, status]);
          },
          error: function(xhr, status, error) {
            element.trigger('ajax:error', [xhr, status, error]);
          },
          crossDomain: rails.isCrossDomain(url)
        };

        // There is no withCredentials for IE6-8 when
        // "Enable native XMLHTTP support" is disabled
        if (withCredentials) {
          options.xhrFields = {
            withCredentials: withCredentials
          };
        }

        // Only pass url to `ajax` options if not blank
        if (url) { options.url = url; }

        return rails.ajax(options);
      } else {
        return false;
      }
    },

    // Determines if the request is a cross domain request.
    isCrossDomain: function(url) {
      var originAnchor = document.createElement('a');
      originAnchor.href = location.href;
      var urlAnchor = document.createElement('a');

      try {
        urlAnchor.href = url;
        // This is a workaround to a IE bug.
        urlAnchor.href = urlAnchor.href;

        // If URL protocol is false or is a string containing a single colon
        // *and* host are false, assume it is not a cross-domain request
        // (should only be the case for IE7 and IE compatibility mode).
        // Otherwise, evaluate protocol and host of the URL against the origin
        // protocol and host.
        return !(((!urlAnchor.protocol || urlAnchor.protocol === ':') && !urlAnchor.host) ||
          (originAnchor.protocol + '//' + originAnchor.host ===
            urlAnchor.protocol + '//' + urlAnchor.host));
      } catch (e) {
        // If there is an error parsing the URL, assume it is crossDomain.
        return true;
      }
    },

    // Handles "data-method" on links such as:
    // <a href="/users/5" data-method="delete" rel="nofollow" data-confirm="Are you sure?">Delete</a>
    handleMethod: function(link) {
      var href = rails.href(link),
        method = link.data('method'),
        target = link.attr('target'),
        csrfToken = rails.csrfToken(),
        csrfParam = rails.csrfParam(),
        form = $('<form method="post" action="' + href + '"></form>'),
        metadataInput = '<input name="_method" value="' + method + '" type="hidden" />';

      if (csrfParam !== undefined && csrfToken !== undefined && !rails.isCrossDomain(href)) {
        metadataInput += '<input name="' + csrfParam + '" value="' + csrfToken + '" type="hidden" />';
      }

      if (target) { form.attr('target', target); }

      form.hide().append(metadataInput).appendTo('body');
      form.submit();
    },

    // Helper function that returns form elements that match the specified CSS selector
    // If form is actually a "form" element this will return associated elements outside the from that have
    // the html form attribute set
    formElements: function(form, selector) {
      return form.is('form') ? $(form[0].elements).filter(selector) : form.find(selector);
    },

    /* Disables form elements:
      - Caches element value in 'ujs:enable-with' data store
      - Replaces element text with value of 'data-disable-with' attribute
      - Sets disabled property to true
    */
    disableFormElements: function(form) {
      rails.formElements(form, rails.disableSelector).each(function() {
        rails.disableFormElement($(this));
      });
    },

    disableFormElement: function(element) {
      var method, replacement;

      method = element.is('button') ? 'html' : 'val';
      replacement = element.data('disable-with');

      if (replacement !== undefined) {
        element.data('ujs:enable-with', element[method]());
        element[method](replacement);
      }

      element.prop('disabled', true);
      element.data('ujs:disabled', true);
    },

    /* Re-enables disabled form elements:
      - Replaces element text with cached value from 'ujs:enable-with' data store (created in `disableFormElements`)
      - Sets disabled property to false
    */
    enableFormElements: function(form) {
      rails.formElements(form, rails.enableSelector).each(function() {
        rails.enableFormElement($(this));
      });
    },

    enableFormElement: function(element) {
      var method = element.is('button') ? 'html' : 'val';
      if (element.data('ujs:enable-with') !== undefined) {
        element[method](element.data('ujs:enable-with'));
        element.removeData('ujs:enable-with'); // clean up cache
      }
      element.prop('disabled', false);
      element.removeData('ujs:disabled');
    },

   /* For 'data-confirm' attribute:
      - Fires `confirm` event
      - Shows the confirmation dialog
      - Fires the `confirm:complete` event

      Returns `true` if no function stops the chain and user chose yes; `false` otherwise.
      Attaching a handler to the element's `confirm` event that returns a `falsy` value cancels the confirmation dialog.
      Attaching a handler to the element's `confirm:complete` event that returns a `falsy` value makes this function
      return false. The `confirm:complete` event is fired whether or not the user answered true or false to the dialog.
   */
    allowAction: function(element) {
      var message = element.data('confirm'),
          answer = false, callback;
      if (!message) { return true; }

      if (rails.fire(element, 'confirm')) {
        try {
          answer = rails.confirm(message);
        } catch (e) {
          (console.error || console.log).call(console, e.stack || e);
        }
        callback = rails.fire(element, 'confirm:complete', [answer]);
      }
      return answer && callback;
    },

    // Helper function which checks for blank inputs in a form that match the specified CSS selector
    blankInputs: function(form, specifiedSelector, nonBlank) {
      var foundInputs = $(),
        input,
        valueToCheck,
        radiosForNameWithNoneSelected,
        radioName,
        selector = specifiedSelector || 'input,textarea',
        requiredInputs = form.find(selector),
        checkedRadioButtonNames = {};

      requiredInputs.each(function() {
        input = $(this);
        if (input.is('input[type=radio]')) {

          // Don't count unchecked required radio as blank if other radio with same name is checked,
          // regardless of whether same-name radio input has required attribute or not. The spec
          // states https://www.w3.org/TR/html5/forms.html#the-required-attribute
          radioName = input.attr('name');

          // Skip if we've already seen the radio with this name.
          if (!checkedRadioButtonNames[radioName]) {

            // If none checked
            if (form.find('input[type=radio]:checked[name="' + radioName + '"]').length === 0) {
              radiosForNameWithNoneSelected = form.find(
                'input[type=radio][name="' + radioName + '"]');
              foundInputs = foundInputs.add(radiosForNameWithNoneSelected);
            }

            // We only need to check each name once.
            checkedRadioButtonNames[radioName] = radioName;
          }
        } else {
          valueToCheck = input.is('input[type=checkbox],input[type=radio]') ? input.is(':checked') : !!input.val();
          if (valueToCheck === nonBlank) {
            foundInputs = foundInputs.add(input);
          }
        }
      });
      return foundInputs.length ? foundInputs : false;
    },

    // Helper function which checks for non-blank inputs in a form that match the specified CSS selector
    nonBlankInputs: function(form, specifiedSelector) {
      return rails.blankInputs(form, specifiedSelector, true); // true specifies nonBlank
    },

    // Helper function, needed to provide consistent behavior in IE
    stopEverything: function(e) {
      $(e.target).trigger('ujs:everythingStopped');
      e.stopImmediatePropagation();
      return false;
    },

    //  Replace element's html with the 'data-disable-with' after storing original html
    //  and prevent clicking on it
    disableElement: function(element) {
      var replacement = element.data('disable-with');

      if (replacement !== undefined) {
        element.data('ujs:enable-with', element.html()); // store enabled state
        element.html(replacement);
      }

      element.bind('click.railsDisable', function(e) { // prevent further clicking
        return rails.stopEverything(e);
      });
      element.data('ujs:disabled', true);
    },

    // Restore element to its original state which was disabled by 'disableElement' above
    enableElement: function(element) {
      if (element.data('ujs:enable-with') !== undefined) {
        element.html(element.data('ujs:enable-with')); // set to old enabled state
        element.removeData('ujs:enable-with'); // clean up cache
      }
      element.unbind('click.railsDisable'); // enable element
      element.removeData('ujs:disabled');
    }
  };

  if (rails.fire($document, 'rails:attachBindings')) {

    $.ajaxPrefilter(function(options, originalOptions, xhr){ if ( !options.crossDomain ) { rails.CSRFProtection(xhr); }});

    // This event works the same as the load event, except that it fires every
    // time the page is loaded.
    //
    // See https://github.com/rails/jquery-ujs/issues/357
    // See https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching
    $(window).on('pageshow.rails', function () {
      $($.rails.enableSelector).each(function () {
        var element = $(this);

        if (element.data('ujs:disabled')) {
          $.rails.enableFormElement(element);
        }
      });

      $($.rails.linkDisableSelector).each(function () {
        var element = $(this);

        if (element.data('ujs:disabled')) {
          $.rails.enableElement(element);
        }
      });
    });

    $document.on('ajax:complete', rails.linkDisableSelector, function() {
        rails.enableElement($(this));
    });

    $document.on('ajax:complete', rails.buttonDisableSelector, function() {
        rails.enableFormElement($(this));
    });

    $document.on('click.rails', rails.linkClickSelector, function(e) {
      var link = $(this), method = link.data('method'), data = link.data('params'), metaClick = e.metaKey || e.ctrlKey;
      if (!rails.allowAction(link)) return rails.stopEverything(e);

      if (!metaClick && link.is(rails.linkDisableSelector)) rails.disableElement(link);

      if (rails.isRemote(link)) {
        if (metaClick && (!method || method === 'GET') && !data) { return true; }

        var handleRemote = rails.handleRemote(link);
        // Response from rails.handleRemote() will either be false or a deferred object promise.
        if (handleRemote === false) {
          rails.enableElement(link);
        } else {
          handleRemote.fail( function() { rails.enableElement(link); } );
        }
        return false;

      } else if (method) {
        rails.handleMethod(link);
        return false;
      }
    });

    $document.on('click.rails', rails.buttonClickSelector, function(e) {
      var button = $(this);

      if (!rails.allowAction(button) || !rails.isRemote(button)) return rails.stopEverything(e);

      if (button.is(rails.buttonDisableSelector)) rails.disableFormElement(button);

      var handleRemote = rails.handleRemote(button);
      // Response from rails.handleRemote() will either be false or a deferred object promise.
      if (handleRemote === false) {
        rails.enableFormElement(button);
      } else {
        handleRemote.fail( function() { rails.enableFormElement(button); } );
      }
      return false;
    });

    $document.on('change.rails', rails.inputChangeSelector, function(e) {
      var link = $(this);
      if (!rails.allowAction(link) || !rails.isRemote(link)) return rails.stopEverything(e);

      rails.handleRemote(link);
      return false;
    });

    $document.on('submit.rails', rails.formSubmitSelector, function(e) {
      var form = $(this),
        remote = rails.isRemote(form),
        blankRequiredInputs,
        nonBlankFileInputs;

      if (!rails.allowAction(form)) return rails.stopEverything(e);

      // Skip other logic when required values are missing or file upload is present
      if (form.attr('novalidate') === undefined) {
        if (form.data('ujs:formnovalidate-button') === undefined) {
          blankRequiredInputs = rails.blankInputs(form, rails.requiredInputSelector, false);
          if (blankRequiredInputs && rails.fire(form, 'ajax:aborted:required', [blankRequiredInputs])) {
            return rails.stopEverything(e);
          }
        } else {
          // Clear the formnovalidate in case the next button click is not on a formnovalidate button
          // Not strictly necessary to do here, since it is also reset on each button click, but just to be certain
          form.data('ujs:formnovalidate-button', undefined);
        }
      }

      if (remote) {
        nonBlankFileInputs = rails.nonBlankInputs(form, rails.fileInputSelector);
        if (nonBlankFileInputs) {
          // Slight timeout so that the submit button gets properly serialized
          // (make it easy for event handler to serialize form without disabled values)
          setTimeout(function(){ rails.disableFormElements(form); }, 13);
          var aborted = rails.fire(form, 'ajax:aborted:file', [nonBlankFileInputs]);

          // Re-enable form elements if event bindings return false (canceling normal form submission)
          if (!aborted) { setTimeout(function(){ rails.enableFormElements(form); }, 13); }

          return aborted;
        }

        rails.handleRemote(form);
        return false;

      } else {
        // Slight timeout so that the submit button gets properly serialized
        setTimeout(function(){ rails.disableFormElements(form); }, 13);
      }
    });

    $document.on('click.rails', rails.formInputClickSelector, function(event) {
      var button = $(this);

      if (!rails.allowAction(button)) return rails.stopEverything(event);

      // Register the pressed submit button
      var name = button.attr('name'),
        data = name ? {name:name, value:button.val()} : null;

      var form = button.closest('form');
      if (form.length === 0) {
        form = $('#' + button.attr('form'));
      }
      form.data('ujs:submit-button', data);

      // Save attributes from button
      form.data('ujs:formnovalidate-button', button.attr('formnovalidate'));
      form.data('ujs:submit-button-formaction', button.attr('formaction'));
      form.data('ujs:submit-button-formmethod', button.attr('formmethod'));
    });

    $document.on('ajax:send.rails', rails.formSubmitSelector, function(event) {
      if (this === event.target) rails.disableFormElements($(this));
    });

    $document.on('ajax:complete.rails', rails.formSubmitSelector, function(event) {
      if (this === event.target) rails.enableFormElements($(this));
    });

    $(function(){
      rails.refreshCSRFTokens();
    });
  }

})( jQuery );
// ==================================================
// fancyBox v3.2.10
//
// Licensed GPLv3 for open source use
// or fancyBox Commercial License for commercial use
//
// http://fancyapps.com/fancybox/
// Copyright 2017 fancyApps
//
// ==================================================
!function(t,e,n,o){"use strict";function i(t){var e=n(t.currentTarget),o=t.data?t.data.options:{},i=e.attr("data-fancybox")||"",a=0,s=[];t.isDefaultPrevented()||(t.preventDefault(),i?(s=o.selector?n(o.selector):t.data?t.data.items:[],s=s.length?s.filter('[data-fancybox="'+i+'"]'):n('[data-fancybox="'+i+'"]'),a=s.index(e),a<0&&(a=0)):s=[e],n.fancybox.open(s,o,a))}if(n){if(n.fn.fancybox)return void("console"in t&&console.log("fancyBox already initialized"));var a={loop:!1,margin:[44,0],gutter:50,keyboard:!0,arrows:!0,infobar:!0,toolbar:!0,buttons:["slideShow","fullScreen","thumbs","share","close"],idleTime:3,smallBtn:"auto",protect:!1,modal:!1,image:{preload:"auto"},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},defaultType:"image",animationEffect:"zoom",animationDuration:500,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}<p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}"><svg viewBox="0 0 40 40"><path d="M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28" /></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg viewBox="0 0 40 40"><path d="M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23" /></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg viewBox="0 0 40 40"><path d="M10,10 L30,30 M30,10 L10,30" /></svg></button>',smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><svg viewBox="0 0 40 40"><path d="M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20"></path></svg></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><svg viewBox="0 0 40 40"><path d="M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20"></path></svg></button>'},parentEl:"body",autoFocus:!1,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:4e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{idleTime:!1,margin:0,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"Zurck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es spter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Mastab"}}},s=n(t),r=n(e),c=0,l=function(t){return t&&t.hasOwnProperty&&t instanceof n},u=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),d=function(){var t,n=e.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(n.style[t]!==o)return i[t];return"transitionend"}(),f=function(t){return t&&t.length&&t[0].offsetHeight},p=function(t,o,i){var a=this;a.opts=n.extend(!0,{index:i},n.fancybox.defaults,o||{}),n.fancybox.isMobile&&(a.opts=n.extend(!0,{},a.opts,a.opts.mobile)),o&&n.isArray(o.buttons)&&(a.opts.buttons=o.buttons),a.id=a.opts.id||++c,a.group=[],a.currIndex=parseInt(a.opts.index,10)||0,a.prevIndex=null,a.prevPos=null,a.currPos=0,a.firstRun=null,a.createGroup(t),a.group.length&&(a.$lastFocus=n(e.activeElement).blur(),a.slides={},a.init())};n.extend(p.prototype,{init:function(){var i,a,s,c=this,l=c.group[c.currIndex],u=l.opts,d=n.fancybox.scrollbarWidth;c.scrollTop=r.scrollTop(),c.scrollLeft=r.scrollLeft(),n.fancybox.getInstance()||(n("body").addClass("fancybox-active"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream?"image"!==l.type&&n("body").css("top",n("body").scrollTop()*-1).addClass("fancybox-iosfix"):!n.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(d===o&&(i=n('<div style="width:50px;height:50px;overflow:scroll;" />').appendTo("body"),d=n.fancybox.scrollbarWidth=i[0].offsetWidth-i[0].clientWidth,i.remove()),n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar { margin-right: '+d+"px; }</style>"),n("body").addClass("compensate-for-scrollbar"))),s="",n.each(u.buttons,function(t,e){s+=u.btnTpl[e]||""}),a=n(c.translate(c,u.baseTpl.replace("{{buttons}}",s).replace("{{arrows}}",u.btnTpl.arrowLeft+u.btnTpl.arrowRight))).attr("id","fancybox-container-"+c.id).addClass("fancybox-is-hidden").addClass(u.baseClass).data("FancyBox",c).appendTo(u.parentEl),c.$refs={container:a},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){c.$refs[t]=a.find(".fancybox-"+t)}),c.trigger("onInit"),c.activate(),c.jumpTo(c.currIndex)},translate:function(t,e){var n=t.opts.i18n[t.opts.lang];return e.replace(/\{\{(\w+)\}\}/g,function(t,e){var i=n[e];return i===o?t:i})},createGroup:function(t){var e=this,i=n.makeArray(t);n.each(i,function(t,i){var a,s,r,c,l,u={},d={};n.isPlainObject(i)?(u=i,d=i.opts||i):"object"===n.type(i)&&n(i).length?(a=n(i),d=a.data(),d=n.extend({},d,d.options||{}),d.$orig=a,u.src=d.src||a.attr("href"),u.type||u.src||(u.type="inline",u.src=i)):u={type:"html",src:i+""},u.opts=n.extend(!0,{},e.opts,d),n.isArray(d.buttons)&&(u.opts.buttons=d.buttons),s=u.type||u.opts.type,c=u.src||"",!s&&c&&(c.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?s="image":c.match(/\.(pdf)((\?|#).*)?$/i)?s="pdf":(r=c.match(/\.(mp4|mov|ogv)((\?|#).*)?$/i))?(s="video",u.opts.videoFormat||(u.opts.videoFormat="video/"+("ogv"===r[1]?"ogg":r[1]))):"#"===c.charAt(0)&&(s="inline")),s?u.type=s:e.trigger("objectNeedsType",u),u.index=e.group.length,u.opts.$orig&&!u.opts.$orig.length&&delete u.opts.$orig,!u.opts.$thumb&&u.opts.$orig&&(u.opts.$thumb=u.opts.$orig.find("img:first")),u.opts.$thumb&&!u.opts.$thumb.length&&delete u.opts.$thumb,"function"===n.type(u.opts.caption)&&(u.opts.caption=u.opts.caption.apply(i,[e,u])),"function"===n.type(e.opts.caption)&&(u.opts.caption=e.opts.caption.apply(i,[e,u])),u.opts.caption instanceof n||(u.opts.caption=u.opts.caption===o?"":u.opts.caption+""),"ajax"===s&&(l=c.split(/\s+/,2),l.length>1&&(u.src=l.shift(),u.opts.filter=l.shift())),"auto"==u.opts.smallBtn&&(n.inArray(s,["html","inline","ajax"])>-1?(u.opts.toolbar=!1,u.opts.smallBtn=!0):u.opts.smallBtn=!1),"pdf"===s&&(u.type="iframe",u.opts.iframe.preload=!1),u.opts.modal&&(u.opts=n.extend(!0,u.opts,{infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),e.group.push(u)})},addEvents:function(){var o=this;o.removeEvents(),o.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),o.close(t)}).on("click.fb-prev touchend.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),o.previous()}).on("click.fb-next touchend.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),o.next()}).on("click.fb","[data-fancybox-zoom]",function(t){o[o.isScaledDown()?"scaleToActual":"scaleToFit"]()}),s.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?u(function(){o.update()}):(o.$refs.stage.hide(),setTimeout(function(){o.$refs.stage.show(),o.update()},600))}),r.on("focusin.fb",function(t){var i=n.fancybox?n.fancybox.getInstance():null;i.isClosing||!i.current||!i.current.opts.trapFocus||n(t.target).hasClass("fancybox-container")||n(t.target).is(e)||i&&"fixed"!==n(t.target).css("position")&&!i.$refs.container.has(t.target).length&&(t.stopPropagation(),i.focus(),s.scrollTop(o.scrollTop).scrollLeft(o.scrollLeft))}),r.on("keydown.fb",function(t){var e=o.current,i=t.keyCode||t.which;if(e&&e.opts.keyboard&&!n(t.target).is("input")&&!n(t.target).is("textarea"))return 8===i||27===i?(t.preventDefault(),void o.close(t)):37===i||38===i?(t.preventDefault(),void o.previous()):39===i||40===i?(t.preventDefault(),void o.next()):void o.trigger("afterKeydown",t,i)}),o.group[o.currIndex].opts.idleTime&&(o.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){o.idleSecondsCounter=0,o.isIdle&&o.showControls(),o.isIdle=!1}),o.idleInterval=t.setInterval(function(){o.idleSecondsCounter++,o.idleSecondsCounter>=o.group[o.currIndex].opts.idleTime&&!o.isDragging&&(o.isIdle=!0,o.idleSecondsCounter=0,o.hideControls())},1e3))},removeEvents:function(){var e=this;s.off("orientationchange.fb resize.fb"),r.off("focusin.fb keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),e.idleInterval&&(t.clearInterval(e.idleInterval),e.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e,i){var a,s,r,c,l,u,d,p=this,h=p.group.length;if(!(p.isDragging||p.isClosing||p.isAnimating&&p.firstRun)){if(t=parseInt(t,10),s=p.current?p.current.opts.loop:p.opts.loop,!s&&(t<0||t>=h))return!1;if(a=p.firstRun=null===p.firstRun,!(h<2&&!a&&p.isDragging)){if(c=p.current,p.prevIndex=p.currIndex,p.prevPos=p.currPos,r=p.createSlide(t),h>1&&((s||r.index>0)&&p.createSlide(t-1),(s||r.index<h-1)&&p.createSlide(t+1)),p.current=r,p.currIndex=r.index,p.currPos=r.pos,p.trigger("beforeShow",a),p.updateControls(),u=n.fancybox.getTranslate(r.$slide),r.isMoved=(0!==u.left||0!==u.top)&&!r.$slide.hasClass("fancybox-animated"),r.forcedDuration=o,n.isNumeric(e)?r.forcedDuration=e:e=r.opts[a?"animationDuration":"transitionDuration"],e=parseInt(e,10),a)return r.opts.animationEffect&&e&&p.$refs.container.css("transition-duration",e+"ms"),p.$refs.container.removeClass("fancybox-is-hidden"),f(p.$refs.container),p.$refs.container.addClass("fancybox-is-open"),r.$slide.addClass("fancybox-slide--current"),p.loadSlide(r),void p.preload("image");n.each(p.slides,function(t,e){n.fancybox.stop(e.$slide)}),r.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current"),r.isMoved?(l=Math.round(r.$slide.width()),n.each(p.slides,function(t,o){var i=o.pos-r.pos;n.fancybox.animate(o.$slide,{top:0,left:i*l+i*o.opts.gutter},e,function(){o.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous"),o.pos===p.currPos&&(r.isMoved=!1,p.complete())})})):p.$refs.stage.children().removeAttr("style"),r.isLoaded?p.revealContent(r):p.loadSlide(r),p.preload("image"),c.pos!==r.pos&&(d="fancybox-slide--"+(c.pos>r.pos?"next":"previous"),c.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous"),c.isComplete=!1,e&&(r.isMoved||r.opts.transitionEffect)&&(r.isMoved?c.$slide.addClass(d):(d="fancybox-animated "+d+" fancybox-fx-"+r.opts.transitionEffect,n.fancybox.animate(c.$slide,d,e,function(){c.$slide.removeClass(d).removeAttr("style")}))))}}},createSlide:function(t){var e,o,i=this;return o=t%i.group.length,o=o<0?i.group.length+o:o,!i.slides[t]&&i.group[o]&&(e=n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage),i.slides[t]=n.extend(!0,{},i.group[o],{pos:t,$slide:e,isLoaded:!1}),i.updateSlide(i.slides[t])),i.slides[t]},scaleToActual:function(t,e,i){var a,s,r,c,l,u=this,d=u.current,f=d.$content,p=parseInt(d.$slide.width(),10),h=parseInt(d.$slide.height(),10),g=d.width,b=d.height;"image"!=d.type||d.hasError||!f||u.isAnimating||(n.fancybox.stop(f),u.isAnimating=!0,t=t===o?.5*p:t,e=e===o?.5*h:e,a=n.fancybox.getTranslate(f),c=g/a.width,l=b/a.height,s=.5*p-.5*g,r=.5*h-.5*b,g>p&&(s=a.left*c-(t*c-t),s>0&&(s=0),s<p-g&&(s=p-g)),b>h&&(r=a.top*l-(e*l-e),r>0&&(r=0),r<h-b&&(r=h-b)),u.updateCursor(g,b),n.fancybox.animate(f,{top:r,left:s,scaleX:c,scaleY:l},i||330,function(){u.isAnimating=!1}),u.SlideShow&&u.SlideShow.isActive&&u.SlideShow.stop())},scaleToFit:function(t){var e,o=this,i=o.current,a=i.$content;"image"!=i.type||i.hasError||!a||o.isAnimating||(n.fancybox.stop(a),o.isAnimating=!0,e=o.getFitPos(i),o.updateCursor(e.width,e.height),n.fancybox.animate(a,{top:e.top,left:e.left,scaleX:e.width/a.width(),scaleY:e.height/a.height()},t||330,function(){o.isAnimating=!1}))},getFitPos:function(t){var e,o,i,a,s,r=this,c=t.$content,l=t.width,u=t.height,d=t.opts.margin;return!(!c||!c.length||!l&&!u)&&("number"===n.type(d)&&(d=[d,d]),2==d.length&&(d=[d[0],d[1],d[0],d[1]]),e=parseInt(r.$refs.stage.width(),10)-(d[1]+d[3]),o=parseInt(r.$refs.stage.height(),10)-(d[0]+d[2]),i=Math.min(1,e/l,o/u),a=Math.floor(i*l),s=Math.floor(i*u),{top:Math.floor(.5*(o-s))+d[0],left:Math.floor(.5*(e-a))+d[3],width:a,height:s})},update:function(){var t=this;n.each(t.slides,function(e,n){t.updateSlide(n)})},updateSlide:function(t,e){var o=this,i=t&&t.$content;i&&(t.width||t.height)&&(o.isAnimating=!1,n.fancybox.stop(i),n.fancybox.setTranslate(i,o.getFitPos(t)),t.pos===o.currPos&&o.updateCursor()),t.$slide.trigger("refresh"),o.trigger("onUpdate",t)},centerSlide:function(t,e){var i,a,s=this;s.current&&(i=Math.round(t.$slide.width()),a=t.pos-s.current.pos,n.fancybox.animate(t.$slide,{top:0,left:a*i+a*t.opts.gutter,opacity:1},e===o?0:e,null,!1))},updateCursor:function(t,e){var n,i=this,a=i.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");i.current&&!i.isClosing&&(i.isZoomable()?(a.addClass("fancybox-is-zoomable"),n=t!==o&&e!==o?t<i.current.width&&e<i.current.height:i.isScaledDown(),n?a.addClass("fancybox-can-zoomIn"):i.current.opts.touch?a.addClass("fancybox-can-drag"):a.addClass("fancybox-can-zoomOut")):i.current.opts.touch&&a.addClass("fancybox-can-drag"))},isZoomable:function(){var t,e=this,o=e.current;if(o&&!e.isClosing)return!!("image"===o.type&&o.isLoaded&&!o.hasError&&("zoom"===o.opts.clickContent||n.isFunction(o.opts.clickContent)&&"zoom"===o.opts.clickContent(o))&&(t=e.getFitPos(o),o.width>t.width||o.height>t.height))},isScaledDown:function(){var t=this,e=t.current,o=e.$content,i=!1;return o&&(i=n.fancybox.getTranslate(o),i=i.width<e.width||i.height<e.height),i},canPan:function(){var t=this,e=t.current,n=e.$content,o=!1;return n&&(o=t.getFitPos(e),o=Math.abs(n.width()-o.width)>1||Math.abs(n.height()-o.height)>1),o},loadSlide:function(t){var e,o,i,a=this;if(!t.isLoading&&!t.isLoaded){switch(t.isLoading=!0,a.trigger("beforeLoad",t),e=t.type,o=t.$slide,o.off("refresh").trigger("onReset").addClass("fancybox-slide--"+(e||"unknown")).addClass(t.opts.slideClass),e){case"image":a.setImage(t);break;case"iframe":a.setIframe(t);break;case"html":a.setContent(t,t.src||t.content);break;case"inline":n(t.src).length?a.setContent(t,n(t.src)):a.setError(t);break;case"ajax":a.showLoading(t),i=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&a.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&a.setError(t)}})),o.one("onReset",function(){i.abort()});break;case"video":a.setContent(t,'<video controls><source src="'+t.src+'" type="'+t.opts.videoFormat+"\">Your browser doesn't support HTML5 video</video>");break;default:a.setError(t)}return!0}},setImage:function(e){var o,i,a,s,r=this,c=e.opts.srcset||e.opts.image.srcset;if(c){a=t.devicePixelRatio||1,s=t.innerWidth*a,i=c.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,n){var o=parseInt(t.substring(0,t.length-1),10);return 0===n?e.url=t:void(o&&(e.value=o,e.postfix=t[t.length-1]))}),e}),i.sort(function(t,e){return t.value-e.value});for(var l=0;l<i.length;l++){var u=i[l];if("w"===u.postfix&&u.value>=s||"x"===u.postfix&&u.value>=a){o=u;break}}!o&&i.length&&(o=i[i.length-1]),o&&(e.src=o.url,e.width&&e.height&&"w"==o.postfix&&(e.height=e.width/e.height*o.value,e.width=o.value))}e.$content=n('<div class="fancybox-image-wrap"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide),e.opts.preload!==!1&&e.opts.width&&e.opts.height&&(e.opts.thumb||e.opts.$thumb)?(e.width=e.opts.width,e.height=e.opts.height,e.$ghost=n("<img />").one("error",function(){n(this).remove(),e.$ghost=null,r.setBigImage(e)}).one("load",function(){r.afterLoad(e),r.setBigImage(e)}).addClass("fancybox-image").appendTo(e.$content).attr("src",e.opts.thumb||e.opts.$thumb.attr("src"))):r.setBigImage(e)},setBigImage:function(t){var e=this,o=n("<img />");t.$image=o.one("error",function(){e.setError(t)}).one("load",function(){clearTimeout(t.timouts),t.timouts=null,e.isClosing||(t.width=t.opts.width||this.naturalWidth,t.height=t.opts.height||this.naturalHeight,t.opts.image.srcset&&o.attr("sizes","100vw").attr("srcset",t.opts.image.srcset),e.hideLoading(t),t.$ghost?t.timouts=setTimeout(function(){t.timouts=null,t.$ghost.hide()},Math.min(300,Math.max(1e3,t.height/1600))):e.afterLoad(t))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(o[0].complete||"complete"==o[0].readyState)&&o[0].naturalWidth&&o[0].naturalHeight?o.trigger("load"):o[0].error?o.trigger("error"):t.timouts=setTimeout(function(){o[0].complete||t.hasError||e.showLoading(t)},100)},setIframe:function(t){var e,i=this,a=t.opts.iframe,s=t.$slide;t.$content=n('<div class="fancybox-content'+(a.preload?" fancybox-is-hidden":"")+'"></div>').css(a.css).appendTo(s),e=n(a.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(a.attr).appendTo(t.$content),a.preload?(i.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),i.afterLoad(t)}),s.on("refresh.fb",function(){var n,i,s,r=t.$content,c=a.css.width,l=a.css.height;if(1===e[0].isReady){try{i=e.contents(),s=i.find("body")}catch(t){}s&&s.length&&(c===o&&(n=e[0].contentWindow.document.documentElement.scrollWidth,c=Math.ceil(s.outerWidth(!0)+(r.width()-n)),c+=r.outerWidth()-r.innerWidth()),l===o&&(l=Math.ceil(s.outerHeight(!0)),l+=r.outerHeight()-r.innerHeight()),c&&r.width(c),l&&r.height(l)),r.removeClass("fancybox-is-hidden")}})):this.afterLoad(t),e.attr("src",t.src),t.opts.smallBtn===!0&&t.$content.prepend(i.translate(t,t.opts.btnTpl.smallBtn)),s.one("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank")}catch(t){}n(this).empty(),t.isLoaded=!1})},setContent:function(t,e){var o=this;o.isClosing||(o.hideLoading(t),t.$slide.empty(),l(e)&&e.parent().length?(e.parent(".fancybox-slide--inline").trigger("onReset"),t.$placeholder=n("<div></div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===n.type(e)&&(e=n("<div>").append(n.trim(e)).contents(),3===e[0].nodeType&&(e=n("<div>").html(e))),t.opts.filter&&(e=n("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){n(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(n(this).empty(),t.isLoaded=!1)}),t.$content=n(e).appendTo(t.$slide),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.removeClass("fancybox-slide--"+t.type),this.setContent(t,this.translate(t,t.opts.errorTpl))},showLoading:function(t){var e=this;t=t||e.current,t&&!t.$spinner&&(t.$spinner=n(e.opts.spinnerTpl).appendTo(t.$slide))},hideLoading:function(t){var e=this;t=t||e.current,t&&t.$spinner&&(t.$spinner.remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),t.opts.smallBtn&&!t.$smallBtn&&(t.$smallBtn=n(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content.filter("div,form").first())),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.revealContent(t))},revealContent:function(t){var e,i,a,s,r,c=this,l=t.$slide,u=!1;return e=t.opts[c.firstRun?"animationEffect":"transitionEffect"],a=t.opts[c.firstRun?"animationDuration":"transitionDuration"],a=parseInt(t.forcedDuration===o?a:t.forcedDuration,10),!t.isMoved&&t.pos===c.currPos&&a||(e=!1),"zoom"!==e||t.pos===c.currPos&&a&&"image"===t.type&&!t.hasError&&(u=c.getThumbPos(t))||(e="fade"),"zoom"===e?(r=c.getFitPos(t),r.scaleX=r.width/u.width,r.scaleY=r.height/u.height,delete r.width,delete r.height,s=t.opts.zoomOpacity,"auto"==s&&(s=Math.abs(t.width/t.height-u.width/u.height)>.1),s&&(u.opacity=.1,r.opacity=1),n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),u),f(t.$content),void n.fancybox.animate(t.$content,r,a,function(){c.complete()})):(c.updateSlide(t),e?(n.fancybox.stop(l),i="fancybox-animated fancybox-slide--"+(t.pos>=c.prevPos?"next":"previous")+" fancybox-fx-"+e,l.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(i),t.$content.removeClass("fancybox-is-hidden"),f(l),void n.fancybox.animate(l,"fancybox-slide--current",a,function(e){l.removeClass(i).removeAttr("style"),t.pos===c.currPos&&c.complete()},!0)):(f(l),t.$content.removeClass("fancybox-is-hidden"),void(t.pos===c.currPos&&c.complete())))},getThumbPos:function(o){var i,a=this,s=!1,r=function(e){for(var o,i=e[0],a=i.getBoundingClientRect(),s=[];null!==i.parentElement;)"hidden"!==n(i.parentElement).css("overflow")&&"auto"!==n(i.parentElement).css("overflow")||s.push(i.parentElement.getBoundingClientRect()),i=i.parentElement;return o=s.every(function(t){var e=Math.min(a.right,t.right)-Math.max(a.left,t.left),n=Math.min(a.bottom,t.bottom)-Math.max(a.top,t.top);return e>0&&n>0}),o&&a.bottom>0&&a.right>0&&a.left<n(t).width()&&a.top<n(t).height()},c=o.opts.$thumb,l=c?c.offset():0;return l&&c[0].ownerDocument===e&&r(c)&&(i=a.$refs.stage.offset(),s={top:l.top-i.top+parseFloat(c.css("border-top-width")||0),left:l.left-i.left+parseFloat(c.css("border-left-width")||0),width:c.width(),height:c.height(),scaleX:1,scaleY:1}),s},complete:function(){var t=this,o=t.current,i={};o.isMoved||!o.isLoaded||o.isComplete||(o.isComplete=!0,o.$slide.siblings().trigger("onReset"),t.preload("inline"),f(o.$slide),o.$slide.addClass("fancybox-slide--complete"),n.each(t.slides,function(e,o){o.pos>=t.currPos-1&&o.pos<=t.currPos+1?i[o.pos]=o:o&&(n.fancybox.stop(o.$slide),o.$slide.off().remove())}),t.slides=i,t.updateCursor(),t.trigger("afterShow"),o.$slide.find("video,audio").first().trigger("play"),(n(e.activeElement).is("[disabled]")||o.opts.autoFocus&&"image"!=o.type&&"iframe"!==o.type)&&t.focus())},preload:function(t){var e=this,n=e.slides[e.currPos+1],o=e.slides[e.currPos-1];n&&n.type===t&&e.loadSlide(n),o&&o.type===t&&e.loadSlide(o)},focus:function(){var t,e=this.current;this.isClosing||(e&&e.isComplete&&(t=e.$slide.find("input[autofocus]:enabled:visible:first"),t.length||(t=e.$slide.find("button,:input,[tabindex],a").filter(":enabled:visible:first"))),t=t&&t.length?t:this.$refs.container,t.focus())},activate:function(){var t=this;n(".fancybox-container").each(function(){var e=n(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)}),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var o,i,a,s,r,c,l=this,p=l.current,h=function(){l.cleanUp(t)};return!l.isClosing&&(l.isClosing=!0,l.trigger("beforeClose",t)===!1?(l.isClosing=!1,u(function(){l.update()}),!1):(l.removeEvents(),p.timouts&&clearTimeout(p.timouts),a=p.$content,o=p.opts.animationEffect,i=n.isNumeric(e)?e:o?p.opts.animationDuration:0,p.$slide.off(d).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),p.$slide.siblings().trigger("onReset").remove(),i&&l.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing"),l.hideLoading(p),l.hideControls(),l.updateCursor(),"zoom"!==o||t!==!0&&a&&i&&"image"===p.type&&!p.hasError&&(c=l.getThumbPos(p))||(o="fade"),"zoom"===o?(n.fancybox.stop(a),r=n.fancybox.getTranslate(a),r.width=r.width*r.scaleX,r.height=r.height*r.scaleY,s=p.opts.zoomOpacity,"auto"==s&&(s=Math.abs(p.width/p.height-c.width/c.height)>.1),s&&(c.opacity=0),r.scaleX=r.width/c.width,r.scaleY=r.height/c.height,r.width=c.width,r.height=c.height,n.fancybox.setTranslate(p.$content,r),f(p.$content),n.fancybox.animate(p.$content,c,i,h),!0):(o&&i?t===!0?setTimeout(h,i):n.fancybox.animate(p.$slide.removeClass("fancybox-slide--current"),"fancybox-animated fancybox-slide--previous fancybox-fx-"+o,i,h):h(),!0)))},cleanUp:function(t){var o,i,a=this,r=n("body");a.current.$slide.trigger("onReset"),a.$refs.container.empty().remove(),a.trigger("afterClose",t),a.$lastFocus&&a.current.opts.backFocus&&a.$lastFocus.focus(),a.current=null,o=n.fancybox.getInstance(),o?o.activate():(s.scrollTop(a.scrollTop).scrollLeft(a.scrollLeft),r.removeClass("fancybox-active compensate-for-scrollbar"),r.hasClass("fancybox-iosfix")&&(i=parseInt(e.body.style.top,10),r.removeClass("fancybox-iosfix").css("top","").scrollTop(i*-1)),n("#fancybox-style-noscroll").remove())},trigger:function(t,e){var o,i=Array.prototype.slice.call(arguments,1),a=this,s=e&&e.opts?e:a.current;return s?i.unshift(s):s=a,i.unshift(a),n.isFunction(s.opts[t])&&(o=s.opts[t].apply(s,i)),o===!1?o:void("afterClose"!==t&&a.$refs?a.$refs.container.trigger(t+".fb",i):r.trigger(t+".fb",i))},updateControls:function(t){var e=this,n=e.current,o=n.index,i=n.opts.caption,a=e.$refs.container,s=e.$refs.caption;n.$slide.trigger("refresh"),e.$caption=i&&i.length?s.html(i):null,e.isHiddenControls||e.isIdle||e.showControls(),a.find("[data-fancybox-count]").html(e.group.length),a.find("[data-fancybox-index]").html(o+1),a.find("[data-fancybox-prev]").prop("disabled",!n.opts.loop&&o<=0),a.find("[data-fancybox-next]").prop("disabled",!n.opts.loop&&o>=e.group.length-1),"image"===n.type?a.find("[data-fancybox-download]").attr("href",n.opts.image.src||n.src).show():a.find("[data-fancybox-download],[data-fancybox-zoom]").hide()},hideControls:function(){this.isHiddenControls=!0,this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,n=t.$refs.container;t.isHiddenControls=!1,t.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&t.group.length>1)).toggleClass("fancybox-show-nav",!!(e.arrows&&t.group.length>1)).toggleClass("fancybox-is-modal",!!e.modal),t.$caption?n.addClass("fancybox-show-caption "):n.removeClass("fancybox-show-caption")},toggleControls:function(){this.isHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.2.10",defaults:a,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return e instanceof p&&("string"===n.type(t)?e[t].apply(e,o):"function"===n.type(t)&&t.apply(e,o),e)},open:function(t,e,n){return new p(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),t===!0&&this.close())},destroy:function(){this.close(!0),r.off("click.fb-start")},isMobile:e.createTouch!==o&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)}(),getTranslate:function(t){var e;if(!t||!t.length)return!1;if(e=t.eq(0).css("transform"),e&&e.indexOf("matrix")!==-1?(e=e.split("(")[1],e=e.split(")")[0],e=e.split(",")):e=[],e.length)e=e.length>10?[e[13],e[12],e[0],e[5]]:[e[5],e[4],e[0],e[3]],e=e.map(parseFloat);else{e=[0,0,1,1];var n=/\.*translate\((.*)px,(.*)px\)/i,o=n.exec(t.eq(0).attr("style"));o&&(e[0]=parseFloat(o[2]),e[1]=parseFloat(o[1]))}return{top:e[0],left:e[1],scaleX:e[2],scaleY:e[3],opacity:parseFloat(t.css("opacity")),width:t.width(),height:t.height()}},setTranslate:function(t,e){var n="",i={};if(t&&e)return e.left===o&&e.top===o||(n=(e.left===o?t.position().left:e.left)+"px, "+(e.top===o?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),e.scaleX!==o&&e.scaleY!==o&&(n=(n.length?n+" ":"")+"scale("+e.scaleX+", "+e.scaleY+")"),n.length&&(i.transform=n),e.opacity!==o&&(i.opacity=e.opacity),e.width!==o&&(i.width=e.width),e.height!==o&&(i.height=e.height),t.css(i)},animate:function(t,e,i,a,s){n.isFunction(i)&&(a=i,i=null),n.isPlainObject(e)||t.removeAttr("style"),t.on(d,function(i){(!i||!i.originalEvent||t.is(i.originalEvent.target)&&"z-index"!=i.originalEvent.propertyName)&&(n.fancybox.stop(t),n.isPlainObject(e)?(e.scaleX!==o&&e.scaleY!==o&&(t.css("transition-duration",""),e.width=Math.round(t.width()*e.scaleX),e.height=Math.round(t.height()*e.scaleY),e.scaleX=1,e.scaleY=1,n.fancybox.setTranslate(t,e)),s===!1&&t.removeAttr("style")):s!==!0&&t.removeClass(e),n.isFunction(a)&&a(i))}),n.isNumeric(i)&&t.css("transition-duration",i+"ms"),n.isPlainObject(e)?n.fancybox.setTranslate(t,e):t.addClass(e),e.scaleX&&t.hasClass("fancybox-image-wrap")&&t.parent().addClass("fancybox-is-scaling"),t.data("timer",setTimeout(function(){t.trigger("transitionend")},i+16))},stop:function(t){clearTimeout(t.data("timer")),t.off("transitionend").css("transition-duration",""),t.hasClass("fancybox-image-wrap")&&t.parent().removeClass("fancybox-is-scaling")}},n.fn.fancybox=function(t){var e;return t=t||{},e=t.selector||!1,e?n("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},i):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},i),this},r.on("click.fb-start","[data-fancybox]",i)}}(window,document,window.jQuery||jQuery),function(t){"use strict";var e=function(e,n,o){if(e)return o=o||"","object"===t.type(o)&&(o=t.param(o,!0)),t.each(n,function(t,n){e=e.replace("$"+t,n||"")}),o.length&&(e+=(e.indexOf("?")>0?"&":"?")+o),e},n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"
},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},metacafe:{matcher:/metacafe.com\/watch\/(\d+)\/(.*)?/,type:"iframe",url:"//www.metacafe.com/embed/$1/?ap=1"},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"iframe",url:"//www.dailymotion.com/embed/video/$1"},vine:{matcher:/vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,type:"iframe",url:"//vine.co/v/$1/embed/simple"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12])+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};t(document).on("objectNeedsType.fb",function(o,i,a){var s,r,c,l,u,d,f,p=a.src||"",h=!1;s=t.extend(!0,{},n,a.opts.media),t.each(s,function(n,o){if(c=p.match(o.matcher)){if(h=o.type,d={},o.paramPlace&&c[o.paramPlace]){u=c[o.paramPlace],"?"==u[0]&&(u=u.substring(1)),u=u.split("&");for(var i=0;i<u.length;++i){var s=u[i].split("=",2);2==s.length&&(d[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return l=t.extend(!0,{},o.params,a.opts[n],d),p="function"===t.type(o.url)?o.url.call(this,c,l,a):e(o.url,c,l),r="function"===t.type(o.thumb)?o.thumb.call(this,c,l,a):e(o.thumb,c),"vimeo"===n&&(p=p.replace("&%23","#")),!1}}),h?(a.src=p,a.type=h,a.opts.thumb||a.opts.$thumb&&a.opts.$thumb.length||(a.opts.thumb=r),"iframe"===h&&(t.extend(!0,a.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}}),a.contentProvider=f,a.opts.slideClass+=" fancybox-slide--"+("gmap_place"==f||"gmap_search"==f?"map":"video"))):p&&(a.type=a.opts.defaultType)})}(window.jQuery||jQuery),function(t,e,n){"use strict";var o=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),i=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),a=function(e){var n=[];e=e.originalEvent||e||t.e,e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var o in e)e[o].pageX?n.push({x:e[o].pageX,y:e[o].pageY}):e[o].clientX&&n.push({x:e[o].clientX,y:e[o].clientY});return n},s=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},r=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea')||n.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,o=t[0].attributes,i=o.length;e<i;e++)if("data-fancybox-"===o[e].nodeName.substr(0,14))return!0;return!1},c=function(e){var n=t.getComputedStyle(e)["overflow-y"],o=t.getComputedStyle(e)["overflow-x"],i=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,a=("scroll"===o||"auto"===o)&&e.scrollWidth>e.clientWidth;return i||a},l=function(t){for(var e=!1;;){if(e=c(t.get(0)))break;if(t=t.parent(),!t.length||t.hasClass("fancybox-stage")||t.is("body"))break}return e},u=function(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(e,"ontouchstart"))};u.prototype.destroy=function(){this.$container.off(".fb.touch")},u.prototype.ontouchstart=function(o){var i=this,c=n(o.target),u=i.instance,d=u.current,f=d.$content,p="touchstart"==o.type;if(p&&i.$container.off("mousedown.fb.touch"),(!o.originalEvent||2!=o.originalEvent.button)&&c.length&&!r(c)&&!r(c.parent())&&(c.is("img")||!(o.originalEvent.clientX>c[0].clientWidth+c.offset().left))){if(!d||i.instance.isAnimating||i.instance.isClosing)return o.stopPropagation(),void o.preventDefault();if(i.realPoints=i.startPoints=a(o),i.startPoints){if(o.stopPropagation(),i.startEvent=o,i.canTap=!0,i.$target=c,i.$content=f,i.opts=d.opts.touch,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.isScrolling=!1,i.sliderStartPos=i.sliderLastPos||{top:0,left:0},i.contentStartPos=n.fancybox.getTranslate(i.$content),i.contentLastPos=null,i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canvasWidth=Math.round(d.$slide[0].clientWidth),i.canvasHeight=Math.round(d.$slide[0].clientHeight),n(e).off(".fb.touch").on(p?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(i,"ontouchend")).on(p?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(i,"ontouchmove")),n.fancybox.isMobile&&e.addEventListener("scroll",i.onscroll,!0),!i.opts&&!u.canPan()||!c.is(i.$stage)&&!i.$stage.find(c).length)return void(c.is("img")&&o.preventDefault());n.fancybox.isMobile&&(l(c)||l(c.parent()))||o.preventDefault(),1===i.startPoints.length&&("image"===d.type&&(i.contentStartPos.width>i.canvasWidth+1||i.contentStartPos.height>i.canvasHeight+1)?(n.fancybox.stop(i.$content),i.$content.css("transition-duration",""),i.isPanning=!0):i.isSwiping=!0,i.$container.addClass("fancybox-controls--isGrabbing")),2!==i.startPoints.length||u.isAnimating||d.hasError||"image"!==d.type||!d.isLoaded&&!d.$ghost||(i.canTap=!1,i.isSwiping=!1,i.isPanning=!1,i.isZooming=!0,n.fancybox.stop(i.$content),i.$content.css("transition-duration",""),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-n(t).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-n(t).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=s(i.startPoints[0],i.startPoints[1]))}}},u.prototype.onscroll=function(t){self.isScrolling=!0},u.prototype.ontouchmove=function(t){var e=this,o=n(t.target);return e.isScrolling||!o.is(e.$stage)&&!e.$stage.find(o).length?void(e.canTap=!1):(e.newPoints=a(t),void((e.opts||e.instance.canPan())&&e.newPoints&&e.newPoints.length&&(e.isSwiping&&e.isSwiping===!0||t.preventDefault(),e.distanceX=s(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=s(e.newPoints[0],e.startPoints[0],"y"),e.distance=s(e.newPoints[0],e.startPoints[0]),e.distance>0&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))))},u.prototype.onSwipe=function(e){var a,s=this,r=s.isSwiping,c=s.sliderStartPos.left||0;if(r!==!0)"x"==r&&(s.distanceX>0&&(s.instance.group.length<2||0===s.instance.current.index&&!s.instance.current.opts.loop)?c+=Math.pow(s.distanceX,.8):s.distanceX<0&&(s.instance.group.length<2||s.instance.current.index===s.instance.group.length-1&&!s.instance.current.opts.loop)?c-=Math.pow(-s.distanceX,.8):c+=s.distanceX),s.sliderLastPos={top:"x"==r?0:s.sliderStartPos.top+s.distanceY,left:c},s.requestId&&(i(s.requestId),s.requestId=null),s.requestId=o(function(){s.sliderLastPos&&(n.each(s.instance.slides,function(t,e){var o=e.pos-s.instance.currPos;n.fancybox.setTranslate(e.$slide,{top:s.sliderLastPos.top,left:s.sliderLastPos.left+o*s.canvasWidth+o*e.opts.gutter})}),s.$container.addClass("fancybox-is-sliding"))});else if(Math.abs(s.distance)>10){if(s.canTap=!1,s.instance.group.length<2&&s.opts.vertical?s.isSwiping="y":s.instance.isDragging||s.opts.vertical===!1||"auto"===s.opts.vertical&&n(t).width()>800?s.isSwiping="x":(a=Math.abs(180*Math.atan2(s.distanceY,s.distanceX)/Math.PI),s.isSwiping=a>45&&a<135?"y":"x"),s.canTap=!1,"y"===s.isSwiping&&n.fancybox.isMobile&&(l(s.$target)||l(s.$target.parent())))return void(s.isScrolling=!0);s.instance.isDragging=s.isSwiping,s.startPoints=s.newPoints,n.each(s.instance.slides,function(t,e){n.fancybox.stop(e.$slide),e.$slide.css("transition-duration",""),e.inTransition=!1,e.pos===s.instance.current.pos&&(s.sliderStartPos.left=n.fancybox.getTranslate(e.$slide).left)}),s.instance.SlideShow&&s.instance.SlideShow.isActive&&s.instance.SlideShow.stop()}},u.prototype.onPan=function(){var t=this;return s(t.newPoints[0],t.realPoints[0])<(n.fancybox.isMobile?10:5)?void(t.startPoints=t.newPoints):(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&(i(t.requestId),t.requestId=null),void(t.requestId=o(function(){n.fancybox.setTranslate(t.$content,t.contentLastPos)})))},u.prototype.limitMovement=function(){var t,e,n,o,i,a,s=this,r=s.canvasWidth,c=s.canvasHeight,l=s.distanceX,u=s.distanceY,d=s.contentStartPos,f=d.left,p=d.top,h=d.width,g=d.height;return i=h>r?f+l:f,a=p+u,t=Math.max(0,.5*r-.5*h),e=Math.max(0,.5*c-.5*g),n=Math.min(r-h,.5*r-.5*h),o=Math.min(c-g,.5*c-.5*g),h>r&&(l>0&&i>t&&(i=t-1+Math.pow(-t+f+l,.8)||0),l<0&&i<n&&(i=n+1-Math.pow(n-f-l,.8)||0)),g>c&&(u>0&&a>e&&(a=e-1+Math.pow(-e+p+u,.8)||0),u<0&&a<o&&(a=o+1-Math.pow(o-p-u,.8)||0)),{top:a,left:i,scaleX:d.scaleX,scaleY:d.scaleY}},u.prototype.limitPosition=function(t,e,n,o){var i=this,a=i.canvasWidth,s=i.canvasHeight;return n>a?(t=t>0?0:t,t=t<a-n?a-n:t):t=Math.max(0,a/2-n/2),o>s?(e=e>0?0:e,e=e<s-o?s-o:e):e=Math.max(0,s/2-o/2),{top:e,left:t}},u.prototype.onZoom=function(){var e=this,a=e.contentStartPos.width,r=e.contentStartPos.height,c=e.contentStartPos.left,l=e.contentStartPos.top,u=s(e.newPoints[0],e.newPoints[1]),d=u/e.startDistanceBetweenFingers,f=Math.floor(a*d),p=Math.floor(r*d),h=(a-f)*e.percentageOfImageAtPinchPointX,g=(r-p)*e.percentageOfImageAtPinchPointY,b=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),m=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),y=b-e.centerPointStartX,v=m-e.centerPointStartY,x=c+(h+y),w=l+(g+v),$={top:w,left:x,scaleX:e.contentStartPos.scaleX*d,scaleY:e.contentStartPos.scaleY*d};e.canTap=!1,e.newWidth=f,e.newHeight=p,e.contentLastPos=$,e.requestId&&(i(e.requestId),e.requestId=null),e.requestId=o(function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})},u.prototype.ontouchend=function(t){var o=this,s=Math.max((new Date).getTime()-o.startTime,1),r=o.isSwiping,c=o.isPanning,l=o.isZooming,u=o.isScrolling;return o.endPoints=a(t),o.$container.removeClass("fancybox-controls--isGrabbing"),n(e).off(".fb.touch"),e.removeEventListener("scroll",o.onscroll,!0),o.requestId&&(i(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.isScrolling=!1,o.instance.isDragging=!1,o.canTap?o.onTap(t):(o.speed=366,o.velocityX=o.distanceX/s*.5,o.velocityY=o.distanceY/s*.5,o.speedX=Math.max(.5*o.speed,Math.min(1.5*o.speed,1/Math.abs(o.velocityX)*o.speed)),void(c?o.endPanning():l?o.endZooming():o.endSwiping(r,u)))},u.prototype.endSwiping=function(t,e){var o=this,i=!1,a=o.instance.group.length;o.sliderLastPos=null,"y"==t&&!e&&Math.abs(o.distanceY)>50?(n.fancybox.animate(o.instance.current.$slide,{top:o.sliderStartPos.top+o.distanceY+150*o.velocityY,opacity:0},150),i=o.instance.close(!0,300)):"x"==t&&o.distanceX>50&&a>1?i=o.instance.previous(o.speedX):"x"==t&&o.distanceX<-50&&a>1&&(i=o.instance.next(o.speedX)),i!==!1||"x"!=t&&"y"!=t||(e||a<2?o.instance.centerSlide(o.instance.current,150):o.instance.jumpTo(o.instance.current.index)),o.$container.removeClass("fancybox-is-sliding")},u.prototype.endPanning=function(){var t,e,o,i=this;i.contentLastPos&&(i.opts.momentum===!1?(t=i.contentLastPos.left,e=i.contentLastPos.top):(t=i.contentLastPos.left+i.velocityX*i.speed,e=i.contentLastPos.top+i.velocityY*i.speed),o=i.limitPosition(t,e,i.contentStartPos.width,i.contentStartPos.height),o.width=i.contentStartPos.width,o.height=i.contentStartPos.height,n.fancybox.animate(i.$content,o,330))},u.prototype.endZooming=function(){var t,e,o,i,a=this,s=a.instance.current,r=a.newWidth,c=a.newHeight;a.contentLastPos&&(t=a.contentLastPos.left,e=a.contentLastPos.top,i={top:e,left:t,width:r,height:c,scaleX:1,scaleY:1},n.fancybox.setTranslate(a.$content,i),r<a.canvasWidth&&c<a.canvasHeight?a.instance.scaleToFit(150):r>s.width||c>s.height?a.instance.scaleToActual(a.centerPointStartX,a.centerPointStartY,150):(o=a.limitPosition(t,e,r,c),n.fancybox.setTranslate(a.content,n.fancybox.getTranslate(a.$content)),n.fancybox.animate(a.$content,o,150)))},u.prototype.onTap=function(t){var e,o=this,i=n(t.target),s=o.instance,r=s.current,c=t&&a(t)||o.startPoints,l=c[0]?c[0].x-o.$stage.offset().left:0,u=c[0]?c[0].y-o.$stage.offset().top:0,d=function(e){var i=r.opts[e];if(n.isFunction(i)&&(i=i.apply(s,[r,t])),i)switch(i){case"close":s.close(o.startEvent);break;case"toggleControls":s.toggleControls(!0);break;case"next":s.next();break;case"nextOrClose":s.group.length>1?s.next():s.close(o.startEvent);break;case"zoom":"image"==r.type&&(r.isLoaded||r.$ghost)&&(s.canPan()?s.scaleToFit():s.isScaledDown()?s.scaleToActual(l,u):s.group.length<2&&s.close(o.startEvent))}};if((!t.originalEvent||2!=t.originalEvent.button)&&(i.is("img")||!(l>i[0].clientWidth+i.offset().left))){if(i.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))e="Outside";else if(i.is(".fancybox-slide"))e="Slide";else{if(!s.current.$content||!s.current.$content.find(i).addBack().filter(i).length)return;e="Content"}if(o.tapped){if(clearTimeout(o.tapped),o.tapped=null,Math.abs(l-o.tapX)>50||Math.abs(u-o.tapY)>50)return this;d("dblclick"+e)}else o.tapX=l,o.tapY=u,r.opts["dblclick"+e]&&r.opts["dblclick"+e]!==r.opts["click"+e]?o.tapped=setTimeout(function(){o.tapped=null,d("click"+e)},500):d("click"+e);return this}},n(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new u(e))})}(window,document,window.jQuery||jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg viewBox="0 0 40 40"><path d="M13,12 L27,20 L13,27 Z" /><path d="M15,10 v19 M23,10 v19" /></svg></button>'},slideShow:{autoStart:!1,speed:3e3}});var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this;t.$button=t.instance.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),(t.instance.group.length<2||!t.instance.group[t.instance.currIndex].opts.slideShow)&&t.$button.hide()},set:function(t){var e=this;e.instance&&e.instance.current&&(t===!0||e.instance.current.opts.loop||e.instance.currIndex<e.instance.group.length-1)?e.timer=setTimeout(function(){e.isActive&&e.instance.jumpTo((e.instance.currIndex+1)%e.instance.group.length)},e.instance.current.opts.slideShow.speed):(e.stop(),e.instance.idleSecondsCounter=0,e.instance.showControls())},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null},start:function(){var t=this,e=t.instance.current;e&&(t.isActive=!0,t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.set(!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",e.opts.i18n[e.opts.lang].PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new n(e))},"beforeShow.fb":function(t,e,n,o){var i=e&&e.SlideShow;o?i&&n.opts.slideShow.autoStart&&i.start():i&&i.isActive&&i.clear()},"afterShow.fb":function(t,e,n){var o=e&&e.SlideShow;o&&o.isActive&&o.set()},"afterKeydown.fb":function(n,o,i,a,s){var r=o&&o.SlideShow;!r||!i.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(a.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var n=e&&e.SlideShow;n&&n.stop()}}),e(t).on("visibilitychange",function(){var n=e.fancybox.getInstance(),o=n&&n.SlideShow;o&&o.isActive&&(t.hidden?o.clear():o.set())})}(document,window.jQuery||jQuery),function(t,e){"use strict";var n=function(){var e,n,o,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a={};for(n=0;n<i.length;n++)if(e=i[n],e&&e[1]in t){for(o=0;o<e.length;o++)a[i[0][o]]=e[o];return a}return!1}();if(!n)return void(e&&e.fancybox&&(e.fancybox.defaults.btnTpl.fullScreen=!1));var o={request:function(e){e=e||t.documentElement,e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}"><svg viewBox="0 0 40 40"><path d="M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z" /></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on({"onInit.fb":function(t,e){var n;e&&e.group[e.currIndex].opts.fullScreen?(n=e.$refs.container,n.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),o.toggle(n[0])}),e.opts.fullScreen&&e.opts.fullScreen.autoStart===!0&&o.request(n[0]),e.FullScreen=o):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()},"afterKeydown.fb":function(t,e,n,o,i){e&&e.FullScreen&&70===i&&(o.preventDefault(),e.FullScreen.toggle(e.$refs.container[0]))},"beforeClose.fb":function(t){t&&t.FullScreen&&o.exit()}}),e(t).on(n.fullscreenchange,function(){var t=o.isFullscreen(),n=e.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.current.$content.css("transition","none"),n.isAnimating=!1,n.update(!0,!0,0)),n.trigger("onFullscreenChange",t),n.$refs.container.toggleClass("fancybox-is-fullscreen",t))})}(document,window.jQuery||jQuery),function(t,e){"use strict";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg viewBox="0 0 120 120"><path d="M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z" /></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var n=function(t){this.init(t)};e.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this;e.instance=t,t.Thumbs=e;var n=t.group[0],o=t.group[1];e.opts=t.group[t.currIndex].opts.thumbs,e.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]"),e.opts&&n&&o&&("image"==n.type||n.opts.thumb||n.opts.$thumb)&&("image"==o.type||o.opts.thumb||o.opts.$thumb)?(e.$button.show().on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var t,n,o=this,i=o.instance,a=o.opts.parentEl;o.$grid=e('<div class="fancybox-thumbs fancybox-thumbs-'+o.opts.axis+'"></div>').appendTo(i.$refs.container.find(a).addBack().filter(a)),t="<ul>",e.each(i.group,function(e,o){n=o.opts.thumb||(o.opts.$thumb?o.opts.$thumb.attr("src"):null),n||"image"!==o.type||(n=o.src),n&&n.length&&(t+='<li data-index="'+e+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+n+'" /></li>')}),t+="</ul>",o.$list=e(t).appendTo(o.$grid).on("click","li",function(){i.jumpTo(e(this).data("index"))}),o.$list.find("img").hide().one("load",function(){var t,n,o,i,a=e(this).parent().removeClass("fancybox-thumbs-loading"),s=a.outerWidth(),r=a.outerHeight();t=this.naturalWidth||this.width,n=this.naturalHeight||this.height,o=t/s,i=n/r,o>=1&&i>=1&&(o>i?(t/=i,n=r):(t=s,n/=o)),e(this).css({width:Math.floor(t),height:Math.floor(n),"margin-top":n>r?Math.floor(.3*r-.3*n):Math.floor(.5*r-.5*n),"margin-left":Math.floor(.5*s-.5*t)}).show()}).each(function(){this.src=e(this).data("src")}),"x"===o.opts.axis&&o.$list.width(parseInt(o.$grid.css("padding-right"))+i.group.length*o.$list.children().eq(0).outerWidth(!0)+"px")},focus:function(t){var e,n,o=this,i=o.$list;o.instance.current&&(e=i.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+o.instance.current.index+'"]').addClass("fancybox-thumbs-active"),n=e.position(),"y"===o.opts.axis&&(n.top<0||n.top>i.height()-e.outerHeight())?i.stop().animate({scrollTop:i.scrollTop()+n.top},t):"x"===o.opts.axis&&(n.left<i.parent().scrollLeft()||n.left>i.parent().scrollLeft()+(i.parent().width()-e.outerWidth()))&&i.parent().stop().animate({scrollLeft:n.left},t))},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus(0)):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var o;e&&!e.Thumbs&&(o=new n(e),o.isActive&&o.opts.autoStart===!0&&o.show())},"beforeShow.fb":function(t,e,n,o){var i=e&&e.Thumbs;i&&i.isVisible&&i.focus(o?0:250)},"afterKeydown.fb":function(t,e,n,o,i){var a=e&&e.Thumbs;a&&a.isActive&&71===i&&(o.preventDefault(),a.toggle())},"beforeClose.fb":function(t,e){var n=e&&e.Thumbs;n&&n.isVisible&&n.opts.hideOnClose!==!1&&n.$grid.hide()}})}(document,window.jQuery),function(t,e){"use strict";function n(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg viewBox="0 0 40 40"><path d="M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z"></svg></button>'},share:{tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p class="fancybox-share__links"><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",function(){var t,o,i=e.fancybox.getInstance();i&&(t=i.current.opts.hash===!1?i.current.src:window.location,o=i.current.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===i.current.type?encodeURIComponent(i.current.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,n(t)).replace(/\{\{descr\}\}/g,i.$caption?encodeURIComponent(i.$caption.text()):""),e.fancybox.open({src:i.translate(i,o),type:"html",opts:{animationEffect:"fade",animationDuration:250,afterLoad:function(t,e){e.$content.find(".fancybox-share__links a").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})}}}))})}(document,window.jQuery||jQuery),function(t,e,n){"use strict";function o(){var t=e.location.hash.substr(1),n=t.split("-"),o=n.length>1&&/^\+?\d+$/.test(n[n.length-1])?parseInt(n.pop(-1),10)||1:1,i=n.join("-");return o<1&&(o=1),{hash:t,index:o,gallery:i}}function i(t){var e;""!==t.gallery&&(e=n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1),e.length||(e=n("#"+n.escapeSelector(t.gallery))),e.length&&(s=!1,e.trigger("click")))}function a(t){var e;return!!t&&(e=t.current?t.current.opts:t.opts,e.hash||(e.$orig?e.$orig.data("fancybox"):""))}n.escapeSelector||(n.escapeSelector=function(t){var e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,n=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t};return(t+"").replace(e,n)});var s=!0,r=null,c=null;n(function(){n.fancybox.defaults.hash!==!1&&(n(t).on({"onInit.fb":function(t,e){var n,i;e.group[e.currIndex].opts.hash!==!1&&(n=o(),i=a(e),i&&n.gallery&&i==n.gallery&&(e.currIndex=n.index-1))},"beforeShow.fb":function(n,o,i){var l;i&&i.opts.hash!==!1&&(l=a(o),l&&""!==l&&(e.location.hash.indexOf(l)<0&&(o.opts.origHash=e.location.hash),r=l+(o.group.length>1?"-"+(i.index+1):""),"replaceState"in e.history?(c&&clearTimeout(c),c=setTimeout(function(){e.history[s?"pushState":"replaceState"]({},t.title,e.location.pathname+e.location.search+"#"+r),c=null,s=!1},300)):e.location.hash=r))},"beforeClose.fb":function(o,i,s){var l,u;c&&clearTimeout(c),s.opts.hash!==!1&&(l=a(i),u=i&&i.opts.origHash?i.opts.origHash:"",l&&""!==l&&("replaceState"in history?e.history.replaceState({},t.title,e.location.pathname+e.location.search+u):(e.location.hash=u,n(e).scrollTop(i.scrollTop).scrollLeft(i.scrollLeft))),r=null)}}),n(e).on("hashchange.fb",function(){var t=o();n.fancybox.getInstance()?!r||r===t.gallery+"-"+t.index||1===t.index&&r==t.gallery||(r=null,n.fancybox.close()):""!==t.gallery&&i(t)}),setTimeout(function(){i(o())},50))})}(document,window,window.jQuery||jQuery),function(t,e){"use strict";var n=(new Date).getTime();e(t).on({"onInit.fb":function(t,e,o){e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var o=e.current,i=(new Date).getTime();e.group.length<1||o.opts.wheel===!1||"auto"===o.opts.wheel&&"image"!==o.type||(t.preventDefault(),t.stopPropagation(),o.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-n<250||(n=i,e[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,window.jQuery||jQuery);
/*!
 * Nestable jQuery Plugin - Copyright (c) 2012 David Bushell - http://dbushell.com/
 * Dual-licensed under the BSD or MIT licenses
 */

;(function($, window, document, undefined)
{
    var hasTouch = 'ontouchstart' in document;

    /**
     * Detect CSS pointer-events property
     * events are normally disabled on the dragging element to avoid conflicts
     * https://github.com/ausi/Feature-detection-technique-for-pointer-events/blob/master/modernizr-pointerevents.js
     */
    var hasPointerEvents = (function()
    {
        var el    = document.createElement('div'),
            docEl = document.documentElement;
        if (!('pointerEvents' in el.style)) {
            return false;
        }
        el.style.pointerEvents = 'auto';
        el.style.pointerEvents = 'x';
        docEl.appendChild(el);
        var supports = window.getComputedStyle && window.getComputedStyle(el, '').pointerEvents === 'auto';
        docEl.removeChild(el);
        return !!supports;
    })();

    var defaults = {
            listNodeName    : 'ol',
            itemNodeName    : 'li',
            rootClass       : 'dd',
            listClass       : 'dd-list',
            itemClass       : 'dd-item',
            dragClass       : 'dd-dragel',
            handleClass     : 'dd-handle',
            collapsedClass  : 'dd-collapsed',
            placeClass      : 'dd-placeholder',
            noDragClass     : 'dd-nodrag',
            emptyClass      : 'dd-empty',
            expandBtnHTML   : '<button data-action="expand" type="button">Expand</button>',
            collapseBtnHTML : '<button data-action="collapse" type="button">Collapse</button>',
            group           : 0,
            maxDepth        : 5,
            threshold       : 20
        };

    function Plugin(element, options)
    {
        this.w  = $(document);
        this.el = $(element);
        this.options = $.extend({}, defaults, options);
        this.init();
    }

    Plugin.prototype = {

        init: function()
        {
            var list = this;

            list.reset();

            list.el.data('nestable-group', this.options.group);

            list.placeEl = $('<div class="' + list.options.placeClass + '"/>');

            $.each(this.el.find(list.options.itemNodeName), function(k, el) {
                list.setParent($(el));
            });

            list.el.on('click', 'button', function(e) {
                if (list.dragEl) {
                    return;
                }
                var target = $(e.currentTarget),
                    action = target.data('action'),
                    item   = target.parent(list.options.itemNodeName);
                if (action === 'collapse') {
                    list.collapseItem(item);
                }
                if (action === 'expand') {
                    list.expandItem(item);
                }
            });

            var onStartEvent = function(e)
            {
                var handle = $(e.target);
                if (!handle.hasClass(list.options.handleClass)) {
                    if (handle.closest('.' + list.options.noDragClass).length) {
                        return;
                    }
                    handle = handle.closest('.' + list.options.handleClass);
                }

                if (!handle.length || list.dragEl) {
                    return;
                }

                list.isTouch = /^touch/.test(e.type);
                if (list.isTouch && e.touches.length !== 1) {
                    return;
                }

                e.preventDefault();
                list.dragStart(e.touches ? e.touches[0] : e);
            };

            var onMoveEvent = function(e)
            {
                if (list.dragEl) {
                    e.preventDefault();
                    list.dragMove(e.touches ? e.touches[0] : e);
                }
            };

            var onEndEvent = function(e)
            {
                if (list.dragEl) {
                    e.preventDefault();
                    list.dragStop(e.touches ? e.touches[0] : e);
                }
            };

            if (hasTouch) {
                list.el[0].addEventListener('touchstart', onStartEvent, false);
                window.addEventListener('touchmove', onMoveEvent, false);
                window.addEventListener('touchend', onEndEvent, false);
                window.addEventListener('touchcancel', onEndEvent, false);
            }

            list.el.on('mousedown', onStartEvent);
            list.w.on('mousemove', onMoveEvent);
            list.w.on('mouseup', onEndEvent);

        },

        serialize: function()
        {
            var data,
                depth = 0,
                list  = this;
                step  = function(level, depth)
                {
                    var array = [ ],
                        items = level.children(list.options.itemNodeName);
                    items.each(function()
                    {
                        var li   = $(this),
                            item = $.extend({}, li.data()),
                            sub  = li.children(list.options.listNodeName);
                        if (sub.length) {
                            item.children = step(sub, depth + 1);
                        }
                        array.push(item);
                    });
                    return array;
                };
            data = step(list.el.find(list.options.listNodeName).first(), depth);
            return data;
        },

        serialise: function()
        {
            return this.serialize();
        },

        reset: function()
        {
            this.mouse = {
                offsetX   : 0,
                offsetY   : 0,
                startX    : 0,
                startY    : 0,
                lastX     : 0,
                lastY     : 0,
                nowX      : 0,
                nowY      : 0,
                distX     : 0,
                distY     : 0,
                dirAx     : 0,
                dirX      : 0,
                dirY      : 0,
                lastDirX  : 0,
                lastDirY  : 0,
                distAxX   : 0,
                distAxY   : 0
            };
            this.isTouch    = false;
            this.moving     = false;
            this.dragEl     = null;
            this.dragRootEl = null;
            this.dragDepth  = 0;
            this.hasNewRoot = false;
            this.pointEl    = null;
        },

        expandItem: function(li)
        {
            li.removeClass(this.options.collapsedClass);
            li.children('[data-action="expand"]').hide();
            li.children('[data-action="collapse"]').show();
            li.children(this.options.listNodeName).show();
        },

        collapseItem: function(li)
        {
            var lists = li.children(this.options.listNodeName);
            if (lists.length) {
                li.addClass(this.options.collapsedClass);
                li.children('[data-action="collapse"]').hide();
                li.children('[data-action="expand"]').show();
                li.children(this.options.listNodeName).hide();
            }
        },

        expandAll: function()
        {
            var list = this;
            list.el.find(list.options.itemNodeName).each(function() {
                list.expandItem($(this));
            });
        },

        collapseAll: function()
        {
            var list = this;
            list.el.find(list.options.itemNodeName).each(function() {
                list.collapseItem($(this));
            });
        },

        setParent: function(li)
        {
            if (li.children(this.options.listNodeName).length) {
                li.prepend($(this.options.expandBtnHTML));
                li.prepend($(this.options.collapseBtnHTML));
            }
            li.children('[data-action="expand"]').hide();
        },

        unsetParent: function(li)
        {
            li.removeClass(this.options.collapsedClass);
            li.children('[data-action]').remove();
            li.children(this.options.listNodeName).remove();
        },

        dragStart: function(e)
        {
            var mouse    = this.mouse,
                target   = $(e.target),
                dragItem = target.closest(this.options.itemNodeName);

            this.placeEl.css('height', dragItem.height());

            mouse.offsetX = e.offsetX !== undefined ? e.offsetX : e.pageX - target.offset().left;
            mouse.offsetY = e.offsetY !== undefined ? e.offsetY : e.pageY - target.offset().top;
            mouse.startX = mouse.lastX = e.pageX;
            mouse.startY = mouse.lastY = e.pageY;

            this.dragRootEl = this.el;

            this.dragEl = $(document.createElement(this.options.listNodeName)).addClass(this.options.listClass + ' ' + this.options.dragClass);
            this.dragEl.css('width', dragItem.width());

            dragItem.after(this.placeEl);
            dragItem[0].parentNode.removeChild(dragItem[0]);
            dragItem.appendTo(this.dragEl);

            $(document.body).append(this.dragEl);
            this.dragEl.css({
                'left' : e.pageX - mouse.offsetX,
                'top'  : e.pageY - mouse.offsetY
            });
            // total depth of dragging item
            var i, depth,
                items = this.dragEl.find(this.options.itemNodeName);
            for (i = 0; i < items.length; i++) {
                depth = $(items[i]).parents(this.options.listNodeName).length;
                if (depth > this.dragDepth) {
                    this.dragDepth = depth;
                }
            }
        },

        dragStop: function(e)
        {
            var el = this.dragEl.children(this.options.itemNodeName).first();
            el[0].parentNode.removeChild(el[0]);
            this.placeEl.replaceWith(el);

            this.dragEl.remove();
            this.el.trigger('change');
            if (this.hasNewRoot) {
                this.dragRootEl.trigger('change');
            }
            this.reset();
        },

        dragMove: function(e)
        {
            var list, parent, prev, next, depth,
                opt   = this.options,
                mouse = this.mouse;

            this.dragEl.css({
                'left' : e.pageX - mouse.offsetX,
                'top'  : e.pageY - mouse.offsetY
            });

            // mouse position last events
            mouse.lastX = mouse.nowX;
            mouse.lastY = mouse.nowY;
            // mouse position this events
            mouse.nowX  = e.pageX;
            mouse.nowY  = e.pageY;
            // distance mouse moved between events
            mouse.distX = mouse.nowX - mouse.lastX;
            mouse.distY = mouse.nowY - mouse.lastY;
            // direction mouse was moving
            mouse.lastDirX = mouse.dirX;
            mouse.lastDirY = mouse.dirY;
            // direction mouse is now moving (on both axis)
            mouse.dirX = mouse.distX === 0 ? 0 : mouse.distX > 0 ? 1 : -1;
            mouse.dirY = mouse.distY === 0 ? 0 : mouse.distY > 0 ? 1 : -1;
            // axis mouse is now moving on
            var newAx   = Math.abs(mouse.distX) > Math.abs(mouse.distY) ? 1 : 0;

            // do nothing on first move
            if (!mouse.moving) {
                mouse.dirAx  = newAx;
                mouse.moving = true;
                return;
            }

            // calc distance moved on this axis (and direction)
            if (mouse.dirAx !== newAx) {
                mouse.distAxX = 0;
                mouse.distAxY = 0;
            } else {
                mouse.distAxX += Math.abs(mouse.distX);
                if (mouse.dirX !== 0 && mouse.dirX !== mouse.lastDirX) {
                    mouse.distAxX = 0;
                }
                mouse.distAxY += Math.abs(mouse.distY);
                if (mouse.dirY !== 0 && mouse.dirY !== mouse.lastDirY) {
                    mouse.distAxY = 0;
                }
            }
            mouse.dirAx = newAx;

            /**
             * move horizontal
             */
            if (mouse.dirAx && mouse.distAxX >= opt.threshold) {
                // reset move distance on x-axis for new phase
                mouse.distAxX = 0;
                prev = this.placeEl.prev(opt.itemNodeName);
                // increase horizontal level if previous sibling exists and is not collapsed
                if (mouse.distX > 0 && prev.length && !prev.hasClass(opt.collapsedClass)) {
                    // cannot increase level when item above is collapsed
                    list = prev.find(opt.listNodeName).last();
                    // check if depth limit has reached
                    depth = this.placeEl.parents(opt.listNodeName).length;
                    if (depth + this.dragDepth <= opt.maxDepth) {
                        // create new sub-level if one doesn't exist
                        if (!list.length) {
                            list = $('<' + opt.listNodeName + '/>').addClass(opt.listClass);
                            list.append(this.placeEl);
                            prev.append(list);
                            this.setParent(prev);
                        } else {
                            // else append to next level up
                            list = prev.children(opt.listNodeName).last();
                            list.append(this.placeEl);
                        }
                    }
                }
                // decrease horizontal level
                if (mouse.distX < 0) {
                    // we can't decrease a level if an item preceeds the current one
                    next = this.placeEl.next(opt.itemNodeName);
                    if (!next.length) {
                        parent = this.placeEl.parent();
                        this.placeEl.closest(opt.itemNodeName).after(this.placeEl);
                        if (!parent.children().length) {
                            this.unsetParent(parent.parent());
                        }
                    }
                }
            }

            var isEmpty = false;

            // find list item under cursor
            if (!hasPointerEvents) {
                this.dragEl[0].style.visibility = 'hidden';
            }
            this.pointEl = $(document.elementFromPoint(e.pageX - document.body.scrollLeft, e.pageY - (window.pageYOffset || document.documentElement.scrollTop)));
            if (!hasPointerEvents) {
                this.dragEl[0].style.visibility = 'visible';
            }
            if (this.pointEl.hasClass(opt.handleClass)) {
                this.pointEl = this.pointEl.parent(opt.itemNodeName);
            }
            if (this.pointEl.hasClass(opt.emptyClass)) {
                isEmpty = true;
            }
            else if (!this.pointEl.length || !this.pointEl.hasClass(opt.itemClass)) {
                return;
            }

            // find parent list of item under cursor
            var pointElRoot = this.pointEl.closest('.' + opt.rootClass),
                isNewRoot   = this.dragRootEl.data('nestable-id') !== pointElRoot.data('nestable-id');

            /**
             * move vertical
             */
            if (!mouse.dirAx || isNewRoot || isEmpty) {
                // check if groups match if dragging over new root
                if (isNewRoot && opt.group !== pointElRoot.data('nestable-group')) {
                    return;
                }
                // check depth limit
                depth = this.dragDepth - 1 + this.pointEl.parents(opt.listNodeName).length;
                if (depth > opt.maxDepth) {
                    return;
                }
                var before = e.pageY < (this.pointEl.offset().top + this.pointEl.height() / 2);
                    parent = this.placeEl.parent();
                // if empty create new list to replace empty placeholder
                if (isEmpty) {
                    list = $(document.createElement(opt.listNodeName)).addClass(opt.listClass);
                    list.append(this.placeEl);
                    this.pointEl.replaceWith(list);
                }
                else if (before) {
                    this.pointEl.before(this.placeEl);
                }
                else {
                    this.pointEl.after(this.placeEl);
                }
                if (!parent.children().length) {
                    this.unsetParent(parent.parent());
                }
                if (!this.dragRootEl.find(opt.itemNodeName).length) {
                    this.dragRootEl.append('<div class="' + opt.emptyClass + '"/>');
                }
                // parent root list has changed
                if (isNewRoot) {
                    this.dragRootEl = pointElRoot;
                    this.hasNewRoot = this.el[0] !== this.dragRootEl[0];
                }
            }
        }

    };

    $.fn.nestable = function(params)
    {
        var lists  = this,
            retval = this;

        lists.each(function()
        {
            var plugin = $(this).data("nestable");

            if (!plugin) {
                $(this).data("nestable", new Plugin(this, params));
                $(this).data("nestable-id", new Date().getTime());
            } else {
                if (typeof params === 'string' && typeof plugin[params] === 'function') {
                    retval = plugin[params]();
                }
            }
        });

        return retval || lists;
    };

})(window.jQuery || window.Zepto, window, document);

		$(document).ready(function() {
			/*
			 *  Simple image gallery. Uses default settings
			 */

			$('.fancybox').fancybox();

			/*
			 *  Different effects
			 */

			// Change title type, overlay closing speed
			$(".fancybox-effects-a").fancybox({
				helpers: {
					title : {
						type : 'outside'
					},
					overlay : {
						speedOut : 0
					}
				}
			});

			// Disable opening and closing animations, change title type
			$(".fancybox-effects-b").fancybox({
				openEffect  : 'none',
				closeEffect	: 'none',

				helpers : {
					title : {
						type : 'over'
					}
				}
			});

			// Set custom style, close if clicked, change title type and overlay color
			$(".fancybox-effects-c").fancybox({
				wrapCSS    : 'fancybox-custom',
				closeClick : true,

				openEffect : 'none',

				helpers : {
					title : {
						type : 'inside'
					},
					overlay : {
						css : {
							'background' : 'rgba(238,238,238,0.85)'
						}
					}
				}
			});

			// Remove padding, set opening and closing animations, close if clicked and disable overlay
			$(".fancybox-effects-d").fancybox({
				padding: 0,

				openEffect : 'elastic',
				openSpeed  : 150,

				closeEffect : 'elastic',
				closeSpeed  : 150,

				closeClick : true,

				helpers : {
					overlay : null
				}
			});

			/*
			 *  Button helper. Disable animations, hide close button, change title type and content
			 */

			$('.fancybox-buttons').fancybox({
				openEffect  : 'none',
				closeEffect : 'none',

				prevEffect : 'none',
				nextEffect : 'none',

				closeBtn  : false,

				helpers : {
					title : {
						type : 'inside'
					},
					buttons	: {}
				},

				afterLoad : function() {
					this.title = 'Image ' + (this.index + 1) + ' of ' + (this.title ? ' - ' + this.title : '');
				}
			});


			/*
			 *  Thumbnail helper. Disable animations, hide close button, arrows and slide to next gallery item if clicked
			 */

			$('.fancybox-thumbs').fancybox({
				prevEffect : 'none',
				nextEffect : 'none',

				closeBtn  : false,
				arrows    : false,
				nextClick : true,

				helpers : {
					thumbs : {
						width  : 50,
						height : 50
					}
				}
			});

			/*
			 *  Media helper. Group items, disable animations, hide arrows, enable media and button helpers.
			*/
			$('.fancybox-media')
				.attr('rel', 'media-gallery')
				.fancybox({
					openEffect : 'none',
					closeEffect : 'none',
					prevEffect : 'none',
					nextEffect : 'none',

					arrows : false,
					helpers : {
						media : {},
						buttons : {}
					}
				});

			/*
			 *  Open manually
			 */

			$("#fancybox-manual-a").click(function() {
				$.fancybox.open('1_b.jpg');
			});

			$("#fancybox-manual-b").click(function() {
				$.fancybox.open({
					href : 'iframe.html',
					type : 'iframe',
					padding : 5
				});
			});

			$("#fancybox-manual-c").click(function() {
				$.fancybox.open([
					{
						href : '1_b.jpg',
						title : 'My title'
					}, {
						href : '2_b.jpg',
						title : '2nd title'
					}, {
						href : '3_b.jpg'
					}
				], {
					helpers : {
						thumbs : {
							width: 75,
							height: 50
						}
					}
				});
			});


		});
/*
 * GoJS v1.6.24 JavaScript Library for HTML Diagrams
 * Northwoods Software, https://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2017 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: https://gojs.net/1.6.24/doc/license.html.
 */

(function(window) { var g,ea={};if(!window.document||void 0===window.document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),f=Math.max(8,16-(c-a)),h=window.setTimeout(function(){b(c+f)},f);a=c+f;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){window.clearTimeout(a)})})();ea.Debug=null;
var v={dd:1,Nc:2,Xc:4,Wc:8,Pm:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),eE:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),fE:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),TJ:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Edge/"),bk:void 0!==window.navigator&&void 0!==window.navigator.platform&&0<=window.navigator.platform.toUpperCase().indexOf("MAC"),
gE:void 0!==window.navigator&&void 0!==window.navigator.platform&&null!==window.navigator.platform.match(/(iPhone|iPod|iPad)/i),xD:function(a,b,c){var d=-1;return function(){var e=this,f=arguments;-1!==d&&v.clearTimeout(d);d=v.setTimeout(function(){d=-1;c||a.apply(e,f)},b);c&&!d&&a.apply(e,f)}},setTimeout:function(a,b){return window.setTimeout(a,b)},clearTimeout:function(a){window.clearTimeout(a)},createElement:function(a){return window.document.createElement(a)},k:function(a){throw Error(a);},ka:function(a,
b){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b);v.k(c)},A:function(a,b,c,d){a instanceof b||(c=v.getTypeName(c),void 0!==d&&(c+="."+d),v.Dd(a,b,c))},j:function(a,b,c,d){typeof a!==b&&(c=v.getTypeName(c),void 0!==d&&(c+="."+d),v.Dd(a,b,c))},We:function(a,b,c){"number"===typeof a&&isFinite(a)||(b=v.getTypeName(b),void 0!==c&&(b+="."+c),v.k(b+" must be a real number type, and not NaN or Infinity: "+a))},pb:function(a,b,c,d){a instanceof
fa&&a.qe===b||(c=v.getTypeName(c),void 0!==d&&(c+="."+d),v.Dd(a,"a constant of class "+v.af(b),c))},uJ:function(a,b){"string"===typeof a?ga(a)||v.k('Color "'+a+'" is not a valid color string for '+b):a instanceof ha||v.k("Value for "+b+" must be a color string or a Brush, not "+a)},Dd:function(a,b,c,d){b=v.getTypeName(b);c=v.getTypeName(c);void 0!==d&&(c+="."+d);"string"===typeof a?v.k(c+" value is not an instance of "+b+': "'+a+'"'):v.k(c+" value is not an instance of "+b+": "+a)},va:function(a,
b,c,d){c=v.getTypeName(c);void 0!==d&&(c+="."+d);v.k(c+" is not in the range "+b+": "+a)},cd:function(a){v.k(v.af(a)+" constructor cannot take any arguments.")},La:function(a){v.k("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(a){window.console&&window.console.log(a)},Ta:function(a){return"object"===typeof a&&null!==a},isArray:function(a){return Array.isArray(a)||
a instanceof NodeList||a instanceof HTMLCollection},rH:function(a){return Array.isArray(a)},dz:function(a,b,c){v.isArray(a)||v.Dd(a,"Array or NodeList or HTMLCollection",b,c)},Va:function(a){return a.length},fl:function(a){return Array.prototype.slice.call(a)},Ra:function(a,b){Array.isArray(a);return a[b]},kD:function(a,b,c){Array.isArray(a)?a[b]=c:v.k("Cannot replace an object in an HTMLCollection or NodeList at "+b)},cz:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=
0;d<c;d++)if(a[d]===b)return d;return-1},Oi:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):v.k("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Uh:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):v.k("Cannot remove an object from an HTMLCollection or NodeList at "+b)},Cx:[],L:function(){var a=v.Cx.pop();return void 0===a?new z:a},Mb:function(a,b){var c=v.Cx.pop();if(void 0===c)return new z(a,b);c.x=a;c.y=b;return c},v:function(a){v.Cx.push(a)},
LA:[],Fl:function(){var a=v.LA.pop();return void 0===a?new ia:a},$j:function(a){v.LA.push(a)},Dx:[],ag:function(){var a=v.Dx.pop();return void 0===a?new A:a},hk:function(a,b,c,d){var e=v.Dx.pop();if(void 0===e)return new A(a,b,c,d);e.x=a;e.y=b;e.width=c;e.height=d;return e},Vb:function(a){v.Dx.push(a)},MA:[],rh:function(){var a=v.MA.pop();return void 0===a?new ja:a},$e:function(a){v.MA.push(a)},Ex:null,s:function(){var a=v.Ex;return null!==a?(v.Ex=null,a):new ma},q:function(a){a.reset();v.Ex=a},KA:[],
jb:function(){var a=v.KA.pop();return void 0===a?[]:a},sa:function(a){a.length=0;v.KA.push(a)},hj:Object.freeze([]),Jl:1,dc:function(a){a.__gohashid=v.Jl++},ot:function(a){var b=a.__gohashid;void 0===b&&(b=v.Jl++,a.__gohashid=b);return b},ld:function(a){return a.__gohashid},ea:function(a,b){b.Nx=a;ea[a]=b},Ja:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},Vh:function(a){a.QF=!0},defineProperty:function(a,b,c,d,e){v.j(a,"function","Util.defineProperty:classfunc");
v.j(b,"object","Util.defineProperty:propobj");v.j(c,"function","Util.defineProperty:getter");v.j(d,"function","Util.defineProperty:setter");for(var f in b){b=b[f];c={get:c,set:d,enumerable:!0};if(void 0!==e)for(var h in e)c[h]=e[h];Object.defineProperty(a.prototype,f,c);e=Object.getOwnPropertyDescriptor(a.prototype,f);b&&e&&Object.defineProperty(a.prototype,b,e);break}},WI:!1,u:function(a,b,c,d){v.j(a,"function","Util.defineReadOnlyProperty:classfunc");v.j(b,"object","Util.defineReadOnlyProperty:propobj");
v.j(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var f=b[e];b={get:c,set:function(a){v.k('The property "'+f+'" is read-only and cannot be set to '+a)},enumerable:!0};if(void 0!==d)for(var h in d)b[h]=d[h];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);f&&d&&Object.defineProperty(a.prototype,f,d);break}},Ld:function(a,b){for(var c in b)b[c]=!0;a.prototype.MF=b},getTypeName:function(a){return void 0===a?"":"string"===typeof a?a:"function"===
typeof a?v.af(a):null===a?"*":""},af:function(a){if("function"===typeof a){if(a.Nx)return a.Nx;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("("),b=b.substring(9,c).trim();if(""!==b)return a.Nx=b}else if("object"===typeof a&&a.constructor)return v.af(a.constructor);return typeof a},p:function(a,b,c){v.j(a,"function","Util.defineEnumValue:classfunc");v.j(b,"string","Util.defineEnumValue:name");v.j(c,"number","Util.defineEnumValue:num");c=new fa(a,b,c);Object.freeze(c);a[b]=c;var d=a.ku;d instanceof
na||(d=new na("string",fa),a.ku=d);d.add(b,c);return c},qb:function(a,b){if(!a||!b)return null;var c=void 0;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):c=a[b]}catch(d){}return c},Ka:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){}},Xt:function(a,b){v.j(a,"object","Setting properties requires Objects as arguments");v.j(b,"object","Setting properties requires Objects as arguments");
var c=a instanceof D,d=a instanceof E,e;for(e in b){""===e&&v.k("Setting properties requires non-empty property names");var f=a,h=e;if(c||d){var k=e.indexOf(".");if(0<k){var l=e.substring(0,k);if(c)f=a.ce(l);else if(f=a[l],void 0===f||null===f)f=a.Za[l];v.Ta(f)?h=e.substr(k+1):v.k("Unable to find object named: "+l+" in "+a.toString()+" when trying to set property: "+e)}}if("_"!==h[0]&&!v.WD(f,h))if(d&&"ModelChanged"===h){a.dG(b[h]);continue}else if(d&&"Changed"===h){a.wm(b[h]);continue}else if(d&&
v.WD(a.Za,h))f=a.Za;else if(d&&qa(a,h)){a.Yy(h,b[h]);continue}else if(a instanceof F&&"Changed"===h){a.wm(b[h]);continue}else v.k('Trying to set undefined property "'+h+'" on object: '+f.toString());f[h]=b[e];"_"===h[0]&&f instanceof G&&f.aG(h)}},WD:function(a,b){if(a.hasOwnProperty(b))return!0;for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;var d=c.MF;if(d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1},eI:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=
0,e=0,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,f="",h=0;h<a.length;h++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,f+=String.fromCharCode(a.charCodeAt(h)^b[(b[c]+b[d])%256]);return f},fH:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},ug:function(a){return v.eI(v.fH(a))},
Hl:null,adym:"7da71ca0ad381e90",vfo:"2be640fdb162",pG:"@COLOR1",qG:"@COLOR2"};
v.Hl=function(){var a=window.document.createElement("canvas"),b=a.getContext("2d");b[v.ug("7ca11abfd022028846")]=v.ug("398c3597c01238");for(var c=["","","",""],d=1;5>d;d++)b[v.ug("7ca11abfd7330390")](v.ug(c[d-1]),10,15*d+0);b[v.ug("7ca11abfd022028846")]=v.ug("39f046ebb36e4b");for(d=1;5>d;d++)b[v.ug("7ca11abfd7330390")](v.ug(c[d-
1]),10,15*d+0);if(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])v.p=function(a,b){var c=new fa(a,b,2);Object.freeze(c);a[b]=c;var d=a.ku;d instanceof na||(d=new na("string",fa),a.ku=d);d.add(b,c);return c};return a}();function fa(a,b,c){v.dc(this);this.$A=a;this.Ob=b;this.VF=c}v.ea("EnumValue",fa);fa.prototype.toString=function(){return v.af(this.$A)+"."+this.Ob};v.u(fa,{qe:"classType"},function(){return this.$A});v.u(fa,{name:"name"},function(){return this.Ob});v.u(fa,{value:"value"},function(){return this.VF});
var ra;fa.findName=ra=function(a,b){if(void 0===b||null===b||""===b)return null;v.j(a,"function","findName:classfunc");v.j(b,"string","EnumValue.findName:name");var c=a.ku;return c instanceof na?c.ja(b):null};function sa(){this.YA=[]}sa.prototype.toString=function(){return this.YA.join("")};sa.prototype.add=function(a){""!==a&&this.YA.push(a)};function ta(){}
function va(a){void 0===a&&(a=42);this.seed=a;this.yx=48271;this.ju=2147483647;this.JA=this.ju/this.yx;this.yF=this.ju%this.yx;this.xF=1/this.ju;this.random()}va.prototype.random=function(){var a=this.seed%this.JA*this.yx-this.seed/this.JA*this.yF;this.seed=0<a?a:a+this.ju;return this.seed*this.xF};function wa(){}v.u(wa,{i:"iterator"},function(){return this});wa.prototype.reset=wa.prototype.reset=function(){};wa.prototype.next=wa.prototype.hasNext=wa.prototype.next=function(){return!1};
wa.prototype.first=wa.prototype.first=function(){return null};wa.prototype.any=function(){return!1};wa.prototype.all=function(){return!0};wa.prototype.each=function(){return this};wa.prototype.map=function(){return this};wa.prototype.filter=function(){return this};wa.prototype.concat=function(a){return a.i};v.u(wa,{count:"count"},function(){return 0});wa.prototype.Cf=function(){};wa.prototype.toString=function(){return"EmptyIterator"};var xa=new wa;function ya(a){this.key=-1;this.value=a}
v.Ld(ya,{key:!0,value:!0});v.u(ya,{i:"iterator"},function(){return this});ya.prototype.reset=ya.prototype.reset=function(){this.key=-1};ya.prototype.next=ya.prototype.hasNext=ya.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1};ya.prototype.first=ya.prototype.first=function(){this.key=0;return this.value};ya.prototype.any=function(a){this.key=-1;return a(this.value)};ya.prototype.all=function(a){this.key=-1;return a(this.value)};
ya.prototype.each=function(a){this.key=-1;a(this.value);return this};ya.prototype.map=function(a){return new ya(a(this.value))};ya.prototype.filter=function(a){return a(this.value)?new ya(this.value):xa};ya.prototype.concat=function(a){return new za(this,a.i)};v.u(ya,{count:"count"},function(){return 1});ya.prototype.Cf=function(){this.value=null};ya.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function za(a,b){this.Hk=a;this.Ik=b;this.lu=!1}v.Ld(za,{key:!0,value:!0});
v.u(za,{i:"iterator"},function(){return this});za.prototype.reset=za.prototype.reset=function(){this.Hk.reset();this.Ik.reset();this.lu=!1};za.prototype.next=za.prototype.hasNext=za.prototype.next=function(){if(!this.lu){var a=this.Hk;if(a.next())return this.key=a.key,this.value=a.value,!0;this.lu=!0}return this.lu&&(a=this.Ik,a.next())?(this.key=a.key,this.value=a.value,!0):!1};za.prototype.first=za.prototype.first=function(){this.reset();return this.next()?this.value:null};
za.prototype.any=function(a){return this.Hk.any(a)||this.Ik.any(a)?!0:!1};za.prototype.all=function(a){return this.Hk.all(a)&&this.Ik.all(a)?!0:!1};za.prototype.each=function(a){this.Hk.each(a);this.Ik.each(a);return this};za.prototype.map=function(a){return new za(this.Hk.map(a),this.Ik.map(a))};za.prototype.filter=function(a){return new za(this.Hk.filter(a),this.Ik.filter(a))};za.prototype.concat=function(a){return new za(this,a.i)};v.u(za,{count:"count"},function(){return this.Hk.count+this.Ik.count});
za.prototype.Cf=function(){this.value=this.key=null};za.prototype.toString=function(){return"ConcatIterator()"};function Aa(a){this.tc=a;this.Ih=null;this.reset()}v.Ld(Aa,{key:!0,value:!0});v.u(Aa,{i:"iterator"},function(){return this});v.defineProperty(Aa,{Wm:"predicate"},function(){return this.Ih},function(a){this.Ih=a});Aa.prototype.reset=Aa.prototype.reset=function(){var a=this.tc;a.Xb=null;this.eb=a.F;this.Oc=-1};
Aa.prototype.next=Aa.prototype.hasNext=Aa.prototype.next=function(){var a=this.tc;if(a.F!==this.eb){if(0>this.key)return!1;v.La(a)}var a=a.n,b=a.length,c=++this.Oc,d=this.Ih;if(null!==d)for(;c<b;){var e=a[c];if(d(e))return this.key=this.Oc=c,this.value=e,!0;c++}else{if(c<b)return this.key=c,this.value=a[c],!0;this.Cf()}return!1};
Aa.prototype.first=Aa.prototype.first=function(){var a=this.tc;this.eb=a.F;this.Oc=0;var a=a.n,b=a.length,c=this.Ih;if(null!==c){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.Oc=d,this.value=e;d++}return null}return 0<b?(e=a[0],this.key=0,this.value=e):null};Aa.prototype.any=function(a){var b=this.tc;b.Xb=null;var c=b.F;this.Oc=-1;for(var d=b.n,e=d.length,f=this.Ih,h=0;h<e;h++){var k=d[h];if(null===f||f(k)){if(a(k))return!0;b.F!==c&&v.La(b)}}return!1};
Aa.prototype.all=function(a){var b=this.tc;b.Xb=null;var c=b.F;this.Oc=-1;for(var d=b.n,e=d.length,f=this.Ih,h=0;h<e;h++){var k=d[h];if(null===f||f(k)){if(!a(k))return!1;b.F!==c&&v.La(b)}}return!0};Aa.prototype.each=function(a){var b=this.tc;b.Xb=null;var c=b.F;this.Oc=-1;for(var d=b.n,e=d.length,f=this.Ih,h=0;h<e;h++){var k=d[h];if(null===f||f(k))a(k),b.F!==c&&v.La(b)}return this};
Aa.prototype.map=function(a){var b=this.tc;b.Xb=null;var c=b.F;this.Oc=-1;for(var d=[],e=b.n,f=e.length,h=this.Ih,k=0;k<f;k++){var l=e[k];if(null===h||h(l))d.push(a(l)),b.F!==c&&v.La(b)}a=new I;a.n=d;a.Bc();return a.i};Aa.prototype.filter=function(a){var b=this.tc;b.Xb=null;var c=b.F;this.Oc=-1;for(var d=[],e=b.n,f=e.length,h=this.Ih,k=0;k<f;k++){var l=e[k];if(null===h||h(l))a(l)&&d.push(l),b.F!==c&&v.La(b)}a=new I(b.ia);a.n=d;a.Bc();return a.i};
Aa.prototype.concat=function(a){this.tc.Xb=null;return new za(this,a.i)};v.u(Aa,{count:"count"},function(){var a=this.Ih;if(null!==a){for(var b=0,c=this.tc.n,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.tc.n.length});Aa.prototype.Cf=function(){this.key=-1;this.value=null;this.eb=-1;this.Ih=null;this.tc.Xb=this};Aa.prototype.toString=function(){return"ListIterator@"+this.Oc+"/"+this.tc.count};function Ba(a){this.tc=a;this.reset()}v.Ld(Ba,{key:!0,value:!0});v.u(Ba,{i:"iterator"},function(){return this});
Ba.prototype.reset=Ba.prototype.reset=function(){var a=this.tc;a.wj=null;this.eb=a.F;this.Oc=a.n.length};Ba.prototype.next=Ba.prototype.hasNext=Ba.prototype.next=function(){var a=this.tc;if(a.F!==this.eb){if(0>this.key)return!1;v.La(a)}var b=--this.Oc;if(0<=b)return this.key=b,this.value=a.n[b],!0;this.Cf();return!1};Ba.prototype.first=Ba.prototype.first=function(){var a=this.tc;this.eb=a.F;var b=a.n;this.Oc=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):null};
Ba.prototype.any=function(a){var b=this.tc;b.wj=null;var c=b.F,d=b.n,e=d.length;this.Oc=e;for(e-=1;0<=e;e--){if(a(d[e]))return!0;b.F!==c&&v.La(b)}return!1};Ba.prototype.all=function(a){var b=this.tc;b.wj=null;var c=b.F,d=b.n,e=d.length;this.Oc=e;for(e-=1;0<=e;e--){if(!a(d[e]))return!1;b.F!==c&&v.La(b)}return!0};Ba.prototype.each=function(a){var b=this.tc;b.wj=null;var c=b.F,d=b.n,e=d.length;this.Oc=e;for(e-=1;0<=e;e--)a(d[e]),b.F!==c&&v.La(b);return this};
Ba.prototype.map=function(a){var b=this.tc;b.wj=null;var c=b.F,d=[],e=b.n,f=e.length;this.Oc=f;for(f-=1;0<=f;f--)d.push(a(e[f])),b.F!==c&&v.La(b);a=new I;a.n=d;a.Bc();return a.i};Ba.prototype.filter=function(a){var b=this.tc;b.wj=null;var c=b.F,d=[],e=b.n,f=e.length;this.Oc=f;for(f-=1;0<=f;f--){var h=e[f];a(h)&&d.push(h);b.F!==c&&v.La(b)}a=new I(b.ia);a.n=d;a.Bc();return a.i};Ba.prototype.concat=function(a){this.tc.wj=null;return new za(this,a.i)};v.u(Ba,{count:"count"},function(){return this.tc.n.length});
Ba.prototype.Cf=function(){this.key=-1;this.value=null;this.eb=-1;this.tc.wj=this};Ba.prototype.toString=function(){return"ListIteratorBackwards("+this.Oc+"/"+this.tc.count+")"};
function I(a){v.dc(this);this.D=!1;this.n=[];this.F=0;this.wj=this.Xb=null;void 0===a||null===a?this.ia=null:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.ia=a:v.va(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.ia=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:v.va(a,"null, a primitive type name, or a class type",
"List constructor: type")}v.ea("List",I);I.prototype.Bc=function(){var a=this.F;a++;999999999<a&&(a=0);this.F=a};I.prototype.freeze=I.prototype.freeze=function(){this.D=!0;return this};I.prototype.thaw=I.prototype.Pa=function(){this.D=!1;return this};I.prototype.toString=function(){return"List("+v.getTypeName(this.ia)+")#"+v.ld(this)};I.prototype.add=I.prototype.push=I.prototype.add=function(a){null!==a&&(this.D&&v.ka(this,a),this.n.push(a),this.Bc())};
I.prototype.addAll=I.prototype.Tc=function(a){if(null===a)return this;this.D&&v.ka(this);var b=this.n;if(v.isArray(a))for(var c=v.Va(a),d=0;d<c;d++){var e=v.Ra(a,d);b.push(e)}else for(a=a.i;a.next();)e=a.value,b.push(e);this.Bc();return this};I.prototype.clear=I.prototype.clear=function(){this.D&&v.ka(this);this.n.length=0;this.Bc()};I.prototype.contains=I.prototype.has=I.prototype.contains=function(a){return null===a?!1:-1!==this.n.indexOf(a)};
I.prototype.indexOf=I.prototype.indexOf=function(a){return null===a?-1:this.n.indexOf(a)};I.prototype.elt=I.prototype.get=I.prototype.da=function(a){var b=this.n;(0>a||a>=b.length)&&v.va(a,"0 <= i < length",I,"elt:i");return b[a]};I.prototype.setElt=I.prototype.set=I.prototype.Ig=function(a,b){var c=this.n;(0>a||a>=c.length)&&v.va(a,"0 <= i < length",I,"setElt:i");this.D&&v.ka(this,a);c[a]=b};I.prototype.first=I.prototype.first=function(){var a=this.n;return 0===a.length?null:a[0]};
I.prototype.last=I.prototype.Rd=function(){var a=this.n,b=a.length;return 0<b?a[b-1]:null};I.prototype.pop=I.prototype.pop=function(){this.D&&v.ka(this);var a=this.n;return 0<a.length?a.pop():null};I.prototype.any=function(a){for(var b=this.n,c=this.F,d=b.length,e=0;e<d;e++){if(a(b[e]))return!0;this.F!==c&&v.La(this)}return!1};I.prototype.all=function(a){for(var b=this.n,c=this.F,d=b.length,e=0;e<d;e++){if(!a(b[e]))return!1;this.F!==c&&v.La(this)}return!0};
I.prototype.each=function(a){for(var b=this.n,c=this.F,d=b.length,e=0;e<d;e++)a(b[e]),this.F!==c&&v.La(this);return this};I.prototype.map=function(a){for(var b=new I,c=[],d=this.n,e=this.F,f=d.length,h=0;h<f;h++)c.push(a(d[h])),this.F!==e&&v.La(this);b.n=c;b.Bc();return b};I.prototype.filter=function(a){for(var b=new I(this.ia),c=[],d=this.n,e=this.F,f=d.length,h=0;h<f;h++){var k=d[h];a(k)&&c.push(k);this.F!==e&&v.La(this)}b.n=c;b.Bc();return b};I.prototype.concat=function(a){return this.copy().Tc(a)};
I.prototype.insertAt=I.prototype.yd=function(a,b){0>a&&v.va(a,">= 0",I,"insertAt:i");this.D&&v.ka(this,a);var c=this.n;a>=c.length?c.push(b):c.splice(a,0,b);this.Bc();return!0};I.prototype.remove=I.prototype["delete"]=I.prototype.remove=function(a){if(null===a)return!1;this.D&&v.ka(this,a);var b=this.n;a=b.indexOf(a);if(-1===a)return!1;a===b.length-1?b.pop():b.splice(a,1);this.Bc();return!0};
I.prototype.removeAt=I.prototype.Vc=function(a){var b=this.n;(0>a||a>=b.length)&&v.va(a,"0 <= i < length",I,"removeAt:i");this.D&&v.ka(this,a);a===b.length-1?b.pop():b.splice(a,1);this.Bc()};I.prototype.removeRange=I.prototype.removeRange=function(a,b){var c=this.n;(0>a||a>=c.length)&&v.va(a,"0 <= from < length",I,"elt:from");(0>b||b>=c.length)&&v.va(b,"0 <= to < length",I,"elt:to");this.D&&v.ka(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.Bc()};
I.prototype.copy=function(){var a=new I(this.ia),b=this.n;0<b.length&&(a.n=Array.prototype.slice.call(b));return a};I.prototype.toArray=I.prototype.cc=function(){for(var a=this.n,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};I.prototype.toSet=I.prototype.hF=function(){for(var a=new J(this.ia),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};I.prototype.sort=I.prototype.sort=function(a){this.D&&v.ka(this);this.n.sort(a);this.Bc();return this};
I.prototype.sortRange=I.prototype.Ip=function(a,b,c){var d=this.n,e=d.length;void 0===b&&(b=0);void 0===c&&(c=e);this.D&&v.ka(this);var f=c-b;if(1>=f)return this;(0>b||b>=e-1)&&v.va(b,"0 <= from < length",I,"sortRange:from");if(2===f)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.Bc()),this;if(0===b)if(c>=e)d.sort(a);else for(f=d.slice(0,c),f.sort(a),a=0;a<c;a++)d[a]=f[a];else if(c>=e)for(f=d.slice(b),f.sort(a),a=b;a<e;a++)d[a]=f[a-b];else for(f=d.slice(b,c),f.sort(a),a=b;a<c;a++)d[a]=f[a-
b];this.Bc();return this};I.prototype.reverse=I.prototype.reverse=function(){this.D&&v.ka(this);this.n.reverse();this.Bc();return this};v.u(I,{count:"count"},function(){return this.n.length});v.u(I,{size:"size"},function(){return this.n.length});v.u(I,{length:"length"},function(){return this.n.length});v.u(I,{i:"iterator"},function(){if(0>=this.n.length)return xa;var a=this.Xb;return null!==a?(a.reset(),a):new Aa(this)});
v.u(I,{Rm:"iteratorBackwards"},function(){if(0>=this.n.length)return xa;var a=this.wj;return null!==a?(a.reset(),a):new Ba(this)});function Da(a){this.Kh=a;this.reset()}v.Ld(Da,{key:!0,value:!0});v.u(Da,{i:"iterator"},function(){return this});Da.prototype.reset=Da.prototype.reset=function(){var a=this.Kh;a.Xb=null;this.eb=a.F;this.cb=null};
Da.prototype.next=Da.prototype.hasNext=Da.prototype.next=function(){var a=this.Kh;if(a.F!==this.eb){if(null===this.key)return!1;v.La(a)}var b=this.cb,b=null===b?a.Da:b.Ua;if(null!==b)return this.cb=b,this.value=b.value,this.key=b.key,!0;this.Cf();return!1};Da.prototype.first=Da.prototype.first=function(){var a=this.Kh;this.eb=a.F;a=a.Da;if(null!==a){this.cb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Da.prototype.any=function(a){var b=this.Kh;b.Xb=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(a(d.value))return!0;b.F!==c&&v.La(b);d=d.Ua}return!1};Da.prototype.all=function(a){var b=this.Kh;b.Xb=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(!a(d.value))return!1;b.F!==c&&v.La(b);d=d.Ua}return!0};Da.prototype.each=function(a){var b=this.Kh;b.Xb=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;)a(d.value),b.F!==c&&v.La(b),d=d.Ua;return this};
Da.prototype.map=function(a){var b=this.Kh;b.Xb=null;for(var c=new I,d=b.F,e=b.Da;null!==e;)c.add(a(e.value)),b.F!==d&&v.La(b),e=e.Ua;return c.i};Da.prototype.filter=function(a){var b=this.Kh;b.Xb=null;for(var c=new I(b.ia),d=b.F,e=b.Da;null!==e;){var f=e.value;a(f)&&c.add(f);b.F!==d&&v.La(b);e=e.Ua}return c.i};Da.prototype.concat=function(a){this.Kh.Xb=null;return new za(this,a.i)};v.u(Da,{count:"count"},function(){return this.Kh.fd});
Da.prototype.Cf=function(){this.value=this.key=null;this.eb=-1;this.Kh.Xb=this};Da.prototype.toString=function(){return null!==this.cb?"SetIterator@"+this.cb.value:"SetIterator"};
function J(a){v.dc(this);this.D=!1;void 0===a||null===a?this.ia=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.ia=a:v.va(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.ia=a===Object?"object":a===String?"string":a===Number?"number":a:v.va(a,"null, a primitive type name, or a class type","Set constructor: type");this.gd={};this.fd=0;this.Xb=null;this.F=0;this.Fh=this.Da=null}v.ea("Set",J);
J.prototype.Bc=function(){var a=this.F;a++;999999999<a&&(a=0);this.F=a};J.prototype.freeze=J.prototype.freeze=function(){this.D=!0;return this};J.prototype.thaw=J.prototype.Pa=function(){this.D=!1;return this};J.prototype.toString=function(){return"Set("+v.getTypeName(this.ia)+")#"+v.ld(this)};
J.prototype.add=J.prototype.add=function(a){if(null===a)return!1;this.D&&v.ka(this,a);var b=a;v.Ta(a)&&(b=v.ot(a));return void 0===this.gd[b]?(this.fd++,a=new Ea(a,a),this.gd[b]=a,b=this.Fh,null===b?this.Da=a:(a.lo=b,b.Ua=a),this.Fh=a,this.Bc(),!0):!1};J.prototype.addAll=J.prototype.Tc=function(a){if(null===a)return this;this.D&&v.ka(this);if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.add(v.Ra(a,c));else for(a=a.i;a.next();)this.add(a.value);return this};
J.prototype.contains=J.prototype.has=J.prototype.contains=function(a){if(null===a)return!1;var b=a;return v.Ta(a)&&(b=v.ld(a),void 0===b)?!1:void 0!==this.gd[b]};J.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(!this.contains(a.value))return!1;return!0};J.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(this.contains(a.value))return!0;return!1};J.prototype.first=J.prototype.first=function(){var a=this.Da;return null===a?null:a.value};
J.prototype.any=function(a){for(var b=this.F,c=this.Da;null!==c;){if(a(c.value))return!0;this.F!==b&&v.La(this);c=c.Ua}return!1};J.prototype.all=function(a){for(var b=this.F,c=this.Da;null!==c;){if(!a(c.value))return!1;this.F!==b&&v.La(this);c=c.Ua}return!0};J.prototype.each=function(a){for(var b=this.F,c=this.Da;null!==c;)a(c.value),this.F!==b&&v.La(this),c=c.Ua;return this};J.prototype.map=function(a){for(var b=new J,c=this.F,d=this.Da;null!==d;)b.add(a(d.value)),this.F!==c&&v.La(this),d=d.Ua;return b};
J.prototype.filter=function(a){for(var b=new J(this.ia),c=this.F,d=this.Da;null!==d;){var e=d.value;a(e)&&b.add(e);this.F!==c&&v.La(this);d=d.Ua}return b};J.prototype.concat=function(a){return this.copy().Tc(a)};
J.prototype.remove=J.prototype["delete"]=J.prototype.remove=function(a){if(null===a)return!1;this.D&&v.ka(this,a);var b=a;if(v.Ta(a)&&(b=v.ld(a),void 0===b))return!1;a=this.gd[b];if(void 0===a)return!1;var c=a.Ua,d=a.lo;null!==c&&(c.lo=d);null!==d&&(d.Ua=c);this.Da===a&&(this.Da=c);this.Fh===a&&(this.Fh=d);delete this.gd[b];this.fd--;this.Bc();return!0};
J.prototype.removeAll=J.prototype.fA=function(a){if(null===a)return this;this.D&&v.ka(this);if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.remove(v.Ra(a,c));else for(a=a.i;a.next();)this.remove(a.value);return this};J.prototype.retainAll=function(a){if(null===a||0===this.count)return this;this.D&&v.ka(this);var b=new J(this.ia);b.Tc(a);a=[];for(var c=this.i;c.next();){var d=c.value;b.contains(d)||a.push(d)}this.fA(a);return this};
J.prototype.clear=J.prototype.clear=function(){this.D&&v.ka(this);this.gd={};this.fd=0;this.Fh=this.Da=null;this.Bc()};J.prototype.copy=function(){var a=new J(this.ia),b=this.gd,c;for(c in b)a.add(b[c].value);return a};J.prototype.toArray=J.prototype.cc=function(){var a=Array(this.fd),b=this.gd,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};J.prototype.toList=function(){var a=new I(this.ia),b=this.gd,c;for(c in b)a.add(b[c].value);return a};v.u(J,{count:"count"},function(){return this.fd});
v.u(J,{size:"size"},function(){return this.fd});v.u(J,{i:"iterator"},function(){if(0>=this.fd)return xa;var a=this.Xb;return null!==a?(a.reset(),a):new Da(this)});function Ha(a){this.Ga=a;this.reset()}v.Ld(Ha,{key:!0,value:!0});v.u(Ha,{i:"iterator"},function(){return this});Ha.prototype.reset=Ha.prototype.reset=function(){this.eb=this.Ga.F;this.cb=null};
Ha.prototype.next=Ha.prototype.hasNext=Ha.prototype.next=function(){var a=this.Ga;if(a.F!==this.eb){if(null===this.key)return!1;v.La(a)}var b=this.cb,b=null===b?a.Da:b.Ua;if(null!==b)return this.cb=b,this.value=this.key=a=b.key,!0;this.Cf();return!1};Ha.prototype.first=Ha.prototype.first=function(){var a=this.Ga;this.eb=a.F;a=a.Da;return null!==a?(this.cb=a,this.value=this.key=a=a.key):null};
Ha.prototype.any=function(a){var b=this.Ga,c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(a(d.key))return!0;b.F!==c&&v.La(b);d=d.Ua}return!1};Ha.prototype.all=function(a){var b=this.Ga,c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(!a(d.key))return!1;b.F!==c&&v.La(b);d=d.Ua}return!0};Ha.prototype.each=function(a){var b=this.Ga,c=b.F;this.cb=null;for(var d=b.Da;null!==d;)a(d.key),b.F!==c&&v.La(b),d=d.Ua;return this};
Ha.prototype.map=function(a){var b=this.Ga,c=b.F;this.cb=null;for(var d=new I,e=b.Da;null!==e;)d.add(a(e.key)),b.F!==c&&v.La(b),e=e.Ua;return d.i};Ha.prototype.filter=function(a){var b=this.Ga,c=b.F;this.cb=null;for(var d=new I(b.vi),e=b.Da;null!==e;){var f=e.key;a(f)&&d.add(f);b.F!==c&&v.La(b);e=e.Ua}return d.i};Ha.prototype.concat=function(a){return new za(this,a.i)};v.u(Ha,{count:"count"},function(){return this.Ga.fd});Ha.prototype.Cf=function(){this.value=this.key=null;this.eb=-1};
Ha.prototype.toString=function(){return null!==this.cb?"MapKeySetIterator@"+this.cb.value:"MapKeySetIterator"};function Ja(a){v.dc(this);this.D=!0;this.Ga=a}v.Ja(Ja,J);Ja.prototype.freeze=function(){return this};Ja.prototype.Pa=function(){return this};Ja.prototype.toString=function(){return"MapKeySet("+this.Ga.toString()+")"};Ja.prototype.add=Ja.prototype.set=Ja.prototype.add=function(){v.k("This Set is read-only: "+this.toString());return!1};
Ja.prototype.contains=Ja.prototype.has=Ja.prototype.contains=function(a){return this.Ga.contains(a)};Ja.prototype.remove=Ja.prototype["delete"]=Ja.prototype.remove=function(){v.k("This Set is read-only: "+this.toString());return!1};Ja.prototype.clear=Ja.prototype.clear=function(){v.k("This Set is read-only: "+this.toString())};Ja.prototype.first=Ja.prototype.first=function(){var a=this.Ga.Da;return null!==a?a.key:null};
Ja.prototype.any=function(a){for(var b=this.Ga.Da;null!==b;){if(a(b.key))return!0;b=b.Ua}return!1};Ja.prototype.all=function(a){for(var b=this.Ga.Da;null!==b;){if(!a(b.key))return!1;b=b.Ua}return!0};Ja.prototype.each=function(a){for(var b=this.Ga.Da;null!==b;)a(b.key),b=b.Ua;return this};Ja.prototype.map=function(a){for(var b=new J,c=this.Ga.Da;null!==c;)b.add(a(c.key)),c=c.Ua;return b};
Ja.prototype.filter=function(a){for(var b=new J(this.Ga.vi),c=this.Ga.Da;null!==c;){var d=c.key;a(d)&&b.add(d);c=c.Ua}return b};Ja.prototype.concat=function(a){return this.hF().Tc(a)};Ja.prototype.copy=function(){return new Ja(this.Ga)};Ja.prototype.toSet=Ja.prototype.hF=function(){var a=new J(this.Ga.vi),b=this.Ga.gd,c;for(c in b)a.add(b[c].key);return a};Ja.prototype.toArray=Ja.prototype.cc=function(){var a=this.Ga.gd,b=Array(this.Ga.fd),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};
Ja.prototype.toList=function(){var a=new I(this.ia),b=this.Ga.gd,c;for(c in b)a.add(b[c].key);return a};v.u(Ja,{count:"count"},function(){return this.Ga.fd});v.u(Ja,{size:"size"},function(){return this.Ga.fd});v.u(Ja,{i:"iterator"},function(){return 0>=this.Ga.fd?xa:new Ha(this.Ga)});function La(a){this.Ga=a;this.reset()}v.Ld(La,{key:!0,value:!0});v.u(La,{i:"iterator"},function(){return this});La.prototype.reset=La.prototype.reset=function(){var a=this.Ga;a.xj=null;this.eb=a.F;this.cb=null};
La.prototype.next=La.prototype.hasNext=La.prototype.next=function(){var a=this.Ga;if(a.F!==this.eb){if(null===this.key)return!1;v.La(a)}var b=this.cb,b=null===b?a.Da:b.Ua;if(null!==b)return this.cb=b,this.value=b.value,this.key=b.key,!0;this.Cf();return!1};La.prototype.first=La.prototype.first=function(){var a=this.Ga;this.eb=a.F;a=a.Da;if(null!==a){this.cb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
La.prototype.any=function(a){var b=this.Ga;b.xj=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(a(d.value))return!0;b.F!==c&&v.La(b);d=d.Ua}return!1};La.prototype.all=function(a){var b=this.Ga;b.xj=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(!a(d.value))return!1;b.F!==c&&v.La(b);d=d.Ua}return!0};La.prototype.each=function(a){var b=this.Ga;b.xj=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;)a(d.value),b.F!==c&&v.La(b),d=d.Ua;return this};
La.prototype.map=function(a){var b=this.Ga;b.xj=null;var c=b.F;this.cb=null;for(var d=new I,e=b.Da;null!==e;)d.add(a(e.value)),b.F!==c&&v.La(b),e=e.Ua;return d.i};La.prototype.filter=function(a){var b=this.Ga;b.xj=null;var c=b.F;this.cb=null;for(var d=new I(b.vi),e=b.Da;null!==e;){var f=e.value;a(f)&&d.add(f);b.F!==c&&v.La(b);e=e.Ua}return d.i};La.prototype.concat=function(a){this.Ga.xj=null;return new za(this,a.i)};v.u(La,{count:"count"},function(){return this.Ga.fd});
La.prototype.Cf=function(){this.value=this.key=null;this.eb=-1;this.Ga.xj=this};La.prototype.toString=function(){return null!==this.cb?"MapValueSetIterator@"+this.cb.value:"MapValueSetIterator"};function Ea(a,b){this.key=a;this.value=b;this.lo=this.Ua=null}v.Ld(Ea,{key:!0,value:!0});Ea.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Ma(a){this.Ga=a;this.reset()}v.Ld(Ma,{key:!0,value:!0});v.u(Ma,{i:"iterator"},function(){return this});
Ma.prototype.reset=Ma.prototype.reset=function(){var a=this.Ga;a.Xb=null;this.eb=a.F;this.cb=null};Ma.prototype.next=Ma.prototype.hasNext=Ma.prototype.next=function(){var a=this.Ga;if(a.F!==this.eb){if(null===this.key)return!1;v.La(a)}var b=this.cb,b=null===b?a.Da:b.Ua;if(null!==b)return this.cb=b,this.key=b.key,this.value=b.value,!0;this.Cf();return!1};
Ma.prototype.first=Ma.prototype.first=function(){var a=this.Ga;this.eb=a.F;a=a.Da;return null!==a?(this.cb=a,this.key=a.key,this.value=a.value,a):null};Ma.prototype.any=function(a){var b=this.Ga;b.Xb=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(a(d))return!0;b.F!==c&&v.La(b);d=d.Ua}return!1};Ma.prototype.all=function(a){var b=this.Ga;b.Xb=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;){if(!a(d))return!1;b.F!==c&&v.La(b);d=d.Ua}return!0};
Ma.prototype.each=function(a){var b=this.Ga;b.Xb=null;var c=b.F;this.cb=null;for(var d=b.Da;null!==d;)a(d),b.F!==c&&v.La(b),d=d.Ua;return this};Ma.prototype.map=function(a){var b=this.Ga;b.Xb=null;var c=b.F;this.cb=null;for(var d=new I,e=b.Da;null!==e;)d.add(a(e)),b.F!==c&&v.La(b),e=e.Ua;return d.i};Ma.prototype.filter=function(a){var b=this.Ga;b.Xb=null;var c=b.F;this.cb=null;for(var d=new I,e=b.Da;null!==e;)a(e)&&d.add(e),b.F!==c&&v.La(b),e=e.Ua;return d.i};
Ma.prototype.concat=function(a){this.Ga.Xb=null;return new za(this,a.i)};v.u(Ma,{count:"count"},function(){return this.Ga.fd});Ma.prototype.Cf=function(){this.value=this.key=null;this.eb=-1;this.Ga.Xb=this};Ma.prototype.toString=function(){return null!==this.cb?"MapIterator@"+this.cb:"MapIterator"};
function na(a,b){v.dc(this);this.D=!1;void 0===a||null===a?this.vi=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.vi=a:v.va(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.vi=a===Object?"object":a===String?"string":a===Number?"number":a:v.va(a,"null, a primitive type name, or a class type","Map constructor: keytype");void 0===b||null===b?this.Hs=null:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===
b||"function"===b?this.Hs=b:v.va(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.Hs=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:v.va(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.gd={};this.fd=0;this.xj=this.Xb=null;this.F=0;this.Fh=this.Da=null}v.ea("Map",na);
na.prototype.Bc=function(){var a=this.F;a++;999999999<a&&(a=0);this.F=a};na.prototype.freeze=na.prototype.freeze=function(){this.D=!0;return this};na.prototype.thaw=na.prototype.Pa=function(){this.D=!1;return this};na.prototype.toString=function(){return"Map("+v.getTypeName(this.vi)+","+v.getTypeName(this.Hs)+")#"+v.ld(this)};
na.prototype.add=na.prototype.set=na.prototype.add=function(a,b){this.D&&v.ka(this,a);var c=a;v.Ta(a)&&(c=v.ot(a));var d=this.gd[c];if(void 0===d)return this.fd++,d=new Ea(a,b),this.gd[c]=d,c=this.Fh,null===c?this.Da=d:(d.lo=c,c.Ua=d),this.Fh=d,this.Bc(),!0;d.value=b;return!1};na.prototype.addAll=na.prototype.Tc=function(a){if(null===a)return this;if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Ra(a,c);this.add(d.key,d.value)}else for(a=a.i;a.next();)this.add(a.key,a.value);return this};
na.prototype.first=na.prototype.first=function(){return this.Da};na.prototype.any=function(a){for(var b=this.F,c=this.Da;null!==c;){if(a(c))return!0;this.F!==b&&v.La(this);c=c.Ua}return!1};na.prototype.all=function(a){for(var b=this.F,c=this.Da;null!==c;){if(!a(c))return!1;this.F!==b&&v.La(this);c=c.Ua}return!0};na.prototype.each=function(a){for(var b=this.F,c=this.Da;null!==c;)a(c),this.F!==b&&v.La(this),c=c.Ua;return this};
na.prototype.map=function(a){for(var b=new na(this.vi),c=this.F,d=this.Da;null!==d;)b.add(d.key,a(d)),this.F!==c&&v.La(this),d=d.Ua;return b};na.prototype.filter=function(a){for(var b=new na(this.vi,this.Hs),c=this.F,d=this.Da;null!==d;)a(d)&&b.add(d.key,d.value),this.F!==c&&v.La(this),d=d.Ua;return b};na.prototype.concat=function(a){return this.copy().Tc(a)};na.prototype.contains=na.prototype.has=na.prototype.contains=function(a){var b=a;return v.Ta(a)&&(b=v.ld(a),void 0===b)?!1:void 0!==this.gd[b]};
na.prototype.getValue=na.prototype.get=na.prototype.ja=function(a){var b=a;if(v.Ta(a)&&(b=v.ld(a),void 0===b))return null;a=this.gd[b];return void 0===a?null:a.value};
na.prototype.remove=na.prototype["delete"]=na.prototype.remove=function(a){if(null===a)return!1;this.D&&v.ka(this,a);var b=a;if(v.Ta(a)&&(b=v.ld(a),void 0===b))return!1;a=this.gd[b];if(void 0===a)return!1;var c=a.Ua,d=a.lo;null!==c&&(c.lo=d);null!==d&&(d.Ua=c);this.Da===a&&(this.Da=c);this.Fh===a&&(this.Fh=d);delete this.gd[b];this.fd--;this.Bc();return!0};na.prototype.clear=na.prototype.clear=function(){this.D&&v.ka(this);this.gd={};this.fd=0;this.Fh=this.Da=null;this.Bc()};
na.prototype.copy=function(){var a=new na(this.vi,this.Hs),b=this.gd,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};na.prototype.toArray=na.prototype.cc=function(){var a=this.gd,b=Array(this.fd),c=0,d;for(d in a){var e=a[d];b[c]=new Ea(e.key,e.value);c++}return b};na.prototype.toKeySet=na.prototype.ej=function(){return new Ja(this)};v.u(na,{count:"count"},function(){return this.fd});v.u(na,{size:"size"},function(){return this.fd});
v.u(na,{i:"iterator"},function(){if(0>=this.count)return xa;var a=this.Xb;return null!==a?(a.reset(),a):new Ma(this)});v.u(na,{nE:"iteratorKeys"},function(){return 0>=this.count?xa:new Ha(this)});v.u(na,{oE:"iteratorValues"},function(){if(0>=this.count)return xa;var a=this.xj;return null!==a?(a.reset(),a):new La(this)});function z(a,b){void 0===a?this.y=this.x=0:(this.x=a,this.y=b);this.D=!1}v.ea("Point",z);v.Vh(z);v.Ld(z,{x:!0,y:!0});z.prototype.assign=function(a){this.x=a.x;this.y=a.y};
z.prototype.setTo=z.prototype.m=function(a,b){this.x=a;this.y=b;return this};z.prototype.set=z.prototype.set=function(a){this.Cb();this.x=a.x;this.y=a.y;return this};z.prototype.copy=function(){var a=new z;a.x=this.x;a.y=this.y;return a};g=z.prototype;g.Ea=function(){this.D=!0;Object.freeze(this);return this};g.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.D=!0;return this};
g.Pa=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.D=!1;return this};g.Cb=function(a){if(this.D){var b="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};z.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new z(c,e)}return new z};
z.stringify=function(a){return a instanceof z?a.x.toString()+" "+a.y.toString():a.toString()};z.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};z.prototype.equals=z.prototype.K=function(a){return a instanceof z?this.x===a.x&&this.y===a.y:!1};z.prototype.equalTo=z.prototype.zw=function(a,b){return this.x===a&&this.y===b};z.prototype.equalsApprox=z.prototype.Fc=function(a){return K(this.x,a.x)&&K(this.y,a.y)};
z.prototype.add=z.prototype.add=function(a){this.Cb();this.x+=a.x;this.y+=a.y;return this};z.prototype.subtract=z.prototype.du=function(a){this.Cb();this.x-=a.x;this.y-=a.y;return this};z.prototype.offset=z.prototype.offset=function(a,b){this.Cb();this.x+=a;this.y+=b;return this};
z.prototype.rotate=z.prototype.rotate=function(a){this.Cb();if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=0,e=0;360<=a?a-=360:0>a&&(a+=360);90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(a=a*Math.PI/180,d=Math.cos(a),e=Math.sin(a));this.x=d*b-e*c;this.y=e*b+d*c;return this};z.prototype.scale=z.prototype.scale=function(a,b){this.x*=a;this.y*=b;return this};
z.prototype.distanceSquaredPoint=z.prototype.rf=function(a){var b=a.x-this.x;a=a.y-this.y;return b*b+a*a};z.prototype.distanceSquared=z.prototype.Ro=function(a,b){var c=a-this.x,d=b-this.y;return c*c+d*d};z.prototype.normalize=z.prototype.normalize=function(){this.Cb();var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};z.prototype.directionPoint=z.prototype.xc=function(a){return Na(a.x-this.x,a.y-this.y)};
z.prototype.direction=z.prototype.direction=function(a,b){return Na(a-this.x,b-this.y)};function Na(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}z.prototype.projectOntoLineSegment=function(a,b,c,d){Oa(a,b,c,d,this.x,this.y,this);return this};z.prototype.projectOntoLineSegmentPoint=function(a,b){Oa(a.x,a.y,b.x,b.y,this.x,this.y,this);return this};
z.prototype.snapToGrid=function(a,b,c,d){Pa(this.x,this.y,a,b,c,d,this);return this};z.prototype.snapToGridPoint=function(a,b){Pa(this.x,this.y,a.x,a.y,b.width,b.height,this);return this};z.prototype.setRectSpot=z.prototype.Yt=function(a,b){this.Cb();this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};z.prototype.setSpot=z.prototype.$t=function(a,b,c,d,e){this.Cb();this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};
z.prototype.transform=function(a){a.ub(this);return this};function Qa(a,b){b.Xh(a);return a}var Sa;z.distanceLineSegmentSquared=Sa=function(a,b,c,d,e,f){var h=e-c,k=f-d,l=h*h+k*k;c-=a;d-=b;var m=-c*h-d*k;if(0>=m||m>=l)return h=e-a,k=f-b,Math.min(c*c+d*d,h*h+k*k);a=h*d-k*c;return a*a/l};var Ta;z.distanceSquared=Ta=function(a,b,c,d){a=c-a;b=d-b;return a*a+b*b};var Va;
z.direction=Va=function(a,b,c,d){a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};z.prototype.isReal=z.prototype.G=function(){return isFinite(this.x)&&isFinite(this.y)};function ia(a,b){void 0===a?this.height=this.width=0:(this.width=a,this.height=b);this.D=!1}v.ea("Size",ia);v.Vh(ia);v.Ld(ia,{width:!0,height:!0});
ia.prototype.assign=function(a){this.width=a.width;this.height=a.height};ia.prototype.setTo=ia.prototype.m=function(a,b){this.width=a;this.height=b;return this};ia.prototype.set=ia.prototype.set=function(a){this.Cb();this.width=a.width;this.height=a.height;return this};ia.prototype.copy=function(){var a=new ia;a.width=this.width;a.height=this.height;return a};g=ia.prototype;g.Ea=function(){this.D=!0;Object.freeze(this);return this};g.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
g.freeze=function(){this.D=!0;return this};g.Pa=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.D=!1;return this};g.Cb=function(a){if(this.D){var b="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};ia.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new ia(c,e)}return new ia};
ia.stringify=function(a){return a instanceof ia?a.width.toString()+" "+a.height.toString():a.toString()};ia.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};ia.prototype.equals=ia.prototype.K=function(a){return a instanceof ia?this.width===a.width&&this.height===a.height:!1};ia.prototype.equalTo=ia.prototype.zw=function(a,b){return this.width===a&&this.height===b};ia.prototype.equalsApprox=ia.prototype.Fc=function(a){return K(this.width,a.width)&&K(this.height,a.height)};
ia.prototype.isReal=ia.prototype.G=function(){return isFinite(this.width)&&isFinite(this.height)};
function A(a,b,c,d){void 0===a?this.height=this.width=this.y=this.x=0:a instanceof z?b instanceof z?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof ia?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):v.k("Incorrect arguments supplied to Rect constructor"):(this.x=a,this.y=b,this.width=c,this.height=d);this.D=!1}v.ea("Rect",A);v.Vh(A);v.Ld(A,{x:!0,y:!0,width:!0,height:!0});
A.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};function Wa(a,b,c){a.width=b;a.height=c}A.prototype.setTo=A.prototype.m=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d;return this};A.prototype.set=A.prototype.set=function(a){this.Cb();this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};A.prototype.setPoint=A.prototype.zf=function(a){this.Cb();this.x=a.x;this.y=a.y;return this};
A.prototype.setSize=function(a){this.Cb();this.width=a.width;this.height=a.height;return this};A.prototype.copy=function(){var a=new A;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};g=A.prototype;g.Ea=function(){this.D=!0;Object.freeze(this);return this};g.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.D=!0;return this};g.Pa=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.D=!1;return this};
g.Cb=function(a){if(this.D){var b="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};A.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));for(var h=0;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return new A(c,e,f,h)}return new A};
A.stringify=function(a){return a instanceof A?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};A.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};A.prototype.equals=A.prototype.K=function(a){return a instanceof A?this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height:!1};A.prototype.equalTo=A.prototype.zw=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};
A.prototype.equalsApprox=A.prototype.Fc=function(a){return K(this.x,a.x)&&K(this.y,a.y)&&K(this.width,a.width)&&K(this.height,a.height)};A.prototype.containsPoint=A.prototype.Fa=function(a){return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};A.prototype.containsRect=A.prototype.Xj=function(a){return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
A.prototype.contains=A.prototype.contains=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};A.prototype.reset=function(){this.Cb();this.height=this.width=this.y=this.x=0};A.prototype.offset=A.prototype.offset=function(a,b){this.Cb();this.x+=a;this.y+=b;return this};A.prototype.inflate=A.prototype.Qf=function(a,b){return Xa(this,b,a,b,a)};
A.prototype.addMargin=A.prototype.gw=function(a){return Xa(this,a.top,a.right,a.bottom,a.left)};A.prototype.subtractMargin=A.prototype.FI=function(a){return Xa(this,-a.top,-a.right,-a.bottom,-a.left)};A.prototype.grow=function(a,b,c,d){return Xa(this,a,b,c,d)};function Xa(a,b,c,d,e){a.Cb();var f=a.width;c+e<=-f?(a.x+=f/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}A.prototype.intersectRect=function(a){return Ya(this,a.x,a.y,a.width,a.height)};
A.prototype.intersect=function(a,b,c,d){return Ya(this,a,b,c,d)};function Ya(a,b,c,d,e){a.Cb();var f=Math.max(a.x,b),h=Math.max(a.y,c);b=Math.min(a.x+a.width,b+d);c=Math.min(a.y+a.height,c+e);a.x=f;a.y=h;a.width=Math.max(0,b-f);a.height=Math.max(0,c-h);return a}A.prototype.intersectsRect=A.prototype.yg=function(a){return this.YD(a.x,a.y,a.width,a.height)};
A.prototype.intersects=A.prototype.YD=function(a,b,c,d){var e=this.width,f=this.x;if(Infinity!==e&&Infinity!==c&&(e+=f,c+=a,isNaN(c)||isNaN(e)||f>c||a>e))return!1;a=this.height;c=this.y;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0};function Za(a,b){var c=a.width,d=b.width+10+10,e=a.x,f=b.x-10;if(e>d+f||f>c+e)return!1;c=a.height;d=b.height+10+10;e=a.y;f=b.y-10;return e>d+f||f>c+e?!1:!0}A.prototype.unionPoint=A.prototype.fj=function(a){return $a(this,a.x,a.y,0,0)};
A.prototype.unionRect=A.prototype.bi=function(a){return $a(this,a.x,a.y,a.width,a.height)};A.prototype.union=A.prototype.qF=function(a,b,c,d){this.Cb();void 0===c&&(c=0);void 0===d&&(d=0);return $a(this,a,b,c,d)};function $a(a,b,c,d,e){var f=Math.min(a.x,b),h=Math.min(a.y,c);b=Math.max(a.x+a.width,b+d);c=Math.max(a.y+a.height,c+e);a.x=f;a.y=h;a.width=b-f;a.height=c-h;return a}
A.prototype.setSpot=A.prototype.$t=function(a,b,c){this.Cb();this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var ab;A.contains=ab=function(a,b,c,d,e,f,h,k){void 0===h&&(h=0);void 0===k&&(k=0);return a<=e&&e+h<=a+c&&b<=f&&f+k<=b+d};A.intersects=function(a,b,c,d,e,f,h,k){c+=a;h+=e;if(a>h||e>c)return!1;a=d+b;k+=f;return b>k||f>a?!1:!0};v.defineProperty(A,{left:"left"},function(){return this.x},function(a){this.Cb(a);this.x=a});
v.defineProperty(A,{top:"top"},function(){return this.y},function(a){this.Cb(a);this.y=a});v.defineProperty(A,{right:"right"},function(){return this.x+this.width},function(a){this.Cb(a);this.x+=a-(this.x+this.width)});v.defineProperty(A,{bottom:"bottom"},function(){return this.y+this.height},function(a){this.Cb(a);this.y+=a-(this.y+this.height)});v.defineProperty(A,{position:"position"},function(){return new z(this.x,this.y)},function(a){this.Cb(a);this.x=a.x;this.y=a.y});
v.defineProperty(A,{size:"size"},function(){return new ia(this.width,this.height)},function(a){this.Cb(a);this.width=a.width;this.height=a.height});v.defineProperty(A,{dl:"center"},function(){return new z(this.x+this.width/2,this.y+this.height/2)},function(a){this.Cb(a);this.x=a.x-this.width/2;this.y=a.y-this.height/2});v.defineProperty(A,{na:"centerX"},function(){return this.x+this.width/2},function(a){this.Cb(a);this.x=a-this.width/2});
v.defineProperty(A,{ua:"centerY"},function(){return this.y+this.height/2},function(a){this.Cb(a);this.y=a-this.height/2});A.prototype.isReal=A.prototype.G=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};A.prototype.isEmpty=function(){return 0===this.width&&0===this.height};
function cb(a,b,c,d){void 0===a?this.left=this.bottom=this.right=this.top=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):v.k("Invalid arguments to Margin constructor");this.D=!1}v.ea("Margin",cb);v.Vh(cb);v.Ld(cb,{top:!0,right:!0,bottom:!0,left:!0});cb.prototype.assign=function(a){this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};
cb.prototype.setTo=cb.prototype.m=function(a,b,c,d){this.Cb();this.top=a;this.right=b;this.bottom=c;this.left=d;return this};cb.prototype.set=cb.prototype.set=function(a){this.Cb();this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};cb.prototype.copy=function(){var a=new cb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};g=cb.prototype;g.Ea=function(){this.D=!0;Object.freeze(this);return this};
g.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.D=!0;return this};g.Pa=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.D=!1;return this};g.Cb=function(a){if(this.D){var b="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};
cb.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=NaN;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));if(isNaN(c))return new cb;for(var e=NaN;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));if(isNaN(e))return new cb(c);for(var f=NaN;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));if(isNaN(f))return new cb(c,e);for(var h=NaN;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return isNaN(h)?new cb(c,e):new cb(c,e,f,h)}return new cb};
cb.stringify=function(a){return a instanceof cb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};cb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};cb.prototype.equals=cb.prototype.K=function(a){return a instanceof cb?this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left:!1};
cb.prototype.equalTo=cb.prototype.zw=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};cb.prototype.equalsApprox=cb.prototype.Fc=function(a){return K(this.top,a.top)&&K(this.right,a.right)&&K(this.bottom,a.bottom)&&K(this.left,a.left)};cb.prototype.isReal=cb.prototype.G=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function ja(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}v.Vh(ja);
v.Ld(ja,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0});ja.prototype.set=ja.prototype.set=function(a){this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};ja.prototype.copy=function(){var a=new ja;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};ja.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};
ja.prototype.equals=ja.prototype.K=function(a){return a instanceof ja?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1};ja.prototype.isIdentity=ja.prototype.vt=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};ja.prototype.reset=ja.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0;return this};
ja.prototype.multiply=ja.prototype.multiply=function(a){var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,f=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f;return this};
ja.prototype.multiplyInverted=ja.prototype.wE=function(a){var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,f=a.m11*b,h=b*(a.m21*a.dy-a.m22*a.dx),k=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*f;e=this.m12*e+this.m22*f;f=this.m11*h+this.m21*k+this.dx;h=this.m12*h+this.m22*k+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=f;this.dy=h;return this};
ja.prototype.invert=ja.prototype.Dz=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),f=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f;return this};
ja.prototype.rotate=ja.prototype.rotate=function(a,b,c){360<=a?a-=360:0>a&&(a+=360);if(0===a)return this;this.translate(b,c);var d=0,e=0;90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(e=a*Math.PI/180,d=Math.cos(e),e=Math.sin(e));a=this.m12*d+this.m22*e;var f=this.m11*-e+this.m21*d,h=this.m12*-e+this.m22*d;this.m11=this.m11*d+this.m21*e;this.m12=a;this.m21=f;this.m22=h;this.translate(-b,-c);return this};
ja.prototype.translate=ja.prototype.translate=function(a,b){this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b;return this};ja.prototype.scale=ja.prototype.scale=function(a,b){void 0===b&&(b=a);this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b;return this};ja.prototype.transformPoint=ja.prototype.ub=function(a){var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};
ja.prototype.invertedTransformPoint=ja.prototype.Xh=function(a){var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),f=a.x,h=a.y;a.x=f*this.m22*b+h*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=f*c+h*d+e;return a};
ja.prototype.transformRect=ja.prototype.oF=function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=this.m11,h=this.m12,k=this.m21,l=this.m22,m=this.dx,n=this.dy,p=b*f+c*k+m,q=b*h+c*l+n,r=d*f+c*k+m,c=d*h+c*l+n,s=b*f+e*k+m,b=b*h+e*l+n,f=d*f+e*k+m,d=d*h+e*l+n,e=p,h=q,p=Math.min(p,r),e=Math.max(e,r),h=Math.min(h,c),q=Math.max(q,c),p=Math.min(p,s),e=Math.max(e,s),h=Math.min(h,b),q=Math.max(q,b),p=Math.min(p,f),e=Math.max(e,f),h=Math.min(h,d),q=Math.max(q,d);a.x=p;a.y=h;a.width=e-p;a.height=q-h;return a};
function L(a,b,c,d){void 0===a?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d);this.D=!1}v.ea("Spot",L);v.Vh(L);v.Ld(L,{x:!0,y:!0,offsetX:!0,offsetY:!0});L.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};L.prototype.setTo=L.prototype.m=function(a,b,c,d){this.Cb();this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};
L.prototype.set=L.prototype.set=function(a){this.Cb();this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};L.prototype.copy=function(){var a=new L;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};g=L.prototype;g.Ea=function(){this.D=!0;Object.freeze(this);return this};g.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()};g.freeze=function(){this.D=!0;return this};
g.Pa=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.D=!1;return this};g.Cb=function(a){if(this.D){var b="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v.k(b)}};function db(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}var gb;
L.parse=gb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return qb;if("TopLeft"===a)return rb;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return sb;if("TopRight"===a)return tb;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return ub;if("Center"===a)return zb;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return Ab;if("BottomLeft"===a)return Cb;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return Db;if("BottomRight"===a)return Eb;if("TopSide"===a)return Fb;if("LeftSide"===
a)return Gb;if("RightSide"===a)return Nb;if("BottomSide"===a)return Ob;if("TopBottomSides"===a)return Pb;if("LeftRightSides"===a)return Tb;if("TopLeftSides"===a)return Ub;if("TopRightSides"===a)return Vb;if("BottomLeftSides"===a)return Zb;if("BottomRightSides"===a)return $b;if("NotTopSide"===a)return ac;if("NotLeftSide"===a)return bc;if("NotRightSide"===a)return cc;if("NotBottomSide"===a)return dc;if("AllSides"===a)return ec;if("Default"===a)return fc;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;
var d=a[b++];void 0!==d&&0<d.length&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(f=parseFloat(d));for(var h=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(h=parseFloat(d));return new L(c,e,f,h)}return new L};L.stringify=function(a){return a instanceof L?a.bd()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
L.prototype.toString=function(){return this.bd()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.K(qb)?"None":this.K(rb)?"TopLeft":this.K(sb)?"Top":this.K(tb)?"TopRight":this.K(ub)?"Left":this.K(zb)?"Center":this.K(Ab)?"Right":this.K(Cb)?"BottomLeft":this.K(Db)?"Bottom":this.K(Eb)?"BottomRight":this.K(Fb)?"TopSide":this.K(Gb)?"LeftSide":this.K(Nb)?"RightSide":this.K(Ob)?"BottomSide":this.K(Pb)?"TopBottomSides":this.K(Tb)?
"LeftRightSides":this.K(Ub)?"TopLeftSides":this.K(Vb)?"TopRightSides":this.K(Zb)?"BottomLeftSides":this.K($b)?"BottomRightSides":this.K(ac)?"NotTopSide":this.K(bc)?"NotLeftSide":this.K(cc)?"NotRightSide":this.K(dc)?"NotBottomSide":this.K(ec)?"AllSides":this.K(fc)?"Default":"None"};L.prototype.equals=L.prototype.K=function(a){return a instanceof L?(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY:!1};
L.prototype.opposite=function(){return new L(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)};L.prototype.includesSide=L.prototype.ap=function(a){if(!this.Wi())return!1;if(!a.Wi())if(a.K(nc))a=Gb;else if(a.K(pc))a=Nb;else if(a.K(qc))a=Fb;else if(a.K(rc))a=Ob;else return!1;a=a.offsetY;return(this.offsetY&a)===a};L.prototype.isSpot=L.prototype.bd=function(){return!isNaN(this.x)&&!isNaN(this.y)};L.prototype.isNoSpot=L.prototype.se=function(){return isNaN(this.x)||isNaN(this.y)};
L.prototype.isSide=L.prototype.Wi=function(){return this.se()&&1===this.offsetX&&0!==this.offsetY};L.prototype.isDefault=L.prototype.Uc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var qb;L.None=qb=db(new L(0,0,0,0),0).Ea();var fc;L.Default=fc=db(new L(0,0,-1,0),-1).Ea();var rb;L.TopLeft=rb=(new L(0,0,0,0)).Ea();var sb;L.TopCenter=sb=(new L(.5,0,0,0)).Ea();var tb;L.TopRight=tb=(new L(1,0,0,0)).Ea();var ub;L.LeftCenter=ub=(new L(0,.5,0,0)).Ea();var zb;
L.Center=zb=(new L(.5,.5,0,0)).Ea();var Ab;L.RightCenter=Ab=(new L(1,.5,0,0)).Ea();var Cb;L.BottomLeft=Cb=(new L(0,1,0,0)).Ea();var Db;L.BottomCenter=Db=(new L(.5,1,0,0)).Ea();var Eb;L.BottomRight=Eb=(new L(1,1,0,0)).Ea();var sc;L.MiddleTop=sc=sb;var tc;L.MiddleLeft=tc=ub;var uc;L.MiddleRight=uc=Ab;var vc;L.MiddleBottom=vc=Db;var qc;L.Top=qc=sb;var nc;L.Left=nc=ub;var pc;L.Right=pc=Ab;var rc;L.Bottom=rc=Db;var Fb;L.TopSide=Fb=db(new L(0,0,1,v.dd),1).Ea();var Gb;
L.LeftSide=Gb=db(new L(0,0,1,v.Nc),1).Ea();var Nb;L.RightSide=Nb=db(new L(0,0,1,v.Xc),1).Ea();var Ob;L.BottomSide=Ob=db(new L(0,0,1,v.Wc),1).Ea();var Pb;L.TopBottomSides=Pb=db(new L(0,0,1,v.dd|v.Wc),1).Ea();var Tb;L.LeftRightSides=Tb=db(new L(0,0,1,v.Nc|v.Xc),1).Ea();var Ub;L.TopLeftSides=Ub=db(new L(0,0,1,v.dd|v.Nc),1).Ea();var Vb;L.TopRightSides=Vb=db(new L(0,0,1,v.dd|v.Xc),1).Ea();var Zb;L.BottomLeftSides=Zb=db(new L(0,0,1,v.Wc|v.Nc),1).Ea();var $b;
L.BottomRightSides=$b=db(new L(0,0,1,v.Wc|v.Xc),1).Ea();var ac;L.NotTopSide=ac=db(new L(0,0,1,v.Nc|v.Xc|v.Wc),1).Ea();var bc;L.NotLeftSide=bc=db(new L(0,0,1,v.dd|v.Xc|v.Wc),1).Ea();var cc;L.NotRightSide=cc=db(new L(0,0,1,v.dd|v.Nc|v.Wc),1).Ea();var dc;L.NotBottomSide=dc=db(new L(0,0,1,v.dd|v.Nc|v.Xc),1).Ea();var ec;L.AllSides=ec=db(new L(0,0,1,v.dd|v.Nc|v.Xc|v.Wc),1).Ea();function Ac(){this.ff=[1,0,0,1,0,0]}
Ac.prototype.copy=function(){var a=new Ac;a.ff[0]=this.ff[0];a.ff[1]=this.ff[1];a.ff[2]=this.ff[2];a.ff[3]=this.ff[3];a.ff[4]=this.ff[4];a.ff[5]=this.ff[5];return a};function Bc(a){this.type=a;this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0;this.pD=[];this.pattern=null}Bc.prototype.addColorStop=function(a,b){this.pD.push({offset:a,color:b})};
function Cc(a,b,c){this.fillStyle="#000000";this.font="10px sans-serif";this.globalAlpha=1;this.lineCap="butt";this.Sm=0;this.lineJoin="miter";this.lineWidth=1;this.miterLimit=10;this.shadowBlur=0;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowOffsetY=this.shadowOffsetX=0;this.strokeStyle="#000000";this.textAlign="start";this.qw=!1;this.og=this.os=this.ns=0;this.document=b||document;this.FD=c;this.Ow=null;this.path=[];this.Ri=new Ac;this.stack=[];this.tf=[];this.xw=a;this.YH="http://www.w3.org/2000/svg";
this.width=this.xw.width;this.height=this.xw.height;this.Dl=Dc(this,"svg",{width:this.width+"px",height:this.height+"px",QK:"0 0 "+this.xw.width+" "+this.xw.height});this.Dl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");this.Dl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");Ec(this,1,0,0,1,0,0);a=v.Jl++;b=Dc(this,"clipPath",{id:"mainClip"+a});b.appendChild(Dc(this,"rect",{x:0,y:0,width:this.width,height:this.height}));
this.Dl.appendChild(b);this.tf[0].setAttributeNS(null,"clip-path","url(#mainClip"+a+")")}g=Cc.prototype;g.arc=function(a,b,c,d,e,f){Fc(this,a,b,c,d,e,f)};g.beginPath=function(){this.path=[]};g.bezierCurveTo=function(a,b,c,d,e,f){this.path.push(["C",a,b,c,d,e,f])};g.clearRect=function(){};g.clip=function(){Gc(this,"clipPath",this.path,new Ac)};g.closePath=function(){this.path.push(["z"])};g.createLinearGradient=function(a,b,c,d){var e=new Bc("linear");e.x1=a;e.y1=b;e.x2=c;e.y2=d;return e};
g.createPattern=function(a){var b=new Bc("pattern");b.pattern=a;return b};g.createRadialGradient=function(a,b,c,d,e,f){var h=new Bc("radial");h.x1=a;h.y1=b;h.r1=c;h.x2=d;h.y2=e;h.r2=f;return h};
g.drawImage=function(a,b,c,d,e,f,h,k,l){var m="";a instanceof HTMLCanvasElement&&(m=a.toDataURL());a instanceof HTMLImageElement&&(m=a.src);m={x:0,y:0,width:a.naturalWidth,height:a.naturalHeight,href:m};m.preserveAspectRatio=Hc(d,k)&&Hc(e,l)?"xMidYMid slice":"none";var n="";k/=d;l/=e;if(0!==f||0!==h)n+=" translate("+f+", "+h+")";if(1!==k||1!==l)n+=" scale("+k+", "+l+")";if(0!==b||0!==c)n+=" translate("+-b+", "+-c+")";if(0!==b||0!==c||d!==a.naturalWidth||e!==a.naturalHeight)a="CLIP"+v.Jl++,f=Dc(this,
"clipPath",{id:a}),f.appendChild(Dc(this,"rect",{x:b,y:c,width:d,height:e})),this.Dl.appendChild(f),m["clip-path"]="url(#"+a+")";Oc(this,"image",m,this.Ri,n);this.addElement("image",m)};g.fill=function(){Gc(this,"fill",this.path,this.Ri)};g.vg=function(){this.qw?this.clip():this.fill()};g.fillRect=function(a,b,c,d){Pc(this,"fill",[a,b,c,d],this.Ri)};
g.fillText=function(a,b,c){a=[a,b,c];b=this.textAlign;"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle");b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b};Oc(this,"fill",b,this.Ri);this.addElement("text",b,a[0])};g.lineTo=function(a,b){this.path.push(["L",a,b])};g.moveTo=function(a,b){this.path.push(["M",a,b])};g.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])};g.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])};
g.restore=function(){this.Ri=this.stack.pop();this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle;this.font=a.font;this.globalAlpha=a.globalAlpha;this.lineCap=a.lineCap;this.Sm=a.Sm;this.lineJoin=a.lineJoin;this.lineWidth=a.lineWidth;this.miterLimit=a.miterLimit;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.shadowOffsetX=a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.strokeStyle=a.strokeStyle;this.textAlign=a.textAlign};
g.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Sm:this.Sm,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a);this.stack.push(this.Ri.copy())};
g.setTransform=function(a,b,c,d,e,f){1===a&&0===b&&0===c&&1===d&&0===e&&0===f||Ec(this,a,b,c,d,e,f)};g.scale=function(){};g.stroke=function(){Gc(this,"stroke",this.path,this.Ri)};g.dj=function(){this.pn||this.stroke()};g.strokeRect=function(a,b,c,d){Pc(this,"stroke",[a,b,c,d],this.Ri)};function Dc(a,b,c,d){a=a.document.createElementNS(a.YH,b);if(v.Ta(c))for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);void 0!==d&&(a.textContent=d);return a}
g.addElement=function(a,b,c){a=Dc(this,a,b,c);0<this.tf.length?this.tf[this.tf.length-1].appendChild(a):this.Dl.appendChild(a);return this.Ow=a};
function Oc(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha);"fill"===b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof Bc?Qc(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"===b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof Bc?Qc(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit);d=d.ff;d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")";void 0!==e&&(d+=e);c.transform=d}
function Qc(a,b){var c="GRAD"+v.Jl++,d;if("linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=Dc(a,"linearGradient",d);else if("radial"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=Dc(a,"radialGradient",d);else if("pattern"===b.type){var e=b.pattern;d={width:e.width,height:e.height,id:c,patternUnits:"userSpaceOnUse"};var f="";e instanceof HTMLCanvasElement&&(f=e.toDataURL());e instanceof HTMLImageElement&&(f=e.src);e={x:0,y:0,width:e.width,
height:e.height,href:f};d=Dc(a,"pattern",d);d.appendChild(Dc(a,"image",e))}else throw Error("invalid gradient");for(var e=b.pD,f=e.length,h=[],k=0;k<f;k++){var l=e[k],m=l.color,l={offset:l.offset,"stop-color":m};/^rgba\(/.test(m)&&(m=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m),l["stop-color"]="rgb("+m[1]+","+m[2]+","+m[3]+")",l["stop-opacity"]=m[4]);h.push(l)}h.sort(function(a,b){return a.offset>b.offset?1:-1});for(k=0;k<f;k++)d.appendChild(Dc(a,"stop",
h[k]));a.Dl.appendChild(d);return"url(#"+c+")"}function Pc(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]};Oc(a,b,c,d);a.addElement("rect",c)}
function Gc(a,b,c,d){for(var e=[],f=0;f<c.length;f++){var h=v.fl(c[f]),k=[h.shift()];if("A"===k[0])k.push(h.shift()+","+h.shift(),h.shift(),h.shift()+","+h.shift(),h.shift()+","+h.shift());else for(;h.length;)k.push(h.shift()+","+h.shift());e.push(k.join(" "))}c={d:e.join(" ")};Oc(a,b,c,d);"clipPath"===b?(b="CLIP"+v.Jl++,d=Dc(a,"clipPath",{id:b}),d.appendChild(Dc(a,"path",c)),a.Dl.appendChild(d),0<a.tf.length&&a.tf[a.tf.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",
c)}function Fc(a,b,c,d,e,f,h){var k=Math.abs(e-f);if(e!==f){var l=b+d*Math.cos(f);f=c+d*Math.sin(f);k>=2*Math.PI?(Fc(a,b,c,d,e,e+Math.PI,h),Fc(a,b,c,d,e+Math.PI,e+2*Math.PI,h),a.path.push(["M",l,f])):(b+=d*Math.cos(e),c+=d*Math.sin(e),k=180*k/Math.PI,e=h?0:1,h=180<=k===!!h?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,k,h,e,l,f]))}}function Ec(a,b,c,d,e,f,h){var k=new Ac;k.ff=[b,c,d,e,f,h];b={};Oc(a,"g",b,k);k=a.addElement("g",b);a.tf.push(k)}
g.Ya=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var a="SHADOW"+v.Jl++,b=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),c,d,e,f,h;c=Dc(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",GK:this.shadowBlur/2});d=Dc(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor});e=Dc(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"});f=Dc(this,"feOffset",{"in":"comp",result:"offsetBlur",
dx:this.shadowOffsetX,dy:this.shadowOffsetY});h=Dc(this,"feMerge",{});h.appendChild(Dc(this,"feMergeNode",{"in":"offsetBlur"}));h.appendChild(Dc(this,"feMergeNode",{"in":"SourceGraphic"}));b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);b.appendChild(h);0<this.tf.length&&this.tf[this.tf.length-1].setAttributeNS(null,"filter","url(#"+a+")")}};g.rA=function(a,b,c){this.ns=a;this.os=b;this.og=c};g.$m=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0};
g.an=function(){this.shadowOffsetX=this.ns;this.shadowOffsetY=this.os;this.shadowBlur=this.og};g.qz=function(){return!1};g.oz=function(){};function Rc(a,b){this.ownerDocument=void 0===b?document:b;var c=this.ownerDocument.createElement("canvas");c.tabIndex=0;this.xd=c;this.el=new Sc(c);c.W=a;Object.seal(this)}g=Rc.prototype;g.toDataURL=function(a,b){return this.xd.toDataURL(a,b)};g.getBoundingClientRect=function(){return this.xd.getBoundingClientRect()};g.focus=function(){return this.xd.focus()};
g.addEventListener=function(a,b,c){this.xd.addEventListener(a,b,c)};g.removeEventListener=function(a,b,c){this.xd.removeEventListener(a,b,c)};v.defineProperty(Rc,{width:"width"},function(){return this.xd.width},function(a){this.xd.width=a});v.defineProperty(Rc,{height:"height"},function(){return this.xd.height},function(a){this.xd.height=a});v.defineProperty(Rc,{style:"style"},function(){return this.xd.style},function(a){this.xd.style=a});
function Sc(a){a.getContext&&a.getContext("2d")||v.k("Browser does not support HTML Canvas Element");this.wa=a.getContext("2d");this.Kx=this.Mx=this.Lx="";this.pn=!1;this.og=this.os=this.ns=0;Object.seal(this)}v.defineProperty(Sc,{fillStyle:"fillStyle"},function(){return this.wa.fillStyle},function(a){this.Kx!==a&&(this.Kx=this.wa.fillStyle=a)});v.defineProperty(Sc,{font:"font"},function(){return this.wa.font},function(a){this.Lx!==a&&(this.Lx=this.wa.font=a)});
v.defineProperty(Sc,{globalAlpha:"globalAlpha"},function(){return this.wa.globalAlpha},function(a){this.wa.globalAlpha=a});v.defineProperty(Sc,{lineCap:"lineCap"},function(){return this.wa.lineCap},function(a){this.wa.lineCap=a});v.defineProperty(Sc,{Sm:"lineDashOffset"},function(){return this.wa.Sm},function(a){this.wa.Sm=a});v.defineProperty(Sc,{lineJoin:"lineJoin"},function(){return this.wa.lineJoin},function(a){this.wa.lineJoin=a});
v.defineProperty(Sc,{lineWidth:"lineWidth"},function(){return this.wa.lineWidth},function(a){this.wa.lineWidth=a});v.defineProperty(Sc,{miterLimit:"miterLimit"},function(){return this.wa.miterLimit},function(a){this.wa.miterLimit=a});v.defineProperty(Sc,{shadowBlur:"shadowBlur"},function(){return this.wa.shadowBlur},function(a){this.wa.shadowBlur=a});v.defineProperty(Sc,{shadowColor:"shadowColor"},function(){return this.wa.shadowColor},function(a){this.wa.shadowColor=a});
v.defineProperty(Sc,{shadowOffsetX:"shadowOffsetX"},function(){return this.wa.shadowOffsetX},function(a){this.wa.shadowOffsetX=a});v.defineProperty(Sc,{shadowOffsetY:"shadowOffsetY"},function(){return this.wa.shadowOffsetY},function(a){this.wa.shadowOffsetY=a});v.defineProperty(Sc,{strokeStyle:"strokeStyle"},function(){return this.wa.strokeStyle},function(a){this.Mx!==a&&(this.Mx=this.wa.strokeStyle=a)});
v.defineProperty(Sc,{textAlign:"textAlign"},function(){return this.wa.textAlign},function(a){this.wa.textAlign=a});v.defineProperty(Sc,{pt:"imageSmoothingEnabled"},function(){return this.wa.pt},function(a){this.wa.pt=a});g=Sc.prototype;g.arc=function(a,b,c,d,e,f){this.wa.arc(a,b,c,d,e,f)};g.beginPath=function(){this.wa.beginPath()};g.bezierCurveTo=function(a,b,c,d,e,f){this.wa.bezierCurveTo(a,b,c,d,e,f)};g.clearRect=function(a,b,c,d){this.wa.clearRect(a,b,c,d)};g.clip=function(){this.wa.clip()};
g.closePath=function(){this.wa.closePath()};g.createLinearGradient=function(a,b,c,d){return this.wa.createLinearGradient(a,b,c,d)};g.createPattern=function(a,b){return this.wa.createPattern(a,b)};g.createRadialGradient=function(a,b,c,d,e,f){return this.wa.createRadialGradient(a,b,c,d,e,f)};g.drawImage=function(a,b,c,d,e,f,h,k,l){void 0===d?this.wa.drawImage(a,b,c):this.wa.drawImage(a,b,c,d,e,f,h,k,l)};g.fill=function(){this.wa.fill()};g.fillRect=function(a,b,c,d){this.wa.fillRect(a,b,c,d)};
g.fillText=function(a,b,c){this.wa.fillText(a,b,c)};g.getImageData=function(a,b,c,d){return this.wa.getImageData(a,b,c,d)};g.lineTo=function(a,b){this.wa.lineTo(a,b)};g.measureText=function(a){return this.wa.measureText(a)};g.moveTo=function(a,b){this.wa.moveTo(a,b)};g.quadraticCurveTo=function(a,b,c,d){this.wa.quadraticCurveTo(a,b,c,d)};g.rect=function(a,b,c,d){this.wa.rect(a,b,c,d)};g.restore=function(){this.wa.restore()};Sc.prototype.rotate=function(a){this.wa.rotate(a)};g=Sc.prototype;
g.save=function(){this.wa.save()};g.setTransform=function(a,b,c,d,e,f){this.wa.setTransform(a,b,c,d,e,f)};g.scale=function(a,b){this.wa.scale(a,b)};g.stroke=function(){this.wa.stroke()};g.transform=function(a,b,c,d,e,f){1===a&&0===b&&0===c&&1===d&&0===e&&0===f||this.wa.transform(a,b,c,d,e,f)};g.translate=function(a,b){this.wa.translate(a,b)};
g.vg=function(a){if(a instanceof ha&&a.type===Yc){var b=a.sn;a=a.Qx;a>b?(this.scale(b/a,1),this.translate((a-b)/2,0)):b>a&&(this.scale(1,a/b),this.translate(0,(b-a)/2));this.pn?this.clip():this.fill();a>b?(this.translate(-(a-b)/2,0),this.scale(1/(b/a),1)):b>a&&(this.translate(0,-(b-a)/2),this.scale(1,1/(a/b)))}else this.pn?this.clip():this.fill()};g.dj=function(){this.pn||this.stroke()};v.defineProperty(Sc,{qw:"clipInsteadOfFill"},function(){return this.pn},function(a){this.pn=a});g=Sc.prototype;
g.rA=function(a,b,c){this.ns=a;this.os=b;this.og=c};g.$m=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0};g.an=function(){this.shadowOffsetX=this.ns;this.shadowOffsetY=this.os;this.shadowBlur=this.og};g.qz=function(a,b){var c=this.wa;if(void 0!==c.setLineDash)c.setLineDash(a),c.lineDashOffset=b;else if(void 0!==c.webkitLineDash)c.webkitLineDash=a,c.webkitLineDashOffset=b;else if(void 0!==c.mozDash)c.mozDash=a,c.mozDashOffset=b;else return!1;return!0};
g.oz=function(){var a=this.wa;void 0!==a.setLineDash?(a.setLineDash(v.hj),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=v.hj,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0)};function Zc(a,b){b&&(a.Lx="");a.Mx="";a.Kx=""}
var $c=(Math.sqrt(2)-1)/3*4,ad=(new z(0,0)).Ea(),bd=(new A(0,0,0,0)).Ea(),cd=(new cb(0,0,0,0)).Ea(),ld=(new cb(2,2,2,2)).Ea(),md=(new z(6,6)).Ea(),nd=(new z(-Infinity,-Infinity)).Ea(),od=(new z(Infinity,Infinity)).Ea(),pd=(new ia(0,0)).Ea(),qd=(new ia(1,1)).Ea(),rd=(new ia(6,6)).Ea(),sd=(new ia(8,8)).Ea(),td=(new ia(10,10)).Ea(),Cd=(new ia(Infinity,Infinity)).Ea(),Dd=(new z(NaN,NaN)).Ea(),Ed=(new ia(NaN,NaN)).Ea(),Fd=(new A(NaN,NaN,NaN,NaN)).Ea(),Gd=(new L(.156,.156)).Ea(),Hd=(new L(.844,.844)).Ea(),
Id=new ta,Jd=new ta,Kd=null;function Ld(a){if(0>=a)return 0;var b=Kd;if(null===b){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);Kd=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)}function K(a,b){var c=a-b;return.5>c&&-.5<c}function Hc(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function Md(a,b,c,d,e,f,h){0>=e&&(e=1E-6);var k=0,l=0,m=0,n=0;a<c?(l=a,k=c):(l=c,k=a);b<d?(n=b,m=d):(n=d,m=b);if(a===c)return n<=h&&h<=m&&a-e<=f&&f<=a+e;if(b===d)return l<=f&&f<=k&&b-e<=h&&h<=b+e;k+=e;l-=e;if(l<=f&&f<=k&&(m+=e,n-=e,n<=h&&h<=m))if(k-l>m-n)if(a-c>e||c-a>e){if(f=(d-b)/(c-a)*(f-a)+b,f-e<=h&&h<=f+e)return!0}else return!0;else if(b-d>e||d-b>e){if(h=(c-a)/(d-b)*(h-b)+a,h-e<=f&&f<=h+e)return!0}else return!0;return!1}
function Xd(a,b,c,d,e,f,h,k,l,m,n,p){if(Md(a,b,h,k,p,c,d)&&Md(a,b,h,k,p,e,f))return Md(a,b,h,k,p,m,n);var q=(a+c)/2,r=(b+d)/2,s=(c+e)/2,t=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(q+s)/2;c=(r+t)/2;var s=(s+e)/2,t=(t+f)/2,u=(d+s)/2,x=(c+t)/2;return Xd(a,b,q,r,d,c,u,x,l,m,n,p)||Xd(u,x,s,t,e,f,h,k,l,m,n,p)}
function Yd(a,b,c,d,e,f,h,k,l,m){if(Md(a,b,h,k,l,c,d)&&Md(a,b,h,k,l,e,f))$a(m,a,b,0,0),$a(m,h,k,0,0);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+f)/2,s=(d+q)/2,t=(c+r)/2;Yd(a,b,n,p,d,c,s,t,l,m);Yd(s,t,q,r,e,f,h,k,l,m)}}
function Zd(a,b,c,d,e,f,h,k,l,m){if(Md(a,b,h,k,l,c,d)&&Md(a,b,h,k,l,e,f))0===m.length&&(m.push(a),m.push(b)),m.push(h),m.push(k);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+f)/2,s=(d+q)/2,t=(c+r)/2;Zd(a,b,n,p,d,c,s,t,l,m);Zd(s,t,q,r,e,f,h,k,l,m)}}
function $d(a,b,c,d,e,f,h,k,l,m,n,p,q,r){var s=1-l;a=a*s+c*l;b=b*s+d*l;c=c*s+e*l;d=d*s+f*l;e=e*s+h*l;f=f*s+k*l;k=a*s+c*l;h=b*s+d*l;c=c*s+e*l;d=d*s+f*l;m.x=a;m.y=b;n.x=k;n.y=h;p.x=k*s+c*l;p.y=h*s+d*l;q.x=c;q.y=d;r.x=e;r.y=f}function ae(a,b,c,d,e,f,h,k,l,m){if(Md(a,b,e,f,m,c,d))return Md(a,b,e,f,m,k,l);var n=(a+c)/2,p=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var q=(n+c)/2,r=(p+d)/2;return ae(a,b,n,p,q,r,h,k,l,m)||ae(q,r,c,d,e,f,h,k,l,m)}
function be(a,b,c,d,e,f,h,k){if(Md(a,b,e,f,h,c,d))$a(k,a,b,0,0),$a(k,e,f,0,0);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var n=(l+c)/2,p=(m+d)/2;be(a,b,l,m,n,p,h,k);be(n,p,c,d,e,f,h,k)}}function ce(a,b,c,d,e,f,h,k){if(Md(a,b,e,f,h,c,d))0===k.length&&(k.push(a),k.push(b)),k.push(e),k.push(f);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var n=(l+c)/2,p=(m+d)/2;ce(a,b,l,m,n,p,h,k);ce(n,p,c,d,e,f,h,k)}}
function de(a,b,c,d,e,f,h,k,l,m,n,p,q,r){0>=q&&(q=1E-6);if(Md(a,b,h,k,q,c,d)&&Md(a,b,h,k,q,e,f)){var s=(a-h)*(m-p)-(b-k)*(l-n);if(0===s)return!1;q=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/s;s=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/s;if((l>n?l-n:n-l)<(m>p?m-p:p-m)){if(h=l=0,b<k?(l=b,h=k):(l=k,h=b),s<l||s>h)return!1}else if(a<h?l=a:(l=h,h=a),q<l||q>h)return!1;r.x=q;r.y=s;return!0}var s=(a+c)/2,t=(b+d)/2;c=(c+e)/2;d=(d+f)/2;e=(e+h)/2;f=(f+k)/2;var u=(s+c)/2,x=(t+d)/2;c=(c+e)/2;d=(d+f)/2;var w=(u+c)/2,y=(x+d)/2,
B=(n-l)*(n-l)+(p-m)*(p-m),H=!1;de(a,b,s,t,u,x,w,y,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<B&&(B=b,H=!0));a=r.x;s=r.y;de(w,y,c,d,e,f,h,k,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<B?H=!0:(r.x=a,r.y=s));return H}
function ee(a,b,c,d,e,f,h,k,l,m,n,p,q){var r=0;0>=q&&(q=1E-6);if(Md(a,b,h,k,q,c,d)&&Md(a,b,h,k,q,e,f)){q=(a-h)*(m-p)-(b-k)*(l-n);if(0===q)return r;var s=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/q,t=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/q;if(s>=n)return r;if((l>n?l-n:n-l)<(m>p?m-p:p-m)){if(a=l=0,b<k?(l=b,a=k):(l=k,a=b),t<l||t>a)return r}else if(a<h?(l=a,a=h):l=h,s<l||s>a)return r;0<q?r++:0>q&&r--}else{var s=(a+c)/2,t=(b+d)/2,u=(c+e)/2,x=(d+f)/2;e=(e+h)/2;f=(f+k)/2;d=(s+u)/2;c=(t+x)/2;var u=(u+e)/2,x=(x+f)/2,
w=(d+u)/2,y=(c+x)/2,r=r+ee(a,b,s,t,d,c,w,y,l,m,n,p,q),r=r+ee(w,y,u,x,e,f,h,k,l,m,n,p,q)}return r}
function Oa(a,b,c,d,e,f,h){if(Hc(a,c)){var k=0;c=0;b<d?(k=b,c=d):(k=d,c=b);d=f;if(d<k)return h.x=a,h.y=k,!1;if(d>c)return h.x=a,h.y=c,!1;h.x=a;h.y=d;return!0}if(Hc(b,d)){a<c?k=a:(k=c,c=a);d=e;if(d<k)return h.x=k,h.y=b,!1;if(d>c)return h.x=c,h.y=b,!1;h.x=d;h.y=b;return!0}k=((a-e)*(a-c)+(b-f)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>k)return h.x=a,h.y=b,!1;if(1.000005<k)return h.x=c,h.y=d,!1;h.x=a+k*(c-a);h.y=b+k*(d-b);return!0}
function fe(a,b,c,d,e,f,h,k,l){if(K(a,c)&&K(b,d))return l.x=a,l.y=b,!1;if(Hc(e,h)){if(Hc(a,c))return Oa(a,b,c,d,e,f,l),!1;f=(d-b)/(c-a)*(e-a)+b;return Oa(a,b,c,d,e,f,l)}k=(k-f)/(h-e);if(Hc(a,c)){f=k*(a-e)+f;c=h=0;b<d?(h=b,c=d):(h=d,c=b);if(f<h)return l.x=a,l.y=h,!1;if(f>c)return l.x=a,l.y=c,!1;l.x=a;l.y=f;return!0}h=(d-b)/(c-a);if(Hc(k,h))return Oa(a,b,c,d,e,f,l),!1;e=(h*a-k*e+f-b)/(h-k);if(Hc(h,0)){a<c?h=a:(h=c,c=a);if(e<h)return l.x=h,l.y=b,!1;if(e>c)return l.x=c,l.y=b,!1;l.x=e;l.y=b;return!0}f=
h*(e-a)+b;return Oa(a,b,c,d,e,f,l)}function ge(a,b,c,d,e,f,h,k,l){var m=1E21,n=a,p=b;if(fe(a,b,a,d,e,f,h,k,l)){var q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f);q<m&&(m=q,n=l.x,p=l.y)}fe(c,b,c,d,e,f,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f),q<m&&(m=q,n=l.x,p=l.y));fe(a,b,c,b,e,f,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f),q<m&&(m=q,n=l.x,p=l.y));fe(a,d,c,d,e,f,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-f)*(l.y-f),q<m&&(m=q,n=l.x,p=l.y));l.x=n;l.y=p;return 1E21>m}
function he(a,b,c,d,e,f,h,k,l){c=a-c;var m=e-h,n=h=0;0===c||0===m?0===c?(k=(f-k)/m,h=a,n=k*h+(f-k*e)):(d=(b-d)/c,h=e,n=d*h+(b-d*a)):(d=(b-d)/c,k=(f-k)/m,a=b-d*a,h=(f-k*e-a)/(d-k),n=d*h+a);l.m(h,n);return l}
function oe(a,b,c){var d=b.x,e=b.y,f=c.x,h=c.y,k=a.left,l=a.right,m=a.top,n=a.bottom;return d===f?(f=a=0,e<h?(a=e,f=h):(a=h,f=e),k<=d&&d<=l&&a<=n&&f>=m):e===h?(d<f?a=d:(a=f,f=d),m<=e&&e<=n&&a<=l&&f>=k):a.Fa(b)||a.Fa(c)||pe(k,m,l,m,d,e,f,h)||pe(l,m,l,n,d,e,f,h)||pe(l,n,k,n,d,e,f,h)||pe(k,n,k,m,d,e,f,h)?!0:!1}function pe(a,b,c,d,e,f,h,k){return 0>=qe(a,b,c,d,e,f)*qe(a,b,c,d,h,k)&&0>=qe(e,f,h,k,a,b)*qe(e,f,h,k,c,d)}
function qe(a,b,c,d,e,f){c-=a;d-=b;a=e-a;b=f-b;f=a*d-b*c;0===f&&(f=a*c+b*d,0<f&&(f=(a-c)*c+(b-d)*d,0>f&&(f=0)));return 0>f?-1:0<f?1:0}function re(a){0>a&&(a+=360);360<=a&&(a-=360);return a}
function se(a,b,c,d){var e=Math.PI;d||(b*=e/180,c*=e/180);d=b<c?1:-1;var f=[],h=e/2,k=b;for(b=Math.min(2*e,Math.abs(c-b));1E-5<b;){c=k+d*Math.min(b,h);var e=(c-k)/2,l=a*Math.cos(e),m=a*Math.sin(e),n=-m,p=l*l+n*n,q=p+l*l+n*m,p=4/3*(Math.sqrt(2*p*q)-q)/(l*m-n*l),m=l-p*n,l=n+p*l,n=-l,p=e+k,e=Math.cos(p),p=Math.sin(p);f.push([0+a*Math.cos(k),0+a*Math.sin(k),0+m*e-l*p,0+m*p+l*e,0+m*e-n*p,0+m*p+n*e,0+a*Math.cos(c),0+a*Math.sin(c)]);b-=Math.abs(c-k);k=c}return f}
function Pa(a,b,c,d,e,f,h){c=Math.floor((a-c)/e)*e+c;d=Math.floor((b-d)/f)*f+d;var k=c;c+e-a<e/2&&(k=c+e);a=d;d+f-b<f/2&&(a=d+f);h.m(k,a)}function te(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,f=1;do e=c%d,c=f=d,d=e;while(0<e);return f}
function ue(a,b,c,d){var e=0>c,f=0>d,h=0,k=h=0;a<b?(h=1,k=0):(h=0,k=1);var l=0,m=0,n=0,p=0,l=0===h?a:b,n=0===h?c:d;if(0===h?e:f)n=-n;h=k;m=0===h?a:b;p=0===h?c:d;if(0===h?e:f)p=-p;a=a=0;if(0<p)if(0<n){b=l*l;a=m*m;l*=n;c=m*p;d=-a+c;e=-a+Math.sqrt(l*l+c*c);m=d;for(f=0;9999999999>f;++f){m=.5*(d+e);if(m===d||m===e)break;k=l/(m+b);h=c/(m+a);k=k*k+h*h-1;if(0<k)d=m;else if(0>k)e=m;else break}n=b*n/(m+b)-n;p=a*p/(m+a)-p;a=Math.sqrt(n*n+p*p)}else a=Math.abs(p-m);else p=l*l-m*m,a=l*n,a<p?(p=a/p,a=m*Math.sqrt(Math.abs(1-
p*p)),n=l*p-n,a=Math.sqrt(n*n+a*a)):a=Math.abs(n-l);return a}function ve(a){1<arguments.length&&v.k("Geometry constructor can take at most one optional argument, the Geometry type.");v.dc(this);this.D=!1;void 0===a&&(a=Fe);this.ia=a;this.Bb=this.vb=this.Cc=this.vc=0;this.mj=new I(Ge);this.Tu=this.mj.F;this.Cu=(new A).freeze();this.$a=!0;this.Oh=rb;this.Ph=Eb;this.Qn=this.Sn=NaN;this.ni=He}v.ea("Geometry",ve);v.Vh(ve);
ve.prototype.copy=function(){var a=new ve;a.ia=this.ia;a.vc=this.vc;a.Cc=this.Cc;a.vb=this.vb;a.Bb=this.Bb;for(var b=this.mj.n,c=b.length,d=a.mj,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.Tu=this.Tu;a.Cu.assign(this.Cu);a.$a=this.$a;a.Oh=this.Oh.S();a.Ph=this.Ph.S();a.Sn=this.Sn;a.Qn=this.Qn;a.ni=this.ni;return a};var Ie;ve.Line=Ie=v.p(ve,"Line",0);var Je;ve.Rectangle=Je=v.p(ve,"Rectangle",1);var Ke;ve.Ellipse=Ke=v.p(ve,"Ellipse",2);var Fe;ve.Path=Fe=v.p(ve,"Path",3);
ve.prototype.Ea=function(){this.freeze();Object.freeze(this);return this};ve.prototype.freeze=function(){this.D=!0;var a=this.Ub;a.freeze();for(var a=a.n,b=a.length,c=0;c<b;c++)a[c].freeze();return this};ve.prototype.Pa=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.D=!1;var a=this.Ub;a.Pa();for(var a=a.n,b=a.length,c=0;c<b;c++)a[c].Pa();return this};
ve.prototype.equalsApprox=ve.prototype.Fc=function(a){if(!(a instanceof ve))return!1;if(this.type!==a.type)return this.type===Ie&&a.type===Fe?Xe(this,a):a.type===Ie&&this.type===Fe?Xe(a,this):!1;if(this.type===Fe){var b=this.Ub.n;a=a.Ub.n;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Fc(a[d]))return!1;return!0}return K(this.Aa,a.Aa)&&K(this.xa,a.xa)&&K(this.I,a.I)&&K(this.J,a.J)};
function Xe(a,b){if(a.type!==Ie||b.type!==Fe)return!1;if(1===b.Ub.count){var c=b.Ub.da(0);if(1===c.sb.count&&K(a.Aa,c.Aa)&&K(a.xa,c.xa)&&(c=c.sb.da(0),c.type===Ye&&K(a.I,c.I)&&K(a.J,c.J)))return!0}return!1}var Ze;ve.stringify=Ze=function(a){return a.toString()};
ve.prototype.toString=function(a){void 0===a&&(a=-1);switch(this.type){case Ie:return 0>a?"M"+this.Aa.toString()+" "+this.xa.toString()+"L"+this.I.toString()+" "+this.J.toString():"M"+this.Aa.toFixed(a)+" "+this.xa.toFixed(a)+"L"+this.I.toFixed(a)+" "+this.J.toFixed(a);case Je:var b=new A(this.Aa,this.xa,0,0);b.qF(this.I,this.J,0,0);return 0>a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Ke:b=new A(this.Aa,this.xa,0,0);b.qF(this.I,this.J,0,0);if(0>a){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Fe:for(var b="",c=this.Ub.n,d=c.length,e=0;e<d;e++){var f=c[e];0<e&&(b+=" x ");f.ut&&(b+="F ");b+=f.toString(a)}return b;default:return this.type.toString()}};
ve.fillPath=function(a){"string"!==typeof a&&v.Dd(a,"string",ve,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var $e;
ve.parse=$e=function(a,b){function c(){return m>=t-1?!0:null!==l[m+1].match(/[A-Za-z]/)}function d(){m++;return l[m]}function e(){var a=new z(parseFloat(d()),parseFloat(d()));n===n.toLowerCase()&&(a.x=s.x+a.x,a.y=s.y+a.y);return a}function f(){return s=e()}function h(){return r=e()}function k(){return"c"!==p.toLowerCase()&&"s"!==p.toLowerCase()?s:new z(2*s.x-r.x,2*s.y-r.y)}void 0===b&&(b=!1);"string"!==typeof a&&v.Dd(a,"string",ve,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var l=a.split(" "),m=-1,n="",p="",q=new z(0,0),r=new z(0,0),s=new z(0,
0),t=l.length,u=v.s(),x=!1,w=!1,y=!0;!(m>=t-1);)if(p=n,n=d(),""!==n)switch(n.toUpperCase()){case "X":y=!0;w=x=!1;break;case "M":var B=f();null===u.Rb||!0===y?(N(u,B.x,B.y,x,!1,!w),y=!1):u.moveTo(B.x,B.y);for(q=s;!c();)B=f(),u.lineTo(B.x,B.y);break;case "L":for(;!c();)B=f(),u.lineTo(B.x,B.y);break;case "H":for(;!c();)s=B=new z((n===n.toLowerCase()?s.x:0)+parseFloat(d()),s.y),u.lineTo(s.x,s.y);break;case "V":for(;!c();)s=B=new z(s.x,(n===n.toLowerCase()?s.y:0)+parseFloat(d())),u.lineTo(s.x,s.y);break;
case "C":for(;!c();){var H=e(),C=h(),B=f();O(u,H.x,H.y,C.x,C.y,B.x,B.y)}break;case "S":for(;!c();)H=k(),C=h(),B=f(),O(u,H.x,H.y,C.x,C.y,B.x,B.y);break;case "Q":for(;!c();)C=h(),B=f(),af(u,C.x,C.y,B.x,B.y);break;case "T":for(;!c();)r=C=k(),B=f(),af(u,C.x,C.y,B.x,B.y);break;case "B":for(;!c();){var B=parseFloat(d()),H=parseFloat(d()),C=parseFloat(d()),T=parseFloat(d()),ba=parseFloat(d()),U=ba,M=!1;c()||(U=parseFloat(d()),c()||(M=0!==parseFloat(d())));n===n.toLowerCase()&&(C+=s.x,T+=s.y);u.arcTo(B,H,
C,T,ba,U,M)}break;case "A":for(;!c();)H=Math.abs(parseFloat(d())),C=Math.abs(parseFloat(d())),T=parseFloat(d()),ba=!!parseFloat(d()),U=!!parseFloat(d()),B=f(),bf(u,H,C,T,ba,U,B.x,B.y);break;case "Z":B=u.o.Ub.n[u.o.Ub.length-1];P(u);s=q;break;case "F":B="";for(H=1;l[m+H];)if(null!==l[m+H].match(/[Uu]/))H++;else if(null===l[m+H].match(/[A-Za-z]/))H++;else{B=l[m+H];break}B.match(/[Mm]/)?x=!0:cf(u);break;case "U":B="";for(H=1;l[m+H];)if(null!==l[m+H].match(/[Ff]/))H++;else if(null===l[m+H].match(/[A-Za-z]/))H++;
else{B=l[m+H];break}B.match(/[Mm]/)?w=!0:u.Ya(!1)}q=u.o;v.q(u);if(b)for(u=q.Ub.i;u.next();)B=u.value,B.ut=!0;return q};function df(a,b){for(var c=a.length,d=v.L(),e=0;e<c;e++){var f=a[e];d.x=f[0];d.y=f[1];b.ub(d);f[0]=d.x;f[1]=d.y;d.x=f[2];d.y=f[3];b.ub(d);f[2]=d.x;f[3]=d.y;d.x=f[4];d.y=f[5];b.ub(d);f[4]=d.x;f[5]=d.y;d.x=f[6];d.y=f[7];b.ub(d);f[6]=d.x;f[7]=d.y}v.v(d)}
ve.prototype.Hz=function(){if(this.$a||this.Tu!==this.Ub.F)return!0;for(var a=this.Ub.n,b=a.length,c=0;c<b;c++)if(a[c].Hz())return!0;return!1};ve.prototype.CA=function(){this.$a=!1;this.Tu=this.Ub.F;for(var a=this.Ub.n,b=a.length,c=0;c<b;c++)a[c].CA()};ve.prototype.ah=function(){var a=this.Cu;a.Pa();isNaN(this.Sn)||isNaN(this.Qn)?a.m(0,0,0,0):a.m(0,0,this.Sn,this.Qn);ef(this,a,!1);$a(a,0,0,0,0);a.freeze()};
ve.prototype.computeBoundsWithoutOrigin=ve.prototype.tG=function(){var a=new A;ef(this,a,!0);return a};
function ef(a,b,c){switch(a.type){case Ie:case Je:case Ke:c?b.m(a.vc,a.Cc,0,0):$a(b,a.vc,a.Cc,0,0);$a(b,a.vb,a.Bb,0,0);break;case Fe:var d=a.Ub;a=d.n;for(var d=d.length,e=0;e<d;e++){var f=a[e];c&&0===e?b.m(f.Aa,f.xa,0,0):$a(b,f.Aa,f.xa,0,0);for(var h=f.sb.n,k=h.length,l=f.Aa,m=f.xa,n=0;n<k;n++){var p=h[n];switch(p.type){case Ye:case ff:l=p.I;m=p.J;$a(b,l,m,0,0);break;case gf:Yd(l,m,p.rc,p.Kc,p.mh,p.nh,p.I,p.J,.5,b);l=p.I;m=p.J;break;case hf:be(l,m,p.rc,p.Kc,p.I,p.J,.5,b);l=p.I;m=p.J;break;case jf:case kf:var q=
p.type===jf?lf(p,f):mf(p,f,l,m),r=q.length;if(0===r){l=p.na;m=p.ua;$a(b,l,m,0,0);break}for(var p=null,s=0;s<r;s++)p=q[s],Yd(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,b);null!==p&&(l=p[6],m=p[7]);break;default:v.k("Unknown Segment type: "+p.type)}}}break;default:v.k("Unknown Geometry type: "+a.type)}}ve.prototype.normalize=ve.prototype.normalize=function(){this.D&&v.ka(this);var a=this.tG();this.offset(-a.x,-a.y);return new z(-a.x,-a.y)};
ve.prototype.offset=ve.prototype.offset=function(a,b){this.D&&v.ka(this);this.transform(1,0,0,1,a,b);return this};ve.prototype.scale=ve.prototype.scale=function(a,b){this.D&&v.ka(this);this.transform(a,0,0,b,0,0);return this};ve.prototype.rotate=ve.prototype.rotate=function(a,b,c){this.D&&v.ka(this);void 0===b&&(b=0);void 0===c&&(c=0);var d=v.rh();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);v.$e(d);return this};
ve.prototype.transform=ve.prototype.transform=function(a,b,c,d,e,f){var h=0,k=0;switch(this.type){case Ie:case Je:case Ke:h=this.vc;k=this.Cc;this.vc=h*a+k*c+e;this.Cc=h*b+k*d+f;h=this.vb;k=this.Bb;this.vb=h*a+k*c+e;this.Bb=h*b+k*d+f;break;case Fe:for(var l=this.Ub.n,m=l.length,n=0;n<m;n++){var p=l[n],h=p.Aa,k=p.xa;p.Aa=h*a+k*c+e;p.xa=h*b+k*d+f;for(var p=p.sb.n,q=p.length,r=0;r<q;r++){var s=p[r];switch(s.type){case Ye:case ff:h=s.I;k=s.J;s.I=h*a+k*c+e;s.J=h*b+k*d+f;break;case gf:h=s.rc;k=s.Kc;s.rc=
h*a+k*c+e;s.Kc=h*b+k*d+f;h=s.mh;k=s.nh;s.mh=h*a+k*c+e;s.nh=h*b+k*d+f;h=s.I;k=s.J;s.I=h*a+k*c+e;s.J=h*b+k*d+f;break;case hf:h=s.rc;k=s.Kc;s.rc=h*a+k*c+e;s.Kc=h*b+k*d+f;h=s.I;k=s.J;s.I=h*a+k*c+e;s.J=h*b+k*d+f;break;case jf:h=s.na;k=s.ua;s.na=h*a+k*c+e;s.ua=h*b+k*d+f;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.xe+=h);0>a&&(s.xe=180-s.xe,s.Af=-s.Af);0>d&&(s.xe=-s.xe,s.Af=-s.Af);s.radiusX*=Math.sqrt(a*a+c*c);void 0!==s.radiusY&&(s.radiusY*=Math.sqrt(b*b+d*d));break;case kf:h=s.I;k=s.J;s.I=h*
a+k*c+e;s.J=h*b+k*d+f;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.gj+=h);0>a&&(s.gj=180-s.gj,s.tl=!s.tl);0>d&&(s.gj=-s.gj,s.tl=!s.tl);s.radiusX*=Math.sqrt(a*a+c*c);s.radiusY*=Math.sqrt(b*b+d*d);break;default:v.k("Unknown Segment type: "+s.type)}}}}this.$a=!0;return this};
ve.prototype.Fa=function(a,b,c,d){var e=a.x,f=a.y,h=this.mb.x-20;a=a.y;for(var k=0,l=0,m=0,n=0,p=0,q=0,r=this.Ub.n,s=r.length,t=0;t<s;t++){var u=r[t];if(u.ut){if(c&&u.Fa(e,f,b))return!0;for(var x=u.sb,l=u.Aa,m=u.xa,w=l,y=m,B=x.n,H=0;H<=x.length;H++){var C,T;H!==x.length?(C=B[H],T=C.type,p=C.I,q=C.J):(T=Ye,p=w,q=y);switch(T){case ff:n=nf(e,f,h,a,l,m,w,y);if(isNaN(n))return!0;k+=n;w=p;y=q;break;case Ye:n=nf(e,f,h,a,l,m,p,q);if(isNaN(n))return!0;k+=n;break;case gf:n=ee(l,m,C.rc,C.Kc,C.mh,C.nh,p,q,h,
a,e,f,.5);k+=n;break;case hf:n=ee(l,m,(l+2*C.rc)/3,(m+2*C.Kc)/3,(2*C.rc+p)/3,(2*C.Kc+q)/3,p,q,h,a,e,f,.5);k+=n;break;case jf:case kf:T=C.type===jf?lf(C,u):mf(C,u,l,m);var ba=T.length;if(0===ba){n=nf(e,f,h,a,l,m,C.na,C.ua);if(isNaN(n))return!0;k+=n;break}for(var U=null,M=0;M<ba;M++){U=T[M];if(0===M){n=nf(e,f,h,a,l,m,U[0],U[1]);if(isNaN(n))return!0;k+=n}n=ee(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],h,a,e,f,.5);k+=n}null!==U&&(p=U[6],q=U[7]);break;default:v.k("Unknown Segment type: "+C.type)}l=p;m=q}if(0!==
k)return!0;k=0}else if(u.Fa(e,f,d?b:b+2))return!0}return 0!==k};function nf(a,b,c,d,e,f,h,k){if(Md(e,f,h,k,.05,a,b))return NaN;var l=(a-c)*(f-k);if(0===l)return 0;var m=((a*d-b*c)*(e-h)-(a-c)*(e*k-f*h))/l;b=(a*d-b*c)*(f-k)/l;if(m>=a)return 0;if((e>h?e-h:h-e)<(f>k?f-k:k-f)){if(e=a=0,f<k?(a=f,e=k):(a=k,e=f),b<a||b>e)return 0}else if(e<h?(a=e,e=h):a=h,m<a||m>e)return 0;return 0<l?1:-1}function vf(a,b,c,d){a=a.Ub.n;for(var e=a.length,f=0;f<e;f++)if(a[f].Fa(b,c,d))return!0;return!1}
ve.prototype.getPointAlongPath=function(a){(0>a||1<a)&&v.va(a,"0 <= fraction <= 1",ve,"getPointAlongPath:fraction");var b=this.Ub.first(),c=v.jb(),d=[];d.push(b.Aa);d.push(b.xa);for(var e=b.Aa,f=b.xa,h=e,k=f,l=b.sb.n,m=l.length,n=0;n<m;n++){var p=l[n];switch(p.ia){case ff:c.push(d);d=[];d.push(p.I);d.push(p.J);e=p.I;f=p.J;h=e;k=f;break;case Ye:d.push(p.I);d.push(p.J);e=p.I;f=p.J;break;case gf:Zd(e,f,p.sd,p.Fe,p.Yg,p.ng,p.vb,p.Bb,.5,d);e=p.I;f=p.J;break;case hf:ce(e,f,p.sd,p.Fe,p.vb,p.Bb,.5,d);e=p.I;
f=p.J;break;case jf:var q=lf(p,b),r=q.length;if(0===r){d.push(p.na);d.push(p.ua);e=p.na;f=p.ua;break}for(var s=0;s<r;s++){var t=q[s];Zd(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d);e=t[6];f=t[7]}break;case kf:q=mf(p,b,e,f);r=q.length;for(s=0;s<r;s++)t=q[s],Zd(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d),e=t[6],f=t[7];break;default:v.k("Segment not of valid type")}p.Eh&&(d.push(h),d.push(k))}c.push(d);q=0;h=c.length;for(k=d=b=0;k<h;k++)for(l=c[k],m=l.length,n=0;n<m;n+=2)e=l[n],f=l[n+1],0!==n&&(p=Math.sqrt(Ta(b,
d,e,f)),q+=p),b=e,d=f;a*=q;for(k=q=0;k<h;k++)for(l=c[k],m=l.length,n=0;n<m;n++){e=l[n];f=l[n+1];if(0!==n){p=Math.sqrt(Ta(b,d,e,f));if(q+p>a)return n=(a-q)/p,v.sa(c),new z(b+(e-b)*n,d+(f-d)*n);q+=p}b=e;d=f}v.sa(c);return null};v.defineProperty(ve,{type:"type"},function(){return this.ia},function(a){this.ia!==a&&(this.D&&v.ka(this,a),this.ia=a,this.$a=!0)});v.defineProperty(ve,{Aa:"startX"},function(){return this.vc},function(a){this.vc!==a&&(this.D&&v.ka(this,a),this.vc=a,this.$a=!0)});
v.defineProperty(ve,{xa:"startY"},function(){return this.Cc},function(a){this.Cc!==a&&(this.D&&v.ka(this,a),this.Cc=a,this.$a=!0)});v.defineProperty(ve,{I:"endX"},function(){return this.vb},function(a){this.vb!==a&&(this.D&&v.ka(this,a),this.vb=a,this.$a=!0)});v.defineProperty(ve,{J:"endY"},function(){return this.Bb},function(a){this.Bb!==a&&(this.D&&v.ka(this,a),this.Bb=a,this.$a=!0)});
v.defineProperty(ve,{Ub:"figures"},function(){return this.mj},function(a){this.mj!==a&&(this.D&&v.ka(this,a),this.mj=a,this.$a=!0)});ve.prototype.add=ve.prototype.add=function(a){this.mj.add(a);return this};ve.prototype.setSpots=function(a,b,c,d,e,f,h,k){this.D&&v.ka(this);this.Oh=(new L(a,b,e,f)).freeze();this.Ph=(new L(c,d,h,k)).freeze();return this};v.defineProperty(ve,{B:"spot1"},function(){return this.Oh},function(a){this.D&&v.ka(this,a);this.Oh=a.S()});
v.defineProperty(ve,{C:"spot2"},function(){return this.Ph},function(a){this.D&&v.ka(this,a);this.Ph=a.S()});v.defineProperty(ve,{Kd:"defaultStretch"},function(){return this.ni},function(a){this.D&&v.ka(this,a);this.ni=a});v.u(ve,{mb:"bounds"},function(){this.Hz()&&(this.CA(),this.ah());return this.Cu});function Ge(a,b,c,d){v.dc(this);this.D=!1;void 0===c&&(c=!0);this.Sl=c;void 0===d&&(d=!0);this.Tn=d;this.vc=void 0!==a?a:0;this.Cc=void 0!==b?b:0;this.po=new I(wf);this.Sv=this.po.F;this.$a=!0}
v.ea("PathFigure",Ge);v.Vh(Ge);Ge.prototype.copy=function(){var a=new Ge;a.Sl=this.Sl;a.Tn=this.Tn;a.vc=this.vc;a.Cc=this.Cc;for(var b=this.po.n,c=b.length,d=a.po,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.Sv=this.Sv;a.$a=this.$a;return a};Ge.prototype.equalsApprox=Ge.prototype.Fc=function(a){if(!(a instanceof Ge&&K(this.Aa,a.Aa)&&K(this.xa,a.xa)))return!1;var b=this.sb.n;a=a.sb.n;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Fc(a[d]))return!1;return!0};g=Ge.prototype;
g.toString=function(a){void 0===a&&(a=-1);for(var b=0>a?"M"+this.Aa.toString()+" "+this.xa.toString():"M"+this.Aa.toFixed(a)+" "+this.xa.toFixed(a),c=this.sb.n,d=c.length,e=0;e<d;e++)b+=" "+c[e].toString(a);return b};g.freeze=function(){this.D=!0;var a=this.sb;a.freeze();for(var b=a.n,a=a.length,c=0;c<a;c++)b[c].freeze();return this};g.Pa=function(){this.D=!1;var a=this.sb;a.Pa();for(var a=a.n,b=a.length,c=0;c<b;c++)a[c].Pa();return this};
g.Hz=function(){if(this.$a)return!0;var a=this.sb;if(this.Sv!==a.F)return!0;for(var a=a.n,b=a.length,c=0;c<b;c++)if(a[c].$a)return!0;return!1};g.CA=function(){this.$a=!1;var a=this.sb;this.Sv=a.F;for(var a=a.n,b=a.length,c=0;c<b;c++){var d=a[c];d.$a=!1;d.cg=null}};v.defineProperty(Ge,{ut:"isFilled"},function(){return this.Sl},function(a){this.D&&v.ka(this,a);this.Sl=a});v.defineProperty(Ge,{wl:"isShadowed"},function(){return this.Tn},function(a){this.D&&v.ka(this,a);this.Tn=a});
v.defineProperty(Ge,{Aa:"startX"},function(){return this.vc},function(a){this.D&&v.ka(this,a);this.vc=a;this.$a=!0});v.defineProperty(Ge,{xa:"startY"},function(){return this.Cc},function(a){this.D&&v.ka(this,a);this.Cc=a;this.$a=!0});v.defineProperty(Ge,{sb:"segments"},function(){return this.po},function(a){this.D&&v.ka(this,a);this.po=a;this.$a=!0});Ge.prototype.add=Ge.prototype.add=function(a){this.po.add(a);return this};
Ge.prototype.Fa=function(a,b,c){for(var d=this.Aa,e=this.xa,f=d,h=e,k=this.sb.n,l=k.length,m=0;m<l;m++){var n=k[m];switch(n.type){case ff:f=n.I;h=n.J;d=n.I;e=n.J;break;case Ye:if(Md(d,e,n.I,n.J,c,a,b))return!0;d=n.I;e=n.J;break;case gf:if(Xd(d,e,n.rc,n.Kc,n.mh,n.nh,n.I,n.J,.5,a,b,c))return!0;d=n.I;e=n.J;break;case hf:if(ae(d,e,n.rc,n.Kc,n.I,n.J,.5,a,b,c))return!0;d=n.I;e=n.J;break;case jf:case kf:var p=n.type===jf?lf(n,this):mf(n,this,d,e),q=p.length;if(0===q){if(Md(d,e,n.na,n.ua,c,a,b))return!0;
d=n.na;e=n.ua;break}for(var r=null,s=0;s<q;s++)if(r=p[s],0===s&&Md(d,e,r[0],r[1],c,a,b)||Xd(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],.5,a,b,c))return!0;null!==r&&(d=r[6],e=r[7]);break;default:v.k("Unknown Segment type: "+n.type)}if(n.Iw&&(d!==f||e!==h)&&Md(d,e,f,h,c,a,b))return!0}return!1};
function wf(a,b,c,d,e,f,h,k){v.dc(this);this.D=!1;void 0===a&&(a=Ye);this.ia=a;this.vb=void 0!==b?b:0;this.Bb=void 0!==c?c:0;void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===h&&(h=0);a===kf?(a=f%360,0>a&&(a+=360),this.sd=a,this.Fe=0,this.Yg=Math.max(d,0),this.ng=Math.max(e,0),this.Yn="boolean"===typeof h?!!h:!1,this.qn=!!k):(this.sd=d,this.Fe=e,a===jf&&(f=Math.max(f,0)),this.Yg=f,"number"===typeof h?(a===jf&&(h=Math.max(h,0)),this.ng=h):this.ng=0,this.qn=this.Yn=!1);this.Eh=!1;this.$a=
!0;this.cg=null}v.ea("PathSegment",wf);v.Vh(wf);wf.prototype.copy=function(){var a=new wf;a.ia=this.ia;a.vb=this.vb;a.Bb=this.Bb;a.sd=this.sd;a.Fe=this.Fe;a.Yg=this.Yg;a.ng=this.ng;a.Yn=this.Yn;a.qn=this.qn;a.Eh=this.Eh;a.$a=this.$a;return a};
wf.prototype.equalsApprox=wf.prototype.Fc=function(a){if(!(a instanceof wf)||this.type!==a.type||this.Iw!==a.Iw)return!1;switch(this.type){case ff:case Ye:return K(this.I,a.I)&&K(this.J,a.J);case gf:return K(this.I,a.I)&&K(this.J,a.J)&&K(this.rc,a.rc)&&K(this.Kc,a.Kc)&&K(this.mh,a.mh)&&K(this.nh,a.nh);case hf:return K(this.I,a.I)&&K(this.J,a.J)&&K(this.rc,a.rc)&&K(this.Kc,a.Kc);case jf:return K(this.xe,a.xe)&&K(this.Af,a.Af)&&K(this.na,a.na)&&K(this.ua,a.ua)&&K(this.radiusX,a.radiusX)&&K(this.radiusY,
a.radiusY);case kf:return this.tl===a.tl&&this.Lw===a.Lw&&K(this.gj,a.gj)&&K(this.I,a.I)&&K(this.J,a.J)&&K(this.radiusX,a.radiusX)&&K(this.radiusY,a.radiusY);default:return!1}};
wf.prototype.toString=function(a){void 0===a&&(a=-1);var b="";switch(this.type){case ff:b=0>a?"M"+this.I.toString()+" "+this.J.toString():"M"+this.I.toFixed(a)+" "+this.J.toFixed(a);break;case Ye:b=0>a?"L"+this.I.toString()+" "+this.J.toString():"L"+this.I.toFixed(a)+" "+this.J.toFixed(a);break;case gf:b=0>a?"C"+this.rc.toString()+" "+this.Kc.toString()+" "+this.mh.toString()+" "+this.nh.toString()+" "+this.I.toString()+" "+this.J.toString():"C"+this.rc.toFixed(a)+" "+this.Kc.toFixed(a)+" "+this.mh.toFixed(a)+
" "+this.nh.toFixed(a)+" "+this.I.toFixed(a)+" "+this.J.toFixed(a);break;case hf:b=0>a?"Q"+this.rc.toString()+" "+this.Kc.toString()+" "+this.I.toString()+" "+this.J.toString():"Q"+this.rc.toFixed(a)+" "+this.Kc.toFixed(a)+" "+this.I.toFixed(a)+" "+this.J.toFixed(a);break;case jf:b=0>a?"B"+this.xe.toString()+" "+this.Af.toString()+" "+this.na.toString()+" "+this.ua.toString()+" "+this.radiusX:"B"+this.xe.toFixed(a)+" "+this.Af.toFixed(a)+" "+this.na.toFixed(a)+" "+this.ua.toFixed(a)+" "+this.radiusX;
break;case kf:b=0>a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.gj.toString()+" "+(this.Lw?1:0)+" "+(this.tl?1:0)+" "+this.I.toString()+" "+this.J.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.gj.toFixed(a)+" "+(this.Lw?1:0)+" "+(this.tl?1:0)+" "+this.I.toFixed(a)+" "+this.J.toFixed(a);break;default:b=this.type.toString()}return b+(this.Eh?"z":"")};var ff;wf.Move=ff=v.p(wf,"Move",0);var Ye;wf.Line=Ye=v.p(wf,"Line",1);var gf;
wf.Bezier=gf=v.p(wf,"Bezier",2);var hf;wf.QuadraticBezier=hf=v.p(wf,"QuadraticBezier",3);var jf;wf.Arc=jf=v.p(wf,"Arc",4);var kf;wf.SvgArc=kf=v.p(wf,"SvgArc",4);wf.prototype.freeze=function(){this.D=!0;return this};wf.prototype.Pa=function(){this.D=!1;return this};wf.prototype.close=wf.prototype.close=function(){this.Eh=!0;return this};
function lf(a,b){if(null!==a.cg&&!1===b.$a)return a.cg;var c=a.radiusX,d=a.radiusY;void 0===d&&(d=c);if(0===c||0===d)return a.cg=[],a.cg;var e=a.sd,f=a.Fe,h=se(c<d?c:d,a.xe,a.xe+a.Af,!1);if(c!==d){var k=v.rh();k.reset();c<d?k.scale(1,d/c):k.scale(c/d,1);df(h,k);v.$e(k)}c=h.length;for(d=0;d<c;d++)k=h[d],k[0]+=e,k[1]+=f,k[2]+=e,k[3]+=f,k[4]+=e,k[5]+=f,k[6]+=e,k[7]+=f;a.cg=h;return a.cg}
function mf(a,b,c,d){function e(a,b,c,d){return(a*d<b*c?-1:1)*Math.acos((a*c+b*d)/(Math.sqrt(a*a+b*b)*Math.sqrt(c*c+d*d)))}if(null!==a.cg&&!1===b.$a)return a.cg;b=a.Yg;var f=a.ng;if(0===b||0===f)return a.cg=[],a.cg;var h=Math.PI/180*a.sd,k=a.Yn,l=a.qn,m=a.vb,n=a.Bb,p=Math.cos(h),q=Math.sin(h),r=p*(c-m)/2+q*(d-n)/2,h=-q*(c-m)/2+p*(d-n)/2,s=r*r/(b*b)+h*h/(f*f);1<s&&(b*=Math.sqrt(s),f*=Math.sqrt(s));s=(k===l?-1:1)*Math.sqrt((b*b*f*f-b*b*h*h-f*f*r*r)/(b*b*h*h+f*f*r*r));isNaN(s)&&(s=0);k=s*b*h/f;s=s*-f*
r/b;isNaN(k)&&(k=0);isNaN(s)&&(s=0);c=(c+m)/2+p*k-q*s;d=(d+n)/2+q*k+p*s;n=e(1,0,(r-k)/b,(h-s)/f);p=(r-k)/b;m=(h-s)/f;r=(-r-k)/b;k=(-h-s)/f;h=e(p,m,r,k);r=(p*r+m*k)/(Math.sqrt(p*p+m*m)*Math.sqrt(r*r+k*k));-1>=r?h=Math.PI:1<=r&&(h=0);!l&&0<h&&(h-=2*Math.PI);l&&0>h&&(h+=2*Math.PI);l=b>f?1:b/f;r=b>f?f/b:1;b=se(b>f?b:f,n,n+h,!0);f=v.rh();f.reset();f.translate(c,d);f.rotate(a.sd,0,0);f.scale(l,r);df(b,f);v.$e(f);a.cg=b;return a.cg}
v.defineProperty(wf,{Iw:"isClosed"},function(){return this.Eh},function(a){this.Eh!==a&&(this.Eh=a,this.$a=!0)});v.defineProperty(wf,{type:"type"},function(){return this.ia},function(a){this.D&&v.ka(this,a);this.ia=a;this.$a=!0});v.defineProperty(wf,{I:"endX"},function(){return this.vb},function(a){this.D&&v.ka(this,a);this.vb=a;this.$a=!0});v.defineProperty(wf,{J:"endY"},function(){return this.Bb},function(a){this.D&&v.ka(this,a);this.Bb=a;this.$a=!0});
v.defineProperty(wf,{rc:"point1X"},function(){return this.sd},function(a){this.D&&v.ka(this,a);this.sd=a;this.$a=!0});v.defineProperty(wf,{Kc:"point1Y"},function(){return this.Fe},function(a){this.D&&v.ka(this,a);this.Fe=a;this.$a=!0});v.defineProperty(wf,{mh:"point2X"},function(){return this.Yg},function(a){this.D&&v.ka(this,a);this.Yg=a;this.$a=!0});v.defineProperty(wf,{nh:"point2Y"},function(){return this.ng},function(a){this.D&&v.ka(this,a);this.ng=a;this.$a=!0});
v.defineProperty(wf,{na:"centerX"},function(){return this.sd},function(a){this.D&&v.ka(this,a);this.sd=a;this.$a=!0});v.defineProperty(wf,{ua:"centerY"},function(){return this.Fe},function(a){this.D&&v.ka(this,a);this.Fe=a;this.$a=!0});v.defineProperty(wf,{radiusX:"radiusX"},function(){return this.Yg},function(a){0>a&&v.va(a,">= zero",wf,"radiusX");this.D&&v.ka(this,a);this.Yg=a;this.$a=!0});
v.defineProperty(wf,{radiusY:"radiusY"},function(){return this.ng},function(a){0>a&&v.va(a,">= zero",wf,"radiusY");this.D&&v.ka(this,a);this.ng=a;this.$a=!0});v.defineProperty(wf,{xe:"startAngle"},function(){return this.vb},function(a){this.vb!==a&&(this.D&&v.ka(this,a),a%=360,0>a&&(a+=360),this.vb=a,this.$a=!0)});v.defineProperty(wf,{Af:"sweepAngle"},function(){return this.Bb},function(a){this.D&&v.ka(this,a);360<a&&(a=360);-360>a&&(a=-360);this.Bb=a;this.$a=!0});
v.defineProperty(wf,{tl:"isClockwiseArc"},function(){return this.qn},function(a){this.D&&v.ka(this,a);this.qn=a;this.$a=!0});v.defineProperty(wf,{Lw:"isLargeArc"},function(){return this.Yn},function(a){this.D&&v.ka(this,a);this.Yn=a;this.$a=!0});v.defineProperty(wf,{gj:"xAxisRotation"},function(){return this.sd},function(a){a%=360;0>a&&(a+=360);this.D&&v.ka(this,a);this.sd=a;this.$a=!0});
function xf(){this.W=null;this.Uy=(new z(0,0)).freeze();this.Yx=(new z(0,0)).freeze();this.yu=this.vv=0;this.zu=1;this.kv="";this.bw=this.Qu=!1;this.Mu=this.Bu=0;this.ij=this.Yu=this.hv=!1;this.Dq=null;this.$v=0;this.pg=this.Zv=null}v.ea("InputEvent",xf);
xf.prototype.copy=function(){var a=new xf;a.W=this.W;a.Uy.assign(this.jf);a.Yx.assign(this.ca);a.vv=this.vv;a.yu=this.yu;a.zu=this.zu;a.kv=this.kv;a.Qu=this.Qu;a.bw=this.bw;a.Bu=this.Bu;a.Mu=this.Mu;a.hv=this.hv;a.Yu=this.Yu;a.ij=this.ij;a.Dq=this.Dq;a.$v=this.$v;a.Zv=this.Zv;a.pg=this.pg;return a};
xf.prototype.toString=function(){var a="^";0!==this.od&&(a+="M:"+this.od);0!==this.button&&(a+="B:"+this.button);""!==this.key&&(a+="K:"+this.key);0!==this.Ge&&(a+="C:"+this.Ge);0!==this.il&&(a+="D:"+this.il);this.zc&&(a+="h");this.bubbles&&(a+="b");null!==this.ca&&(a+="@"+this.ca.toString());return a};v.defineProperty(xf,{g:"diagram"},function(){return this.W},function(a){this.W=a});v.defineProperty(xf,{jf:"viewPoint"},function(){return this.Uy},function(a){v.A(a,z,xf,"viewPoint");this.Uy.assign(a)});
v.defineProperty(xf,{ca:"documentPoint"},function(){return this.Yx},function(a){v.A(a,z,xf,"documentPoint");this.Yx.assign(a)});v.defineProperty(xf,{od:"modifiers"},function(){return this.vv},function(a){this.vv=a});v.defineProperty(xf,{button:"button"},function(){return this.yu},function(a){this.yu=a;if(null===this.event)switch(a){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}});
v.defineProperty(xf,{buttons:"buttons"},function(){return this.zu},function(a){this.zu=a});v.defineProperty(xf,{key:"key"},function(){return this.kv},function(a){this.kv=a});v.defineProperty(xf,{kl:"down"},function(){return this.Qu},function(a){this.Qu=a});v.defineProperty(xf,{up:"up"},function(){return this.bw},function(a){this.bw=a});v.defineProperty(xf,{Ge:"clickCount"},function(){return this.Bu},function(a){this.Bu=a});
v.defineProperty(xf,{il:"delta"},function(){return this.Mu},function(a){this.Mu=a});v.defineProperty(xf,{wt:"isMultiTouch"},function(){return this.hv},function(a){this.hv=a});v.defineProperty(xf,{zc:"handled"},function(){return this.Yu},function(a){this.Yu=a});v.defineProperty(xf,{bubbles:"bubbles"},function(){return this.ij},function(a){this.ij=a});v.defineProperty(xf,{event:"event"},function(){return this.Dq},function(a){this.Dq=a});
v.u(xf,{Xi:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a?!0:(a=window.PointerEvent)&&this.event instanceof a&&"touch"===this.event.pointerType});v.u(xf,{bk:"isMac"},function(){return v.bk});v.defineProperty(xf,{timestamp:"timestamp"},function(){return this.$v},function(a){this.$v=a});v.defineProperty(xf,{Jg:"targetDiagram"},function(){return this.Zv},function(a){this.Zv=a});
v.defineProperty(xf,{ye:"targetObject"},function(){return this.pg},function(a){this.pg=a});v.defineProperty(xf,{control:"control"},function(){return 0!==(this.od&1)},function(a){this.od=a?this.od|1:this.od&-2});v.defineProperty(xf,{shift:"shift"},function(){return 0!==(this.od&4)},function(a){this.od=a?this.od|4:this.od&-5});v.defineProperty(xf,{alt:"alt"},function(){return 0!==(this.od&2)},function(a){this.od=a?this.od|2:this.od&-3});
v.defineProperty(xf,{Ft:"meta"},function(){return 0!==(this.od&8)},function(a){this.od=a?this.od|8:this.od&-9});v.defineProperty(xf,{left:"left"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?0===this.button:0!==(this.buttons&1)},function(a){this.buttons=a?this.buttons|1:this.buttons&-2});
v.defineProperty(xf,{right:"right"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?2===this.button:0!==(this.buttons&2)},function(a){this.buttons=a?this.buttons|2:this.buttons&-3});v.defineProperty(xf,{iK:"middle"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?1===this.button:0!==(this.buttons&4)},function(a){this.buttons=a?this.buttons|4:this.buttons&-5});
function yf(){this.W=null;this.Ob="";this.Ev=this.Xv=null;this.Au=!1}v.ea("DiagramEvent",yf);yf.prototype.copy=function(){var a=new yf;a.W=this.W;a.Ob=this.Ob;a.Xv=this.Xv;a.Ev=this.Ev;a.Au=this.Au;return a};yf.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");null!==this.uA&&(a+=":"+this.uA.toString());null!==this.$z&&(a+="("+this.$z.toString()+")");return a};v.defineProperty(yf,{g:"diagram"},function(){return this.W},function(a){this.W=a});
v.defineProperty(yf,{name:"name"},function(){return this.Ob},function(a){this.Ob=a});v.defineProperty(yf,{uA:"subject"},function(){return this.Xv},function(a){this.Xv=a});v.defineProperty(yf,{$z:"parameter"},function(){return this.Ev},function(a){this.Ev=a});v.defineProperty(yf,{cancel:"cancel"},function(){return this.Au},function(a){this.Au=a});function zf(){this.aq=Af;this.jm=this.uv="";this.Br=this.Cr=this.Fr=this.Gr=this.Er=this.W=this.Wd=null}v.ea("ChangedEvent",zf);var Bf;
zf.Transaction=Bf=v.p(zf,"Transaction",-1);var Af;zf.Property=Af=v.p(zf,"Property",0);var Cf;zf.Insert=Cf=v.p(zf,"Insert",1);var Df;zf.Remove=Df=v.p(zf,"Remove",2);zf.prototype.clear=zf.prototype.clear=function(){this.Br=this.Cr=this.Fr=this.Gr=this.Er=this.W=this.Wd=null};
zf.prototype.copy=function(){var a=new zf;a.aq=this.aq;a.uv=this.uv;a.jm=this.jm;a.Wd=this.Wd;a.W=this.W;a.Er=this.Er;var b=this.Gr;a.Gr=v.Ta(b)&&"function"===typeof b.S?b.S():b;b=this.Fr;a.Fr=v.Ta(b)&&"function"===typeof b.S?b.S():b;b=this.Cr;a.Cr=v.Ta(b)&&"function"===typeof b.S?b.S():b;b=this.Br;a.Br=v.Ta(b)&&"function"===typeof b.S?b.S():b;return a};
zf.prototype.toString=function(){var a="",a=this.wc===Bf?a+"* ":this.wc===Af?a+(null!==this.ba?"!m":"!d"):a+((null!==this.ba?"!m":"!d")+this.wc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.hf&&this.hf!==this.propertyName&&(a+=" "+this.hf);a+=": ";this.wc===Bf?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=Ef(this.object)),null!==this.oldValue&&(a+="  old: "+Ef(this.oldValue)),null!==this.Cg&&(a+=" "+this.Cg),null!==this.newValue&&
(a+="  new: "+Ef(this.newValue)),null!==this.Ag&&(a+=" "+this.Ag));return a};zf.prototype.getValue=zf.prototype.ja=function(a){return a?this.oldValue:this.newValue};zf.prototype.getParam=function(a){return a?this.Cg:this.Ag};zf.prototype.canUndo=zf.prototype.canUndo=function(){return null!==this.ba||null!==this.g?!0:!1};zf.prototype.undo=zf.prototype.undo=function(){this.canUndo()&&(null!==this.ba?this.ba.Bm(this,!0):null!==this.g&&this.g.Bm(this,!0))};
zf.prototype.canRedo=zf.prototype.canRedo=function(){return null!==this.ba||null!==this.g?!0:!1};zf.prototype.redo=zf.prototype.redo=function(){this.canRedo()&&(null!==this.ba?this.ba.Bm(this,!1):null!==this.g&&this.g.Bm(this,!1))};v.defineProperty(zf,{ba:"model"},function(){return this.Wd},function(a){this.Wd=a});v.defineProperty(zf,{g:"diagram"},function(){return this.W},function(a){this.W=a});v.defineProperty(zf,{wc:"change"},function(){return this.aq},function(a){this.aq=a});
v.defineProperty(zf,{hf:"modelChange"},function(){return this.uv},function(a){this.uv=a});v.defineProperty(zf,{propertyName:"propertyName"},function(){return this.jm},function(a){this.jm=a});v.u(zf,{lE:"isTransactionFinished"},function(){return this.aq===Bf&&("CommittedTransaction"===this.jm||"FinishedUndo"===this.jm||"FinishedRedo"===this.jm)});v.defineProperty(zf,{object:"object"},function(){return this.Er},function(a){this.Er=a});
v.defineProperty(zf,{oldValue:"oldValue"},function(){return this.Gr},function(a){this.Gr=a});v.defineProperty(zf,{Cg:"oldParam"},function(){return this.Fr},function(a){this.Fr=a});v.defineProperty(zf,{newValue:"newValue"},function(){return this.Cr},function(a){this.Cr=a});v.defineProperty(zf,{Ag:"newParam"},function(){return this.Br},function(a){this.Br=a});
function F(a){1<arguments.length&&v.k("Model constructor can only take one optional argument, the Array of node data.");v.dc(this);this.pq=this.Ob="";this.ti=!1;this.By={};this.If=[];this.uc=new na(null,Object);this.Fj="key";this.vn=this.bo=null;this.hq=this.Eu=!1;this.Sp=null;this.em="category";this.oi=new na(null,J);this.zj=null;this.Ii=!1;this.Ty=null;this.la=new Ff;void 0!==a&&(this.Yf=a)}v.ea("Model",F);
F.prototype.cloneProtected=function(a){a.Ob=this.Ob;a.pq=this.pq;a.ti=this.ti;a.Fj=this.Fj;a.bo=this.bo;a.vn=this.vn;a.VI=this.Eu;a.hq=this.hq;a.Sp=this.Sp;a.em=this.em};F.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};F.prototype.clear=F.prototype.clear=function(){this.If=[];this.uc.clear();this.oi.clear();this.la.clear()};g=F.prototype;
g.toString=function(a){void 0===a&&(a=0);if(1<a)return this.xA();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.Yf;for(var c=v.Va(a),d=0;d<c;d++)var e=v.Ra(a,d),b=b+(" "+this.gb(e)+":"+Ef(e))}return b};
g.fn=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.gl&&(a+=',\n  "dataFormat": '+this.quote(this.gl));this.ab&&(a+=',\n  "isReadOnly": '+this.ab);"key"!==this.yl&&"string"===typeof this.yl&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.yl));this.jz&&(a+=',\n  "copiesArrays": true');this.iz&&(a+=',\n  "copiesArrayObjects": true');"category"!==this.Vm&&"string"===typeof this.Vm&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Vm));return a};
g.Nt=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.gl=a.dataFormat);a.isReadOnly&&(this.ab=a.isReadOnly);a.nodeKeyProperty&&(this.yl=a.nodeKeyProperty);a.copiesArrays&&(this.jz=a.copiesArrays);a.copiesArrayObjects&&(this.iz=a.copiesArrayObjects);a.nodeCategoryProperty&&(this.Vm=a.nodeCategoryProperty)};function Gf(a){return',\n  "modelData": '+Hf(a,a.ck)}function If(a,b){var c=b.modelData;v.Ta(c)&&(a.Qt(c),a.ck=c)}
g.FA=function(){var a=this.ck,b=!1,c;for(c in a)if(!Mf(c,a[c])){b=!0;break}a="";b&&(a=Gf(this));return a+',\n  "nodeDataArray": '+Nf(this,this.Yf,!0)};g.cA=function(a){If(this,a);a=a.nodeDataArray;v.isArray(a)&&(this.Qt(a),this.Yf=a)};
function Of(a,b,c,d){if(b===c)return!0;if(typeof b!==typeof c||"function"===typeof b||"function"===typeof c)return!1;if(Array.isArray(b)&&Array.isArray(c)){if(d.ja(b)===c)return!0;d.add(b,c);if(b.length!==c.length)return!1;for(var e=0;e<b.length;e++)if(!Of(a,b[e],c[e],d))return!1;return!0}if(v.Ta(b)&&v.Ta(c)){if(d.ja(b)===c)return!0;d.add(b,c);for(e in b){var f=b[e];if(!Mf(e,f)){var h=c[e];if(void 0===h||!Of(a,f,h,d))return!1}}for(var k in c)if(h=c[k],!Mf(k,h)&&(f=b[k],void 0===f||!Of(a,f,h,d)))return!1;
return!0}return!1}function Pf(a,b,c){a[c]!==b[c]&&v.k("Model.computeJsonDifference: Model."+c+' is not the same in both models: "'+a[c]+'" and "'+b[c]+'"')}
g.GA=function(a){Pf(this,a,"nodeKeyProperty");this instanceof Qf&&Pf(this,a,"nodeParentKeyProperty");for(var b=new J,c=new J,d=(new J).Tc(this.uc.nE),e=new na,f=a.Yf,h=0;h<f.length;h++){var k=f[h],l=a.gb(k);if(void 0!==l){d.remove(l);var m=this.be(l);null===m?(b.add(l),c.add(k)):Of(this,m,k,e)||c.add(k)}else this.Nz(k),l=this.gb(k),b.add(l),c.add(k)}f="";Of(this,this.ck,a.ck,e)||(f+=Gf(this));0<b.count&&(f+=this.Gx+Nf(this,b.cc(),!0));0<c.count&&(f+=this.OA+Nf(this,c.cc(),!0));0<d.count&&(f+=this.Ix+
Nf(this,d.cc(),!0));return f};F.prototype.computeJsonDifference=F.prototype.computeJSONDifference=function(a,b){v.A(a,F,F,"computeJsonDifference:newmodel");void 0===b&&(b=this.constructor===F?"go.Model":this.constructor===Q?"go.GraphLinksModel":this.constructor===Qf?"go.TreeModel":v.af(this));return'{ "class": '+this.quote(b)+', "incremental": 1'+this.fn()+this.GA(a)+"}"};g=F.prototype;g.Gx=',\n  "insertedNodeKeys": ';g.OA=',\n  "modifiedNodeData": ';g.Ix=',\n  "removedNodeKeys": ';
g.EA=function(a,b){var c=this,d=!1,e=new J,f=new J,h=new J;a.Of.each(function(a){a.ba===c&&("nodeDataArray"===a.hf?a.wc===Cf?e.add(a.newValue):a.wc===Df&&h.add(a.oldValue):c.Je(a.object)?f.add(a.object):c.ck===a.object&&a.wc===Af&&(d=!0))});var k=new J;e.each(function(a){k.add(c.gb(a));b||f.add(a)});var l=new J;h.each(function(a){l.add(c.gb(a));b&&f.add(a)});var m="";d&&(m+=Gf(this));0<k.count&&(m+=(b?this.Ix:this.Gx)+Nf(this,k.cc(),!0));0<f.count&&(m+=this.OA+Nf(this,f.cc(),!0));0<l.count&&(m+=(b?
this.Gx:this.Ix)+Nf(this,l.cc(),!0));return m};
g.bA=function(a){If(this,a);var b=a.insertedNodeKeys;if(v.isArray(b))for(var c=v.Va(b),d=0;d<c;d++){var e=v.Ra(b,d),f=this.be(e);null===f&&(f=this.copyNodeData({}),this.ox(f,e),this.Zk(f))}b=a.modifiedNodeData;if(v.isArray(b))for(c=v.Va(b),d=0;d<c;d++){var h=v.Ra(b,d),e=this.gb(h),f=this.be(e);if(null!==f)for(var k in h)"__gohashid"!==k&&k!==this.yl&&this.setDataProperty(f,k,h[k])}a=a.removedNodeKeys;if(v.isArray(a))for(c=v.Va(a),d=0;d<c;d++)e=v.Ra(a,d),f=this.be(e),null!==f&&this.hx(f)};
F.prototype.toIncrementalJson=F.prototype.toIncrementalJSON=function(a,b){v.A(a,zf,F,"toIncrementalJson:e");a.wc!==Bf&&v.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+a.toString());var c=a.object;if(!(a.lE&&c instanceof Rf))return'{ "incremental": 0 }';void 0===b&&(b=this.constructor===F?"go.Model":this.constructor===Q?"go.GraphLinksModel":this.constructor===Qf?"go.TreeModel":v.af(this));return'{ "class": '+this.quote(b)+', "incremental": 1'+this.fn()+this.EA(c,"FinishedUndo"===
a.propertyName)+"}"};F.prototype.toJson=F.prototype.toJSON=F.prototype.xA=function(a){void 0===a&&(a=this.constructor===F?"go.Model":this.constructor===Q?"go.GraphLinksModel":this.constructor===Qf?"go.TreeModel":v.af(this));return'{ "class": '+this.quote(a)+this.fn()+this.FA()+"}"};
F.prototype.applyIncrementalJson=F.prototype.applyIncrementalJSON=function(a){var b=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{b=window.JSON.parse(a)}catch(c){}else v.trace("WARNING: no JSON.parse available");else"object"===typeof a?b=a:v.k("Unable to modify a Model from: "+a);var d=b.incremental;"number"!==typeof d&&v.k("Unable to apply non-incremental changes to Model: "+a);0!==d&&(this.Qb("applyIncrementalJson"),this.bA(b),this.wd("applyIncrementalJson"))};
F.fromJson=F.fromJSON=function(a,b){void 0===b&&(b=null);null!==b&&v.A(b,F,F,"fromJson:model");var c=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){}else v.trace("WARNING: no JSON.parse available");else"object"===typeof a?c=a:v.k("Unable to construct a Model from: "+a);if(null===b){var e;e=null;var f=c["class"];if("string"===typeof f)try{var h=null;0===f.indexOf("go.")?(f=f.substr(3),h=ea[f]):(h=ea[f],void 0===h&&(h=window[f]));"function"===typeof h&&
(e=new h)}catch(k){}null===e||e instanceof F?b=e:v.k("Unable to construct a Model of declared class: "+c["class"])}null===b&&(b=new Q);b.Nt(c);b.cA(c);return b};
F.prototype.replaceJsonObjects=F.prototype.Qt=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Ra(a,c);v.Ta(d)&&v.kD(a,c,this.Qt(d))}else if(v.Ta(a)){for(c in a)if(d=a[c],v.Ta(d)&&(d=this.Qt(d),a[c]=d,"points"===c&&Array.isArray(d))){for(var e=0===d.length%2,f=0;f<d.length;f++)if("number"!==typeof d[f]){e=!1;break}if(e){e=new I(z);for(f=0;f<d.length/2;f++)e.add(new z(d[2*f],d[2*f+1]));e.freeze();a[c]=e}}if("object"===typeof a){c=a;d=a["class"];if("NaN"===d)c=NaN;else if("Date"===
d)c=new Date(a.value);else if("go.Point"===d)c=new z(Sf(a.x),Sf(a.y));else if("go.Size"===d)c=new ia(Sf(a.width),Sf(a.height));else if("go.Rect"===d)c=new A(Sf(a.x),Sf(a.y),Sf(a.width),Sf(a.height));else if("go.Margin"===d)c=new cb(Sf(a.top),Sf(a.right),Sf(a.bottom),Sf(a.left));else if("go.Spot"===d)c="string"===typeof a["enum"]?gb(a["enum"]):new L(Sf(a.x),Sf(a.y),Sf(a.offsetX),Sf(a.offsetY));else if("go.Brush"===d){if(c=new ha,c.type=ra(ha,a.type),"string"===typeof a.color&&(c.color=a.color),a.start instanceof
L&&(c.start=a.start),a.end instanceof L&&(c.end=a.end),"number"===typeof a.startRadius&&(c.cu=Sf(a.startRadius)),"number"===typeof a.endRadius&&(c.bt=Sf(a.endRadius)),a=a.colorStops,v.Ta(a))for(b in a)c.addColorStop(parseFloat(b),a[b])}else"go.Geometry"===d?(b=null,b="string"===typeof a.path?$e(a.path):new ve,b.type=ra(ve,a.type),"number"===typeof a.startX&&(b.Aa=Sf(a.startX)),"number"===typeof a.startY&&(b.xa=Sf(a.startY)),"number"===typeof a.endX&&(b.I=Sf(a.endX)),"number"===typeof a.endY&&(b.J=
Sf(a.endY)),a.spot1 instanceof L&&(b.B=a.spot1),a.spot2 instanceof L&&(b.C=a.spot2),c=b):"go.EnumValue"===d&&(b=a.classType,0===b.indexOf("go.")&&(b=b.substr(3)),c=ra(ea[b],a.name));a=c}}return a};
F.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++){var e=a[d];if('"'===e||"\\"===e)b+="\\"+e;else if("\b"===e)b+="\\b";else if("\f"===e)b+="\\f";else if("\n"===e)b+="\\n";else if("\r"===e)b+="\\r";else if("\t"===e)b+="\\t";else var f=a.charCodeAt(d),b=16>f?b+("\\u000"+a.charCodeAt(d).toString(16)):32>f?b+("\\u00"+a.charCodeAt(d).toString(16)):8232===f?b+"\\u2028":8233===f?b+"\\u2029":b+e}return'"'+b+'"'};
F.prototype.writeJsonValue=F.prototype.iu=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"===typeof a?this.quote(a):"number"===typeof a?Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.iu(a.valueOf()):v.isArray(a)?Nf(this,a):v.Ta(a)?Hf(this,a):"function"===typeof a?"null":a.toString()};
function Nf(a,b,c){void 0===c&&(c=!1);var d=v.Va(b);if(0>=d)return"[]";var e=new sa;e.add("[ ");c&&1<d&&e.add("\n");for(var f=0;f<d;f++){var h=v.Ra(b,f);void 0!==h&&(0<f&&(e.add(","),c&&e.add("\n")),e.add(a.iu(h)))}c&&1<d&&e.add("\n");e.add(" ]");return e.toString()}function Mf(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"===typeof b?!0:!1}function Tf(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}
function Hf(a,b){var c=b;if(c instanceof z){var d=c;b={"class":"go.Point",x:Tf(d.x),y:Tf(d.y)}}else if(c instanceof ia){var e=c;b={"class":"go.Size",width:Tf(e.width),height:Tf(e.height)}}else if(c instanceof A)b={"class":"go.Rect",x:Tf(c.x),y:Tf(c.y),width:Tf(c.width),height:Tf(c.height)};else if(c instanceof cb)b={"class":"go.Margin",top:Tf(c.top),right:Tf(c.right),bottom:Tf(c.bottom),left:Tf(c.left)};else if(c instanceof L)e=c,b=e.bd()?{"class":"go.Spot",x:Tf(e.x),y:Tf(e.y),offsetX:Tf(e.offsetX),
offsetY:Tf(e.offsetY)}:{"class":"go.Spot","enum":e.toString()};else if(c instanceof ha){b={"class":"go.Brush",type:c.type.name};if(c.type===Uf)b.color=c.color;else if(c.type===Vf||c.type===Yc)b.start=c.start,b.end=c.end,c.type===Yc&&(0!==c.cu&&(b.startRadius=Tf(c.cu)),isNaN(c.bt)||(b.endRadius=Tf(c.bt)));if(null!==c.Ys){for(var f={},h=c.Ys.i;h.next();)f[h.key]=h.value;b.colorStops=f}}else if(c instanceof ve)b={"class":"go.Geometry",type:c.type.name},0!==c.Aa&&(b.startX=Tf(c.Aa)),0!==c.xa&&(b.startY=
Tf(c.xa)),0!==c.I&&(b.endX=Tf(c.I)),0!==c.J&&(b.endY=Tf(c.J)),c.B.K(rb)||(b.spot1=c.B),c.C.K(Eb)||(b.spot2=c.C),c.type===Fe&&(b.path=Ze(c));else if(c instanceof fa)b={"class":"go.EnumValue",classType:v.af(c.qe),name:c.name};else if(c instanceof G||c instanceof E||c instanceof Wf||c instanceof F||c instanceof Xf||c instanceof Yf||c instanceof Zf||c instanceof $f||c instanceof Ff||c instanceof Rf)return v.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+
c.toString()),"{}";f="{";c=!0;for(d in b)if(e=v.qb(b,d),!Mf(d,e))if(c?c=!1:f+=", ",f+='"'+d+'":',"points"===d&&e instanceof I&&e.ia===z){h=e;e="[";for(h=h.i;h.next();){var k=h.value;1<e.length&&(e+=",");e+=a.iu(k.x);e+=",";e+=a.iu(k.y)}e+="]";f+=e}else f+=a.iu(e);return f+"}"}function Sf(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}
v.defineProperty(F,{name:"name"},function(){return this.Ob},function(a){var b=this.Ob;b!==a&&(v.j(a,"string",F,"name"),this.Ob=a,this.h("name",b,a))});v.defineProperty(F,{gl:"dataFormat"},function(){return this.pq},function(a){var b=this.pq;b!==a&&(v.j(a,"string",F,"dataFormat"),this.pq=a,this.h("dataFormat",b,a))});v.defineProperty(F,{ab:"isReadOnly"},function(){return this.ti},function(a){var b=this.ti;b!==a&&(v.j(a,"boolean",F,"isReadOnly"),this.ti=a,this.h("isReadOnly",b,a))});
v.defineProperty(F,{ck:"modelData"},function(){return this.By},function(a){var b=this.By;b!==a&&(v.j(a,"object",F,"modelData"),this.By=a,this.h("modelData",b,a),this.Hb(a))});F.prototype.addChangedListener=F.prototype.wm=function(a){v.j(a,"function",F,"addChangedListener:listener");null===this.zj&&(this.zj=new I("function"));this.zj.add(a)};
F.prototype.removeChangedListener=F.prototype.Ot=function(a){v.j(a,"function",F,"removeChangedListener:listener");null!==this.zj&&(this.zj.remove(a),0===this.zj.count&&(this.zj=null))};F.prototype.ow=function(a){this.tb||this.la.VD(a);if(null!==this.zj){var b=this.zj,c=b.length;if(1===c)b=b.da(0),b(a);else if(0!==c)for(var d=b.cc(),e=0;e<c;e++)b=d[e],b(a)}};F.prototype.raiseChangedEvent=F.prototype.Lc=function(a,b,c,d,e,f,h){ag(this,"",a,b,c,d,e,f,h)};
F.prototype.raiseChanged=F.prototype.h=function(a,b,c,d,e){ag(this,"",Af,a,this,b,c,d,e)};F.prototype.raiseDataChanged=F.prototype.aA=function(a,b,c,d,e,f){ag(this,"",Af,b,a,c,d,e,f)};function ag(a,b,c,d,e,f,h,k,l){void 0===k&&(k=null);void 0===l&&(l=null);var m=new zf;m.ba=a;m.wc=c;m.hf=b;m.propertyName=d;m.object=e;m.oldValue=f;m.Cg=k;m.newValue=h;m.Ag=l;a.ow(m)}
v.defineProperty(F,{la:"undoManager"},function(){return this.Ty},function(a){var b=this.Ty;b!==a&&(v.A(a,Ff,F,"undoManager"),null!==b&&b.hI(this),this.Ty=a,null!==a&&a.cG(this))});v.defineProperty(F,{tb:"skipsUndoManager"},function(){return this.Ii},function(a){v.j(a,"boolean",F,"skipsUndoManager");this.Ii=a});
F.prototype.Bm=function(a,b){if(null!==a&&a.ba===this)if(a.wc===Af){var c=a.object,d=a.propertyName,e=a.ja(b);v.Ka(c,d,e)}else a.wc===Cf?"nodeDataArray"===a.hf?(c=a.newValue,v.Ta(c)&&(d=this.gb(c),void 0!==d&&(b?(v.Uh(this.If,a.Ag),this.uc.remove(d)):(v.Oi(this.If,a.Ag,c),this.uc.add(d,c))))):""===a.hf?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.qb(a.object,a.propertyName)),v.isArray(c)&&(d=a.newValue,e=a.Ag,b?v.Uh(c,e):v.Oi(c,e,d))):v.k("unknown ChangedEvent.Insert object: "+a.toString()):a.wc===
Df?"nodeDataArray"===a.hf?(c=a.oldValue,v.Ta(c)&&(d=this.gb(c),void 0!==d&&(b?(v.Oi(this.If,a.Cg,c),this.uc.add(d,c)):(v.Uh(this.If,a.Cg),this.uc.remove(d))))):""===a.hf?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.qb(a.object,a.propertyName)),v.isArray(c)&&(d=a.oldValue,e=a.Cg,b?v.Oi(c,e,d):v.Uh(c,e))):v.k("unknown ChangedEvent.Remove object: "+a.toString()):a.wc!==Bf&&v.k("unknown ChangedEvent: "+a.toString())};F.prototype.startTransaction=F.prototype.Qb=function(a){return this.la.Qb(a)};
F.prototype.commitTransaction=F.prototype.wd=function(a){return this.la.wd(a)};F.prototype.rollbackTransaction=F.prototype.zp=function(){return this.la.zp()};F.prototype.updateTargetBindings=F.prototype.Hb=function(a,b){void 0===b&&(b="");ag(this,"SourceChanged",Bf,b,a,null,null)};
v.defineProperty(F,{yl:"nodeKeyProperty"},function(){return this.Fj},function(a){var b=this.Fj;b!==a&&(mg(a,F,"nodeKeyProperty"),""===a&&v.k("Model.nodeKeyProperty may not be the empty string"),0<this.uc.count&&v.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Fj=a,this.h("nodeKeyProperty",b,a))});function mg(a,b,c){"string"!==typeof a&&"function"!==typeof a&&v.Dd(a,"string or function",b,c)}
F.prototype.getKeyForNodeData=F.prototype.gb=function(a){if(null!==a){var b=this.Fj;if(""!==b&&(b=v.qb(a,b),void 0!==b)){if(ng(b))return b;v.k("Key value for node data "+a+" is not a number or a string: "+b)}}};
F.prototype.setKeyForNodeData=F.prototype.ox=function(a,b){void 0!==b&&null!==b&&ng(b)||v.Dd(b,"number or string",F,"setKeyForNodeData:key");if(null!==a){var c=this.Fj;if(""!==c)if(this.Je(a)){var d=v.qb(a,c);d!==b&&null===this.be(b)&&(v.Ka(a,c,b),this.uc.remove(d),this.uc.add(b,a),ag(this,"nodeKey",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c),this.Pt(d,b))}else v.Ka(a,c,b)}};
v.defineProperty(F,{bK:"makeUniqueKeyFunction"},function(){return this.bo},function(a){var b=this.bo;b!==a&&(null!==a&&v.j(a,"function",F,"makeUniqueKeyFunction"),this.bo=a,this.h("makeUniqueKeyFunction",b,a))});function ng(a){return"number"===typeof a||"string"===typeof a}F.prototype.containsNodeData=F.prototype.Je=function(a){var b=this.gb(a);return void 0===b?!1:this.uc.ja(b)===a};
F.prototype.findNodeDataForKey=F.prototype.be=function(a){null===a&&v.k("Model.findNodeDataForKey:key must not be null");return void 0!==a&&ng(a)?this.uc.ja(a):null};
v.defineProperty(F,{Yf:"nodeDataArray"},function(){return this.If},function(a){var b=this.If;if(b!==a){v.dz(a,F,"nodeDataArray");this.uc.clear();this.AA();for(var c=v.Va(a),d=0;d<c;d++){var e=v.Ra(a,d);if(!v.Ta(e)){v.k("Model.nodeDataArray must only contain Objects, not: "+e);return}v.ot(e)}this.If=a;for(var f=new I(Object),d=0;d<c;d++){var e=v.Ra(a,d),h=this.gb(e);void 0===h?f.add(e):null!==this.uc.ja(h)?f.add(e):this.uc.add(h,e)}for(d=f.i;d.next();)e=d.value,this.Nz(e),f=this.gb(e),void 0!==f&&
this.uc.add(f,e);ag(this,"nodeDataArray",Af,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=v.Ra(a,d),this.yp(e),this.xp(e);this.oD();v.rH(a)||(this.ab=!0)}});
F.prototype.makeNodeDataKeyUnique=F.prototype.Nz=function(a){if(null!==a){var b=this.Fj;if(""!==b){var c=this.gb(a);if(void 0===c||this.uc.contains(c)){var d=this.bo;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.uc.contains(c))){v.Ka(a,b,c);return}if("string"===typeof c){for(d=2;this.uc.contains(c+d);)d++;v.Ka(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.uc.count-1;this.uc.contains(d);)d--;v.Ka(a,b,d)}else v.k("Model.getKeyForNodeData returned something other than a string or a number: "+
c)}}}};F.prototype.addNodeData=F.prototype.Zk=function(a){null!==a&&(v.ot(a),og(this,a,!0))};function og(a,b,c){var d=a.gb(b);if(void 0===d||a.uc.ja(d)!==b)if(a.Nz(b),d=a.gb(b),void 0===d)v.k("Model.makeNodeDataKeyUnique failed on "+b+".  Data not added to Model.");else{a.uc.add(d,b);if(c){var e=v.Va(a.If);v.Oi(a.If,e,b)}ag(a,"nodeDataArray",Cf,"nodeDataArray",a,null,b,null,e);a.yp(b);a.xp(b)}}
F.prototype.addNodeDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.Zk(v.Ra(a,c));else for(a=a.i;a.next();)this.Zk(a.value)};F.prototype.removeNodeData=F.prototype.hx=function(a){null!==a&&pg(this,a,!0)};function pg(a,b,c){var d=a.gb(b);if(void 0!==d&&a.uc.contains(d)){a.uc.remove(d);if(c){var e=v.cz(a.If,b);if(0>e)return;v.Uh(a.If,e)}ag(a,"nodeDataArray",Df,"nodeDataArray",a,b,null,e,null);a.gu(b)}}
F.prototype.removeNodeDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.hx(v.Ra(a,c));else for(a=a.i;a.next();)this.hx(a.value)};g=F.prototype;g.Pt=function(a,b){var c=qg(this,a);c instanceof J&&this.oi.add(b,c)};g.AA=function(){};g.yp=function(){};g.xp=function(){};g.gu=function(){};function rg(a,b,c){if(void 0!==b){var d=a.oi.ja(b);null===d&&(d=new J(Object),a.oi.add(b,d));d.add(c)}}
function sg(a,b,c){if(void 0!==b){var d=a.oi.ja(b);d instanceof J&&(void 0===c||null===c?a.oi.remove(b):(d.remove(c),0===d.count&&a.oi.remove(b)))}}function qg(a,b){if(void 0===b)return null;var c=a.oi.ja(b);return c instanceof J?c:null}F.prototype.clearUnresolvedReferences=F.prototype.oD=function(a){void 0===a?this.oi.clear():this.oi.remove(a)};
v.defineProperty(F,{xJ:"copyNodeDataFunction"},function(){return this.vn},function(a){var b=this.vn;b!==a&&(null!==a&&v.j(a,"function",F,"copyNodeDataFunction"),this.vn=a,this.h("copyNodeDataFunction",b,a))});v.defineProperty(F,{jz:"copiesArrays"},function(){return this.Eu},function(a){var b=this.Eu;b!==a&&(null!==a&&v.j(a,"boolean",F,"copiesArrays"),this.Eu=a,this.h("copiesArrays",b,a))});
v.defineProperty(F,{iz:"copiesArrayObjects"},function(){return this.hq},function(a){var b=this.hq;b!==a&&(null!==a&&v.j(a,"boolean",F,"copiesArrayObjects"),this.hq=a,this.h("copiesArrayObjects",b,a))});F.prototype.copyNodeData=function(a){if(null===a)return null;var b=null,b=this.vn,b=null!==b?b(a,this):tg(this,a,!0);v.Ta(b)&&v.dc(b);return b};
function tg(a,b,c){if(a.jz&&Array.isArray(b)){var d=[];for(c=0;c<b.length;c++){var e=tg(a,b[c],a.iz);d.push(e)}v.dc(d);return d}if(c&&v.Ta(b)){c=(c=b.constructor)?new c:{};for(d in b)if("__gohashid"!==d){var e=v.qb(b,d),f;f=e;f instanceof G||f instanceof E||f instanceof Wf||f instanceof ug||f instanceof vg||f instanceof Xf||f instanceof Yf||f instanceof Zf||f instanceof xf||f instanceof yf?("_"!==d[0]&&v.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+
d+'" of data object: '+b.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+f.toString()),f=!0):f=f instanceof F||f instanceof Ff||f instanceof Rf||f instanceof zf?!0:!1;f||(e=tg(a,e,!1));v.Ka(c,d,e)}v.dc(c);return c}return b instanceof z?b.copy():b instanceof ia?b.copy():b instanceof A?b.copy():b instanceof L?b.copy():b instanceof cb?b.copy():b}
v.defineProperty(F,{eG:"afterCopyFunction"},function(){return this.Sp},function(a){var b=this.Sp;b!==a&&(null!==a&&v.j(a,"function",F,"afterCopyFunction"),this.Sp=a,this.h("afterCopyFunction",b,a))});var wg=!1;
F.prototype.setDataProperty=function(a,b,c){if(this.Je(a))if(b===this.yl)this.ox(a,c);else{if(b===this.Vm){this.lx(a,c);return}}else!wg&&a instanceof G&&(wg=!0,v.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),v.trace("  Is that really your intent?"));var d=v.qb(a,b);d!==c&&(v.Ka(a,b,c),this.aA(a,b,d,c))};F.prototype.addArrayItem=function(a,b){this.nH(a,-1,b)};
F.prototype.insertArrayItem=F.prototype.nH=function(a,b,c){a===this.If&&v.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=v.Va(a));v.Oi(a,b,c);ag(this,"",Cf,"",a,null,c,null,b)};F.prototype.removeArrayItem=function(a,b){void 0===b&&(b=-1);a===this.If&&v.k("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=v.Va(a)-1);var c=v.Ra(a,b);v.Uh(a,b);ag(this,"",Df,"",a,c,null,b,null)};
v.defineProperty(F,{Vm:"nodeCategoryProperty"},function(){return this.em},function(a){var b=this.em;b!==a&&(mg(a,F,"nodeCategoryProperty"),this.em=a,this.h("nodeCategoryProperty",b,a))});F.prototype.getCategoryForNodeData=F.prototype.xz=function(a){if(null===a)return"";var b=this.em;if(""===b)return"";b=v.qb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v.k("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
F.prototype.setCategoryForNodeData=F.prototype.lx=function(a,b){v.j(b,"string",F,"setCategoryForNodeData:cat");if(null!==a){var c=this.em;if(""!==c)if(this.Je(a)){var d=v.qb(a,c);void 0===d&&(d="");d!==b&&(v.Ka(a,c,b),ag(this,"nodeCategory",Af,c,a,d,b))}else v.Ka(a,c,b)}};
function Q(a,b){2<arguments.length&&v.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");F.call(this);this.Gf=[];this.$n=new J(Object);this.Yc=new na(null,Object);this.Mk="";this.Ll=this.un=this.co=null;this.Gh="from";this.Hh="to";this.bm=this.am="";this.$l="category";this.jg="";this.io="isGroup";this.Vg="group";this.iq=!1;void 0!==a&&(this.Yf=a);void 0!==b&&(this.zg=b)}v.Ja(Q,F);v.ea("GraphLinksModel",Q);
Q.prototype.cloneProtected=function(a){F.prototype.cloneProtected.call(this,a);a.Mk=this.Mk;a.co=this.co;a.un=this.un;a.Gh=this.Gh;a.Hh=this.Hh;a.am=this.am;a.bm=this.bm;a.$l=this.$l;a.jg=this.jg;a.io=this.io;a.Vg=this.Vg;a.iq=this.iq};Q.prototype.clear=Q.prototype.clear=function(){F.prototype.clear.call(this);this.Gf=[];this.Yc.clear();this.$n.clear()};g=Q.prototype;
g.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.xA();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.Yf;for(var c=v.Va(a),d=0,d=0;d<c;d++)var e=v.Ra(a,d),b=b+(" "+this.gb(e)+":"+Ef(e));b+="\n link data:";a=this.zg;c=v.Va(a);for(d=0;d<c;d++)e=v.Ra(a,d),b+=" "+this.pl(e)+"--\x3e"+this.ql(e)}return b};
g.fn=function(){var a=F.prototype.fn.call(this),b="";"category"!==this.Bt&&"string"===typeof this.Bt&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.Bt));""!==this.$i&&"string"===typeof this.$i&&(b+=',\n  "linkKeyProperty": '+this.quote(this.$i));"from"!==this.ip&&"string"===typeof this.ip&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.ip));"to"!==this.kp&&"string"===typeof this.kp&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.kp));""!==this.Ct&&"string"===typeof this.Ct&&(b+=',\n  "linkFromPortIdProperty": '+
this.quote(this.Ct));""!==this.Et&&"string"===typeof this.Et&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.Et));""!==this.Dt&&"string"===typeof this.Dt&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.Dt));"isGroup"!==this.Kt&&"string"===typeof this.Kt&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.Kt));"group"!==this.tp&&"string"===typeof this.tp&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.tp));return a+b};
g.Nt=function(a){F.prototype.Nt.call(this,a);a.linkKeyProperty&&(this.$i=a.linkKeyProperty);a.linkFromKeyProperty&&(this.ip=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.kp=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.Ct=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Et=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.Bt=a.linkCategoryProperty);a.linkLabelKeysProperty&&(this.Dt=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&(this.Kt=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&
(this.tp=a.nodeGroupKeyProperty)};g.FA=function(){var a=F.prototype.FA.call(this),b=',\n  "linkDataArray": '+Nf(this,this.zg,!0);return a+b};g.cA=function(a){F.prototype.cA.call(this,a);a=a.linkDataArray;v.isArray(a)&&(this.Qt(a),this.zg=a)};
g.GA=function(a){a instanceof Q||v.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel");""===this.$i&&v.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var b=F.prototype.GA.call(this,a);Pf(this,a,"linkKeyProperty");Pf(this,a,"linkFromKeyProperty");Pf(this,a,"linkToKeyProperty");Pf(this,a,"linkLabelKeysProperty");Pf(this,a,"nodeIsGroupProperty");Pf(this,a,"nodeGroupKeyProperty");for(var c=new J,d=new J,e=(new J).Tc(this.Yc.nE),
f=new na,h=a.zg,k=0;k<h.length;k++){var l=h[k],m=a.bf(l);if(void 0!==m){e.remove(m);var n=this.ft(m);null===n?(c.add(m),d.add(l)):Of(this,n,l,f)||d.add(l)}else this.Mz(l),m=this.bf(l),c.add(m),d.add(l)}a=b;0<c.count&&(a+=this.Fx+Nf(this,c.cc(),!0));0<d.count&&(a+=this.NA+Nf(this,d.cc(),!0));0<e.count&&(a+=this.Hx+Nf(this,e.cc(),!0));return a};g.Fx=',\n  "insertedLinkKeys": ';g.NA=',\n  "modifiedLinkData": ';g.Hx=',\n  "removedLinkKeys": ';
g.EA=function(a,b){""===this.$i&&v.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var c=F.prototype.EA.call(this,a,b),d=this,e=new J,f=new J,h=new J;a.Of.each(function(a){a.ba===d&&("linkDataArray"===a.hf?a.wc===Cf?e.add(a.newValue):a.wc===Df&&h.add(a.oldValue):d.bh(a.object)&&f.add(a.object))});var k=new J;e.each(function(a){k.add(d.bf(a));b||f.add(a)});var l=new J;h.each(function(a){l.add(d.bf(a));b&&f.add(a)});0<k.count&&(c+=(b?this.Hx:this.Fx)+
Nf(this,k.cc(),!0));0<f.count&&(c+=this.NA+Nf(this,f.cc(),!0));0<l.count&&(c+=(b?this.Fx:this.Hx)+Nf(this,l.cc(),!0));return c};
g.bA=function(a){F.prototype.bA.call(this,a);var b=a.insertedLinkKeys;if(v.isArray(b))for(var c=v.Va(b),d=0;d<c;d++){var e=v.Ra(b,d),f=this.ft(e);null===f&&(f=this.sw({}),this.XE(f,e),this.Os(f))}b=a.modifiedLinkData;if(v.isArray(b))for(c=v.Va(b),d=0;d<c;d++){var h=v.Ra(b,d),e=this.bf(h),f=this.ft(e);if(null!==f)for(var k in h)"__gohashid"!==k&&k!==this.$i&&this.setDataProperty(f,k,h[k])}a=a.removedLinkKeys;if(v.isArray(a))for(c=v.Va(a),d=0;d<c;d++)e=v.Ra(a,d),f=this.ft(e),null!==f&&this.gx(f)};
g.Bm=function(a,b){var c=null;if(a.wc===Cf){if("linkDataArray"===a.hf?c=this.Gf:"linkLabelKeys"===a.hf&&(c=this.ak(a.object)),v.isArray(c)){if(b)v.Uh(c,a.Ag),c===this.Gf&&(c=this.bf(a.newValue),void 0!==c&&this.Yc.remove(c));else if(v.Oi(c,a.Ag,a.newValue),c===this.Gf){var d=a.newValue,c=this.bf(d);void 0!==c&&this.Yc.add(c,d)}return}}else if(a.wc===Df&&("linkDataArray"===a.hf?c=this.Gf:"linkLabelKeys"===a.hf&&(c=this.ak(a.object)),v.isArray(c))){b?(v.Oi(c,a.Cg,a.oldValue),c===this.Gf&&(d=a.newValue,
c=this.bf(d),void 0!==c&&this.Yc.add(c,d))):(v.Uh(c,a.Cg),c===this.Gf&&(c=this.bf(a.newValue),void 0!==c&&this.Yc.remove(c)));return}F.prototype.Bm.call(this,a,b)};v.defineProperty(Q,{bz:"archetypeNodeData"},function(){return this.Ll},function(a){var b=this.Ll;b!==a&&(null!==a&&v.A(a,Object,Q,"archetypeNodeData"),this.Ll=a,this.h("archetypeNodeData",b,a))});Q.prototype.Um=function(a){if(void 0!==a){var b=this.Ll;if(null!==b){var c=this.be(a);null===c&&(c=this.copyNodeData(b),v.Ka(c,this.Fj,a),this.Zk(c))}return a}};
v.defineProperty(Q,{ip:"linkFromKeyProperty"},function(){return this.Gh},function(a){var b=this.Gh;b!==a&&(mg(a,Q,"linkFromKeyProperty"),this.Gh=a,this.h("linkFromKeyProperty",b,a))});Q.prototype.getFromKeyForLinkData=Q.prototype.pl=function(a){if(null!==a){var b=this.Gh;if(""!==b&&(b=v.qb(a,b),void 0!==b)){if(ng(b))return b;v.k("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setFromKeyForLinkData=Q.prototype.mx=function(a,b){null===b&&(b=void 0);void 0===b||ng(b)||v.Dd(b,"number or string",Q,"setFromKeyForLinkData:key");if(null!==a){var c=this.Gh;if(""!==c)if(b=this.Um(b),this.bh(a)){var d=v.qb(a,c);d!==b&&(sg(this,d,a),v.Ka(a,c,b),null===this.be(b)&&rg(this,b,a),ag(this,"linkFromKey",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
v.defineProperty(Q,{kp:"linkToKeyProperty"},function(){return this.Hh},function(a){var b=this.Hh;b!==a&&(mg(a,Q,"linkToKeyProperty"),this.Hh=a,this.h("linkToKeyProperty",b,a))});Q.prototype.getToKeyForLinkData=Q.prototype.ql=function(a){if(null!==a){var b=this.Hh;if(""!==b&&(b=v.qb(a,b),void 0!==b)){if(ng(b))return b;v.k("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setToKeyForLinkData=Q.prototype.qx=function(a,b){null===b&&(b=void 0);void 0===b||ng(b)||v.Dd(b,"number or string",Q,"setToKeyForLinkData:key");if(null!==a){var c=this.Hh;if(""!==c)if(b=this.Um(b),this.bh(a)){var d=v.qb(a,c);d!==b&&(sg(this,d,a),v.Ka(a,c,b),null===this.be(b)&&rg(this,b,a),ag(this,"linkToKey",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
v.defineProperty(Q,{Ct:"linkFromPortIdProperty"},function(){return this.am},function(a){var b=this.am;b!==a&&(mg(a,Q,"linkFromPortIdProperty"),this.am=a,this.h("linkFromPortIdProperty",b,a))});Q.prototype.getFromPortIdForLinkData=Q.prototype.WG=function(a){if(null===a)return"";var b=this.am;if(""===b)return"";a=v.qb(a,b);return void 0===a?"":a};
Q.prototype.setFromPortIdForLinkData=Q.prototype.nA=function(a,b){v.j(b,"string",Q,"setFromPortIdForLinkData:portname");if(null!==a){var c=this.am;if(""!==c)if(this.bh(a)){var d=v.qb(a,c);void 0===d&&(d="");d!==b&&(v.Ka(a,c,b),ag(this,"linkFromPortId",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};v.defineProperty(Q,{Et:"linkToPortIdProperty"},function(){return this.bm},function(a){var b=this.bm;b!==a&&(mg(a,Q,"linkToPortIdProperty"),this.bm=a,this.h("linkToPortIdProperty",b,a))});
Q.prototype.getToPortIdForLinkData=Q.prototype.ZG=function(a){if(null===a)return"";var b=this.bm;if(""===b)return"";a=v.qb(a,b);return void 0===a?"":a};Q.prototype.setToPortIdForLinkData=Q.prototype.qA=function(a,b){v.j(b,"string",Q,"setToPortIdForLinkData:portname");if(null!==a){var c=this.bm;if(""!==c)if(this.bh(a)){var d=v.qb(a,c);void 0===d&&(d="");d!==b&&(v.Ka(a,c,b),ag(this,"linkToPortId",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
v.defineProperty(Q,{Dt:"linkLabelKeysProperty"},function(){return this.jg},function(a){var b=this.jg;b!==a&&(mg(a,Q,"linkLabelKeysProperty"),this.jg=a,this.h("linkLabelKeysProperty",b,a))});Q.prototype.getLabelKeysForLinkData=Q.prototype.ak=function(a){if(null===a)return v.hj;var b=this.jg;if(""===b)return v.hj;a=v.qb(a,b);return void 0===a?v.hj:a};
Q.prototype.setLabelKeysForLinkData=Q.prototype.YE=function(a,b){v.dz(b,Q,"setLabelKeysForLinkData:arr");if(null!==a){var c=this.jg;if(""!==c)if(this.bh(a)){var d=v.qb(a,c);void 0===d&&(d=v.hj);if(d!==b){for(var e=v.Va(d),f=0;f<e;f++){var h=v.Ra(d,f);sg(this,h,a)}v.Ka(a,c,b);e=v.Va(b);for(f=0;f<e;f++)h=v.Ra(b,f),null===this.be(h)&&rg(this,h,a);ag(this,"linkLabelKeys",Af,c,a,d,b);"string"===typeof c&&this.Hb(a,c)}}else v.Ka(a,c,b)}};
Q.prototype.addLabelKeyForLinkData=Q.prototype.Zy=function(a,b){if(null!==b&&void 0!==b&&(ng(b)||v.Dd(b,"number or string",Q,"addLabelKeyForLinkData:key"),null!==a)){var c=this.jg;if(""!==c){var d=v.qb(a,c);void 0===d?(c=[],c.push(b),this.YE(a,c)):v.isArray(d)?0<=v.cz(d,b)||(v.Oi(d,Infinity,b),this.bh(a)&&(null===this.be(b)&&rg(this,b,a),ag(this,"linkLabelKeys",Cf,c,a,null,b))):v.k(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
Q.prototype.removeLabelKeyForLinkData=Q.prototype.FE=function(a,b){if(null!==b&&void 0!==b&&(ng(b)||v.Dd(b,"number or string",Q,"removeLabelKeyForLinkData:key"),null!==a)){var c=this.jg;if(""!==c){var d=v.qb(a,c);if(v.isArray(d)){var e=v.cz(d,b);0>e||(v.Uh(d,e),this.bh(a)&&(sg(this,b,a),ag(this,"linkLabelKeys",Df,c,a,b,null)))}else void 0!==d&&v.k(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};
v.defineProperty(Q,{zg:"linkDataArray"},function(){return this.Gf},function(a){var b=this.Gf;if(b!==a){v.dz(a,Q,"linkDataArray");this.Yc.clear();for(var c=v.Va(a),d=0;d<c;d++){var e=v.Ra(a,d);if(!v.Ta(e)){v.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}v.ot(e)}this.Gf=a;if(""!==this.$i){for(var f=new I(Object),d=0;d<c;d++){var e=v.Ra(a,d),h=this.bf(e);void 0===h?f.add(e):null!==this.Yc.ja(h)?f.add(e):this.Yc.add(h,e)}for(d=f.i;d.next();)e=d.value,this.Mz(e),f=this.bf(e),
void 0!==f&&this.Yc.add(f,e)}f=new J(Object);for(d=0;d<c;d++)e=v.Ra(a,d),f.add(e);this.$n=f;ag(this,"linkDataArray",Af,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=v.Ra(a,d),xg(this,e)}});v.defineProperty(Q,{$i:"linkKeyProperty"},function(){return this.Mk},function(a){var b=this.Mk;if(b!==a){mg(a,Q,"linkKeyProperty");this.Mk=a;this.Yc.clear();for(var c=v.Va(this.zg),d=0;d<c;d++){var e=v.Ra(this.zg,d),f=this.bf(e);void 0!==f&&this.Yc.add(f,e)}this.h("linkKeyProperty",b,a)}});
Q.prototype.getKeyForLinkData=Q.prototype.bf=function(a){if(null!==a){var b=this.Mk;if(""!==b&&(b=v.qb(a,b),void 0!==b)){if(ng(b))return b;v.k("Key value for link data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setKeyForLinkData=Q.prototype.XE=function(a,b){void 0!==b&&null!==b&&ng(b)||v.Dd(b,"number or string",Q,"setKeyForLinkData:key");if(null!==a){var c=this.Mk;if(""!==c)if(this.bh(a)){var d=v.qb(a,c);d!==b&&null===this.ft(b)&&(v.Ka(a,c,b),this.Yc.remove(d),this.Yc.add(b,a),ag(this,"linkKey",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
v.defineProperty(Q,{cK:"makeUniqueLinkKeyFunction"},function(){return this.co},function(a){var b=this.co;b!==a&&(null!==a&&v.j(a,"function",Q,"makeUniqueLinkKeyFunction"),this.co=a,this.h("makeUniqueLinkKeyFunction",b,a))});Q.prototype.findLinkDataForKey=Q.prototype.ft=function(a){null===a&&v.k("GraphLinksModel.findLinkDataForKey:key must not be null");return void 0!==a&&ng(a)?this.Yc.ja(a):null};
Q.prototype.makeLinkDataKeyUnique=Q.prototype.Mz=function(a){if(null!==a){var b=this.Mk;if(""!==b){var c=this.bf(a);if(void 0===c||this.Yc.contains(c)){var d=this.co;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.Yc.contains(c))){v.Ka(a,b,c);return}if("string"===typeof c){for(d=2;this.Yc.contains(c+d);)d++;v.Ka(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.Yc.count-1;this.Yc.contains(d);)d--;v.Ka(a,b,d)}else v.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+
c)}}}};Q.prototype.containsLinkData=Q.prototype.bh=function(a){return null===a?!1:this.$n.contains(a)};Q.prototype.addLinkData=Q.prototype.Os=function(a){if(null!==a){if(void 0===v.ld(a))v.dc(a);else if(this.bh(a))return;yg(this,a,!0)}};
function yg(a,b,c){if(""!==a.$i){var d=a.bf(b);if(void 0!==d&&a.Yc.ja(d)===b)return;a.Mz(b);d=a.bf(b);if(void 0===d){v.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+b+". Data not added to model.");return}a.Yc.add(d,b)}a.$n.add(b);if(c){var e=v.Va(a.Gf);v.Oi(a.Gf,e,b)}ag(a,"linkDataArray",Cf,"linkDataArray",a,null,b,null,e);xg(a,b)}Q.prototype.addLinkDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.Os(v.Ra(a,c));else for(a=a.i;a.next();)this.Os(a.value)};
Q.prototype.removeLinkData=Q.prototype.gx=function(a){null!==a&&zg(this,a,!0)};function zg(a,b,c){a.$n.remove(b);var d=a.bf(b);void 0!==d&&a.Yc.remove(d);if(c){var e=a.Gf.indexOf(b);if(0>e)return;v.Uh(a.Gf,e)}ag(a,"linkDataArray",Df,"linkDataArray",a,b,null,e,null);c=a.pl(b);sg(a,c,b);c=a.ql(b);sg(a,c,b);d=a.ak(b);if(v.isArray(d))for(var e=v.Va(d),f=0;f<e;f++)c=v.Ra(d,f),sg(a,c,b)}
Q.prototype.removeLinkDataCollection=function(a){if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++)this.gx(v.Ra(a,c));else for(a=a.i;a.next();)this.gx(a.value)};function xg(a,b){var c=a.pl(b),c=a.Um(c);null===a.be(c)&&rg(a,c,b);c=a.ql(b);c=a.Um(c);null===a.be(c)&&rg(a,c,b);var d=a.ak(b);if(v.isArray(d))for(var e=v.Va(d),f=0;f<e;f++)c=v.Ra(d,f),null===a.be(c)&&rg(a,c,b)}
v.defineProperty(Q,{wJ:"copyLinkDataFunction"},function(){return this.un},function(a){var b=this.un;b!==a&&(null!==a&&v.j(a,"function",Q,"copyLinkDataFunction"),this.un=a,this.h("copyLinkDataFunction",b,a))});Q.prototype.copyLinkData=Q.prototype.sw=function(a){if(null===a)return null;var b=null,b=this.un,b=null!==b?b(a,this):tg(this,a,!0);v.Ta(b)&&(v.dc(b),""!==this.Gh&&v.Ka(b,this.Gh,void 0),""!==this.Hh&&v.Ka(b,this.Hh,void 0),""!==this.jg&&v.Ka(b,this.jg,[]));return b};
v.defineProperty(Q,{Kt:"nodeIsGroupProperty"},function(){return this.io},function(a){var b=this.io;b!==a&&(mg(a,Q,"nodeIsGroupProperty"),this.io=a,this.h("nodeIsGroupProperty",b,a))});Q.prototype.isGroupForNodeData=Q.prototype.Fz=function(a){if(null===a)return!1;var b=this.io;return""===b?!1:v.qb(a,b)?!0:!1};v.defineProperty(Q,{tp:"nodeGroupKeyProperty"},function(){return this.Vg},function(a){var b=this.Vg;b!==a&&(mg(a,Q,"nodeGroupKeyProperty"),this.Vg=a,this.h("nodeGroupKeyProperty",b,a))});
v.defineProperty(Q,{Fm:"copiesGroupKeyOfNodeData"},function(){return this.iq},function(a){this.iq!==a&&(v.j(a,"boolean",Q,"copiesGroupKeyOfNodeData"),this.iq=a)});Q.prototype.getGroupKeyForNodeData=Q.prototype.Mm=function(a){if(null!==a){var b=this.Vg;if(""!==b&&(b=v.qb(a,b),void 0!==b)){if(ng(b))return b;v.k("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
Q.prototype.setGroupKeyForNodeData=Q.prototype.nx=function(a,b){null===b&&(b=void 0);void 0===b||ng(b)||v.Dd(b,"number or string",Q,"setGroupKeyForNodeData:key");if(null!==a){var c=this.Vg;if(""!==c)if(this.Je(a)){var d=v.qb(a,c);d!==b&&(sg(this,d,a),v.Ka(a,c,b),null===this.be(b)&&rg(this,b,a),ag(this,"nodeGroupKey",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
Q.prototype.copyNodeData=function(a){if(null===a)return null;a=F.prototype.copyNodeData.call(this,a);this.Fm||""===this.Vg||void 0===v.qb(a,this.Vg)||v.Ka(a,this.Vg,void 0);return a};
Q.prototype.setDataProperty=function(a,b,c){if(this.Je(a))if(b===this.yl)this.ox(a,c);else{if(b===this.Vm){this.lx(a,c);return}if(b===this.tp){this.nx(a,c);return}b===this.Kt&&v.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.bh(a)){if(b===this.ip){this.mx(a,c);return}if(b===this.kp){this.qx(a,c);return}if(b===this.Ct){this.nA(a,c);return}if(b===this.Et){this.qA(a,c);return}if(b===this.$i){this.XE(a,c);return}if(b===this.Bt){this.WE(a,c);return}if(b===
this.Dt){this.YE(a,c);return}}else!wg&&a instanceof G&&(wg=!0,v.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),v.trace("  Is that really your intent?"));var d=v.qb(a,b);d!==c&&(v.Ka(a,b,c),this.aA(a,b,d,c))};g=Q.prototype;
g.Pt=function(a,b){F.prototype.Pt.call(this,a,b);for(var c=this.uc.i;c.next();)this.hA(c.value,a,b);for(c=this.$n.i;c.next();){var d=c.value,e=a,f=b;if(this.pl(d)===e){var h=this.Gh;v.Ka(d,h,f);ag(this,"linkFromKey",Af,h,d,e,f);"string"===typeof h&&this.Hb(d,h)}this.ql(d)===e&&(h=this.Hh,v.Ka(d,h,f),ag(this,"linkToKey",Af,h,d,e,f),"string"===typeof h&&this.Hb(d,h));var k=this.ak(d);if(v.isArray(k))for(var l=v.Va(k),h=this.jg,m=0;m<l;m++)v.Ra(k,m)===e&&(v.kD(k,m,f),ag(this,"linkLabelKeys",Cf,h,d,e,
f))}};g.hA=function(a,b,c){if(this.Mm(a)===b){var d=this.Vg;v.Ka(a,d,c);ag(this,"nodeGroupKey",Af,d,a,b,c);"string"===typeof d&&this.Hb(a,d)}};g.AA=function(){F.prototype.AA.call(this);for(var a=this.zg,b=v.Va(a),c=0;c<b;c++){var d=v.Ra(a,c);xg(this,d)}};
g.yp=function(a){F.prototype.yp.call(this,a);a=this.gb(a);var b=qg(this,a);if(null!==b){for(var c=new I(Object),b=b.i;b.next();){var d=b.value;if(this.Je(d)){if(this.Mm(d)===a){var e=this.Vg;ag(this,"nodeGroupKey",Af,e,d,a,a);"string"===typeof e&&this.Hb(d,e);c.add(d)}}else{this.pl(d)===a&&(e=this.Gh,ag(this,"linkFromKey",Af,e,d,a,a),"string"===typeof e&&this.Hb(d,e),c.add(d));this.ql(d)===a&&(e=this.Hh,ag(this,"linkToKey",Af,e,d,a,a),"string"===typeof e&&this.Hb(d,e),c.add(d));var f=this.ak(d);if(v.isArray(f))for(var h=
v.Va(f),e=this.jg,k=0;k<h;k++)v.Ra(f,k)===a&&(ag(this,"linkLabelKeys",Cf,e,d,a,a),c.add(d))}}for(c=c.i;c.next();)sg(this,a,c.value)}};g.xp=function(a){F.prototype.xp.call(this,a);var b=this.Mm(a);null===this.be(b)&&rg(this,b,a)};g.gu=function(a){F.prototype.gu.call(this,a);var b=this.Mm(a);sg(this,b,a)};v.defineProperty(Q,{Bt:"linkCategoryProperty"},function(){return this.$l},function(a){var b=this.$l;b!==a&&(mg(a,Q,"linkCategoryProperty"),this.$l=a,this.h("linkCategoryProperty",b,a))});
Q.prototype.getCategoryForLinkData=Q.prototype.Fw=function(a){if(null===a)return"";var b=this.$l;if(""===b)return"";b=v.qb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v.k("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
Q.prototype.setCategoryForLinkData=Q.prototype.WE=function(a,b){v.j(b,"string",Q,"setCategoryForLinkData:cat");if(null!==a){var c=this.$l;if(""!==c)if(this.bh(a)){var d=v.qb(a,c);void 0===d&&(d="");d!==b&&(v.Ka(a,c,b),ag(this,"linkCategory",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
function Qf(a){1<arguments.length&&v.k("TreeModel constructor can only take one optional argument, the Array of node data.");F.call(this);this.Wg="parent";this.jq=!1;this.hm="parentLinkCategory";void 0!==a&&(this.Yf=a)}v.Ja(Qf,F);v.ea("TreeModel",Qf);Qf.prototype.cloneProtected=function(a){F.prototype.cloneProtected.call(this,a);a.Wg=this.Wg;a.jq=this.jq;a.hm=this.hm};
Qf.prototype.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.xA();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.Yf;for(var c=v.Va(a),d=0;d<c;d++)var e=v.Ra(a,d),b=b+(" "+this.gb(e)+":"+Ef(e))}return b};Qf.prototype.fn=function(){var a=F.prototype.fn.call(this),b="";"parent"!==this.vp&&"string"===typeof this.vp&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.vp));return a+b};
Qf.prototype.Nt=function(a){F.prototype.Nt.call(this,a);a.nodeParentKeyProperty&&(this.vp=a.nodeParentKeyProperty)};Qf.prototype.Um=function(a){return a};v.defineProperty(Qf,{vp:"nodeParentKeyProperty"},function(){return this.Wg},function(a){var b=this.Wg;b!==a&&(mg(a,Qf,"nodeParentKeyProperty"),this.Wg=a,this.h("nodeParentKeyProperty",b,a))});
v.defineProperty(Qf,{Gm:"copiesParentKeyOfNodeData"},function(){return this.jq},function(a){this.jq!==a&&(v.j(a,"boolean",Qf,"copiesParentKeyOfNodeData"),this.jq=a)});Qf.prototype.getParentKeyForNodeData=Qf.prototype.Nm=function(a){if(null!==a){var b=this.Wg;if(""!==b&&(b=v.qb(a,b),void 0!==b)){if(ng(b))return b;v.k("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
Qf.prototype.setParentKeyForNodeData=Qf.prototype.qh=function(a,b){null===b&&(b=void 0);void 0===b||ng(b)||v.Dd(b,"number or string",Qf,"setParentKeyForNodeData:key");if(null!==a){var c=this.Wg;if(""!==c)if(b=this.Um(b),this.Je(a)){var d=v.qb(a,c);d!==b&&(sg(this,d,a),v.Ka(a,c,b),null===this.be(b)&&rg(this,b,a),ag(this,"nodeParentKey",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
v.defineProperty(Qf,{wK:"parentLinkCategoryProperty"},function(){return this.hm},function(a){var b=this.hm;b!==a&&(mg(a,Qf,"parentLinkCategoryProperty"),this.hm=a,this.h("parentLinkCategoryProperty",b,a))});Qf.prototype.getParentLinkCategoryForNodeData=Qf.prototype.YG=function(a){if(null===a)return"";var b=this.hm;if(""===b)return"";b=v.qb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v.k("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
Qf.prototype.setParentLinkCategoryForNodeData=Qf.prototype.xI=function(a,b){v.j(b,"string",Qf,"setParentLinkCategoryForNodeData:cat");if(null!==a){var c=this.hm;if(""!==c)if(this.Je(a)){var d=v.qb(a,c);void 0===d&&(d="");d!==b&&(v.Ka(a,c,b),ag(this,"parentLinkCategory",Af,c,a,d,b),"string"===typeof c&&this.Hb(a,c))}else v.Ka(a,c,b)}};
Qf.prototype.copyNodeData=function(a){if(null===a)return null;a=F.prototype.copyNodeData.call(this,a);this.Gm||""===this.Wg||void 0===v.qb(a,this.Wg)||v.Ka(a,this.Wg,void 0);return a};
Qf.prototype.setDataProperty=function(a,b,c){if(this.Je(a))if(b===this.yl)this.ox(a,c);else{if(b===this.Vm){this.lx(a,c);return}if(b===this.vp){this.qh(a,c);return}}else!wg&&a instanceof G&&(wg=!0,v.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),v.trace("  Is that really your intent?"));var d=v.qb(a,b);d!==c&&(v.Ka(a,b,c),this.aA(a,b,d,c))};g=Qf.prototype;g.Pt=function(a,b){F.prototype.Pt.call(this,a,b);for(var c=this.uc.i;c.next();)this.hA(c.value,a,b)};
g.hA=function(a,b,c){if(this.Nm(a)===b){var d=this.Wg;v.Ka(a,d,c);ag(this,"nodeParentKey",Af,d,a,b,c);"string"===typeof d&&this.Hb(a,d)}};g.yp=function(a){F.prototype.yp.call(this,a);a=this.gb(a);var b=qg(this,a);if(null!==b){for(var c=new I(Object),b=b.i;b.next();){var d=b.value;if(this.Je(d)&&this.Nm(d)===a){var e=this.Wg;ag(this,"nodeParentKey",Af,e,d,a,a);"string"===typeof e&&this.Hb(d,e);c.add(d)}}for(c=c.i;c.next();)sg(this,a,c.value)}};
g.xp=function(a){F.prototype.xp.call(this,a);var b=this.Nm(a),b=this.Um(b);null===this.be(b)&&rg(this,b,a)};g.gu=function(a){F.prototype.gu.call(this,a);var b=this.Nm(a);sg(this,b,a)};
function Ag(a,b,c){v.dc(this);this.D=!1;void 0===a?a="":v.j(a,"string",Ag,"constructor:targetprop");void 0===b?b=a:v.j(b,"string",Ag,"constructor:sourceprop");void 0===c?c=null:null!==c&&v.j(c,"function",Ag,"constructor:conv");this.GC=-1;this.pg=null;this.Bo=a;this.Ao=this.zs=0;this.Uv=null;this.Xq=!1;this.ro=b;this.gq=c;this.tr=Bg;this.$p=null}v.ea("Binding",Ag);
Ag.prototype.copy=function(){var a=new Ag;a.Bo=this.Bo;a.zs=this.zs;a.Ao=this.Ao;a.Uv=this.Uv;a.Xq=this.Xq;a.ro=this.ro;a.gq=this.gq;a.tr=this.tr;a.$p=this.$p;return a};var Bg;Ag.OneWay=Bg=v.p(Ag,"OneWay",1);var Cg;Ag.TwoWay=Cg=v.p(Ag,"TwoWay",2);Ag.parseEnum=function(a,b){v.j(a,"function",Ag,"parseEnum:ctor");v.pb(b,a,Ag,"parseEnum:defval");return function(c){c=ra(a,c);return null===c?b:c}};var Ef;
Ag.toString=Ef=function(a){var b=a;v.Ta(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID)));return void 0===b?"undefined":null===b?"null":b.toString()};Ag.prototype.toString=function(){return"Binding("+this.ux+":"+this.bF+(-1!==this.El?" "+this.El:"")+" "+this.mode.name+")"};Ag.prototype.freeze=function(){this.D=!0;return this};
Ag.prototype.Pa=function(){this.D=!1;return this};v.defineProperty(Ag,{El:null},function(){return this.GC},function(a){this.D&&v.ka(this);v.j(a,"number",Ag,"targetId");this.GC=a});v.defineProperty(Ag,{ux:"targetProperty"},function(){return this.Bo},function(a){this.D&&v.ka(this);v.j(a,"string",Ag,"targetProperty");this.Bo=a});v.defineProperty(Ag,{bn:"sourceName"},function(){return this.Uv},function(a){this.D&&v.ka(this);null!==a&&v.j(a,"string",Ag,"sourceName");this.Uv=a;null!==a&&(this.Xq=!1)});
v.defineProperty(Ag,{yt:"isToModel"},function(){return this.Xq},function(a){this.D&&v.ka(this);v.j(a,"boolean",Ag,"isToModel");this.Xq=a});v.defineProperty(Ag,{bF:"sourceProperty"},function(){return this.ro},function(a){this.D&&v.ka(this);v.j(a,"string",Ag,"sourceProperty");this.ro=a});v.defineProperty(Ag,{vG:"converter"},function(){return this.gq},function(a){this.D&&v.ka(this);null!==a&&v.j(a,"function",Ag,"converter");this.gq=a});
v.defineProperty(Ag,{kG:"backConverter"},function(){return this.$p},function(a){this.D&&v.ka(this);null!==a&&v.j(a,"function",Ag,"backConverter");this.$p=a});v.defineProperty(Ag,{mode:"mode"},function(){return this.tr},function(a){this.D&&v.ka(this);v.pb(a,Ag,Ag,"mode");this.tr=a});Ag.prototype.makeTwoWay=Ag.prototype.IH=function(a){void 0===a&&(a=null);null!==a&&v.j(a,"function",Ag,"makeTwoWay");this.mode=Cg;this.kG=a;return this};
Ag.prototype.ofObject=Ag.prototype.Uw=function(a){void 0===a&&(a="");this.bn=a;this.yt=!1;return this};Ag.prototype.ofModel=function(){this.bn=null;this.yt=!0;return this};Ag.prototype.ofData=function(){this.bn=null;this.yt=!1;return this};function Dg(a,b,c){a=a.bn;var d=null;return d=null===a||""===a?b:"."===a?c:".."===a?c.R:b.ce(a)}
Ag.prototype.updateTarget=Ag.prototype.sF=function(a,b,c){var d=this.ro;if(void 0===c||""===d||d===c){c=this.Bo;var e=this.gq;if(null===e&&""===c)v.trace("Binding error: target property is the empty string: "+this.toString());else{var f=b;""!==d&&(f=v.qb(b,d));if(void 0!==f)if(null===e)""!==c&&v.Ka(a,c,f);else try{if(""!==c){var h=e(f,a);v.Ka(a,c,h)}else e(f,a)}catch(k){}}}};
Ag.prototype.updateSource=Ag.prototype.vx=function(a,b,c,d){void 0===d&&(d=null);if(this.tr===Cg){var e=this.Bo;if(void 0===c||e===c){c=this.ro;var f=this.$p;if(null!==f||""!==c){var h=a;""!==e&&(h=v.qb(a,e));if(void 0!==h)if(a=null!==d?d.ba:null,null===f)null!==a?a.setDataProperty(b,c,h):v.Ka(b,c,h);else try{if(""!==c){var k=f(h,b,a);null!==a?a.setDataProperty(b,c,k):v.Ka(b,c,k)}else f(h,b,a)}catch(l){}}}}};function Rf(){this.zF=(new I(zf)).freeze();this.Ob="";this.NB=!1}v.ea("Transaction",Rf);
Rf.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.Of.count.toString()+(this.tt?"":", incomplete");if(void 0!==a&&0<a){a=this.Of.count;for(var c=0;c<a;c++){var d=this.Of.da(c);null!==d&&(b+="\n  "+d.toString())}}return b};Rf.prototype.clear=Rf.prototype.clear=function(){var a=this.Of;a.Pa();for(var b=a.count-1;0<=b;b--){var c=a.da(b);null!==c&&c.clear()}a.clear();a.freeze()};Rf.prototype.canUndo=Rf.prototype.canUndo=function(){return this.tt};
Rf.prototype.undo=Rf.prototype.undo=function(){if(this.canUndo())for(var a=this.Of.count-1;0<=a;a--){var b=this.Of.da(a);null!==b&&b.undo()}};Rf.prototype.canRedo=Rf.prototype.canRedo=function(){return this.tt};Rf.prototype.redo=Rf.prototype.redo=function(){if(this.canRedo())for(var a=this.Of.count,b=0;b<a;b++){var c=this.Of.da(b);null!==c&&c.redo()}};v.u(Rf,{Of:"changes"},function(){return this.zF});v.defineProperty(Rf,{name:"name"},function(){return this.Ob},function(a){this.Ob=a});
v.defineProperty(Rf,{tt:"isComplete"},function(){return this.NB},function(a){this.NB=a});function Ff(){this.Cy=new J(F);this.Se=!1;this.DF=(new I(Rf)).freeze();this.Pg=-1;this.bC=999;this.ui=!1;this.Lu=null;this.Xk=0;this.ZA=!1;this.Ug=(new I("string")).freeze();this.ho=new I("number");this.jy=!0;this.wy=!1}v.ea("UndoManager",Ff);
Ff.prototype.toString=function(a){for(var b="UndoManager "+this.Vi+"<"+this.history.count+"<="+this.sE,b=b+"[",c=this.xE.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.xE.da(d);b+="]";if(void 0!==a&&0<a)for(c=this.history.count,d=0;d<c;d++)b+="\n "+this.history.da(d).toString(a-1);return b};
Ff.prototype.clear=Ff.prototype.clear=function(){var a=this.history;a.Pa();for(var b=a.count-1;0<=b;b--){var c=a.da(b);null!==c&&c.clear()}a.clear();this.Pg=-1;a.freeze();this.ui=!1;this.Lu=null;this.Xk=0;this.Ug.Pa();this.Ug.clear();this.Ug.freeze();this.ho.clear()};Ff.prototype.addModel=Ff.prototype.cG=function(a){this.Cy.add(a)};Ff.prototype.removeModel=Ff.prototype.hI=function(a){this.Cy.remove(a)};
Ff.prototype.startTransaction=Ff.prototype.Qb=function(a){void 0===a&&(a="");null===a&&(a="");if(this.ib)return!1;!0===this.jy&&(this.jy=!1,this.Xk++,this.$c("StartingFirstTransaction",a,this.Qi),0<this.Xk&&this.Xk--);this.isEnabled&&(this.Ug.Pa(),this.Ug.add(a),this.Ug.freeze(),null===this.Qi?this.ho.add(0):this.ho.add(this.Qi.Of.count));this.Xk++;var b=1===this.th;b&&this.$c("StartedTransaction",a,this.Qi);return b};
Ff.prototype.commitTransaction=Ff.prototype.wd=function(a){void 0===a&&(a="");return Eg(this,!0,a)};Ff.prototype.rollbackTransaction=Ff.prototype.zp=function(){return Eg(this,!1,"")};
function Eg(a,b,c){if(a.ib)return!1;a.ez&&1>a.th&&v.trace("Ending transaction without having started a transaction: "+c);var d=1===a.th;d&&b&&a.isEnabled&&a.$c("CommittingTransaction",c,a.Qi);var e=0;if(0<a.th&&(a.Xk--,a.isEnabled)){var f=a.Ug.count;0<f&&(""===c&&(c=a.Ug.da(0)),a.Ug.Pa(),a.Ug.Vc(f-1),a.Ug.freeze());f=a.ho.count;0<f&&(e=a.ho.da(f-1),a.ho.Vc(f-1))}f=a.Qi;if(d){if(b){a.wy=!1;if(a.isEnabled&&null!==f){b=f;b.tt=!0;b.name=c;d=a.history;d.Pa();for(e=d.count-1;e>a.Vi;e--)f=d.da(e),null!==
f&&f.clear(),d.Vc(e),a.wy=!0;e=a.sE;0===e&&(e=1);0<e&&d.count>=e&&(f=d.da(0),null!==f&&f.clear(),d.Vc(0),a.Pg--);d.add(b);a.Pg++;d.freeze();f=b}a.$c("CommittedTransaction",c,f)}else{a.ui=!0;try{a.isEnabled&&null!==f&&(f.tt=!0,f.undo())}finally{a.$c("RolledBackTransaction",c,f),a.ui=!1}null!==f&&f.clear()}a.Lu=null;return!0}if(a.isEnabled&&!b&&null!==f){a=e;c=f.Of;for(b=c.count-1;b>=a;b--)d=c.da(b),null!==d&&d.undo(),c.Pa(),c.Vc(b);c.freeze()}return!1}
Ff.prototype.canUndo=Ff.prototype.canUndo=function(){if(!this.isEnabled||0<this.th||this.ib)return!1;var a=this.mF;return null!==a&&a.canUndo()?!0:!1};Ff.prototype.undo=Ff.prototype.undo=function(){if(this.canUndo()){var a=this.mF;try{this.$c("StartingUndo","Undo",a),this.ui=!0,this.Pg--,a.undo()}catch(b){v.trace("undo error: "+b.toString())}finally{this.ui=!1,this.$c("FinishedUndo","Undo",a)}}};
Ff.prototype.canRedo=Ff.prototype.canRedo=function(){if(!this.isEnabled||0<this.th||this.ib)return!1;var a=this.lF;return null!==a&&a.canRedo()?!0:!1};Ff.prototype.redo=Ff.prototype.redo=function(){if(this.canRedo()){var a=this.lF;try{this.$c("StartingRedo","Redo",a),this.ui=!0,this.Pg++,a.redo()}catch(b){v.trace("redo error: "+b.toString())}finally{this.ui=!1,this.$c("FinishedRedo","Redo",a)}}};
Ff.prototype.$c=function(a,b,c){void 0===c&&(c=null);var d=new zf;d.wc=Bf;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.RH;a.next();)b=a.value,d.ba=b,b.ow(d)};Ff.prototype.handleChanged=Ff.prototype.VD=function(a){if(this.isEnabled&&!this.ib&&!this.skipsEvent(a)){var b=this.Qi;null===b&&(this.Lu=b=new Rf);var c=a.copy(),b=b.Of;b.Pa();b.add(c);b.freeze();this.ez&&0>=this.th&&!this.jy&&(a=a.g,null!==a&&!1===a.Qm||v.trace("Change not within a transaction: "+c.toString()))}};
Ff.prototype.skipsEvent=function(a){if(null===a||0>a.wc.value)return!0;a=a.object;if(a instanceof G){if(a=a.layer,null!==a&&a.Gc)return!0}else if(a instanceof Wf&&a.Gc)return!0;return!1};v.u(Ff,{RH:"models"},function(){return this.Cy.i});v.defineProperty(Ff,{isEnabled:"isEnabled"},function(){return this.Se},function(a){this.Se=a});v.u(Ff,{mF:"transactionToUndo"},function(){return 0<=this.Vi&&this.Vi<=this.history.count-1?this.history.da(this.Vi):null});
v.u(Ff,{lF:"transactionToRedo"},function(){return this.Vi<this.history.count-1?this.history.da(this.Vi+1):null});v.u(Ff,{ib:"isUndoingRedoing"},function(){return this.ui});v.u(Ff,{history:"history"},function(){return this.DF});v.defineProperty(Ff,{sE:"maxHistoryLength"},function(){return this.bC},function(a){this.bC=a});v.u(Ff,{Vi:"historyIndex"},function(){return this.Pg});v.u(Ff,{Qi:"currentTransaction"},function(){return this.Lu});v.u(Ff,{th:"transactionLevel"},function(){return this.Xk});
v.u(Ff,{hE:"isInTransaction"},function(){return 0<this.Xk});v.defineProperty(Ff,{ez:"checksTransactionLevel"},function(){return this.ZA},function(a){this.ZA=a});v.u(Ff,{xE:"nestedTransactionNames"},function(){return this.Ug});function Yf(){0<arguments.length&&v.cd(Yf);v.dc(this);this.W=null;this.bB=!1;this.uB=this.cB=!0;this.eB=this.fB=this.vB=this.gB=!1;this.Qk=this.RA=null;this.ZC=1.05;this.sB=1;this.xy=NaN;this.ZB=null;this.Xy=NaN;this.Wy=bd;this.Hi=null}v.ea("CommandHandler",Yf);
var Fg=null,Gg="";Yf.prototype.toString=function(){return"CommandHandler"};v.u(Yf,{g:"diagram"},function(){return this.W});Yf.prototype.Mc=function(a){this.W=a};
Yf.prototype.doKeyDown=function(){var a=this.g;if(null!==a){var b=a.O,c=v.bk?b.Ft:b.control,d=b.shift,e=b.alt,f=b.key;!c||"C"!==f&&"Insert"!==f?c&&"X"===f||d&&"Del"===f?this.canCutSelection()&&this.cutSelection():c&&"V"===f||d&&"Insert"===f?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===f||e&&d&&"Backspace"===f?this.canRedo()&&this.redo():c&&"Z"===f||e&&"Backspace"===f?this.canUndo()&&this.undo():"Del"===f||"Backspace"===f?this.canDeleteSelection()&&this.deleteSelection():c&&"A"===f?this.canSelectAll()&&
this.selectAll():"Esc"===f?this.canStopCommand()&&this.stopCommand():"Up"===f?a.pe&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===f?a.pe&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===f?a.oe&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===f?a.oe&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===f?d&&a.oe?a.scroll("page","left"):a.pe&&a.scroll("page","up"):"PageDown"===f?d&&a.oe?a.scroll("page","right"):a.pe&&a.scroll("page","down"):"Home"===
f?c&&a.pe?a.scroll("document","up"):!c&&a.oe&&a.scroll("document","left"):"End"===f?c&&a.pe?a.scroll("document","down"):!c&&a.oe&&a.scroll("document","right"):" "===f?this.canScrollToPart()&&this.scrollToPart():"Subtract"===f?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===f?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===f?this.canResetZoom()&&this.resetZoom():d&&"Z"===f?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===f?this.canGroupSelection()&&this.groupSelection():c&&d&&"G"===f?this.canUngroupSelection()&&
this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection()}};Yf.prototype.doKeyUp=function(){var a=this.g;null!==a&&(a.O.bubbles=!0)};Yf.prototype.stopCommand=function(){var a=this.g;if(null!==a){var b=a.Wa;b instanceof Hg&&a.of&&a.pw();null!==b&&b.doCancel()}};Yf.prototype.canStopCommand=function(){return!0};
Yf.prototype.selectAll=function(){var a=this.g;if(null!==a){a.pa();try{a.$b="wait";a.Ba("ChangingSelection");for(var b=a.ek;b.next();)b.value.hb=!0;for(var c=a.Bg;c.next();)c.value.hb=!0;for(var d=a.links;d.next();)d.value.hb=!0}finally{a.Ba("ChangedSelection"),a.$b=""}}};Yf.prototype.canSelectAll=function(){var a=this.g;return null!==a&&a.of};
Yf.prototype.deleteSelection=function(){var a=this.g;if(null!==a&&!a.Ba("SelectionDeleting",a.selection))try{a.$b="wait";a.Qb("Delete");a.Ba("ChangingSelection");for(var b=new J(R),c=a.selection.i;c.next();)Ig(b,c.value,!0,this.GG?Infinity:0,this.DD,function(a){return a.canDelete()});a.gA(b,!0);a.Ba("SelectionDeleted",b)}finally{a.Ba("ChangedSelection"),a.wd("Delete"),a.$b=""}};Yf.prototype.canDeleteSelection=function(){var a=this.g;return null===a||a.ab||a.vf||!a.xm||0===a.selection.count?!1:!0};
function Ig(a,b,c,d,e,f){void 0===f&&(f=null);if(!(a.contains(b)||null!==f&&!f(b)||b instanceof Vg))if(a.add(b),b instanceof S){if(c&&b instanceof V)for(var h=b.Ic;h.next();)Ig(a,h.value,c,d,e,f);if(e)for(h=b.te;h.next();){var k=h.value;if(!a.contains(k)){var l=k.T,m=k.Z;null!==l&&a.contains(l)&&null!==m&&a.contains(m)?Ig(a,k,c,d,e,f):null!==l&&null!==m||Ig(a,k,c,d,e,f)}}if(1<d)for(b=b.MD();b.next();)Ig(a,b.value,c,d-1,e,f)}else if(b instanceof W)for(h=b.Sf;h.next();)Ig(a,h.value,c,d,e,f)}
Yf.prototype.Oo=function(a,b,c){var d=new na(R,R);for(a=a.i;a.next();)Wg(this,a.value,b,d,c);if(null!==b){c=b.ba;a=!1;null!==b.Za.ae&&(a=b.Za.ae.Si);for(var e=new J(W),f=new na(W,W),h=d.i;h.next();){var k=h.value;if(k instanceof W){var l=k;a||null!==l.T&&null!==l.Z||e.add(l)}else if(c instanceof Qf&&k instanceof S&&null!==k.data){var l=c,m=k,k=h.key,n=k.ml();null!==n&&(n=d.ja(n),null!==n?(l.qh(m.data,l.gb(n.data)),l=b.Pf(m.data),k=k.Vo(),null!==k&&null!==l&&f.add(k,l)):l.qh(m.data,void 0))}}0<e.count&&
b.gA(e,!1);if(0<f.count)for(c=f.i;c.next();)d.add(c.key,c.value)}if(null!==b&&(b=b.ba,c=b.eG,null!==c)){var p=new na;d.each(function(a){null!==a.key.data&&p.add(a.key.data,a.value.data)});c(p,b,this.g.ba)}for(b=d.i;b.next();)b.value.Hb();return d};
function Wg(a,b,c,d,e){if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return d.ja(b);var f=null,h=b.data;if(null!==h&&null!==c){var k=c.ba;b instanceof W?k instanceof Q&&(h=k.sw(h),v.Ta(h)&&(k.Os(h),f=c.Pf(h))):(h=k.copyNodeData(h),v.Ta(h)&&(k.Zk(h),f=c.eh(h)))}else Xg(b),f=b.copy(),null!==f&&(null!==c?c.add(f):null!==h&&a.wG&&(k=a.g.ba,h=f instanceof W&&k instanceof Q?k.sw(h):k.copyNodeData(h),v.Ta(h)&&(f.data=h)));if(!(f instanceof R))return null;f.hb=!1;f.hh=!1;d.add(b,f);if(b instanceof
S){for(h=b.te;h.next();){k=h.value;if(k.T===b){var l=d.ja(k);null!==l&&(l.T=f)}k.Z===b&&(l=d.ja(k),null!==l&&(l.Z=f))}if(b instanceof V&&f instanceof V)for(h=f,b=b.Ic;b.next();)k=Wg(a,b.value,c,d,e),k instanceof W||null===k||(k.Oa=h)}else if(b instanceof W)for(h=b.T,null!==h&&(h=d.ja(h),null!==h&&(f.T=h)),h=b.Z,null!==h&&(h=d.ja(h),null!==h&&(f.Z=h)),b=b.Sf;b.next();)h=Wg(a,b.value,c,d,e),null!==h&&(h.Ad=f);return f}
Yf.prototype.copySelection=function(){var a=this.g;if(null!==a){for(var b=new J(R),a=a.selection.i;a.next();)Ig(b,a.value,!0,this.zG?Infinity:0,this.xG,function(a){return a.canCopy()});this.copyToClipboard(b)}};Yf.prototype.canCopySelection=function(){var a=this.g;return null!==a&&a.Vj&&a.$y&&0!==a.selection.count?!0:!1};Yf.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};
Yf.prototype.canCutSelection=function(){var a=this.g;return null!==a&&!a.ab&&!a.vf&&a.Vj&&a.xm&&a.$y&&0!==a.selection.count?!0:!1};Yf.prototype.copyToClipboard=function(a){var b=this.g;if(null!==b){var c=null;if(null===a)Fg=null,Gg="";else{var c=b.ba,d=!1,e=!1,f=null;try{if(c instanceof Qf){var h=c,d=h.Gm;h.Gm=this.wD}c instanceof Q&&(h=c,e=h.Fm,h.Fm=this.vD);f=b.Oo(a,null,!0)}finally{c instanceof Qf&&(c.Gm=d),c instanceof Q&&(c.Fm=e),c=new I(R),c.Tc(f),Fg=c,Gg=b.ba.gl}}b.Ba("ClipboardChanged",c)}};
Yf.prototype.pasteFromClipboard=function(){var a=new J(R),b=Fg;if(null===b)return a;var c=this.g;if(null===c||Gg!==c.ba.gl)return a;var d=c.ba,e=!1,f=!1,h=null;try{if(d instanceof Qf){var k=d,e=k.Gm;k.Gm=this.wD}d instanceof Q&&(k=d,f=k.Fm,k.Fm=this.vD);h=c.Oo(b,c,!1)}finally{for(d instanceof Qf&&(d.Gm=e),d instanceof Q&&(d.Fm=f),b=h.i;b.next();)c=b.value,d=b.key,c.location.G()||(d.location.G()?c.location=d.location:!c.position.G()&&d.position.G()&&(c.position=d.position)),a.add(c)}return a};
Yf.prototype.pasteSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.$b="wait";b.Qb("Paste");b.Ba("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Yg(b);for(var d=c.i;d.next();)d.value.hb=!0;b.Ba("ChangedSelection");if(null!==a){var e=b.computePartsBounds(b.selection);if(e){var f=b.Za.ae;null===f&&(f=new Zg,f.Mc(b));var h=f.computeEffectiveCollection(b.selection);f.moveParts(h,new z(a.x-e.na,a.y-e.ua),!1)}}b.Ba("ClipboardPasted",c)}finally{b.wd("Paste"),b.$b=
""}};Yf.prototype.canPasteSelection=function(){var a=this.g;return null===a||a.ab||a.vf||!a.Ho||!a.$y||null===Fg||Gg!==a.ba.gl?!1:!0};Yf.prototype.undo=function(){var a=this.g;null!==a&&a.la.undo()};Yf.prototype.canUndo=function(){var a=this.g;return null===a||a.ab||a.vf?!1:a.gD&&a.la.canUndo()};Yf.prototype.redo=function(){var a=this.g;null!==a&&a.la.redo()};Yf.prototype.canRedo=function(){var a=this.g;return null===a||a.ab||a.vf?!1:a.gD&&a.la.canRedo()};
Yf.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.xx);v.We(a,Yf,"decreaseZoom:factor");var b=this.g;null!==b&&b.cl===$g&&(a*=b.scale,a<b.jh||a>b.ih||(b.scale=a))};Yf.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.xx);v.We(a,Yf,"canDecreaseZoom:factor");var b=this.g;if(null===b||b.cl!==$g)return!1;a*=b.scale;return a<b.jh||a>b.ih?!1:b.nw};
Yf.prototype.increaseZoom=function(a){void 0===a&&(a=this.xx);v.We(a,Yf,"increaseZoom:factor");var b=this.g;null!==b&&b.cl===$g&&(a*=b.scale,a<b.jh||a>b.ih||(b.scale=a))};Yf.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.xx);v.We(a,Yf,"canIncreaseZoom:factor");var b=this.g;if(null===b||b.cl!==$g)return!1;a*=b.scale;return a<b.jh||a>b.ih?!1:b.nw};Yf.prototype.resetZoom=function(a){void 0===a&&(a=this.vw);v.We(a,Yf,"resetZoom:newscale");var b=this.g;null===b||a<b.jh||a>b.ih||(b.scale=a)};
Yf.prototype.canResetZoom=function(a){void 0===a&&(a=this.vw);v.We(a,Yf,"canResetZoom:newscale");var b=this.g;return null===b||a<b.jh||a>b.ih?!1:b.nw};Yf.prototype.zoomToFit=function(){var a=this.g;if(null!==a){var b=a.scale,c=a.position;b===this.Xy&&!isNaN(this.xy)&&a.$d.K(this.Wy)?(a.scale=this.xy,a.position=this.ZB,this.Xy=NaN,this.Wy=bd):(this.xy=b,this.ZB=c.copy(),a.zoomToFit(),this.Xy=a.scale,this.Wy=a.$d.copy())}};Yf.prototype.canZoomToFit=function(){var a=this.g;return null===a?!1:a.nw};
Yf.prototype.scrollToPart=function(a){void 0===a&&(a=null);null!==a&&v.A(a,R,Yf,"part");var b=this.g;if(null!==b){if(null===a){try{null!==this.Hi&&(this.Hi.next()?a=this.Hi.value:this.Hi=null)}catch(c){this.Hi=null}null===a&&(0<b.Om.count?this.Hi=b.Om.i:0<b.selection.count&&(this.Hi=b.selection.i),null!==this.Hi&&this.Hi.next()&&(a=this.Hi.value))}if(null!==a){var d=b.Na;d.Xm("Scroll To Part");var e=b.position.copy();b.lG(a.U);e.Fc(b.position)&&d.$h()}}};
Yf.prototype.canScrollToPart=function(a){void 0===a&&(a=null);null!==a&&v.A(a,R,Yf,"part");a=this.g;return null===a||0===a.selection.count&&0===a.Om.count?!1:a.oe&&a.pe};Yf.prototype.collapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.Qb("Collapse Tree");b.Na.Xm("Collapse Tree");var c=new I(S);if(null!==a&&a.md)a.collapseTree(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof S&&(a=e,a.md&&(a.collapseTree(),c.add(a)))}b.Ba("TreeCollapsed",c)}finally{b.wd("Collapse Tree")}};
Yf.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.ab)return!1;if(null!==a){if(!a.md)return!1;if(0<a.Ew().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof S&&b.md&&0<b.Ew().count)return!0;return!1};
Yf.prototype.expandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.Qb("Expand Tree");b.Na.Xm("Expand Tree");var c=new I(S);if(null===a||a.md)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof S&&(a=e,a.md||(a.expandTree(),c.add(a)))}else a.expandTree(),c.add(a);b.Ba("TreeExpanded",c)}finally{b.wd("Expand Tree")}};
Yf.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.ab)return!1;if(null!==a){if(a.md)return!1;if(0<a.Ew().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof S&&!b.md&&0<b.Ew().count)return!0;return!1};
Yf.prototype.groupSelection=function(){var a=this.g;if(null!==a){var b=a.ba;if(b instanceof Q){var c=this.hD;if(null!==c){var d=null;try{a.$b="wait";a.Qb("Group");a.Ba("ChangingSelection");for(var e=new I(R),f=a.selection.i;f.next();){var h=f.value;h.Pd()&&h.canGroup()&&e.add(h)}for(var k=new I(R),l=e.i;l.next();){for(var m=l.value,f=!1,n=e.i;n.next();)if(m.Yh(n.value)){f=!0;break}f||k.add(m)}if(0<k.count){var p=k.first().Oa;if(null!==p)for(;null!==p;){for(var e=!1,q=k.i;q.next();)if(!q.value.Yh(p)){e=
!0;break}if(e)p=p.Oa;else break}if(c instanceof V)Xg(c),d=c.copy(),null!==d&&a.add(d);else if(b.Fz(c)){var r=b.copyNodeData(c);v.Ta(r)&&(b.Zk(r),d=a.Dw(r))}if(null!==d){null!==p&&this.isValidMember(p,d)&&(d.Oa=p);for(var s=k.i;s.next();){var t=s.value;this.isValidMember(d,t)&&(t.Oa=d)}a.select(d)}}a.Ba("ChangedSelection");a.Ba("SelectionGrouped",d)}finally{a.wd("Group"),a.$b=""}}}}};
Yf.prototype.canGroupSelection=function(){var a=this.g;if(null===a||a.ab||a.vf||!a.Ho||!a.iw||!(a.ba instanceof Q)||null===this.hD)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Pd()&&b.canGroup())return!0}return!1};function ah(a){var b=v.jb();for(a=a.i;a.next();){var c=a.value;c instanceof W||b.push(c)}a=new J(R);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],f=!0,h=0;h<c;h++)if(e.Yh(b[h])){f=!1;break}f&&a.add(e)}v.sa(b);return a}
Yf.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof W)return!1;if(null!==a){if(a===b||a.Yh(b))return!1;var c=a.Pz;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}c=this.Pz;return null!==c?c(a,b):!0};
Yf.prototype.ungroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b){var c=b.ba;if(c instanceof Q)try{b.$b="wait";b.Qb("Ungroup");b.Ba("ChangingSelection");var d=new I(V);if(null!==a)d.add(a);else for(var e=b.selection.i;e.next();){var f=e.value;f instanceof V&&(a=f,a.canUngroup()&&d.add(a))}if(0<d.count){b.pw();for(var h=d.i;h.next();){var k=h.value;k.expandSubGraph();var l=k.Oa,m=null!==l&&null!==l.data?c.gb(l.data):void 0,n=new I(R);n.Tc(k.Ic);for(var p=n.i;p.next();){var q=
p.value;q.hb=!0;if(!(q instanceof W)){var r=q.data;null!==r?c.nx(r,m):q.Oa=l}}b.remove(k)}}b.Ba("ChangedSelection");b.Ba("SelectionUngrouped",d,n)}finally{b.wd("Ungroup"),b.$b=""}}};Yf.prototype.canUngroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.ab||b.vf||!b.xm||!b.mw||!(b.ba instanceof Q))return!1;if(null!==a){if(a.canUngroup())return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof V&&b.canUngroup())return!0;return!1};
Yf.prototype.addTopLevelParts=function(a,b){for(var c=!0,d=ah(a).i;d.next();){var e=d.value;null!==e.Oa&&(!b||this.isValidMember(null,e)?e.Oa=null:c=!1)}return c};
Yf.prototype.collapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.Qb("Collapse SubGraph");b.Na.Xm("Collapse SubGraph");var c=new I(V);if(null!==a&&a.fe)a.collapseSubGraph(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof V&&(a=e,a.fe&&(a.collapseSubGraph(),c.add(a)))}b.Ba("SubGraphCollapsed",c)}finally{b.wd("Collapse SubGraph")}};
Yf.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.ab)return!1;if(null!==a)return a.fe?!0:!1;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof V&&b.fe)return!0;return!1};
Yf.prototype.expandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.Qb("Expand SubGraph");b.Na.Xm("Expand SubGraph");var c=new I(V);if(null===a||a.fe)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof V&&(a=e,a.fe||(a.expandSubGraph(),c.add(a)))}else a.expandSubGraph(),c.add(a);b.Ba("SubGraphExpanded",c)}finally{b.wd("Expand SubGraph")}};
Yf.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.ab)return!1;if(null!==a)return a.fe?!1:!0;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof V&&!b.fe)return!0;return!1};
Yf.prototype.editTextBlock=function(a){void 0===a&&(a=null);null!==a&&v.A(a,bh,Yf,"editTextBlock");var b=this.g;if(null!==b){var c=b.Za.vA;if(null!==c){if(null===a){a=null;for(var d=b.selection.i;d.next();){var e=d.value;if(e.canEdit()){a=e;break}}if(null===a)return;a=a.dt(function(a){return a instanceof bh&&a.pz})}null!==a&&(b.Wa=null,c.ze=a,b.Wa=c)}}};
Yf.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);null!==a&&v.A(a,bh,Yf,"canEditTextBlock");var b=this.g;if(null===b||b.ab||b.vf||!b.lw||null===b.Za.vA)return!1;if(null!==a){if(a=a.Y,null!==a&&a.canEdit())return!0}else for(b=b.selection.i;b.next();)if(a=b.value,a.canEdit()&&(a=a.dt(function(a){return a instanceof bh&&a.pz}),null!==a))return!0;return!1};
Yf.prototype.showContextMenu=function(a){var b=this.g;if(null!==b){var c=b.Za.hz;if(null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.first():b),a=c.findObjectWithContextMenu(a),null!==a)){var d=new xf,e=null;a instanceof G?e=a.Xa(zb):b.sH||(e=b.rb,e=new z(e.x+e.width/2,e.y+e.height/2));null!==e&&(d.g=b,d.jf=b.nF(e),d.ca=e,d.left=!1,d.right=!0,d.up=!0,b.O=d);b.Wa=c;ch(c,!1,a)}}};
Yf.prototype.canShowContextMenu=function(a){var b=this.g;if(null===b)return!1;var c=b.Za.hz;if(null===c)return!1;void 0===a&&(a=0<b.selection.count?b.selection.first():b);return null===c.findObjectWithContextMenu(a)?!1:!0};v.defineProperty(Yf,{wG:"copiesClipboardData"},function(){return this.bB},function(a){v.j(a,"boolean",Yf,"copiesClipboardData");this.bB=a});
v.defineProperty(Yf,{xG:"copiesConnectedLinks"},function(){return this.cB},function(a){v.j(a,"boolean",Yf,"copiesConnectedLinks");this.cB=a});v.defineProperty(Yf,{DD:"deletesConnectedLinks"},function(){return this.uB},function(a){v.j(a,"boolean",Yf,"deletesConnectedLinks");this.uB=a});v.defineProperty(Yf,{zG:"copiesTree"},function(){return this.gB},function(a){v.j(a,"boolean",Yf,"copiesTree");this.gB=a});
v.defineProperty(Yf,{GG:"deletesTree"},function(){return this.vB},function(a){v.j(a,"boolean",Yf,"deletesTree");this.vB=a});v.defineProperty(Yf,{wD:"copiesParentKey"},function(){return this.fB},function(a){v.j(a,"boolean",Yf,"copiesParentKey");this.fB=a});v.defineProperty(Yf,{vD:"copiesGroupKey"},function(){return this.eB},function(a){v.j(a,"boolean",Yf,"copiesGroupKey");this.eB=a});
v.defineProperty(Yf,{hD:"archetypeGroupData"},function(){return this.RA},function(a){null!==a&&v.A(a,Object,Yf,"archetypeGroupData");var b=this.g;null!==b&&(b=b.ba,b instanceof Q&&(a instanceof V||b.Fz(a)||v.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)));this.RA=a});v.defineProperty(Yf,{Pz:"memberValidation"},function(){return this.Qk},function(a){null!==a&&v.j(a,"function",Yf,"memberValidation");this.Qk=a});
v.defineProperty(Yf,{vw:"defaultScale"},function(){return this.sB},function(a){v.We(a,Yf,"defaultScale");0<a||v.k("defaultScale must be larger than zero, not: "+a);this.sB=a});v.defineProperty(Yf,{xx:"zoomFactor"},function(){return this.ZC},function(a){v.We(a,Yf,"zoomFactor");1<a||v.k("zoomFactor must be larger than 1.0, not: "+a);this.ZC=a});function Xf(){0<arguments.length&&v.cd(Xf);v.dc(this);this.W=null;this.Ob="";this.Se=!0;this.LB=!1;this.VC=null;this.ew=-1}v.ea("Tool",Xf);
Xf.prototype.Mc=function(a){this.W=a};Xf.prototype.toString=function(){return""!==this.name?this.name+" Tool":v.af(Object.getPrototypeOf(this))};Xf.prototype.updateAdornments=function(){};Xf.prototype.canStart=function(){return this.isEnabled};Xf.prototype.doStart=function(){};Xf.prototype.doActivate=function(){this.qa=!0};Xf.prototype.doDeactivate=function(){this.qa=!1};Xf.prototype.doStop=function(){};Xf.prototype.doCancel=function(){this.stopTool()};
Xf.prototype.stopTool=function(){var a=this.g;null!==a&&a.Wa===this&&(a.Wa=null,a.$b="")};Xf.prototype.doMouseDown=function(){!this.qa&&this.canStart()&&this.doActivate()};Xf.prototype.doMouseMove=function(){};Xf.prototype.doMouseUp=function(){this.stopTool()};Xf.prototype.doMouseWheel=function(){};Xf.prototype.canStartMultiTouch=function(){return!0};
Xf.prototype.standardPinchZoomStart=function(){var a=this.g;if(null!==a){var b=a.O.event,c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Jf[0])c=a.Jf[0],d=a.Jf[1];else return;this.doCancel();if(a.Yo("hasGestureZoom")){a.ky=!0;a.kC=a.scale;var e=dh(a),f=c,h=f.clientX-e.x,c=f.clientY-e.y,f=d,d=f.clientX-e.x,f=f.clientY-e.y;v.v(e);e=d-h;c=f-c;a.DC=Math.sqrt(e*e+c*c);b.preventDefault();b.cancelBubble=!0}}};
Xf.prototype.standardPinchZoomMove=function(){var a=this.g;if(null!==a){var b=a.O.event;this.doCancel();var c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Jf[0])c=a.Jf[0],d=a.Jf[1];else return;if(a.Yo("hasGestureZoom")&&a.ky){var e=dh(a),f=c,c=f.clientX-e.x,h=f.clientY-e.y,f=d,d=f.clientX-e.x,f=f.clientY-e.y;v.v(e);var e=d-c,k=f-h,e=Math.sqrt(e*e+k*k)/a.DC,c=new z((Math.min(d,c)+Math.max(d,c))/2,(Math.min(f,
h)+Math.max(f,h))/2),h=a.kC*e,d=a.nb;h!==a.scale&&d.canResetZoom(h)&&(e=a.Il,a.Il=c,d.resetZoom(h),a.Il=e);b.preventDefault();b.cancelBubble=!0}}};Xf.prototype.doKeyDown=function(){var a=this.g;null!==a&&"Esc"===a.O.key&&this.doCancel()};Xf.prototype.doKeyUp=function(){};Xf.prototype.startTransaction=Xf.prototype.Qb=function(a){void 0===a&&(a=this.name);this.Bf=null;var b=this.g;return null===b?!1:b.Qb(a)};
Xf.prototype.stopTransaction=Xf.prototype.gk=function(){var a=this.g;return null===a?!1:null===this.Bf?a.zp():a.wd(this.Bf)};
Xf.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.of){var b=a.O,c=a.ht(b.ca,!1);if(null!==c)if(v.bk?b.Ft:b.control){a.Ba("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Oa;null!==b&&(b.hb=!b.hb);a.Ba("ChangedSelection")}else if(b.shift){if(!c.hb){a.Ba("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Oa;null!==b&&(b.hb=!0);a.Ba("ChangedSelection")}}else{if(!c.hb){for(b=c;null!==b&&!b.canSelect();)b=b.Oa;null!==b&&a.select(b)}}else!b.left||(v.bk?b.Ft:b.control)||
b.shift||a.pw()}};Xf.prototype.standardMouseClick=function(a,b){void 0===a&&(a=null);void 0===b&&(b=function(a){return!a.layer.Gc});var c=this.g;if(null===c)return!1;var d=c.O,e=c.re(d.ca,a,b);d.ye=e;eh(e,d,c);return d.zc};
function eh(a,b,c){b.zc=!1;var d=0;b.left?d=1===b.Ge?1:2===b.Ge?2:1:b.right&&1===b.Ge&&(d=3);var e="";if(null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Ba(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Ba(e)}if(null!==a)for(;null!==a;){c=null;switch(d){case 1:c=a.click;break;case 2:c=a.at?a.at:a.click;break;case 3:c=
a.gz}if(null!==c&&(c(b,a),b.zc))break;a=a.R}else{a=null;switch(d){case 1:a=c.click;break;case 2:a=c.at?c.at:c.click;break;case 3:a=c.gz}null!==a&&a(b)}}
Xf.prototype.standardMouseOver=function(){var a=this.g;if(null!==a){var b=a.O;if(null!==b.g&&!0!==a.Na.pc){var c=a.tb;a.tb=!0;var d=a.re(b.ca,null,null);b.ye=d;var e=!1;if(d!==a.wn){var f=a.wn,h=f;a.wn=d;this.doCurrentObjectChanged(f,d);for(b.zc=!1;null!==f;){var k=f.Ht;if(null!==k){if(d===f)break;if(null!==d&&d.ul(f))break;k(b,f,d);e=!0;if(b.zc)break}f=f.R}f=h;for(b.zc=!1;null!==d;){k=d.Gt;if(null!==k){if(f===d)break;if(null!==f&&f.ul(d))break;k(b,d,f);e=!0;if(b.zc)break}d=d.R}d=a.wn}if(null!==d){f=
d;for(k="";null!==f;){k=f.cursor;if(""!==k)break;f=f.R}a.$b=k;b.zc=!1;for(f=d;null!==f;){k=f.Tz;if(null!==k&&(k(b,f),e=!0,b.zc))break;f=f.R}}else a.$b="",k=a.Tz,null!==k&&(k(b),e=!0);e&&a.ue();a.tb=c}}};Xf.prototype.doCurrentObjectChanged=function(){};
Xf.prototype.standardMouseWheel=function(){var a=this.g;if(null!==a){var b=a.O,c=b.il;if(0!==c&&a.$d.G()){var d=a.nb,e=a.Za.It;if((e===fh&&!b.shift||e===gh&&b.control)&&(0<c?d.canIncreaseZoom():d.canDecreaseZoom()))e=a.Il,a.Il=b.jf,0<c?d.increaseZoom():d.decreaseZoom(),a.Il=e,b.bubbles=!1;else if(e===fh&&b.shift||e===gh&&!b.control){var d=a.position.copy(),e=0<c?c:-c,f=b.event.deltaX,h=b.event.deltaY;void 0===f||void 0===h||0===f&&0===h||b.shift?!b.shift&&a.pe?(f=a.Ut,e=e/40*f,0<c?a.scroll("pixel",
"up",e):a.scroll("pixel","down",e)):b.shift&&a.oe&&(f=a.Tt,e=e/40*f,0<c?a.scroll("pixel","left",e):a.scroll("pixel","right",e)):(0!==f&&a.oe&&(0<f?a.scroll("pixel","left",-f):a.scroll("pixel","right",f)),0!==h&&a.pe&&(0<h?a.scroll("pixel","up",-h):a.scroll("pixel","down",h)));a.position.K(d)||(b.bubbles=!1)}}}};Xf.prototype.standardWaitAfter=function(a,b){v.j(a,"number",Xf,"standardWaitAfter:delay");this.cancelWaitAfter();var c=this,d=b.copy();this.ew=v.setTimeout(function(){c.doWaitAfter(d)},a)};
Xf.prototype.cancelWaitAfter=function(){-1!==this.ew&&v.clearTimeout(this.ew);this.ew=-1};Xf.prototype.doWaitAfter=function(){};Xf.prototype.findToolHandleAt=function(a,b){var c=this.g;if(null===c)return null;c=c.re(a,function(a){for(;null!==a&&!(a.R instanceof Vg);)a=a.R;return a});return null===c?null:c.R.fc===b?c:null};
Xf.prototype.isBeyondDragSize=function(a,b){var c=this.g;if(null===c)return!1;void 0===a&&(a=c.yc.jf);void 0===b&&(b=c.O.jf);var d=c.Za.KG,e=d.width,d=d.height;c.yc.Xi&&(e+=6,d+=6);return Math.abs(b.x-a.x)>e||Math.abs(b.y-a.y)>d};v.u(Xf,{g:"diagram"},function(){return this.W});v.defineProperty(Xf,{name:"name"},function(){return this.Ob},function(a){v.j(a,"string",Xf,"name");this.Ob=a});
v.defineProperty(Xf,{isEnabled:"isEnabled"},function(){return this.Se},function(a){v.j(a,"boolean",Xf,"isEnabled");this.Se=a});v.defineProperty(Xf,{qa:"isActive"},function(){return this.LB},function(a){v.j(a,"boolean",Xf,"isActive");this.LB=a});v.defineProperty(Xf,{Bf:"transactionResult"},function(){return this.VC},function(a){null!==a&&v.j(a,"string",Xf,"transactionResult");this.VC=a});
function Zg(){0<arguments.length&&v.cd(Zg);Xf.call(this);this.name="Dragging";this.dB=this.PB=!0;this.Qq=this.BB=!1;this.UB=!0;this.ly=(new ia(NaN,NaN)).freeze();this.my=rb;this.ny=(new z(NaN,NaN)).freeze();this.AB=!1;this.yB=this.aB=this.zB=this.lB=this.Fi=null;this.zq=this.SB=!1;this.uo=new z(NaN,NaN);this.Vv=new z;this.Yv=!1;this.OB=!0;this.Fn=100;this.lj=[];this.CF=(new J(R)).freeze()}v.Ja(Zg,Xf);v.ea("DraggingTool",Zg);
v.defineProperty(Zg,{cE:"isCopyEnabled"},function(){return this.PB},function(a){v.j(a,"boolean",Zg,"isCopyEnabled");this.PB=a});v.defineProperty(Zg,{yG:"copiesEffectiveCollection"},function(){return this.dB},function(a){v.j(a,"boolean",Zg,"copiesEffectiveCollection");this.dB=a});v.defineProperty(Zg,{LG:"dragsTree"},function(){return this.BB},function(a){v.j(a,"boolean",Zg,"dragsTree");this.BB=a});
v.defineProperty(Zg,{Kw:"isGridSnapEnabled"},function(){return this.Qq},function(a){v.j(a,"boolean",Zg,"isGridSnapEnabled");this.Qq=a});v.defineProperty(Zg,{oH:"isComplexRoutingRealtime"},function(){return this.OB},function(a){v.j(a,"boolean",Zg,"isComplexRoutingRealtime");this.OB=a});v.defineProperty(Zg,{qH:"isGridSnapRealtime"},function(){return this.UB},function(a){v.j(a,"boolean",Zg,"isGridSnapRealtime");this.UB=a});
v.defineProperty(Zg,{UD:"gridSnapCellSize"},function(){return this.ly},function(a){v.A(a,ia,Zg,"gridSnapCellSize");this.ly.K(a)||(this.ly=a=a.S())});v.defineProperty(Zg,{$G:"gridSnapCellSpot"},function(){return this.my},function(a){v.A(a,L,Zg,"gridSnapCellSpot");this.my.K(a)||(this.my=a=a.S())});v.defineProperty(Zg,{aH:"gridSnapOrigin"},function(){return this.ny},function(a){v.A(a,z,Zg,"gridSnapOrigin");this.ny.K(a)||(this.ny=a=a.S())});
v.defineProperty(Zg,{Si:"dragsLink"},function(){return this.AB},function(a){v.j(a,"boolean",Zg,"dragsLink");this.AB=a});v.defineProperty(Zg,{Im:"currentPart"},function(){return this.lB},function(a){null!==a&&v.A(a,R,Zg,"currentPart");this.lB=a});v.defineProperty(Zg,{gc:"copiedParts"},function(){return this.aB},function(a){this.aB=a});v.defineProperty(Zg,{ac:"draggedParts"},function(){return this.zB},function(a){this.zB=a});
v.u(Zg,{LJ:"draggingParts"},function(){return null!==this.gc?this.gc.ej():null!==this.ac?this.ac.ej():this.CF});v.defineProperty(Zg,{ad:"draggedLink"},function(){return this.yB},function(a){null!==a&&v.A(a,W,Zg,"draggedLink");this.yB=a});v.defineProperty(Zg,{Jw:"isDragOutStarted"},function(){return this.SB},function(a){this.SB=a});v.defineProperty(Zg,{fk:"startPoint"},function(){return this.Vv},function(a){v.A(a,z,Zg,"startPoint");this.Vv.K(a)||(this.Vv=a=a.S())});
v.defineProperty(Zg,{zD:"delay"},function(){return this.Fn},function(a){v.j(a,"number",Zg,"delay");this.Fn=a});Zg.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.ab&&!a.Ss||!a.bl&&!a.Vj&&!a.Ss||!a.of)return!1;var b=a.O;return!b.left||a.Wa!==this&&(!this.isBeyondDragSize()||b.Xi&&b.timestamp-a.yc.timestamp<this.Fn)?!1:null!==this.findDraggablePart()};
Zg.prototype.findDraggablePart=function(){var a=this.g;if(null===a)return null;a=a.ht(a.yc.ca,!1);if(null===a)return null;for(;null!==a&&!a.canSelect();)a=a.Oa;return null!==a&&(a.canMove()||a.canCopy())?a:null};Zg.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.of){var b=a.ht(a.yc.ca,!1);if(null!==b){for(;null!==b&&!b.canSelect();)b=b.Oa;this.Im=b;this.Im.hb||(a.Ba("ChangingSelection"),b=a.O,(v.bk?b.Ft:b.control)||b.shift||Yg(a),this.Im.hb=!0,a.Ba("ChangedSelection"))}}};
Zg.prototype.doActivate=function(){var a=this.g;if(null!==a){null===this.Im&&this.standardMouseSelect();var b=this.Im;null!==b&&(b.canMove()||b.canCopy())&&(this.qa=!0,this.uo.set(a.position),hh(this,a.selection),this.lj.length=0,this.ac=this.computeEffectiveCollection(a.selection),a.bu=!0,ih(this,this.ac),this.Qb("Drag"),this.fk=a.yc.ca,a.Oe=!0,a.Ss&&(this.Jw=!0,this.zq=!1,jh=this,kh=this.g,this.doSimulatedDragOut()))}};
function hh(a,b){if(a.Si){var c=a.g;null!==c&&c.ym&&(c.ba instanceof Q&&1===b.count&&b.first()instanceof W?(a.ad=b.first(),a.ad.canRelinkFrom()&&a.ad.canRelinkTo()&&a.ad.Vs(),a.Fi=c.Za.CE,null===a.Fi&&(a.Fi=new lh,a.Fi.Mc(c))):(a.ad=null,a.Fi=null))}}
Zg.prototype.computeEffectiveCollection=function(a){var b=null!==this.g&&this.g.Wa===this,c=new na(R);if(null===a)return c;for(var d=a.i;d.next();)mh(this,c,d.value,b);if(null!==this.ad&&this.Si)return c;for(d=a.i;d.next();)a=d.value,a instanceof W&&(b=a.T,null===b||c.contains(b)?(b=a.Z,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c};function wh(a){return void 0===a?new Eh(ad):new Eh(a.copy())}
function mh(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof S){b.add(c,wh(c.location));if(c instanceof V)for(var e=c.Ic;e.next();)mh(a,b,e.value,d);for(e=c.te;e.next();){var f=e.value;if(!b.contains(f)){var h=f.T,k=f.Z;null!==h&&b.contains(h)&&null!==k&&b.contains(k)&&mh(a,b,f,d)}}if(a.LG)for(c=c.MD();c.next();)mh(a,b,c.value,d)}else if(c instanceof W)for(f=c,b.add(f,wh()),e=f.Sf;e.next();)mh(a,b,e.value,d);else c instanceof Vg||b.add(c,wh(c.location))}
Zg.prototype.doDeactivate=function(){this.qa=!1;var a=this.g;null!==a&&Fh(a);Gh(this);Hh(this,this.ac);this.ac=this.Im=null;this.zq=this.Jw=!1;if(0<Ih.count){for(var b=Ih.length,c=0;c<b;c++){var d=Ih.da(c);Jh(d);Kh(d);Gh(d);null!==d.g&&Fh(d.g)}Ih.clear()}Jh(this);this.uo.m(NaN,NaN);jh=kh=null;Kh(this);a.Oe=!1;a.$b="";a.bu=!1;this.gk()};function Gh(a){var b=a.g;if(null!==b){var c=b.tb;b.tb=!0;Lh(a,b.O,null);b.tb=c}a.lj.length=0}
function Mh(){var a=jh;Kh(a);Nh(a);var b=a.g;null!==b&&a.uo.G()&&(b.position=a.uo);null!==b&&Fh(b)}Zg.prototype.doCancel=function(){Kh(this);Nh(this);var a=this.g;null!==a&&this.uo.G()&&(a.position=this.uo);this.stopTool()};function ih(a,b){if(null!==b){a.Yv=!0;for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.Jp=!0)}}}function Hh(a,b){if(null!==b){for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.Jp=!1,d.sl&&Oh(d)&&d.ic())}a.Yv=!1}}
Zg.prototype.doKeyDown=function(){var a=this.g;null!==a&&(a=a.O,null!==a&&this.qa&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};Zg.prototype.doKeyUp=function(){var a=this.g;null!==a&&null!==a.O&&this.qa&&this.doMouseMove()};function Ph(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,h=a.i;h.next();){var k=h.value;if(k.Pd()&&k.isVisible()){var l=k.location,k=l.x,l=l.y;isNaN(k)||isNaN(l)||(k<c&&(c=k),l<d&&(d=l),k>e&&(e=k),l>f&&(f=l))}}Infinity===c?b.m(0,0,0,0):b.m(c,d,e-c,f-d)}
function Qh(a,b){if(null===a.gc){var c=a.g;if(!(null===c||b&&(c.ab||c.vf))&&null!==a.ac){var d=c.la;d.isEnabled&&d.hE?null!==d.Qi&&0<d.Qi.Of.count&&(c.la.zp(),c.Qb("Drag")):Nh(a);c.tb=!b;c.Qp=!b;a.fk=c.yc.ca;d=a.yG?a.ac.ej():c.selection;d=c.Oo(d,c,!0);for(c=d.i;c.next();)c.value.location=c.key.location;c=v.ag();Ph(d,c);v.Vb(c);for(var c=new na(R),e=a.ac.i;e.next();){var f=e.key;f.Pd()&&f.canCopy()&&(f=d.ja(f),null!==f&&(f.sf(),c.add(f,wh(f.location))))}for(d=d.i;d.next();)e=d.value,e instanceof W&&
e.canCopy()&&c.add(e,wh());a.gc=c;hh(a,c.ej());null!==a.ad&&(c=a.ad,d=c.Zm,c.xl(a.fk.x-(d.x+d.width/2),a.fk.y-(d.y+d.height/2)))}}}function Kh(a){var b=a.g;if(null!==b){if(null!==a.gc&&(b.gA(a.gc.ej(),!1),a.gc=null,null!==a.ac))for(var c=a.ac.i;c.next();)c.key instanceof W&&(c.value.point=new z(0,0));b.tb=!1;b.Qp=!1;a.fk=b.yc.ca}}function Jh(a){if(null!==a.ad){if(a.Si&&null!==a.Fi){var b=a.Fi;b.g.remove(b.Bd);b.g.remove(b.Cd)}a.ad=null;a.Fi=null}}
function Rh(a,b,c){var d=a.g;if(null!==d){var e=a.fk,f=v.L();f.assign(d.O.ca);a.moveParts(b,f.du(e),c);v.v(f)}}
Zg.prototype.moveParts=function(a,b,c){if(null!==a&&(v.A(a,na,Zg,"moveParts:parts"),0!==a.count)){var d=v.L(),e=v.L();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);(b=this.Yv)||ih(this,a);for(var f=new I(Sh),h=new I(Ea),k=a.i;k.next();){var l=k.key;if(l.Pd()){var m=Th(this,l,a);if(null!==m)f.add(new Sh(l,k.value,m));else if(!c||l.canMove()){m=k.value.point;d.assign(m);var n=v.L(),p=this.computeMove(l,d.add(e),a,n);l.location=p;k.value.ZE=n.du(m);v.v(n)}}else k.key instanceof W&&h.add(k.cb)}for(c=
f.i;c.next();)f=c.value,m=f.info.point,d.assign(m),f.Jc.location=d.add(f.bH.ZE);c=v.L();m=v.L();for(h=h.i;h.next();)if(k=h.value,f=k.key,f instanceof W)if(f.Jp)l=f.T,n=f.Z,null!==this.ad&&this.Si?(k=k.value.point,a.add(f,wh(e)),l=e.x-k.x,k=e.y-k.y,f.xl(l,k)):(null!==l&&(c.assign(l.location),p=a.ja(l),null!==p&&c.du(p.point)),null!==n&&(m.assign(n.location),p=a.ja(n),null!==p&&m.du(p.point)),null!==l&&null!==n?c.Fc(m)?(k=k.value.point,l=d,l.assign(c),l.du(k),a.add(f,wh(c)),f.xl(l.x,l.y)):(f.Jp=!1,
f.ic()):(k=k.value.point,n=null!==l?c:null!==n?m:e,a.add(f,wh(n)),l=n.x-k.x,k=n.y-k.y,f.xl(l,k)));else if(null===f.T||null===f.Z)k=k.value.point,a.add(f,wh(e)),l=e.x-k.x,k=e.y-k.y,f.xl(l,k);v.v(d);v.v(e);v.v(c);v.v(m);b||Hh(this,a)}};function Th(a,b,c){b=b.Oa;if(null!==b){a=Th(a,b,c);if(null!==a)return a;a=c.ja(b);if(null!==a)return a}return null}
function Nh(a){if(null!==a.ac){for(var b=a.g,c=a.ac.i;c.next();){var d=c.key;d.Pd()&&(d.location=c.value.point)}for(c=a.ac.i;c.next();)if(d=c.key,d instanceof W&&d.Jp){var e=c.value.point;a.ac.add(d,wh());d.xl(-e.x,-e.y)}b.Uf()}}
Zg.prototype.computeMove=function(a,b,c,d){void 0===d&&(d=new z);d.assign(b);if(null===a)return d;void 0===c&&(c=null);var e=b;if(this.Kw&&(this.qH||null===c||this.g.O.up)&&(e=v.L(),c=e,c.assign(b),null!==a)){var f=this.g;if(null!==f){var h=f.$o,k=this.UD,f=k.width,k=k.height,l=this.aH,m=l.x,l=l.y,n=this.$G;if(null!==h){var p=h.Gw;isNaN(f)&&(f=p.width);isNaN(k)&&(k=p.height);h=h.TD;isNaN(m)&&(m=h.x);isNaN(l)&&(l=h.y)}h=v.Mb(0,0);h.$t(0,0,f,k,n);Pa(b.x,b.y,m+h.x,l+h.y,f,k,c);v.v(h)}}c=null!==a.ED?
a.ED(a,b,e):e;k=a.QH;f=k.x;isNaN(f)&&(f=a.location.x);k=k.y;isNaN(k)&&(k=a.location.y);h=a.LH;m=h.x;isNaN(m)&&(m=a.location.x);h=h.y;isNaN(h)&&(h=a.location.y);d.m(Math.max(f,Math.min(c.x,m)),Math.max(k,Math.min(c.y,h)));e!==b&&v.v(e);return d};function Uh(a,b){if(null===b)return!0;var c=b.Y;return null===c||c instanceof Vg||c.layer.Gc||a.ac&&a.ac.contains(c)||a.gc&&a.gc.contains(c)?!0:!1}
function Vh(a,b,c,d){var e=a.g;if(null!==e){a.Si&&(null!==a.ad&&(a.ad.T=null,a.ad.Z=null),Wh(a,!1));var f=Xh(e,b,null,function(b){return!Uh(a,b)}),h=e.O;h.ye=f;var k=e.tb,l=!1;try{e.tb=!0;l=Lh(a,h,f);if(!a.qa&&null===jh)return;if(null===f){var m=e.UH;null!==m&&(m(h),l=!0)}if(!a.qa&&null===jh)return;a.doDragOver(b,f);if(!a.qa&&null===jh)return}finally{e.tb=k,l&&e.Uf()}(e.oe||e.pe)&&(c||d)&&Yh(e,h.jf)}}
function Lh(a,b,c){var d=!1,e=a.lj.length,f=0<e?a.lj[0]:null;if(c===f)return!1;b.zc=!1;for(var h=0;h<e;h++){var k=a.lj[h],l=k.TH;if(null!==l&&(l(b,k,c),d=!0,b.zc))break}a.lj.length=0;if(!a.qa&&null===jh||null===c)return d;for(b.zc=!1;null!==c;)a.lj.push(c),c=Zh(c);e=a.lj.length;for(h=0;h<e&&(k=a.lj[h],l=k.SH,null===l||(l(b,k,f),d=!0,!b.zc));h++);return d}function Zh(a){var b=a.R;return null!==b?b:a instanceof R&&!(a instanceof V)&&(a=a.Oa,null!==a&&a.eH)?a:null}
function $h(a,b,c){var d=a.Fi;if(null===d)return null;var e=a.g.Km(b,d.AE,function(a){return d.findValidLinkablePort(a,c)});a=v.L();for(var f=Infinity,h=null,e=e.i;e.next();){var k=e.value;if(null!==k.Y){var l=k.Xa(zb,a),l=b.rf(l);l<f&&(h=k,f=l)}}v.v(a);return h}
function Wh(a,b){var c=a.ad;if(null!==c&&!(2>c.oa)){var d=a.g;if(null!==d&&!d.ab&&(d=a.Fi,null!==d)){var e=null,f=null;null===c.T&&(e=$h(a,c.l(0),!1),null!==e&&(f=e.Y));var h=null,k=null;null===c.Z&&(h=$h(a,c.l(c.oa-1),!0),null!==h&&(k=h.Y));d.isValidLink(f,e,k,h)?b?(c.zn=c.l(0).copy(),c.Dn=c.l(c.oa-1).copy(),c.Jp=!1,c.T=f,null!==e&&(c.xg=e.Sd),c.Z=k,null!==h&&(c.sh=h.Sd)):ai(d,f,e,k,h):ai(d,null,null,null,null)}}}Zg.prototype.doDragOver=function(){};
function bi(a,b){var c=a.g;if(null!==c){a.Si&&Wh(a,!0);Gh(a);var d=Xh(c,b,null,function(b){return!Uh(a,b)}),e=c.O;e.ye=d;if(null!==d){e.zc=!1;for(var f=d;null!==f;){var h=f.Qz;if(null!==h&&(h(e,f),e.zc))break;f=Zh(f)}}else h=c.Qz,null!==h&&h(e);if(a.qa||null!==jh)if(a.doDropOnto(b,d),a.qa||null!==jh)for(d=c.selection.i;d.next();)e=d.value,e instanceof S&&ci(c,e.U)}}Zg.prototype.doDropOnto=function(){};
Zg.prototype.doMouseMove=function(){if(this.qa){var a=this.g;if(null!==a&&null!==this.Im&&null!==this.ac){var b=!1,c=!1;this.mayCopy()?(b=!0,a.$b="copy",Qh(this,!1),ih(this,this.gc),Rh(this,this.gc,!1),Hh(this,this.gc)):this.mayMove()?(c=!0,a.$b="default",Kh(this),Rh(this,this.ac,!0)):this.mayDragOut()?(a.$b="no-drop",Qh(this,!1),Rh(this,this.gc,!1)):Kh(this);Vh(this,a.O.ca,c,b)}}};
Zg.prototype.doMouseUp=function(){if(this.qa){var a=this.g;if(null!==a){var b=!1,c=this.mayCopy();c&&null!==this.gc?(Kh(this),Qh(this,!0),ih(this,this.gc),Rh(this,this.gc,!1),Hh(this,this.gc),null!==this.gc&&a.UE(this.gc.ej())):(b=!0,Kh(this),this.mayMove()&&(Rh(this,this.ac,!0),Vh(this,a.O.ca,!0,!1)));this.zq=!0;bi(this,a.O.ca);if(this.qa){this.gc=null;if(b&&null!==this.ac)for(b=this.ac.i;b.next();){var d=b.key;d instanceof S&&(d=d.Oa,null===d||null===d.placeholder||this.ac.contains(d)||d.sD&&d.N())}a.qc();
Hh(this,this.ac);this.Bf=c?"Copy":"Move";a.Ba(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};Zg.prototype.mayCopy=function(){if(!this.cE)return!1;var a=this.g;if(null===a||a.ab||a.vf||!a.Ho||!a.Vj||(v.bk?!a.O.alt:!a.O.control))return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Pd()&&b.canCopy())return!0}return null!==this.ad&&this.Si&&this.ad.canCopy()?!0:!1};
Zg.prototype.mayDragOut=function(){if(!this.cE)return!1;var a=this.g;if(null===a||!a.Ss||!a.Vj||a.bl)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Pd()&&b.canCopy())return!0}return null!==this.ad&&this.Si&&this.ad.canCopy()?!0:!1};Zg.prototype.mayMove=function(){var a=this.g;if(null===a||a.ab||!a.bl)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Pd()&&b.canMove())return!0}return null!==this.ad&&this.Si&&this.ad.canMove()?!0:!1};var Ih=new I(Zg),jh=null,kh=null;
Zg.prototype.getDraggingSource=function(){return jh};Zg.prototype.mayDragIn=function(){var a=this.g;if(null===a||!a.fD||a.ab||a.vf||!a.Ho)return!1;var b=jh;return null===b||b.g.ba.gl!==a.ba.gl?!1:!0};Zg.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=this.g;a.Na.$h();di(a);a=jh;null!==a&&(a.g.$b="copy")}};Zg.prototype.doSimulatedDragLeave=function(){var a=jh;null!==a&&a.doSimulatedDragOut();this.doCancel()};
Zg.prototype.doSimulatedDragOver=function(){var a=this.g;if(null!==a){var b=jh;null!==b&&null!==b.ac&&this.mayDragIn()&&(a.$b="copy",ei(this,b.ac.ej(),!1),Rh(this,this.gc,!1),Vh(this,a.O.ca,!1,!0))}};
Zg.prototype.doSimulatedDrop=function(){var a=this.g;if(null!==a){var b=jh;if(null!==b){var c=b.g;b.zq=!0;Kh(this);this.mayDragIn()&&(this.Qb("Drop"),ei(this,b.ac.ej(),!0),Rh(this,this.gc,!1),null!==this.gc&&a.UE(this.gc.ej()),bi(this,a.O.ca),a.qc(),b=a.selection,null!==this.gc?this.Bf="ExternalCopy":b=new J(R),this.gc=null,a.focus(),a.Ba("ExternalObjectsDropped",b,c),this.gk())}}};
function ei(a,b,c){if(null===a.gc){var d=a.g;if(null!==d&&!d.ab&&!d.vf){d.tb=!c;d.Qp=!c;a.fk=d.O.ca;d=d.Oo(b,d,!0);c=v.ag();Ph(b,c);var e=c.x+c.width/2,f=c.y+c.height/2;v.Vb(c);var h=a.Vv;c=new na(R);var k=v.L();for(b=b.i;b.next();){var l=b.value;if(l.Pd()&&l.canCopy()){var m=l.location,l=d.ja(l);k.m(h.x-(e-m.x),h.y-(f-m.y));l.location=k;l.sf();c.add(l,wh(k))}}v.v(k);for(d=d.i;d.next();)e=d.value,e instanceof W&&e.canCopy()&&c.add(e,wh());a.gc=c;hh(a,c.ej());null!==a.ad&&(c=a.ad,d=c.Zm,c.xl(a.fk.x-
(d.x+d.width/2),a.fk.y-(d.y+d.height/2)))}}}Zg.prototype.doSimulatedDragOut=function(){var a=this.g;null!==a&&(this.mayCopy()||this.mayMove()?a.$b="":a.$b="no-drop")};function Eh(a){this.point=a;this.ZE=ad}v.ea("DraggingInfo",Eh);function Sh(a,b,c){this.Jc=a;this.info=b;this.bH=c}
function fi(){0<arguments.length&&v.cd(fi);Xf.call(this);this.uC=100;this.XB=!1;var a=new W,b=new Y;b.Rf=!0;b.stroke="blue";a.add(b);b=new Y;b.Kp="Standard";b.fill="blue";b.stroke="blue";a.add(b);a.Tf="Tool";this.NC=a;a=new S;b=new Y;b.Sd="";b.Ab="Rectangle";b.fill=null;b.stroke="magenta";b.lb=2;b.za=qd;a.add(b);a.Al=!1;a.Tf="Tool";this.LC=a;this.MC=b;a=new S;b=new Y;b.Sd="";b.Ab="Rectangle";b.fill=null;b.stroke="magenta";b.lb=2;b.za=qd;a.add(b);a.Al=!1;a.Tf="Tool";this.OC=a;this.PC=b;this.rC=this.qC=
this.mC=this.lC=this.nC=null;this.TB=!0;this.UF=new na(G,"boolean");this.vC=this.Nk=this.HC=null}v.Ja(fi,Xf);v.ea("LinkingBaseTool",fi);fi.prototype.doStop=function(){var a=this.g;null!==a&&Fh(a);this.Gg=this.Fg=this.Eg=this.Dg=this.kc=null;this.wx.clear();this.$f=null};v.defineProperty(fi,{AE:"portGravity"},function(){return this.uC},function(a){v.j(a,"number",fi,"portGravity");0<=a&&(this.uC=a)});
v.defineProperty(fi,{gp:"isUnconnectedLinkValid"},function(){return this.XB},function(a){v.j(a,"boolean",fi,"isUnconnectedLinkValid");this.XB=a});v.defineProperty(fi,{Kg:"temporaryLink"},function(){return this.NC},function(a){v.A(a,W,fi,"temporaryLink");this.NC=a});v.defineProperty(fi,{Bd:"temporaryFromNode"},function(){return this.LC},function(a){v.A(a,S,fi,"temporaryFromNode");this.LC=a});
v.defineProperty(fi,{cn:"temporaryFromPort"},function(){return this.MC},function(a){v.A(a,G,fi,"temporaryFromPort");this.MC=a});v.defineProperty(fi,{Cd:"temporaryToNode"},function(){return this.OC},function(a){v.A(a,S,fi,"temporaryToNode");this.OC=a});v.defineProperty(fi,{dn:"temporaryToPort"},function(){return this.PC},function(a){v.A(a,G,fi,"temporaryToPort");this.PC=a});v.defineProperty(fi,{kc:"originalLink"},function(){return this.nC},function(a){null!==a&&v.A(a,W,fi,"originalLink");this.nC=a});
v.defineProperty(fi,{Dg:"originalFromNode"},function(){return this.lC},function(a){null!==a&&v.A(a,S,fi,"originalFromNode");this.lC=a});v.defineProperty(fi,{Eg:"originalFromPort"},function(){return this.mC},function(a){null!==a&&v.A(a,G,fi,"originalFromPort");this.mC=a});v.defineProperty(fi,{Fg:"originalToNode"},function(){return this.qC},function(a){null!==a&&v.A(a,S,fi,"originalToNode");this.qC=a});
v.defineProperty(fi,{Gg:"originalToPort"},function(){return this.rC},function(a){null!==a&&v.A(a,G,fi,"originalToPort");this.rC=a});v.defineProperty(fi,{zd:"isForwards"},function(){return this.TB},function(a){v.j(a,"boolean",fi,"isForwards");this.TB=a});v.u(fi,{wx:"validPortsCache"},function(){return this.UF});v.defineProperty(fi,{$f:"targetPort"},function(){return this.HC},function(a){null!==a&&v.A(a,G,fi,"targetPort");this.HC=a});
fi.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.za=b.U.size;e?(d.yb=b.yb,d.Gl=b.Gl):(d.xb=b.xb,d.nl=b.nl);c.ef=zb;var f=v.L();c.location=b.Xa(zb,f);v.v(f);d.angle=b.ol();null!==this.$w&&this.$w(a,b,c,d,e)}};fi.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.za=qd,b.xb=qb,b.yb=qb);null!==a&&(a.location=this.g.O.ca);null!==this.$w&&this.$w(null,null,a,b,c)};fi.prototype.doMouseDown=function(){this.qa&&this.doMouseMove()};
fi.prototype.doMouseMove=function(){if(this.qa){var a=this.g;if(null!==a){this.$f=this.findTargetPort(this.zd);if(null!==this.$f){var b=this.$f.Y;if(b instanceof S){this.zd?this.copyPortProperties(b,this.$f,this.Cd,this.dn,!0):this.copyPortProperties(b,this.$f,this.Bd,this.cn,!1);return}}this.zd?this.setNoTargetPortProperties(this.Cd,this.dn,!0):this.setNoTargetPortProperties(this.Bd,this.cn,!1);(a.oe||a.pe)&&Yh(a,a.O.jf)}}};
fi.prototype.findValidLinkablePort=function(a,b){if(null===a)return null;var c=a.Y;if(!(c instanceof S))return null;for(;null!==a;){var d=b?a.fF:a.OD;if(!0===d&&(null!==a.Sd||a instanceof S)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.R}return null};
fi.prototype.findTargetPort=function(a){var b=this.g,c=b.O.ca,d=this.AE;0>=d&&(d=.1);for(var e=this,f=b.Km(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=Infinity,b=null,f=f.i;f.next();){var h=f.value,k=h.Y;if(k instanceof S){var l=h.Xa(zb,v.L()),m=c.x-l.x,n=c.y-l.y;v.v(l);l=m*m+n*n;l<d&&(m=this.wx.ja(h),null!==m?m&&(b=h,d=l):a&&this.isValidLink(this.Dg,this.Eg,k,h)||!a&&this.isValidLink(k,h,this.Fg,this.Gg)?(this.wx.add(h,!0),b=h,d=l):this.wx.add(h,!1))}}return null!==b&&(c=b.Y,
c instanceof S&&(null===c.layer||c.layer.Ts))?b:null};fi.prototype.isValidFrom=function(a,b){if(null===a||null===b)return this.gp;if(this.g.Wa===this&&(null!==a.layer&&!a.layer.Ts||!0!==b.OD))return!1;var c=b.vz;if(Infinity>c){if(null!==this.kc&&a===this.Dg&&b===this.Eg)return!0;var d=b.Sd;null===d&&(d="");if(a.Cw(d).count>=c)return!1}return!0};
fi.prototype.isValidTo=function(a,b){if(null===a||null===b)return this.gp;if(this.g.Wa===this&&(null!==a.layer&&!a.layer.Ts||!0!==b.fF))return!1;var c=b.LI;if(Infinity>c){if(null!==this.kc&&a===this.Fg&&b===this.Gg)return!0;var d=b.Sd;null===d&&(d="");if(a.wg(d).count>=c)return!1}return!0};fi.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.Y,d=b.Y;return null!==c&&c===d};
fi.prototype.isLinked=function(a,b){if(null===a||null===b)return!1;var c=a.Y;if(!(c instanceof S))return!1;var d=a.Sd;null===d&&(d="");var e=b.Y;if(!(e instanceof S))return!1;var f=b.Sd;null===f&&(f="");for(e=e.wg(f);e.next();)if(f=e.value,f.T===c&&f.xg===d)return!0;return!1};
fi.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.UG&&d.KI||!this.isInSameNode(b,d))&&(b.TG&&d.JI||!this.isLinked(b,d)))||null!==this.kc&&(null!==a&&this.isLabelDependentOnLink(a,this.kc)||null!==c&&this.isLabelDependentOnLink(c,this.kc))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!this.isValidCycle(a,c,this.kc))return!1;if(null!==a){var e=a.Rw;if(null!==e&&!e(a,b,c,d,this.kc))return!1}if(null!==
c&&(e=c.Rw,null!==e&&!e(a,b,c,d,this.kc)))return!1;e=this.Rw;return null!==e?e(a,b,c,d,this.kc):!0};fi.prototype.isLabelDependentOnLink=function(a,b){if(null===a)return!1;var c=a.Ad;if(null===c)return!1;if(c===b)return!0;var d=new J(S);d.add(a);return gi(this,c,b,d)};function gi(a,b,c,d){if(b===c)return!0;var e=b.T;if(null!==e&&e.uf&&(d.add(e),gi(a,e.Ad,c,d)))return!0;b=b.Z;return null!==b&&b.uf&&(d.add(b),gi(a,b.Ad,c,d))?!0:!1}
fi.prototype.isValidCycle=function(a,b,c){void 0===c&&(c=null);if(null===a||null===b)return this.gp;var d=this.g.SI;if(d!==hi){if(d===ii){if(null!==c&&!c.Hc)return!0;for(d=b.te;d.next();){var e=d.value;if(e!==c&&e.Hc&&e.Z===b)return!1}return!ji(this,a,b,c,!0)}if(d===ki){if(null!==c&&!c.Hc)return!0;for(d=a.te;d.next();)if(e=d.value,e!==c&&e.Hc&&e.T===a)return!1;return!ji(this,a,b,c,!0)}if(d===li)return a===b?a=!0:(d=new J(S),d.add(b),a=mi(this,d,a,b,c)),!a;if(d===ni)return!ji(this,a,b,c,!1);if(d===
xi)return a===b?a=!0:(d=new J(S),d.add(b),a=yi(this,d,a,b,c)),!a}return!0};function ji(a,b,c,d,e){if(b===c)return!0;if(null===b||null===c)return!1;for(var f=b.te;f.next();){var h=f.value;if(h!==d&&(!e||h.Hc)&&h.Z===b&&(h=h.T,h!==b&&ji(a,h,c,d,e)))return!0}return!1}function mi(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.te;f.next();){var h=f.value;if(h!==e&&h.Z===c&&(h=h.T,h!==c&&mi(a,b,h,d,e)))return!0}return!1}
function yi(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.te;f.next();){var h=f.value;if(h!==e){var k=h.T,h=h.Z,k=k===c?h:k;if(k!==c&&yi(a,b,k,d,e))return!0}}return!1}v.defineProperty(fi,{Rw:"linkValidation"},function(){return this.Nk},function(a){null!==a&&v.j(a,"function",fi,"linkValidation");this.Nk=a});v.defineProperty(fi,{$w:"portTargeted"},function(){return this.vC},function(a){null!==a&&v.j(a,"function",fi,"portTargeted");this.vC=a});
function zi(){0<arguments.length&&v.cd(zi);fi.call(this);this.name="Linking";this.TA={};this.SA=null;this.aa=Ai;this.EC=null}v.Ja(zi,fi);v.ea("LinkingTool",zi);var Ai;zi.Either=Ai=v.p(zi,"Either",0);var Bi;zi.ForwardsOnly=Bi=v.p(zi,"ForwardsOnly",0);var Ci;zi.BackwardsOnly=Ci=v.p(zi,"BackwardsOnly",0);v.defineProperty(zi,{gG:"archetypeLinkData"},function(){return this.TA},function(a){null!==a&&v.A(a,Object,zi,"archetypeLinkData");a instanceof G&&v.A(a,W,zi,"archetypeLinkData");this.TA=a});
v.defineProperty(zi,{iD:"archetypeLabelNodeData"},function(){return this.SA},function(a){null!==a&&v.A(a,Object,zi,"archetypeLabelNodeData");a instanceof G&&v.A(a,S,zi,"archetypeLabelNodeData");this.SA=a});v.defineProperty(zi,{direction:"direction"},function(){return this.aa},function(a){v.pb(a,zi,zi,"direction");this.aa=a});v.defineProperty(zi,{cF:"startObject"},function(){return this.EC},function(a){null!==a&&v.A(a,G,zi,"startObject");this.EC=a});
zi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.ab||a.vf||!a.Ts)return!1;var b=a.ba;return(b instanceof Q||b instanceof Qf)&&a.O.left&&(a.Wa===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1};
zi.prototype.findLinkablePort=function(){var a=this.g;if(null===a)return null;var b=this.cF;null===b&&(b=a.re(a.yc.ca,null,null));if(null===b||!(b.Y instanceof S))return null;a=this.direction;if(a===Ai||a===Bi){var c=this.findValidLinkablePort(b,!1);if(null!==c)return this.zd=!0,c}if(a===Ai||a===Ci)if(c=this.findValidLinkablePort(b,!0),null!==c)return this.zd=!1,c;return null};
zi.prototype.doActivate=function(){var a=this.g;if(null!==a){var b=this.findLinkablePort();null!==b&&(this.Qb(this.name),a.Oe=!0,a.$b="pointer",this.zd?(null===this.Cd||this.Cd.location.G()||(this.Cd.location=a.O.ca),this.Eg=b,b=this.Eg.Y,b instanceof S&&(this.Dg=b),this.copyPortProperties(this.Dg,this.Eg,this.Bd,this.cn,!1)):(null===this.Bd||this.Bd.location.G()||(this.Bd.location=a.O.ca),this.Gg=b,b=this.Gg.Y,b instanceof S&&(this.Fg=b),this.copyPortProperties(this.Fg,this.Gg,this.Cd,this.dn,!0)),
a.add(this.Bd),a.add(this.Cd),null!==this.Kg&&(null!==this.Bd&&(this.Kg.T=this.Bd),null!==this.Cd&&(this.Kg.Z=this.Cd),this.Kg.ic(),a.add(this.Kg)),this.qa=!0)}};zi.prototype.doDeactivate=function(){this.qa=!1;var a=this.g;null!==a&&(a.remove(this.Kg),a.remove(this.Bd),a.remove(this.Cd),a.Oe=!1,a.$b="",this.gk())};zi.prototype.doStop=function(){fi.prototype.doStop.call(this);this.cF=null};
zi.prototype.doMouseUp=function(){if(this.qa){var a=this.g;if(null===a)return;var b=this.Bf=null,c=null,d=null,e=null,f=this.$f=this.findTargetPort(this.zd);if(null!==f){var h=f.Y;h instanceof S&&(this.zd?(null!==this.Dg&&(b=this.Dg,c=this.Eg),d=h,e=f):(b=h,c=f,null!==this.Fg&&(d=this.Fg,e=this.Gg)))}else this.zd?null!==this.Dg&&this.gp&&(b=this.Dg,c=this.Eg):null!==this.Fg&&this.gp&&(d=this.Fg,e=this.Gg);null!==b||null!==d?(h=this.insertLink(b,c,d,e),null!==h?(null===f&&(this.zd?h.Dn=a.O.ca.copy():
h.zn=a.O.ca.copy()),a.of&&a.select(h),this.Bf=this.name,a.Ba("LinkDrawn",h)):(a.ba.oD(),this.doNoLink(b,c,d,e))):this.zd?this.doNoLink(this.Dg,this.Eg,null,null):this.doNoLink(null,null,this.Fg,this.Gg)}this.stopTool()};
zi.prototype.insertLink=function(a,b,c,d){var e=this.g;if(null===e)return null;var f=e.ba;if(f instanceof Qf){var h=a;b=c;e.Qd||(h=c,b=a);if(null!==h&&null!==b)return f.qh(b.data,f.gb(h.data)),b.Vo()}else if(f instanceof Q)if(h="",null!==a&&(null===b&&(b=a),h=b.Sd,null===h&&(h="")),b="",null!==c&&(null===d&&(d=c),b=d.Sd,null===b&&(b="")),d=this.gG,d instanceof W){if(Xg(d),f=d.copy(),null!==f)return f.T=a,f.xg=h,f.Z=c,f.sh=b,e.add(f),a=this.iD,a instanceof S&&(Xg(a),a=a.copy(),null!==a&&(a.Ad=f,e.add(a))),
f}else if(null!==d&&(d=f.sw(d),v.Ta(d)))return null!==a&&f.mx(d,f.gb(a.data)),f.nA(d,h),null!==c&&f.qx(d,f.gb(c.data)),f.qA(d,b),f.Os(d),a=this.iD,null===a||a instanceof S||(a=f.copyNodeData(a),v.Ta(a)&&(f.Zk(a),a=f.gb(a),void 0!==a&&f.Zy(d,a))),f=e.Pf(d);return null};zi.prototype.doNoLink=function(){};
function lh(){0<arguments.length&&v.cd(lh);fi.call(this);this.name="Relinking";var a=new Y;a.Ab="Diamond";a.za=sd;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.ve=0;this.FB=a;a=new Y;a.Ab="Diamond";a.za=sd;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.ve=-1;this.QC=a;this.Sb=null;this.oC=new A}v.Ja(lh,fi);v.ea("RelinkingTool",lh);
lh.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){var b="RelinkFrom",c=null;if(a.hb&&!this.g.ab){var d=a.Wt;null!==d&&a.canRelinkFrom()&&a.U.G()&&a.isVisible()&&d.U.G()&&d.Zi()&&(c=a.So(b),null===c&&(c=this.makeAdornment(d,!1),null!==c&&(c.fc=b),a.Yk(b,c)))}null===c&&a.bj(b);b="RelinkTo";c=null;a.hb&&!this.g.ab&&(d=a.Wt,null!==d&&a.canRelinkTo()&&a.U.G()&&a.isVisible()&&d.U.G()&&d.Zi()&&(c=a.So(b),null===c&&(c=this.makeAdornment(d,!0),null!==c&&(c.fc=b),a.Yk(b,c))));null===c&&
a.bj(b)}};lh.prototype.makeAdornment=function(a,b){var c=new Vg;c.type=Di;var d=b?this.II:this.SG;null!==d&&c.add(d.copy());c.Zb=a;return c};v.defineProperty(lh,{SG:"fromHandleArchetype"},function(){return this.FB},function(a){null!==a&&v.A(a,G,lh,"fromHandleArchetype");this.FB=a});v.defineProperty(lh,{II:"toHandleArchetype"},function(){return this.QC},function(a){null!==a&&v.A(a,G,lh,"toHandleArchetype");this.QC=a});v.u(lh,{handle:"handle"},function(){return this.Sb});
lh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.ab||a.vf||!a.ym)return!1;var b=a.ba;if(!(b instanceof Q||b instanceof Qf)||!a.O.left)return!1;b=this.findToolHandleAt(a.yc.ca,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.yc.ca,"RelinkTo"));return null!==b};
lh.prototype.doActivate=function(){var a=this.g;if(null!==a){if(null===this.kc){var b=this.findToolHandleAt(a.yc.ca,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.yc.ca,"RelinkTo"));if(null===b)return;var c=b.Y;if(!(c instanceof Vg&&c.Mf instanceof W))return;this.Sb=b;this.zd=null===c||"RelinkTo"===c.fc;this.kc=c.Mf}this.Qb(this.name);a.Oe=!0;a.$b="pointer";this.Eg=this.kc.kd;this.Dg=this.kc.T;this.Gg=this.kc.Td;this.Fg=this.kc.Z;this.oC.set(this.kc.U);null!==this.kc&&0<this.kc.oa&&(null===this.kc.T&&
(null!==this.cn&&(this.cn.za=pd),null!==this.Bd&&(this.Bd.location=this.kc.l(0))),null===this.kc.Z&&(null!==this.dn&&(this.dn.za=pd),null!==this.Cd&&(this.Cd.location=this.kc.l(this.kc.oa-1))));this.copyPortProperties(this.Dg,this.Eg,this.Bd,this.cn,!1);this.copyPortProperties(this.Fg,this.Gg,this.Cd,this.dn,!0);a.add(this.Bd);a.add(this.Cd);null!==this.Kg&&(null!==this.Bd&&(this.Kg.T=this.Bd),null!==this.Cd&&(this.Kg.Z=this.Cd),this.copyLinkProperties(this.kc,this.Kg),this.Kg.ic(),a.add(this.Kg));
this.qa=!0}};lh.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.Qs=a.Qs;b.kz=a.kz;var c=a.Ke;if(c===Ei||c===Fi)c=Gi;b.Ke=c;b.uw=a.uw;b.jx=a.jx;b.Hp=a.Hp;b.xb=a.xb;b.nl=a.nl;b.lt=a.lt;b.mt=a.mt;b.yb=a.yb;b.Gl=a.Gl;b.eu=a.eu;b.fu=a.fu}};lh.prototype.doDeactivate=function(){this.qa=!1;var a=this.g;null!==a&&(a.remove(this.Kg),a.remove(this.Bd),a.remove(this.Cd),a.Oe=!1,a.$b="",this.gk())};lh.prototype.doStop=function(){fi.prototype.doStop.call(this);this.Sb=null};
lh.prototype.doMouseUp=function(){if(this.qa){var a=this.g;if(null===a)return;this.Bf=null;var b=this.Dg,c=this.Eg,d=this.Fg,e=this.Gg,f=this.kc;this.$f=this.findTargetPort(this.zd);if(null!==this.$f){var h=this.$f.Y;h instanceof S&&(this.zd?(d=h,e=this.$f):(b=h,c=this.$f))}else this.gp?this.zd?e=d=null:c=b=null:f=null;null!==f?(this.reconnectLink(f,this.zd?d:b,this.zd?e:c,this.zd),null===this.$f&&(this.zd?f.Dn=a.O.ca.copy():f.zn=a.O.ca.copy(),f.ic()),a.of&&(f.hb=!0),this.Bf=this.name,a.Ba("LinkRelinked",
f,this.zd?this.Gg:this.Eg)):this.doNoRelink(this.kc,this.zd);Hi(this.kc,this.oC)}this.stopTool()};lh.prototype.reconnectLink=function(a,b,c,d){if(null===this.g)return!1;c=null!==c&&null!==c.Sd?c.Sd:"";d?(a.Z=b,a.sh=c):(a.T=b,a.xg=c);return!0};lh.prototype.doNoRelink=function(){};function ai(a,b,c,d,e){null!==b?(a.copyPortProperties(b,c,a.Bd,a.cn,!1),a.g.add(a.Bd)):a.g.remove(a.Bd);null!==d?(a.copyPortProperties(d,e,a.Cd,a.dn,!0),a.g.add(a.Cd)):a.g.remove(a.Cd)}
function Ii(){0<arguments.length&&v.cd(Ii);Xf.call(this);this.name="LinkReshaping";var a=new Y;a.Ab="Rectangle";a.za=rd;a.fill="lightblue";a.stroke="dodgerblue";this.Bk=a;a=new Y;a.Ab="Diamond";a.za=rd;a.fill="lightblue";a.stroke="dodgerblue";this.cC=a;this.wC=3;this.Jx=this.Sb=null;this.pC=new z;this.Bv=null}v.Ja(Ii,Xf);v.ea("LinkReshapingTool",Ii);var Ji;Ii.None=Ji=v.p(Ii,"None",0);var Ki;Ii.Horizontal=Ki=v.p(Ii,"Horizontal",1);var Li;Ii.Vertical=Li=v.p(Ii,"Vertical",2);var Mi;
Ii.All=Mi=v.p(Ii,"All",3);Ii.prototype.getReshapingBehavior=Ii.prototype.SD=function(a){return a&&a.xC?a.xC:Ji};Ii.prototype.setReshapingBehavior=Ii.prototype.Zt=function(a,b){v.A(a,G,Ii,"setReshapingBehavior:obj");v.pb(b,Ii,Ii,"setReshapingBehavior:behavior");a.xC=b};
Ii.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){if(a.hb&&!this.g.ab){var b=a.path;if(null!==b&&a.canReshape()&&a.U.G()&&a.isVisible()&&b.U.G()&&b.Zi()){var c=a.So(this.name);if(null===c||c.JF!==a.oa||c.WF!==a.Rt)c=this.makeAdornment(b),null!==c&&(c.JF=a.oa,c.WF=a.Rt,a.Yk(this.name,c));if(null!==c){c.location=a.position;return}}}a.bj(this.name)}};
Ii.prototype.makeAdornment=function(a){var b=a.Y,c=b.oa,d=b.jc,e=null;if(null!==b.points&&1<c){e=new Vg;e.type=Di;var c=b.it,f=b.Pw,h=d?1:0;if(b.Rt&&b.Ke!==Ni)for(var k=c+h;k<f-h;k++){var l=this.makeResegmentHandle(a,k);null!==l&&(l.ve=k,l.kA=.5,l.vz=999,e.add(l))}for(k=c+1;k<f;k++)if(l=this.makeHandle(a,k),null!==l){l.ve=k;if(k!==c)if(k===c+1&&d){var h=b.l(c),m=b.l(c+1);K(h.x,m.x)&&K(h.y,m.y)&&(m=b.l(c-1));K(h.x,m.x)?(this.Zt(l,Li),l.cursor="n-resize"):K(h.y,m.y)&&(this.Zt(l,Ki),l.cursor="w-resize")}else k===
f-1&&d?(h=b.l(f-1),m=b.l(f),K(h.x,m.x)&&K(h.y,m.y)&&(h=b.l(f+1)),K(h.x,m.x)?(this.Zt(l,Li),l.cursor="n-resize"):K(h.y,m.y)&&(this.Zt(l,Ki),l.cursor="w-resize")):k!==f&&(this.Zt(l,Mi),l.cursor="move");e.add(l)}e.fc=this.name;e.Zb=a}return e};Ii.prototype.makeHandle=function(){var a=this.nt;return null===a?null:a.copy()};v.defineProperty(Ii,{nt:"handleArchetype"},function(){return this.Bk},function(a){null!==a&&v.A(a,G,Ii,"handleArchetype");this.Bk=a});
Ii.prototype.makeResegmentHandle=function(){var a=this.PH;return null===a?null:a.copy()};v.defineProperty(Ii,{PH:"midHandleArchetype"},function(){return this.cC},function(a){null!==a&&v.A(a,G,Ii,"midHandleArchetype");this.cC=a});v.u(Ii,{handle:"handle"},function(){return this.Sb});v.u(Ii,{Rs:"adornedLink"},function(){return this.Jx});Ii.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.ab&&a.jw&&a.O.left?null!==this.findToolHandleAt(a.yc.ca,this.name):!1};
Ii.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Sb=this.findToolHandleAt(a.yc.ca,this.name),null!==this.Sb)){var b=this.Sb.Y.Mf;if(b instanceof W){this.Jx=b;a.Oe=!0;this.Qb(this.name);if(b.Rt&&999===this.Sb.vz){var c=b.points.copy(),d=this.Sb.Xa(zb);c.yd(this.Sb.ve+1,d);b.jc&&c.yd(this.Sb.ve+1,d);b.points=c;b.Od();this.Sb=this.findToolHandleAt(a.yc.ca,this.name);if(null===this.Sb){this.doDeactivate();return}}this.pC=b.l(this.Sb.ve);this.Bv=b.points.copy();this.qa=!0}}};
Ii.prototype.doDeactivate=function(){this.gk();this.Jx=this.Sb=null;var a=this.g;null!==a&&(a.Oe=!1);this.qa=!1};Ii.prototype.doCancel=function(){var a=this.Rs;null!==a&&(a.points=this.Bv);this.stopTool()};Ii.prototype.doMouseMove=function(){var a=this.g;this.qa&&null!==a&&(a=this.computeReshape(a.O.ca),this.reshape(a))};
Ii.prototype.doMouseUp=function(){var a=this.g;if(this.qa&&null!==a){var b=this.computeReshape(a.O.ca);this.reshape(b);b=this.Rs;if(null!==b&&b.Rt){var c=this.handle.ve,d=b.l(c-1),e=b.l(c),f=b.l(c+1);if(b.jc){if(c>b.it+1&&c<b.Pw-1){var h=b.l(c-2);if(Math.abs(d.x-e.x)<this.oh&&Math.abs(d.y-e.y)<this.oh&&(Oi(this,h,d,e,f,!0)||Oi(this,h,d,e,f,!1))){var k=b.points.copy();Oi(this,h,d,e,f,!0)?(k.Ig(c-2,new z(h.x,(f.y+h.y)/2)),k.Ig(c+1,new z(f.x,(f.y+h.y)/2))):(k.Ig(c-2,new z((f.x+h.x)/2,h.y)),k.Ig(c+1,
new z((f.x+h.x)/2,f.y)));k.Vc(c);k.Vc(c-1);b.points=k;b.Od()}else h=b.l(c+2),Math.abs(e.x-f.x)<this.oh&&Math.abs(e.y-f.y)<this.oh&&(Oi(this,d,e,f,h,!0)||Oi(this,d,e,f,h,!1))&&(k=b.points.copy(),Oi(this,d,e,f,h,!0)?(k.Ig(c-1,new z(d.x,(d.y+h.y)/2)),k.Ig(c+2,new z(h.x,(d.y+h.y)/2))):(k.Ig(c-1,new z((d.x+h.x)/2,d.y)),k.Ig(c+2,new z((d.x+h.x)/2,h.y))),k.Vc(c+1),k.Vc(c),b.points=k,b.Od())}}else h=v.L(),Oa(d.x,d.y,f.x,f.y,e.x,e.y,h)&&h.rf(e)<this.oh*this.oh&&(k=b.points.copy(),k.Vc(c),b.points=k,b.Od()),
v.v(h)}a.qc();this.Bf=this.name;a.Ba("LinkReshaped",this.Rs,this.Bv)}this.stopTool()};function Oi(a,b,c,d,e,f){return f?Math.abs(b.y-c.y)<a.oh&&Math.abs(c.y-d.y)<a.oh&&Math.abs(d.y-e.y)<a.oh:Math.abs(b.x-c.x)<a.oh&&Math.abs(c.x-d.x)<a.oh&&Math.abs(d.x-e.x)<a.oh}v.defineProperty(Ii,{oh:"resegmentingDistance"},function(){return this.wC},function(a){v.j(a,"number",Ii,"resegmentingDistance");this.wC=a});
Ii.prototype.reshape=function(a){var b=this.Rs;b.Cl();var c=this.handle.ve,d=this.SD(this.handle);if(b.jc)if(c===b.it+1)c=b.it+1,d===Li?(b.V(c,b.l(c-1).x,a.y),b.V(c+1,b.l(c+2).x,a.y)):d===Ki&&(b.V(c,a.x,b.l(c-1).y),b.V(c+1,a.x,b.l(c+2).y));else if(c===b.Pw-1)c=b.Pw-1,d===Li?(b.V(c-1,b.l(c-2).x,a.y),b.V(c,b.l(c+1).x,a.y)):d===Ki&&(b.V(c-1,a.x,b.l(c-2).y),b.V(c,a.x,b.l(c+1).y));else{var d=c,e=b.l(d),f=b.l(d-1),h=b.l(d+1);K(f.x,e.x)&&K(e.y,h.y)?(K(f.x,b.l(d-2).x)&&!K(f.y,b.l(d-2).y)?(b.w(d,a.x,f.y),
c++,d++):b.V(d-1,a.x,f.y),K(h.y,b.l(d+2).y)&&!K(h.x,b.l(d+2).x)?b.w(d+1,h.x,a.y):b.V(d+1,h.x,a.y)):K(f.y,e.y)&&K(e.x,h.x)?(K(f.y,b.l(d-2).y)&&!K(f.x,b.l(d-2).x)?(b.w(d,f.x,a.y),c++,d++):b.V(d-1,f.x,a.y),K(h.x,b.l(d+2).x)&&!K(h.y,b.l(d+2).y)?b.w(d+1,a.x,h.y):b.V(d+1,a.x,h.y)):K(f.x,e.x)&&K(e.x,h.x)?(K(f.x,b.l(d-2).x)&&!K(f.y,b.l(d-2).y)?(b.w(d,a.x,f.y),c++,d++):b.V(d-1,a.x,f.y),K(h.x,b.l(d+2).x)&&!K(h.y,b.l(d+2).y)?b.w(d+1,a.x,h.y):b.V(d+1,a.x,h.y)):K(f.y,e.y)&&K(e.y,h.y)&&(K(f.y,b.l(d-2).y)&&!K(f.x,
b.l(d-2).x)?(b.w(d,f.x,a.y),c++,d++):b.V(d-1,f.x,a.y),K(h.y,b.l(d+2).y)&&!K(h.x,b.l(d+2).x)?b.w(d+1,h.x,a.y):b.V(d+1,h.x,a.y));b.V(c,a.x,a.y)}else b.V(c,a.x,a.y),1===c&&b.computeSpot(!0).se()&&(e=b.T,f=b.kd,null===e||e.isVisible()||(e=e.findVisibleNode(),e!==b.T&&(f=e.ll(""))),d=f.Xa(zb,v.L()),e=b.getLinkPointFromPoint(e,f,d,a,!0,v.L()),b.V(0,e.x,e.y),v.v(d),v.v(e)),c===b.oa-2&&b.computeSpot(!1).se()&&(c=b.Z,e=b.Td,null===c||c.isVisible()||(c=c.findVisibleNode(),c!==b.Z&&(e=c.ll(""))),d=e.Xa(zb,v.L()),
e=b.getLinkPointFromPoint(c,e,d,a,!1,v.L()),b.V(b.oa-1,e.x,e.y),v.v(d),v.v(e));b.Pi()};Ii.prototype.computeReshape=function(a){var b=this.Rs,c=this.handle.ve;switch(this.SD(this.handle)){case Mi:return a;case Li:return b=b.l(c),new z(b.x,a.y);case Ki:return b=b.l(c),new z(a.x,b.y);default:case Ji:return b.l(c)}};v.u(Ii,{sK:"originalPoint"},function(){return this.pC});v.u(Ii,{tK:"originalPoints"},function(){return this.Bv});
function Pi(){0<arguments.length&&v.cd(Pi);Xf.call(this);this.name="Resizing";this.Dj=(new ia(1,1)).freeze();this.Bj=(new ia(9999,9999)).freeze();this.jj=(new ia(NaN,NaN)).freeze();this.Qq=!1;this.Db=null;var a=new Y;a.Uj=zb;a.Ab="Rectangle";a.za=rd;a.fill="lightblue";a.stroke="dodgerblue";a.lb=1;a.cursor="pointer";this.Bk=a;this.Sb=null;this.Av=new ia;this.Gy=new z;this.iy=new ia(0,0);this.hy=new ia(Infinity,Infinity);this.gy=new ia(1,1);this.iC=!0}v.Ja(Pi,Xf);v.ea("ResizingTool",Pi);
Pi.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.hb&&!this.g.ab){var b=a.LE;if(null!==b&&a.canResize()&&a.U.G()&&a.isVisible()&&b.U.G()&&b.Zi()){var c=a.So(this.name);if(null===c||c.Zb!==b)c=this.makeAdornment(b);if(null!==c){var d=b.ol();c.angle=d;var e=b.Xa(c.ef,v.L()),f=b.Ti();c.location=e;v.v(e);e=c.placeholder;if(null!==e){var b=b.Ha,h=v.Fl();h.m(b.width*f,b.height*f);e.za=h;v.$j(h)}this.updateResizeHandles(c,d);a.Yk(this.name,c);return}}}a.bj(this.name)}};
Pi.prototype.makeAdornment=function(a){var b=null,b=a.Y.KE;if(null===b){b=new Vg;b.type=Qi;b.ef=zb;var c=new Ri;c.Rf=!0;b.add(c);b.add(this.makeHandle(a,rb));b.add(this.makeHandle(a,tb));b.add(this.makeHandle(a,Eb));b.add(this.makeHandle(a,Cb));b.add(this.makeHandle(a,sc));b.add(this.makeHandle(a,uc));b.add(this.makeHandle(a,vc));b.add(this.makeHandle(a,tc))}else if(Xg(b),b=b.copy(),null===b)return null;b.fc=this.name;b.Zb=a;return b};
Pi.prototype.makeHandle=function(a,b){var c=this.nt;if(null===c)return null;c=c.copy();c.alignment=b;return c};
Pi.prototype.updateResizeHandles=function(a,b){if(null!==a)if(!a.alignment.Uc()&&("pointer"===a.cursor||0<a.cursor.indexOf("resize")))a:{var c=a.alignment;c.se()&&(c=zb);var d=b;if(0>=c.x)d=0>=c.y?d+225:1<=c.y?d+135:d+180;else if(1<=c.x)0>=c.y?d+=315:1<=c.y&&(d+=45);else if(0>=c.y)d+=270;else if(1<=c.y)d+=90;else break a;0>d?d+=360:360<=d&&(d-=360);a.cursor=22.5>d?"e-resize":67.5>d?"se-resize":112.5>d?"s-resize":157.5>d?"sw-resize":202.5>d?"w-resize":247.5>d?"nw-resize":292.5>d?"n-resize":337.5>d?
"ne-resize":"e-resize"}else if(a instanceof D)for(c=a.elements;c.next();)this.updateResizeHandles(c.value,b)};v.defineProperty(Pi,{nt:"handleArchetype"},function(){return this.Bk},function(a){null!==a&&v.A(a,G,Pi,"handleArchetype");this.Bk=a});v.u(Pi,{handle:"handle"},function(){return this.Sb});v.defineProperty(Pi,{Zb:"adornedObject"},function(){return this.Db},function(a){null!==a&&v.A(a,G,Pi,"adornedObject");this.Db=a});
Pi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.ab&&a.Us&&a.O.left?null!==this.findToolHandleAt(a.yc.ca,this.name)?!0:!1:!1};
Pi.prototype.doActivate=function(){var a=this.g;null!==a&&(this.Sb=this.findToolHandleAt(a.yc.ca,this.name),null!==this.Sb&&(this.Db=this.Sb.Y.Zb,this.Gy.set(this.Db.Y.location),this.Av.set(this.Db.za),this.gy=this.computeCellSize(),this.iy=this.computeMinSize(),this.hy=this.computeMaxSize(),a.Oe=!0,this.iC=a.Na.isEnabled,a.Na.isEnabled=!1,this.Qb(this.name),this.qa=!0))};Pi.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.gk(),this.Db=this.Sb=null,this.qa=a.Oe=!1,a.Na.isEnabled=this.iC)};
Pi.prototype.doCancel=function(){this.Db.za=this.Av;this.Db.Y.location=this.Gy;this.stopTool()};Pi.prototype.doMouseMove=function(){var a=this.g;if(this.qa&&null!==a){var b=this.iy,c=this.hy,d=this.gy,e=this.Db.QD(a.O.ca,v.L()),f=Si;this.Db instanceof Y&&(f=Ti(this.Db));b=this.computeResize(e,this.Sb.alignment,b,c,d,!(f===Ui||f===Vi||a.O.shift));this.resize(b);a.Uf();v.v(e)}};
Pi.prototype.doMouseUp=function(){var a=this.g;if(this.qa&&null!==a){var b=this.iy,c=this.hy,d=this.gy,e=this.Db.QD(a.O.ca,v.L()),f=Si;this.Db instanceof Y&&(f=Ti(this.Db));b=this.computeResize(e,this.Sb.alignment,b,c,d,!(f===Ui||f===Vi||a.O.shift));this.resize(b);v.v(e);a.qc();this.Bf=this.name;a.Ba("PartResized",this.Db,this.Av)}this.stopTool()};
Pi.prototype.resize=function(a){if(null!==this.g){var b=this.Zb,c=b.Y,d=b.ol(),e=b.Ti(),f=Math.PI*d/180,h=Math.cos(f),f=Math.sin(f),k=0<d&&180>d?1:0,l=90<d&&270>d?1:0,d=180<d&&360>d?1:0,m=b.Ha.width,n=b.Ha.height;b.za=a.size;var p=c.position.copy();c.sf();m=b.Ha.width-m;n=b.Ha.height-n;if(0!==m||0!==n)0!==m&&(p.x+=e*((a.x+m*l)*h-(a.y+n*k)*f)),0!==n&&(p.y+=e*((a.x+m*d)*f+(a.y+n*l)*h)),c.move(p),c instanceof S&&c.cf()}};
Pi.prototype.computeResize=function(a,b,c,d,e,f){b.se()&&(b=zb);var h=this.Zb.Ha,k=h.x,l=h.y,m=h.x+h.width,n=h.y+h.height,p=1;if(!f){var p=h.width,q=h.height;0>=p&&(p=1);0>=q&&(q=1);p=q/p}q=v.L();Pa(a.x,a.y,k,l,e.width,e.height,q);a=h.copy();0>=b.x?0>=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=Math.max(n-a.y,c.height),f||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):(a.width=
a.height/p,a.x=m-a.width))):1<=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),f||(b=a.height/a.width,p<b?a.height=p*a.width:(a.width=a.height/p,a.x=m-a.width))):(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=m-a.x,f||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),
a.height=Math.max(n-a.y,c.height),f||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):a.width=a.height/p)):1<=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),f||(b=a.height/a.width,p<b?a.height=p*a.width:a.width=a.height/p)):(a.width=Math.max(Math.min(q.x-k,d.width),c.width),f||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):0>=b.y?(a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=n-a.y,f||(a.width=a.height/p,a.x=
k+.5*(m-k-a.width))):1<=b.y&&(a.height=Math.max(Math.min(q.y-l,d.height),c.height),f||(a.width=a.height/p,a.x=k+.5*(m-k-a.width)));v.v(q);return a};Pi.prototype.computeMinSize=function(){var a=this.Zb.kh.copy(),b=this.kh;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Pi.prototype.computeMaxSize=function(){var a=this.Zb.xf.copy(),b=this.xf;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Pi.prototype.computeCellSize=function(){var a=new ia(NaN,NaN),b=this.Zb.Y;if(null!==b){var c=b.kI;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Ko;isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width);isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height);b=this.g;(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.Za.ae,null!==c&&c.Kw&&(c=c.UD,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&
0<c.height&&(a.height=c.height)),b=b.$o,null!==b&&b.visible&&this.Kw&&(c=b.Gw,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};
v.defineProperty(Pi,{kh:"minSize"},function(){return this.Dj},function(a){v.A(a,ia,Pi,"minSize");if(!this.Dj.K(a)){var b=a.width;isNaN(b)&&(b=0);a=a.height;isNaN(a)&&(a=0);this.Dj.m(b,a)}});v.defineProperty(Pi,{xf:"maxSize"},function(){return this.Bj},function(a){v.A(a,ia,Pi,"maxSize");if(!this.Bj.K(a)){var b=a.width;isNaN(b)&&(b=Infinity);a=a.height;isNaN(a)&&(a=Infinity);this.Bj.m(b,a)}});
v.defineProperty(Pi,{Ko:"cellSize"},function(){return this.jj},function(a){v.A(a,ia,Pi,"cellSize");this.jj.K(a)||this.jj.assign(a)});v.defineProperty(Pi,{Kw:"isGridSnapEnabled"},function(){return this.Qq},function(a){v.j(a,"boolean",Pi,"isGridSnapEnabled");this.Qq=a});v.u(Pi,{qK:"originalDesiredSize"},function(){return this.Av});v.u(Pi,{rK:"originalLocation"},function(){return this.Gy});
function Wi(){0<arguments.length&&v.cd(Wi);Xf.call(this);this.name="Rotating";this.CC=45;this.BC=2;this.Db=null;var a=new Y;a.Ab="Ellipse";a.za=sd;a.fill="lightblue";a.stroke="dodgerblue";a.lb=1;a.cursor="pointer";this.Bk=a;this.Sb=null;this.zv=0;this.yC=new z}v.Ja(Wi,Xf);v.ea("RotatingTool",Wi);
Wi.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.hb&&!this.g.ab){var b=a.OE;if(null!==b&&a.canRotate()&&a.U.G()&&a.isVisible()&&b.U.G()&&b.Zi()){var c=a.So(this.name);if(null===c||c.Zb!==b)c=this.makeAdornment(b);if(null!==c){c.angle=b.ol();var d=null,e=null;b===a||b===a.bc?(d=a.bc,e=a.ef):(d=b,e=zb);for(var f=d.Ha,e=v.Mb(f.width*e.x+e.offsetX,f.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.ub(e),d=d.R;var d=e.y,f=Math.max(e.x-b.Ha.width,0),h=v.L();c.location=b.Xa(new L(1,
0,50+f,d),h);v.v(h);v.v(e);a.Yk(this.name,c);return}}}a.bj(this.name)}};Wi.prototype.makeAdornment=function(a){var b=null,b=a.Y.nI;if(null===b){b=new Vg;b.type=Xi;b.ef=zb;var c=this.nt;null!==c&&b.add(c.copy())}else if(Xg(b),b=b.copy(),null===b)return null;b.fc=this.name;b.Zb=a;return b};v.defineProperty(Wi,{nt:"handleArchetype"},function(){return this.Bk},function(a){null!==a&&v.A(a,G,Wi,"handleArchetype");this.Bk=a});v.u(Wi,{handle:"handle"},function(){return this.Sb});
v.defineProperty(Wi,{Zb:"adornedObject"},function(){return this.Db},function(a){null!==a&&v.A(a,G,Wi,"adornedObject");this.Db=a});Wi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.ab&&a.kw&&a.O.left?null!==this.findToolHandleAt(a.yc.ca,this.name)?!0:!1:!1};
Wi.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Sb=this.findToolHandleAt(a.yc.ca,this.name),null!==this.Sb)){this.Db=this.Sb.Y.Zb;var b=this.Db.Y,c=b.bc;this.yC=this.Db===b||this.Db===c?c.Xa(b.ef):this.Db.Xa(zb);this.zv=this.Db.angle;a.Oe=!0;a.nz=!0;this.Qb(this.name);this.qa=!0}};Wi.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.gk(),this.Db=this.Sb=null,this.qa=a.Oe=!1)};Wi.prototype.doCancel=function(){var a=this.g;null!==a&&(a.nz=!1);this.rotate(this.zv);this.stopTool()};
Wi.prototype.doMouseMove=function(){var a=this.g;this.qa&&null!==a&&(a=this.computeRotate(a.O.ca),this.rotate(a))};Wi.prototype.doMouseUp=function(){var a=this.g;if(this.qa&&null!==a){a.nz=!1;var b=this.computeRotate(a.O.ca);this.rotate(b);a.qc();this.Bf=this.name;a.Ba("PartRotated",this.Db,this.zv)}this.stopTool()};Wi.prototype.rotate=function(a){null!==this.Db&&(this.Db.angle=a)};
Wi.prototype.computeRotate=function(a){a=this.yC.xc(a);var b=this.Db.R;null!==b&&(a-=b.ol(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.BI),180),c=Math.min(Math.abs(this.AI),b/2);!this.g.O.shift&&0<b&&0<c&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};v.defineProperty(Wi,{BI:"snapAngleMultiple"},function(){return this.CC},function(a){v.j(a,"number",Wi,"snapAngleMultiple");this.CC=a});
v.defineProperty(Wi,{AI:"snapAngleEpsilon"},function(){return this.BC},function(a){v.j(a,"number",Wi,"snapAngleEpsilon");this.BC=a});v.u(Wi,{pK:"originalAngle"},function(){return this.zv});function Yi(){0<arguments.length&&v.cd(Yi);Xf.call(this);this.name="ClickSelecting"}v.Ja(Yi,Xf);v.ea("ClickSelectingTool",Yi);Yi.prototype.canStart=function(){return!this.isEnabled||null===this.g||this.isBeyondDragSize()?!1:!0};
Yi.prototype.doMouseUp=function(){this.qa&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.g.O.Xi&&this.g.Za.doToolTip());this.stopTool()};function Zi(){0<arguments.length&&v.cd(Zi);Xf.call(this);this.name="Action";this.jn=null}v.Ja(Zi,Xf);v.ea("ActionTool",Zi);
Zi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a)return!1;var b=a.O,c=a.re(b.ca,function(a){for(;null!==a.R&&!a.Hw;)a=a.R;return a});if(null!==c){if(!c.Hw)return!1;this.jn=c;a.wn=a.re(b.ca,null,null);return!0}return!1};Zi.prototype.doMouseDown=function(){if(this.qa){var a=this.g.O,b=this.jn;null!==b&&(a.ye=b,null!==b.aD&&b.aD(a,b))}else this.canStart()&&this.doActivate()};
Zi.prototype.doMouseMove=function(){if(this.qa){var a=this.g.O,b=this.jn;null!==b&&(a.ye=b,null!==b.bD&&b.bD(a,b))}};Zi.prototype.doMouseUp=function(){if(this.qa){var a=this.g,b=a.O,c=this.jn;if(null===c)return;b.ye=c;null!==c.cD&&c.cD(b,c);this.isBeyondDragSize()||eh(c,b,a)}this.stopTool()};Zi.prototype.doCancel=function(){var a=this.g;if(null!==a){var a=a.O,b=this.jn;if(null===b)return;a.ye=b;null!==b.$C&&b.$C(a,b)}this.stopTool()};Zi.prototype.doStop=function(){this.jn=null};
function $i(){0<arguments.length&&v.cd($i);Xf.call(this);this.name="ClickCreating";this.Ll=null;this.RB=!0;this.EB=new z(0,0)}v.Ja($i,Xf);v.ea("ClickCreatingTool",$i);
$i.prototype.canStart=function(){if(!this.isEnabled||null===this.bz)return!1;var a=this.g;if(null===a||a.ab||a.vf||!a.Ho||!a.O.left||this.isBeyondDragSize())return!1;if(this.pH){if(1===a.O.Ge&&(this.EB=a.O.jf.copy()),2!==a.O.Ge||this.isBeyondDragSize(this.EB))return!1}else if(1!==a.O.Ge)return!1;return a.Wa!==this&&null!==a.ht(a.O.ca,!0)?!1:!0};$i.prototype.doMouseUp=function(){var a=this.g;this.qa&&null!==a&&this.insertPart(a.O.ca);this.stopTool()};
$i.prototype.insertPart=function(a){var b=this.g;if(null===b)return null;var c=this.bz;if(null===c)return null;this.Qb(this.name);var d=null;c instanceof R?c.Pd()&&(Xg(c),d=c.copy(),null!==d&&b.add(d)):null!==c&&(c=b.ba.copyNodeData(c),v.Ta(c)&&(b.ba.Zk(c),d=b.eh(c)));null!==d&&(d.location=a,b.of&&b.select(d));b.qc();this.Bf=this.name;b.Ba("PartCreated",d);this.gk();return d};
v.defineProperty($i,{bz:"archetypeNodeData"},function(){return this.Ll},function(a){null!==a&&v.A(a,Object,$i,"archetypeNodeData");this.Ll=a});v.defineProperty($i,{pH:"isDoubleClick"},function(){return this.RB},function(a){v.j(a,"boolean",$i,"isDoubleClick");this.RB=a});function aj(a,b,c){this.text=a;this.qD=b;this.visible=c}function bj(){0<arguments.length&&v.cd(bj);Xf.call(this);this.name="ContextMenu";this.kB=this.Rx=this.hB=null;this.gC=new z;this.Tx=this.En=null;cj(this)}v.Ja(bj,Xf);
v.ea("ContextMenuTool",bj);v.yD=!1;v.Ws=null;v.Xs=null;
function cj(a){a.En=new Vg;a.RC=function(){a.stopTool()};if(!1===v.yD){var b=v.createElement("div"),c=v.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=
v.createElement("style");window.document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},
!1);b.addEventListener("selectstart",function(a){a.preventDefault();return!1},!1);c.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);window.document.body&&(window.document.body.appendChild(b),window.document.body.appendChild(c));v.Xs=b;v.Ws=c;v.yD=!0}}bj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||this.isBeyondDragSize()||!a.O.right?!1:null!==this.En&&a.O.Xi||null!==this.findObjectWithContextMenu()?!0:!1};
bj.prototype.doStart=function(){var a=this.g;null!==a&&this.gC.set(a.yc.ca)};bj.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu();this.mz=null};
bj.prototype.findObjectWithContextMenu=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return null;var c=b.O,d=null;a instanceof E||(d=a instanceof G?a:b.re(c.ca,null,function(a){return!a.layer.Gc}));if(null!==d){for(a=d;null!==a;){if(null!==a.contextMenu)return a;a=a.R}if(null!==this.En&&b.O.Xi)return d.Y}else if(null!==b.contextMenu)return b;return null};bj.prototype.doActivate=function(){};
bj.prototype.doMouseDown=function(){Xf.prototype.doMouseDown.call(this);null!==this.g&&this.g.Za.Pe.contains(this)&&dj(this)};bj.prototype.doMouseUp=function(){dj(this)};function dj(a){var b=a.g;if(null!==b)if(!a.qa)a.canStart()&&(ch(a,!0),a.qa||a.stopTool());else if(null!==a.pf){var c=b.re(b.O.ca,null,null);null!==c&&c.ul(a.pf)&&a.standardMouseClick(null,null);a.stopTool();a.canStart()&&(b.Wa=a,a.doMouseUp())}}
function ch(a,b,c){void 0===c&&(c=null);b&&a.standardMouseSelect();a.standardMouseClick()||(a.qa=!0,null===c&&(c=a.findObjectWithContextMenu()),null!==c?(b=c.contextMenu,null!==b?(a.mz=c instanceof G?c:null,a.showContextMenu(b,a.mz)):a.showDefaultContextMenu()):a.showDefaultContextMenu())}bj.prototype.doMouseMove=function(){this.qa&&this.g.Za.doMouseMove()};
bj.prototype.showContextMenu=function(a,b){v.A(a,Vg,bj,"showContextMenu:contextmenu");null!==b&&v.A(b,G,bj,"showContextMenu:obj");var c=this.g;if(null!==c){a!==this.pf&&this.hideContextMenu();a.Tf="Tool";a.Al=!1;a.scale=1/c.scale;a.fc=this.name;null!==a.placeholder&&(a.placeholder.scale=c.scale);c.add(a);if(null!==b){var c=null,d=b.Uo();null!==d&&(c=d.data);a.Zb=b;a.data=c}else a.data=c.ba;a.sf();this.positionContextMenu(a,b);this.pf=a}};
bj.prototype.positionContextMenu=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.O.ca.copy(),d=a.Ca,e=b.rb;b.O.Xi&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}}};bj.prototype.hideContextMenu=function(){var a=this.g;null!==a&&null!==this.pf&&(a.remove(this.pf),null!==this.Rx&&this.Rx.bj(this.pf.fc),this.pf.data=null,this.pf=this.pf.Zb=null,this.standardMouseOver())};
function ej(a){if(null===a.g)return null;a=new I(aj);a.add(new aj("Copy",function(a){a.nb.copySelection()},function(a){return a.nb.canCopySelection()}));a.add(new aj("Cut",function(a){a.nb.cutSelection()},function(a){return a.nb.canCutSelection()}));a.add(new aj("Delete",function(a){a.nb.deleteSelection()},function(a){return a.nb.canDeleteSelection()}));a.add(new aj("Paste",function(a){a.nb.pasteSelection(a.O.ca)},function(a){return a.nb.canPasteSelection()}));a.add(new aj("Select All",function(a){a.nb.selectAll()},
function(a){return a.nb.canSelectAll()}));a.add(new aj("Undo",function(a){a.nb.undo()},function(a){return a.nb.canUndo()}));a.add(new aj("Redo",function(a){a.nb.redo()},function(a){return a.nb.canRedo()}));a.add(new aj("Scroll To Part",function(a){a.nb.scrollToPart()},function(a){return a.nb.canScrollToPart()}));a.add(new aj("Zoom To Fit",function(a){a.nb.zoomToFit()},function(a){return a.nb.canZoomToFit()}));a.add(new aj("Reset Zoom",function(a){a.nb.resetZoom()},function(a){return a.nb.canResetZoom()}));
a.add(new aj("Group Selection",function(a){a.nb.groupSelection()},function(a){return a.nb.canGroupSelection()}));a.add(new aj("Ungroup Selection",function(a){a.nb.ungroupSelection()},function(a){return a.nb.canUngroupSelection()}));a.add(new aj("Edit Text",function(a){a.nb.editTextBlock()},function(a){return a.nb.canEditTextBlock()}));return a}
bj.prototype.showDefaultContextMenu=function(){var a=this.g;if(null!==a){null===this.Tx&&(this.Tx=ej(this));this.En!==this.pf&&this.hideContextMenu();v.Xs.innerHTML="";v.Ws.addEventListener("click",this.RC,!1);var b=this,c=v.createElement("ul");c.className="defaultCXul";v.Xs.appendChild(c);c.innerHTML="";for(var d=this.Tx.i;d.next();){var e=d.value,f=e.text,h=e.visible;if("function"===typeof e.qD&&("function"!==typeof h||h(a))){h=v.createElement("li");h.className="defaultCXli";var k=v.createElement("a");
k.className="defaultCXa";k.href="#";k.AF=e.qD;k.addEventListener("click",function(c){this.AF(a);b.stopTool();c.preventDefault();return!1},!1);k.textContent=f;h.appendChild(k);c.appendChild(h)}}v.Xs.style.display="block";v.Ws.style.display="block";this.pf=this.En}};bj.prototype.hideDefaultContextMenu=function(){null!==this.pf&&this.pf===this.En&&(v.Xs.style.display="none",v.Ws.style.display="none",v.Ws.removeEventListener("click",this.RC,!1),this.pf=null)};
v.defineProperty(bj,{pf:"currentContextMenu"},function(){return this.hB},function(a){null!==a&&v.A(a,Vg,bj,"currentContextMenu");this.hB=a;this.Rx=null!==a?a.Mf:null});v.defineProperty(bj,{mz:"currentObject"},function(){return this.kB},function(a){null!==a&&v.A(a,G,bj,"currentObject");this.kB=a});v.u(bj,{kK:"mouseDownPoint"},function(){return this.gC});
function fj(){0<arguments.length&&v.cd(fj);Xf.call(this);this.name="DragSelecting";this.Fn=175;this.WB=!1;var a=new R;a.Tf="Tool";a.Al=!1;var b=new Y;b.name="SHAPE";b.Ab="Rectangle";b.fill=null;b.stroke="magenta";a.add(b);this.Nl=a}v.Ja(fj,Xf);v.ea("DragSelectingTool",fj);
fj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.of)return!1;var b=a.O;return!b.left||a.Wa!==this&&(!this.isBeyondDragSize()||b.timestamp-a.yc.timestamp<this.zD||null!==a.ht(b.ca,!0))?!1:!0};fj.prototype.doActivate=function(){var a=this.g;null!==a&&(this.qa=!0,a.Oe=!0,a.tb=!0,a.add(this.$g),this.doMouseMove())};fj.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.remove(this.$g),a.tb=!1,this.qa=a.Oe=!1)};
fj.prototype.doMouseMove=function(){if(null!==this.g&&this.qa&&null!==this.$g){var a=this.computeBoxBounds(),b=this.$g.ce("SHAPE");null===b&&(b=this.$g.Ye());b.za=a.size;this.$g.position=a.position}};fj.prototype.doMouseUp=function(){if(this.qa){var a=this.g;a.remove(this.$g);try{a.$b="wait",this.selectInRect(this.computeBoxBounds())}finally{a.$b=""}}this.stopTool()};fj.prototype.computeBoxBounds=function(){var a=this.g;return null===a?new A(0,0,0,0):new A(a.yc.ca,a.O.ca)};
fj.prototype.selectInRect=function(a){var b=this.g;if(null!==b){var c=b.O;b.Ba("ChangingSelection");a=b.Zj(a,null,function(a){return a instanceof R?a.canSelect():!1},this.uH);if(v.bk?c.Ft:c.control)if(c.shift)for(a=a.i;a.next();)c=a.value,c.hb&&(c.hb=!1);else for(a=a.i;a.next();)c=a.value,c.hb=!c.hb;else{if(!c.shift){for(var c=new I(R),d=b.selection.i;d.next();){var e=d.value;a.contains(e)||c.add(e)}for(c=c.i;c.next();)c.value.hb=!1}for(a=a.i;a.next();)c=a.value,c.hb||(c.hb=!0)}b.Ba("ChangedSelection")}};
v.defineProperty(fj,{zD:"delay"},function(){return this.Fn},function(a){v.j(a,"number",fj,"delay");this.Fn=a});v.defineProperty(fj,{uH:"isPartialInclusion"},function(){return this.WB},function(a){v.j(a,"boolean",fj,"isPartialInclusion");this.WB=a});v.defineProperty(fj,{$g:"box"},function(){return this.Nl},function(a){null!==a&&v.A(a,R,fj,"box");this.Nl=a});
function gj(){0<arguments.length&&v.cd(gj);Xf.call(this);this.name="Panning";this.Hy=new z;this.ij=!1;var a=this;this.FC=function(){window.document.removeEventListener("scroll",a.FC,!1);a.stopTool()}}v.Ja(gj,Xf);v.ea("PanningTool",gj);gj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||!a.oe&&!a.pe||!a.O.left||a.Wa!==this&&!this.isBeyondDragSize()?!1:!0};
gj.prototype.doActivate=function(){var a=this.g;null!==a&&(this.ij?(a.O.bubbles=!0,window.document.addEventListener("scroll",this.FC,!1)):(a.$b="move",a.Oe=!0,this.Hy=a.position.copy()),this.qa=!0)};gj.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.$b="",this.qa=a.Oe=!1)};gj.prototype.doCancel=function(){var a=this.g;null!==a&&(a.position=this.Hy,a.Oe=!1);this.stopTool()};gj.prototype.doMouseMove=function(){this.move()};gj.prototype.doMouseUp=function(){this.move();this.stopTool()};
gj.prototype.move=function(){var a=this.g;if(this.qa&&a)if(this.ij)a.O.bubbles=!0;else{var b=a.position,c=a.yc.ca,d=a.O.ca,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.oe||(e=b.x);a.pe||(c=b.y);a.position=new z(e,c)}};v.defineProperty(gj,{bubbles:"bubbles"},function(){return this.ij},function(a){v.j(a,"boolean",gj,"bubbles");this.ij=a});v.u(gj,{uK:"originalPosition"},function(){return this.Hy});
function hj(){0<arguments.length&&v.cd(hj);Xf.call(this);this.name="TextEditing";this.mB=this.Ry=this.JC=null;this.vo=ij;this.Vk=null;this.eb=jj;this.Sk=null;this.dC=1;this.zC=!0;var a=v.createElement("textarea");a.QB=!0;this.tB=a;a.addEventListener("input",function(){var a=this.textEditingTool;if(null!==a&&void 0!==a&&null!==a.ze){var c=a.JC;c.text=this.value;var d=this.HI;kj(c,a.ze.lv,Infinity);this.style.width=20+c.Ca.width*d+"px";this.style.height=10+c.Ca.height*d+"px";this.rows=c.CH}},!1);a.addEventListener("keydown",
function(a){var c=a.which,d=this.textEditingTool;null!==d&&void 0!==d&&null!==d.ze&&(13===c?(!1===d.ze.Mw&&a.preventDefault(),d.acceptText(lj)):9===c?(d.acceptText(mj),a.preventDefault()):27===c&&(d.doCancel(),null!==d.g&&d.g.focus()))},!1);a.addEventListener("focus",function(a){var c=this.textEditingTool;null!==c&&void 0!==c&&c.doFocus(a)},!1);a.addEventListener("blur",function(a){var c=this.textEditingTool;null!==c&&void 0!==c&&c.doBlur(a)},!1)}v.ea("TextEditingTool",hj);v.Ja(hj,Xf);var nj;
hj.LostFocus=nj=v.p(hj,"LostFocus",0);var oj;hj.MouseDown=oj=v.p(hj,"MouseDown",1);var mj;hj.Tab=mj=v.p(hj,"Tab",2);var lj;hj.Enter=lj=v.p(hj,"Enter",3);hj.SingleClick=v.p(hj,"SingleClick",0);var ij;hj.SingleClickSelected=ij=v.p(hj,"SingleClickSelected",1);var jj=v.p(hj,"StateNone",0),pj=v.p(hj,"StateActive",1),qj=v.p(hj,"StateEditing",2),rj=v.p(hj,"StateEditing2",3),sj=v.p(hj,"StateValidating",4),tj=v.p(hj,"StateValidated",5);
v.defineProperty(hj,{ze:"textBlock"},function(){return this.Ry},function(a){null!==a&&v.A(a,bh,hj,"textBlock");this.Ry=a});v.defineProperty(hj,{qf:"currentTextEditor"},function(){return this.mB},function(a){this.mB=a});v.defineProperty(hj,{EG:"defaultTextEditor"},function(){return this.tB},function(a){v.A(a,Element,hj,"defaultTextEditor");this.tB=a});v.defineProperty(hj,{tA:"starting"},function(){return this.vo},function(a){v.pb(a,hj,hj,"starting");this.vo=a});
hj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.ab||!a.O.left||this.isBeyondDragSize())return!1;a=a.re(a.O.ca,null,function(a){return a instanceof bh});if(null===a||!a.pz||!a.Y.canEdit())return!1;a=a.Y;return null===a||this.tA===ij&&!a.hb?!1:!0};hj.prototype.doStart=function(){this.qa||null===this.ze||this.doActivate()};
hj.prototype.doActivate=function(){if(!this.qa){var a=this.g;if(null!==a){var b=this.ze;null===b&&(b=a.re(a.O.ca,function(a){return a instanceof bh?a:null}));if(null!==b&&(this.ze=b,null!==b.Y)){this.qa=!0;this.eb=pj;var c=this.EG,d=!1;null!==b.eF&&(c=b.eF);null===c||c.QB||(d=!0);this.JC=this.ze.copy();var e=new A(this.ze.Xa(rb),this.ze.Xa(Eb));a.sI(e);if(c.QB){var f=b.Xa(zb),h=a.position,k=a.scale,l=b.Ti()*k;l<this.vE&&(l=this.vE);var e=b.Ha.width*l,m=b.Ha.height*l,n=(f.x-h.x)*k,f=(f.y-h.y)*k;c.value=
b.text;a.jl.style.font=b.font;c.style.font="inherit";c.style.fontSize=100*l+"%";c.style.lineHeight="normal";c.style.width=e+6+"px";c.style.height=m+2+"px";c.style.left=(n-e/2|0)-1+"px";c.style.top=(f-m/2|0)-1+"px";c.style.textAlign=b.textAlign;c.style.margin="0";c.style.padding="1px";c.style.border="0";c.style.outline="none";c.style["white-space"]="pre-wrap";c.style.overflow="hidden"}a.jl.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.HI=
l;if(d&&"function"===typeof c.onActivate)c.onActivate();this.qf=c;"function"===typeof c.focus&&c.focus();"function"===typeof c.select&&this.mA&&(c.select(),c.setSelectionRange(0,9999))}}}};hj.prototype.doCancel=function(){null!==this.Sk&&(this.qf.style.border=this.Sk,this.Sk=null);this.stopTool()};hj.prototype.doMouseUp=function(){!this.qa&&this.canStart()&&this.doActivate()};hj.prototype.doMouseDown=function(){this.qa&&this.acceptText(oj)};
hj.prototype.acceptText=function(a){switch(a){case oj:if(this.eb===tj||this.eb===rj)"function"===typeof this.qf.focus&&this.qf.focus();else if(this.eb===pj||this.eb===qj)this.eb=sj,uj(this);break;case nj:case lj:case mj:if(lj===a&&!0===this.Ry.Mw)break;if(this.eb===pj||this.eb===qj)this.eb=sj,uj(this)}};
function uj(a){if(null!==a.ze&&null!==a.qf){var b=a.ze,c=a.ze.text,d=a.qf.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.ze,c,e)){a.eb=qj;null!==b.rz&&b.rz(a,c,e);null===a.Sk&&(a.Sk=a.qf.style.border,a.qf.style.border="3px solid red");"function"===typeof a.qf.focus&&a.qf.focus();return}a.Qb(a.name);a.eb=tj;c!==e&&(a.ze.text=e);a.Bf=a.name;b=a.g;null!==b&&b.Ba("TextEdited",a.ze,c);a.gk();a.stopTool();null!==b&&b.focus()}null!==a.Sk&&(a.qf.style.border=a.Sk,a.Sk=null)}
hj.prototype.doDeactivate=function(){var a=this.g;if(null!==a){this.eb=jj;this.ze=null;if(null!==this.qf){var b=this.qf;if("function"===typeof b.onDeactivate)b.onDeactivate();null!==b&&a.jl.removeChild(b)}this.qa=!1}};hj.prototype.doFocus=function(){var a=this.qf;null!==a&&(this.eb===pj?this.eb=qj:this.eb===tj?this.eb=rj:this.eb===rj&&(this.eb=qj),"function"===typeof a.select&&this.mA&&(a.select(),a.setSelectionRange(0,9999)))};
hj.prototype.doBlur=function(){var a=this.qf;null!==a&&("function"===typeof a.focus&&a.focus(),"function"===typeof a.select&&this.mA&&(a.select(),a.setSelectionRange(0,9999)))};hj.prototype.isValidText=function(a,b,c){v.A(a,bh,hj,"isValidText:textblock");var d=this.wA;if(null!==d&&!d(a,b,c))return!1;d=a.wA;return null===d||d(a,b,c)?!0:!1};v.defineProperty(hj,{wA:"textValidation"},function(){return this.Vk},function(a){null!==a&&v.j(a,"function",hj,"textValidation");this.Vk=a});
v.defineProperty(hj,{vE:"minimumEditorScale"},function(){return this.dC},function(a){null!==a&&v.j(a,"number",hj,"minimumEditorScale");this.dC=a});v.defineProperty(hj,{mA:"selectsTextOnActivate"},function(){return this.zC},function(a){null!==a&&v.j(a,"boolean",hj,"selectsTextOnActivate");this.zC=a});
function Hg(){Xf.call(this);this.name="ToolManager";this.FF=new I(Xf);this.GF=new I(Xf);this.HF=new I(Xf);this.IB=this.JB=850;this.xB=(new ia(2,2)).Ea();this.SC=5E3;this.hC=gh;this.GB=Dj;this.Ku=this.nB=null;this.um=-1}v.Ja(Hg,Xf);v.ea("ToolManager",Hg);var gh;Hg.WheelScroll=gh=v.p(Hg,"WheelScroll",0);var fh;Hg.WheelZoom=fh=v.p(Hg,"WheelZoom",1);Hg.WheelNone=v.p(Hg,"WheelNone",2);var Dj;Hg.GestureZoom=Dj=v.p(Hg,"GestureZoom",3);var Ej;Hg.GestureCancel=Ej=v.p(Hg,"GestureCancel",4);var Fj;
Hg.GestureNone=Fj=v.p(Hg,"GestureNone",5);v.defineProperty(Hg,{It:"mouseWheelBehavior"},function(){return this.hC},function(a){v.pb(a,Hg,Hg,"mouseWheelBehavior");this.hC=a});v.defineProperty(Hg,{Xo:"gestureBehavior"},function(){return this.GB},function(a){v.pb(a,Hg,Hg,"gestureBehavior");this.GB=a});
Hg.prototype.initializeStandardTools=function(){this.XF=new Zi;this.CE=new lh;this.FH=new Ii;this.NE=new Pi;this.pI=new Wi;this.rE=new zi;this.ae=new Zg;this.JG=new fj;this.ZH=new gj;this.hz=new bj;this.vA=new hj;this.mG=new $i;this.nG=new Yi};Hg.prototype.updateAdornments=function(a){var b=this.dh;if(null!==b&&this.Ku===a){var c=b.Zb;(null!==a?c.Y===a:null===c)?this.showToolTip(b,c):this.hideToolTip()}};
Hg.prototype.doMouseDown=function(){var a=this.g;if(null!==a){var b=a.O;b.Xi&&this.Xo===Ej&&(b.bubbles=!1);if(b.wt){if(this.Xo===Fj){b.bubbles=!0;return}if(this.Xo===Ej)return;if(a.Wa.canStartMultiTouch()){a.Wa.standardPinchZoomStart();return}}var c=a.la;c.ez&&0!==c.th&&v.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var c=this.Pe.length,d=0;d<c;d++){var e=this.Pe.da(d);null===e.g&&e.Mc(this.g);if(e.canStart()){a.doFocus();a.Wa=e;a.Wa===e&&(e.qa||e.doActivate(),
e.doMouseDown());return}}1===a.O.button&&(this.It===gh?this.It=fh:this.It===fh&&(this.It=gh));this.doActivate();this.standardWaitAfter(this.XD,b)}};
Hg.prototype.doMouseMove=function(){var a=this.g;if(null!==a){var b=a.O;if(b.wt){if(this.Xo===Fj){b.bubbles=!0;return}if(this.Xo===Ej)return;if(a.Wa.canStartMultiTouch()){a.Wa.standardPinchZoomMove();return}}if(this.qa)for(var c=this.Vf.length,d=0;d<c;d++){var e=this.Vf.da(d);null===e.g&&e.Mc(this.g);if(e.canStart()){a.doFocus();a.Wa=e;a.Wa===e&&(e.qa||e.doActivate(),e.doMouseMove());return}}Gj(this,a);null===b.event||"mousemove"!==b.event.type&&b.event.cancelable||(b.bubbles=!0)}};
function Gj(a,b){a.standardMouseOver();a.isBeyondDragSize()&&a.standardWaitAfter(a.qa?a.XD:a.gH,b.O)}Hg.prototype.doCurrentObjectChanged=function(a,b){var c=this.dh;null===c||null!==b&&(b===c||b.ul(c))||this.hideToolTip()};Hg.prototype.doWaitAfter=function(a){var b=this.g;null!==b&&b.zb&&(this.doMouseHover(),this.qa||this.doToolTip(),a.Xi&&!b.O.zc&&(a=a.copy(),a.button=2,a.buttons=2,b.O=a,b.ys=!0,b.doMouseUp()))};
Hg.prototype.doMouseHover=function(){var a=this.g;if(null!==a){var b=a.O;null===b.ye&&(b.ye=a.re(b.ca,null,null));var c=b.ye;if(null!==c)for(b.zc=!1;null!==c;){a=this.qa?c.Rz:c.Sz;if(null!==a&&(a(b,c),b.zc))break;c=c.R}else a=this.qa?a.Rz:a.Sz,null!==a&&a(b)}};
Hg.prototype.doToolTip=function(){var a=this.g;if(null!==a){var b=a.O;null===b.ye&&(b.ye=a.re(b.ca,null,null));b=b.ye;if(null!==b){if(b!==this.dh&&!b.ul(this.dh)){for(;null!==b;){a=b.yA;if(null!==a){this.showToolTip(a,b);return}b=b.R}this.hideToolTip()}}else a=a.yA,null!==a?this.showToolTip(a,null):this.hideToolTip()}};
Hg.prototype.showToolTip=function(a,b){v.A(a,Vg,Hg,"showToolTip:tooltip");null!==b&&v.A(b,G,Hg,"showToolTip:obj");var c=this.g;if(null!==c){a!==this.dh&&this.hideToolTip();a.Tf="Tool";a.Al=!1;a.scale=1/c.scale;a.fc="ToolTip";null!==a.placeholder&&(a.placeholder.scale=c.scale);c.add(a);if(null!==b){var c=null,d=b.Uo();null!==d&&(c=d.data);a.Zb=b;a.data=c}else a.data=c.ba;a.sf();this.positionToolTip(a,b);this.dh=a;-1!==this.um&&(v.clearTimeout(this.um),this.um=-1);c=this.MI;if(0<c&&Infinity!==c){var e=
this;this.um=v.setTimeout(function(){e.hideToolTip()},c)}}};Hg.prototype.positionToolTip=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.O.ca.copy(),d=a.Ca,e=b.rb;b.O.Xi&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}}};
Hg.prototype.hideToolTip=function(){-1!==this.um&&(v.clearTimeout(this.um),this.um=-1);var a=this.g;null!==a&&null!==this.dh&&(a.remove(this.dh),null!==this.Ku&&this.Ku.bj(this.dh.fc),this.dh.data=null,this.dh=this.dh.Zb=null)};v.defineProperty(Hg,{dh:"currentToolTip"},function(){return this.nB},function(a){null!==a&&v.A(a,Vg,Hg,"currentToolTip");this.nB=a;this.Ku=null!==a?a.Mf:null});
Hg.prototype.doMouseUp=function(){this.cancelWaitAfter();var a=this.g;if(null!==a){if(this.qa)for(var b=this.Wf.length,c=0;c<b;c++){var d=this.Wf.da(c);null===d.g&&d.Mc(this.g);if(d.canStart()){a.doFocus();a.Wa=d;a.Wa===d&&(d.qa||d.doActivate(),d.doMouseUp());return}}a.doFocus();this.doDeactivate()}};Hg.prototype.doMouseWheel=function(){this.standardMouseWheel()};Hg.prototype.doKeyDown=function(){var a=this.g;null!==a&&a.nb.doKeyDown()};Hg.prototype.doKeyUp=function(){var a=this.g;null!==a&&a.nb.doKeyUp()};
Hg.prototype.doCancel=function(){null!==jh&&jh.doCancel();Xf.prototype.doCancel.call(this)};Hg.prototype.findTool=function(a){v.j(a,"string",Hg,"findTool:name");for(var b=this.Pe.length,c=0;c<b;c++){var d=this.Pe.da(c);if(d.name===a)return d}b=this.Vf.length;for(c=0;c<b;c++)if(d=this.Vf.da(c),d.name===a)return d;b=this.Wf.length;for(c=0;c<b;c++)if(d=this.Wf.da(c),d.name===a)return d;return null};
Hg.prototype.replaceTool=function(a,b){v.j(a,"string",Hg,"replaceTool:name");null!==b&&(v.A(b,Xf,Hg,"replaceTool:newtool"),b.g&&b.g!==this.g&&v.k("Cannot share tools between Diagrams: "+b.toString()),b.Mc(this.g));for(var c=this.Pe.length,d=0;d<c;d++){var e=this.Pe.da(d);if(e.name===a)return null!==b?this.Pe.Ig(d,b):this.Pe.Vc(d),e}c=this.Vf.length;for(d=0;d<c;d++)if(e=this.Vf.da(d),e.name===a)return null!==b?this.Vf.Ig(d,b):this.Vf.Vc(d),e;c=this.Wf.length;for(d=0;d<c;d++)if(e=this.Wf.da(d),e.name===
a)return null!==b?this.Wf.Ig(d,b):this.Wf.Vc(d),e;return null};function Hj(a,b,c,d){v.j(b,"string",Hg,"replaceStandardTool:name");v.A(d,I,Hg,"replaceStandardTool:list");null!==c&&(v.A(c,Xf,Hg,"replaceStandardTool:newtool"),c.g&&c.g!==a.g&&v.k("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.Mc(a.g));a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}v.u(Hg,{Pe:"mouseDownTools"},function(){return this.FF});v.u(Hg,{Vf:"mouseMoveTools"},function(){return this.GF});
v.u(Hg,{Wf:"mouseUpTools"},function(){return this.HF});v.defineProperty(Hg,{gH:"hoverDelay"},function(){return this.JB},function(a){v.j(a,"number",Hg,"hoverDelay");this.JB=a});v.defineProperty(Hg,{XD:"holdDelay"},function(){return this.IB},function(a){v.j(a,"number",Hg,"holdDelay");this.IB=a});v.defineProperty(Hg,{KG:"dragSize"},function(){return this.xB},function(a){v.A(a,ia,Hg,"dragSize");this.xB=a.S()});
v.defineProperty(Hg,{MI:"toolTipDuration"},function(){return this.SC},function(a){v.j(a,"number",Hg,"toolTipDuration");this.SC=a});v.defineProperty(Hg,{XF:"actionTool"},function(){return this.findTool("Action")},function(a){Hj(this,"Action",a,this.Pe)});v.defineProperty(Hg,{CE:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){Hj(this,"Relinking",a,this.Pe)});
v.defineProperty(Hg,{FH:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){Hj(this,"LinkReshaping",a,this.Pe)});v.defineProperty(Hg,{NE:"resizingTool"},function(){return this.findTool("Resizing")},function(a){Hj(this,"Resizing",a,this.Pe)});v.defineProperty(Hg,{pI:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){Hj(this,"Rotating",a,this.Pe)});
v.defineProperty(Hg,{rE:"linkingTool"},function(){return this.findTool("Linking")},function(a){Hj(this,"Linking",a,this.Vf)});v.defineProperty(Hg,{ae:"draggingTool"},function(){return this.findTool("Dragging")},function(a){Hj(this,"Dragging",a,this.Vf)});v.defineProperty(Hg,{JG:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){Hj(this,"DragSelecting",a,this.Vf)});
v.defineProperty(Hg,{ZH:"panningTool"},function(){return this.findTool("Panning")},function(a){Hj(this,"Panning",a,this.Vf)});v.defineProperty(Hg,{hz:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){Hj(this,"ContextMenu",a,this.Wf)});v.defineProperty(Hg,{vA:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){Hj(this,"TextEditing",a,this.Wf)});
v.defineProperty(Hg,{mG:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){Hj(this,"ClickCreating",a,this.Wf)});v.defineProperty(Hg,{nG:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){Hj(this,"ClickSelecting",a,this.Wf)});
function vg(){this.oB=Ij;this.uq=this.vq=this.W=null;this.ln=this.wq=this.xq=0;this.mn=this.pc=this.Un=this.tj=!1;this.uj=this.Se=!0;this.Iu=this.Hu=this.jB=null;this.iB=0;this.vo=this.Ju=null;this.uu=new J("string");this.ay=600;this.LF=new z(0,0);this.XA=this.WA=this.WC=!1;this.fm=new na(G,Jj)}v.ea("AnimationManager",vg);vg.prototype.Mc=function(a){this.W=a};function Ij(a,b,c,d){a/=d/2;return 1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}
v.defineProperty(vg,{tA:"starting"},function(){return this.vo},function(a){this.vo!==a&&(null!==a&&v.j(a,"function",vg,"starting"),this.vo=a)});v.u(vg,{rJ:"animationReasons"},function(){return this.uu});vg.prototype.prepareAutomaticAnimation=vg.prototype.Xm=function(a){if(this.Se&&(this.uj||this.W.Qm)){this.uu.add(a);var b=this.tA;if(null===b||b(this,a))this.tj&&this.$h(),this.pc=!0}};
function Kj(a){if(a.Se&&(a.uu.clear(),a.pc))if(!a.mn)a.pc=!1;else if(0===a.ln){var b=+new Date;a.ln=b;requestAnimationFrame(function(){if(!1!==a.pc&&!a.tj&&a.ln===b){var c=a.W;c.Ui("temporaryPixelRatio")&&(c.Nj=1);Lj(c);a.pc=!1;c.Ba("AnimationStarting");Mj(a,b)}})}}
function Nj(a,b,c,d,e,f){if(!(!a.pc||"position"===c&&d.K(e)||b instanceof R&&!b.$D)){var h=a.fm;if(h.contains(b)){var h=h.ja(b),k=h.start,l=h.end;void 0===k[c]&&(k[c]=Oj(d));h.tw&&void 0!==l[c]?h.ct[c]=Oj(e):(f||(h.ct[c]=Oj(e)),l[c]=Oj(e));f&&0===c.indexOf("position:")&&(h.ct.location=Oj(b.location))}else k=new ta,l=new ta,k[c]=Oj(d),l[c]=Oj(e),d=l,e=k.position,e instanceof z&&!e.G()&&a.uu.contains("Expand SubGraph")&&e.assign(d.position),k=new Jj(k,l,f),f&&0===c.indexOf("position:")&&(k.ct.location=
Oj(b.location)),h.add(b,k);a.mn=!0}}function Oj(a){return a instanceof z?a.copy():a instanceof ia?a.copy():a}
function Mj(a,b){var c;function d(){if(!1!==f.tj&&f.ln===b){var a=+new Date,c=a>s?m:a-r;Pj(f);Qj(f,e,q,h,c,m);f.Hu&&f.Hu();di(e);Rj(f);a>s?Sj(f):requestAnimationFrame(d)}}void 0===c&&(c=new ta);var e=a.W;if(null!==e){a.tj=!0;var f=a,h=c.NJ||a.oB,k=c.nK||null,l=c.oK||null,m=c.duration||a.ay,n=a.LF;for(c=a.fm.i;c.next();){var p=c.value.start.position;p instanceof z&&(p.G()||p.assign(n))}a.jB=h;a.Hu=k;a.Iu=l;a.iB=m;a.Ju=a.fm;var q=a.Ju;for(c=q.i;c.next();)k=c.value.end,k["position:placeholder"]&&(l=
k["position:placeholder"],n=l.Xa(rb),n.x+=l.padding.left,n.y+=l.padding.top,k["position:placeholder"]=n);Pj(a);Qj(a,e,q,h,0,m);di(a.W);Rj(a);var r=+new Date,s=r+m;f.ln===b&&requestAnimationFrame(function(){d()})}}
var Tj={opacity:function(a,b,c,d,e,f){a.opacity=d(e,b,c-b,f)},position:function(a,b,c,d,e,f){e!==f?a.px(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f)):a.position=new z(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f))},"position:node":function(a,b,c,d,e,f){var h=a.U,k=c.U;c=k.x+k.width/2-h.width/2;h=k.y+k.height/2-h.height/2;e!==f?a.px(d(e,b.x,c-b.x,f),d(e,b.y,h-b.y,f)):a.position=new z(d(e,b.x,c-b.x,f),d(e,b.y,h-b.y,f))},"position:placeholder":function(a,b,c,d,e,f){e!==f?a.px(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f)):
a.position=new z(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f))},scale:function(a,b,c,d,e,f){a.scale=d(e,b,c-b,f)},visible:function(a,b,c,d,e,f){a.visible=e!==f?b:c}};function Pj(a){if(!a.Un){var b=a.W;a.WC=b.tb;a.WA=b.we;a.XA=b.bu;b.tb=!0;b.we=!0;b.bu=!0;a.Un=!0}}function Rj(a){var b=a.W;b.tb=a.WC;b.we=a.WA;b.bu=a.XA;a.Un=!1}
function Qj(a,b,c,d,e,f){for(c=c.i;c.next();){var h=c.key,k=c.value,l=k.start,k=k.end,m;for(m in k)if(("position"!==m||!k["position:placeholder"]&&!k["position:node"])&&void 0!==Tj[m])Tj[m](h,l[m],k[m],d,e,f)}d=b.Ez;b.Ez=!0;m=a.oB;0!==a.xq&&0!==a.wq&&(c=a.xq,b.Tb=m(e,c,a.wq-c,f));null!==a.vq&&null!==a.uq&&(c=a.vq,a=a.uq,b.kb=new z(m(e,c.x,a.x-c.x,f),m(e,c.y,a.y-c.y,f)));b.Ez=d}vg.prototype.stopAnimation=vg.prototype.$h=function(){!0===this.pc&&(this.pc=!1,this.mn&&this.W.ue());this.tj&&this.Se&&Sj(this)};
function Sj(a){a.tj=!1;a.ln=0;a.mn=!1;a.vq=null;a.uq=null;a.xq=0;a.wq=0;Pj(a);for(var b=a.W,c=a.jB,d=a.iB,e=a.Ju.i;e.next();){var f=e.key,h=e.value,k=h.start,l=h.end,m=h.ct,n;for(n in l)if(void 0!==Tj[n]){var p=n;!h.tw||"position:node"!==p&&"position:placeholder"!==p||(p="position");Tj[p](f,k[n],void 0!==m[n]?m[n]:h.tw?k[n]:l[n],c,d,d)}h.tw&&void 0!==m.location&&(f.location=m.location);h.ex&&f.nd(!1)}for(c=a.W.links;c.next();)d=c.value,null!==d.oo&&(d.points=d.oo,d.oo=null);b.Sw.clear();b.Nj=null;
b.qc();b.pa();b.Uf();Uj(b);Rj(a);a.Ju=null;a.fm=new na(G,Jj);a.Iu&&a.Iu();a.Iu=null;a.Hu=null;b.Ba("AnimationFinished");b.ue()}function Vj(a,b,c){var d=b.U,e=c.U,f=null;c instanceof V&&(f=c.placeholder);null!==f?(d=f.Xa(rb),d.x+=f.padding.left,d.y+=f.padding.top,Nj(a,b,"position",d,b.position,!1)):Nj(a,b,"position",new z(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position,!1);Nj(a,b,"scale",.01,b.scale,!1);if(b instanceof V)for(b=b.Ic;b.next();)f=b.value,f instanceof S&&Vj(a,f,c)}
function Wj(a,b,c){if(b.isVisible()){var d=null;c instanceof V&&(d=c.placeholder);null!==d?Nj(a,b,"position:placeholder",b.position,d,!0):Nj(a,b,"position:node",b.position,c,!0);Nj(a,b,"scale",b.scale,.01,!0);a.pc&&(d=a.fm,d.contains(b)&&(d.ja(b).ex=!0));if(b instanceof V)for(b=b.Ic;b.next();)d=b.value,d instanceof S&&Wj(a,d,c)}}function Xj(a,b,c){a.pc&&(null===a.vq&&b.G()&&null===a.uq&&(a.vq=b.copy()),a.uq=c.copy(),a.mn=!0)}
function Yj(a,b,c){a.pc&&a.W.Qm&&(0===a.xq&&0===a.wq&&(a.xq=b),a.wq=c,a.mn=!0)}v.defineProperty(vg,{isEnabled:"isEnabled"},function(){return this.Se},function(a){v.j(a,"boolean",vg,"isEnabled");this.Se=a});v.defineProperty(vg,{duration:"duration"},function(){return this.ay},function(a){v.j(a,"number",vg,"duration");1>a&&v.va(a,">= 1",vg,"duration");this.ay=a});v.u(vg,{df:"isAnimating"},function(){return this.tj});v.u(vg,{vH:"isTicking"},function(){return this.Un});
v.defineProperty(vg,{iE:"isInitial"},function(){return this.uj},function(a){v.j(a,"boolean",vg,"isInitial");this.uj=a});function Jj(a,b,c){this.start=a;this.end=b;this.ct=new ta;this.tw=c;this.ex=!1}function Wf(){0<arguments.length&&v.cd(Wf);v.dc(this);this.W=null;this.wb=new I(R);this.Ob="";this.Rc=1;this.vy=!1;this.Uk=this.Vy=this.rk=this.qk=this.pk=this.ok=this.mk=this.nk=this.lk=this.tk=this.kk=this.sk=this.jk=this.ik=!0;this.py=!1;this.Cv=[]}v.ea("Layer",Wf);
Wf.prototype.Mc=function(a){this.W=a};
Wf.prototype.toString=function(a){void 0===a&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,f=0,h=0,k=this.wb.i;k.next();){var l=k.value;l instanceof V?e++:l instanceof S?d++:l instanceof W?f++:l instanceof Vg?h++:c++}k="";0<c&&(k+=c+" Parts ");0<d&&(k+=d+" Nodes ");0<e&&(k+=e+" Groups ");0<f&&(k+=f+" Links ");0<h&&(k+=h+" Adornments ");if(1<a)for(a=this.wb.i;a.next();)c=a.value,k+="\n    "+c.toString(),d=c.data,null!==d&&v.ld(d)&&(k+=" #"+v.ld(d)),c instanceof S?k+=" "+
Ef(d):c instanceof W&&(k+=" "+Ef(c.T)+" "+Ef(c.Z));return b+" "+this.wb.count+": "+k};Wf.prototype.findObjectAt=Wf.prototype.re=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);if(!1===this.Uk)return null;var d=!1;this.g.rb.Fa(a)&&(d=!0);for(var e=v.L(),f=this.wb.n,h=f.length;h--;){var k=f[h];if((!0!==d||!1!==Zj(k))&&k.isVisible()&&(e.assign(a),Qa(e,k.Zg),k=k.re(e,b,c),null!==k&&(null!==b&&(k=b(k)),null!==k&&(null===c||c(k)))))return v.v(e),k}v.v(e);return null};
Wf.prototype.findObjectsAt=Wf.prototype.gt=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof I||d instanceof J||(d=new J(G));if(!1===this.Uk)return d;var e=!1;this.g.rb.Fa(a)&&(e=!0);for(var f=v.L(),h=this.wb.n,k=h.length;k--;){var l=h[k];!0===e&&!1===Zj(l)||!l.isVisible()||(f.assign(a),Qa(f,l.Zg),l.gt(f,b,c,d)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||d.add(l)))}v.v(f);return d};
Wf.prototype.findObjectsIn=Wf.prototype.Zj=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof I||e instanceof J||(e=new J(G));if(!1===this.Uk)return e;var f=!1;this.g.rb.Xj(a)&&(f=!0);for(var h=this.wb.n,k=h.length;k--;){var l=h[k];(!0!==f||!1!==Zj(l))&&l.isVisible()&&l.Zj(a,b,c,d,e)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||e.add(l))}return e};
Wf.prototype.sz=function(a,b,c,d,e,f,h){if(!1===this.Uk)return e;for(var k=this.wb.n,l=k.length;l--;){var m=k[l];(!0!==h||!1!==Zj(m))&&f(m)&&m.isVisible()&&m.Zj(a,b,c,d,e)&&(null!==b&&(m=b(m)),null===m||null!==c&&!c(m)||e.add(m))}return e};
Wf.prototype.findObjectsNear=Wf.prototype.Km=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof I||e instanceof J)f=e;e=!0}f instanceof I||f instanceof J||(f=new J(G));if(!1===this.Uk)return f;var h=!1;this.g.rb.Fa(a)&&(h=!0);for(var k=v.L(),l=v.L(),m=this.wb.n,n=m.length;n--;){var p=m[n];!0===h&&!1===Zj(p)||!p.isVisible()||(k.assign(a),Qa(k,p.Zg),l.m(a.x+b,a.y),Qa(l,p.Zg),p.Km(k,l,c,d,e,f)&&(null!==c&&(p=c(p)),null===p||null!==d&&
!d(p)||f.add(p)))}v.v(k);v.v(l);return f};g=Wf.prototype;g.yf=function(a,b){if(this.visible){var c;c=void 0===b?a.rb:b;for(var d=this.wb.n,e=d.length,f=0;f<e;f++){var h=d[f];h.aC=f;if(!(h instanceof W&&!1===h.rg)){if(h instanceof Vg){var k=h;if(null!==k.Mf)continue}if(Za(h.U,c))for(h.yf(!0),ak(h),h=h.hw;h.next();)k=h.value,kj(k,Infinity,Infinity),k.Ec(),k.yf(!0);else h.yf(!1),null!==h.hw&&0<h.hw.count&&ak(h)}}}};
g.Xe=function(a,b,c){if(this.visible&&0!==this.Rc&&(void 0===c&&(c=!0),c||!this.Gc)){c=this.wb.n;var d=c.length;if(0!==d){1!==this.Rc&&(a.globalAlpha=this.Rc);var e=this.Cv;e.length=0;for(var f=b.scale,h=0;h<d;h++){var k=c[h];if(Zj(k)){if(k instanceof W){var l=k;l.jc&&e.push(l);if(!1===l.rg)continue}l=k.U;1<l.width*f||1<l.height*f?k.Xe(a,b):bk(k,a)}}a.globalAlpha=1}}};
function ck(a,b,c,d){if(a.visible&&0!==a.Rc){1!==a.Rc&&(b.globalAlpha=a.Rc);var e=a.Cv;e.length=0;var f=c.scale;a=a.wb.n;for(var h=a.length,k=d.length,l=0;l<h;l++){var m=a[l];if(Zj(m)){if(m instanceof W){var n=m;n.jc&&e.push(n);if(!1===n.rg)continue}var n=dk(m,m.U),p;a:{p=n;for(var q=d,r=k,s=2/f,t=4/f,u=0;u<r;u++){var x=q[u];if(0!==x.width&&0!==x.height&&p.YD(x.x-s,x.y-s,x.width+t,x.height+t)){p=!0;break a}}p=!1}p&&(1<n.width*f||1<n.height*f?m.Xe(b,c):bk(m,b))}}b.globalAlpha=1}}
g.h=function(a,b,c,d,e){var f=this.g;null!==f&&f.Lc(Af,a,this,b,c,d,e)};g.cp=function(a,b,c){var d=this.wb;b.mv=this;if(a>=d.count)a=d.count;else if(d.da(a)===b)return-1;d.yd(a,b);b.qt(c);d=this.g;null!==d&&(c?d.pa():d.cp(b));ek(this,a,b);return a};
g.Ne=function(a,b,c){if(!c&&b.layer!==this&&null!==b.layer)return b.layer.Ne(a,b,c);var d=this.wb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.da(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.rt(c);d.Vc(a);d=this.g;null!==d&&(c?d.pa():d.Ne(b));b.mv=null;return a};
function ek(a,b,c){b=fk(a,b,c);if(c instanceof V&&null!==c&&isNaN(c.hn)){if(0!==c.Ic.count){for(var d=-1,e=a.wb.n,f=e.length,h=0;h<f;h++){var k=e[h];if(k===c&&(b=h,0<=d))break;if(0>d&&k.Oa===c&&(d=h,0<=b))break}!(0>d)&&d<b&&(e=a.wb,e.Vc(b),e.yd(d,c))}c=c.Oa;null!==c&&ek(a,-1,c)}}
function fk(a,b,c){var d=c.hn;if(isNaN(d))return b;a=a.wb;var e=a.count;if(1>=e)return b;0>b&&(b=a.indexOf(c));if(0>b)return-1;for(var f=b-1,h=NaN;0<=f;){h=a.da(f).hn;if(!isNaN(h))break;f--}for(var k=b+1,l=NaN;k<e;){l=a.da(k).hn;if(!isNaN(l))break;k++}if(!isNaN(h)&&h>d)for(;;){if(-1===f||h<=d){f++;if(f===b)break;a.Vc(b);a.yd(f,c);return f}for(h=NaN;0<=--f&&(h=a.da(f).hn,isNaN(h)););}else if(!isNaN(l)&&l<d)for(;;){if(k===e||l>=d){k--;if(k===b)break;a.Vc(b);a.yd(k,c);return k}for(l=NaN;++k<e&&(l=a.da(k).hn,
isNaN(l)););}return b}g.clear=function(){for(var a=this.wb.cc(),b=a.length,c=0;c<b;c++)a[c].yf(!1),this.Ne(-1,a[c],!1)};v.u(Wf,{ek:"parts"},function(){return this.wb.i});v.u(Wf,{xK:"partsBackwards"},function(){return this.wb.Rm});v.u(Wf,{g:"diagram"},function(){return this.W});
v.defineProperty(Wf,{name:"name"},function(){return this.Ob},function(a){v.j(a,"string",Wf,"name");var b=this.Ob;if(b!==a){var c=this.g;if(null!==c)for(""===b&&v.k("Cannot rename default Layer to: "+a),c=c.Qw;c.next();)c.value.name===a&&v.k("Layer.name is already present in this diagram: "+a);this.Ob=a;this.h("name",b,a);for(a=this.wb.i;a.next();)a.value.Tf=this.Ob}});
v.defineProperty(Wf,{opacity:"opacity"},function(){return this.Rc},function(a){var b=this.Rc;b!==a&&(v.j(a,"number",Wf,"opacity"),(0>a||1<a)&&v.va(a,"0 <= value <= 1",Wf,"opacity"),this.Rc=a,this.h("opacity",b,a),a=this.g,null!==a&&a.pa())});v.defineProperty(Wf,{Gc:"isTemporary"},function(){return this.vy},function(a){var b=this.vy;b!==a&&(v.j(a,"boolean",Wf,"isTemporary"),this.vy=a,this.h("isTemporary",b,a))});
v.defineProperty(Wf,{visible:"visible"},function(){return this.Vy},function(a){var b=this.Vy;if(b!==a){v.j(a,"boolean",Wf,"visible");this.Vy=a;this.h("visible",b,a);for(b=this.wb.i;b.next();)b.value.nd(a);a=this.g;null!==a&&a.pa()}});v.defineProperty(Wf,{Hg:"pickable"},function(){return this.Uk},function(a){var b=this.Uk;b!==a&&(v.j(a,"boolean",Wf,"pickable"),this.Uk=a,this.h("pickable",b,a))});
v.defineProperty(Wf,{aE:"isBoundsIncluded"},function(){return this.py},function(a){this.py!==a&&(this.py=a,null!==this.g&&this.g.qc())});v.defineProperty(Wf,{Vj:"allowCopy"},function(){return this.ik},function(a){var b=this.ik;b!==a&&(v.j(a,"boolean",Wf,"allowCopy"),this.ik=a,this.h("allowCopy",b,a))});v.defineProperty(Wf,{xm:"allowDelete"},function(){return this.jk},function(a){var b=this.jk;b!==a&&(v.j(a,"boolean",Wf,"allowDelete"),this.jk=a,this.h("allowDelete",b,a))});
v.defineProperty(Wf,{lw:"allowTextEdit"},function(){return this.sk},function(a){var b=this.sk;b!==a&&(v.j(a,"boolean",Wf,"allowTextEdit"),this.sk=a,this.h("allowTextEdit",b,a))});v.defineProperty(Wf,{iw:"allowGroup"},function(){return this.kk},function(a){var b=this.kk;b!==a&&(v.j(a,"boolean",Wf,"allowGroup"),this.kk=a,this.h("allowGroup",b,a))});
v.defineProperty(Wf,{mw:"allowUngroup"},function(){return this.tk},function(a){var b=this.tk;b!==a&&(v.j(a,"boolean",Wf,"allowUngroup"),this.tk=a,this.h("allowUngroup",b,a))});v.defineProperty(Wf,{Ts:"allowLink"},function(){return this.lk},function(a){var b=this.lk;b!==a&&(v.j(a,"boolean",Wf,"allowLink"),this.lk=a,this.h("allowLink",b,a))});
v.defineProperty(Wf,{ym:"allowRelink"},function(){return this.nk},function(a){var b=this.nk;b!==a&&(v.j(a,"boolean",Wf,"allowRelink"),this.nk=a,this.h("allowRelink",b,a))});v.defineProperty(Wf,{bl:"allowMove"},function(){return this.mk},function(a){var b=this.mk;b!==a&&(v.j(a,"boolean",Wf,"allowMove"),this.mk=a,this.h("allowMove",b,a))});
v.defineProperty(Wf,{jw:"allowReshape"},function(){return this.ok},function(a){var b=this.ok;b!==a&&(v.j(a,"boolean",Wf,"allowReshape"),this.ok=a,this.h("allowReshape",b,a))});v.defineProperty(Wf,{Us:"allowResize"},function(){return this.pk},function(a){var b=this.pk;b!==a&&(v.j(a,"boolean",Wf,"allowResize"),this.pk=a,this.h("allowResize",b,a))});
v.defineProperty(Wf,{kw:"allowRotate"},function(){return this.qk},function(a){var b=this.qk;b!==a&&(v.j(a,"boolean",Wf,"allowRotate"),this.qk=a,this.h("allowRotate",b,a))});v.defineProperty(Wf,{of:"allowSelect"},function(){return this.rk},function(a){var b=this.rk;b!==a&&(v.j(a,"boolean",Wf,"allowSelect"),this.rk=a,this.h("allowSelect",b,a))});
function E(a){function b(){window.document.removeEventListener("DOMContentLoaded",b,!1);gk(c)}1<arguments.length&&v.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");v.dc(this);hk=[];this.Pc=!0;this.QA=new vg;this.QA.Mc(this);this.vd=17;this.Tq=!1;this.Iy="default";var c=this;null!==window.document.body?gk(this):window.document.addEventListener("DOMContentLoaded",b,!1);this.Yb=new I(Wf);this.Jb=this.Eb=0;this.Hj=this.Kb=this.lf=this.zb=null;this.JE();this.Rn=
null;this.IE();this.kb=(new z(NaN,NaN)).freeze();this.Tb=1;this.dv=(new z(NaN,NaN)).freeze();this.ev=NaN;this.tv=1E-4;this.rv=100;this.ne=new ja;this.fw=(new z(NaN,NaN)).freeze();this.Vu=(new A(NaN,NaN,NaN,NaN)).freeze();this.Ov=(new cb(0,0,0,0)).freeze();this.Pv=ik;this.Lv=this.Hv=null;this.Ml=$g;this.tn=fc;this.Ek=$g;this.On=fc;this.fv=this.cv=rb;this.ke=!0;this.Nq=!1;this.fg=new J(G);this.yk=new na(W,A);this.Gn=!0;this.VA=250;this.nn=-1;this.xu=(new cb(16,16,16,16)).freeze();this.Nu=this.Lf=!1;
this.Kn=!0;this.ri=new xf;this.Sc=new xf;this.Nb=new xf;this.Sg=this.fi=null;this.ys=!1;this.Wx=this.Xx=null;jk(this);this.jo=new J(S);this.Wk=new J(V);this.ao=new J(W);this.wb=new J(R);this.jv=!0;this.aw=kk;this.MB=!1;this.cw=hi;this.Sx=this.Ux=this.Sy=null;this.Gu="";this.tq="auto";this.ki=this.Ji=this.zi=this.wv=this.Ai=this.Bi=this.Ci=this.ji=this.pi=this.gi=null;this.Dy=!1;this.tC={};this.Gv=0;this.Jf=[null,null];this.Ox=null;this.Qp=this.Vx=this.My=this.AC=this.Ii=!1;this.YB=!0;this.sy=this.Hd=
!1;this.Wd=null;var d=this;this.eC=function(a){if(a.ba===d.ba&&d.Sa){d.Sa=!1;try{var b=a.wc;""===a.hf&&b===Af&&lk(d,a.object,a.propertyName)}finally{d.Sa=!0}}};this.fC=function(a){mk(d,a)};this.YC=!0;this.Pg=-2;this.li=new na(Object,R);this.xk=new na(Object,W);this.Wl=new na(Object,Array);this.ko=new na("string",Array);this.sC=new I(nk);this.ti=!1;this.jk=this.ik=this.mu=this.Se=!0;this.ou=this.nu=!1;this.tu=this.ru=this.rk=this.qk=this.pk=this.ok=this.mk=this.nk=this.lk=this.qu=this.tk=this.kk=this.sk=
!0;this.Tl=this.VB=!1;this.su=this.pu=this.av=this.$u=!0;this.Rv=this.Nv=16;this.Jy=this.Mv=!1;this.cs=this.Qv=null;this.Ky=this.Ly=0;this.Ue=(new cb(5)).freeze();this.Tv=(new J(R)).freeze();this.sv=999999999;this.bv=(new J(R)).freeze();this.Fk=this.Rl=this.sj=!0;this.Ck=this.rj=!1;this.Vd=null;this.vu=!0;this.Rg=!1;this.EF=new J(W);this.KB=new J(ok);this.td=null;this.kC=1;this.ky=!1;this.DC=0;this.XC=(new A(NaN,NaN,NaN,NaN)).freeze();this.Ou=(new A(NaN,NaN,NaN,NaN)).freeze();this.Dv=new J(pk);qk(this);
this.ov=this.Xu=this.xv=this.qB=this.pB=this.rB=this.yj=this.Ak=this.Di=null;rk(this);this.hd=null;this.Wu=!1;this.wn=null;this.Za=new Hg;this.Za.initializeStandardTools();this.Wa=this.$s=this.Za;this.nb=new Yf;this.ba=new Q;this.Ii=!0;this.Pb=new Zf;this.Ii=!1;this.CB=this.Zx=null;this.rd=1;this.Nj=null;this.Dk=new sk;void 0!==a&&tk(this,a);this.Jk=1;this.Yl=0;this.$B=new z;this.UC=500;this.wu=new z;this.qs=null;this.Pc=this.Gk=!1}v.ea("Diagram",E);
function rk(a){a.Di=new na("string",R);var b=new S,c=new bh;c.bind(new Ag("text","",Ef));b.add(c);a.rB=b;a.Di.add("",b);b=new S;c=new bh;c.stroke="brown";c.bind(new Ag("text","",Ef));b.add(c);a.Di.add("Comment",b);b=new S;b.Al=!1;b.mD=!1;c=new Y;c.Ab="Ellipse";c.fill="black";c.stroke=null;c.za=(new ia(3,3)).Ea();b.add(c);a.Di.add("LinkLabel",b);a.Ak=new na("string",V);b=new V;b.lA="GROUPPANEL";b.type=uk;c=new bh;c.font="bold 12pt sans-serif";c.bind(new Ag("text","",Ef));b.add(c);c=new D(vk);c.name=
"GROUPPANEL";var d=new Y;d.Ab="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Ri;d.padding=(new cb(5,5,5,5)).Ea();c.add(d);b.add(c);a.pB=b;a.Ak.add("",b);a.yj=new na("string",W);b=new W;c=new Y;c.Rf=!0;b.add(c);c=new Y;c.Kp="Standard";c.fill="black";c.stroke=null;c.lb=0;b.add(c);a.qB=b;a.yj.add("",b);b=new W;c=new Y;c.Rf=!0;c.stroke="brown";b.add(c);a.yj.add("Comment",b);b=new Vg;b.type=vk;c=new Y;c.fill=null;c.stroke="dodgerblue";c.lb=3;b.add(c);c=new Ri;c.margin=(new cb(1.5,
1.5,1.5,1.5)).Ea();b.add(c);a.xv=b;a.Xu=b;b=new Vg;b.type=Di;c=new Y;c.Rf=!0;c.fill=null;c.stroke="dodgerblue";c.lb=3;b.add(c);a.ov=b}
function gk(a){var b=v.createElement("p");b.style.width="100%";b.style.height="200px";b.style.boxSizing="content-box";var c=v.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.style.boxSizing="content-box";c.appendChild(b);window.document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);window.document.body.removeChild(c);c=d-b;0!==c||v.gE||
(c=11);a.vd=c;c=v.createElement("div");c.dir="rtl";c.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";c.textContent="A";window.document.body.appendChild(c);d="reverse";0<c.scrollLeft?d="default":(c.scrollLeft=1,0===c.scrollLeft&&(d="negative"));window.document.body.removeChild(c);a.Iy=d}
E.prototype.toString=function(a){void 0===a&&(a=0);var b="";this.id&&(b=this.id);this.jl&&this.jl.id&&(b=this.jl.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Yb.i;c.next();)b+="\n  "+c.value.toString(a-1);return b};E.fromDiv=function(a){var b=a;"string"===typeof a&&(b=window.document.getElementById(a));return b instanceof HTMLDivElement&&b.W instanceof E?b.W:null};
v.defineProperty(E,{jl:"div"},function(){return this.Kb},function(a){null!==a&&v.A(a,HTMLDivElement,E,"div");if(this.Kb!==a){hk=[];var b=this.Kb;null!==b?(b.W=void 0,b.innerHTML="",null!==this.zb&&(this.zb.removeEventListener("touchstart",this.kF,!1),this.zb.removeEventListener("touchmove",this.jF,!1),this.zb.removeEventListener("touchend",this.iF,!1),this.zb.xd.W=null),b=this.Za,null!==b&&(b.Pe.each(function(a){a.cancelWaitAfter()}),b.Vf.each(function(a){a.cancelWaitAfter()}),b.Wf.each(function(a){a.cancelWaitAfter()})),
b.cancelWaitAfter(),this.Wa.doCancel(),this.lf=this.zb=null,window.removeEventListener("resize",this.uF,!1),window.removeEventListener("mousemove",this.op,!0),window.removeEventListener("mousedown",this.np,!0),window.removeEventListener("mouseup",this.qp,!0),window.removeEventListener("mousewheel",this.lh,!0),window.removeEventListener("DOMMouseScroll",this.lh,!0),window.removeEventListener("mouseout",this.pp,!0)):this.Rg=!1;this.Kb=null;if(null!==a){if(b=a.W)b.jl=null;tk(this,a);this.bx()}}});
function wk(a){var b=a.zb;b.addEventListener("touchstart",a.kF,!1);b.addEventListener("touchmove",a.jF,!1);b.addEventListener("touchend",a.iF,!1);b.addEventListener("mousemove",a.op,!1);b.addEventListener("mousedown",a.np,!1);b.addEventListener("mouseup",a.qp,!1);b.addEventListener("mousewheel",a.lh,!1);b.addEventListener("DOMMouseScroll",a.lh,!1);b.addEventListener("mouseout",a.pp,!1);b.addEventListener("keydown",a.yH,!1);b.addEventListener("keyup",a.zH,!1);b.addEventListener("selectstart",function(a){a.preventDefault();
return!1},!1);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("gesturechange",function(b){a.Za.Xo===Ej&&b.preventDefault()},!1);b.addEventListener("pointerdown",a.$H,!1);b.addEventListener("pointermove",a.bI,!1);b.addEventListener("pointerleave",a.aI,!1);window.addEventListener("resize",a.uF,!1)}E.prototype.computePixelRatio=function(){return null!==this.Nj?this.Nj:this.IF};E.prototype.doMouseMove=function(){this.Wa.doMouseMove()};
E.prototype.doMouseDown=function(){this.Wa.doMouseDown()};E.prototype.doMouseUp=function(){this.Wa.doMouseUp()};E.prototype.doMouseWheel=function(){this.Wa.doMouseWheel()};E.prototype.doKeyDown=function(){this.Wa.doKeyDown()};E.prototype.doKeyUp=function(){this.Wa.doKeyUp()};E.prototype.doFocus=function(){this.focus()};E.prototype.focus=E.prototype.focus=function(){this.zb&&this.zb.focus()};
function Lj(a){if(null!==a.zb){var b=a.Kb;if(0!==b.clientWidth&&0!==b.clientHeight){var c=a.Ck?a.vd:0,d=a.rj?a.vd:0,e=a.rd;a.rd=a.computePixelRatio();a.rd!==e&&(a.Nq=!0,a.ue());if(b.clientWidth!==a.Eb+c||b.clientHeight!==a.Jb+d)a.Rl=!0,a.ke=!0,b=a.Pb,null!==b&&b.Nw&&a.cl===$g&&b.H(),a.Hd||a.ue()}}}
function qk(a){var b=new Wf;b.name="Background";a.Ns(b);b=new Wf;b.name="";a.Ns(b);b=new Wf;b.name="Foreground";a.Ns(b);b=new Wf;b.name="Adornment";b.Gc=!0;a.Ns(b);b=new Wf;b.name="Tool";b.Gc=!0;b.aE=!0;a.Ns(b);b=new Wf;b.name="Grid";b.of=!1;b.Hg=!1;b.Gc=!0;a.bG(b,a.et("Background"))}
function xk(a){a.hd=new D(yk);a.hd.name="GRID";var b=new Y;b.Ab="LineH";b.stroke="lightgray";b.lb=.5;b.interval=1;a.hd.add(b);b=new Y;b.Ab="LineH";b.stroke="gray";b.lb=.5;b.interval=5;a.hd.add(b);b=new Y;b.Ab="LineH";b.stroke="gray";b.lb=1;b.interval=10;a.hd.add(b);b=new Y;b.Ab="LineV";b.stroke="lightgray";b.lb=.5;b.interval=1;a.hd.add(b);b=new Y;b.Ab="LineV";b.stroke="gray";b.lb=.5;b.interval=5;a.hd.add(b);b=new Y;b.Ab="LineV";b.stroke="gray";b.lb=1;b.interval=10;a.hd.add(b);b=new R;b.add(a.hd);
b.Tf="Grid";b.hn=0;b.Gz=!1;b.$D=!1;b.Hg=!1;b.Lz="GRID";a.add(b);a.wb.remove(b);a.hd.visible=!1}E.prototype.KF=function(){this.W.isEnabled?this.W.IG(this):zk(this.W)};E.prototype.jC=function(a){this.W.isEnabled?(this.W.Jy=!0,this.W.Ly=a.target.scrollTop,this.W.Ky=a.target.scrollLeft):zk(this.W)};
E.prototype.diagramScroll=E.prototype.IG=function(a){if(this.Jy&&null!==this.zb){this.Mv=!0;var b=this.$d,c=this.rb,d=b.width,e=c.width,f=b.height,h=c.height,k=b.right,l=c.right,m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,r=this.scale,s;s=a.scrollLeft;if(this.Tq)switch(this.Iy){case "negative":s=s+a.scrollWidth-a.clientWidth;break;case "reverse":s=a.scrollWidth-s-a.clientWidth}var t=s;e<d||h<f?(s=v.Mb(this.position.x,this.position.y),this.oe&&this.Ky!==t&&(s.x=t/r+p,this.Ky=t),this.pe&&this.Ly!==
a.scrollTop&&(s.y=a.scrollTop/r+b,this.Ly=a.scrollTop),this.position=s,v.v(s),this.Rl=this.Mv=!1):(s=v.L(),a.OF&&this.oe&&(p<q&&(this.position=s.m(t+p,this.position.y)),k>l&&(this.position=s.m(-(this.Qv.scrollWidth-this.Eb)+t-this.Eb/r+k,this.position.y))),a.PF&&this.pe&&(b<c&&(this.position=s.m(this.position.x,a.scrollTop+b)),m>n&&(this.position=s.m(this.position.x,-(this.Qv.scrollHeight-this.Jb)+a.scrollTop-this.Jb/r+m))),v.v(s),Ak(this),this.Rl=this.Mv=!1,b=this.$d,c=this.rb,k=b.right,l=c.right,
m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,e>=d&&p>=q&&k<=l&&(this.cs.style.width="1px"),h>=f&&b>=c&&m<=n&&(this.cs.style.height="1px"))}};E.prototype.computeBounds=E.prototype.ah=function(){0<this.fg.count&&Bk(this);return Ck(this)};
function Ck(a){if(a.ND.G()){var b=a.ND.copy();b.gw(a.padding);return b}for(var c=!0,d=a.Yb.n,e=d.length,f=0;f<e;f++){var h=d[f];if(h.visible&&(!h.Gc||h.aE))for(var h=h.wb.n,k=h.length,l=0;l<k;l++){var m=h[l];m.Gz&&m.isVisible()&&(m=m.U,m.G()&&(c?(c=!1,b=m.copy()):b.bi(m)))}}c&&(b=new A(0,0,0,0));b.gw(a.padding);return b}
E.prototype.computePartsBounds=function(a){var b=null;for(a=a.i;a.next();){var c=a.value;c instanceof W||(c.sf(),null===b?b=c.U.copy():b.bi(c.U))}return null===b?new A(NaN,NaN,0,0):b};
function Dk(a,b){if((b||a.Rg)&&!a.Pc&&null!==a.zb&&!a.Na.df&&a.$d.G()){a.Pc=!0;var c=a.Ml;b&&a.Ek!==$g&&(c=a.Ek);var d=c!==$g?Ek(a,c):a.scale,c=a.rb.copy(),e=a.Eb/d,f=a.Jb/d,h=null,k=a.Na;k.pc&&(h=a.kb.copy());a.position.Pa();var l=a.tn;b&&!l.bd()&&a.On.bd()&&(l=a.On);Fk(a,a.kb,a.$d,e,f,l,b);a.position.freeze();null!==h&&Xj(k,h,a.kb);a.scale=d;a.Pc=!1;d=a.rb;d.Fc(c)||a.Lt(c,d)}}
function Ek(a,b){var c=a.nb.vw;if(null===a.zb)return c;a.sj&&Gk(a,a.ah());var d=a.$d;if(!d.G())return c;var e=d.width,d=d.height,f=a.Eb,h=a.Jb,k=f/e,l=h/d;return b===Hk?(e=Math.min(l,k),e>c&&(e=c),e<a.jh&&(e=a.jh),e>a.ih&&(e=a.ih),e):b===Ik?(e=l>k?(h-a.vd)/d:(f-a.vd)/e,e>c&&(e=c),e<a.jh&&(e=a.jh),e>a.ih&&(e=a.ih),e):a.scale}E.prototype.zoomToFit=E.prototype.zoomToFit=function(){this.scale=Ek(this,Hk)};
E.prototype.zoomToRect=function(a,b){void 0===b&&(b=Hk);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Hk||b===Ik)if(isNaN(c))e=this.rb.height*this.scale/d;else if(isNaN(d))e=this.rb.width*this.scale/c;else var e=this.Eb,f=this.Jb,e=b===Ik?f/d>e/c?(f-(this.rj?this.vd:0))/d:(e-(this.Ck?this.vd:0))/c:Math.min(f/d,e/c);this.scale=e;this.position=new z(a.x,a.y)}};v.defineProperty(E,{Ez:null},function(){return this.Pc},function(a){this.Pc=a});
E.prototype.alignDocument=function(a,b){this.sj&&Gk(this,this.ah());var c=this.$d,d=this.rb;this.position=new z(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY))};
function Fk(a,b,c,d,e,f,h){var k=b.x,l=b.y;if(h||a.jA===ik)f.bd()&&(d>c.width&&(k=c.x+(f.x*c.width+f.offsetX)-(f.x*d-f.offsetX)),e>c.height&&(l=c.y+(f.y*c.height+f.offsetY)-(f.y*e-f.offsetY))),f=a.QE,h=d-c.width,d<c.width+f.left+f.right?(k=Math.min(k+d/2,c.right+Math.max(h,f.right)-d/2),k=Math.max(k,c.left-Math.max(h,f.left)+d/2),k-=d/2):k>c.left?k=c.left:k<c.right-d&&(k=c.right-d),d=e-c.height,e<c.height+f.top+f.bottom?(l=Math.min(l+e/2,c.bottom+Math.max(d,f.bottom)-e/2),l=Math.max(l,c.top-Math.max(d,
f.top)+e/2),l-=e/2):l>c.top?l=c.top:l<c.bottom-e&&(l=c.bottom-e);b.x=isFinite(k)?k:-a.padding.left;b.y=isFinite(l)?l:-a.padding.top;null!==a.BE&&(a=a.BE(a,b),b.x=a.x,b.y=a.y)}E.prototype.findPartAt=E.prototype.ht=function(a,b){var c=b?Xh(this,a,function(a){return a.Y},function(a){return a.canSelect()}):Xh(this,a,function(a){return a.Y});return c instanceof R?c:null};
E.prototype.findObjectAt=E.prototype.re=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);Bk(this);for(var d=this.Yb.Rm;d.next();){var e=d.value;if(e.visible&&(e=e.re(a,b,c),null!==e))return e}return null};function Xh(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=null);Bk(a);for(a=a.Yb.Rm;a.next();){var e=a.value;if(e.visible&&!e.Gc&&(e=e.re(b,c,d),null!==e))return e}return null}
E.prototype.findObjectsAt=E.prototype.gt=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof I||d instanceof J||(d=new J(G));Bk(this);for(var e=this.Yb.Rm;e.next();){var f=e.value;f.visible&&f.gt(a,b,c,d)}return d};E.prototype.findObjectsIn=E.prototype.Zj=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof I||e instanceof J||(e=new J(G));Bk(this);for(var f=this.Yb.Rm;f.next();){var h=f.value;h.visible&&h.Zj(a,b,c,d,e)}return e};
E.prototype.sz=function(a,b,c,d,e,f){var h=new J(G);Bk(this);for(var k=this.Yb.Rm;k.next();){var l=k.value;l.visible&&l.sz(a,b,c,d,h,e,f)}return h};E.prototype.findObjectsNear=E.prototype.Km=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof I||e instanceof J)f=e;e=!0}f instanceof I||f instanceof J||(f=new J(G));Bk(this);for(var h=this.Yb.Rm;h.next();){var k=h.value;k.visible&&k.Km(a,b,c,d,e,f)}return f};
E.prototype.acceptEvent=function(a){var b=this.Sc;this.Sc=this.Nb;this.Nb=b;Jk(this,this,a,b,a instanceof MouseEvent);return b};
function Jk(a,b,c,d,e){d.g=b;d.event=c;e?Kk(a,c,d):(d.jf=b.Nb.jf,d.ca=b.Nb.ca);a=0;c.ctrlKey&&(a+=1);c.altKey&&(a+=2);c.shiftKey&&(a+=4);c.metaKey&&(a+=8);d.od=a;d.button=c.button;c.buttons&&(d.buttons=c.buttons);v.bk&&0===c.button&&c.ctrlKey&&(d.button=2);d.kl=!1;d.up=!1;d.Ge=1;d.il=0;d.zc=!1;d.bubbles=!1;d.timestamp=Date.now();d.wt=!1;d.Jg=c.target.W?c.target.W:null;d.ye=null}
function Lk(a,b,c,d,e){d.g=a;Kk(a,c,d);d.od=0;d.button=0;d.buttons=1;d.kl=!0;d.up=!1;d.Ge=1;d.il=0;d.zc=!1;d.bubbles=!0;d.event=b;d.timestamp=Date.now();d.wt=e;d.Jg=b.target.W?b.target.W:null;d.ye=null;a.ri=d.copy();jh=null}
function Mk(a,b,c,d,e){var f=null;d.g=a;null!==c?((f=window.document.elementFromPoint(c.clientX,c.clientY))&&f.W?f=f.W:(c=b.changedTouches[0],f=a),d.Jg=f,Kk(a,c,d)):null!==a.Sc?(d.ca=a.Sc.ca,d.jf=a.Sc.jf,d.Jg=a.Sc.Jg):null!==a.ri&&(d.ca=a.ri.ca,d.jf=a.ri.jf,d.Jg=a.ri.Jg);d.od=0;d.button=0;d.buttons=1;d.kl=!1;d.up=!1;d.Ge=1;d.il=0;d.zc=!1;d.bubbles=!1;d.event=b;d.timestamp=Date.now();d.wt=e;d.ye=null}
function Nk(a,b){if(a.bubbles)return!0;void 0!==b.stopPropagation&&b.stopPropagation();(void 0===b.touches||2>b.touches.length)&&b.preventDefault();b.cancelBubble=!0;return!1}
E.prototype.yH=function(a){if(!this.W.isEnabled)return!1;var b=this.W.Nb;Jk(this.W,this.W,a,b,!1);b.key=String.fromCharCode(a.which);b.kl=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key=
"Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.W.doKeyDown();return 187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?Nk(b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)};
E.prototype.zH=function(a){if(!this.W.isEnabled)return!1;var b=this.W.Nb;Jk(this.W,this.W,a,b,!1);b.key=String.fromCharCode(a.which);b.up=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 93:a.preventDefault()}this.W.doKeyUp();
return Nk(b,a)};E.prototype.Iq=function(a){var b=this.zb;if(null===b)return new z(0,0);var c=this.Eb,d=this.Jb,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left;a=a.clientY-d/b.height*b.top;return null!==this.ne?(a=new z(c,a),Qa(a,this.ne),a):new z(c,a)};function Kk(a,b,c){var d=a.zb,e=a.Eb,f=a.Jb,h=0,k=0;null!==d&&(d=d.getBoundingClientRect(),h=b.clientX-e/d.width*d.left,k=b.clientY-f/d.height*d.top);c.jf.m(h,k);null!==a.ne?(b=v.Mb(h,k),a.ne.Xh(b),c.ca.assign(b),v.v(b)):c.ca.m(h,k)}
E.prototype.invalidateDocumentBounds=E.prototype.qc=function(){this.sj||(this.sj=!0,this.ue(!0))};function Uj(a){a.Hd||Bk(a);a.sj&&Gk(a,a.ah())}E.prototype.redraw=E.prototype.bx=function(){this.Pc||this.Hd||(this.pa(),Ok(this),Ak(this),this.qc(),this.Uf())};E.prototype.isUpdateRequested=function(){return this.Lf};E.prototype.delayInitialization=function(a){void 0===a&&(a=null);var b=this.Na,c=b.isEnabled;b.$h();b.isEnabled=!1;di(this);this.Rg=!1;b.isEnabled=c;null!==a&&v.setTimeout(a,1)};
E.prototype.requestUpdate=E.prototype.ue=function(a){void 0===a&&(a=!1);if(!0!==this.Lf&&!(this.Pc||!1===a&&this.Hd)){this.Lf=!0;var b=this;requestAnimationFrame(function(){b.Lf&&b.Uf()})}};E.prototype.maybeUpdate=E.prototype.Uf=function(){if(!this.Kn||this.Lf)this.Kn&&(this.Kn=!1),di(this)};function Pk(a,b){a.Na.df||a.Pc||!a.Rl||zk(a)||(b&&Bk(a),Dk(a,!1))}
function di(a){if(!a.Hd&&(a.Lf=!1,null!==a.Kb)){a.Hd=!0;var b=a.Na,c=a.sC;if(!b.Un&&0!==c.length){for(var d=c.n,e=d.length,f=0;f<e;f++){var h=d[f];Qk(h,!1);h.N()}c.clear()}c=a.KB;0<c.count&&(c.each(function(a){a.BA()}),c.clear());d=c=!1;b.df&&(d=!0,c=a.tb,a.tb=!0);b.pc||Lj(a);Pk(a,!1);null!==a.hd&&(a.hd.visible&&!a.Wu&&(Sk(a),a.Wu=!0),!a.hd.visible&&a.Wu&&(a.Wu=!1));Bk(a);e=!1;if(!a.Rg||a.vu)a.Rg?$k(a,!a.Nu):(a.Qb("Initial Layout"),!1===b.isEnabled&&b.$h(),$k(a,!1)),e=!0;a.Nu=!1;Bk(a);a.My||b.df||
Uj(a);Pk(a,!0);e&&(a.Rg||al(a),a.Ba("LayoutCompleted"));Bk(a);e&&!a.Rg&&(a.Rg=!0,a.wd("Initial Layout"),a.tb||a.la.clear(),v.setTimeout(function(){a.Zh=!1},1));bl(a);Kj(b);a.Xe();d&&(a.tb=c);a.Hd=!1}}v.u(E,{Qm:null},function(){return this.Rg});
function al(a){var b=a.Yb.n;a.yf(b,b.length,a);a.Ek!==$g?a.scale=Ek(a,a.Ek):a.Ml!==$g?a.scale=Ek(a,a.Ml):(b=a.kH,isFinite(b)&&0<b&&(a.scale=b));b=a.jH;if(b.G())a.position=b;else{b=v.L();b.Yt(a.$d,a.iH);var c=a.rb,c=v.hk(0,0,c.width,c.height),d=v.L();d.Yt(c,a.lH);d.m(b.x-d.x,b.y-d.y);a.position=d;v.Vb(c);v.v(d);v.v(b);Ok(a);Pk(a,!0);Dk(a,!0)}a.Ba("InitialLayoutCompleted");Sk(a)}
function Bk(a){if((a.Hd||!a.Na.df)&&0!==a.fg.count)for(var b=0;23>b;b++){var c=a.fg.i;if(null===c||0===a.fg.count)break;a.fg=new J(G);a.BA(c,a.fg)}}
E.prototype.BA=function(a,b){for(a.reset();a.next();){var c=a.value;!c.Pd()||c instanceof V||!c.isVisible()||(c.vl()?(kj(c,Infinity,Infinity),c.Ec()):b.add(c))}for(a.reset();a.next();)c=a.value,c instanceof V&&c.isVisible()&&cl(this,c);for(a.reset();a.next();)c=a.value,c instanceof W&&c.isVisible()&&(c.vl()?(kj(c,Infinity,Infinity),c.Ec()):b.add(c));for(a.reset();a.next();)c=a.value,c instanceof Vg&&c.isVisible()&&(c.vl()?(kj(c,Infinity,Infinity),c.Ec()):b.add(c))};
function cl(a,b){for(var c=v.jb(),d=v.jb(),e=b.Ic;e.next();){var f=e.value;f.isVisible()&&(f instanceof V?(el(f)||fl(f)||gl(f))&&cl(a,f):f instanceof W?f.T===b||f.Z===b?d.push(f):c.push(f):(kj(f,Infinity,Infinity),f.Ec()))}for(var e=c.length,h=0;h<e;h++)f=c[h],kj(f,Infinity,Infinity),f.Ec();v.sa(c);kj(b,Infinity,Infinity);b.Ec();e=d.length;for(h=0;h<e;h++)f=d[h],kj(f,Infinity,Infinity),f.Ec();v.sa(d)}E.prototype.yf=function(a,b,c,d){var e=this.Na;if(this.Fk||e.df)for(e=0;e<b;e++)a[e].yf(c,d)};
E.prototype.Xe=function(a,b){void 0===a&&(a=this.lf);void 0===b&&(b=null);null===this.Kb&&v.k("No div specified");var c=this.zb;null===c&&v.k("No canvas specified");var d=this.Na;if(!d.pc&&(hl(this),"0"!==this.Kb.style.opacity)){var e=a!==this.lf,f=this.Yb.n,h=f.length,k=this;this.yf(f,h,k);if(e)Zc(a,!0),Ak(this);else if(!this.ke&&null===b&&!d.tj)return;var h=this.kb,l=this.Tb,m=Math.round(h.x*l)/l,n=Math.round(h.y*l)/l,d=this.ne;d.reset();1!==l&&d.scale(l);0===h.x&&0===h.y||d.translate(-m,-n);l=
this.rd;v.Pm?(c.width=c.width,Zc(a,!0),a.scale(l,l)):(a.setTransform(1,0,0,1,0,0),a.scale(l,l),a.clearRect(0,0,this.Eb,this.Jb));a.setTransform(1,0,0,1,0,0);a.scale(l,l);a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);c=null!==b?function(c){var d=a,e=b;if(c.visible&&0!==c.Rc){var f=c.wb.n,h=f.length;if(0!==h){1!==c.Rc&&(d.globalAlpha=c.Rc);c=c.Cv;c.length=0;for(var l=k.scale,m=0;m<h;m++){var n=f[m];if(Zj(n)&&!e.contains(n)){if(n instanceof W){var y=n;y.jc&&c.push(y);if(!1===y.rg)continue}y=n.U;1<y.width*
l||1<y.height*l?n.Xe(d,k):bk(n,d)}}d.globalAlpha=1}}}:function(b){b.Xe(a,k)};il(this,a);h=f.length;for(m=0;m<h;m++)a.setTransform(1,0,0,1,0,0),a.scale(l,l),a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),c(f[m]);this.Dk?this.Dk.Hl(this)&&this.$x():this.Iq=function(){return new z(0,0)};e?(Zc(this.lf,!0),Ak(this)):this.ke=this.Fk=!1}};
function jl(a,b,c,d,e){null===a.Kb&&v.k("No div specified");var f=a.zb;null===f&&v.k("No canvas specified");if(!a.Na.pc){var h=a.lf;if(a.ke){hl(a);var k=a.rd;v.Pm?(f.width=f.width,Zc(h,!0)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.Eb*k,a.Jb*k));h.pt=!1;h.drawImage(a.Zx.xd,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.kb;var f=a.Tb,l=Math.round(e.x*f)/f,m=Math.round(e.y*f)/f;d=a.ne;d.reset();1!==f&&d.scale(f);0===e.x&&0===e.y||d.translate(-l,-m);h.save();h.beginPath();e=c.length;for(f=0;f<e;f++)l=
c[f],0!==l.width&&0!==l.height&&h.rect(Math.floor(l.x),Math.floor(l.y),Math.ceil(l.width),Math.ceil(l.height));h.clip();h.setTransform(1,0,0,1,0,0);h.scale(k,k);h.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);c=a.Yb.n;e=c.length;a.yf(c,e,a);il(a,h);for(f=0;f<e;f++)ck(c[f],h,a,b);h.restore();Zc(h,!0);a.Dk?a.Dk.Hl(a)&&a.$x():a.Iq=function(){return new z(0,0)};a.Fk=!1;a.ke=!1;a.eA()}}}
function kl(a,b,c,d,e,f,h,k,l,m){null===a.Kb&&v.k("No div specified");null===a.zb&&v.k("No canvas specified");void 0===h&&(h=null);void 0===k&&(k=null);void 0===l&&(l=!1);void 0===m&&(m=!1);hl(a);Zc(a.lf,!0);Ak(a);a.sy=!0;var n=new A(f.x,f.y,d.width/e,d.height/e),p=n.copy();p.gw(c);Sk(a,p);Bk(a);var p=a.Yb.n,q=p.length;a.yf(p,q,a,n);n=a.rd;b.setTransform(1,0,0,1,0,0);b.scale(n,n);b.clearRect(0,0,d.width,d.height);null!==k&&""!==k&&(b.fillStyle=k,b.fillRect(0,0,d.width,d.height));d=v.rh();d.reset();
d.translate(c.left,c.top);d.scale(e);0===f.x&&0===f.y||d.translate(-f.x,-f.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);v.$e(d);il(a,b);if(null!==h){var r=new J(G);c=h.i;for(c.reset();c.next();)e=c.value,!1===m&&"Grid"===e.layer.name||null===e||r.add(e);c=function(c){var d=l;if(c.visible&&0!==c.Rc&&(void 0===d&&(d=!0),d||!c.Gc)){var d=c.wb.n,e=d.length;if(0!==e){1!==c.Rc&&(b.globalAlpha=c.Rc);c=c.Cv;c.length=0;for(var f=a.scale,h=0;h<e;h++){var k=d[h];if(Zj(k)&&r.contains(k)){if(k instanceof
W){var m=k;m.jc&&c.push(m);if(!1===m.rg)continue}m=k.U;1<m.width*f||1<m.height*f?k.Xe(b,a):bk(k,b)}}b.globalAlpha=1}}}}else if(!l&&m){var s=a.$o.Y,t=s.layer;c=function(c){c===t?s.Xe(b,a):c.Xe(b,a,l,m)}}else c=function(c){c.Xe(b,a,l,m)};for(e=0;e<q;e++)c(p[e]);a.sy=!1;a.Dk?a.Dk.Hl(a)&&a.$x():a.Iq=function(){return new z(0,0)};Zc(a.lf,!0);Ak(a);a.yf(p,q,a);Sk(a)}E.prototype.getRenderingHint=E.prototype.Ui=function(a){return this.Hj[a]};
E.prototype.setRenderingHint=E.prototype.yI=function(a,b){this.Hj[a]=b;this.bx()};E.prototype.resetRenderingHints=E.prototype.JE=function(){this.Hj=new ta;this.Hj.drawShadows=!0;this.Hj.textGreeking=!0;this.Hj.viewportOptimizations=v.gE?!1:!0;this.Hj.temporaryPixelRatio=!0;this.Hj.pictureRatioOptimization=!0};function il(a,b){var c=a.Hj;if(null!==c){if(void 0!==c.imageSmoothingEnabled){var d=!!c.imageSmoothingEnabled;b.pt=d;b.lK=d}c=c.defaultFont;void 0!==c&&null!==c&&(b.font=c)}}
E.prototype.getInputOption=E.prototype.Yo=function(a){return this.Rn[a]};E.prototype.setInputOption=function(a,b){this.Rn[a]=b};E.prototype.resetInputOptions=E.prototype.IE=function(){this.Rn=new ta;this.Rn.extraTouchArea=10;this.Rn.extraTouchThreshold=10;this.Rn.hasGestureZoom=!0};E.prototype.setProperties=function(a){v.Xt(this,a)};function bl(a){if(0===a.la.th&&0!==a.yk.count){for(;0<a.yk.count;){var b=a.yk;a.yk=new na(W,A);for(b=b.i;b.next();){var c=b.key;Hi(c,b.value);c.de()}}a.pa()}}
E.prototype.pa=function(a){void 0===a&&(a=null);if(null===a)this.ke=!0,this.ue();else{var b=this.rb;null!==a&&a.G()&&b.yg(a)&&(this.ke=!0,this.ue())}for(b=this.Dv.i;b.next();)b.value.pa(a)};
E.prototype.ZD=function(a,b){if(!0!==this.ke){this.ke=!0;var c=!0===this.Ui("temporaryPixelRatio");if(!0===this.Ui("viewportOptimizations")&&this.jA!==ll&&this.QE.zw(0,0,0,0)&&b.width===a.width&&b.height===a.height){var d=this.scale,e=v.ag(),f=Math.max(a.x,b.x),h=Math.max(a.y,b.y),k=Math.min(a.x+a.width,b.x+b.width),l=Math.min(a.y+a.height,b.y+b.height);e.x=f;e.y=h;e.width=Math.max(0,k-f)*d;e.height=Math.max(0,l-h)*d;if(0<e.width&&0<e.height){if(!this.Hd&&(this.Lf=!1,null!==this.Kb)){this.Hd=!0;bl(this);
this.$d.G()||Gk(this,this.ah());var m=this.zb;if(null!==m){var n=this.rd,h=this.Eb*n,k=this.Jb*n,f=this.scale*n,d=Math.round(Math.round(b.x*f)-Math.round(a.x*f)),f=Math.round(Math.round(b.y*f)-Math.round(a.y*f)),l=this.Zx,p=this.CB;l.width!==h&&(l.width=h);l.height!==k&&(l.height=k);p.clearRect(0,0,h,k);var l=190*this.rd,q=70*this.rd,r=Math.max(d,0),s=Math.max(f,0),t=Math.floor(h-r),u=Math.floor(k-s);p.pt=!1;p.drawImage(m.xd,r,s,t,u,0,0,t,u);this.Dk.Hl(this)&&p.clearRect(0,0,l,q);var m=v.jb(),p=v.jb(),
u=Math.abs(d),t=Math.abs(f),x=0===r?0:h-u,r=v.Mb(x,0),u=v.Mb(u+x,k);p.push(new A(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y)));var w=this.ne;w.reset();w.scale(n,n);1!==this.Tb&&w.scale(this.Tb);n=this.kb;(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&w.translate(-n.x,-n.y);Qa(r,w);Qa(u,w);m.push(new A(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y)));x=0===s?0:k-t;r.m(0,x);u.m(h,t+x);p.push(new A(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-
u.x),Math.abs(r.y-u.y)));Qa(r,w);Qa(u,w);m.push(new A(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y)));this.Dk.Hl(this)&&(h=0<d?0:-d,k=0<f?0:-f,r.m(h,k),u.m(l+h,q+k),p.push(new A(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y))),Qa(r,w),Qa(u,w),m.push(new A(Math.min(r.x,u.x),Math.min(r.y,u.y),Math.abs(r.x-u.x),Math.abs(r.y-u.y))));v.v(r);v.v(u);Pk(this,!1);jl(this,m,p,d,f);v.sa(m);v.sa(p);this.Hd=!1}}}else this.Uf();v.Vb(e);c&&(this.Nj=1,this.Uf(),
this.Nj=null,this.eA())}else c?(this.Nj=1,this.Uf(),this.Nj=null,this.eA()):this.Uf()}};function Ok(a){!1===a.Rl&&(a.Rl=!0)}function Ak(a){!1===a.Fk&&(a.Fk=!0)}function hl(a){!1!==a.Nq&&(a.Nq=!1,ml(a,a.Eb,a.Jb))}function ml(a,b,c){var d=a.zb,e=a.rd,f=b*e,e=c*e;if(d.width!==f||d.height!==e)d.width=f,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.ke=!0,Zc(a.lf,!0)}function dh(a){var b=a.Eb,c=a.Jb;a=a.zb.getBoundingClientRect();return v.Mb(b/a.width*a.left,c/a.height*a.top)}
function zk(a){var b=a.zb;if(null===b)return!0;var c=a.Kb,d=a.Eb,e=a.Jb,f=a.XC.copy();if(!f.G())return!0;var h=!1,k=a.Ck?a.vd:0,l=a.rj?a.vd:0,m=c.clientWidth||d+k,c=c.clientHeight||e+l;if(m!==d+k||c!==e+l)a.Ck=!1,a.rj=!1,l=k=0,a.Eb=m,a.Jb=c,h=a.Nq=!0;a.Rl=!1;var n=a.rb,p=a.$d,m=p.width,c=p.height,q=n.width,r=n.height,s=p.x,t=n.x,u=p.right,x=n.right+k,w=p.y,y=n.y,p=p.bottom,n=n.bottom+l,B="1px",H="1px",C=a.scale;a.jA===ik&&m<q+k&&c<r+l||(a.Az&&a.oe&&(B=1,s+1<t&&(B=Math.max((t-s)*C+a.Eb,B)),u>x+1&&
(B=Math.max((u-x)*C+a.Eb,B)),q+k+1<m&&(B=Math.max((m-q+k)*C+a.Eb,B)),B+="px"),a.Bz&&a.pe&&(H=1,w+1<y&&(H=Math.max((y-w)*C+a.Jb,H)),p>n+1&&(H=Math.max((p-n)*C+a.Jb,H)),r+l+1<c&&(H=Math.max((c-r+l)*C+a.Jb,H)),H+="px"));k="1px"!==B;l="1px"!==H;k&&l||!k&&!l||(l&&(x-=a.vd),k&&(n-=a.vd),a.Az&&a.oe&&(B=1,s+1<t&&(B=Math.max((t-s)*C+a.Eb,B)),u>x+1&&(B=Math.max((u-x)*C+a.Eb,B)),q+1<m&&(B=Math.max((m-q)*C+a.Eb,B)),B+="px"),k="1px"!==B,l=k!==a.rj?a.Jb-a.vd:a.Jb,a.Bz&&a.pe&&(H=1,w+1<y&&(H=Math.max((y-w)*C+l,H)),
p>n+1&&(H=Math.max((p-n)*C+l,H)),r+1<c&&(H=Math.max((c-r)*C+l,H)),H+="px"),l="1px"!==H);if(a.Mv&&k===a.rj&&l===a.Ck)return d===a.Eb&&e===a.Jb||a.Uf(),!1;k!==a.rj&&(a.Jb="1px"===B?a.Jb+a.vd:Math.max(a.Jb-a.vd,1),h=!0);a.rj=k;a.cs.style.width=B;l!==a.Ck&&(a.Eb="1px"===H?a.Eb+a.vd:Math.max(a.Eb-a.vd,1),h=!0,a.Tq&&(k=v.L(),l?(b.style.left=a.vd+"px",a.position=k.m(a.kb.x+a.vd/a.scale,a.kb.y)):(b.style.left="0px",a.position=k.m(a.kb.x-a.vd/a.scale,a.kb.y)),v.v(k)));a.Ck=l;a.cs.style.height=H;b=a.Qv;k=b.scrollLeft;
a.Az&&a.oe&&(q+1<m?k=(a.position.x-s)*C:s+1<t?k=b.scrollWidth-b.clientWidth:u>x+1&&(k=a.position.x*C));if(a.Tq)switch(a.Iy){case "negative":k=-(b.scrollWidth-k-b.clientWidth);break;case "reverse":k=b.scrollWidth-k-b.clientWidth}b.scrollLeft=k;a.Bz&&a.pe&&(r+1<c?b.scrollTop=(a.position.y-w)*C:w+1<y?b.scrollTop=b.scrollHeight-b.clientHeight:p>n+1&&(b.scrollTop=a.position.y*C));h&&(a.Nq=!0);m=a.Eb;c=a.Jb;b.style.width=m+(a.Ck?a.vd:0)+"px";b.style.height=c+(a.rj?a.vd:0)+"px";a.Jy=!1;return d!==m||e!==
c||a.Na.pc?(n=a.rb,a.Lt(f,n,h),!1):!0}
E.prototype.add=E.prototype.add=function(a){v.A(a,R,E,"add:part");var b=a.g;if(b!==this){null!==b&&v.k("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());this.Qp&&(a.Kk="Tool");var c=a.Tf,b=this.et(c);null===b&&(b=this.et(""));null===b&&v.k('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=b.cp(99999999,a,a.g===this),0<=c&&this.Lc(Cf,"parts",b,null,a,null,c),b.Gc||this.qc(),a.H(nl),c=a.zt,null!==
c&&c(a,null,b))}};
E.prototype.cp=function(a){if(a instanceof S){if(this.jo.add(a),a instanceof V){var b=a.Oa;null===b?this.Wk.add(a):b.fo.add(a);b=a.Pb;null!==b&&(b.g=this)}}else a instanceof W?this.ao.add(a):a instanceof Vg||this.wb.add(a);var c=this;ol(a,function(a){pl(c,a)});a.Gb&&a.N();b=a.data;null!==b&&(a instanceof Vg||(a instanceof W?this.xk.add(b,a):this.li.add(b,a)),ol(a,function(a){ql(c,a)}));!0!==fl(a)&&!0!==gl(a)||this.fg.add(a);rl(a,!0,this);sl(a)?(a.U.G()&&this.pa(dk(a,a.U)),this.qc()):a.isVisible()&&
a.U.G()&&this.pa(dk(a,a.U));this.ue()};
E.prototype.Ne=function(a){a.Vs();if(a instanceof S){if(this.jo.remove(a),a instanceof V){var b=a.Oa;null===b?this.Wk.remove(a):b.fo.remove(a);b=a.Pb;null!==b&&(b.g=null)}}else a instanceof W?this.ao.remove(a):a instanceof Vg||this.wb.remove(a);var c=this;ol(a,function(a){tl(c,a)});b=a.data;null!==b&&(a instanceof Vg||(a instanceof W?this.xk.remove(b):this.li.remove(b)),ol(a,function(a){ul(c,a)}));this.fg.remove(a);sl(a)?(a.U.G()&&this.pa(dk(a,a.U)),this.qc()):a.isVisible()&&a.U.G()&&this.pa(dk(a,
a.U));this.ue()};E.prototype.remove=E.prototype.remove=function(a){v.A(a,R,E,"remove:part");a.hb=!1;a.hh=!1;var b=a.layer;if(null!==b&&b.g===this){a.H(vl);a.Jm();var c=b.Ne(-1,a,!1);0<=c&&this.Lc(Df,"parts",b,a,null,c,null);c=a.zt;null!==c&&c(a,b,null)}};E.prototype.removeParts=E.prototype.gA=function(a,b){if(v.isArray(a))for(var c=v.Va(a),d=0;d<c;d++){var e=v.Ra(a,d);b&&!e.canDelete()||this.remove(e)}else for(e=new J(R),e.Tc(a),c=e.i;c.next();)e=c.value,b&&!e.canDelete()||this.remove(e)};
E.prototype.copyParts=E.prototype.Oo=function(a,b,c){return this.nb.Oo(a,b,c)};E.prototype.moveParts=E.prototype.moveParts=function(a,b,c){v.A(b,z,E,"moveParts:offset");var d=this.Za;if(null!==d){d=d.ae;null===d&&(d=new Zg,d.Mc(this));var e=new na(R,Object);if(null!==a)a=a.i;else{for(a=this.ek;a.next();)mh(d,e,a.value,c);for(a=this.Bg;a.next();)mh(d,e,a.value,c);a=this.links}for(;a.next();)mh(d,e,a.value,c);d.moveParts(e,b,c)}};
function wl(a,b,c){v.A(b,Wf,E,"addLayer:layer");null!==b.g&&b.g!==a&&v.k("Cannot share a Layer with another Diagram: "+b+" of "+b.g);null===c?null!==b.g&&v.k("Cannot add an existing Layer to this Diagram again: "+b):(v.A(c,Wf,E,"addLayer:existingLayer"),c.g!==a&&v.k("Existing Layer must be in this Diagram: "+c+" not in "+c.g),b===c&&v.k("Cannot move a Layer before or after itself: "+b));if(b.g!==a){b=b.name;a=a.Yb;c=a.count;for(var d=0;d<c;d++)a.da(d).name===b&&v.k("Cannot add Layer with the name '"+
b+"'; a Layer with the same name is already present in this Diagram.")}}E.prototype.addLayer=E.prototype.Ns=function(a){wl(this,a,null);a.Mc(this);var b=this.Yb,c=b.count-1;if(!a.Gc)for(;0<=c&&b.da(c).Gc;)c--;b.yd(c+1,a);null!==this.Wd&&this.Lc(Cf,"layers",this,null,a,null,c+1);this.pa();this.qc()};
E.prototype.addLayerBefore=E.prototype.bG=function(a,b){wl(this,a,b);a.Mc(this);var c=this.Yb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.Wd&&this.Lc(Df,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.da(f)===b){c.yd(f,a);break}null!==this.Wd&&this.Lc(Cf,"layers",this,null,a,null,f);this.pa();0>d&&this.qc()};
E.prototype.addLayerAfter=function(a,b){wl(this,a,b);a.Mc(this);var c=this.Yb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.Wd&&this.Lc(Df,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.da(f)===b){c.yd(f+1,a);break}null!==this.Wd&&this.Lc(Cf,"layers",this,null,a,null,f+1);this.pa();0>d&&this.qc()};
E.prototype.removeLayer=function(a){v.A(a,Wf,E,"removeLayer:layer");a.g!==this&&v.k("Cannot remove a Layer from another Diagram: "+a+" of "+a.g);if(""!==a.name){var b=this.Yb,c=b.indexOf(a);if(b.remove(a)){for(b=a.wb.copy().i;b.next();){var d=b.value,e=d.Tf;d.Tf=e!==a.name?e:""}null!==this.Wd&&this.Lc(Df,"layers",this,a,null,c,null);this.pa();this.qc()}}};E.prototype.findLayer=E.prototype.et=function(a){for(var b=this.Qw;b.next();){var c=b.value;if(c.name===a)return c}return null};
E.prototype.addModelChangedListener=E.prototype.dG=function(a){v.j(a,"function",E,"addModelChangedListener:listener");null===this.Sg&&(this.Sg=new I("function"));this.Sg.add(a);this.ba.wm(a)};E.prototype.removeModelChangedListener=function(a){v.j(a,"function",E,"removeModelChangedListener:listener");null!==this.Sg&&(this.Sg.remove(a),0===this.Sg.count&&(this.Sg=null));this.ba.Ot(a)};
E.prototype.addChangedListener=E.prototype.wm=function(a){v.j(a,"function",E,"addChangedListener:listener");null===this.fi&&(this.fi=new I("function"));this.fi.add(a)};E.prototype.removeChangedListener=E.prototype.Ot=function(a){v.j(a,"function",E,"removeChangedListener:listener");null!==this.fi&&(this.fi.remove(a),0===this.fi.count&&(this.fi=null))};
E.prototype.ow=function(a){this.tb||this.la.VD(a);a.wc!==Bf&&(this.Zh=!0);if(null!==this.fi){var b=this.fi,c=b.length;if(1===c)b=b.da(0),b(a);else if(0!==c)for(var d=b.cc(),e=0;e<c;e++)b=d[e],b(a)}};E.prototype.raiseChangedEvent=E.prototype.Lc=function(a,b,c,d,e,f,h){void 0===f&&(f=null);void 0===h&&(h=null);var k=new zf;k.g=this;k.wc=a;k.propertyName=b;k.object=c;k.oldValue=d;k.Cg=f;k.newValue=e;k.Ag=h;this.ow(k)};
E.prototype.raiseChanged=E.prototype.h=function(a,b,c,d,e){this.Lc(Af,a,this,b,c,d,e)};v.u(E,{Na:"animationManager"},function(){return this.QA});v.u(E,{la:"undoManager"},function(){return this.Wd.la});v.defineProperty(E,{tb:"skipsUndoManager"},function(){return this.Ii},function(a){v.j(a,"boolean",E,"skipsUndoManager");this.Ii=a;this.Wd.Ii=a});v.defineProperty(E,{nz:"delaysLayout"},function(){return this.Vx},function(a){this.Vx=a});
E.prototype.Bm=function(a,b){if(null!==a&&a.g===this){var c=this.we;try{this.we=!0;var d=a.wc,e;if(d===Af){var f=a.object,h=a.propertyName,k=a.ja(b);v.Ka(f,h,k);if(f instanceof G){var l,m=f.Y;null!==m&&m.Od()}this.Zh=!0}else if(d===Cf){var n=a.object,p=a.Ag,f=a.newValue;if(n instanceof D)if("number"===typeof p&&f instanceof G){l=f;var q=n;b?q.Ne(p):q.yd(p,l);m=n.Y;null!==m&&m.Od()}else{if("number"===typeof p&&f instanceof ug){var r=f,q=n;b?r.ee?q.HE(p):q.DE(p):(e=r.ee?q.Nd(r.index):q.Md(r.index),
e.Zs(r))}}else if(n instanceof Wf){var s=!0===a.Cg;if("number"===typeof p&&f instanceof R){var m=f,t=n;b?(m.Od(),t.Ne(s?p:-1,m,s)):t.cp(p,m,s)}}else if(n instanceof E){if("number"===typeof p&&f instanceof Wf){var u=f;b?this.Yb.Vc(p):(d=u,d.Mc(this),this.Yb.yd(p,d))}}else v.k("unknown ChangedEvent.Insert object: "+a.toString());this.Zh=!0}else d===Df?(n=a.object,p=a.Cg,f=a.oldValue,n instanceof D?"number"===typeof p&&f instanceof G?(q=n,b?q.yd(p,f):q.Ne(p)):"number"===typeof p&&f instanceof ug&&(r=
f,q=n,b?(e=r.ee?q.Nd(r.index):q.Md(r.index),e.Zs(r)):r.ee?q.HE(p):q.DE(p)):n instanceof Wf?(s=!0===a.Ag,"number"===typeof p&&f instanceof R&&(m=f,t=n,b?t.cp(p,m,s):(m.Od(),t.Ne(s?p:-1,m,s)))):n instanceof E?"number"===typeof p&&f instanceof Wf&&(u=f,b?(d=u,d.Mc(this),this.Yb.yd(p,d)):this.Yb.Vc(p)):v.k("unknown ChangedEvent.Remove object: "+a.toString()),this.Zh=!0):d!==Bf&&v.k("unknown ChangedEvent: "+a.toString())}finally{this.we=c}}};E.prototype.startTransaction=E.prototype.Qb=function(a){return this.la.Qb(a)};
E.prototype.commitTransaction=E.prototype.wd=function(a){return this.la.wd(a)};E.prototype.rollbackTransaction=E.prototype.zp=function(){return this.la.zp()};E.prototype.updateAllTargetBindings=E.prototype.rF=function(a){void 0===a&&(a="");for(var b=this.ek;b.next();)b.value.Hb(a);for(b=this.Bg;b.next();)b.value.Hb(a);for(b=this.links;b.next();)b.value.Hb(a)};
E.prototype.updateAllRelationshipsFromData=E.prototype.RI=function(){if(0<arguments.length){for(var a=this.ba,b=new J,c=a.Yf,d=0;d<c.length;d++){var e=c[d];b.add(e)}var f=[];this.Bg.each(function(a){null===a.data||b.contains(a.data)||f.push(a.data)});this.ek.each(function(a){null===a.data||b.contains(a.data)||f.push(a.data)});f.forEach(function(b){pg(a,b,!1)});for(d=0;d<c.length;d++){var e=c[d],h=this.eh(e);null===h&&og(a,e,!1)}if(a instanceof Q){for(var k=new J,c=a.zg,d=0;d<c.length;d++)e=c[d],k.add(e);
var l=[];this.links.each(function(a){null===a.data||k.contains(a.data)||l.push(a.data)});l.forEach(function(b){zg(a,b,!1)});for(d=0;d<c.length;d++)e=c[d],h=this.Pf(e),null===h&&yg(a,e,!1)}}for(d=this.ek;d.next();)h=d.value,h.updateRelationshipsFromData();for(d=this.Bg;d.next();)d.value.updateRelationshipsFromData();for(d=this.links;d.next();)h=d.value,h.updateRelationshipsFromData()};
function xl(a,b,c){if(a.Pc||a.Hd)a.Tb=c,c=a.Na,c.pc&&Yj(c,b,a.Tb);else if(a.Pc=!0,null===a.zb)a.Tb=c;else{var d=a.rb.copy(),e=a.Eb,f=a.Jb;d.width=a.Eb/b;d.height=a.Jb/b;var h=a.Il.x,k=a.Il.y,l=a.uD;isNaN(h)&&(l.Wi()?l.ap(Gb)?h=0:l.ap(Nb)&&(h=e-1):h=l.bd()?l.x*(e-1):e/2);isNaN(k)&&(l.Wi()?l.ap(Fb)?k=0:l.ap(Ob)&&(k=f-1):k=l.bd()?l.y*(f-1):f/2);null!==a.PE&&(c=a.PE(a,c));c<a.jh&&(c=a.jh);c>a.ih&&(c=a.ih);e=v.Mb(a.kb.x+h/b-h/c,a.kb.y+k/b-k/c);a.position=e;v.v(e);a.Tb=c;a.Lt(d,a.rb);a.Pc=!1;Dk(a,!1);c=
a.Na;c.pc&&Yj(c,b,a.Tb);a.pa();Ok(a)}}E.prototype.Lt=function(a,b,c){if(!a.K(b)){void 0===c&&(c=!1);c||Ok(this);Ak(this);var d=this.Pb;null===d||!d.Nw||this.cl!==$g||c||a.width===b.width&&a.height===b.height||d.H();d=this.Wa;!0===this.Tl&&d instanceof Hg&&(this.O.ca=this.pF(this.O.jf),Gj(d,this));this.Pc||this.ZD(a,b);Sk(this);this.Ba("ViewportBoundsChanged",c?v.hj:null,a)}};
function Sk(a,b){void 0===b&&(b=null);var c=a.hd;if(null!==c&&c.visible){for(var d=v.Fl(),e=1,f=1,h=c.ya.n,k=h.length,l=0;l<k;l++){var m=h[l],n=m.interval;2>n||(yl(m.Ab)?f=f*n/te(f,n):e=e*n/te(e,n))}h=c.Gw;d.m(f*h.width,e*h.height);h=f=l=k=0;if(null!==b)k=b.width,l=b.height,f=b.x,h=b.y;else{e=v.ag();f=a.rb;e.m(f.x,f.y,f.width,f.height);for(h=a.Dv.i;h.next();)f=h.value.rb,f.G()&&$a(e,f.x,f.y,f.width,f.height);if(!e.G()){v.Vb(e);return}k=e.width;l=e.height;f=e.x;h=e.y;v.Vb(e)}c.width=k+2*d.width;c.height=
l+2*d.height;e=v.L();Pa(f,h,0,0,d.width,d.height,e);e.offset(-d.width,-d.height);v.$j(d);c.Y.location=e;v.v(e)}}E.prototype.clearSelection=E.prototype.pw=function(){var a=0<this.selection.count;a&&this.Ba("ChangingSelection");Yg(this);a&&this.Ba("ChangedSelection")};function Yg(a){a=a.selection;if(0<a.count){for(var b=a.cc(),c=b.length,d=0;d<c;d++)b[d].hb=!1;a.Pa();a.clear();a.freeze()}}
E.prototype.select=E.prototype.select=function(a){null!==a&&(v.A(a,R,E,"select:part"),a.layer.g===this&&(!a.hb||1<this.selection.count)&&(this.Ba("ChangingSelection"),Yg(this),a.hb=!0,this.Ba("ChangedSelection")))};
E.prototype.selectCollection=E.prototype.UE=function(a){this.Ba("ChangingSelection");Yg(this);if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Ra(a,c);d instanceof R||v.k("Diagram.selectCollection given something that is not a Part: "+d);d.hb=!0}else for(a=a.i;a.next();)d=a.value,d instanceof R||v.k("Diagram.selectCollection given something that is not a Part: "+d),d.hb=!0;this.Ba("ChangedSelection")};
E.prototype.clearHighlighteds=E.prototype.nD=function(){var a=this.Om;if(0<a.count){for(var b=a.cc(),c=b.length,d=0;d<c;d++)b[d].hh=!1;a.Pa();a.clear();a.freeze()}};E.prototype.highlight=function(a){null!==a&&a.layer.g===this&&(v.A(a,R,E,"highlight:part"),!a.hh||1<this.Om.count)&&(this.nD(),a.hh=!0)};
E.prototype.highlightCollection=function(a){this.nD();if(v.isArray(a))for(var b=v.Va(a),c=0;c<b;c++){var d=v.Ra(a,c);d instanceof R||v.k("Diagram.highlightCollection given something that is not a Part: "+d);d.hh=!0}else for(a=a.i;a.next();)d=a.value,d instanceof R||v.k("Diagram.highlightCollection given something that is not a Part: "+d),d.hh=!0};
E.prototype.scroll=E.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var d="up"===b||"down"===b,e=0;if("pixel"===a)e=c;else if("line"===a)e=c*(d?this.Ut:this.Tt);else if("page"===a)a=d?this.rb.height:this.rb.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.Ut:this.Tt),0),e*=c);else{if("document"===a){e=this.$d;d=this.rb;c=v.L();"up"===b?this.position=c.m(d.x,e.y):"left"===b?this.position=c.m(e.x,d.y):"down"===b?this.position=c.m(d.x,e.bottom-d.height):"right"===b&&(this.position=c.m(e.right-d.width,
d.y));v.v(c);return}v.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+a)}e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:v.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+b);this.position=c};E.prototype.scrollToRect=E.prototype.sI=function(a){var b=this.rb;b.Xj(a)||(a=a.dl,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};
E.prototype.centerRect=E.prototype.lG=function(a){var b=this.rb;a=a.dl;a.x-=b.width/2;a.y-=b.height/2;this.position=a};E.prototype.transformDocToView=E.prototype.nF=function(a){var b=this.ne;b.reset();1!==this.Tb&&b.scale(this.Tb);var c=this.kb;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return a.copy().transform(this.ne)};
E.prototype.transformViewToDoc=E.prototype.pF=function(a){var b=this.ne;b.reset();1!==this.Tb&&b.scale(this.Tb);var c=this.kb;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return Qa(a.copy(),this.ne)};var $g;E.None=$g=v.p(E,"None",0);var Hk;E.Uniform=Hk=v.p(E,"Uniform",1);var Ik;E.UniformToFill=Ik=v.p(E,"UniformToFill",2);var hi;E.CycleAll=hi=v.p(E,"CycleAll",10);var li;E.CycleNotDirected=li=v.p(E,"CycleNotDirected",11);var ni;
E.CycleNotDirectedFast=ni=v.p(E,"CycleNotDirectedFast",12);var xi;E.CycleNotUndirected=xi=v.p(E,"CycleNotUndirected",13);var ii;E.CycleDestinationTree=ii=v.p(E,"CycleDestinationTree",14);var ki;E.CycleSourceTree=ki=v.p(E,"CycleSourceTree",15);var ik;E.DocumentScroll=ik=v.p(E,"DocumentScroll",1);var ll;E.InfiniteScroll=ll=v.p(E,"InfiniteScroll",2);var kk;E.TreeParentCollapsed=kk=v.p(E,"TreeParentCollapsed",1);E.AllParentsCollapsed=v.p(E,"AllParentsCollapsed",2);
v.defineProperty(E,{SI:"validCycle"},function(){return this.cw},function(a){var b=this.cw;b!==a&&(v.pb(a,E,E,"validCycle"),this.cw=a,this.h("validCycle",b,a))});v.u(E,{Qw:"layers"},function(){return this.Yb.i});v.defineProperty(E,{vf:"isModelReadOnly"},function(){var a=this.Wd;return null===a?!1:a.ab},function(a){var b=this.Wd;null!==b&&(b.ab=a)});
v.defineProperty(E,{ab:"isReadOnly"},function(){return this.ti},function(a){var b=this.ti;b!==a&&(v.j(a,"boolean",E,"isReadOnly"),this.ti=a,this.h("isReadOnly",b,a))});v.defineProperty(E,{isEnabled:"isEnabled"},function(){return this.Se},function(a){var b=this.Se;b!==a&&(v.j(a,"boolean",E,"isEnabled"),this.Se=a,this.h("isEnabled",b,a))});
v.defineProperty(E,{$y:"allowClipboard"},function(){return this.mu},function(a){var b=this.mu;b!==a&&(v.j(a,"boolean",E,"allowClipboard"),this.mu=a,this.h("allowClipboard",b,a))});v.defineProperty(E,{Vj:"allowCopy"},function(){return this.ik},function(a){var b=this.ik;b!==a&&(v.j(a,"boolean",E,"allowCopy"),this.ik=a,this.h("allowCopy",b,a))});
v.defineProperty(E,{xm:"allowDelete"},function(){return this.jk},function(a){var b=this.jk;b!==a&&(v.j(a,"boolean",E,"allowDelete"),this.jk=a,this.h("allowDelete",b,a))});v.defineProperty(E,{Ss:"allowDragOut"},function(){return this.nu},function(a){var b=this.nu;b!==a&&(v.j(a,"boolean",E,"allowDragOut"),this.nu=a,this.h("allowDragOut",b,a))});
v.defineProperty(E,{fD:"allowDrop"},function(){return this.ou},function(a){var b=this.ou;b!==a&&(v.j(a,"boolean",E,"allowDrop"),this.ou=a,this.h("allowDrop",b,a))});v.defineProperty(E,{lw:"allowTextEdit"},function(){return this.sk},function(a){var b=this.sk;b!==a&&(v.j(a,"boolean",E,"allowTextEdit"),this.sk=a,this.h("allowTextEdit",b,a))});
v.defineProperty(E,{iw:"allowGroup"},function(){return this.kk},function(a){var b=this.kk;b!==a&&(v.j(a,"boolean",E,"allowGroup"),this.kk=a,this.h("allowGroup",b,a))});v.defineProperty(E,{mw:"allowUngroup"},function(){return this.tk},function(a){var b=this.tk;b!==a&&(v.j(a,"boolean",E,"allowUngroup"),this.tk=a,this.h("allowUngroup",b,a))});
v.defineProperty(E,{Ho:"allowInsert"},function(){return this.qu},function(a){var b=this.qu;b!==a&&(v.j(a,"boolean",E,"allowInsert"),this.qu=a,this.h("allowInsert",b,a))});v.defineProperty(E,{Ts:"allowLink"},function(){return this.lk},function(a){var b=this.lk;b!==a&&(v.j(a,"boolean",E,"allowLink"),this.lk=a,this.h("allowLink",b,a))});
v.defineProperty(E,{ym:"allowRelink"},function(){return this.nk},function(a){var b=this.nk;b!==a&&(v.j(a,"boolean",E,"allowRelink"),this.nk=a,this.h("allowRelink",b,a))});v.defineProperty(E,{bl:"allowMove"},function(){return this.mk},function(a){var b=this.mk;b!==a&&(v.j(a,"boolean",E,"allowMove"),this.mk=a,this.h("allowMove",b,a))});
v.defineProperty(E,{jw:"allowReshape"},function(){return this.ok},function(a){var b=this.ok;b!==a&&(v.j(a,"boolean",E,"allowReshape"),this.ok=a,this.h("allowReshape",b,a))});v.defineProperty(E,{Us:"allowResize"},function(){return this.pk},function(a){var b=this.pk;b!==a&&(v.j(a,"boolean",E,"allowResize"),this.pk=a,this.h("allowResize",b,a))});
v.defineProperty(E,{kw:"allowRotate"},function(){return this.qk},function(a){var b=this.qk;b!==a&&(v.j(a,"boolean",E,"allowRotate"),this.qk=a,this.h("allowRotate",b,a))});v.defineProperty(E,{of:"allowSelect"},function(){return this.rk},function(a){var b=this.rk;b!==a&&(v.j(a,"boolean",E,"allowSelect"),this.rk=a,this.h("allowSelect",b,a))});
v.defineProperty(E,{gD:"allowUndo"},function(){return this.ru},function(a){var b=this.ru;b!==a&&(v.j(a,"boolean",E,"allowUndo"),this.ru=a,this.h("allowUndo",b,a))});v.defineProperty(E,{nw:"allowZoom"},function(){return this.tu},function(a){var b=this.tu;b!==a&&(v.j(a,"boolean",E,"allowZoom"),this.tu=a,this.h("allowZoom",b,a))});
v.defineProperty(E,{Bz:"hasVerticalScrollbar"},function(){return this.av},function(a){var b=this.av;b!==a&&(v.j(a,"boolean",E,"hasVerticalScrollbar"),this.av=a,Ok(this),this.pa(),this.h("hasVerticalScrollbar",b,a),Dk(this,!1))});v.defineProperty(E,{Az:"hasHorizontalScrollbar"},function(){return this.$u},function(a){var b=this.$u;b!==a&&(v.j(a,"boolean",E,"hasHorizontalScrollbar"),this.$u=a,Ok(this),this.pa(),this.h("hasHorizontalScrollbar",b,a),Dk(this,!1))});
v.defineProperty(E,{oe:"allowHorizontalScroll"},function(){return this.pu},function(a){var b=this.pu;b!==a&&(v.j(a,"boolean",E,"allowHorizontalScroll"),this.pu=a,this.h("allowHorizontalScroll",b,a),Dk(this,!1))});v.defineProperty(E,{pe:"allowVerticalScroll"},function(){return this.su},function(a){var b=this.su;b!==a&&(v.j(a,"boolean",E,"allowVerticalScroll"),this.su=a,this.h("allowVerticalScroll",b,a),Dk(this,!1))});
v.defineProperty(E,{Tt:"scrollHorizontalLineChange"},function(){return this.Nv},function(a){var b=this.Nv;b!==a&&(v.j(a,"number",E,"scrollHorizontalLineChange"),0>a&&v.va(a,">= 0",E,"scrollHorizontalLineChange"),this.Nv=a,this.h("scrollHorizontalLineChange",b,a))});
v.defineProperty(E,{Ut:"scrollVerticalLineChange"},function(){return this.Rv},function(a){var b=this.Rv;b!==a&&(v.j(a,"number",E,"scrollVerticalLineChange"),0>a&&v.va(a,">= 0",E,"scrollVerticalLineChange"),this.Rv=a,this.h("scrollVerticalLineChange",b,a))});v.defineProperty(E,{O:"lastInput"},function(){return this.Nb},function(a){this.Nb=a});v.defineProperty(E,{yc:"firstInput"},function(){return this.ri},function(a){this.ri=a});
v.defineProperty(E,{$b:"currentCursor"},function(){return this.Gu},function(a){""===a&&(a=this.tq);this.Gu!==a&&(v.j(a,"string",E,"currentCursor"),null!==this.zb&&(this.Gu=a,this.zb.style.cursor=a,this.Kb.style.cursor=a))});v.defineProperty(E,{CJ:"defaultCursor"},function(){return this.tq},function(a){""===a&&(a="auto");var b=this.tq;b!==a&&(v.j(a,"string",E,"defaultCursor"),this.tq=a,this.h("defaultCursor",b,a))});
v.defineProperty(E,{click:"click"},function(){return this.gi},function(a){var b=this.gi;b!==a&&(null!==a&&v.j(a,"function",E,"click"),this.gi=a,this.h("click",b,a))});v.defineProperty(E,{at:"doubleClick"},function(){return this.pi},function(a){var b=this.pi;b!==a&&(null!==a&&v.j(a,"function",E,"doubleClick"),this.pi=a,this.h("doubleClick",b,a))});
v.defineProperty(E,{gz:"contextClick"},function(){return this.ji},function(a){var b=this.ji;b!==a&&(null!==a&&v.j(a,"function",E,"contextClick"),this.ji=a,this.h("contextClick",b,a))});v.defineProperty(E,{Tz:"mouseOver"},function(){return this.Ci},function(a){var b=this.Ci;b!==a&&(null!==a&&v.j(a,"function",E,"mouseOver"),this.Ci=a,this.h("mouseOver",b,a))});
v.defineProperty(E,{Sz:"mouseHover"},function(){return this.Bi},function(a){var b=this.Bi;b!==a&&(null!==a&&v.j(a,"function",E,"mouseHover"),this.Bi=a,this.h("mouseHover",b,a))});v.defineProperty(E,{Rz:"mouseHold"},function(){return this.Ai},function(a){var b=this.Ai;b!==a&&(null!==a&&v.j(a,"function",E,"mouseHold"),this.Ai=a,this.h("mouseHold",b,a))});
v.defineProperty(E,{UH:"mouseDragOver"},function(){return this.wv},function(a){var b=this.wv;b!==a&&(null!==a&&v.j(a,"function",E,"mouseDragOver"),this.wv=a,this.h("mouseDragOver",b,a))});v.defineProperty(E,{Qz:"mouseDrop"},function(){return this.zi},function(a){var b=this.zi;b!==a&&(null!==a&&v.j(a,"function",E,"mouseDrop"),this.zi=a,this.h("mouseDrop",b,a))});
v.defineProperty(E,{yA:"toolTip"},function(){return this.Ji},function(a){var b=this.Ji;b!==a&&(null!==a&&v.A(a,Vg,E,"toolTip"),this.Ji=a,this.h("toolTip",b,a))});v.defineProperty(E,{contextMenu:"contextMenu"},function(){return this.ki},function(a){var b=this.ki;b!==a&&(null!==a&&v.A(a,Vg,E,"contextMenu"),this.ki=a,this.h("contextMenu",b,a))});
v.defineProperty(E,{nb:"commandHandler"},function(){return this.Ox},function(a){var b=this.Ox;b!==a&&(v.A(a,Yf,E,"commandHandler"),null!==a.g&&v.k("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.Mc(null),this.Ox=a,a.Mc(this))});v.defineProperty(E,{Za:"toolManager"},function(){return this.Sy},function(a){var b=this.Sy;b!==a&&(v.A(a,Hg,E,"toolManager"),null!==a.g&&v.k("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.Mc(null),this.Sy=a,a.Mc(this))});
v.defineProperty(E,{$s:"defaultTool"},function(){return this.Ux},function(a){var b=this.Ux;b!==a&&(v.A(a,Xf,E,"defaultTool"),this.Ux=a,this.Wa===b&&(this.Wa=a))});v.defineProperty(E,{Wa:"currentTool"},function(){return this.Sx},function(a){var b=this.Sx;null!==b&&(b.qa&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());null===a&&(a=this.$s);null!==a&&(v.A(a,Xf,E,"currentTool"),this.Sx=a,a.Mc(this),a.doStart())});v.u(E,{selection:"selection"},function(){return this.Tv});
v.defineProperty(E,{MH:"maxSelectionCount"},function(){return this.sv},function(a){var b=this.sv;if(b!==a)if(v.j(a,"number",E,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.sv=a,this.h("maxSelectionCount",b,a),!this.la.ib&&(a=this.selection.count-a,0<a)){this.Ba("ChangingSelection");for(var b=this.selection.cc(),c=0;c<a;c++)b[c].hb=!1;this.Ba("ChangedSelection")}}else v.va(a,">= 0",E,"maxSelectionCount")});
v.defineProperty(E,{XH:"nodeSelectionAdornmentTemplate"},function(){return this.xv},function(a){var b=this.xv;b!==a&&(v.A(a,Vg,E,"nodeSelectionAdornmentTemplate"),this.xv=a,this.h("nodeSelectionAdornmentTemplate",b,a))});v.defineProperty(E,{cH:"groupSelectionAdornmentTemplate"},function(){return this.Xu},function(a){var b=this.Xu;b!==a&&(v.A(a,Vg,E,"groupSelectionAdornmentTemplate"),this.Xu=a,this.h("groupSelectionAdornmentTemplate",b,a))});
v.defineProperty(E,{GH:"linkSelectionAdornmentTemplate"},function(){return this.ov},function(a){var b=this.ov;b!==a&&(v.A(a,Vg,E,"linkSelectionAdornmentTemplate"),this.ov=a,this.h("linkSelectionAdornmentTemplate",b,a))});v.u(E,{Om:"highlighteds"},function(){return this.bv});
v.defineProperty(E,{Zh:"isModified"},function(){var a=this.la;return a.isEnabled?null!==a.Qi?!0:this.uy&&this.Pg!==a.Vi:this.uy},function(a){if(this.uy!==a){v.j(a,"boolean",E,"isModified");this.uy=a;var b=this.la;!a&&b.isEnabled&&(this.Pg=b.Vi);a||zl(this)}});function zl(a){var b=a.Zh;a.YC!==b&&(a.YC=b,a.Ba("Modified"))}
v.defineProperty(E,{ba:"model"},function(){return this.Wd},function(a){var b=this.Wd;if(b!==a){v.A(a,F,E,"model");this.Wa.doCancel();null!==b&&b.la!==a.la&&b.la.hE&&v.k("Do not replace a Diagram.model while a transaction is in progress.");this.Na.$h();this.pw();this.Rg=!1;this.Kn=!0;this.Pg=-2;this.Lf=!1;var c=this.Hd;this.Hd=!0;this.Na.Xm("Model");null!==b&&(null!==this.Sg&&this.Sg.each(function(a){b.Ot(a)}),b.Ot(this.fC),b instanceof Q&&Al(this,b.zg),Al(this,b.Yf));this.Wd=a;a.wm(this.eC);Bl(this,
a.Yf);a instanceof Q&&Cl(this,a.zg);a.Ot(this.eC);a.wm(this.fC);null!==this.Sg&&this.Sg.each(function(b){a.wm(b)});this.Hd=c;this.Pc||this.pa();null!==b&&(a.la.isEnabled=b.la.isEnabled)}});v.defineProperty(E,{Sa:null},function(){return this.YB},function(a){this.YB=a});v.u(E,{Sw:null},function(){return this.EF});
function mk(a,b){if(b.ba===a.ba){var c=b.wc,d=b.propertyName;if(c===Bf&&"S"===d[0])if("StartingFirstTransaction"===d)c=a.Za,c.Pe.each(function(b){b.Mc(a)}),c.Vf.each(function(b){b.Mc(a)}),c.Wf.each(function(b){b.Mc(a)}),a.Hd||a.Rg||(a.Nu=!0,a.Kn&&(a.Lf=!0));else if("StartingUndo"===d||"StartingRedo"===d){var e=a.Na;e.df&&!a.tb&&e.$h();a.Ba("ChangingSelection")}else"StartedTransaction"===d&&(e=a.Na,e.df&&!a.tb&&e.$h());else if(a.Sa){a.Sa=!1;try{var f=b.hf;if(""!==f)if(c===Af){if("linkFromKey"===f){var h=
b.object,k=a.Pf(h);if(null!==k){var l=b.newValue,m=a.Ze(l);k.T=m}}else if("linkToKey"===f)h=b.object,k=a.Pf(h),null!==k&&(l=b.newValue,m=a.Ze(l),k.Z=m);else if("linkFromPortId"===f){if(h=b.object,k=a.Pf(h),null!==k){var n=b.newValue;"string"===typeof n&&(k.xg=n)}}else if("linkToPortId"===f)h=b.object,k=a.Pf(h),null!==k&&(n=b.newValue,"string"===typeof n&&(k.sh=n));else if("nodeGroupKey"===f){var h=b.object,p=a.eh(h);if(null!==p){var q=b.newValue;if(void 0!==q){var r=a.Ze(q);p.Oa=r instanceof V?r:
null}else p.Oa=null}}else if("linkLabelKeys"===f){if(h=b.object,k=a.Pf(h),null!==k){var s=b.oldValue,t=b.newValue;if(v.isArray(s))for(var u=v.Va(s),x=0;x<u;x++){var w=v.Ra(s,x),m=a.Ze(w);null!==m&&(m.Ad=null)}if(v.isArray(t))for(u=v.Va(t),x=0;x<u;x++)w=v.Ra(t,x),m=a.Ze(w),null!==m&&(m.Ad=k)}}else if("nodeParentKey"===f){var y=b.object,B=a.Ze(b.newValue),H=a.Dw(y);if(null!==H){var C=H.Vo();null!==C?null===B?a.remove(C):a.Qd?C.T=B:C.Z=B:Dl(a,B,H)}}else if("parentLinkCategory"===f){var y=b.object,H=
a.Dw(y),T=b.newValue;null!==H&&"string"===typeof T&&(C=H.Vo(),null!==C&&(C.fc=T))}else if("nodeCategory"===f){var h=b.object,ba=a.eh(h),T=b.newValue;null!==ba&&"string"===typeof T&&(ba.fc=T)}else if("linkCategory"===f){var h=b.object,U=a.Pf(h),T=b.newValue;null!==U&&"string"===typeof T&&(U.fc=T)}else if("nodeDataArray"===f){var M=b.oldValue;Al(a,M);var aa=b.newValue;Bl(a,aa)}else"linkDataArray"===f&&(M=b.oldValue,Al(a,M),aa=b.newValue,Cl(a,aa));a.Zh=!0}else c===Cf?(aa=b.newValue,"nodeDataArray"===
f&&v.Ta(aa)?El(a,aa):"linkDataArray"===f&&v.Ta(aa)?Fl(a,aa):"linkLabelKeys"===f&&ng(aa)&&(k=a.Pf(b.object),m=a.Ze(aa),null!==k&&null!==m&&(m.Ad=k)),a.Zh=!0):c===Df?(M=b.oldValue,"nodeDataArray"===f&&v.Ta(M)?Gl(a,M):"linkDataArray"===f&&v.Ta(M)?Gl(a,M):"linkLabelKeys"===f&&ng(M)&&(m=a.Ze(M),null!==m&&(m.Ad=null)),a.Zh=!0):c===Bf&&("SourceChanged"===f?null!==b.object?lk(a,b.object,b.propertyName):(a.RI(),a.rF()):"ModelDisplaced"===f&&a.zl());else if(c===Af){var Ia=b.propertyName,h=b.object;if(h===a.ba){if("nodeKeyProperty"===
Ia||"nodeCategoryProperty"===Ia||"linkFromKeyProperty"===Ia||"linkToKeyProperty"===Ia||"linkFromPortIdProperty"===Ia||"linkToPortIdProperty"===Ia||"linkLabelKeysProperty"===Ia||"nodeIsGroupProperty"===Ia||"nodeGroupKeyProperty"===Ia||"nodeParentKeyProperty"===Ia||"linkCategoryProperty"===Ia)a.la.ib||a.zl()}else lk(a,h,Ia);a.Zh=!0}else if(c===Cf||c===Df)Hl(a,b),a.Zh=!0;else if(c===Bf){if("FinishedUndo"===d||"FinishedRedo"===d)a.la.ui=!0,a.Ba("ChangedSelection"),Bk(a),a.la.ui=!1;e=a.Na;"RolledBackTransaction"===
d&&e.$h();a.Nu=!0;a.Uf();0===a.la.th&&Kj(e);"CommittedTransaction"===d&&a.la.wy&&(a.Pg=Math.min(a.Pg,a.la.Vi-1));var oa=b.lE;oa&&(zl(a),a.Sw.clear());!a.Dy&&oa&&(a.Dy=!0,v.setTimeout(function(){a.Wa.standardMouseOver();a.Dy=!1},10))}}finally{a.Sa=!0}}}}
function lk(a,b,c){if("string"===typeof c){var d=a.eh(b);if(null!==d)d.Hb(c),a.ba instanceof Qf&&(d=a.Pf(b),null!==d&&d.Hb(c));else{for(var d=null,e=a.Wl.i;e.next();){for(var f=e.value,h=0;h<f.length;h++){var k=f[h].OG(b);null!==k&&(null===d&&(d=v.jb()),d.push(k))}if(null!==d)break}if(null!==d){for(e=0;e<d.length;e++)d[e].Hb(c);v.sa(d)}}b===a.ba.ck&&a.rF(c)}}v.defineProperty(E,{we:"skipsModelSourceBindings"},function(){return this.AC},function(a){this.AC=a});
v.defineProperty(E,{bu:null},function(){return this.My},function(a){this.My=a});function Hl(a,b){var c=b.wc===Cf,d=c?b.Ag:b.Cg,e=c?b.newValue:b.oldValue,f=a.Wl.ja(b.object);if(Array.isArray(f))for(var h=0;h<f.length;h++){var k=f[h];if(c)Il(k,e,d);else{var l=d;if(!(0>l)){var m=l;Jl(k)&&m++;k.Ne(m);Kl(k,m,l)}}}}function ql(a,b){var c=b.vj;if(v.isArray(c)){var d=a.Wl.ja(c);if(null===d)d=[],d.push(b),a.Wl.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function ul(a,b){var c=b.vj;if(v.isArray(c)){var d=a.Wl.ja(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Wl.remove(c);break}}}function pl(a,b){for(var c=b.ya.n,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof nk&&Ll(a,f)}}function Ll(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var c=c.src,d=a.ko.ja(c);if(null===d)d=[],d.push(b),a.ko.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function tl(a,b){for(var c=b.ya.n,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof nk&&Ml(a,f)}}function Ml(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var c=c.src,d=a.ko.ja(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.ko.remove(c);break}}}
E.prototype.clear=E.prototype.clear=function(){var a=null;null!==this.hd&&(a=this.hd.Y);this.ba.clear();for(var b=this.Yb.length,c=0;c<b;c++)this.Yb.n[c].clear();this.fg.clear();this.yk.clear();this.jo.clear();this.Wk.clear();this.ao.clear();this.wb.clear();this.li.clear();this.xk.clear();this.Wl.clear();this.Tv.Pa();this.Tv.clear();this.Tv.freeze();this.bv.Pa();this.bv.clear();this.bv.freeze();Fg=this.wn=null;Gg="";this.Ou=(new A(NaN,NaN,NaN,NaN)).freeze();null!==a&&(this.add(a),this.wb.remove(a));
this.pa()};
E.prototype.reset=E.prototype.reset=function(){this.Pc=!0;this.clear();this.Yb=new I(Wf);this.JE();this.IE();this.kb=(new z(NaN,NaN)).freeze();this.Tb=1;this.dv=(new z(NaN,NaN)).freeze();this.ev=NaN;this.tv=1E-4;this.rv=100;this.fw=(new z(NaN,NaN)).freeze();this.Vu=(new A(NaN,NaN,NaN,NaN)).freeze();this.Ov=(new cb(0,0,0,0)).freeze();this.Pv=ik;this.Lv=this.Hv=null;this.Ml=$g;this.tn=fc;this.Ek=$g;this.On=fc;this.fv=this.cv=rb;this.VA=250;this.xu=(new cb(16,16,16,16)).freeze();this.jv=!0;this.aw=kk;
this.cw=hi;this.tq="auto";this.ki=this.Ji=this.zi=this.wv=this.Ai=this.Bi=this.Ci=this.ji=this.pi=this.gi=null;this.ti=!1;this.jk=this.ik=this.mu=this.Se=!0;this.ou=this.nu=!1;this.su=this.pu=this.av=this.$u=this.tu=this.ru=this.rk=this.qk=this.pk=this.ok=this.mk=this.nk=this.lk=this.qu=this.tk=this.kk=this.sk=!0;this.Rv=this.Nv=16;this.Ue=(new cb(5)).freeze();this.sv=999999999;this.Vd=null;rk(this);this.hd=null;this.Za=new Hg;this.Za.initializeStandardTools();this.Wa=this.$s=this.Za;this.nb=new Yf;
this.Ii=!0;qk(this);this.Pb=new Zf;this.Ii=!1;this.ba=new Q;this.Rg=!1;this.Kn=!0;this.Pc=this.Lf=!1;this.pa();this.Sg=this.fi=null;jk(this);this.Gu=""};
E.prototype.rebuildParts=E.prototype.zl=function(){for(var a=this.Xz.i;a.next();){var b=a.value,c=a.key;(!b.Pd()||b instanceof V)&&v.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+c+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.zz.i;a.next();)b=a.value,c=a.key,b instanceof V||v.k('Invalid group template in Diagram.groupTemplateMap: template for "'+c+'" must be a Group, not a normal Node or Link: '+b);for(a=this.Jz.i;a.next();)b=a.value,c=a.key,b instanceof
W||v.k('Invalid link template in Diagram.linkTemplateMap: template for "'+c+'" must be a Link, not a normal Node or simple Part: '+b);a=v.jb();for(b=this.selection.i;b.next();)(c=b.value.data)&&a.push(c);for(var b=v.jb(),d=this.Om.i;d.next();)(c=d.value.data)&&b.push(c);c=v.jb();for(d=this.Bg.i;d.next();){var e=d.value;null!==e.data&&(c.push(e.data),c.push(e.location))}for(d=this.links.i;d.next();)e=d.value,null!==e.data&&(c.push(e.data),c.push(e.location));for(d=this.ek.i;d.next();)e=d.value,null!==
e.data&&(c.push(e.data),c.push(e.location));d=this.ba;d instanceof Q&&Al(this,d.zg);Al(this,d.Yf);Bl(this,d.Yf);d instanceof Q&&Cl(this,d.zg);for(d=0;d<a.length;d++)e=this.eh(a[d]),null!==e&&(e.hb=!0);for(d=0;d<b.length;d++)e=this.eh(b[d]),null!==e&&(e.hh=!0);for(d=0;d<c.length;d+=2)e=this.eh(c[d]),null!==e&&(e.location=c[d+1]);v.sa(a);v.sa(b);v.sa(c)};
function Bl(a,b){if(null!==b){for(var c=a.ba,d=v.Va(b),e=0;e<d;e++){var f=v.Ra(b,e);c.Je(f)?El(a,f,!1):c instanceof Q&&Fl(a,f)}if(c instanceof Q||c instanceof Qf){for(e=0;e<d;e++)f=v.Ra(b,e),c.Je(f)&&Nl(a,f);if(c instanceof Q)for(c=a.links;c.next();)Ol(c.value)}Pl(a,!1)}}
function El(a,b,c){if(void 0!==b&&null!==b&&!a.la.ib&&!a.li.contains(b)){void 0===c&&(c=!0);var d=a.xz(b),e=Ql(a,b,d);if(null!==e&&(Xg(e),e=e.copy(),null!==e)){var f=a.we;a.we=!0;e.ei=d;e.je=b;a.add(e);e.je=null;e.data=b;c&&Nl(a,b);a.we=f}}}E.prototype.xz=function(a){return this.ba.xz(a)};var Rl=!1,Sl=!1;
function Ql(a,b,c){var d=!1,e=a.ba;e instanceof Q&&(d=e.Fz(b));d?(b=a.zz.ja(c),null===b&&(b=a.zz.ja(""),null===b&&(Sl||(Sl=!0,v.trace('No Group template found for category "'+c+'"'),v.trace("  Using default group template")),b=a.pB))):(b=a.Xz.ja(c),null===b&&(b=a.Xz.ja(""),null===b&&(Rl||(Rl=!0,v.trace('No Node template found for category "'+c+'"'),v.trace("  Using default node template")),b=a.rB)));return b}
function Nl(a,b){var c=a.ba;if(c instanceof Q||c instanceof Qf){var d=c.gb(b);if(void 0!==d){var e=qg(c,d),f=a.eh(b);if(null!==e&&null!==f){for(e=e.i;e.next();){var h=e.value;if(c instanceof Q){var k=c;if(k.Je(h)){if(f instanceof V&&k.Mm(h)===d){var l=f,h=a.eh(h);null!==h&&(h.Oa=l)}}else{var m=a.Pf(h);if(null!==m&&f instanceof S&&(l=f,k.pl(h)===d&&(m.T=l),k.ql(h)===d&&(m.Z=l),h=k.ak(h),v.isArray(h)))for(k=0;k<v.Va(h);k++)if(v.Ra(h,k)===d){l.Ad=m;break}}}else c instanceof Qf&&(m=c,m.Je(h)&&f instanceof
S&&(l=f,m.Nm(h)===d&&(h=a.Dw(h),Dl(a,l,h))))}sg(c,d)}c instanceof Q?(c=c.Mm(b),void 0!==c&&(c=a.Ze(c),c instanceof V&&(f.Oa=c))):c instanceof Qf&&(c=c.Nm(b),void 0!==c&&f instanceof S&&(l=f,f=a.Ze(c),Dl(a,f,l)))}}}
function Dl(a,b,c){if(null!==b&&null!==c){var d=a.Za.rE,e=b,f=c;if(a.Qd)for(b=f.te;b.next();){if(b.value.Z===f)return}else for(e=c,f=b,b=e.te;b.next();)if(b.value.T===e)return;if(null===d||!ji(d,e,f,null,!0))if(d=a.Fw(c.data),b=Tl(a,d),null!==b&&(Xg(b),b=b.copy(),null!==b)){var h=a.we;a.we=!0;b.ei=d;b.je=c.data;b.T=e;b.Z=f;a.add(b);b.je=null;b.data=c.data;a.we=h}}}function Cl(a,b){if(null!==b){for(var c=v.Va(b),d=0;d<c;d++){var e=v.Ra(b,d);Fl(a,e)}Pl(a,!1)}}
function Fl(a,b){if(void 0!==b&&null!==b&&!a.la.ib&&!a.xk.contains(b)){var c=a.Fw(b),d=Tl(a,c);if(null!==d&&(Xg(d),d=d.copy(),null!==d)){var e=a.we;a.we=!0;d.ei=c;d.je=b;var c=a.ba,f=c.WG(b);""!==f&&(d.xg=f);f=c.pl(b);void 0!==f&&(f=a.Ze(f),f instanceof S&&(d.T=f));f=c.ZG(b);""!==f&&(d.sh=f);f=c.ql(b);void 0!==f&&(f=a.Ze(f),f instanceof S&&(d.Z=f));c=c.ak(b);if(v.isArray(c))for(var f=v.Va(c),h=0;h<f;h++){var k=v.Ra(c,h),k=a.Ze(k);null!==k&&(k.Ad=d)}a.add(d);d.je=null;d.data=b;a.we=e}}}
E.prototype.Fw=function(a){var b=this.ba,c="";b instanceof Q?c=b.Fw(a):b instanceof Qf&&(c=b.YG(a));return c};var Ul=!1;function Tl(a,b){var c=a.Jz.ja(b);null===c&&(c=a.Jz.ja(""),null===c&&(Ul||(Ul=!0,v.trace('No Link template found for category "'+b+'"'),v.trace("  Using default link template")),c=a.qB));return c}function Al(a,b){for(var c=v.Va(b),d=0;d<c;d++){var e=v.Ra(b,d);Gl(a,e)}}
function Gl(a,b){if(void 0!==b&&null!==b){var c=a.eh(b);if(null!==c){c.hb=!1;c.hh=!1;var d=c.layer;if(null!==d&&d.g===a){var e=a.ba;if(e instanceof Q&&c instanceof S){var f=c,h=e.gb(f.data);if(void 0!==h){for(var k=f.te;k.next();)rg(e,h,k.value.data);f.uf&&(k=f.Ad,null!==k&&rg(e,h,k.data));if(f instanceof V)for(f=f.Ic;f.next();)k=f.value.data,e.Je(k)&&rg(e,h,k)}}else if(e instanceof Qf&&c instanceof S){f=c;k=a.Pf(f.data);if(null!==k){k.hb=!1;k.hh=!1;var l=k.layer;if(null!==l){var m=l.Ne(-1,k,!1);
0<=m&&a.Lc(Df,"parts",l,k,null,m,null);m=k.zt;null!==m&&m(k,l,null)}}k=a.Qd;for(f=f.te;f.next();)l=f.value,l=(k?l.Z:l.T).data,e.Je(l)&&rg(e,h,l)}e=d.Ne(-1,c,!1);0<=e&&a.Lc(Df,"parts",d,c,null,e,null);e=c.zt;null!==e&&e(c,d,null)}}}}E.prototype.findPartForKey=E.prototype.RG=function(a){if(null===a||void 0===a)return null;a=this.ba.be(a);return null===a?null:this.li.ja(a)};
E.prototype.findNodeForKey=E.prototype.Ze=function(a){if(null===a||void 0===a)return null;a=this.ba.be(a);if(null===a)return null;a=this.li.ja(a);return a instanceof S?a:null};E.prototype.findPartForData=E.prototype.eh=function(a){if(null===a)return null;var b=this.li.ja(a);return null!==b?b:b=this.xk.ja(a)};E.prototype.findNodeForData=E.prototype.Dw=function(a){if(null===a)return null;a=this.li.ja(a);return a instanceof S?a:null};
E.prototype.findLinkForData=E.prototype.Pf=function(a){return null===a?null:this.xk.ja(a)};E.prototype.findNodesByExample=function(a){for(var b=new J,c=this.jo.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var h=arguments[f];if(v.Ta(h)&&Vl(this,e,h)){b.add(d);break}}}return b.i};
E.prototype.findLinksByExample=function(a){for(var b=new J,c=this.ao.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var h=arguments[f];if(v.Ta(h)&&Vl(this,e,h)){b.add(d);break}}}return b.i};function Vl(a,b,c){for(var d in c){var e=b[d],f=c[d];if(v.isArray(f)){if(!v.isArray(e)||e.length<f.length)return!1;for(var h=0;h<e.length;h++){var k=e[h],l=f[h];if(void 0!==l&&!Wl(a,k,l))return!1}}else if(!Wl(a,e,f))return!1}return!0}
function Wl(a,b,c){if("function"===typeof c){if(!c(b))return!1}else if(c instanceof RegExp){if(!b||!c.test(b.toString()))return!1}else if(v.Ta(b)&&v.Ta(c)){if(!Vl(a,b,c))return!1}else if(b!==c)return!1;return!0}v.defineProperty(E,{mK:"nodeTemplate"},function(){return this.Di.ja("")},function(a){var b=this.Di.ja("");b!==a&&(v.A(a,R,E,"nodeTemplate"),this.Di.add("",a),this.h("nodeTemplate",b,a),this.la.ib||this.zl())});
v.defineProperty(E,{Xz:"nodeTemplateMap"},function(){return this.Di},function(a){var b=this.Di;b!==a&&(v.A(a,na,E,"nodeTemplateMap"),this.Di=a,this.h("nodeTemplateMap",b,a),this.la.ib||this.zl())});v.defineProperty(E,{OJ:"groupTemplate"},function(){return this.Ak.ja("")},function(a){var b=this.Ak.ja("");b!==a&&(v.A(a,V,E,"groupTemplate"),this.Ak.add("",a),this.h("groupTemplate",b,a),this.la.ib||this.zl())});
v.defineProperty(E,{zz:"groupTemplateMap"},function(){return this.Ak},function(a){var b=this.Ak;b!==a&&(v.A(a,na,E,"groupTemplateMap"),this.Ak=a,this.h("groupTemplateMap",b,a),this.la.ib||this.zl())});v.defineProperty(E,{aK:"linkTemplate"},function(){return this.yj.ja("")},function(a){var b=this.yj.ja("");b!==a&&(v.A(a,W,E,"linkTemplate"),this.yj.add("",a),this.h("linkTemplate",b,a),this.la.ib||this.zl())});
v.defineProperty(E,{Jz:"linkTemplateMap"},function(){return this.yj},function(a){var b=this.yj;b!==a&&(v.A(a,na,E,"linkTemplateMap"),this.yj=a,this.h("linkTemplateMap",b,a),this.la.ib||this.zl())});v.defineProperty(E,{sH:null},function(){return this.Tl},function(a){this.Tl=a});
v.defineProperty(E,{Oe:"isMouseCaptured"},function(){return this.VB},function(a){var b=this.zb;null!==b&&(a?(this.O.bubbles=!1,b.removeEventListener("mousemove",this.op,!1),b.removeEventListener("mousedown",this.np,!1),b.removeEventListener("mouseup",this.qp,!1),b.removeEventListener("mousewheel",this.lh,!1),b.removeEventListener("DOMMouseScroll",this.lh,!1),b.removeEventListener("mouseout",this.pp,!1),window.addEventListener("mousemove",this.op,!0),window.addEventListener("mousedown",this.np,!0),
window.addEventListener("mouseup",this.qp,!0),window.addEventListener("mousewheel",this.lh,!0),window.addEventListener("DOMMouseScroll",this.lh,!0),window.addEventListener("mouseout",this.pp,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.op,!0),window.removeEventListener("mousedown",this.np,!0),window.removeEventListener("mouseup",this.qp,!0),window.removeEventListener("mousewheel",this.lh,!0),window.removeEventListener("DOMMouseScroll",
this.lh,!0),window.removeEventListener("mouseout",this.pp,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.op,!1),b.addEventListener("mousedown",this.np,!1),b.addEventListener("mouseup",this.qp,!1),b.addEventListener("mousewheel",this.lh,!1),b.addEventListener("DOMMouseScroll",this.lh,!1),b.addEventListener("mouseout",this.pp,!1)),this.VB=a)});
v.defineProperty(E,{position:"position"},function(){return this.kb},function(a){var b=this.kb;if(!b.K(a)){v.A(a,z,E,"position");var c=this.rb.copy();a=a.copy();if(!this.Pc&&null!==this.zb){this.Pc=!0;var d=this.scale;Fk(this,a,this.$d,this.Eb/d,this.Jb/d,this.tn,!1);this.Pc=!1}this.kb=a.S();a=this.Na;a.pc&&Xj(a,b,this.kb);this.Pc||this.Lt(c,this.rb)}});v.defineProperty(E,{jH:"initialPosition"},function(){return this.dv},function(a){this.dv.K(a)||(v.A(a,z,E,"initialPosition"),this.dv=a.S())});
v.defineProperty(E,{kH:"initialScale"},function(){return this.ev},function(a){this.ev!==a&&(v.j(a,"number",E,"initialScale"),this.ev=a)});v.defineProperty(E,{$o:"grid"},function(){null===this.hd&&xk(this);return this.hd},function(a){var b=this.hd;if(b!==a){null===b&&(xk(this),b=this.hd);v.A(a,D,E,"grid");a.type!==yk&&v.k("Diagram.grid must be a Panel of type Panel.Grid");var c=b.R;null!==c&&c.remove(b);this.hd=a;a.name="GRID";null!==c&&c.add(a);Sk(this);this.pa();this.h("grid",b,a)}});
v.u(E,{rb:"viewportBounds"},function(){var a=this.XC;if(null===this.zb)return a;var b=this.kb,c=this.Tb;a.m(b.x,b.y,Math.max(this.Eb,0)/c,Math.max(this.Jb,0)/c);return a});v.defineProperty(E,{ND:"fixedBounds"},function(){return this.Vu},function(a){var b=this.Vu;b.K(a)||(v.A(a,A,E,"fixedBounds"),-Infinity!==a.width&&Infinity!==a.height&&-Infinity!==a.height||v.k("fixedBounds width/height must not be Infinity"),this.Vu=a=a.S(),this.qc(),this.h("fixedBounds",b,a))});
v.defineProperty(E,{QE:"scrollMargin"},function(){return this.Ov},function(a){"number"===typeof a?a=new cb(a):v.A(a,cb,E,"scrollMargin");var b=this.Ov;b.K(a)||(this.Ov=a=a.S(),this.qc(),this.h("scrollMargin",b,a))});v.defineProperty(E,{jA:"scrollMode"},function(){return this.Pv},function(a){var b=this.Pv;b!==a&&(v.pb(a,E,E,"scrollMode"),this.Pv=a,a===ik&&Dk(this,!1),this.h("scrollMode",b,a))});
v.defineProperty(E,{BE:"positionComputation"},function(){return this.Hv},function(a){var b=this.Hv;b!==a&&(null!==a&&v.j(a,"function",E,"positionComputation"),this.Hv=a,Dk(this,!1),this.h("positionComputation",b,a))});v.defineProperty(E,{PE:"scaleComputation"},function(){return this.Lv},function(a){var b=this.Lv;b!==a&&(null!==a&&v.j(a,"function",E,"scaleComputation"),this.Lv=a,xl(this,this.scale,this.scale),this.h("scaleComputation",b,a))});v.u(E,{$d:"documentBounds"},function(){return this.Ou});
function Gk(a,b){a.sj=!1;var c=a.Ou;c.K(b)||(b=b.S(),a.Ou=b,Dk(a,!1),a.Ba("DocumentBoundsChanged",null,c.copy()),Ok(a))}v.defineProperty(E,{scale:"scale"},function(){return this.Tb},function(a){var b=this.Tb;v.We(a,E,"scale");b!==a&&xl(this,b,a)});v.defineProperty(E,{cl:"autoScale"},function(){return this.Ml},function(a){var b=this.Ml;b!==a&&(v.pb(a,E,E,"autoScale"),this.Ml=a,this.h("autoScale",b,a),a!==$g&&Dk(this,!1))});
v.defineProperty(E,{QJ:"initialAutoScale"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(v.pb(a,E,E,"initialAutoScale"),this.Ek=a,this.h("initialAutoScale",b,a))});v.defineProperty(E,{lH:"initialViewportSpot"},function(){return this.fv},function(a){var b=this.fv;b!==a&&(v.A(a,L,E,"initialViewportSpot"),a.bd()||v.k("initialViewportSpot must be a specific Spot: "+a),this.fv=a,this.h("initialViewportSpot",b,a))});
v.defineProperty(E,{iH:"initialDocumentSpot"},function(){return this.cv},function(a){var b=this.cv;b!==a&&(v.A(a,L,E,"initialDocumentSpot"),a.bd()||v.k("initialViewportSpot must be a specific Spot: "+a),this.cv=a,this.h("initialDocumentSpot",b,a))});v.defineProperty(E,{jh:"minScale"},function(){return this.tv},function(a){v.We(a,E,"minScale");var b=this.tv;b!==a&&(0<a?(this.tv=a,this.h("minScale",b,a),a>this.scale&&(this.scale=a)):v.va(a,"> 0",E,"minScale"))});
v.defineProperty(E,{ih:"maxScale"},function(){return this.rv},function(a){v.We(a,E,"maxScale");var b=this.rv;b!==a&&(0<a?(this.rv=a,this.h("maxScale",b,a),a<this.scale&&(this.scale=a)):v.va(a,"> 0",E,"maxScale"))});v.defineProperty(E,{Il:"zoomPoint"},function(){return this.fw},function(a){this.fw.K(a)||(v.A(a,z,E,"zoomPoint"),this.fw=a=a.S())});
v.defineProperty(E,{uD:"contentAlignment"},function(){return this.tn},function(a){var b=this.tn;b.K(a)||(v.A(a,L,E,"contentAlignment"),this.tn=a=a.S(),this.h("contentAlignment",b,a),Dk(this,!1))});v.defineProperty(E,{RJ:"initialContentAlignment"},function(){return this.On},function(a){var b=this.On;b.K(a)||(v.A(a,L,E,"initialContentAlignment"),this.On=a=a.S(),this.h("initialContentAlignment",b,a))});
v.defineProperty(E,{padding:"padding"},function(){return this.Ue},function(a){"number"===typeof a?a=new cb(a):v.A(a,cb,E,"padding");var b=this.Ue;b.K(a)||(this.Ue=a=a.S(),this.qc(),this.h("padding",b,a))});v.u(E,{Bg:"nodes"},function(){return this.jo.i});v.u(E,{links:"links"},function(){return this.ao.i});v.u(E,{ek:"parts"},function(){return this.wb.i});
E.prototype.findTopLevelNodesAndLinks=function(){for(var a=new J(R),b=this.jo.i;b.next();){var c=b.value;c.fp&&a.add(c)}for(b=this.ao.i;b.next();)c=b.value,c.fp&&a.add(c);return a.i};E.prototype.findTopLevelGroups=function(){return this.Wk.i};v.defineProperty(E,{Pb:"layout"},function(){return this.Vd},function(a){var b=this.Vd;b!==a&&(v.A(a,Zf,E,"layout"),null!==b&&(b.g=null,b.group=null),this.Vd=a,a.g=this,a.group=null,this.vu=!0,this.h("layout",b,a),this.ue())});
E.prototype.layoutDiagram=function(a){Bk(this);a&&Pl(this,!0);$k(this,!1)};function Pl(a,b){for(var c=a.Wk.i;c.next();)Xl(a,c.value,b);null!==a.Pb&&(b?a.Pb.wf=!1:a.Pb.H())}function Xl(a,b,c){if(null!==b){for(var d=b.fo.i;d.next();)Xl(a,d.value,c);null!==b.Pb&&(c?b.Pb.wf=!1:b.Pb.H())}}
function $k(a,b){if(!a.Vx){var c=a.Pb,d=a.Sa;a.Sa=!0;try{a.Qb("Layout");var e=a.Na;1!==a.la.th||e.df||e.pc||e.Xm("Layout");for(var f=a.Wk.i;f.next();)Yl(a,f.value,b);c.wf||b&&!c.kE&&1!==a.la.th||(c.doLayout(a),Bk(a),c.wf=!0)}finally{a.wd("Layout"),a.vu=!c.wf,a.Sa=d}}}function Yl(a,b,c){if(null!==b){for(var d=b.fo.i;d.next();)Yl(a,d.value,c);d=b.Pb;null===d||d.wf||c&&!d.kE||(b.Ey=!b.location.G(),d.doLayout(b),b.H(Zl),d.wf=!0,cl(a,b))}}
v.defineProperty(E,{Qd:"isTreePathToChildren"},function(){return this.jv},function(a){var b=this.jv;if(b!==a&&(v.j(a,"boolean",E,"isTreePathToChildren"),this.jv=a,this.h("isTreePathToChildren",b,a),!this.la.ib))for(a=this.Bg;a.next();)$l(a.value)});E.prototype.findTreeRoots=function(){for(var a=new I(S),b=this.Bg;b.next();){var c=b.value;c.fp&&null===c.Vo()&&a.add(c)}return a.i};
v.defineProperty(E,{zA:"treeCollapsePolicy"},function(){return this.aw},function(a){var b=this.aw;b!==a&&(v.pb(a,E,E,"treeCollapsePolicy"),this.aw=a,this.h("treeCollapsePolicy",b,a))});v.defineProperty(E,{gh:null},function(){return this.MB},function(a){this.MB=a});
function jk(a){function b(a){var b=a.toLowerCase(),h=new I("function");c.add(a,h);c.add(b,h);d.add(a,a);d.add(b,a)}var c=new na("string",I),d=new na("string","string");b("AnimationStarting");b("AnimationFinished");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("Modified");
b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.Xx=c;a.Wx=d}
function qa(a,b){var c=a.Wx.ja(b);return null!==c?c:a.Wx.ja(b.toLowerCase())}function am(a,b){var c=a.Xx.ja(b);if(null!==c)return c;c=a.Xx.ja(b.toLowerCase());if(null!==c)return c;v.k("Unknown DiagramEvent name: "+b);return null}E.prototype.addDiagramListener=E.prototype.Yy=function(a,b){v.j(a,"string",E,"addDiagramListener:name");v.j(b,"function",E,"addDiagramListener:listener");var c=am(this,a);null!==c&&c.add(b)};
E.prototype.removeDiagramListener=E.prototype.EE=function(a,b){v.j(a,"string",E,"removeDiagramListener:name");v.j(b,"function",E,"addDiagramListener:listener");var c=am(this,a);null!==c&&c.remove(b)};E.prototype.raiseDiagramEvent=E.prototype.Ba=function(a,b,c){var d=am(this,a),e=new yf;e.g=this;e.name=qa(this,a);void 0!==b&&(e.uA=b);void 0!==c&&(e.$z=c);a=d.length;if(1===a)d=d.da(0),d(e);else if(0!==a)for(b=d.cc(),c=0;c<a;c++)d=b[c],d(e);return e.cancel};
function ci(a,b){var c=!1;a.rb.Xj(b)&&(c=!0);c=a.sz(b,function(a){return a.Y},function(a){return a instanceof W},!0,function(a){return a instanceof W},c);if(0!==c.count)for(c=c.i;c.next();){var d=c.value;d.sl&&d.ic()}}E.prototype.isUnoccupied=E.prototype.hp=function(a,b){void 0===b&&(b=null);return bm(this,!1,null,b).hp(a.x,a.y,a.width,a.height)};
function bm(a,b,c,d){null===a.td&&(a.td=new cm);if(a.td.st||a.td.group!==c||a.td.sA!==d){if(null===c){b=a.sj?Ck(a):a.$d.copy();b.Qf(100,100);a.td.initialize(b);b=v.ag();for(var e=a.Bg;e.next();){var f=e.value,h=f.layer;null!==h&&h.visible&&!h.Gc&&dm(a,f,d,b)}}else for(c.U.G()||c.sf(),b=c.U.copy(),b.Qf(20,20),a.td.initialize(b),b=v.ag(),e=c.Ic;e.next();)f=e.value,f instanceof S&&dm(a,f,d,b);v.Vb(b);a.td.group=c;a.td.sA=d;a.td.st=!1}else b&&em(a.td);return a.td}
function dm(a,b,c,d){if(b!==c)if(b.isVisible()&&b.canAvoid()){c=b.getAvoidableRect(d);d=a.td.Lo;b=a.td.Jo;for(var e=c.x+c.width,f=c.y+c.height,h=c.x;h<e;h+=d){for(var k=c.y;k<f;k+=b)fm(a.td,h,k);fm(a.td,h,f)}for(k=c.y;k<f;k+=b)fm(a.td,e,k);fm(a.td,e,f)}else if(b instanceof V)for(b=b.Ic;b.next();)e=b.value,e instanceof S&&dm(a,e,c,d)}function gm(a,b){null===a.td||a.td.st||null!==b&&!b.canAvoid()||(a.td.st=!0)}
E.prototype.simulatedMouseMove=E.prototype.sx=function(a,b,c){if(null!==jh){var d=jh.g;c instanceof E||(c=null);var e=kh;c!==e&&(null!==e&&e!==d&&null!==e.Za.ae&&(Fh(e),jh.Jw=!1,e.Za.ae.doSimulatedDragLeave()),kh=c,null!==c&&c!==d&&null!==c.Za.ae&&(Mh(),e=c.Za.ae,Ih.contains(e)||Ih.add(e),c.Za.ae.doSimulatedDragEnter()));if(null===c||c===d||!c.fD||c.ab||!c.Ho)return!1;d=c.Za.ae;null!==d&&(null!==a?b=c.Iq(a):null===b&&(b=new z),c.Nb.ca=b,c.Nb.kl=!1,c.Nb.up=!1,d.doSimulatedDragOver());return!0}return!1};
E.prototype.simulatedMouseUp=E.prototype.$E=function(a,b,c,d){if(null!==jh){null===d&&(d=b);b=kh;var e=jh.g;if(d!==b){if(null!==b&&b!==e&&null!==b.Za.ae)return Fh(b),jh.Jw=!1,b.Za.ae.doSimulatedDragLeave(),!1;kh=d;null!==d&&null!==d.Za.ae&&(Mh(),b=d.Za.ae,Ih.contains(b)||Ih.add(b),d.Za.ae.doSimulatedDragEnter())}if(null===d)return jh.doCancel(),!0;if(d!==this)return null!==a&&(c=d.Iq(a)),d.Nb.ca=c,d.Nb.kl=!1,d.Nb.up=!0,a=d.Za.ae,null!==a&&a.doSimulatedDrop(),a=jh,null!==a&&(d=a.mayCopy(),a.Bf=d?"Copy":
"Move",a.stopTool()),!0}return!1};v.defineProperty(E,{lD:"autoScrollRegion"},function(){return this.xu},function(a){"number"===typeof a?a=new cb(a):v.A(a,cb,E,"autoScrollRegion");var b=this.xu;b.K(a)||(this.xu=a=a.S(),this.qc(),this.h("autoScrollRegion",b,a))});function Yh(a,b){a.wu.assign(b);hm(a,a.wu).Fc(a.position)?Fh(a):im(a)}
function im(a){-1===a.nn&&(a.nn=v.setTimeout(function(){if(-1!==a.nn){Fh(a);var b=a.O.event;if(null!==b){var c=hm(a,a.wu);c.Fc(a.position)||(a.position=c,a.O.ca=a.pF(a.wu),a.sx(b,null,b.target.W)||a.doMouseMove(),a.sj=!0,Gk(a,a.ah()),a.ke=!0,a.Uf(),im(a))}}},a.VA))}function Fh(a){-1!==a.nn&&(v.clearTimeout(a.nn),a.nn=-1)}
function hm(a,b){var c=a.position,d=a.lD;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.rb,f=a.scale,e=v.hk(0,0,e.width*f,e.height*f),h=v.Mb(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var k=Math.max(a.Tt,1),k=k|0;h.x-=k;b.x<e.x+d.left/2&&(h.x-=k);b.x<e.x+d.left/4&&(h.x-=4*k)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(k=Math.max(a.Tt,1),k|=0,h.x+=k,b.x>e.x+e.width-d.right/2&&(h.x+=k),b.x>e.x+e.width-d.right/4&&(h.x+=4*k));b.y>=e.y&&b.y<e.y+d.top?(k=Math.max(a.Ut,1),k|=0,h.y-=k,b.y<e.y+
d.top/2&&(h.y-=k),b.y<e.y+d.top/4&&(h.y-=4*k)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(k=Math.max(a.Ut,1),k|=0,h.y+=k,b.y>e.y+e.height-d.bottom/2&&(h.y+=k),b.y>e.y+e.height-d.bottom/4&&(h.y+=4*k));h.Fc(ad)||(c=new z(c.x+h.x/f,c.y+h.y/f));v.Vb(e);v.v(h);return c}E.prototype.makeSVG=E.prototype.makeSvg=function(a){void 0===a&&(a=new ta);a.context="svg";a=jm(this,a);return null!==a?a.Dl:null};
E.prototype.makeImage=function(a){void 0===a&&(a=new ta);var b=(a.document||document).createElement("img");b.src=this.HH(a);return b};E.prototype.makeImageData=E.prototype.HH=function(a){void 0===a&&(a=new ta);var b=jm(this,a);return null!==b?b.toDataURL(a.type,a.details):""};var km=!1;
function jm(a,b){a.Na.$h();a.Uf();if(null===a.zb)return null;"object"!==typeof b&&v.k("properties argument must be an Object.");var c=!1,d=b.size||null,e=b.scale||null;void 0!==b.scale&&isNaN(b.scale)&&(e="NaN");var f=b.maxSize;void 0===b.maxSize&&(c=!0,f="svg"===b.context?new ia(Infinity,Infinity):new ia(2E3,2E3));var h=b.position||null,k=b.parts||null,l=void 0===b.padding?1:b.padding,m=b.background||null,n=b.omitTemporary;void 0===n&&(n=!0);var p=b.document||document,q=b.elementFinished||null,r=
b.showTemporary;void 0===r&&(r=!n);n=b.showGrid;void 0===n&&(n=r);null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null);"number"===typeof l?l=new cb(l):l instanceof cb||(l=new cb(0));l.left=Math.max(l.left,0);l.right=Math.max(l.right,0);l.top=Math.max(l.top,0);l.bottom=Math.max(l.bottom,0);a.Gn=!1;Zc(a.lf,!0);var s=new Rc(null,p),t=s.el,u=s;if(!(d||e||k||h))return s.width=a.Eb+Math.ceil(l.left+l.right),s.height=a.Jb+Math.ceil(l.top+l.bottom),"svg"===b.context&&(t=u=new Cc(s.xd,p,q),t instanceof Cc&&
(a.Gn=!0)),kl(a,t,l,new ia(s.width,s.height),a.Tb,a.kb,k,m,r,n),a.Gn=!0,u;var x=a.nb.vw,w=new z(0,0),y=a.$d.copy();y.FI(a.padding);if(r)for(var B=!0,B=a.Yb.n,H=B.length,C=0;C<H;C++){var T=B[C];if(T.visible&&T.Gc)for(var ba=T.wb.n,T=ba.length,U=0;U<T;U++){var M=ba[U];M.Gz&&M.isVisible()&&(M=M.U,M.G()&&y.bi(M))}}w.x=y.x;w.y=y.y;if(null!==k){var aa,B=!0,ba=k.i;for(ba.reset();ba.next();)H=ba.value,H instanceof R&&(M=H,T=M.layer,null!==T&&!T.visible||null!==T&&!r&&T.Gc||!M.isVisible()||(M=M.U,M.G()&&(B?
(B=!1,aa=M.copy()):aa.bi(M))));B&&(aa=new A(0,0,0,0));y.width=aa.width;y.height=aa.height;w.x=aa.x;w.y=aa.y}null!==h&&h.G()&&(w=h,e||(e=x));B=ba=0;null!==l&&(ba=l.left+l.right,B=l.top+l.bottom);C=H=0;null!==d&&(H=d.width,C=d.height,isFinite(H)&&(H=Math.max(0,H-ba)),isFinite(C)&&(C=Math.max(0,C-B)));aa=h=0;null!==d&&null!==e?("NaN"===e&&(e=x),d.G()?(h=H,aa=C):isNaN(C)?(h=H,aa=y.height*e):(h=y.width*e,aa=C)):null!==d?d.G()?(e=Math.min(H/y.width,C/y.height),h=H,aa=C):isNaN(C)?(e=H/y.width,h=H,aa=y.height*
e):(e=C/y.height,h=y.width*e,aa=C):null!==e?"NaN"===e&&f.G()?(e=Math.min((f.width-ba)/y.width,(f.height-B)/y.height),e>x?(e=x,h=y.width,aa=y.height):(h=f.width,aa=f.height)):(h=y.width*e,aa=y.height*e):(e=x,h=y.width,aa=y.height);null!==l?(h+=ba,aa+=B):l=new cb(0);null!==f&&(d=f.width,f=f.height,"svg"!==b.context&&c&&!km&&(h>d||aa>f)&&(v.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(h)+"x"+Math.ceil(aa)+" vs 2000x2000) Consider increasing the max size."),
km=!0),isNaN(d)&&(d=2E3),isNaN(f)&&(f=2E3),isFinite(d)&&(h=Math.min(h,d)),isFinite(f)&&(aa=Math.min(aa,f)));s.width=Math.ceil(h);s.height=Math.ceil(aa);"svg"===b.context&&(t=u=new Cc(s.xd,p,q),t instanceof Cc&&(a.Gn=!0));kl(a,t,l,new ia(Math.ceil(h),Math.ceil(aa)),e,w,k,m,r,n);a.Gn=!0;return u}E.inherit=function(a,b){v.j(a,"function",E,"inherit");v.j(b,"function",E,"inherit");b.QF&&v.k("Cannot inherit from "+v.af(b));v.Ja(a,b)};
function sk(){this.TF="63ad05bbe23a1786468a4c741b6d2";this.dg=this.TF===this._tk?!0:null}
sk.prototype.Hl=function(a){a.lf.setTransform(a.rd,0,0,a.rd,0,0);if(null===this.dg)a:{var b="f",c=window[v.ug("76a715b2f73f148a")][v.ug("72ba13b5")];a=v.ug;if(window[a("7da7")]&&window[a("7da7")][a("76a115b6ed251eaf4692")]){this.dg=!0;var d=window[a("7da7")][a("76a115b6ed251eaf4692")],d=a(d).split(a("39e9")),e=a(d[1]).split("."),f=v[a("6cae19")].split(".");if(e[0]>f[0]||e[0]===f[0]&&e[1]>=f[1]){e=c[a("76ad18b4f73e")];for(f=c[a("73a612b6fb191d")](a("35e7"))+2;f<e;f++)b+=c[f];c=b[a("73a612b6fb191d")](a(d[2]));
0>c&&a(d[2])!==a("7da71ca0ad381e90")&&(c=b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));0>c&&(c=b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));this.dg=!(0<=c&&c<b[a("73a612b6fb191d")](a("35")))}}else{if(a("77bb5bb2f32603de")===window[a("76a715b2f73f148a")][a("6aba19a7ec351488")])try{this.dg=!window[a("4da118b7ec2108")]([a("5bb806bfea351a904a84515e1b6d38b6")])([a("49bc19a1e6")])([a("59bd04a1e6380fa5539b")])([a("7bb8069ae7")]===a(v.adym));if(!1===this.dg)break a;this.dg=!window[a("4da118b7ec2108")]([a("5bb806bfea351a904a84515e1b6d38b6")])([a("49bc19a1e6")])([a("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([a("7bb8069ae7")]===
a(v.adym));if(!1===this.dg)break a}catch(h){}e=c[a("76ad18b4f73e")];for(f=c[a("73a612b6fb191d")](a("35e7"))+2;f<e;f++)b+=c[f];c=b[a("73a612b6fb191d")](a(v.adym));0>c&&a(v.adym)!==a("7da71ca0ad381e90")&&(c=b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));if(this.dg=!(0<=c&&c<b[a("73a612b6fb191d")](a("35"))))b=window.document[a("79ba13b2f7333e8846865a7d00")]("div"),c=a("02cncncn"),"."===c[0]&&(c=c[a("69bd14a0f724128a44")](1)),b[a("79a417a0f0181a8946")]=c,window.document[a("78a712aa")]?(window.document[a("78a712aa")][a("7bb806b6ed32388c4a875b")](b),
c=window[a("7dad0290ec3b0b91578e5b40007031bf")](b)[a("7dad0283f1390b81519f4645156528bf")](a("78a704b7e62456904c9b12701b6532a8")),window.document[a("78a712aa")][a("68ad1bbcf533388c4a875b")](b),c&&-1!==c.indexOf(a(v.pG))&&-1!==c.indexOf(a(v.qG))&&(this.dg=!1)):(this.dg=null,this.dg=!1)}}return 0<this.dg&&this!==this.RF?!0:!1};sk.prototype.t=function(){this.RF=null};
function tk(a,b){void 0!==b&&null!==b||v.k("Diagram setup requires an argument DIV.");null!==a.Kb&&v.k("Diagram has already completed setup.");"string"===typeof b?a.Kb=window.document.getElementById(b):b instanceof HTMLDivElement?a.Kb=b:v.k("No DIV or DIV id supplied: "+b);null===a.Kb&&v.k("Invalid DIV id; could not get element with id: "+b);void 0!==a.Kb.W&&v.k("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Kb,null).position&&(a.Kb.style.position=
"relative");a.Kb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)";a.Kb.style["-ms-touch-action"]="none";a.Kb.innerHTML="";a.Kb.W=a;var c=new Rc(a);c.xd.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px","rtl"===window.getComputedStyle(a.Kb,null).getPropertyValue("direction")&&(a.Tq=!0),c.style.zIndex="2",c.style.PK="none",c.style.webkitUserSelect="none",c.style.MozUserSelect=
"none");a.Eb=a.Kb.clientWidth||1;a.Jb=a.Kb.clientHeight||1;a.zb=c;a.lf=c.el;var d=a.lf;a.IF=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1);a.rd=a.computePixelRatio();ml(a,a.Eb,a.Jb);a.$x=d[v.ug("7eba17a4ca3b1a8346")][v.ug("78a118b7")](d,v.Hl,4,4);a.Kb.insertBefore(c.xd,a.Kb.firstChild);c=new Rc(null);c.width=1;c.height=1;a.Zx=c;a.CB=c.el;var c=v.createElement("div"),e=v.createElement("div");
c.style.position="absolute";c.style.overflow="auto";c.style.width=a.Eb+"px";c.style.height=a.Jb+"px";c.style.zIndex="1";e.style.position="absolute";e.style.width="1px";e.style.height="1px";a.Kb.appendChild(c);c.appendChild(e);c.onscroll=a.KF;c.onmousedown=a.jC;c.ontouchstart=a.jC;c.W=a;c.OF=!0;c.PF=!0;a.Qv=c;a.cs=e;a.eA=v.xD(function(){a.Nj=null;a.pa()},300,!1);a.uF=v.xD(function(){Lj(a)},250,!1);a.preventDefault=function(a){a.preventDefault();return!1};a.op=function(b){if(a.isEnabled){a.Tl=!0;var c=
a.Sc;v.Pm&&c.Xi?(b.preventDefault(),b.simulated=!0,a.qs=b):(a.Sc=a.Nb,a.Nb=c,Jk(a,a,b,c,!0),a.sx(b,null,b.target.W)||(a.doMouseMove(),a.Wa.isBeyondDragSize()&&(a.Jk=0),Nk(c,b)))}};a.np=function(b){if(a.isEnabled){a.Tl=!0;var c=a.Sc;if(v.Pm&&null!==a.qs)a.qs=b,b.preventDefault();else if(v.Pm&&400>b.timeStamp-a.Yl)b.preventDefault();else if(a.Gk)b.preventDefault();else{a.Sc=a.Nb;a.Nb=c;Jk(a,a,b,c,!0);c.kl=!0;c.Ge=b.detail;if(v.eE||v.fE)b.timeStamp-a.Yl<a.UC&&!a.Wa.isBeyondDragSize()?a.Jk++:a.Jk=1,a.Yl=
b.timeStamp,c.Ge=a.Jk;a.ri=c;!0===c.Dq.simulated?(b.preventDefault(),b.simulated=!0):(jh=null,a.doMouseDown(),a.ri=a.ri.copy(),1===b.button?b.preventDefault():Nk(c,b))}}};a.qp=function(b){if(a.isEnabled)if(a.Gk&&2===b.button)b.preventDefault();else if(a.Gk&&0===b.button&&(a.Gk=!1),a.ys)b.preventDefault();else{a.Tl=!0;var c=a.Sc;if(v.Pm){if(400>b.timeStamp-a.Yl){b.preventDefault();return}a.Yl=b.timeStamp}if(v.Pm&&null!==a.qs)a.qs=null,b.preventDefault();else{a.Sc=a.Nb;a.Nb=c;Jk(a,a,b,c,!0);c.up=!0;
c.Ge=b.detail;if(v.eE||v.fE)c.Ge=a.Jk;c.bubbles=b.bubbles;b.target.W&&(c.Jg=b.target.W);a.$E(b,null,new z,c.Jg)||(a.doMouseUp(),Fh(a),Nk(c,b))}}};a.lh=function(b){if(a.isEnabled){var c=a.Sc;a.Sc=a.Nb;a.Nb=c;Jk(a,a,b,c,!0);c.bubbles=!0;c.il=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail;a.doMouseWheel();Nk(c,b)}};a.pp=function(){if(a.isEnabled){a.Tl=!1;var b=a.Wa;b.cancelWaitAfter();b instanceof Hg&&b.hideToolTip()}};a.kF=function(b){if(a.isEnabled){a.ys=!1;a.Gk=!0;var c=a.Sc;a.Sc=a.Nb;a.Nb=c;Lk(a,
b,b.targetTouches[0],c,1<b.touches.length);a.doMouseDown();Nk(c,b)}};a.jF=function(b){if(a.isEnabled){var c=a.Sc;a.Sc=a.Nb;a.Nb=c;var d=null;0<b.changedTouches.length?d=b.changedTouches[0]:0<b.targetTouches.length&&(d=b.targetTouches[0]);Mk(a,b,d,c,1<b.touches.length);a.sx(d?d:b,null,c.Jg)||a.doMouseMove();Nk(c,b)}};a.iF=function(b){if(a.isEnabled)if(a.ys)b.preventDefault();else{var c=a.Sc;a.Sc=a.Nb;a.Nb=c;if(1<b.touches.length)a.Yo("hasGestureZoom")&&(a.ky=!1);else{var d=null,e=null;0<b.changedTouches.length?
e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);c.g=a;c.Ge=1;if(null!==e){d=window.document.elementFromPoint(e.clientX,e.clientY);null!==d&&d.W instanceof E&&d.W!==a&&Kk(d.W,e,c);Kk(a,b.changedTouches[0],c);var m=e.screenX,n=e.screenY,p=a.$B;b.timeStamp-a.Yl<a.UC&&!(25<Math.abs(p.x-m)||25<Math.abs(p.y-n))?a.Jk++:a.Jk=1;c.Ge=a.Jk;a.Yl=b.timeStamp;a.$B.m(m,n)}c.od=0;c.button=0;c.buttons=1;c.kl=!1;c.up=!0;c.il=0;c.zc=!1;c.bubbles=!1;c.event=b;c.timestamp=Date.now();c.Jg=null===
d?b.target.W:d.W?d.W:null;c.ye=null;a.$E(e?e:b,null,new z,c.Jg)||a.doMouseUp();Nk(c,b);a.Gk=!1}}};a.$H=function(b){if("touch"===b.pointerType){var c=a.tC;void 0===c[b.pointerId]&&(a.Gv++,c[b.pointerId]=b);a.Jf[0]=null;a.Jf[1]=null;for(var d in c)if(null===a.Jf[0])a.Jf[0]=c[d];else if(null===a.Jf[1]){a.Jf[1]=c[d];break}a.isEnabled&&(a.ys=!1,a.Gk=!0,c=a.Sc,a.Sc=a.Nb,a.Nb=c,Lk(a,b,b,c,1<a.Gv),a.doMouseDown(),Nk(c,b))}};a.bI=function(b){if("touch"===b.pointerType&&!(2>a.Gv)){var c=a.Jf;c[0].pointerId===
b.pointerId&&(c[0]=b);c[1].pointerId===b.pointerId&&(c[1]=b);a.isEnabled&&(c=a.Sc,a.Sc=a.Nb,a.Nb=c,Mk(a,b,b,c,!0),a.sx(b,null,c.Jg)||(a.doMouseMove(),Nk(c,b)))}};a.aI=function(b){if("touch"===b.pointerType){var c=a.tC;void 0!==c[b.pointerId]&&(a.Gv--,delete c[b.pointerId],c=a.Jf,null!==c[0]&&c[0].pointerId===b.pointerId&&(c[0]=null),null!==c[1]&&c[1].pointerId===b.pointerId&&(c[1]=null))}};Zc(d,!0);wk(a)}
function lm(a){1<arguments.length&&v.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");E.call(this,a);this.Ss=!0;this.bl=!1;this.ab=!0;this.uD=sb;this.Pb=new mm}v.Ja(lm,E);v.ea("Palette",lm);
function pk(a){1<arguments.length&&v.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");E.call(this,a);this.Na.isEnabled=!1;this.Pc=!0;this.Gj=null;this.Ru=!0;this.yI("drawShadows",!1);var b=new R,c=new Y;c.stroke="magenta";c.lb=2;c.fill="transparent";c.name="BOXSHAPE";b.Al=!0;b.lA="BOXSHAPE";b.Lz="BOXSHAPE";b.ME="BOXSHAPE";b.cursor="move";b.add(c);this.Nl=b;c=new Vg;c.type=Qi;c.ef=zb;var d=new Ri;d.Rf=!0;c.add(d);d=new Y;d.Uj=zb;d.Ab="Rectangle";d.za=new ia(64,
64);d.cursor="se-resize";d.alignment=Eb;c.add(d);b.KE=c;this.xm=this.Vj=!1;this.of=this.Us=!0;this.lD=0;this.Py=new Rc(null);this.SF=this.Py.el;this.Za.ae=new nm;this.Za.NE=new om;var e=this;this.click=function(){var a=e.Gj;if(null!==a){var b=a.rb,c=e.O.ca;a.position=new z(c.x-b.width/2,c.y-b.height/2)}};this.zE=function(){pm(e)};this.yE=function(){null!==e.Gj&&(e.qc(),e.pa())};this.cl=Hk;this.Pc=!1}v.Ja(pk,E);v.ea("Overview",pk);
function qm(a){a.Pc||a.Hd||!1!==a.Lf||(a.Lf=!0,requestAnimationFrame(function(){if(a.Lf&&!a.Hd&&(a.Lf=!1,null!==a.Kb)){a.Hd=!0;Bk(a);a.$d.G()||Gk(a,a.ah());null===a.Kb&&v.k("No div specified");null===a.zb&&v.k("No canvas specified");if(a.ke){var b=a.Gj;if(null!==b&&!b.Na.df&&!b.Na.pc){var b=a.lf,c=a.Py;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.zb.width,a.zb.height);b.drawImage(c.xd,0,0);c=a.ne;c.reset();1!==a.scale&&c.scale(a.scale);0===a.position.x&&0===a.position.y||c.translate(-a.position.x,
-a.position.y);b.scale(a.rd,a.rd);b.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.Yb.n,d=c.length,e=0;e<d;e++)c[e].Xe(b,a);a.Fk=!1;a.ke=!1}}a.Hd=!1}}))}pk.prototype.computePixelRatio=function(){return 1};
pk.prototype.Xe=function(){null===this.Kb&&v.k("No div specified");null===this.zb&&v.k("No canvas specified");if(this.ke){var a=this.Gj;if(null!==a&&!a.Na.df){hl(this);var b=a.$o;(null!==b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Sk(a);var c=this.zb,b=this.lf,d=this.Py,e=this.SF;d.width=c.width;d.height=c.height;Zc(b,!0);b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,c.width,c.height);d=this.ne;d.reset();1!==this.scale&&d.scale(this.scale);0===this.position.x&&0===this.position.y||d.translate(-this.position.x,
-this.position.y);b.scale(this.rd,this.rd);b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);for(var d=this.Ru,f=this.rb,h=a.Yb.n,k=h.length,a=0;a<k;a++){var l=h[a],m=b,n=f,p=d;if(l.visible&&0!==l.Rc&&(void 0===p&&(p=!0),p||!l.Gc)){1!==l.Rc&&(m.globalAlpha=l.Rc);for(var p=this.scale,l=l.wb.n,q=l.length,r=0;r<q;r++){var s=l[r],t=s.U;t.yg(n)&&(1<t.width*p||1<t.height*p?s.Xe(m,this):bk(s,m))}m.globalAlpha=1}}e.drawImage(c.xd,0,0);c=this.Yb.n;e=c.length;for(a=0;a<e;a++)c[a].Xe(b,this);this.ke=this.Fk=!1}}};
v.defineProperty(pk,{Zz:"observed"},function(){return this.Gj},function(a){var b=this.Gj;null!==a&&v.A(a,E,pk,"observed");a instanceof pk&&v.k("Overview.observed Diagram may not be an Overview itself: "+a);b!==a&&(null!==b&&(this.remove(this.$g),b.EE("ViewportBoundsChanged",this.zE),b.EE("DocumentBoundsChanged",this.yE),b.Dv.remove(this)),this.Gj=a,null!==a&&(a.Yy("ViewportBoundsChanged",this.zE),a.Yy("DocumentBoundsChanged",this.yE),a.Dv.add(this),this.add(this.$g),pm(this)),this.qc(),this.h("observed",
b,a))});v.defineProperty(pk,{$g:"box"},function(){return this.Nl},function(a){var b=this.Nl;b!==a&&(this.Nl=a,this.remove(b),this.add(this.Nl),pm(this),this.h("box",b,a))});v.defineProperty(pk,{MJ:"drawsTemporaryLayers"},function(){return this.Ru},function(a){this.Ru!==a&&(this.Ru=a,this.bx())});
function pm(a){var b=a.$g;if(null!==b){var c=a.Gj;if(null!==c){a.ke=!0;var c=c.rb,d=b.Wt,e=v.Fl();e.m(c.width,c.height);d.za=e;v.$j(e);a=2/a.scale;d instanceof Y&&(d.lb=a);b.location=new z(c.x-a/2,c.y-a/2)}}}pk.prototype.ah=function(){var a=this.Gj;return null===a?bd:a.$d};pk.prototype.ZD=function(){!0!==this.ke&&(this.ke=!0,qm(this))};pk.prototype.Lt=function(a){this.Pc||(Ak(this),this.pa(),Ok(this),this.qc(),pm(this),this.Ba("ViewportBoundsChanged",null,a))};
function nm(){Zg.call(this);this.Rk=null}v.Ja(nm,Zg);nm.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.bl||!a.of)return!1;var b=a.Zz;if(null===b)return!1;if(null===this.findDraggablePart()){var c=b.rb;this.Rk=new z(c.width/2,c.height/2);a=a.yc.ca;b.position=new z(a.x-this.Rk.x,a.y-this.Rk.y)}return!0};nm.prototype.doActivate=function(){this.Rk=null;Zg.prototype.doActivate.call(this)};
nm.prototype.moveParts=function(){var a=this.g,b=a.Zz;if(null!==b){var c=a.$g;if(null!==c){if(null===this.Rk){var d=a.yc.ca,c=c.location;this.Rk=new z(d.x-c.x,d.y-c.y)}a=a.O.ca;b.position=new z(a.x-this.Rk.x,a.y-this.Rk.y)}}};function om(){Pi.call(this)}v.Ja(om,Pi);om.prototype.resize=function(a){var b=this.g.Zz;if(null!==b){var c=b.rb.copy();b.position=a.position;(c.width!==a.width||c.height!==a.height)&&0<a.width&&0<a.height&&(b.scale=Math.min(c.width/a.width,c.height/a.height))}};
function ha(a){1<arguments.length&&v.k("Brush constructor can take at most one optional argument, the Brush type.");v.dc(this);this.D=!1;void 0===a?(this.ia=Uf,this.rn="black"):"string"===typeof a?(this.ia=Uf,this.rn=a):(this.ia=a,this.rn="black");var b=this.ia;b===Vf?(this.to=sb,this.In=Db):this.In=b===Yc?this.to=zb:this.to=qb;this.Wv=0;this.Su=NaN;this.Og=this.Fv=this.Ng=null;this.Qx=this.sn=0}v.ea("Brush",ha);var Uf;ha.Solid=Uf=v.p(ha,"Solid",0);var Vf;ha.Linear=Vf=v.p(ha,"Linear",1);var Yc;
ha.Radial=Yc=v.p(ha,"Radial",2);var rm;ha.Pattern=rm=v.p(ha,"Pattern",4);ha.prototype.copy=function(){var a=new ha;a.ia=this.ia;a.rn=this.rn;a.to=this.to.S();a.In=this.In.S();a.Wv=this.Wv;a.Su=this.Su;null!==this.Ng&&(a.Ng=this.Ng.copy());a.Fv=this.Fv;return a};ha.prototype.Ea=function(){this.freeze();Object.freeze(this);return this};ha.prototype.freeze=function(){this.D=!0;null!==this.Ng&&this.Ng.freeze();return this};
ha.prototype.Pa=function(){Object.isFrozen(this)&&v.k("cannot thaw constant: "+this);this.D=!1;null!==this.Ng&&this.Ng.Pa();return this};ha.prototype.toString=function(){var a="Brush(";if(this.type===Uf)a+=this.color;else if(a=this.type===Vf?a+"Linear ":this.type===Yc?a+"Radial ":this.type===rm?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.Ys)for(var b=this.Ys.i;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
ha.prototype.addColorStop=ha.prototype.addColorStop=function(a,b){this.D&&v.ka(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&v.va(a,"0 <= loc <= 1",ha,"addColorStop:loc");v.j(b,"string",ha,"addColorStop:color");null===this.Ng&&(this.Ng=new na("number","string"));this.Ng.add(a,b);this.ia===Uf&&(this.type=Vf);this.Og=null};
v.defineProperty(ha,{type:"type"},function(){return this.ia},function(a){this.D&&v.ka(this,a);v.pb(a,ha,ha,"type");this.ia=a;this.start.se()&&(a===Vf?this.start=sb:a===Yc&&(this.start=zb));this.end.se()&&(a===Vf?this.end=Db:a===Yc&&(this.end=zb));this.Og=null});v.defineProperty(ha,{color:"color"},function(){return this.rn},function(a){this.D&&v.ka(this,a);this.rn=a;this.Og=null});
v.defineProperty(ha,{start:"start"},function(){return this.to},function(a){this.D&&v.ka(this,a);v.A(a,L,ha,"start");this.to=a.S();this.Og=null});v.defineProperty(ha,{end:"end"},function(){return this.In},function(a){this.D&&v.ka(this,a);v.A(a,L,ha,"end");this.In=a.S();this.Og=null});v.defineProperty(ha,{cu:"startRadius"},function(){return this.Wv},function(a){this.D&&v.ka(this,a);v.We(a,ha,"startRadius");0>a&&v.va(a,">= zero",ha,"startRadius");this.Wv=a;this.Og=null});
v.defineProperty(ha,{bt:"endRadius"},function(){return this.Su},function(a){this.D&&v.ka(this,a);v.We(a,ha,"endRadius");0>a&&v.va(a,">= zero",ha,"endRadius");this.Su=a;this.Og=null});v.defineProperty(ha,{Ys:"colorStops"},function(){return this.Ng},function(a){this.D&&v.ka(this,a);this.Ng=a;this.Og=null});v.defineProperty(ha,{pattern:"pattern"},function(){return this.Fv},function(a){this.D&&v.ka(this,a);this.Fv=a;this.Og=null});
ha.randomColor=function(a,b){void 0===a&&(a=128);void 0===b&&(b=Math.max(a,255));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};var sm=(new Rc(null)).el,ga;
ha.isValidColor=ga=function(a){if("black"===a)return!0;if(""===a)return!1;sm.fillStyle="#000000";var b=sm.fillStyle;sm.fillStyle=a;if(sm.fillStyle!==b)return!0;sm.fillStyle="#FFFFFF";b=sm.fillStyle;sm.fillStyle=a;return sm.fillStyle!==b};
function G(){v.dc(this);this.fa=30723;this.Rc=1;this.Xg=null;this.Ob="";this.nc=this.Ib=null;this.kb=(new z(NaN,NaN)).freeze();this.mf=Ed;this.Dj=pd;this.Bj=Cd;this.ne=new ja;this.Up=new ja;this.Ok=new ja;this.Tb=this.Pu=1;this.Kl=0;this.Qh=tm;this.kr=cd;this.jd=(new A(NaN,NaN,NaN,NaN)).freeze();this.mc=(new A(NaN,NaN,NaN,NaN)).freeze();this.Qc=(new A(0,0,NaN,NaN)).freeze();this.Bs=this.Eq=this.ga=this.Lr=this.Mr=null;this.Cs=this.Fq=Infinity;this.Tp=this.Ae=fc;this.$r=0;this.Gi=1;this.bq=0;this.ii=
1;this.us=null;this.es=-Infinity;this.ds=0;this.fs=ad;this.gs=Gi;this.mq="";this.sc=this.ha=null;this.on=-1;this.im=this.ps=this.hi=this.wk=this.so=null}v.Vh(G);v.ea("GraphObject",G);
G.prototype.cloneProtected=function(a){a.fa=this.fa|6144;a.Rc=this.Rc;a.Ob=this.Ob;a.Ib=this.Ib;a.nc=this.nc;a.kb.assign(this.kb);a.mf=this.mf.S();a.Dj=this.Dj.S();a.Bj=this.Bj.S();a.Ok=this.Ok.copy();a.Tb=this.Tb;a.Kl=this.Kl;a.Qh=this.Qh;a.kr=this.kr.S();a.jd.assign(this.jd);a.mc.assign(this.mc);a.Qc.assign(this.Qc);a.Lr=this.Lr;null!==this.ga&&(a.ga=this.ga.copy());a.Eq=this.Eq;a.Bs=this.Bs;a.Fq=this.Fq;a.Cs=this.Cs;a.Ae=this.Ae.S();a.Tp=this.Tp.S();a.$r=this.$r;a.Gi=this.Gi;a.bq=this.bq;a.ii=
this.ii;a.us=this.us;a.es=this.es;a.ds=this.ds;a.fs=this.fs.S();a.gs=this.gs;a.mq=this.mq;null!==this.ha&&(a.ha=this.ha.copy());a.sc=this.sc;a.on=this.on;null!==this.wk&&(a.wk=v.fl(this.wk));null!==this.hi&&(a.hi=this.hi.copy());a.ps=this.ps};G.prototype.addCopyProperty=G.prototype.aG=function(a){var b=this.wk;if(v.isArray(b))for(var c=0;c<b.length;c++){if(b[c]===a)return}else this.wk=b=[];b.push(a)};G.prototype.Wh=function(a){a.Mr=null;a.im=null;a.N()};
G.prototype.clone=function(){var a=new this.constructor;this.cloneProtected(a);if(null!==this.wk)for(var b=0;b<this.wk.length;b++){var c=this.wk[b];a[c]=this[c]}return a};G.prototype.copy=function(){return this.clone()};G.prototype.toString=function(){return v.af(Object.getPrototypeOf(this))+"#"+v.ld(this)};var Si;G.None=Si=v.p(G,"None",0);var tm;G.Default=tm=v.p(G,"Default",0);var um;G.Vertical=um=v.p(G,"Vertical",4);var vm;G.Horizontal=vm=v.p(G,"Horizontal",5);var He;G.Fill=He=v.p(G,"Fill",3);var Ui;
G.Uniform=Ui=v.p(G,"Uniform",1);var Vi;G.UniformToFill=Vi=v.p(G,"UniformToFill",2);function wm(a){null===a.ha&&(a.ha=new xm)}G.prototype.Me=function(){if(null===this.ga){var a=new ym;a.qj=qb;a.Rj=qb;a.oj=10;a.Pj=10;a.nj=zm;a.Oj=zm;a.pj=0;a.Qj=0;this.ga=a}};
function Am(a,b,c,d,e,f,h){var k=.001,l=f.length;a.moveTo(b,c);d-=b;k=e-c;0===d&&(d=.001);e=k/d;for(var m=Math.sqrt(d*d+k*k),n=0,p=!0,q=0===h?!1:!0;.1<=m;){if(q){k=f[n++%l];for(k-=h;0>k;)k+=f[n++%l],p=!p;q=!1}else k=f[n++%l];k>m&&(k=m);var r=Math.sqrt(k*k/(1+e*e));0>d&&(r=-r);b+=r;c+=e*r;p?a.lineTo(b,c):a.moveTo(b,c);m-=k;p=!p}}G.prototype.raiseChangedEvent=G.prototype.Lc=function(a,b,c,d,e,f,h){var k=this.Y;null!==k&&(k.Ym(a,b,c,d,e,f,h),0!==(this.fa&1024)&&c===this&&a===Af&&Bm(this,k,b))};
function Bm(a,b,c){var d=a.Uo();if(null!==d)for(var e=a.sc.i;e.next();){var f=e.value,h=null;if(null!==f.bn){h=Dg(f,d,a);if(null===h)continue;f.vx(a,h,c,null)}else if(f.yt){var k=b.g;null===k||k.we||f.vx(a,k.ba.ck,c,k)}else{var l=d.data;if(null===l)continue;k=b.g;null===k||k.we||f.vx(a,l,c,k)}null!==h&&(k=d.Bw(f.El),null!==k&&f.sF(k,h,c))}}G.prototype.Bw=function(a){return this.on===a?this:null};G.prototype.raiseChanged=G.prototype.h=function(a,b,c){this.Lc(Af,a,this,b,c)};
function Cm(a,b,c,d,e){var f=a.jd,h=a.Ok;h.reset();Dm(a,h,b,c,d,e);a.Ok=h;f.x=b;f.y=c;f.width=d;f.height=e;h.vt()||h.oF(f)}function Em(a,b,c,d){if(!1===a.Hg)return!1;d.multiply(a.transform);return c?a.yg(b,d):a.Em(b,d)}
G.prototype.LD=function(a,b,c){if(!1===this.Hg)return!1;var d=this.Ha;b=a.rf(b);var e=!1;c&&(e=Sa(a.x,a.y,0,0,0,d.height)<b||Sa(a.x,a.y,0,d.height,d.width,d.height)<b||Sa(a.x,a.y,d.width,d.height,d.width,0)<b||Sa(a.x,a.y,d.width,0,0,0)<b);c||(e=Sa(a.x,a.y,0,0,0,d.height)<b&&Sa(a.x,a.y,0,d.height,d.width,d.height)<b&&Sa(a.x,a.y,d.width,d.height,d.width,0)<b&&Sa(a.x,a.y,d.width,0,0,0)<b);return e};G.prototype.Lg=function(){return!0};
G.prototype.containsPoint=G.prototype.Fa=function(a){var b=v.L();b.assign(a);this.transform.ub(b);var c=this.U;if(!c.G())return v.v(b),!1;var d=this.g;if(null!==d&&d.Gk){var e=d.Yo("extraTouchThreshold"),f=d.Yo("extraTouchArea"),h=f/2,k=this.Ha,d=this.Ti()*d.scale,l=1/d;if(k.width*d<e&&k.height*d<e)return a=ab(c.x-h*l,c.y-h*l,c.width+f*l,c.height+f*l,b.x,b.y),v.v(b),a}if(this instanceof Vg||this instanceof Y?ab(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Fa(b))return e=!1,e=this.hi&&!this.hi.Fa(b)?
!1:null!==this.nc&&c.Fa(b)?!0:null!==this.Ib&&this.Qc.Fa(a)?!0:this.Wj(a),v.v(b),e;v.v(b);return!1};G.prototype.Wj=function(a){var b=this.Ha;return ab(0,0,b.width,b.height,a.x,a.y)};G.prototype.containsRect=G.prototype.Xj=function(a){if(0===this.angle)return this.U.Xj(a);var b=this.Ha,b=v.hk(0,0,b.width,b.height),c=this.transform,d=!1,e=v.Mb(a.x,a.y);b.Fa(c.Xh(e))&&(e.m(a.x,a.bottom),b.Fa(c.Xh(e))&&(e.m(a.right,a.bottom),b.Fa(c.Xh(e))&&(e.m(a.right,a.y),b.Fa(c.Xh(e))&&(d=!0))));v.v(e);v.Vb(b);return d};
G.prototype.containedInRect=G.prototype.Em=function(a,b){if(void 0===b)return a.Xj(this.U);var c=this.Ha,d=!1,e=v.Mb(0,0);a.Fa(b.ub(e))&&(e.m(0,c.height),a.Fa(b.ub(e))&&(e.m(c.width,c.height),a.Fa(b.ub(e))&&(e.m(c.width,0),a.Fa(b.ub(e))&&(d=!0))));v.v(e);return d};
G.prototype.intersectsRect=G.prototype.yg=function(a,b){if(void 0===b&&(b=this.transform,0===this.angle))return a.yg(this.U);var c=this.Ha,d=b,e=v.Mb(0,0),f=v.Mb(0,c.height),h=v.Mb(c.width,c.height),k=v.Mb(c.width,0),l=!1;if(a.Fa(d.ub(e))||a.Fa(d.ub(f))||a.Fa(d.ub(h))||a.Fa(d.ub(k)))l=!0;else{var c=v.hk(0,0,c.width,c.height),m=v.Mb(a.x,a.y);c.Fa(d.Xh(m))?l=!0:(m.m(a.x,a.bottom),c.Fa(d.Xh(m))?l=!0:(m.m(a.right,a.bottom),c.Fa(d.Xh(m))?l=!0:(m.m(a.right,a.y),c.Fa(d.Xh(m))&&(l=!0))));v.v(m);v.Vb(c);!l&&
(oe(a,e,f)||oe(a,f,h)||oe(a,h,k)||oe(a,k,e))&&(l=!0)}v.v(e);v.v(f);v.v(h);v.v(k);return l};G.prototype.getDocumentPoint=G.prototype.Xa=function(a,b){void 0===b&&(b=new z);a.se()&&v.k("getDocumentPoint:s Spot must be specific: "+a.toString());var c=this.Ha;b.m(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY);this.Zg.ub(b);return b};G.prototype.getDocumentAngle=G.prototype.ol=function(){var a;a=this.Zg;1===a.m11&&0===a.m12?a=0:(a=180*Math.atan2(a.m12,a.m11)/Math.PI,0>a&&(a+=360));return a};
G.prototype.getDocumentScale=G.prototype.Ti=function(){if(0!==(this.fa&4096)===!1)return this.Pu;var a=this.Tb;return null!==this.R?a*this.R.Ti():a};G.prototype.getLocalPoint=G.prototype.QD=function(a,b){void 0===b&&(b=new z);b.assign(a);this.Zg.Xh(b);return b};G.prototype.getNearestIntersectionPoint=G.prototype.RD=function(a,b,c){return this.Zo(a.x,a.y,b.x,b.y,c)};g=G.prototype;
g.Zo=function(a,b,c,d,e){var f=this.transform,h=1/(f.m11*f.m22-f.m12*f.m21),k=f.m22*h,l=-f.m12*h,m=-f.m21*h,n=f.m11*h,p=h*(f.m21*f.dy-f.m22*f.dx),q=h*(f.m12*f.dx-f.m11*f.dy);if(null!==this.zm)return f=this.U,ge(f.left,f.top,f.right,f.bottom,a,b,c,d,e);h=a*k+b*m+p;a=a*l+b*n+q;b=c*k+d*m+p;c=c*l+d*n+q;e.m(0,0);d=this.Ha;c=ge(0,0,d.width,d.height,h,a,b,c,e);e.transform(f);return c};
function kj(a,b,c,d,e){if(!1!==el(a)){var f=a.margin,h=f.right+f.left,f=f.top+f.bottom;b=Math.max(b-h,0);c=Math.max(c-f,0);e=e||0;d=Math.max((d||0)-h,0);e=Math.max(e-f,0);var h=a.angle,f=0,f=a.za,k=0;a.lb&&(k=a.lb);90===h||270===h?(b=isFinite(f.height)?f.height+k:b,c=isFinite(f.width)?f.width+k:c):(b=isFinite(f.width)?f.width+k:b,c=isFinite(f.height)?f.height+k:c);var f=d||0,k=e||0,l=a instanceof D;switch(Fm(a,!0)){case Si:k=f=0;l&&(c=b=Infinity);break;case He:isFinite(b)&&b>d&&(f=b);isFinite(c)&&
c>e&&(k=c);break;case vm:isFinite(b)&&b>d&&(f=b);k=0;l&&(c=Infinity);break;case um:isFinite(c)&&c>e&&(k=c),f=0,l&&(b=Infinity)}var l=a.xf,m=a.kh;f>l.width&&m.width<l.width&&(f=l.width);k>l.height&&m.height<l.height&&(k=l.height);d=Math.max(f/a.scale,m.width);e=Math.max(k/a.scale,m.height);l.width<d&&(d=Math.min(m.width,d));l.height<e&&(e=Math.min(m.height,e));b=Math.min(l.width,b);c=Math.min(l.height,c);b=Math.max(d,b);c=Math.max(e,c);if(90===h||270===h)f=b,b=c,c=f,f=d,d=e,e=f;a.jd.Pa();a.mp(b,c,
d,e);a.jd.freeze();a.jd.G()||v.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.jd.toString());Qk(a,!1)}}
g.Ec=function(a,b,c,d,e){this.si();var f=v.ag();f.assign(this.mc);this.mc.Pa();if(!1===fl(this)){var h=this.mc;h.x=a;h.y=b;h.width=c;h.height=d}else this.Ni(a,b,c,d);this.mc.freeze();this.hi=void 0===e?null:e;c=!1;void 0!==e?c=!0:null!==this.R&&(e=this.R.Qc,d=this.Ca,null!==this.zm&&(d=this.mc),c=b+d.height,d=a+d.width,c=!(0<=a+.05&&d<=e.width+.05&&0<=b+.05&&c<=e.height+.05),this instanceof bh&&(a=this.Qc,this.qv>a.height||this.Lk.Te>a.width))&&(c=!0);this.fa=c?this.fa|256:this.fa&-257;this.mc.G()||
v.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.mc.toString());this.Vw(f,this.mc);v.Vb(f)};g.Ni=function(){};
function Gm(a,b,c,d,e){var f=a.U;f.x=b;f.y=c;f.width=d;f.height=e;if(!a.za.G()){f=a.jd;c=a.margin;b=c.right+c.left;var h=c.top+c.bottom;c=f.width+b;f=f.height+h;d+=b;e+=h;b=Fm(a,!0);c===d&&f===e&&(b=Si);switch(b){case Si:if(c>d||f>e)Qk(a,!0),kj(a,c>d?d:c,f>e?e:f);break;case He:Qk(a,!0);kj(a,d,e,0,0);break;case vm:Qk(a,!0);kj(a,d,f,0,0);break;case um:Qk(a,!0),kj(a,c,e,0,0)}}}
g.Vw=function(a,b){Hm(this,!1);var c=this.Y;if(null!==c&&null!==c.g){var d=this.Y;null!==d&&(d.Wt!==this&&d.LE!==this&&d.OE!==this||Im(d,!0));this.pa();a.K(b)||(c.rl(),this.yv(c))}};g.yv=function(a){null!==this.Sd&&Im(a,!0)};v.defineProperty(G,{Gp:"shadowVisible"},function(){return this.ps},function(a){var b=this.ps;b!==a&&(this.ps=a,this.h("shadowVisible",b,a))});
G.prototype.Xe=function(a,b){if(this.visible){var c=this.mc;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)){var d=this.opacity,e=1;if(1!==d){if(0===d)return;e=a.globalAlpha;a.globalAlpha=e*d}if(a instanceof Cc)a:{if(this.visible){var f=null,h=a.Ow;if(this instanceof D&&(this.type===Jm||this.type===Km))Lm(this,a,b);else{var k=this.mc;if(0!==k.width&&0!==k.height&&!isNaN(k.x)&&!isNaN(k.y)){var l=this.transform,m=this.R;0!==(this.fa&4096)===!0&&Mm(this);var c=0!==(this.fa&256),n=!1;this instanceof
bh&&(a.font=this.font);if(c){n=m.Lg()?m.Ha:m.U;if(null!==this.hi)var p=this.hi,q=p.x,r=p.y,s=p.width,p=p.height;else q=Math.max(k.x,n.x),r=Math.max(k.y,n.y),s=Math.min(k.right,n.right)-q,p=Math.min(k.bottom,n.bottom)-r;if(q>k.width+k.x||k.x>n.width+n.x||r>k.height+k.y||k.y>n.height+n.y)break a;n=!0;Ec(a,1,0,0,1,0,0);a.save();a.beginPath();a.rect(q,r,s,p);a.clip()}q=!1;if(this instanceof R){var t=this,q=!0;if(!t.isVisible())break a}a.Ri.ff=[1,0,0,1,0,0];r=!1;q&&this.wl&&b.Ui("drawShadows")&&(s=this.qm,
a.rA(s.x*b.scale*b.rd,s.y*b.scale*b.rd,t.og),a.an(),a.shadowColor=t.pm);t=!1;this.Y&&b.Ui("drawShadows")&&(t=this.Y.wl);!0===this.Gp?(a.an(),!1===r&&t&&(Ec(a,1,0,0,1,0,0),a.Ya(),r=!0)):!1===this.Gp&&a.$m();null!==this.nc&&(Nm(this,a,this.nc,!0,!0),!1===r&&t&&(Ec(a,1,0,0,1,0,0),a.Ya(),r=!0),this.nc instanceof ha&&this.nc.type===Yc?(a.beginPath(),a.rect(k.x,k.y,k.width,k.height),a.vg(this.nc)):a.fillRect(k.x,k.y,k.width,k.height));this instanceof D?Ec(a,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy):a.Ri.ff=[l.m11,
l.m12,l.m21,l.m22,l.dx,l.dy];if(null!==this.Ib){!1===r&&t&&(Ec(a,1,0,0,1,0,0),a.Ya(),r=!0);var p=this.Ha,l=k=0,s=p.width,p=p.height,u=0;this instanceof Y&&(p=this.bb.mb,k=p.x,l=p.y,s=p.width,p=p.height,u=this.Rh);Nm(this,a,this.Ib,!0,!1);this.Ib instanceof ha&&this.Ib.type===Yc?(a.beginPath(),a.rect(k-u/2,l-u/2,s+u,p+u),a.vg(this.Ib)):a.fillRect(k-u/2,l-u/2,s+u,p+u)}t&&(null!==this.Ib||null!==this.nc||null!==m&&0!==(m.fa&512)||null!==m&&(m.type===vk||m.type===Qi)&&m.Ye()!==this)?(Om(this,!0),null===
this.Gp&&a.$m()):Om(this,!1);this.Yj(a,b);t&&0!==(this.fa&512)===!0&&a.an();q&&t&&a.$m();c&&(a.restore(),n&&a.tf.pop());this instanceof D&&(f=a.tf.pop());!0===r&&a.tf.pop();null!==a.FD&&(null===f&&(h===a.Ow?(Ec(a,1,0,0,1,0,0),f=a.tf.pop()):f=a.Ow),a.FD(this,f))}}}}else{if(this instanceof D&&(this.type===Jm||this.type===Km)){Lm(this,a,b);1!==d&&(a.globalAlpha=e);return}this instanceof W&&this.Tm(!1);f=this.transform;h=this.R;0!==(this.fa&4096)===!0&&Mm(this);m=0!==(this.fa&256);this instanceof bh&&
(a.font=this.font);if(m){n=h.Lg()?h.Ha:h.U;null!==this.hi?(t=this.hi,k=t.x,l=t.y,q=t.width,t=t.height):(k=Math.max(c.x,n.x),l=Math.max(c.y,n.y),q=Math.min(c.right,n.right)-k,t=Math.min(c.bottom,n.bottom)-l);if(k>c.width+c.x||c.x>n.width+n.x||l>c.height+c.y||c.y>n.height+n.y){1!==d&&(a.globalAlpha=e);return}a.save();a.beginPath();a.rect(k,l,q,t);a.clip()}n=!1;if(this instanceof R){n=!0;if(!this.isVisible()){1!==d&&(a.globalAlpha=e);return}this.wl&&b.Ui("drawShadows")&&(k=this.qm,a.rA(k.x*b.scale*b.rd,
k.y*b.scale*b.rd,this.og),a.an(),a.shadowColor=this.pm)}k=!1;this.Y&&b.Ui("drawShadows")&&(k=this.Y.wl);!0===this.Gp?a.an():!1===this.Gp&&a.$m();null!==this.nc&&(Nm(this,a,this.nc,!0,!0),this.nc instanceof ha&&this.nc.type===Yc?(a.beginPath(),a.rect(c.x,c.y,c.width,c.height),a.vg(this.nc)):a.fillRect(c.x,c.y,c.width,c.height));f.vt()||a.transform(f.m11,f.m12,f.m21,f.m22,f.dx,f.dy);null!==this.Ib&&(t=this.Ha,l=c=0,q=t.width,t=t.height,r=0,this instanceof Y&&(t=this.bb.mb,c=t.x,l=t.y,q=t.width,t=t.height,
r=this.Rh),Nm(this,a,this.Ib,!0,!1),this.Ib instanceof ha&&this.Ib.type===Yc?(a.beginPath(),a.rect(c-r/2,l-r/2,q+r,t+r),a.vg(this.Ib)):a.fillRect(c-r/2,l-r/2,q+r,t+r));k&&(null!==this.Ib||null!==this.nc||null!==h&&0!==(h.fa&512)||null!==h&&(h.type===vk||h.type===Qi)&&h.Ye()!==this)?(Om(this,!0),null===this.Gp&&a.$m()):Om(this,!1);this.Yj(a,b);k&&0!==(this.fa&512)===!0&&a.an();n&&k&&a.$m();m?(a.restore(),this instanceof D?Zc(a,!0):Zc(a,!1)):f.vt()||(h=1/(f.m11*f.m22-f.m12*f.m21),a.transform(f.m22*
h,-f.m12*h,-f.m21*h,f.m11*h,h*(f.m21*f.dy-f.m22*f.dx),h*(f.m12*f.dx-f.m11*f.dy)))}1!==d&&(a.globalAlpha=e)}}};
function Lm(a,b,c){var d=a.mc;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.nc&&(Nm(a,b,a.nc,!0,!0),a.nc instanceof ha&&a.nc.type===Yc?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),b.vg(a.nc)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.Ib&&(Nm(a,b,a.Ib,!0,!1),a.Ib instanceof ha&&a.Ib.type===Yc?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),b.vg(a.Ib)):b.fillRect(d.x,d.y,d.width,d.height)),a.Yj(b,c))}G.prototype.Yj=function(){};
function Nm(a,b,c,d,e){if(null!==c){var f=1,h=1;if("string"===typeof c)d?b.fillStyle=c:b.strokeStyle=c;else if(c.type===Uf)d?b.fillStyle=c.color:b.strokeStyle=c.color;else{var k,h=a.Ha,f=h.width,h=h.height;if(e)var l=a.U,f=l.width,h=l.height;var m=b instanceof Sc;if(m&&c.Og&&(c.type===rm||c.sn===f&&c.Qx===h))k=c.Og;else{var n=l=0,p=0,q=0,r=0,s=0,s=r=0;e&&(l=a.U,f=l.width,h=l.height,r=l.x,s=l.y);l=c.start.x*f+c.start.offsetX;n=c.start.y*h+c.start.offsetY;p=c.end.x*f+c.end.offsetX;q=c.end.y*h+c.end.offsetY;
l+=r;p+=r;n+=s;q+=s;if(c.type===Vf)k=b.createLinearGradient(l,n,p,q);else if(c.type===Yc)s=isNaN(c.bt)?Math.max(f,h)/2:c.bt,isNaN(c.cu)?(r=0,s=Math.max(f,h)/2):r=c.cu,k=b.createRadialGradient(l,n,r,p,q,s);else if(c.type===rm)try{k=b.createPattern(c.pattern,"repeat")}catch(t){k=null}else v.Dd(c.type,"Brush type");if(c.type!==rm&&(e=c.Ys,null!==e))for(e=e.i;e.next();)k.addColorStop(e.key,e.value);if(m&&(c.Og=k,null!==k&&(c.sn=f,c.Qx=h),null===k&&c.type===rm&&-1!==c.sn)){c.sn=-1;var u=a.g;null!==u&&
-1===c.sn&&v.setTimeout(function(){u.bx()},600)}}d?b.fillStyle=k:b.strokeStyle=k}}}G.prototype.isContainedBy=G.prototype.ul=function(a){if(a instanceof D)a:{if(this!==a&&null!==a)for(var b=this.R;null!==b;){if(b===a){a=!0;break a}b=b.R}a=!1}else a=!1;return a};G.prototype.isVisibleObject=G.prototype.Zi=function(){if(!this.visible)return!1;var a=this.R;return null!==a?a.Zi():!0};
function Mm(a){if(0!==(a.fa&2048)===!0){var b=a.ne;b.reset();if(!a.mc.G()||!a.jd.G()){Pm(a,!1);return}b.translate(a.mc.x,a.mc.y);b.translate(-a.Ca.x,-a.Ca.y);var c=a.Ha;Dm(a,b,c.x,c.y,c.width,c.height);Pm(a,!1);Qm(a,!0)}0!==(a.fa&4096)===!0&&(b=a.R,null===b?(a.Up.set(a.ne),a.Pu=a.scale,Qm(a,!1)):null!==b.Zg&&(c=a.Up,c.reset(),b.Lg()?c.multiply(b.Up):null!==b.R&&c.multiply(b.R.Up),c.multiply(a.ne),a.Pu=a.scale*b.Pu,Qm(a,!1)))}
function Dm(a,b,c,d,e,f){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var h=zb;a.ef&&a.ef.bd()&&(h=a.ef);var k=v.L();if(a instanceof R&&a.bc!==a)for(c=a.bc,d=c.Ha,k.$t(d.x,d.y,d.width,d.height,h),c.Ok.ub(k),k.offset(-c.Ca.x,-c.Ca.y),h=c.R;null!==h&&h!==a;)h.Ok.ub(k),k.offset(-h.Ca.x,-h.Ca.y),h=h.R;else k.$t(c,d,e,f,h);b.rotate(a.angle,k.x,k.y);v.v(k)}}g=G.prototype;
g.N=function(a){void 0===a&&(a=!1);if(!0!==el(this)){Qk(this,!0);Hm(this,!0);var b=this.R;null!==b?a||b.N():(a=this.g,null!==a&&(a.fg.add(this),this instanceof S&&(a.la.ib||this.cf(),null!==this.Ad&&Rm(this.Ad)),a.ue(!0)));if(this instanceof D){if(this.ia===vk||this.ia===Di)a=this.Ye(),null!==a&&a.N(!0);a=this.ya.n;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==el(d)&&(d.za.G()||(d instanceof Ri||d instanceof D||d instanceof bh||Fm(d,!1)!==Si)&&d.N(!0))}}}};
g.ep=function(){!1===el(this)&&(Qk(this,!0),Hm(this,!0))};function Rm(a){if(!1===fl(a)){if(null!==a.R)a.R.N();else{var b=a.g;null!==b&&(b.fg.add(a),a instanceof S&&a.cf(),b.ue())}Hm(a,!0)}}g.si=function(){0!==(this.fa&2048)===!1&&(Pm(this,!0),Qm(this,!0))};g.Cz=function(){Qm(this,!0)};g.pa=function(){var a=this.Y;null!==a&&a.pa()};
function Fm(a,b){var c=a.stretch,d=a.R;if(null!==d&&d.ia===Sm)return Tm(a,d.Nd(a.Wb),d.Md(a.column),b);if(null!==d&&d.ia===vk&&d.Ye()===a)return Um(a,He,b);if(c===tm){if(null!==d){if(d.ia===Qi&&d.Ye()===a)return Um(a,He,b);c=d.Kd;return c===tm?Um(a,Si,b):Um(a,c,b)}return Um(a,Si,b)}return Um(a,c,b)}
function Tm(a,b,c,d){var e=a.stretch;if(e!==tm)return Um(a,e,d);var f=e=null;switch(b.stretch){case um:f=!0;break;case He:f=!0}switch(c.stretch){case vm:e=!0;break;case He:e=!0}b=a.R.Kd;null===e&&(e=b===vm||b===He);null===f&&(f=b===um||b===He);return!0===e&&!0===f?Um(a,He,d):!0===e?Um(a,vm,d):!0===f?Um(a,um,d):Um(a,Si,d)}
function Um(a,b,c){if(c)return b;if(b===Si)return Si;c=a.za;if(c.G())return Si;a=a.angle;if(!isNaN(c.width))if(90!==a&&270!==a){if(b===vm)return Si;if(b===He)return um}else{if(b===um)return Si;if(b===He)return vm}if(!isNaN(c.height))if(90!==a&&270!==a){if(b===um)return Si;if(b===He)return vm}else{if(b===vm)return Si;if(b===He)return um}return b}
v.defineProperty(G,{Vt:"segmentOrientation"},function(){return this.gs},function(a){var b=this.gs;b!==a&&(this.gs=a,this.N(),this.h("segmentOrientation",b,a),a===Gi&&(this.angle=0))});v.defineProperty(G,{ve:"segmentIndex"},function(){return this.es},function(a){a=Math.round(a);var b=this.es;b!==a&&(this.es=a,this.N(),this.h("segmentIndex",b,a))});
v.defineProperty(G,{kA:"segmentFraction"},function(){return this.ds},function(a){isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.ds;b!==a&&(this.ds=a,this.N(),this.h("segmentFraction",b,a))});v.defineProperty(G,{TE:"segmentOffset"},function(){return this.fs},function(a){var b=this.fs;b.K(a)||(this.fs=a=a.S(),this.N(),this.h("segmentOffset",b,a))});v.defineProperty(G,{stretch:"stretch"},function(){return this.Qh},function(a){var b=this.Qh;b!==a&&(this.Qh=a,this.N(),this.h("stretch",b,a))});
v.defineProperty(G,{name:"name"},function(){return this.Ob},function(a){var b=this.Ob;b!==a&&(this.Ob=a,null!==this.Y&&(this.Y.dm=null),this.h("name",b,a))});v.defineProperty(G,{opacity:"opacity"},function(){return this.Rc},function(a){var b=this.Rc;b!==a&&(v.j(a,"number",G,"opacity"),(0>a||1<a)&&v.va(a,"0 <= value <= 1",G,"opacity"),this.Rc=a,this.h("opacity",b,a),a=this.g,b=this.Y,null!==a&&null!==b&&a.pa(dk(b,b.U)))});
v.defineProperty(G,{visible:"visible"},function(){return 0!==(this.fa&1)},function(a){var b=0!==(this.fa&1);b!==a&&(this.fa^=1,this.h("visible",b,a),b=this.R,null!==b?b.N():this instanceof R&&this.nd(a),this.pa(),Vm(this))});v.defineProperty(G,{Hg:"pickable"},function(){return 0!==(this.fa&2)},function(a){var b=0!==(this.fa&2);b!==a&&(this.fa^=2,this.h("pickable",b,a))});
v.defineProperty(G,{TG:"fromLinkableDuplicates"},function(){return 0!==(this.fa&4)},function(a){var b=0!==(this.fa&4);b!==a&&(this.fa^=4,this.h("fromLinkableDuplicates",b,a))});v.defineProperty(G,{UG:"fromLinkableSelfNode"},function(){return 0!==(this.fa&8)},function(a){var b=0!==(this.fa&8);b!==a&&(this.fa^=8,this.h("fromLinkableSelfNode",b,a))});
v.defineProperty(G,{JI:"toLinkableDuplicates"},function(){return 0!==(this.fa&16)},function(a){var b=0!==(this.fa&16);b!==a&&(this.fa^=16,this.h("toLinkableDuplicates",b,a))});v.defineProperty(G,{KI:"toLinkableSelfNode"},function(){return 0!==(this.fa&32)},function(a){var b=0!==(this.fa&32);b!==a&&(this.fa^=32,this.h("toLinkableSelfNode",b,a))});
v.defineProperty(G,{Rf:"isPanelMain"},function(){return 0!==(this.fa&64)},function(a){var b=0!==(this.fa&64);b!==a&&(this.fa^=64,this.N(),this.h("isPanelMain",b,a))});v.defineProperty(G,{Hw:"isActionable"},function(){return 0!==(this.fa&128)},function(a){var b=0!==(this.fa&128);b!==a&&(this.fa^=128,this.h("isActionable",b,a))});
v.defineProperty(G,{zm:"areaBackground"},function(){return this.nc},function(a){var b=this.nc;b!==a&&(a instanceof ha&&a.freeze(),this.nc=a,this.pa(),this.h("areaBackground",b,a))});v.defineProperty(G,{background:"background"},function(){return this.Ib},function(a){var b=this.Ib;b!==a&&(a instanceof ha&&a.freeze(),this.Ib=a,this.pa(),this.h("background",b,a))});function Om(a,b){a.fa=b?a.fa|512:a.fa&-513}function Wm(a,b){a.fa=b?a.fa|1024:a.fa&-1025}function Pm(a,b){a.fa=b?a.fa|2048:a.fa&-2049}
function Qm(a,b){a.fa=b?a.fa|4096:a.fa&-4097}function el(a){return 0!==(a.fa&8192)}function Qk(a,b){a.fa=b?a.fa|8192:a.fa&-8193}function fl(a){return 0!==(a.fa&16384)}function Hm(a,b){a.fa=b?a.fa|16384:a.fa&-16385}v.u(G,{Y:"part"},function(){if(this instanceof R)return this;if(null!==this.im)return this.im;var a;for(a=this.R;a;){if(a instanceof R)return this.im=a;a=a.R}return null});v.u(G,{R:"panel"},function(){return this.Xg});G.prototype.Bl=function(a){this.Xg=a};
v.u(G,{layer:"layer"},function(){var a=this.Y;return null!==a?a.layer:null},{configurable:!0});v.u(G,{g:"diagram"},function(){var a=this.Y;return null!==a?a.g:null},{configurable:!0});v.defineProperty(G,{position:"position"},function(){return this.kb},function(a){var b=this.kb;b.K(a)||(a=a.S(),this.pA(a,b)&&this.h("position",b,a))});G.prototype.pA=function(a){this.kb=a;Rm(this);this.si();return!0};G.prototype.px=function(a,b){this.kb.m(a,b);Xm(this);this.si()};v.u(G,{U:"actualBounds"},function(){return this.mc});
v.defineProperty(G,{scale:"scale"},function(){return this.Tb},function(a){var b=this.Tb;b!==a&&(0>=a&&v.k("GraphObject.scale for "+this+" must be greater than zero, not: "+a),this.Tb=a,this.si(),this.N(),this.h("scale",b,a))});v.defineProperty(G,{angle:"angle"},function(){return this.Kl},function(a){var b=this.Kl;b!==a&&(a%=360,0>a&&(a+=360),b!==a&&(this.Kl=a,this.N(),this.si(),this.h("angle",b,a)))});
v.defineProperty(G,{za:"desiredSize"},function(){return this.mf},function(a){var b=a.width,c=a.height,d=this.mf,e=d.width,f=d.height;(e===b||isNaN(e)&&isNaN(b))&&(f===c||isNaN(f)&&isNaN(c))||(this.mf=a=a.S(),this.N(),this instanceof Y&&this.de(),this.h("desiredSize",d,a),0!==(this.fa&1024)&&(a=this.Y,null!==a&&(Bm(this,a,"width"),Bm(this,a,"height"))))});
v.defineProperty(G,{width:"width"},function(){return this.mf.width},function(a){if(this.mf.width!==a){var b=this.mf;this.mf=a=(new ia(a,this.mf.height)).freeze();this.N();this instanceof Y&&this.de();this.h("desiredSize",b,a);b=this.Y;null!==b&&0!==(this.fa&1024)&&Bm(this,b,"width")}});
v.defineProperty(G,{height:"height"},function(){return this.mf.height},function(a){if(this.mf.height!==a){var b=this.mf;this.mf=a=(new ia(this.mf.width,a)).freeze();this.N();this instanceof Y&&this.de();this.h("desiredSize",b,a);b=this.Y;null!==b&&0!==(this.fa&1024)&&Bm(this,b,"height")}});
v.defineProperty(G,{kh:"minSize"},function(){return this.Dj},function(a){var b=this.Dj;b.K(a)||(a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Dj=a,this.N(),this.h("minSize",b,a))});v.defineProperty(G,{xf:"maxSize"},function(){return this.Bj},function(a){var b=this.Bj;b.K(a)||(a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.Bj=a,this.N(),this.h("maxSize",b,a))});v.u(G,{Ca:"measuredBounds"},function(){return this.jd});
v.u(G,{Ha:"naturalBounds"},function(){return this.Qc},{configurable:!0});v.defineProperty(G,{margin:"margin"},function(){return this.kr},function(a){"number"===typeof a&&(a=new cb(a));var b=this.kr;b.K(a)||(this.kr=a=a.S(),this.N(),this.h("margin",b,a))});v.u(G,{transform:null},function(){0!==(this.fa&2048)===!0&&Mm(this);return this.ne});v.u(G,{Zg:null},function(){0!==(this.fa&4096)===!0&&Mm(this);return this.Up});
v.defineProperty(G,{alignment:"alignment"},function(){return this.Ae},function(a){var b=this.Ae;b.K(a)||(a.se()&&!a.Uc()&&v.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+a),this.Ae=a=a.S(),Rm(this),this.h("alignment",b,a))});v.defineProperty(G,{column:"column"},function(){return this.bq},function(a){a=Math.round(a);var b=this.bq;b!==a&&(0>a&&v.va(a,">= 0",G,"column"),this.bq=a,this.N(),this.h("column",b,a))});
v.defineProperty(G,{sG:"columnSpan"},function(){return this.ii},function(a){a=Math.round(a);var b=this.ii;b!==a&&(1>a&&v.va(a,">= 1",G,"columnSpan"),this.ii=a,this.N(),this.h("columnSpan",b,a))});v.defineProperty(G,{Wb:"row"},function(){return this.$r},function(a){a=Math.round(a);var b=this.$r;b!==a&&(0>a&&v.va(a,">= 0",G,"row"),this.$r=a,this.N(),this.h("row",b,a))});
v.defineProperty(G,{rowSpan:"rowSpan"},function(){return this.Gi},function(a){a=Math.round(a);var b=this.Gi;b!==a&&(1>a&&v.va(a,">= 1",G,"rowSpan"),this.Gi=a,this.N(),this.h("rowSpan",b,a))});v.defineProperty(G,{tx:"spanAllocation"},function(){return this.us},function(a){var b=this.us;b!==a&&(null!==a&&v.j(a,"function",G,"spanAllocation"),this.us=a,this.h("spanAllocation",b,a))});
v.defineProperty(G,{Uj:"alignmentFocus"},function(){return this.Tp},function(a){var b=this.Tp;b.K(a)||(!a.se()||a.Uc()||a.K(qb)&&this instanceof S||v.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+a),this.Tp=a=a.S(),this.N(),this.h("alignmentFocus",b,a))});
v.defineProperty(G,{Sd:"portId"},function(){return this.Lr},function(a){var b=this.Lr;if(b!==a){var c=this.Y;null===c||c instanceof S||(v.k("Cannot set portID on a Link: "+a),c=null);null!==b&&null!==c&&Ym(c,this);this.Lr=a;if(null!==a&&c){c.Ch=!0;null===c.Xd&&Zm(c);var d=this.Sd;null!==d&&c.Xd.add(d,this)}this.h("portId",b,a)}});function Vm(a){var b=a.Y;b instanceof S&&(a=a.g,null===a||a.la.ib||b.cf())}
v.defineProperty(G,{yb:"toSpot"},function(){return null!==this.ga?this.ga.Rj:qb},function(a){this.Me();var b=this.ga.Rj;b.K(a)||(a=a.S(),this.ga.Rj=a,this.h("toSpot",b,a),Vm(this))});v.defineProperty(G,{Gl:"toEndSegmentLength"},function(){return null!==this.ga?this.ga.Pj:10},function(a){this.Me();var b=this.ga.Pj;b!==a&&(0>a&&v.va(a,">= 0",G,"toEndSegmentLength"),this.ga.Pj=a,this.h("toEndSegmentLength",b,a),Vm(this))});
v.defineProperty(G,{eu:"toEndSegmentDirection"},function(){return null!==this.ga?this.ga.Oj:zm},function(a){this.Me();var b=this.ga.Oj;b!==a&&(this.ga.Oj=a,this.h("toEndSegmentDirection",b,a),Vm(this))});v.defineProperty(G,{fu:"toShortLength"},function(){return null!==this.ga?this.ga.Qj:0},function(a){this.Me();var b=this.ga.Qj;b!==a&&(this.ga.Qj=a,this.h("toShortLength",b,a),Vm(this))});
v.defineProperty(G,{fF:"toLinkable"},function(){return this.Bs},function(a){var b=this.Bs;b!==a&&(this.Bs=a,this.h("toLinkable",b,a))});v.defineProperty(G,{LI:"toMaxLinks"},function(){return this.Cs},function(a){var b=this.Cs;b!==a&&(0>a&&v.va(a,">= 0",G,"toMaxLinks"),this.Cs=a,this.h("toMaxLinks",b,a))});v.defineProperty(G,{xb:"fromSpot"},function(){return null!==this.ga?this.ga.qj:qb},function(a){this.Me();var b=this.ga.qj;b.K(a)||(a=a.S(),this.ga.qj=a,this.h("fromSpot",b,a),Vm(this))});
v.defineProperty(G,{nl:"fromEndSegmentLength"},function(){return null!==this.ga?this.ga.oj:10},function(a){this.Me();var b=this.ga.oj;b!==a&&(0>a&&v.va(a,">= 0",G,"fromEndSegmentLength"),this.ga.oj=a,this.h("fromEndSegmentLength",b,a),Vm(this))});v.defineProperty(G,{lt:"fromEndSegmentDirection"},function(){return null!==this.ga?this.ga.nj:zm},function(a){this.Me();var b=this.ga.nj;b!==a&&(this.ga.nj=a,this.h("fromEndSegmentDirection",b,a),Vm(this))});
v.defineProperty(G,{mt:"fromShortLength"},function(){return null!==this.ga?this.ga.pj:0},function(a){this.Me();var b=this.ga.pj;b!==a&&(this.ga.pj=a,this.h("fromShortLength",b,a),Vm(this))});v.defineProperty(G,{OD:"fromLinkable"},function(){return this.Eq},function(a){var b=this.Eq;b!==a&&(this.Eq=a,this.h("fromLinkable",b,a))});
v.defineProperty(G,{vz:"fromMaxLinks"},function(){return this.Fq},function(a){var b=this.Fq;b!==a&&(0>a&&v.va(a,">= 0",G,"fromMaxLinks"),this.Fq=a,this.h("fromMaxLinks",b,a))});v.defineProperty(G,{cursor:"cursor"},function(){return this.mq},function(a){var b=this.mq;b!==a&&(v.j(a,"string",G,"cursor"),this.mq=a,this.h("cursor",b,a))});
v.defineProperty(G,{click:"click"},function(){return null!==this.ha?this.ha.gi:null},function(a){wm(this);var b=this.ha.gi;b!==a&&(null!==a&&v.j(a,"function",G,"click"),this.ha.gi=a,this.h("click",b,a))});v.defineProperty(G,{at:"doubleClick"},function(){return null!==this.ha?this.ha.pi:null},function(a){wm(this);var b=this.ha.pi;b!==a&&(null!==a&&v.j(a,"function",G,"doubleClick"),this.ha.pi=a,this.h("doubleClick",b,a))});
v.defineProperty(G,{gz:"contextClick"},function(){return null!==this.ha?this.ha.ji:null},function(a){wm(this);var b=this.ha.ji;b!==a&&(null!==a&&v.j(a,"function",G,"contextClick"),this.ha.ji=a,this.h("contextClick",b,a))});v.defineProperty(G,{Gt:"mouseEnter"},function(){return null!==this.ha?this.ha.wr:null},function(a){wm(this);var b=this.ha.wr;b!==a&&(null!==a&&v.j(a,"function",G,"mouseEnter"),this.ha.wr=a,this.h("mouseEnter",b,a))});
v.defineProperty(G,{Ht:"mouseLeave"},function(){return null!==this.ha?this.ha.xr:null},function(a){wm(this);var b=this.ha.xr;b!==a&&(null!==a&&v.j(a,"function",G,"mouseLeave"),this.ha.xr=a,this.h("mouseLeave",b,a))});v.defineProperty(G,{Tz:"mouseOver"},function(){return null!==this.ha?this.ha.Ci:null},function(a){wm(this);var b=this.ha.Ci;b!==a&&(null!==a&&v.j(a,"function",G,"mouseOver"),this.ha.Ci=a,this.h("mouseOver",b,a))});
v.defineProperty(G,{Sz:"mouseHover"},function(){return null!==this.ha?this.ha.Bi:null},function(a){wm(this);var b=this.ha.Bi;b!==a&&(null!==a&&v.j(a,"function",G,"mouseHover"),this.ha.Bi=a,this.h("mouseHover",b,a))});v.defineProperty(G,{Rz:"mouseHold"},function(){return null!==this.ha?this.ha.Ai:null},function(a){wm(this);var b=this.ha.Ai;b!==a&&(null!==a&&v.j(a,"function",G,"mouseHold"),this.ha.Ai=a,this.h("mouseHold",b,a))});
v.defineProperty(G,{SH:"mouseDragEnter"},function(){return null!==this.ha?this.ha.ur:null},function(a){wm(this);var b=this.ha.ur;b!==a&&(null!==a&&v.j(a,"function",G,"mouseDragEnter"),this.ha.ur=a,this.h("mouseDragEnter",b,a))});v.defineProperty(G,{TH:"mouseDragLeave"},function(){return null!==this.ha?this.ha.vr:null},function(a){wm(this);var b=this.ha.vr;b!==a&&(null!==a&&v.j(a,"function",G,"mouseDragLeave"),this.ha.vr=a,this.h("mouseDragLeave",b,a))});
v.defineProperty(G,{Qz:"mouseDrop"},function(){return null!==this.ha?this.ha.zi:null},function(a){wm(this);var b=this.ha.zi;b!==a&&(null!==a&&v.j(a,"function",G,"mouseDrop"),this.ha.zi=a,this.h("mouseDrop",b,a))});v.defineProperty(G,{aD:"actionDown"},function(){return null!==this.ha?this.ha.Np:null},function(a){wm(this);var b=this.ha.Np;b!==a&&(null!==a&&v.j(a,"function",G,"actionDown"),this.ha.Np=a,this.h("actionDown",b,a))});
v.defineProperty(G,{bD:"actionMove"},function(){return null!==this.ha?this.ha.Op:null},function(a){wm(this);var b=this.ha.Op;b!==a&&(null!==a&&v.j(a,"function",G,"actionMove"),this.ha.Op=a,this.h("actionMove",b,a))});v.defineProperty(G,{cD:"actionUp"},function(){return null!==this.ha?this.ha.Pp:null},function(a){wm(this);var b=this.ha.Pp;b!==a&&(null!==a&&v.j(a,"function",G,"actionUp"),this.ha.Pp=a,this.h("actionUp",b,a))});
v.defineProperty(G,{$C:"actionCancel"},function(){return null!==this.ha?this.ha.Mp:null},function(a){wm(this);var b=this.ha.Mp;b!==a&&(null!==a&&v.j(a,"function",G,"actionCancel"),this.ha.Mp=a,this.h("actionCancel",b,a))});v.defineProperty(G,{yA:"toolTip"},function(){return null!==this.ha?this.ha.Ji:null},function(a){wm(this);var b=this.ha.Ji;b!==a&&(null!==a&&v.A(a,Vg,G,"toolTip"),this.ha.Ji=a,this.h("toolTip",b,a))});
v.defineProperty(G,{contextMenu:"contextMenu"},function(){return null!==this.ha?this.ha.ki:null},function(a){wm(this);var b=this.ha.ki;b!==a&&(null!==a&&v.A(a,Vg,G,"contextMenu"),this.ha.ki=a,this.h("contextMenu",b,a))});G.prototype.bind=G.prototype.bind=function(a){a.pg=this;var b=this.Uo();null!==b&&$m(b)&&v.k("Cannot add a Binding to a template that has already been copied: "+a);null===this.sc&&(this.sc=new I(Ag));this.sc.add(a)};
G.prototype.findTemplateBinder=G.prototype.Uo=function(){for(var a=this instanceof D?this:this.R;null!==a;){if(null!==a.uk)return a;a=a.R}return null};G.prototype.setProperties=function(a){v.Xt(this,a)};var an;
G.make=an=function(a,b){var c=arguments,d=null,e=null;if("function"===typeof a)e=a;else if("string"===typeof a){var f=bn.ja(a);"function"===typeof f?(c=v.fl(arguments),d=f(c)):e=ea[a]}null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&v.k("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),v.k("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||v.k("GraphObject.make requires a class function or class name, not: "+
a),d=new e);f=1;if(d instanceof E&&1<c.length){var h=d,e=c[1];if("string"===typeof e||e instanceof HTMLDivElement)tk(h,e),f++}for(;f<c.length;f++)e=c[f],void 0===e?v.k("Undefined value at argument "+f+" for object being constructed by GraphObject.make: "+d):cn(d,e);return d};
function cn(a,b){if("string"===typeof b)if(a instanceof bh)a.text=b;else if(a instanceof Y)a.Ab=b;else if(a instanceof nk)a.source=b;else if(a instanceof D){var c=ra(D,b);null!==c?a.type=c:v.k("Unknown Panel type as an argument to GraphObject.make: "+b)}else a instanceof ha?(c=ra(ha,b),null!==c?a.type=c:v.k("Unknown Brush type as an argument to GraphObject.make: "+b)):a instanceof ve?(c=ra(ve,b),null!==c?a.type=c:v.k("Unknown Geometry type as an argument to GraphObject.make: "+b)):a instanceof wf?
(c=ra(wf,b),null!==c?a.type=c:v.k("Unknown PathSegment type as an argument to GraphObject.make: "+b)):v.k("Unable to use a string as an argument to GraphObject.make: "+b);else if(b instanceof G)c=b,a instanceof D||v.k("A GraphObject can only be added to a Panel, not to: "+a),a.add(c);else if(b instanceof ug){var d=b,c=a,e;d.ee&&c.getRowDefinition?e=c.getRowDefinition(d.index):!d.ee&&c.getColumnDefinition?e=c.getColumnDefinition(d.index):v.k("A RowColumnDefinition can only be added to a Panel, not to: "+
a);e.Zs(d)}else if(b instanceof fa)a instanceof W&&b.qe===W?2===(b.value&2)?a.jx=b:b===Ni||b===Fi||b===Ei?a.Ke=b:b===dn||b===en||b===fn?a.Qs=b:b!==gn&&b!==Gi&&v.k("Unknown Link enum value for a Link property: "+b):a instanceof D&&b.qe===D?a.type=b:a instanceof bh&&b.qe===bh?a.vF=b:a instanceof Y&&(b===Si||b===Ui||b===Vi||b===tm)?a.wz=b:a instanceof nk&&(b===Si||b===Ui||b===Vi)?a.hH=b:a instanceof G&&b.qe===W?(c=a,0===b.name.indexOf("Orient")?c.Vt=b:v.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+
b)):a instanceof G&&b.qe===G?a.stretch=b:a instanceof ug&&b.qe===ug?a.au=b:a instanceof E&&b.qe===E?a.cl=b:a instanceof ha&&b.qe===ha?a.type=b:a instanceof ve&&b.qe===ve?a.type=b:a instanceof wf&&b.qe===wf?a.type=b:a instanceof Ag&&b.qe===Ag?a.mode=b:a instanceof zf&&b.qe===zf?a.wc=b:a instanceof Z&&b.qe===Z?0===b.name.indexOf("Alignment")?a.alignment=b:0===b.name.indexOf("Arrangement")?a.Nf=b:0===b.name.indexOf("Compaction")?a.compaction=b:0===b.name.indexOf("Path")?a.path=b:0===b.name.indexOf("Sorting")?
a.sorting=b:0===b.name.indexOf("Style")?a.OI=b:v.k("Unknown enum value: "+b):a instanceof hn&&b.qe===hn?0===b.name.indexOf("Aggressive")?a.fG=b:0===b.name.indexOf("Cycle")?a.BG=b:0===b.name.indexOf("Init")?a.mH=b:0===b.name.indexOf("Layer")?a.AH=b:v.k("Unknown enum value: "+b):a instanceof mm&&b.qe===mm?b===jn||b===kn||b===ln||b===mn?a.sorting=b:b===nn||b===on?a.Nf=b:b===pn||b===qn?a.alignment=b:v.k("Unknown enum value: "+b):a instanceof rn&&b.qe===rn?b===sn||b===tn||b===xn||b===zn||b===An?a.sorting=
b:b===Bn||b===Cn||b===Dn||b===En?a.direction=b:b===Fn||b===Gn||b===Hn||b===In?a.Nf=b:b===Jn||b===Kn?a.Tw=b:v.k("Unknown enum value: "+b):v.k("No property to set for this enum value: "+b);else if(b instanceof Ag)a instanceof G?a.bind(b):a instanceof ug?a.bind(b):v.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof Ge)a instanceof ve?a.Ub.add(b):v.k("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof wf)a instanceof
Ge?a.sb.add(b):v.k("A PathSegment can only be added to a PathFigure, not to: "+a);else if(b instanceof Zf)a instanceof E?a.Pb=b:a instanceof V?a.Pb=b:v.k("A Layout can only be assigned to a Diagram or a Group, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)cn(a,b[c]);else if("object"===typeof b&&null!==b)if(a instanceof ha){e=new ta;for(c in b)d=parseFloat(c),isNaN(d)?e[c]=b[c]:a.addColorStop(d,b[c]);v.Xt(a,e)}else if(a instanceof ug){void 0!==b.row?(e=b.row,(void 0===e||null===e||Infinity===
e||isNaN(e)||0>e)&&v.k("Must specify non-negative integer row for RowColumnDefinition "+b+", not: "+e),a.ee=!0,a.index=e):void 0!==b.column&&(e=b.column,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&v.k("Must specify non-negative integer column for RowColumnDefinition "+b+", not: "+e),a.ee=!1,a.index=e);e=new ta;for(c in b)"row"!==c&&"column"!==c&&(e[c]=b[c]);v.Xt(a,e)}else v.Xt(a,b);else v.k('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}
var bn=new na("string","function");G.getBuilders=function(){var a=new na("string","function"),b;for(b in bn)if(b!==b.toLowerCase()){var c=bn[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};var Ln;G.defineBuilder=Ln=function(a,b){v.j(a,"string",G,"defineBuilder:name");v.j(b,"function",G,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||v.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);bn.add(a,b)};var Mn;
G.takeBuilderArgument=Mn=function(a,b,c){void 0===c&&(c=null);var d=a[1];if("function"===typeof c?c(d):"string"===typeof d)return a.splice(1,1),d;if(void 0===b)throw Error("no "+("function"===typeof c?"satisfactory":"string")+" argument for GraphObject builder "+a[0]);return b};
Ln("Button",function(){var a=new ha(Vf);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new ha(Vf);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");a=an(D,vk,{Hw:!0},{_buttonFillNormal:a,_buttonStrokeNormal:"gray",_buttonFillOver:b,_buttonStrokeOver:"blue"},an(Y,{name:"ButtonBorder",Ab:"Rectangle",B:new L(0,0,2.761423749153968,2.761423749153968),C:new L(1,1,-2.761423749153968,-2.761423749153968),fill:a,stroke:"gray"}));a.Gt=function(a,b){var e=b.ce("ButtonBorder");if(e instanceof
Y){var f=b._buttonFillOver;b._buttonFillNormal=e.fill;e.fill=f;f=b._buttonStrokeOver;b._buttonStrokeNormal=e.stroke;e.stroke=f}};a.Ht=function(a,b){var e=b.ce("ButtonBorder");e instanceof Y&&(e.fill=b._buttonFillNormal,e.stroke=b._buttonStrokeNormal)};return a});
Ln("TreeExpanderButton",function(){var a=an("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},an(Y,{name:"ButtonIcon",Ab:"MinusLine",za:rd},(new Ag("figure","isTreeExpanded",function(a,c){var d=c.R;return a?d._treeExpandedFigure:d._treeCollapsedFigure})).Uw()),{visible:!1},(new Ag("visible","isTreeLeaf",function(a){return!a})).Uw());a.click=function(a,c){var d=c.Y;d instanceof Vg&&(d=d.Mf);if(d instanceof S){var e=d.g;if(null!==e){e=e.nb;if(d.md){if(!e.canCollapseTree(d))return}else if(!e.canExpandTree(d))return;
a.zc=!0;d.md?e.collapseTree(d):e.expandTree(d)}}};return a});
Ln("SubGraphExpanderButton",function(){var a=an("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},an(Y,{name:"ButtonIcon",Ab:"MinusLine",za:rd},(new Ag("figure","isSubGraphExpanded",function(a,c){var d=c.R;return a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure})).Uw()));a.click=function(a,c){var d=c.Y;d instanceof Vg&&(d=d.Mf);if(d instanceof V){var e=d.g;if(null!==e){e=e.nb;if(d.fe){if(!e.canCollapseSubGraph(d))return}else if(!e.canExpandSubGraph(d))return;a.zc=
!0;d.fe?e.collapseSubGraph(d):e.expandSubGraph(d)}}};return a});Ln("ContextMenuButton",function(){var a=an("Button");a.stretch=vm;var b=a.ce("ButtonBorder");b instanceof Y&&(b.Ab="Rectangle",b.B=new L(0,0,2,3),b.C=new L(1,1,-2,-2));return a});
Ln("PanelExpanderButton",function(a){var b=Mn(a,"COLLAPSIBLE");a=an("Button",an(Y,"TriangleUp",{za:new ia(6,4)},(new Ag("figure","visible",function(a){return a?"TriangleUp":"TriangleDown"})).Uw(b)));var c=a.ce("ButtonBorder");c instanceof Y&&(c.stroke=null,c.fill="transparent");a.click=function(a,c){var f=c.g;if(null!==f&&!f.ab){var h=c.Y.ce(b);null!==h&&(f.Qb("Collapse/Expand Panel"),h.visible=!h.visible,f.wd("Collapse/Expand Panel"))}};return a});
Ln("CheckBoxButton",function(a){var b=Mn(a);a=an("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},an(Y,{name:"ButtonIcon",VG:"M0 4 L3 9 9 0",lb:2,stretch:He,wz:Ui,visible:!1},""!==b?(new Ag("visible",b)).IH():[]));a.click=function(a,d){if(!(a.g.ab||""!==b&&a.g.ba.ab)){a.zc=!0;var e=d.ce("ButtonIcon");e.g.Qb("checkbox");e.visible=!e.visible;"function"===typeof d._doClick&&d._doClick(a,d);e.g.wd("checkbox")}};return a});
Ln("CheckBox",function(a){a=Mn(a);a=an("CheckBoxButton",a,{name:"Button",margin:new cb(0,1,0,0)});var b=an(D,"Horizontal",a,{Hw:!0,margin:1,_buttonFillNormal:a._buttonFillNormal,_buttonStrokeNormal:a._buttonStrokeNormal,_buttonFillOver:a._buttonFillOver,_buttonStrokeOver:a._buttonStrokeOver,Gt:a.Gt,Ht:a.Ht,click:a.click,_buttonClick:a.click});a.Gt=null;a.Ht=null;a.click=null;return b});
function xm(){this.ki=this.Ji=this.Mp=this.Pp=this.Op=this.Np=this.zi=this.vr=this.ur=this.Ai=this.Bi=this.Ci=this.xr=this.wr=this.ji=this.pi=this.gi=null}xm.prototype.copy=function(){var a=new xm;a.gi=this.gi;a.pi=this.pi;a.ji=this.ji;a.wr=this.wr;a.xr=this.xr;a.Ci=this.Ci;a.Bi=this.Bi;a.Ai=this.Ai;a.ur=this.ur;a.vr=this.vr;a.zi=this.zi;a.Np=this.Np;a.Op=this.Op;a.Pp=this.Pp;a.Mp=this.Mp;a.Ji=this.Ji;a.ki=this.ki;return a};
function D(a){G.call(this);void 0===a?0===arguments.length?this.ia=Xi:v.k("invalid argument to Panel constructor: undefined"):(v.pb(a,D,D,"type"),this.ia=a);this.ya=new I(G);this.Ue=cd;this.Qg=!1;this.ia===yk&&(this.Qg=!0);this.Oq=!1;this.qq=fc;this.ni=tm;this.ia===Sm&&Nn(this);this.Fo=Ui;this.Jq=td;this.Kq=ad;this.uk=this.je=null;this.br=NaN;this.hg=this.vj=null;this.Wn="category";this.gg=null;this.Li=new A(NaN,NaN,NaN,NaN);this.sm=null;this.Ch=!1;this.as=null}v.Ja(D,G);v.Vh(D);v.ea("Panel",D);
function Nn(a){a.kj=cd;a.zh=1;a.mi=null;a.Ql=null;a.yh=1;a.xh=null;a.Pl=null;a.Jd=[];a.Ed=[];a.nm=On;a.Ol=On;a.Ki=0;a.wi=0}
D.prototype.cloneProtected=function(a){G.prototype.cloneProtected.call(this,a);a.ia=this.ia;a.Ue=this.Ue.S();a.Qg=this.Qg;a.Oq=this.Oq;a.qq=this.qq.S();a.ni=this.ni;if(a.ia===Sm){a.kj=this.kj.S();a.zh=this.zh;a.mi=this.mi;a.Ql=this.Ql;a.yh=this.yh;a.xh=this.xh;a.Pl=this.Pl;var b=[];if(0<this.Jd.length)for(var c=this.Jd,d=c.length,e=0;e<d;e++)if(void 0!==c[e]){var f=c[e].copy();f.Bl(a);b[e]=f}a.Jd=b;b=[];if(0<this.Ed.length)for(c=this.Ed,d=c.length,e=0;e<d;e++)void 0!==c[e]&&(f=c[e].copy(),f.Bl(a),
b[e]=f);a.Ed=b;a.nm=this.nm;a.Ol=this.Ol;a.Ki=this.Ki;a.wi=this.wi}a.Fo=this.Fo;a.Jq=this.Jq.S();a.Kq=this.Kq.S();a.je=this.je;a.uk=this.uk;a.br=this.br;a.vj=this.vj;a.hg=this.hg;a.Wn=this.Wn;a.Li.assign(this.Li);a.Ch=this.Ch;null!==this.as&&(a.as=this.as)};D.prototype.Wh=function(a){G.prototype.Wh.call(this,a);a.ya=this.ya;for(var b=a.ya.n,c=b.length,d=0;d<c;d++)b[d].Xg=a;a.sm=null};
D.prototype.copy=function(){var a=G.prototype.copy.call(this);if(null!==a){for(var b=this.ya.n,c=b.length,d=0;d<c;d++){var e=b[d].copy(),f=a;e.Bl(f);e.im=null;var h=f.ya,k=h.count;h.yd(k,e);h=f.Y;if(null!==h){h.dm=null;null!==e.Sd&&h instanceof S&&(h.Ch=!0);var l=f.g;null!==l&&l.la.ib||h.Lc(Cf,"elements",f,null,e,null,k)}}return a}return null};D.prototype.toString=function(){return"Panel("+this.type+")#"+v.ld(this)};var Xi;D.Position=Xi=v.p(D,"Position",0);D.Horizontal=v.p(D,"Horizontal",1);var uk;
D.Vertical=uk=v.p(D,"Vertical",2);var Qi;D.Spot=Qi=v.p(D,"Spot",3);var vk;D.Auto=vk=v.p(D,"Auto",4);var Sm;D.Table=Sm=v.p(D,"Table",5);D.Viewbox=v.p(D,"Viewbox",6);var Jm;D.TableRow=Jm=v.p(D,"TableRow",7);var Km;D.TableColumn=Km=v.p(D,"TableColumn",8);var Di;D.Link=Di=v.p(D,"Link",9);var yk;D.Grid=yk=v.p(D,"Grid",10);
v.defineProperty(D,{type:"type"},function(){return this.ia},function(a){var b=this.ia;b!==a&&(b!==Jm&&b!==Km||v.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.ia=a,this.ia===yk?this.Qg=!0:this.ia===Sm&&Nn(this),this.N(),this.h("type",b,a))});v.u(D,{elements:"elements"},function(){return this.ya.i});v.u(D,{Ha:"naturalBounds"},function(){return this.Qc});
v.defineProperty(D,{padding:"padding"},function(){return this.Ue},function(a){"number"===typeof a?(0>a&&v.va(a,">= 0",D,"padding"),a=new cb(a)):(v.A(a,cb,D,"padding"),0>a.left&&v.va(a.left,">= 0",D,"padding:value.left"),0>a.right&&v.va(a.right,">= 0",D,"padding:value.right"),0>a.top&&v.va(a.top,">= 0",D,"padding:value.top"),0>a.bottom&&v.va(a.bottom,">= 0",D,"padding:value.bottom"));var b=this.Ue;b.K(a)||(this.Ue=a=a.S(),this.N(),this.h("padding",b,a))});
v.defineProperty(D,{hl:"defaultAlignment"},function(){return this.qq},function(a){var b=this.qq;b.K(a)||(this.qq=a=a.S(),this.N(),this.h("defaultAlignment",b,a))});v.defineProperty(D,{Kd:"defaultStretch"},function(){return this.ni},function(a){var b=this.ni;b!==a&&(v.pb(a,G,D,"defaultStretch"),this.ni=a,this.N(),this.h("defaultStretch",b,a))});
v.defineProperty(D,{IJ:"defaultSeparatorPadding"},function(){return void 0===this.kj?cd:this.kj},function(a){if(void 0!==this.kj){"number"===typeof a&&(a=new cb(a));var b=this.kj;b.K(a)||(this.kj=a=a.S(),this.h("defaultSeparatorPadding",b,a))}});
v.defineProperty(D,{GJ:"defaultRowSeparatorStroke"},function(){return void 0===this.mi?null:this.mi},function(a){var b=this.mi;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.mi=a,this.h("defaultRowSeparatorStroke",b,a))});v.defineProperty(D,{HJ:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.zh?1:this.zh},function(a){if(void 0!==this.zh){var b=this.zh;b!==a&&isFinite(a)&&0<=a&&(this.zh=a,this.h("defaultRowSeparatorStrokeWidth",b,a))}});
v.defineProperty(D,{FJ:"defaultRowSeparatorDashArray"},function(){return void 0===this.Ql?null:this.Ql},function(a){if(void 0!==this.Ql){var b=this.Ql;if(b!==a){null===a||Array.isArray(a)||v.Dd(a,"Array",D,"defaultRowSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("defaultRowSeparatorDashArray value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Ql=a;this.pa();
this.h("defaultRowSeparatorDashArray",b,a)}}});v.defineProperty(D,{AJ:"defaultColumnSeparatorStroke"},function(){return void 0===this.xh?null:this.xh},function(a){if(void 0!==this.xh){var b=this.xh;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.xh=a,this.h("defaultColumnSeparatorStroke",b,a))}});
v.defineProperty(D,{BJ:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.yh?1:this.yh},function(a){if(void 0!==this.yh){var b=this.yh;b!==a&&isFinite(a)&&0<=a&&(this.yh=a,this.h("defaultColumnSeparatorStrokeWidth",b,a))}});
v.defineProperty(D,{zJ:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Pl?null:this.Pl},function(a){if(void 0!==this.Pl){var b=this.Pl;if(b!==a){null===a||Array.isArray(a)||v.Dd(a,"Array",D,"defaultColumnSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("defaultColumnSeparatorDashArray value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Pl=
a;this.pa();this.h("defaultColumnSeparatorDashArray",b,a)}}});v.defineProperty(D,{RK:"viewboxStretch"},function(){return this.Fo},function(a){var b=this.Fo;b!==a&&(v.pb(a,G,D,"viewboxStretch"),this.Fo=a,this.h("viewboxStretch",b,a))});
v.defineProperty(D,{Gw:"gridCellSize"},function(){return this.Jq},function(a){var b=this.Jq;b.K(a)||(v.A(a,ia,D,"gridCellSize"),a.G()&&0!==a.width&&0!==a.height||v.k("Invalid Panel.gridCellSize: "+a),this.Jq=a.S(),null!==this.g&&this===this.g.$o&&Sk(this.g),this.pa(),this.h("gridCellSize",b,a))});
v.defineProperty(D,{TD:"gridOrigin"},function(){return this.Kq},function(a){var b=this.Kq;b.K(a)||(v.A(a,z,D,"gridOrigin"),a.G()||v.k("Invalid Panel.gridOrigin: "+a),this.Kq=a.S(),null!==this.g&&Sk(this.g),this.pa(),this.h("gridOrigin",b,a))});g=D.prototype;g.yv=function(a){G.prototype.yv.call(this,a);for(var b=this.ya.n,c=b.length,d=0;d<c;d++)b[d].yv(a)};
g.Yj=function(a,b){if(this.ia===yk){var c=this.Ti()*b.scale;0>=c&&(c=1);var d=this.Gw,e=d.width,d=d.height,f=this.Ha,h=f.width,f=f.height,k=Math.ceil(h/e),l=Math.ceil(f/d),m=this.TD;a.save();a.beginPath();a.rect(0,0,h,f);a.clip();for(var n=[],p=this.ya.n,q=p.length,r=0;r<q;r++){var s=p[r],t=[];n.push(t);if(s.visible)for(var s=yl(s.Ab),u=r+1;u<q;u++){var x=p[u];x.visible&&yl(x.Ab)===s&&(x=x.interval,2<=x&&t.push(x))}}p=this.ya.n;q=p.length;for(r=0;r<q;r++){var w=p[r];if(w.visible&&(t=w.interval,!(2>
e*t*c))){var s=n[r],u=!1,y=!0,B=w.dF;null!==B&&(u=!0,y=a.qz(B,w.le));if("LineV"===w.Ab){a.lineWidth=w.lb;Nm(this,a,w.stroke,!1,!1);a.beginPath();for(var H=x=Math.floor(-m.x/e);H<=x+k;H++){var C=H*e+m.x;0<=C&&C<h&&Pn(H,t,s)&&(u&&!y?Am(a,C,0,C,f,B,w.le):(a.moveTo(C,0),a.lineTo(C,f)))}a.stroke()}else if("LineH"===w.Ab){a.lineWidth=w.lb;Nm(this,a,w.stroke,!1,!1);a.beginPath();for(H=x=Math.floor(-m.y/d);H<=x+l;H++)C=H*d+m.y,0<=C&&C<=f&&Pn(H,t,s)&&(u&&!y?Am(a,0,C,h,C,B,w.le):(a.moveTo(0,C),a.lineTo(h,C)));
a.stroke()}else if("BarV"===w.Ab)for(Nm(this,a,w.fill,!0,!1),w=w.width,isNaN(w)&&(w=e),H=x=Math.floor(-m.x/e);H<=x+k;H++)C=H*e+m.x,0<=C&&C<h&&Pn(H,t,s)&&a.fillRect(C,0,w,f);else if("BarH"===w.Ab)for(Nm(this,a,w.fill,!0,!1),w=w.height,isNaN(w)&&(w=d),H=x=Math.floor(-m.y/d);H<=x+l;H++)C=H*d+m.y,0<=C&&C<=f&&Pn(H,t,s)&&a.fillRect(0,C,h,w);u&&a.oz()}}a.restore();Zc(a,!1)}else{this.ia===Sm&&(a.lineCap="butt",Qn(this,a,!0,this.Jd,!0),Qn(this,a,!1,this.Ed,!0),Rn(this,a,!0,this.Jd),Rn(this,a,!1,this.Ed),Qn(this,
a,!0,this.Jd,!1),Qn(this,a,!1,this.Ed,!1));(c=this.bE)&&a.save();e=this.Ye();d=this.ya.n;h=d.length;for(f=0;f<h;f++)k=d[f],c&&k===e&&(a.qw=!0),k.Xe(a,b),c&&k===e&&(a.qw=!1);c&&(a.restore(),Zc(a,!0))}};
function Rn(a,b,c,d){for(var e=d.length,f=a.U,h=c?a.Nd(0):a.Md(0),k=0;k<e;k++){var l=d[k];if(void 0!==l&&l!==h&&0!==l.Ia){if(c){if(l.position>f.height)continue}else if(l.position>f.width)continue;var m=l.Ep;isNaN(m)&&(m=c?a.zh:a.yh);var n=l.Dp;null===n&&(n=c?a.mi:a.xh);if(0!==m&&null!==n){Nm(a,b,n,!1,!1);var n=!1,p=!0,q=l.wI;null!==q&&(n=!0,void 0!==b.setLineDash?(b.setLineDash(q),b.lineDashOffset=a.le):void 0!==b.webkitLineDash?(b.webkitLineDash=q,b.webkitLineDashOffset=a.le):void 0!==b.mozDash?
(b.mozDash=q,b.mozDashOffset=a.le):p=!1);b.beginPath();var r=l.position+m;c?r>f.height&&(m-=r-f.height):r>f.width&&(m-=r-f.width);l=l.position+m/2;b.lineWidth=m;r=a.padding;c?(l+=r.top,m=r.left,r=f.width-r.right,n&&!p?Am(b,m,l,r,l,q,0):(b.moveTo(m,l),b.lineTo(r,l))):(l+=r.left,m=r.top,r=f.height-r.bottom,n&&!p?Am(b,l,m,l,r,q,0):(b.moveTo(l,m),b.lineTo(l,r)));b.stroke();n&&(void 0!==b.setLineDash?(b.setLineDash(v.hj),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=v.hj,b.webkitLineDashOffset=
0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))}}}}
function Qn(a,b,c,d,e){for(var f=d.length,h=a.U,k=0;k<f;k++){var l=d[k];if(void 0!==l&&null!==l.background&&l.lz!==e&&0!==l.Ia){var m=c?h.height:h.width;if(!(l.position>m)){var n=l.Ie(),p=l.Ep;isNaN(p)&&(p=c?a.zh:a.yh);var q=l.Dp;null===q&&(q=c?a.mi:a.xh);null===q&&(p=0);n-=p;p=l.position+p;n+=l.Ia;p+n>m&&(n=m-p);0>=n||(m=a.padding,Nm(a,b,l.background,!0,!1),c?b.fillRect(m.left,p+m.top,h.width-(m.left+m.right),n):b.fillRect(p+m.left,m.top,n,h.height-(m.top+m.bottom)))}}}}
function Pn(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return!1;return!0}function yl(a){return"LineV"===a||"BarV"===a}
g.Zo=function(a,b,c,d,e){var f=this.Lg(),h=this.transform,k=1/(h.m11*h.m22-h.m12*h.m21),l=h.m22*k,m=-h.m12*k,n=-h.m21*k,p=h.m11*k,q=k*(h.m21*h.dy-h.m22*h.dx),r=k*(h.m12*h.dx-h.m11*h.dy);if(null!==this.zm)return h=this.U,ge(h.left,h.top,h.right,h.bottom,a,b,c,d,e);if(null!==this.background)f=a*l+b*n+q,k=a*m+b*p+r,a=c*l+d*n+q,c=c*m+d*p+r,e.m(0,0),d=this.Ha,c=ge(0,0,d.width,d.height,f,k,a,c,e),e.transform(h);else{f||(l=1,n=m=0,p=1,r=q=0);k=a*l+b*n+q;a=a*m+b*p+r;l=c*l+d*n+q;d=c*m+d*p+r;e.m(l,d);m=(l-
k)*(l-k)+(d-a)*(d-a);c=!1;p=this.ya.n;r=p.length;n=v.L();for(q=0;q<r;q++)b=p[q],b.visible&&b.Zo(k,a,l,d,n)&&(c=!0,b=(k-n.x)*(k-n.x)+(a-n.y)*(a-n.y),b<m&&(m=b,e.set(n)));v.v(n);f&&e.transform(h)}return c};g.N=function(a){G.prototype.N.call(this,a);this.ia===vk&&(a=this.Ye(),null!==a&&a.N(!0));a=this.ya.n;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==el(d)&&(d.za.G()||(d instanceof Ri||d instanceof D||d instanceof bh||Fm(d,!1)!==Si)&&d.N(!0))}};
g.ep=function(){if(!1===el(this)){Qk(this,!0);Hm(this,!0);for(var a=this.ya.n,b=a.length,c=0;c<b;c++)a[c].ep()}};g.si=function(){if(0!==(this.fa&2048)===!1){Pm(this,!0);Qm(this,!0);for(var a=this.ya.n,b=a.length,c=0;c<b;c++)a[c].Cz()}};g.Cz=function(){Qm(this,!0);for(var a=this.ya.n,b=a.length,c=0;c<b;c++)a[c].Cz()};
g.mp=function(a,b,c,d){var e=this.Li;e.width=0;e.height=0;var f=this.za,h=this.kh;void 0===c&&(c=h.width,d=h.height);c=Math.max(c,h.width);d=Math.max(d,h.height);var k=this.xf;isNaN(f.width)||(a=Math.min(f.width,k.width));isNaN(f.height)||(b=Math.min(f.height,k.height));a=Math.max(c,a);b=Math.max(d,b);var l=this.padding;a=Math.max(a-l.left-l.right,0);b=Math.max(b-l.top-l.bottom,0);var m=this.ya.n;if(0!==m.length){var n=this.ia.Ob;switch(n){case "Position":var p=a,q=b,r=c,s=d,t=m.length;e.x=0;e.y=
0;e.width=0;for(var u=e.height=0;u<t;u++){var x=m[u];if(x.visible||x===this.bc){var w=x.margin,y=w.right+w.left,B=w.top+w.bottom;kj(x,p,q,r,s);var H=x.Ca,C=Math.max(H.width+y,0),T=Math.max(H.height+B,0),ba=x.position.x,U=x.position.y;isFinite(ba)||(ba=0);isFinite(U)||(U=0);if(x instanceof Y){var M=x;if(M.dE)var aa=M.lb/2,ba=ba-aa,U=U-aa}$a(e,ba,U,C,T)}}break;case "Vertical":for(var Ia=a,oa=c,Ga=m.length,pa=v.jb(),Ca=0;Ca<Ga;Ca++){var ua=m[Ca];if(ua.visible||ua===this.bc){var gc=Fm(ua,!1);if(gc!==
Si&&gc!==um)pa.push(ua);else{var ud=ua.margin,vd=ud.right+ud.left,Le=ud.top+ud.bottom;kj(ua,Ia,Infinity,oa,0);var Wb=ua.Ca,Jg=Math.max(Wb.width+vd,0),wd=Math.max(Wb.height+Le,0);e.width=Math.max(e.width,Jg);e.height+=wd}}}var ob=pa.length;if(0!==ob){this.za.width?Ia=Math.min(this.za.width,this.xf.width):0!==e.width&&(Ia=Math.min(e.width,this.xf.width));for(Ca=0;Ca<ob;Ca++)if(ua=pa[Ca],ua.visible||ua===this.bc)ud=ua.margin,vd=ud.right+ud.left,Le=ud.top+ud.bottom,kj(ua,Ia,Infinity,oa,0),Wb=ua.Ca,Jg=
Math.max(Wb.width+vd,0),wd=Math.max(Wb.height+Le,0),e.width=Math.max(e.width,Jg),e.height+=wd;v.sa(pa)}break;case "Horizontal":for(var eb=b,ka=d,la=m.length,pb=v.jb(),Ua=0;Ua<la;Ua++){var Ra=m[Ua];if(Ra.visible||Ra===this.bc){var we=Fm(Ra,!1);if(we!==Si&&we!==vm)pb.push(Ra);else{var xd=Ra.margin,ie=xd.right+xd.left,Nd=xd.top+xd.bottom;kj(Ra,Infinity,eb,0,ka);var je=Ra.Ca,Kg=Math.max(je.width+ie,0),dd=Math.max(je.height+Nd,0);e.width+=Kg;e.height=Math.max(e.height,dd)}}}var oi=pb.length;if(0!==oi){this.za.height?
eb=Math.min(this.za.height,this.xf.height):0!==e.height&&(eb=Math.min(e.height,this.xf.height));for(Ua=0;Ua<oi;Ua++)if(Ra=pb[Ua],Ra.visible||Ra===this.bc)xd=Ra.margin,ie=xd.right+xd.left,Nd=xd.top+xd.bottom,kj(Ra,Infinity,eb,0,ka),je=Ra.Ca,Kg=Math.max(je.width+ie,0),dd=Math.max(je.height+Nd,0),e.width+=Kg,e.height=Math.max(e.height,dd);v.sa(pb)}break;case "Spot":a:{var vb=a,Xb=b,Od=c,nh=d,Jb=m.length,hb=this.Ye(),bb=hb.margin,Me=0,Pd=0,Lg=bb.right+bb.left,Mg=bb.top+bb.bottom;kj(hb,vb,Xb,Od,nh);var hc=
hb.Ca,ic=hc.width,ke=hc.height,ed=Math.max(ic+Lg,0),jb=Math.max(ke+Mg,0);e.x=-bb.left;e.y=-bb.top;e.width=ed;e.height=jb;for(var Tc=0;Tc<Jb;Tc++){var Ka=m[Tc];if(Ka!==hb&&(Ka.visible||Ka===this.bc)){bb=Ka.margin;Me=bb.right+bb.left;Pd=bb.top+bb.bottom;kj(Ka,vb,Xb,0,0);var hc=Ka.Ca,ed=Math.max(hc.width+Me,0),jb=Math.max(hc.height+Pd,0),kb=Ka.alignment;kb.Uc()&&(kb=this.hl);kb.bd()||(kb=zb);var wc=Ka.Uj;wc.Uc()&&(wc=zb);$a(e,kb.x*ic+kb.offsetX-(wc.x*hc.width-wc.offsetX)-bb.left,kb.y*ke+kb.offsetY-(wc.y*
hc.height-wc.offsetY)-bb.top,ed,jb)}}var yd=hb.stretch;yd===tm&&(yd=Fm(hb,!1));switch(yd){case Si:break a;case He:if(!isFinite(vb)&&!isFinite(Xb))break a;break;case vm:if(!isFinite(vb))break a;break;case um:if(!isFinite(Xb))break a}hc=hb.Ca;ic=hc.width;ke=hc.height;ed=Math.max(ic+Lg,0);jb=Math.max(ke+Mg,0);bb=hb.margin;e.x=-bb.left;e.y=-bb.top;e.width=ed;e.height=jb;for(Tc=0;Tc<Jb;Tc++)Ka=m[Tc],Ka===hb||!Ka.visible&&Ka!==this.bc||(bb=Ka.margin,Me=bb.right+bb.left,Pd=bb.top+bb.bottom,hc=Ka.Ca,ed=Math.max(hc.width+
Me,0),jb=Math.max(hc.height+Pd,0),kb=Ka.alignment,kb.Uc()&&(kb=this.hl),kb.bd()||(kb=zb),wc=Ka.Uj,wc.Uc()&&(wc=zb),$a(e,kb.x*ic+kb.offsetX-(wc.x*hc.width-wc.offsetX)-bb.left,kb.y*ke+kb.offsetY-(wc.y*hc.height-wc.offsetY)-bb.top,ed,jb))}break;case "Auto":var Hb=a,le=b,of=c,Ne=d,Jf=m.length,Kb=this.Ye(),xe=Kb.margin,Lb=xe.right+xe.left,jc=xe.top+xe.bottom;kj(Kb,Hb,le,of,Ne);var Qb=Kb.Ca,Ic=0;if(Kb instanceof Y)var wb=Kb,Ic=wb.lb*wb.scale;var Bb=Math.max(Qb.width+Lb,0),Ib=Math.max(Qb.height+jc,0),Qd=
Sn(Kb),Ng=Qd.x*Bb+Qd.offsetX,oh=Qd.y*Ib+Qd.offsetY,Qd=Tn(Kb),ph=Qd.x*Bb+Qd.offsetX,ye=Qd.y*Ib+Qd.offsetY,Jc=Hb,ze=le;isFinite(Hb)&&(Jc=Math.max(Math.abs(Ng-ph)-Ic,0));isFinite(le)&&(ze=Math.max(Math.abs(oh-ye)-Ic,0));var kc=v.Fl();kc.m(0,0);for(var xb=0;xb<Jf;xb++){var yb=m[xb];if(yb!==Kb&&(yb.visible||yb===this.bc)){var xe=yb.margin,Kc=xe.right+xe.left,Og=xe.top+xe.bottom;kj(yb,Jc,ze,0,0);Qb=yb.Ca;Bb=Math.max(Qb.width+Kc,0);Ib=Math.max(Qb.height+Og,0);kc.m(Math.max(Bb,kc.width),Math.max(Ib,kc.height))}}if(1===
Jf)e.width=Bb,e.height=Ib,v.$j(kc);else{var Uc=Sn(Kb),Vc=Tn(Kb),ib=0,Lc=0;Vc.x!==Uc.x&&Vc.y!==Uc.y&&(ib=kc.width/Math.abs(Vc.x-Uc.x),Lc=kc.height/Math.abs(Vc.y-Uc.y));v.$j(kc);Ic=0;Kb instanceof Y&&(wb=Kb,Ic=wb.lb*wb.scale,Ti(wb)===Ui&&(ib=Lc=Math.max(ib,Lc)));var ib=ib+(Math.abs(Uc.offsetX)+Math.abs(Vc.offsetX)+Ic),Lc=Lc+(Math.abs(Uc.offsetY)+Math.abs(Vc.offsetY)+Ic),Rd=Kb.stretch;Rd===tm&&(Rd=Fm(Kb,!1));switch(Rd){case Si:Ne=of=0;break;case He:isFinite(Hb)&&(ib=Hb);isFinite(le)&&(Lc=le);break;case vm:isFinite(Hb)&&
(ib=Hb);Ne=0;break;case um:of=0,isFinite(le)&&(Lc=le)}Kb instanceof Y&&!Kb.za.G()&&wb.de();Kb.ep();kj(Kb,ib,Lc,of,Ne);e.width=Kb.Ca.width+Lb;e.height=Kb.Ca.height+jc}break;case "Table":for(var Sd=a,pf=b,pi=c,vj=d,Fa=m.length,Oe=v.jb(),me=v.jb(),da=0;da<Fa;da++){var ca=m[da],Pg=ca instanceof D?ca:null;if(null===Pg||Pg.type!==Jm&&Pg.type!==Km||!ca.visible)Oe.push(ca);else{me.push(ca);for(var qh=Pg.ya.n,qi=qh.length,xc=0;xc<qi;xc++){var ri=qh[xc];Pg.type===Jm?ri.Wb=ca.Wb:Pg.type===Km&&(ri.column=ca.column);
Oe.push(ri)}}}Fa=Oe.length;0===Fa&&(this.Nd(0),this.Md(0));for(var Yb=[],da=0;da<Fa;da++)ca=Oe[da],Qk(ca,!0),Hm(ca,!0),Yb[ca.Wb]||(Yb[ca.Wb]=[]),Yb[ca.Wb][ca.column]||(Yb[ca.Wb][ca.column]=[]),Yb[ca.Wb][ca.column].push(ca);v.sa(Oe);for(var rh=v.jb(),fd=v.jb(),Ae=v.jb(),Mc={count:0},gd={count:0},yc=Sd,hd=pf,bg=this.Jd,Fa=bg.length,da=0;da<Fa;da++){var X=bg[da];void 0!==X&&(X.Ia=0)}bg=this.Ed;Fa=bg.length;for(da=0;da<Fa;da++)X=bg[da],void 0!==X&&(X.Ia=0);for(var Be=Yb.length,Pe=0,da=0;da<Be;da++)Yb[da]&&
(Pe=Math.max(Pe,Yb[da].length));for(var si=Math.min(this.Ki,Be-1),ti=Math.min(this.wi,Pe-1),Nc=0,Be=Yb.length,da=0;da<Be;da++)if(Yb[da])for(var Pe=Yb[da].length,lb=this.Nd(da),xc=lb.Ia=0;xc<Pe;xc++)if(Yb[da][xc]){var mb=this.Md(xc);void 0===rh[xc]&&(mb.Ia=0,rh[xc]=!0);for(var Rk=Yb[da][xc],cg=Rk.length,Qg=0;Qg<cg;Qg++)if(ca=Rk[Qg],ca.visible||ca===this.bc){var Rg=1<ca.Gi||1<ca.ii;Rg&&(da<si||xc<ti||fd.push(ca));var Rb=ca.margin,dg=Rb.right+Rb.left,eg=Rb.top+Rb.bottom,Wc=Tm(ca,lb,mb,!1),Ce=ca.za,un=
!isNaN(Ce.height),ui=!isNaN(Ce.width)&&un;Rg||Wc===Si||ui||da<si||xc<ti||(void 0!==Mc[xc]||Wc!==He&&Wc!==vm||(Mc[xc]=-1,Mc.count++),void 0!==gd[da]||Wc!==He&&Wc!==um||(gd[da]=-1,gd.count++),Ae.push(ca));kj(ca,Infinity,Infinity,0,0);if(!(da<si||xc<ti)){var Qe=ca.Ca,Re=Math.max(Qe.width+dg,0),zd=Math.max(Qe.height+eg,0);if(1===ca.Gi&&(Wc===Si||Wc===vm)){var X=this.Nd(da),id=X.Ie(),Nc=Math.max(zd-X.Ia,0);Nc+id>hd&&(Nc=Math.max(hd-id,0));var sh=0===X.Ia;X.Ia+=Nc;hd=Math.max(hd-(Nc+(sh?id:0)),0)}1!==ca.ii||
Wc!==Si&&Wc!==um||(X=this.Md(xc),id=X.Ie(),Nc=Math.max(Re-X.Ia,0),Nc+id>yc&&(Nc=Math.max(yc-id,0)),sh=0===X.Ia,X.Ia+=Nc,yc=Math.max(yc-(Nc+(sh?id:0)),0));Rg&&ca.ep()}}}v.sa(rh);for(var Td=0,Ud=0,Fa=this.No,da=0;da<Fa;da++){var th=this.Ed[da];void 0!==th&&(Td+=th.Qa,0!==th.Qa&&(Td+=th.Ie()))}Fa=this.Cp;for(da=0;da<Fa;da++){var uh=this.Jd[da];void 0!==uh&&(Ud+=uh.Qa,0!==uh.Qa&&(Ud+=uh.Ie()))}for(var yc=Math.max(Sd-Td,0),jd=hd=Math.max(pf-Ud,0),Sg=yc,Fa=Ae.length,da=0;da<Fa;da++){var ca=Ae[da],lb=this.Nd(ca.Wb),
mb=this.Md(ca.column),qf=ca.Ca,Rb=ca.margin,dg=Rb.right+Rb.left,eg=Rb.top+Rb.bottom;Mc[ca.column]=0===mb.Ia&&void 0!==Mc[ca.column]?Math.max(qf.width+dg,Mc[ca.column]):null;gd[ca.Wb]=0===lb.Ia&&void 0!==gd[ca.Wb]?Math.max(qf.height+eg,gd[ca.Wb]):null}var lc=0,vh=0;for(da in gd)"count"!==da&&(lc+=gd[da]);for(da in Mc)"count"!==da&&(vh+=Mc[da]);for(var nb=v.Fl(),da=0;da<Fa;da++)if(ca=Ae[da],ca.visible||ca===this.bc){var lb=this.Nd(ca.Wb),mb=this.Md(ca.column),De=0;isFinite(mb.width)?De=mb.width:(De=
isFinite(yc)&&null!==Mc[ca.column]?0===vh?mb.Ia+yc:Mc[ca.column]/vh*Sg:null!==Mc[ca.column]?yc:mb.Ia||yc,De=Math.max(0,De-mb.Ie()));var Kf=0;isFinite(lb.height)?Kf=lb.height:(Kf=isFinite(hd)&&null!==gd[ca.Wb]?0===lc?lb.Ia+hd:gd[ca.Wb]/lc*jd:null!==gd[ca.Wb]?hd:lb.Ia||hd,Kf=Math.max(0,Kf-lb.Ie()));nb.m(Math.max(mb.aj,Math.min(De,mb.gf)),Math.max(lb.aj,Math.min(Kf,lb.gf)));Wc=Tm(ca,lb,mb,!1);switch(Wc){case vm:nb.height=Math.max(nb.height,lb.Ia+hd);break;case um:nb.width=Math.max(nb.width,mb.Ia+yc)}Rb=
ca.margin;dg=Rb.right+Rb.left;eg=Rb.top+Rb.bottom;ca.ep();kj(ca,nb.width,nb.height,mb.aj,lb.aj);Qe=ca.Ca;Re=Math.max(Qe.width+dg,0);zd=Math.max(Qe.height+eg,0);isFinite(yc)&&(Re=Math.min(Re,nb.width));isFinite(hd)&&(zd=Math.min(zd,nb.height));var rf=0,rf=lb.Ia;lb.Ia=Math.max(lb.Ia,zd);Nc=lb.Ia-rf;hd=Math.max(hd-Nc,0);rf=mb.Ia;mb.Ia=Math.max(mb.Ia,Re);Nc=mb.Ia-rf;yc=Math.max(yc-Nc,0)}v.sa(Ae);for(var Vd=v.Fl(),Fa=fd.length,da=0;da<Fa;da++)if(ca=fd[da],ca.visible||ca===this.bc){lb=this.Nd(ca.Wb);mb=
this.Md(ca.column);nb.m(Math.max(mb.aj,Math.min(Sd,mb.gf)),Math.max(lb.aj,Math.min(pf,lb.gf)));Wc=Tm(ca,lb,mb,!1);switch(Wc){case He:0!==mb.Ia&&(nb.width=Math.min(nb.width,mb.Ia));0!==lb.Ia&&(nb.height=Math.min(nb.height,lb.Ia));break;case vm:0!==mb.Ia&&(nb.width=Math.min(nb.width,mb.Ia));break;case um:0!==lb.Ia&&(nb.height=Math.min(nb.height,lb.Ia))}isFinite(mb.width)&&(nb.width=mb.width);isFinite(lb.height)&&(nb.height=lb.height);Vd.m(0,0);for(var fb=1;fb<ca.Gi&&!(ca.Wb+fb>=this.Cp);fb++)X=this.Nd(ca.Wb+
fb),Vd.height+=Math.max(X.aj,isNaN(X.Ve)?X.gf:Math.min(X.Ve,X.gf));for(fb=1;fb<ca.ii&&!(ca.column+fb>=this.No);fb++)X=this.Md(ca.column+fb),Vd.width+=Math.max(X.aj,isNaN(X.Ve)?X.gf:Math.min(X.Ve,X.gf));nb.width+=Vd.width;nb.height+=Vd.height;Rb=ca.margin;dg=Rb.right+Rb.left;eg=Rb.top+Rb.bottom;kj(ca,nb.width,nb.height,pi,vj);for(var Qe=ca.Ca,Re=Math.max(Qe.width+dg,0),zd=Math.max(Qe.height+eg,0),Tg=0,fb=0;fb<ca.Gi&&!(ca.Wb+fb>=this.Cp);fb++)X=this.Nd(ca.Wb+fb),Tg+=X.total||0;if(Tg<zd){var oc=zd-Tg,
zc=zd-Tg;if(null!==ca.tx)for(var Ad=ca.tx,fb=0;fb<ca.Gi&&!(0>=oc)&&!(ca.Wb+fb>=this.Cp);fb++){var X=this.Nd(ca.Wb+fb),Mb=X.Qa||0,sf=Ad(ca,X,zc);X.Ia=Math.min(X.gf,Mb+sf);X.Qa!==Mb&&(oc-=X.Qa-Mb)}for(;0<oc;){Mb=X.Qa||0;isNaN(X.height)&&X.gf>Mb&&(X.Ia=Math.min(X.gf,Mb+oc),X.Qa!==Mb&&(oc-=X.Qa-Mb));if(0===X.index)break;X=this.Nd(X.index-1)}}for(var Ee=0,fb=0;fb<ca.ii&&!(ca.column+fb>=this.No);fb++)X=this.Md(ca.column+fb),Ee+=X.total||0;if(Ee<Re){oc=Re-Ee;zc=Re-Ee;if(null!==ca.tx)for(Ad=ca.tx,fb=0;fb<
ca.ii&&!(0>=oc)&&!(ca.column+fb>=this.No);fb++)X=this.Md(ca.column+fb),Mb=X.Qa||0,sf=Ad(ca,X,zc),X.Ia=Math.min(X.gf,Mb+sf),X.Qa!==Mb&&(oc-=X.Qa-Mb);for(;0<oc;){Mb=X.Qa||0;isNaN(X.width)&&X.gf>Mb&&(X.Ia=Math.min(X.gf,Mb+oc),X.Qa!==Mb&&(oc-=X.Qa-Mb));if(0===X.index)break;X=this.Md(X.index-1)}}}v.sa(fd);v.$j(Vd);v.$j(nb);for(var fg=0,gg=0,Wc=Fm(this,!0),tf=this.za,wj=this.xf,Wd=Ud=Td=0,Xc=0,Fa=this.No,da=0;da<Fa;da++)void 0!==this.Ed[da]&&(X=this.Md(da),isFinite(X.width)?(Wd+=X.width,Wd+=X.Ie()):Un(X)===
Vn?(Wd+=X.Qa,Wd+=X.Ie()):0!==X.Qa&&(Td+=X.Qa,Td+=X.Ie()));var fg=isFinite(tf.width)?Math.min(tf.width,wj.width):Wc!==Si&&isFinite(Sd)?Sd:Td,fg=Math.max(fg,this.kh.width),fg=Math.max(fg-Wd,0),xh=Math.max(fg/Td,1);isFinite(xh)||(xh=1);for(da=0;da<Fa;da++)void 0!==this.Ed[da]&&(X=this.Md(da),isFinite(X.width)||Un(X)===Vn||(X.Ia=X.Qa*xh),X.position=e.width,0!==X.Qa&&(e.width+=X.Qa,e.width+=X.Ie()));Fa=this.Cp;for(da=0;da<Fa;da++)void 0!==this.Jd[da]&&(X=this.Nd(da),isFinite(X.height)?(Xc+=X.height,Xc+=
X.Ie()):Un(X)===Vn?(Xc+=X.Qa,Xc+=X.Ie()):0!==X.Qa&&(Ud+=X.Qa,0!==X.Qa&&(Ud+=X.Ie())));var gg=isFinite(tf.height)?Math.min(tf.height,wj.height):Wc!==Si&&isFinite(pf)?pf:Ud,gg=Math.max(gg,this.kh.height),gg=Math.max(gg-Xc,0),yh=Math.max(gg/Ud,1);isFinite(yh)||(yh=1);for(da=0;da<Fa;da++)void 0!==this.Jd[da]&&(X=this.Nd(da),isFinite(X.height)||Un(X)===Vn||(X.Ia=X.Qa*yh),X.position=e.height,0!==X.Qa&&(e.height+=X.Qa,0!==X.Qa&&(e.height+=X.Ie())));Fa=me.length;for(da=0;da<Fa;da++){var mc=me[da];mc.type===
Jm?(De=e.width,X=this.Nd(mc.Wb),Kf=X.Ia):(X=this.Md(mc.column),De=X.Ia,Kf=e.height);mc.jd.m(0,0,De,Kf);Qk(mc,!1);Yb[mc.Wb]||(Yb[mc.Wb]=[]);Yb[mc.Wb][mc.column]||(Yb[mc.Wb][mc.column]=[]);Yb[mc.Wb][mc.column].push(mc)}v.sa(me);this.as=Yb;break;case "Viewbox":var zh=a,Tk=b,Sq=c,Tq=d;1<m.length&&v.k("Viewbox Panel cannot contain more than one GraphObject.");var Se=m[0];Se.Tb=1;Se.ep();kj(Se,Infinity,Infinity,Sq,Tq);var xj=Se.Ca,Uk=Se.margin,Uq=Uk.right+Uk.left,Vq=Uk.top+Uk.bottom;if(isFinite(zh)||isFinite(Tk)){var ct=
Se.scale,Vk=xj.width,Wk=xj.height,Wq=Math.max(zh-Uq,0),Xq=Math.max(Tk-Vq,0),yj=1;this.Fo===Ui?0!==Vk&&0!==Wk&&(yj=Math.min(Wq/Vk,Xq/Wk)):0!==Vk&&0!==Wk&&(yj=Math.max(Wq/Vk,Xq/Wk));0===yj&&(yj=1E-4);Se.Tb*=yj;ct!==Se.scale&&(Qk(Se,!0),kj(Se,Infinity,Infinity,Sq,Tq))}xj=Se.Ca;e.width=isFinite(zh)?zh:Math.max(xj.width+Uq,0);e.height=isFinite(Tk)?Tk:Math.max(xj.height+Vq,0);break;case "Link":var Yq=m.length,hg=this instanceof Vg?this.Mf:this;if(hg instanceof W)if(0===Yq){var Xk=this.Qc;Wa(Xk,0,0);var ne=
this.Ca;ne.m(0,0,0,0)}else{var Yk=this instanceof Vg?null:hg.path,ig=hg.Zm,Te=this.Li;Te.assign(ig);Te.x=0;var Ug=Te.y=0,jg=hg.points,Ug=void 0!==this.oa?this.oa:jg.count;this instanceof Vg?this.Tm(!1):hg.Tm(!1);var Zq=ig.width,$q=ig.height;this.xi.m(ig.x,ig.y);null===this.Mg&&(this.Mg=new I(A));this.Mg.clear();null!==Yk&&(Wn(Yk,Zq,$q,this),ne=Yk.Ca,Te.bi(ne),this.Mg.add(ne));for(var kg=v.rh(),zj=v.L(),lg=v.L(),vn=0;vn<Yq;vn++){var Sb=m[vn];if(Sb!==Yk)if(Sb.Rf&&Sb instanceof Y)Wn(Sb,Zq,$q,this),ne=
Sb.Ca,Te.bi(ne),this.Mg.add(ne);else if(2>Ug)kj(Sb,Infinity,Infinity),ne=Sb.Ca,Te.bi(ne),this.Mg.add(ne);else{var kd=Sb.ve,br=Sb.kA,wn=Sb.Uj;wn.se()&&(wn=zb);var Lf=Sb.Vt,dt=Sb.TE,Aj=0,Bj=0,Zk=0;if(kd<-Ug||kd>=Ug){var cr=hg.uE,uf=hg.tE;Lf!==Gi&&(Zk=hg.computeAngle(Sb,Lf,uf),Sb.Kl=Zk);Aj=cr.x-ig.x;Bj=cr.y-ig.y}else{var Bd,Ue;if(0<=kd)Bd=jg.da(kd),Ue=kd<Ug-1?jg.da(kd+1):Bd;else{var Ah=Ug+kd;Bd=jg.da(Ah);Ue=0<Ah?jg.da(Ah-1):Bd}if(Bd.Fc(Ue)){var Bh,Ch;0<=kd?(Bh=0<kd?jg.da(kd-1):Bd,Ch=kd<Ug-2?jg.da(kd+
2):Ue):(Bh=Ah<Ug-1?jg.da(Ah+1):Bd,Ch=1<Ah?jg.da(Ah-2):Ue);var dr=Bh.rf(Bd),er=Ue.rf(Ch),uf=dr>er+10?0<=kd?Bh.xc(Bd):Bd.xc(Bh):er>dr+10?0<=kd?Ue.xc(Ch):Ch.xc(Ue):0<=kd?Bh.xc(Ch):Ch.xc(Bh)}else uf=0<=kd?Bd.xc(Ue):Ue.xc(Bd);Lf!==Gi&&(Zk=hg.computeAngle(Sb,Lf,uf),Sb.Kl=Zk);Aj=Bd.x+(Ue.x-Bd.x)*br-ig.x;Bj=Bd.y+(Ue.y-Bd.y)*br-ig.y}kj(Sb,Infinity,Infinity);var ne=Sb.Ca,Xk=Sb.Ha,Cj=0;Sb instanceof Y&&(Cj=Sb.lb);var Dh=Xk.width+Cj,vi=Xk.height+Cj;kg.reset();kg.translate(-ne.x,-ne.y);kg.scale(Sb.scale,Sb.scale);
kg.rotate(Lf===Gi?Sb.angle:uf,Dh/2,vi/2);Lf!==Xn&&Lf!==Yn||kg.rotate(90,Dh/2,vi/2);Lf!==Zn&&Lf!==$n||kg.rotate(-90,Dh/2,vi/2);Lf===ao&&(45<uf&&135>uf||225<uf&&315>uf)&&kg.rotate(-uf,Dh/2,vi/2);var wi=new A(0,0,Dh,vi);zj.Yt(wi,wn);kg.ub(zj);var et=-zj.x+Cj/2,ft=-zj.y+Cj/2;lg.assign(dt);isNaN(lg.x)&&(lg.x=0<=kd?Dh/2+3:-(Dh/2+3));isNaN(lg.y)&&(lg.y=-(vi/2+3));lg.rotate(uf);Aj+=lg.x;Bj+=lg.y;wi.set(ne);wi.x=Aj+et;wi.y=Bj+ft;this.Mg.add(wi);Te.bi(wi)}}if(this.Ce)for(var fr=this.Sf;fr.next();)kj(fr.value,
Infinity,Infinity);this.Li=Te;var yn=this.xi;yn.m(yn.x+Te.x,yn.y+Te.y);Wa(e,Te.width||0,Te.height||0);v.$e(kg);v.v(zj);v.v(lg)}break;case "Grid":break;case "TableRow":case "TableColumn":v.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:v.k("Unknown panel type: "+n)}}var Ve=e.width,We=e.height,dl=this.padding,gt=dl.top+dl.bottom,Ve=Ve+(dl.left+dl.right),We=We+gt;isFinite(f.width)&&(Ve=f.width);isFinite(f.height)&&
(We=f.height);Ve=Math.min(k.width,Ve);We=Math.min(k.height,We);Ve=Math.max(h.width,Ve);We=Math.max(h.height,We);Ve=Math.max(c,Ve);We=Math.max(d,We);e.width=Ve;e.height=We;Wa(this.Qc,Ve,We);Cm(this,0,0,Ve,We)};D.prototype.findMainElement=D.prototype.Ye=function(){if(null===this.sm){var a=this.ya.n,b=a.length;if(0===b)return null;for(var c=0;c<b;c++){var d=a[c];if(!0===d.Rf)return this.sm=d}this.sm=a[0]}return this.sm};
D.prototype.Ni=function(a,b,c,d){var e=this.Li,f=this.ya.n,h=v.hk(0,0,0,0);if(0===f.length){var k=this.U;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.za.G()){var l=Fm(this,!0),m=this.jd,n=m.width,p=m.height,q=this.margin,r=q.left+q.right,s=q.top+q.bottom;n===c&&p===d&&(l=Si);switch(l){case Si:if(n>c||p>d)this.N(),kj(this,n>c?c:n,p>d?d:p);break;case He:this.N(!0);kj(this,c+r,d+s,0,0);break;case vm:this.N(!0);kj(this,c+r,p+s,0,0);break;case um:this.N(!0),kj(this,n+r,d+s,0,0)}}k=this.U;k.x=a;k.y=b;
k.width=c;k.height=d;var t=this.ia.Ob;switch(t){case "Position":for(var u=f.length,x=e.x-this.padding.left,w=e.y-this.padding.top,y=0;y<u;y++){var B=f[y],H=B.Ca,C=B.margin,T=B.position.x,ba=B.position.y;h.x=isNaN(T)?-x:T-x;h.y=isNaN(ba)?-w:ba-w;if(B instanceof Y){var U=B;if(U.dE){var M=U.lb/2;h.x-=M;h.y-=M}}h.x+=C.left;h.y+=C.top;h.width=H.width;h.height=H.height;B.visible&&B.Ec(h.x,h.y,h.width,h.height)}break;case "Vertical":for(var aa=f.length,Ia=this.padding.left,oa=this.padding.top,Ga=0;Ga<aa;Ga++){var pa=
Ia,Ca=f[Ga];if(Ca.visible){var ua=Ca.Ca,gc=Ca.margin,ud=gc.left+gc.right,vd=Ia+this.padding.right,Le=ua.width,Wb=Fm(Ca,!1);if(isNaN(Ca.za.width)&&Wb===He||Wb===vm)Le=Math.max(e.width-ud-vd,0);var Jg=Le+ud+vd,wd=Ca.alignment;wd.Uc()&&(wd=this.hl);wd.bd()||(wd=zb);Ca.Ec(pa+wd.offsetX+gc.left+(e.width*wd.x-Jg*wd.x),oa+wd.offsetY+gc.top,Le,ua.height);oa+=ua.height+gc.bottom+gc.top}}break;case "Horizontal":for(var ob=f.length,eb=this.padding.top,ka=this.padding.left,la=0;la<ob;la++){var pb=eb,Ua=f[la];
if(Ua.visible){var Ra=Ua.Ca,we=Ua.margin,xd=we.top+we.bottom,ie=eb+this.padding.bottom,Nd=Ra.height,je=Fm(Ua,!1);if(isNaN(Ua.za.height)&&je===He||je===um)Nd=Math.max(e.height-xd-ie,0);var Kg=Nd+xd+ie,dd=Ua.alignment;dd.Uc()&&(dd=this.hl);dd.bd()||(dd=zb);Ua.Ec(ka+dd.offsetX+we.left,pb+dd.offsetY+we.top+(e.height*dd.y-Kg*dd.y),Ra.width,Nd);ka+=Ra.width+we.left+we.right}}break;case "Spot":var oi=f.length,vb=this.Ye(),Xb=vb.Ca,Od=Xb.width,nh=Xb.height,Jb=this.padding,hb=Jb.left,bb=Jb.top;h.x=hb-e.x;
h.y=bb-e.y;vb.Ec(h.x,h.y,Od,nh);for(var Me=0;Me<oi;Me++){var Pd=f[Me];if(Pd!==vb){var Lg=Pd.Ca,Mg=Lg.width,hc=Lg.height,ic=Pd.alignment;ic.Uc()&&(ic=this.hl);ic.bd()||(ic=zb);var ke=Pd.Uj;ke.Uc()&&(ke=zb);h.x=ic.x*Od+ic.offsetX-(ke.x*Mg-ke.offsetX);h.y=ic.y*nh+ic.offsetY-(ke.y*hc-ke.offsetY);h.x-=e.x;h.y-=e.y;Pd.visible&&Pd.Ec(hb+h.x,bb+h.y,Mg,hc)}}break;case "Auto":var ed=f.length,jb=this.Ye(),Tc=jb.Ca,Ka=v.ag();Ka.m(0,0,1,1);var kb=jb.margin,wc=kb.left,yd=kb.top,Hb=this.padding,le=Hb.left,of=Hb.top;
h.x=wc;h.y=yd;h.width=Tc.width;h.height=Tc.height;jb.Ec(le+h.x,of+h.y,h.width,h.height);var Ne=Sn(jb),Jf=Tn(jb),Kb=0+Ne.y*Tc.height+Ne.offsetY,xe=0+Jf.x*Tc.width+Jf.offsetX,Lb=0+Jf.y*Tc.height+Jf.offsetY;Ka.x=0+Ne.x*Tc.width+Ne.offsetX;Ka.y=Kb;$a(Ka,xe,Lb,0,0);Ka.x+=wc+le;Ka.y+=yd+of;for(var jc=0;jc<ed;jc++){var Qb=f[jc];if(Qb!==jb){var Ic=Qb.Ca,kb=Qb.margin,wb=Math.max(Ic.width+kb.right+kb.left,0),Bb=Math.max(Ic.height+kb.top+kb.bottom,0),Ib=Qb.alignment;Ib.Uc()&&(Ib=this.hl);Ib.bd()||(Ib=zb);h.x=
Ka.width*Ib.x+Ib.offsetX-wb*Ib.x+kb.left+Ka.x;h.y=Ka.height*Ib.y+Ib.offsetY-Bb*Ib.y+kb.top+Ka.y;h.width=Ka.width;h.height=Ka.height;Qb.visible&&(ab(Ka.x,Ka.y,Ka.width,Ka.height,h.x,h.y,Ic.width,Ic.height)?Qb.Ec(h.x,h.y,Ic.width,Ic.height):Qb.Ec(h.x,h.y,Ic.width,Ic.height,new A(Ka.x,Ka.y,Ka.width,Ka.height)))}}v.Vb(Ka);break;case "Table":for(var Qd=f.length,Ng=this.padding,oh=Ng.left,ph=Ng.top,ye=this.as,Jc=0,ze=0,kc=ye.length,xb=0,yb=0;yb<kc;yb++)ye[yb]&&(xb=Math.max(xb,ye[yb].length));for(var Kc=
Math.min(this.Ki,kc-1);Kc!==kc&&(void 0===this.Jd[Kc]||0===this.Jd[Kc].Qa);)Kc++;for(var Kc=Math.min(Kc,kc-1),Og=-this.Jd[Kc].kb,Uc=Math.min(this.wi,xb-1);Uc!==xb&&(void 0===this.Ed[Uc]||0===this.Ed[Uc].Qa);)Uc++;for(var Uc=Math.min(Uc,xb-1),Vc=-this.Ed[Uc].kb,ib=v.Fl(),yb=0;yb<kc;yb++)if(ye[yb]){var xb=ye[yb].length,Lc=this.Nd(yb),ze=Lc.kb+Og+ph;0!==Lc.Qa&&(ze+=Lc.rD());for(var Rd=0;Rd<xb;Rd++)if(ye[yb][Rd]){var Sd=this.Md(Rd),Jc=Sd.kb+Vc+oh;0!==Sd.Qa&&(Jc+=Sd.rD());for(var pf=ye[yb][Rd],pi=pf.length,
vj=0;vj<pi;vj++){var Fa=pf[vj],Oe=Fa.Ca,me=Fa instanceof D?Fa:null;if(null===me||me.type!==Jm&&me.type!==Km){ib.m(0,0);for(var da=1;da<Fa.rowSpan&&!(yb+da>=this.Cp);da++){var ca=this.Nd(yb+da);ib.height+=ca.total}for(da=1;da<Fa.sG&&!(Rd+da>=this.No);da++){var Pg=this.Md(Rd+da);ib.width+=Pg.total}var qh=Sd.Qa+ib.width,qi=Lc.Qa+ib.height;h.x=Jc;h.y=ze;h.width=qh;h.height=qi;var xc=Jc,ri=ze,Yb=qh,rh=qi;Jc+qh>e.width&&(Yb=Math.max(e.width-Jc,0));ze+qi>e.height&&(rh=Math.max(e.height-ze,0));var fd=Fa.alignment,
Ae=0,Mc=0,gd=0,yc=0;if(fd.Uc()){fd=this.hl;fd.bd()||(fd=zb);var Ae=fd.x,Mc=fd.y,gd=fd.offsetX,yc=fd.offsetY,hd=Sd.alignment,bg=Lc.alignment;hd.bd()&&(Ae=hd.x,gd=hd.offsetX);bg.bd()&&(Mc=bg.y,yc=bg.offsetY)}else Ae=fd.x,Mc=fd.y,gd=fd.offsetX,yc=fd.offsetY;if(isNaN(Ae)||isNaN(Mc))Mc=Ae=.5,yc=gd=0;var X=Oe.width,Be=Oe.height,Pe=Fa.margin,si=Pe.left+Pe.right,ti=Pe.top+Pe.bottom,Nc=Tm(Fa,Lc,Sd,!1);!isNaN(Fa.za.width)||Nc!==He&&Nc!==vm||(X=Math.max(qh-si,0));!isNaN(Fa.za.height)||Nc!==He&&Nc!==um||(Be=
Math.max(qi-ti,0));var lb=Fa.xf,mb=Fa.kh,X=Math.min(lb.width,X),Be=Math.min(lb.height,Be),X=Math.max(mb.width,X),Be=Math.max(mb.height,Be),Rk=Be+ti;h.x+=h.width*Ae-(X+si)*Ae+gd+Pe.left;h.y+=h.height*Mc-Rk*Mc+yc+Pe.top;Fa.visible&&(ab(xc,ri,Yb,rh,h.x,h.y,Oe.width,Oe.height)?Fa.Ec(h.x,h.y,X,Be):Fa.Ec(h.x,h.y,X,Be,new A(xc,ri,Yb,rh)))}else{Fa.si();Fa.mc.Pa();var cg=Fa.mc;cg.x=me.type===Jm?oh:Jc;cg.y=me.type===Km?ph:ze;cg.width=Oe.width;cg.height=Oe.height;Fa.mc.freeze();Hm(Fa,!1)}}}}v.$j(ib);for(yb=
0;yb<Qd;yb++)Fa=f[yb],me=Fa instanceof D?Fa:null,null===me||me.type!==Jm&&me.type!==Km||(cg=Fa.mc,Fa.Qc.Pa(),Fa.Qc.m(0,0,cg.width,cg.height),Fa.Qc.freeze());break;case "Viewbox":var Qg=f[0],Rg=Qg.Ca,Rb=Qg.margin,dg=Rb.top+Rb.bottom,eg=Math.max(Rg.width+(Rb.right+Rb.left),0),Wc=Math.max(Rg.height+dg,0),Ce=Qg.alignment;Ce.Uc()&&(Ce=this.hl);Ce.bd()||(Ce=zb);h.x=e.width*Ce.x-eg*Ce.x+Ce.offsetX;h.y=e.height*Ce.y-Wc*Ce.y+Ce.offsetY;h.width=Rg.width;h.height=Rg.height;Qg.Ec(h.x,h.y,h.width,h.height);break;
case "Link":var un=f.length,ui=this instanceof Vg?this.Mf:this;if(ui instanceof W){var Qe=this instanceof Vg?null:ui.path;if(null!==this.Mg){var Re=this.Mg.n,zd=0;if(null!==Qe&&zd<this.Mg.count){var id=Re[zd];zd++;Qe.Ec(id.x-this.Li.x,id.y-this.Li.y,id.width,id.height)}for(var sh=0;sh<un;sh++){var Td=f[sh];Td!==Qe&&zd<this.Mg.count&&(id=Re[zd],zd++,Td.Ec(id.x-this.Li.x,id.y-this.Li.y,id.width,id.height))}}var Ud=ui.points,th=Ud.count;if(2<=th&&this.Ce)for(var uh=this.Sf;uh.next();){var jd=uh.value,
Sg=th,qf=Ud,lc=jd.ve,vh=jd.kA,nb=jd.Uj,De=jd.Vt,Kf=jd.TE,rf=0,Vd=0,fb=0;if(lc<-Sg||lc>=Sg){var Tg=this.uE,oc=this.tE;De!==Gi&&(fb=this.computeAngle(jd,De,oc),jd.angle=fb);rf=Tg.x;Vd=Tg.y}else{var zc=void 0,Ad=void 0;if(0<=lc)zc=qf.n[lc],Ad=lc<Sg-1?qf.n[lc+1]:zc;else var Mb=Sg+lc,zc=qf.n[Mb],Ad=0<Mb?qf.n[Mb-1]:zc;if(zc.Fc(Ad)){var sf=void 0,Ee=void 0;0<=lc?(sf=0<lc?qf.n[lc-1]:zc,Ee=lc<Sg-2?qf.n[lc+2]:Ad):(sf=Mb<Sg-1?qf.n[Mb+1]:zc,Ee=1<Mb?qf.n[Mb-2]:Ad);var fg=sf.rf(zc),gg=Ad.rf(Ee),oc=fg>gg+10?0<=
lc?sf.xc(zc):zc.xc(sf):gg>fg+10?0<=lc?Ad.xc(Ee):Ee.xc(Ad):0<=lc?sf.xc(Ee):Ee.xc(sf)}else oc=0<=lc?zc.xc(Ad):Ad.xc(zc);De!==Gi&&(fb=this.computeAngle(jd,De,oc),jd.angle=fb);rf=zc.x+(Ad.x-zc.x)*vh;Vd=zc.y+(Ad.y-zc.y)*vh}if(nb.K(qb))jd.location=new z(rf,Vd);else{nb.se()&&(nb=zb);var tf=v.rh();tf.reset();tf.scale(jd.scale,jd.scale);tf.rotate(jd.angle,0,0);var wj=jd.Ha,Wd=v.hk(0,0,wj.width,wj.height),Xc=v.L();Xc.Yt(Wd,nb);tf.ub(Xc);var xh=-Xc.x,yh=-Xc.y,mc=Kf.copy();isNaN(mc.x)&&(mc.x=0<=lc?Xc.x+3:-(Xc.x+
3));isNaN(mc.y)&&(mc.y=-(Xc.y+3));mc.rotate(oc);rf+=mc.x;Vd+=mc.y;tf.oF(Wd);var xh=xh+Wd.x,yh=yh+Wd.y,zh=v.Mb(rf+xh,Vd+yh);jd.move(zh);v.v(zh);v.v(Xc);v.Vb(Wd);v.$e(tf)}}this instanceof Vg?this.Tm(!1):ui.Tm(!1)}break;case "Grid":break;case "TableRow":case "TableColumn":v.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:v.k("Unknown panel type: "+t)}v.Vb(h)}};
D.prototype.Wj=function(a){var b=this.Ha;if(ab(0,0,b.width,b.height,a.x,a.y)){for(var b=this.ya.n,c=b.length,d=v.Mb(0,0);c--;){var e=b[c];if(e.visible||e===this.bc)if(Qa(d.set(a),e.transform),e.Fa(d))return v.v(d),!0}v.v(d);return null===this.Ib&&null===this.nc?!1:!0}return!1};D.prototype.Bw=function(a){if(this.on===a)return this;for(var b=this.ya.n,c=b.length,d=0;d<c;d++){var e=b[d].Bw(a);if(null!==e)return e}return null};
function bo(a,b,c){c(a,b);if(b instanceof D){b=b.ya.n;for(var d=b.length,e=0;e<d;e++)bo(a,b[e],c)}}function ol(a,b){co(a,a,b)}function co(a,b,c){c(b);b=b.ya.n;for(var d=b.length,e=0;e<d;e++){var f=b[e];f instanceof D&&co(a,f,c)}}D.prototype.walkVisualTree=D.prototype.TI=function(a){eo(this,this,a)};function eo(a,b,c){c(b);if(b instanceof D){b=b.ya.n;for(var d=b.length,e=0;e<d;e++)eo(a,b[e],c)}}D.prototype.findInVisualTree=D.prototype.dt=function(a){return fo(this,this,a)};
function fo(a,b,c){if(c(b))return b;if(b instanceof D){b=b.ya.n;for(var d=b.length,e=0;e<d;e++){var f=fo(a,b[e],c);if(null!==f)return f}}return null}D.prototype.findObject=D.prototype.ce=function(a){if(this.name===a)return this;for(var b=this.ya.n,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof D)if(null===e.vj&&null===e.hg){if(e=e.ce(a),null!==e)return e}else if(Jl(e)&&(e=e.ya.first(),null!==e&&(e=e.ce(a),null!==e)))return e}return null};
function ho(a){a=a.ya.n;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof D)c=Math.max(c,ho(e));else if(e instanceof Y){a:{if(null!==!e.Kf)switch(e.Jn){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=
0;break a}e=e.Rh/2*e.rm*e.Ti()}c=Math.max(c,e)}}return c}g=D.prototype;g.Lg=function(){return!(this.type===Jm||this.type===Km)};
g.re=function(a,b,c){if(!1===this.Hg)return null;void 0===b&&(b=null);void 0===c&&(c=null);if(fl(this))return null;var d=this.Ha,e=1/this.Ti(),f=this.Lg(),h=f?a:Qa(v.Mb(a.x,a.y),this.transform),k=this.g,l=10,m=5;null!==k&&(l=k.Yo("extraTouchArea"),m=l/2);if(ab(-(m*e),-(m*e),d.width+l*e,d.height+l*e,h.x,h.y)){if(!this.Qg){var e=this.ya.n,n=e.length,k=v.L(),m=(l=this.bE)?this.Ye():null;if(l&&(m.Lg()?Qa(k.set(a),m.transform):k.set(a),!m.Fa(k)))return v.v(k),f||v.v(h),null;for(;n--;){var p=e[n];if(p.visible||
p===this.bc)if(p.Lg()?Qa(k.set(a),p.transform):k.set(a),!l||p!==m){var q=null;p instanceof D?q=p.re(k,b,c):!0===p.Hg&&p.Fa(k)&&(q=p);if(null!==q&&(null!==b&&(q=b(q)),null!==q&&(null===c||c(q))))return v.v(k),f||v.v(h),q}}v.v(k)}if(null===this.background&&null===this.zm)return f||v.v(h),null;a=ab(0,0,d.width,d.height,h.x,h.y)?this:null;f||v.v(h);return a}f||v.v(h);return null};
g.gt=function(a,b,c,d){if(!1===this.Hg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);d instanceof I||d instanceof J||(d=new I(G));var e=this.Ha,f=this.Lg(),h=f?a:Qa(v.Mb(a.x,a.y),this.transform);if(ab(0,0,e.width,e.height,h.x,h.y)){if(!this.Qg){for(var e=this.ya.n,k=e.length,l=v.L();k--;){var m=e[k];if(m.visible||m===this.bc){m.Lg()?Qa(l.set(a),m.transform):l.set(a);var n=m,m=m instanceof D?m:null;(null!==m?m.gt(l,b,c,d):n.Fa(l))&&!1!==n.Hg&&(null!==b&&(n=b(n)),null===n||null!==c&&!c(n)||d.add(n))}}v.v(l)}f||
v.v(h);return null!==this.background||null!==this.zm}f||v.v(h);return!1};
g.Zj=function(a,b,c,d,e,f){if(!1===this.Hg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=f;void 0===f&&(h=v.rh(),h.reset());h.multiply(this.transform);if(this.Em(a,h))return io(this,b,c,e),void 0===f&&v.$e(h),!0;if(this.yg(a,h)){if(!this.Qg)for(var k=this.ya.n,l=k.length;l--;){var m=k[l];if(m.visible||m===this.bc){var n=m.U,p=this.Ha;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=m;m=m instanceof D?m:null;p=v.rh();p.set(h);if(null!==m?m.Zj(a,b,c,d,e,p):Em(n,a,d,p))null!==
b&&(n=b(n)),null===n||null!==c&&!c(n)||e.add(n);v.$e(p)}}}void 0===f&&v.$e(h);return d}void 0===f&&v.$e(h);return!1};function io(a,b,c,d){for(var e=a.ya.n,f=e.length;f--;){var h=e[f];if(h.visible){var k=h.U,l=a.Ha;k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height||(h instanceof D&&io(h,b,c,d),null!==b&&(h=b(h)),null===h||null!==c&&!c(h)||d.add(h))}}}
g.Km=function(a,b,c,d,e,f){if(!1===this.Hg)return!1;void 0===c&&(c=null);void 0===d&&(d=null);var h=this.Ha,k=this.Lg(),l=k?a:Qa(v.Mb(a.x,a.y),this.transform),m=k?b:Qa(v.Mb(b.x,b.y),this.transform),n=l.rf(m),p=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height||Sa(l.x,l.y,0,0,0,h.height)<n||Sa(l.x,l.y,0,h.height,h.width,h.height)<n||Sa(l.x,l.y,h.width,h.height,h.width,0)<n||Sa(l.x,l.y,h.width,0,0,0)<n,h=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height&&Sa(l.x,l.y,0,0,0,h.height)<n&&Sa(l.x,l.y,0,h.height,h.width,h.height)<
n&&Sa(l.x,l.y,h.width,h.height,h.width,0)<n&&Sa(l.x,l.y,h.width,0,0,0)<n;k||(v.v(l),v.v(m));if(p){if(!this.Qg){k=v.L();l=v.L();m=this.ya.n;for(n=m.length;n--;){var q=m[n];if(q.visible||q===this.bc){var r=q.U,s=this.Ha;r.x>s.width||r.y>s.height||0>r.x+r.width||0>r.y+r.height||(q.Lg()?(r=q.transform,Qa(k.set(a),r),Qa(l.set(b),r)):(k.set(a),l.set(b)),r=q,q=q instanceof D?q:null,null!==q?!q.Km(k,l,c,d,e,f):!r.LD(k,l,e))||(null!==c&&(r=c(r)),null===r||null!==d&&!d(r)||f.add(r))}}v.v(k);v.v(l)}return e?
p:h}return!1};function Sn(a){var b=a.B;if(void 0===b||b===fc)b=null;null===b&&a instanceof Y&&(a=a.fh,null!==a&&(b=a.B));null===b&&(b=rb);return b}function Tn(a){var b=a.C;if(void 0===b||b===fc)b=null;null===b&&a instanceof Y&&(a=a.fh,null!==a&&(b=a.C));null===b&&(b=Eb);return b}D.prototype.add=D.prototype.add=function(a){v.A(a,G,D,"add:element");this.yd(this.ya.count,a)};D.prototype.elt=D.prototype.da=function(a){return this.ya.da(a)};
D.prototype.insertAt=D.prototype.yd=function(a,b){b instanceof R&&v.k("Cannot add a Part to a Panel: "+b);if(this===b||this.ul(b))this===b&&v.k("Cannot make a Panel contain itself: "+this.toString()),v.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.R;null!==c&&c!==this&&v.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.ia!==yk||b instanceof Y||v.k("Can only add Shapes to a Grid Panel, not: "+b);b.Bl(this);b.im=null;if(null!==this.mE){var d=b.data;null!==d&&"object"===typeof d&&(null===this.gg&&(this.gg=new na(Object,D)),this.gg.add(d,b))}var e=this.ya,d=-1;if(c===this){for(var f=-1,h=this.ya.n,k=h.length,l=0;l<k;l++)if(h[l]===b){f=l;break}if(-1!==f){if(f===a||f+1>=e.count&&a>=e.count)return;e.Vc(f);d=f}else v.k("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>
a||a>e.count)a=e.count;e.yd(a,b);this.N();b.N();null!==b.Sd?this.Ch=!0:b instanceof D&&!0===b.Ch&&(this.Ch=!0);c=this.Y;null!==c&&(c.dm=null,c.Aj=NaN,this.Ch&&c instanceof S&&(c.Ch=!0),c.Ch&&(c.Xd=null),e=this.g,null!==e&&e.la.ib||(-1!==d&&c.Lc(Df,"elements",this,b,null,d,null),c.Lc(Cf,"elements",this,null,b,null,a)))};D.prototype.remove=D.prototype.remove=function(a){v.A(a,G,D,"remove:element");for(var b=this.ya.n,c=b.length,d=-1,e=0;e<c;e++)if(b[e]===a){d=e;break}-1!==d&&this.Ne(d)};
D.prototype.removeAt=D.prototype.Vc=function(a){0<=a&&this.Ne(a)};D.prototype.Ne=function(a){var b=this.ya,c=b.da(a);c.im=null;c.Bl(null);if(null!==this.gg){var d=c.data;"object"===typeof d&&this.gg.remove(d)}b.Vc(a);Qk(this,!1);this.N();this.sm===c&&(this.sm=null);b=this.Y;null!==b&&(b.dm=null,b.Aj=NaN,b.Od(),d=this.g,null!==d&&d.la.ib||b.Lc(Df,"elements",this,c,null,a,null))};v.u(D,{Cp:"rowCount"},function(){return void 0===this.Jd?0:this.Jd.length});
D.prototype.getRowDefinition=D.prototype.Nd=function(a){0>a&&v.va(a,">= 0",D,"getRowDefinition:idx");a=Math.round(a);var b=this.Jd;if(void 0===b[a]){var c=new ug;c.Bl(this);c.ee=!0;c.index=a;b[a]=c}return b[a]};D.prototype.removeRowDefinition=D.prototype.HE=function(a){0>a&&v.va(a,">= 0",D,"removeRowDefinition:idx");a=Math.round(a);var b=this.Jd;this.Lc(Df,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.N()};v.u(D,{No:"columnCount"},function(){return void 0===this.Ed?0:this.Ed.length});
D.prototype.getColumnDefinition=D.prototype.Md=function(a){0>a&&v.va(a,">= 0",D,"getColumnDefinition:idx");a=Math.round(a);var b=this.Ed;if(void 0===b[a]){var c=new ug;c.Bl(this);c.ee=!1;c.index=a;b[a]=c}return b[a]};D.prototype.removeColumnDefinition=D.prototype.DE=function(a){0>a&&v.va(a,">= 0",D,"removeColumnDefinition:idx");a=Math.round(a);var b=this.Ed;this.Lc(Df,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.N()};
v.defineProperty(D,{rI:"rowSizing"},function(){return void 0===this.nm?On:this.nm},function(a){if(void 0!==this.nm){var b=this.nm;b!==a&&(a!==On&&a!==Vn&&v.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.nm=a,this.N(),this.h("rowSizing",b,a))}});
v.defineProperty(D,{rG:"columnSizing"},function(){return void 0===this.Ol?On:this.Ol},function(a){if(void 0!==this.Ol){var b=this.Ol;b!==a&&(a!==On&&a!==Vn&&v.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.Ol=a,this.N(),this.h("columnSizing",b,a))}});
v.defineProperty(D,{OK:"topIndex"},function(){return void 0===this.Ki?0:this.Ki},function(a){if(void 0!==this.Ki){var b=this.Ki;b!==a&&((!isFinite(a)||0>a)&&v.k("Panel.topIndex must be greater than zero and a real number, not: "+a),this.Ki=a,this.N(),this.h("topIndex",b,a))}});
v.defineProperty(D,{$J:"leftIndex"},function(){return void 0===this.wi?0:this.wi},function(a){if(void 0!==this.wi){var b=this.wi;b!==a&&((!isFinite(a)||0>a)&&v.k("Panel.leftIndex must be greater than zero and a real number, not: "+a),this.wi=a,this.N(),this.h("leftIndex",b,a))}});D.prototype.findRowForLocalY=function(a){if(0>a)return-1;if(this.type!==Sm)return NaN;for(var b=0,c=this.Jd,d=c.length,e=this.Ki;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
D.prototype.findColumnForLocalX=function(a){if(0>a)return-1;if(this.type!==Sm)return NaN;for(var b=0,c=this.Ed,d=c.length,e=this.wi;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
v.defineProperty(D,{data:"data"},function(){return this.je},function(a){var b=this.je;if(b!==a){var c=this instanceof R&&!(this instanceof Vg);c&&v.j(a,"object",D,"data");Xg(this);this.je=a;var d=this.g;null!==d&&(c?this instanceof W?(null!==b&&d.xk.remove(b),null!==a&&d.xk.add(a,this)):this instanceof R&&(null!==b&&d.li.remove(b),null!==a&&d.li.add(a,this)):(c=this.R,null!==c&&null!==c.gg&&(null!==b&&c.gg.remove(b),null!==a&&c.gg.add(a,this))));this.h("data",b,a);null!==d&&d.la.ib||null!==a&&this.Hb()}});
v.defineProperty(D,{wH:"itemIndex"},function(){return this.br},function(a){var b=this.br;b!==a&&(this.br=a,this.h("itemIndex",b,a))});function $m(a){a=a.uk;return null!==a&&a.D}
function Xg(a){var b=a.uk;if(null===b)null!==a.data&&v.k("Template cannot have .data be non-null: "+a),a.uk=b=new I(Ag);else if(b.D)return;var c=new I(G);bo(a,a,function(a,d){var e=d.sc;if(null!==e)for(Wm(d,!1),e=e.i;e.next();){var f=e.value;f.mode===Cg&&Wm(d,!0);if(null!==f.bn){var h=Dg(f,a,d);null!==h&&(c.add(h),null===h.so&&(h.so=new I(Ag)),h.so.add(f))}b.add(f)}if(d instanceof D&&d.type===Sm){if(0<d.Jd.length)for(e=d.Jd,f=e.length,h=0;h<f;h++){var k=e[h];if(void 0!==k&&null!==k.sc)for(var l=k.sc.i;l.next();){var u=
l.value;u.pg=k;u.zs=2;u.Ao=k.index;b.add(u)}}if(0<d.Ed.length)for(e=d.Ed,f=e.length,h=0;h<f;h++)if(k=e[h],void 0!==k&&null!==k.sc)for(l=k.sc.i;l.next();)u=l.value,u.pg=k,u.zs=1,u.Ao=k.index,b.add(u)}});for(var d=c.i;d.next();){var e=d.value;if(null!==e.so){Wm(e,!0);for(var f=e.so.i;f.next();){var h=f.value;null===e.sc&&(e.sc=new I(Ag));e.sc.add(h)}}e.so=null}for(d=b.i;d.next();)if(e=d.value,f=e.pg,null!==f){e.pg=null;var k=e.ux,l=k.indexOf(".");0<l&&f instanceof D&&(h=k.substring(0,l),k=k.substr(l+
1),l=f.ce(h),null!==l?(f=l,e.ux=k):v.trace('Warning: unable to find GraphObject named "'+h+'" for Binding: '+e.toString()));f instanceof ug?(e.El=v.ld(f.R),f.R.on=e.El):(e.El=v.ld(f),f.on=e.El)}b.freeze();a instanceof R&&a.Pd()&&(kj(a,Infinity,Infinity),a.Ec())}D.prototype.copyTemplate=function(){var a=this.copy();a.TI(function(a){a instanceof D&&(a.uk=null,a.je=null);var c=a.sc;null!==c&&(a.sc=null,c.each(function(c){a.bind(c.copy())}))});return a};
D.prototype.updateTargetBindings=D.prototype.Hb=function(a){var b=this.uk;if(null!==b)for(void 0===a&&(a=""),b=b.i;b.next();){var c=b.value,d=c.bF;if(""===a||""===d||d===a)if(d=c.ux,null!==c.vG||""!==d){var d=this.data,e=c.bn;if(null!==e)d=""===e?this:"."===e?this:".."===e?this:this.ce(e);else{var f=this.g;null!==f&&c.yt&&(d=f.ba.ck)}if(null!==d){var f=this,h=c.El;if(-1!==h){if(f=this.Bw(h),null===f)continue}else null!==c.pg&&(f=c.pg);"."===e?d=f:".."===e&&(d=f.R);e=c.zs;if(0!==e){if(!(f instanceof
D))continue;h=f;1===e?f=h.Md(c.Ao):2===e&&(f=h.Nd(c.Ao))}void 0!==f&&c.sF(f,d)}}}};v.defineProperty(D,{mE:"itemArray"},function(){return this.vj},function(a){var b=this.vj;if(b!==a){var c=this.g;null!==c&&null!==b&&ul(c,this);this.vj=a;null!==c&&null!==a&&ql(c,this);this.h("itemArray",b,a);null!==c&&c.la.ib||this.dA()}});function Jl(a){return a.type===Qi||a.type===vk||a.type===Di||a.type===Sm&&0<a.ya.length&&(a=a.ya.da(0),a.Rf&&a instanceof D&&(a.type===Jm||a.type===Km))?!0:!1}
D.prototype.rebuildItemElements=D.prototype.dA=function(){var a=0;for(Jl(this)&&(a=1);this.ya.length>a;)this.Ne(this.ya.length-1);a=this.mE;if(null!==a)for(var b=v.Va(a),c=0;c<b;c++)Il(this,v.Ra(a,c),c)};D.prototype.findItemPanelForData=D.prototype.OG=function(a){if(void 0===a||null===a||null===this.gg)return null;v.j(a,"object",D,"findItemPanelForData");return this.gg.ja(a)};
function Il(a,b,c){if(!(void 0===b||null===b||0>c)){var d;d=jo(a,b);var e=a.xH,f=null;null!==e&&(f=e.ja(d));null===f&&(ko||(ko=!0,v.trace('No item template Panel found for category "'+d+'" on '+a),v.trace("  Using default item template."),d=new D,e=new bh,e.bind(new Ag("text","",Ef)),d.add(e),lo=d),f=lo);d=f;null!==d&&(Xg(d),d=d.copy(),"object"===typeof b&&(null===a.gg&&(a.gg=new na(Object,D)),a.gg.add(b,d)),e=c,Jl(a)&&e++,a.yd(e,d),Kl(a,e,c),d.je=null,d.data=b)}}
function Kl(a,b,c){for(a=a.ya;b<a.length;){var d=a.da(b);if(d instanceof D){var e=b,f=c;d.type===Jm?d.Wb=e:d.type===Km&&(d.column=e);d.wH=f}b++;c++}}
v.defineProperty(D,{YJ:"itemTemplate"},function(){return null===this.hg?null:this.hg.ja("")},function(a){if(null===this.hg){if(null===a)return;this.hg=new na("string",D)}var b=this.hg.ja("");b!==a&&(v.A(a,D,D,"itemTemplate"),(a instanceof R||a.Rf)&&v.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+a),this.hg.add("",a),this.h("itemTemplate",b,a),a=this.g,null!==a&&a.la.ib||this.dA())});
v.defineProperty(D,{xH:"itemTemplateMap"},function(){return this.hg},function(a){var b=this.hg;if(b!==a){v.A(a,na,D,"itemTemplateMap");for(var c=a.i;c.next();){var d=c.value;(d instanceof R||d.Rf)&&v.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+d)}this.hg=a;this.h("itemTemplateMap",b,a);a=this.g;null!==a&&a.la.ib||this.dA()}});
v.defineProperty(D,{XJ:"itemCategoryProperty"},function(){return this.Wn},function(a){var b=this.Wn;b!==a&&("string"!==typeof a&&"function"!==typeof a&&v.Dd(a,"string or function",D,"itemCategoryProperty"),this.Wn=a,this.h("itemCategoryProperty",b,a))});
function jo(a,b){if(null===b)return"";var c=a.Wn,d="";if("function"===typeof c)d=c(b);else if("string"===typeof c&&"object"===typeof b){if(""===c)return"";d=v.qb(b,c)}else return"";if(void 0===d)return"";if("string"===typeof d)return d;v.k("Panel.getCategoryForItemData found a non-string category for "+b+": "+d);return""}var ko=!1,lo=null;v.defineProperty(D,{SJ:"isAtomic"},function(){return this.Qg},function(a){var b=this.Qg;b!==a&&(v.j(a,"boolean",D,"isAtomic"),this.Qg=a,this.h("isAtomic",b,a))});
v.defineProperty(D,{bE:"isClipping"},function(){return this.Oq},function(a){var b=this.Oq;b!==a&&(v.j(a,"boolean",D,"isClipping"),this.Oq=a,this.h("isClipping",b,a))});function ug(){v.dc(this);this.Xg=null;this.iv=!0;this.Oc=0;this.Ve=NaN;this.Ej=0;this.Cj=Infinity;this.Ae=fc;this.kb=this.Qa=0;this.sc=null;this.rs=mo;this.Qh=tm;this.ls=this.Ij=null;this.ms=NaN;this.Ib=this.Jh=null;this.lq=!1}v.ea("RowColumnDefinition",ug);
ug.prototype.copy=function(){var a=new ug;a.iv=this.iv;a.Oc=this.Oc;a.Ve=this.Ve;a.Ej=this.Ej;a.Cj=this.Cj;a.Ae=this.Ae;a.Qa=this.Qa;a.kb=this.kb;a.Qh=this.Qh;a.rs=this.rs;a.Ij=null===this.Ij?null:this.Ij.S();a.ls=this.ls;a.ms=this.ms;a.Jh=null;null!==this.Jh&&(a.Jh=v.fl(this.Jh));a.Ib=this.Ib;a.lq=this.lq;a.sc=this.sc;return a};
ug.prototype.Zs=function(a){v.A(a,ug,ug,"copyFrom:pd");a.ee?this.height=a.height:this.width=a.width;this.aj=a.aj;this.gf=a.gf;this.alignment=a.alignment;this.stretch=a.stretch;this.au=a.au;this.Ij=null===a.Ij?null:a.Ij.S();this.Dp=a.Dp;this.Ep=a.Ep;this.Jh=null;a.Jh&&(this.Jh=v.fl(a.Jh));this.background=a.background;this.lz=a.lz;this.sc=a.sc};ug.prototype.toString=function(){return"RowColumnDefinition "+(this.ee?"(Row ":"(Column ")+this.index+") #"+v.ld(this)};var mo;
ug.Default=mo=v.p(ug,"Default",0);var Vn;ug.None=Vn=v.p(ug,"None",1);var On;ug.ProportionalExtra=On=v.p(ug,"ProportionalExtra",2);ug.prototype.Bl=function(a){this.Xg=a};ug.prototype.computeEffectiveSpacingTop=ug.prototype.rD=function(){var a=0;if(0!==this.index){var b=this.Xg,c=this.Dp;null===c&&null!==b&&(c=this.ee?b.mi:b.xh);null!==c&&(a=this.Ep,isNaN(a)&&(a=null!==b?this.ee?b.zh:b.yh:0))}b=this.VE;if(null===b)if(b=this.Xg,null!==b)b=b.kj;else return a;return a+(this.ee?b.top:b.left)};
ug.prototype.computeEffectiveSpacing=ug.prototype.Ie=function(){var a=0;if(0!==this.index){var b=this.Xg,c=this.Dp;null===c&&null!==b&&(c=this.ee?b.mi:b.xh);null!==c&&(a=this.Ep,isNaN(a)&&(a=null!==b?this.ee?b.zh:b.yh:0))}b=this.VE;if(null===b)if(b=this.Xg,null!==b)b=b.kj;else return a;return a+(this.ee?b.top+b.bottom:b.left+b.right)};
ug.prototype.$c=function(a,b,c,d,e){var f=this.Xg;if(null!==f&&(f.Lc(Af,a,this,b,c,d,e),null!==this.sc&&(b=f.g,null!==b&&!b.we&&(f=f.Uo(),null!==f&&(f=f.data,null!==f)))))for(c=this.sc.i;c.next();)c.value.vx(this,f,a,b)};v.u(ug,{R:"panel"},function(){return this.Xg});v.defineProperty(ug,{ee:"isRow"},function(){return this.iv},function(a){this.iv=a});v.defineProperty(ug,{index:"index"},function(){return this.Oc},function(a){this.Oc=a});
v.defineProperty(ug,{height:"height"},function(){return this.Ve},function(a){var b=this.Ve;b!==a&&(0>a&&v.va(a,">= 0",ug,"height"),this.Ve=a,this.Ia=this.Qa,null!==this.R&&this.R.N(),this.$c("height",b,a))});v.defineProperty(ug,{width:"width"},function(){return this.Ve},function(a){var b=this.Ve;b!==a&&(0>a&&v.va(a,">= 0",ug,"width"),this.Ve=a,this.Ia=this.Qa,null!==this.R&&this.R.N(),this.$c("width",b,a))});
v.defineProperty(ug,{aj:"minimum"},function(){return this.Ej},function(a){var b=this.Ej;b!==a&&((0>a||!isFinite(a))&&v.va(a,">= 0",ug,"minimum"),this.Ej=a,this.Ia=this.Qa,null!==this.R&&this.R.N(),this.$c("minimum",b,a))});v.defineProperty(ug,{gf:"maximum"},function(){return this.Cj},function(a){var b=this.Cj;b!==a&&(0>a&&v.va(a,">= 0",ug,"maximum"),this.Cj=a,this.Ia=this.Qa,null!==this.R&&this.R.N(),this.$c("maximum",b,a))});
v.defineProperty(ug,{alignment:"alignment"},function(){return this.Ae},function(a){var b=this.Ae;b.K(a)||(this.Ae=a.S(),null!==this.R&&this.R.N(),this.$c("alignment",b,a))});v.defineProperty(ug,{stretch:"stretch"},function(){return this.Qh},function(a){var b=this.Qh;b!==a&&(this.Qh=a,null!==this.R&&this.R.N(),this.$c("stretch",b,a))});
v.defineProperty(ug,{VE:"separatorPadding"},function(){return this.Ij},function(a){"number"===typeof a&&(a=new cb(a));var b=this.Ij;null!==a&&null!==b&&b.K(a)||(null!==a&&(a=a.S()),this.Ij=a,null!==this.R&&this.R.N(),this.$c("separatorPadding",b,a))});v.defineProperty(ug,{Dp:"separatorStroke"},function(){return this.ls},function(a){var b=this.ls;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.ls=a,null!==this.R&&this.R.N(),this.$c("separatorStroke",b,a))});
v.defineProperty(ug,{Ep:"separatorStrokeWidth"},function(){return this.ms},function(a){var b=this.ms;b!==a&&(this.ms=a,null!==this.R&&this.R.N(),this.$c("separatorStrokeWidth",b,a))});
v.defineProperty(ug,{wI:"separatorDashArray"},function(){return this.Jh},function(a){var b=this.Jh;if(b!==a){null===a||Array.isArray(a)||v.Dd(a,"Array",ug,"separatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("separatorDashArray value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Jh=a;null!==this.R&&this.R.pa();this.$c("separatorDashArray",b,a)}});
v.defineProperty(ug,{background:"background"},function(){return this.Ib},function(a){var b=this.Ib;b!==a&&(null===a||"string"===typeof a||a instanceof ha)&&(a instanceof ha&&a.freeze(),this.Ib=a,null!==this.R&&this.R.pa(),this.$c("background",b,a))});v.defineProperty(ug,{lz:"coversSeparators"},function(){return this.lq},function(a){var b=this.lq;b!==a&&(v.j(a,"boolean",ug,"coversSeparators"),this.lq=a,null!==this.R&&this.R.pa(),this.$c("coversSeparators",b,a))});
v.defineProperty(ug,{au:"sizing"},function(){return this.rs},function(a){var b=this.rs;b!==a&&(this.rs=a,null!==this.R&&this.R.N(),this.$c("sizing",b,a))});function Un(a){if(a.au===mo){var b=a.Xg;return a.ee?b.rI:b.rG}return a.au}v.defineProperty(ug,{Ia:"actual"},function(){return this.Qa},function(a){this.Qa=isNaN(this.Ve)?Math.max(Math.min(this.Cj,a),this.Ej):Math.max(Math.min(this.Cj,this.Ve),this.Ej)});
v.defineProperty(ug,{total:"total"},function(){return this.Qa+this.Ie()},function(a){this.Qa=isNaN(this.Ve)?Math.max(Math.min(this.Cj,a),this.Ej):Math.max(Math.min(this.Cj,this.Ve),this.Ej);this.Qa=Math.max(0,this.Qa-this.Ie())});v.defineProperty(ug,{position:"position"},function(){return this.kb},function(a){this.kb=a});
ug.prototype.bind=ug.prototype.bind=function(a){a.pg=this;var b=this.R;if(null!==b){var c=b.Uo();null!==c&&$m(c)&&v.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a+" on "+b)}null===this.sc&&(this.sc=new I(Ag));this.sc.add(a)};
function Y(){G.call(this);this.Kf=this.bb=null;this.Jn="None";this.Hq=tm;this.Dc=this.pd="black";this.Rh=1;this.wo="butt";this.yo="miter";this.rm=10;this.xo=null;this.le=0;this.Ph=this.Oh=fc;this.Ir=this.Hr=NaN;this.Pq=!1;this.Kr=null;this.Mn=this.Co="None";this.Mq=1}v.Ja(Y,G);v.ea("Shape",Y);
Y.prototype.cloneProtected=function(a){G.prototype.cloneProtected.call(this,a);a.bb=this.bb;a.Jn=this.Jn;a.Hq=this.Hq;a.Kf=this.Kf;a.pd=this.pd;a.Dc=this.Dc;a.Rh=this.Rh;a.wo=this.wo;a.yo=this.yo;a.rm=this.rm;null!==this.xo&&(a.xo=v.fl(this.xo));a.le=this.le;a.Oh=this.Oh.S();a.Ph=this.Ph.S();a.Hr=this.Hr;a.Ir=this.Ir;a.Pq=this.Pq;a.Kr=this.Kr;a.Co=this.Co;a.Mn=this.Mn;a.Mq=this.Mq};Y.prototype.toString=function(){return"Shape("+("None"!==this.Ab?this.Ab:"None"!==this.Kp?this.Kp:this.uz)+")#"+v.ld(this)};
function no(a,b,c,d){var e=c.length;if(!(4>e)){for(var f=d.Ca,h=Math.max(1,f.width),f=f.height,k=c[0],l=c[1],m=0,n=0,p=0,q=0,r=0,s=0,t=q=0,u=v.jb(),x=2;x<e;x+=2)m=c[x],n=c[x+1],p=m-k,q=n-l,0===p&&(p=.001),r=q/p,s=Math.atan2(q,p),q=Math.sqrt(p*p+q*q),u.push([p,s,r,q]),t+=q,k=m,l=n;k=c[0];l=c[1];p=d.Ca.width;d instanceof Y&&(p-=d.lb);1>p&&(p=1);for(var e=c=p,m=h/2,n=0===m?!1:!0,x=0,q=u[x],p=q[0],s=q[1],r=q[2],q=q[3],w=0;.1<=t;){0===w&&(n?(e=c,e-=m,t-=m,n=!1):e=c,0===e&&(e=1));if(e>t){v.sa(u);return}e>
q?(w=e-q,e=q):w=0;var y=Math.sqrt(e*e/(1+r*r));0>p&&(y=-y);k+=y;l+=r*y;a.translate(k,l);a.rotate(s);a.translate(-(h/2),-(f/2));0===w&&d.Yj(a,b);a.translate(h/2,f/2);a.rotate(-s);a.translate(-k,-l);t-=e;q-=e;if(0!==w){x++;if(x===u.length){v.sa(u);return}q=u[x];p=q[0];s=q[1];r=q[2];q=q[3];e=w}}v.sa(u)}}
Y.prototype.Yj=function(a,b){if(null!==this.Dc||null!==this.pd){null!==this.pd&&Nm(this,a,this.pd,!0,!1);null!==this.Dc&&Nm(this,a,this.Dc,!1,!1);var c=this.Rh;if(0===c){var d=this.Y;d instanceof Vg&&d.type===Di&&"Selection"===d.fc&&d.Zb instanceof Y&&d.Mf.Ye()===d.Zb&&(c=d.Zb.lb)}a.lineWidth=c;a.lineJoin=this.yo;a.lineCap=this.wo;a.miterLimit=this.rm;var e=!1;this.Y&&b.Ui("drawShadows")&&(e=this.Y.wl);var f=!0;null!==this.Dc&&null===this.pd&&(f=!1);var d=!1,h=!0,k=this.dF;null!==k&&(d=!0,h=a.qz(k,
this.le));var l=this.bb;if(null!==l){if(l.ia===Ie)a.beginPath(),d&&!h?Am(a,l.vc,l.Cc,l.vb,l.Bb,k,this.le):(a.moveTo(l.vc,l.Cc),a.lineTo(l.vb,l.Bb)),null!==this.pd&&a.vg(this.pd),0!==c&&null!==this.Dc&&a.dj();else if(l.ia===Je){var m=l.vc,n=l.Cc,p=l.vb,q=l.Bb,l=Math.min(m,p),r=Math.min(n,q),m=Math.abs(p-m),n=Math.abs(q-n);null!==this.pd&&(a.beginPath(),a.rect(l,r,m,n),a.vg(this.pd));if(null!==this.Dc){var s=p=0,t=0;f&&e&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0);d&&!h?(h=v.jb(),h.push(l),h.push(r),h.push(l+m),h.push(r),h.push(l+m),h.push(r+n),h.push(l),h.push(r+n),h.push(l),h.push(r),a.beginPath(),oo(a,h,k,this.le),a.dj(),v.sa(h)):0!==c&&(a.beginPath(),a.rect(l,r,m,n),a.dj());f&&e&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t)}}else if(l.ia===Ke)m=l.vc,n=l.Cc,p=l.vb,q=l.Bb,l=Math.abs(p-m)/2,r=Math.abs(q-n)/2,m=Math.min(m,p)+l,n=Math.min(n,q)+r,a.beginPath(),a.moveTo(m,n-r),a.bezierCurveTo(m+$c*l,n-r,m+l,n-$c*r,m+l,n),a.bezierCurveTo(m+
l,n+$c*r,m+$c*l,n+r,m,n+r),a.bezierCurveTo(m-$c*l,n+r,m-l,n+$c*r,m-l,n),a.bezierCurveTo(m-l,n-$c*r,m-$c*l,n-r,m,n-r),a.closePath(),null!==this.pd&&a.vg(this.pd),d&&!h&&(h=v.jb(),Zd(m,n-r,m+$c*l,n-r,m+l,n-$c*r,m+l,n,.5,h),Zd(m+l,n,m+l,n+$c*r,m+$c*l,n+r,m,n+r,.5,h),Zd(m,n+r,m-$c*l,n+r,m-l,n+$c*r,m-l,n,.5,h),Zd(m-l,n,m-l,n-$c*r,m-$c*l,n-r,m,n-r,.5,h),a.beginPath(),oo(a,h,k,this.le),v.sa(h)),0!==c&&null!==this.Dc&&(f&&e?(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0,a.dj(),a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t):a.dj());else if(l.ia===Fe){r=l.mj;n=r.length;for(q=0;q<n;q++){m=r.n[q];a.beginPath();a.moveTo(m.Aa,m.xa);for(var p=m.sb.n,s=p.length,u=null,t=0;t<s;t++){var x=p[t];switch(x.ia){case ff:a.moveTo(x.I,x.J);break;case Ye:a.lineTo(x.I,x.J);break;case gf:a.bezierCurveTo(x.sd,x.Fe,x.Yg,x.ng,x.vb,x.Bb);break;case hf:a.quadraticCurveTo(x.sd,x.Fe,x.vb,x.Bb);break;case jf:if(x.radiusX===x.radiusY)u=Math.PI/180,a.arc(x.sd,x.Fe,x.radiusX,
x.xe*u,(x.xe+x.Af)*u,0>x.Af);else{var u=lf(x,m),w=u.length;if(0===w){a.lineTo(x.na,x.ua);break}for(var y=0;y<w;y++){var B=u[y];0===y&&a.lineTo(B[0],B[1]);a.bezierCurveTo(B[2],B[3],B[4],B[5],B[6],B[7])}}break;case kf:y=w=0;if(null!==u&&u.type===jf){u=lf(u,m);B=u.length;if(0===B){a.lineTo(x.na,x.ua);break}u=u[B-1]||null;null!==u&&(w=u[6],y=u[7])}else w=null!==u?u.I:m.Aa,y=null!==u?u.J:m.xa;u=mf(x,m,w,y);w=u.length;if(0===w){a.lineTo(x.na,x.ua);break}for(y=0;y<w;y++)B=u[y],a.bezierCurveTo(B[2],B[3],
B[4],B[5],B[6],B[7]);break;default:v.k("Segment not of valid type: "+x.ia)}x.Eh&&a.closePath();u=x}e?(t=s=p=0,m.Tn?(!0===m.Sl&&null!==this.pd?(a.vg(this.pd),f=!0):f=!1,0!==c&&null!==this.Dc&&(f&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!h||a.dj(),f&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t))):(f&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),!0===m.Sl&&null!==this.pd&&
a.vg(this.pd),0!==c&&null!==this.Dc&&(d&&!h||a.dj()),f&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t))):(!0===m.Sl&&null!==this.pd&&a.vg(this.pd),0===c||null===this.Dc||d&&!h||a.dj())}if(d&&!h)for(c=f,f=l.mj,h=f.length,l=0;l<h;l++){r=f.n[l];a.beginPath();n=v.jb();n.push(r.Aa);n.push(r.xa);q=r.Aa;m=r.xa;p=q;s=m;t=r.sb.n;x=t.length;for(u=0;u<x;u++){w=t[u];switch(w.ia){case ff:oo(a,n,k,this.le);n.length=0;n.push(w.I);n.push(w.J);q=w.I;m=w.J;p=q;s=m;break;case Ye:n.push(w.I);n.push(w.J);q=w.I;
m=w.J;break;case gf:Zd(q,m,w.sd,w.Fe,w.Yg,w.ng,w.vb,w.Bb,.5,n);q=w.I;m=w.J;break;case hf:ce(q,m,w.sd,w.Fe,w.vb,w.Bb,.5,n);q=w.I;m=w.J;break;case jf:y=lf(w,r);B=y.length;if(0===B){n.push(w.na);n.push(w.ua);q=w.na;m=w.ua;break}for(var H=0;H<B;H++){var C=y[H];Zd(q,m,C[2],C[3],C[4],C[5],C[6],C[7],.5,n);q=C[6];m=C[7]}break;case kf:y=mf(w,r,q,m);B=y.length;if(0===B){n.push(w.na);n.push(w.ua);q=w.na;m=w.ua;break}for(H=0;H<B;H++)C=y[H],Zd(q,m,C[2],C[3],C[4],C[5],C[6],C[7],.5,n),q=C[6],m=C[7];break;default:v.k("Segment not of valid type: "+
w.ia)}w.Eh&&(n.push(p),n.push(s),oo(a,n,k,this.le))}oo(a,n,k,this.le);v.sa(n);null!==this.Dc&&(q=n=r=0,c&&e&&(r=a.shadowOffsetX,n=a.shadowOffsetY,q=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.dj(),c&&e&&(a.shadowOffsetX=r,a.shadowOffsetY=n,a.shadowBlur=q))}}d&&a.oz();if(null!==this.Xw){d=this.Xw;kj(d,Infinity,Infinity);k=d.Ca;d.Ec(0,0,k.width,k.height);c=this.fh;a.save();a.beginPath();k=v.jb();if(c.type===Ie)k.push(c.Aa),k.push(c.xa),k.push(c.I),k.push(c.J),no(a,b,k,d);else if(c.type===
Fe)for(h=c.Ub.i;h.next();){l=h.value;k.length=0;k.push(l.Aa);k.push(l.xa);f=l.Aa;r=l.xa;n=f;q=r;m=l.sb.n;p=m.length;for(s=0;s<p;s++){t=m[s];switch(t.ia){case ff:no(a,b,k,d);k.length=0;k.push(t.I);k.push(t.J);f=t.I;r=t.J;n=f;q=r;break;case Ye:k.push(t.I);k.push(t.J);f=t.I;r=t.J;break;case gf:Zd(f,r,t.sd,t.Fe,t.Yg,t.ng,t.vb,t.Bb,.5,k);f=t.I;r=t.J;break;case hf:ce(f,r,t.sd,t.Fe,t.vb,t.Bb,.5,k);f=t.I;r=t.J;break;case jf:c=lf(t,l);e=c.length;if(0===e){k.push(t.na);k.push(t.ua);f=t.na;r=t.ua;break}for(x=
0;x<e;x++)u=c[x],Zd(f,r,u[2],u[3],u[4],u[5],u[6],u[7],.5,k),f=u[6],r=u[7];break;case kf:c=mf(t,l,f,r);e=c.length;if(0===e){k.push(t.na);k.push(t.ua);f=t.na;r=t.ua;break}for(x=0;x<e;x++)u=c[x],Zd(f,r,u[2],u[3],u[4],u[5],u[6],u[7],.5,k),f=u[6],r=u[7];break;default:v.k("Segment not of valid type: "+t.ia)}t.Eh&&(k.push(n),k.push(q),no(a,b,k,d))}no(a,b,k,d)}else if(c.type===Je)k.push(c.Aa),k.push(c.xa),k.push(c.I),k.push(c.xa),k.push(c.I),k.push(c.J),k.push(c.Aa),k.push(c.J),k.push(c.Aa),k.push(c.xa),
no(a,b,k,d);else if(c.type===Ke){h=new Ge;h.Aa=c.I;h.xa=(c.xa+c.J)/2;f=new wf(jf);f.xe=0;f.Af=360;f.na=(c.Aa+c.I)/2;f.ua=(c.xa+c.J)/2;f.radiusX=Math.abs(c.Aa-c.I)/2;f.radiusY=Math.abs(c.xa-c.J)/2;h.add(f);c=lf(f,h);e=c.length;if(0===e)k.push(f.na),k.push(f.ua);else for(f=h.Aa,r=h.xa,x=0;x<e;x++)u=c[x],Zd(f,r,u[2],u[3],u[4],u[5],u[6],u[7],.5,k),f=u[6],r=u[7];no(a,b,k,d)}v.sa(k);a.restore();Zc(a,!1)}}}};
function oo(a,b,c,d){var e=b.length;if(!(4>e)){var f=.001,h=c.length,k=b[0],l=b[1];if(4===e)Am(a,k,l,b[2],b[3],c,d);else{a.moveTo(k,l);for(var m=f=0,n=0,p=0,q=0,r=p=0,s=v.jb(),t=2;t<e;t+=2)f=b[t],m=b[t+1],n=f-k,p=m-l,0===n&&(n=.001),q=p/n,p=Math.sqrt(n*n+p*p),s.push([n,q,p]),r+=p,k=f,l=m;k=b[0];l=b[1];b=0;for(var e=!0,f=c[b%h],m=0!==d,t=0,p=s[t],n=p[0],q=p[1],p=p[2],u=0;.1<=r;){0===u&&(f=c[b%h],b++,m&&(d%=f,f-=d,m=!1));f>r&&(f=r);f>p?(u=f-p,f=p):u=0;var x=Math.sqrt(f*f/(1+q*q));0>n&&(x=-x);k+=x;l+=
q*x;e?a.lineTo(k,l):a.moveTo(k,l);r-=f;p-=f;if(0!==u){t++;if(t===s.length){v.sa(s);return}p=s[t];n=p[0];q=p[1];p=p[2];f=u}else e=!e}v.sa(s)}}}Y.prototype.getDocumentPoint=Y.prototype.Xa=function(a,b){void 0===b&&(b=new z);a.se()&&v.k("getDocumentPoint Spot must be a real, specific Spot, not: "+a.toString());var c=this.Ha,d=this.lb;b.m(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY);this.Zg.ub(b);return b};
Y.prototype.Wj=function(a,b){var c=this.fh;if(null===c||null===this.fill&&null===this.stroke)return!1;var d=c.mb,e=this.lb/2;c.type!==Ie||b||(e+=2);var f=v.ag();f.assign(d);f.Qf(e+2,e+2);if(!f.Fa(a))return v.Vb(f),!1;d=e+1E-4;if(c.type===Ie){if(null===this.stroke)return!1;d=(c.I-c.Aa)*(a.x-c.Aa)+(c.J-c.xa)*(a.y-c.xa);if(0>(c.Aa-c.I)*(a.x-c.I)+(c.xa-c.J)*(a.y-c.J)||0>d)return!1;v.Vb(f);return Md(c.Aa,c.xa,c.I,c.J,e,a.x,a.y)}if(c.type===Je){var h=c.Aa,k=c.xa,l=c.I,m=c.J;f.x=Math.min(h,l);f.y=Math.min(k,
m);f.width=Math.abs(l-h);f.height=Math.abs(m-k);if(null===this.fill){f.Qf(-d,-d);if(f.Fa(a))return v.Vb(f),!1;f.Qf(d,d)}null!==this.stroke&&f.Qf(e,e);e=f.Fa(a);v.Vb(f);return e}if(c.type===Ke){var h=c.Aa,k=c.xa,l=c.I,m=c.J,c=Math.min(h,l),n=Math.min(k,m),h=Math.abs(l-h)/2,k=Math.abs(m-k)/2,c=a.x-(c+h),n=a.y-(n+k);if(null===this.fill){h-=d;k-=d;if(0>=h||0>=k||1>=c*c/(h*h)+n*n/(k*k))return v.Vb(f),!1;h+=d;k+=d}null!==this.stroke&&(h+=e,k+=e);v.Vb(f);return 0>=h||0>=k?!1:1>=c*c/(h*h)+n*n/(k*k)}if(c.type===
Fe)return v.Vb(f),null===this.fill?vf(c,a.x,a.y,e):c.Fa(a,e,1<this.lb,b);v.k("Unknown Geometry type: "+c.type);return!1};
Y.prototype.mp=function(a,b,c,d){var e=this.za,f=this.Rh;a=Math.max(a,0);b=Math.max(b,0);var h;if(null!==this.Kf)h=this.fh.mb;else{var k=this.Ab,l=Id[k];if(void 0===l){var m=po[k];"string"===typeof m&&(m=po[m]);"function"===typeof m?(l=m(null,100,100),Id[k]=l):v.k("Unsupported Figure: "+k)}h=l.mb}var k=h.width,l=h.height,m=h.width,n=h.height;switch(Fm(this,!0)){case Si:d=c=0;break;case He:m=Math.max(a-f,0);n=Math.max(b-f,0);break;case vm:m=Math.max(a-f,0);d=0;break;case um:c=0,n=Math.max(b-f,0)}isFinite(e.width)&&
(m=e.width);isFinite(e.height)&&(n=e.height);e=this.xf;h=this.kh;c=Math.max(c,h.width)-f;d=Math.max(d,h.height)-f;m=Math.min(e.width,m);n=Math.min(e.height,n);m=isFinite(m)?Math.max(c,m):Math.max(k,c);n=isFinite(n)?Math.max(d,n):Math.max(l,d);c=Ti(this);switch(c){case Si:break;case He:k=m;l=n;break;case Ui:c=Math.min(m/k,n/l);isFinite(c)||(c=1);k*=c;l*=c;break;default:v.k(c+" is not a valid geometryStretch.")}if(null!==this.Kf)k=Math.max(k,.01),l=Math.max(l,.01),h=null!==this.Kf?this.Kf:this.bb,e=
k,d=l,c=h.copy(),h=h.mb,e/=h.width,d/=h.height,isFinite(e)||(e=1),isFinite(d)||(d=1),1===e&&1===d||c.scale(e,d),this.bb=c;else if(null===this.bb||this.bb.Sn!==a-f||this.bb.Qn!==b-f)this.bb=Y.makeGeometry(this,k,l);h=this.bb.mb;Infinity===a||Infinity===b?Cm(this,h.x-f/2,h.y-f/2,0===a&&0===k?0:h.width+f,0===b&&0===l?0:h.height+f):Cm(this,-(f/2),-(f/2),m+f,n+f)};
function Wn(a,b,c,d){if(!1!==el(a)){a.jd.Pa();var e=a.Rh;0===e&&d instanceof Vg&&d.type===Di&&d.Zb instanceof Y&&(e=d.Zb.lb);e*=a.Tb;d instanceof W&&null!==d.bb?(b=d.bb.mb,Cm(a,b.x-e/2,b.y-e/2,b.width+e,b.height+e)):Cm(a,-(e/2),-(e/2),b+e,c+e);a.jd.freeze();a.jd.G()||v.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.jd.toString());Qk(a,!1)}}function Ti(a){var b=a.wz;return null!==a.Kf?b===tm?He:b:b===tm?Id[a.Ab].Kd:b}Y.prototype.Ni=function(a,b,c,d){Gm(this,a,b,c,d)};
Y.prototype.getNearestIntersectionPoint=Y.prototype.RD=function(a,b,c){return this.Zo(a.x,a.y,b.x,b.y,c)};
Y.prototype.Zo=function(a,b,c,d,e){var f=this.transform,h=1/(f.m11*f.m22-f.m12*f.m21),k=f.m22*h,l=-f.m12*h,m=-f.m21*h,n=f.m11*h,p=h*(f.m21*f.dy-f.m22*f.dx),q=h*(f.m12*f.dx-f.m11*f.dy),f=a*k+b*m+p,h=a*l+b*n+q,k=c*k+d*m+p,l=c*l+d*n+q,m=this.lb/2,p=this.bb;null===p&&(kj(this,Infinity,Infinity),p=this.bb);q=p.mb;n=!1;if(p.type===Ie)if(1.5>=this.lb)n=fe(p.vc,p.Cc,p.vb,p.Bb,f,h,k,l,e);else{var r=0,s=0;p.vc===p.vb?(r=m,s=0):(b=(p.Bb-p.Cc)/(p.vb-p.vc),s=m/Math.sqrt(1+b*b),r=s*b);d=v.jb();b=new z;fe(p.vc+
r,p.Cc+s,p.vb+r,p.Bb+s,f,h,k,l,b)&&d.push(b);b=new z;fe(p.vc-r,p.Cc-s,p.vb-r,p.Bb-s,f,h,k,l,b)&&d.push(b);b=new z;fe(p.vc+r,p.Cc+s,p.vc-r,p.Cc-s,f,h,k,l,b)&&d.push(b);b=new z;fe(p.vb+r,p.Bb+s,p.vb-r,p.Bb-s,f,h,k,l,b)&&d.push(b);b=d.length;if(0===b)return v.sa(d),!1;n=!0;s=Infinity;for(r=0;r<b;r++){var k=d[r],t=(k.x-f)*(k.x-f)+(k.y-h)*(k.y-h);t<s&&(s=t,e.x=k.x,e.y=k.y)}v.sa(d)}else if(p.type===Je)b=q.x-m,n=ge(b,q.y-m,q.x+q.width+m,q.y+q.height+m,f,h,k,l,e);else if(p.type===Ke)a:if(b=q.copy().Qf(m,
m),0===b.width)n=fe(b.x,b.y,b.x,b.y+b.height,f,h,k,l,e);else if(0===b.height)n=fe(b.x,b.y,b.x+b.width,b.y,f,h,k,l,e);else{a=b.width/2;var u=b.height/2;d=b.x+a;b=b.y+u;c=9999;f!==k&&(c=(h-l)/(f-k));if(9999>Math.abs(c)){n=h-b-c*(f-d);if(0>a*a*c*c+u*u-n*n){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(a*a*c*c+u*u-n*n);k=(-(a*a*c*n)+a*u*m)/(u*u+a*a*c*c)+d;a=(-(a*a*c*n)-a*u*m)/(u*u+a*a*c*c)+d;l=c*(k-d)+n+b;b=c*(a-d)+n+b;d=Math.abs((f-k)*(f-k))+Math.abs((h-l)*(h-l));h=Math.abs((f-a)*(f-a))+Math.abs((h-b)*(h-
b));d<h?(e.x=k,e.y=l):(e.x=a,e.y=b)}else{k=u*u;l=f-d;k-=k/(a*a)*l*l;if(0>k){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(k);l=b+m;b-=m;d=Math.abs(l-h);h=Math.abs(b-h);d<h?(e.x=f,e.y=l):(e.x=f,e.y=b)}n=!0}else if(p.type===Fe){var x=0,w=0,y=t=0,q=v.L(),r=k-f,s=l-h,s=r*r+s*s;e.x=k;e.y=l;for(r=0;r<p.Ub.count;r++)for(var B=p.Ub.n[r],H=B.sb,x=B.Aa,w=B.xa,C=x,T=w,ba=0;ba<H.count;ba++){var U=H.n[ba],M=U.type,t=U.I,y=U.J,aa=!1;switch(M){case ff:C=t;T=y;break;case Ye:aa=qo(x,w,t,y,f,h,k,l,q);break;case gf:var aa=
U.rc,M=U.Kc,Ia=U.mh,oa=U.nh,aa=de(x,w,aa,M,Ia,oa,t,y,f,h,k,l,.5,q);break;case hf:aa=(x+2*U.rc)/3;M=(w+2*U.Kc)/3;Ia=(2*U.rc+t)/3;oa=(2*U.rc+t)/3;aa=de(x,w,aa,M,Ia,oa,t,y,f,h,k,l,.5,q);break;case jf:case kf:M=U.type===jf?lf(U,B):mf(U,B,x,w);Ia=M.length;if(0===Ia){aa=qo(x,w,U.na,U.ua,f,h,k,l,q);break}for(y=0;y<Ia;y++)u=M[y],0===y&&qo(x,w,u[0],u[1],f,h,k,l,q)&&(t=ro(f,h,q,s,e),t<s&&(s=t,n=!0)),de(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],f,h,k,l,.5,q)&&(t=ro(f,h,q,s,e),t<s&&(s=t,n=!0));t=u[6];y=u[7];break;
default:v.k("Unknown Segment type: "+M)}x=t;w=y;aa&&(t=ro(f,h,q,s,e),t<s&&(s=t,n=!0));U.Iw&&(t=C,y=T,qo(x,w,t,y,f,h,k,l,q)&&(t=ro(f,h,q,s,e),t<s&&(s=t,n=!0)))}f=c-a;h=d-b;b=Math.sqrt(f*f+h*h);0!==b&&(f/=b,h/=b);e.x-=f*m;e.y-=h*m;v.v(q)}else v.k("Unknown Geometry type: "+p.type);if(!n)return!1;this.transform.ub(e);return!0};function ro(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function qo(a,b,c,d,e,f,h,k,l){var m=!1,n=(e-h)*(b-d)-(f-k)*(a-c);if(0===n)return!1;l.x=((e*k-f*h)*(a-c)-(e-h)*(a*d-b*c))/n;l.y=((e*k-f*h)*(b-d)-(f-k)*(a*d-b*c))/n;(a>c?a-c:c-a)<(b>d?b-d:d-b)?(e=b<d?b:d,a=b<d?d:b,(l.y>e||Hc(l.y,e))&&(l.y<a||Hc(l.y,a))&&(m=!0)):(e=a<c?a:c,a=a<c?c:a,(l.x>e||Hc(l.x,e))&&(l.x<a||Hc(l.x,a))&&(m=!0));return m}
Y.prototype.containedInRect=Y.prototype.Em=function(a,b){if(void 0===b)return a.Xj(this.U);var c=this.bb;null===c&&(kj(this,Infinity,Infinity),c=this.bb);var c=c.mb,d=this.lb/2,e=!1,f=v.L();f.m(c.x-d,c.y-d);a.Fa(b.ub(f))&&(f.m(c.x-d,c.bottom+d),a.Fa(b.ub(f))&&(f.m(c.right+d,c.bottom+d),a.Fa(b.ub(f))&&(f.m(c.right+d,c.y-d),a.Fa(b.ub(f))&&(e=!0))));v.v(f);return e};
Y.prototype.intersectsRect=Y.prototype.yg=function(a,b){if(this.Em(a,b)||void 0===b&&(b=this.transform,a.Xj(this.U)))return!0;var c=v.rh();c.set(b);c.Dz();var d=a.left,e=a.right,f=a.top,h=a.bottom,k=v.L();k.m(d,f);c.ub(k);if(this.Wj(k,!0))return v.v(k),!0;k.m(e,f);c.ub(k);if(this.Wj(k,!0))return v.v(k),!0;k.m(d,h);c.ub(k);if(this.Wj(k,!0))return v.v(k),!0;k.m(e,h);c.ub(k);if(this.Wj(k,!0))return v.v(k),!0;var l=v.L(),m=v.L();c.set(b);c.wE(this.transform);c.Dz();l.x=e;l.y=f;l.transform(c);k.x=d;k.y=
f;k.transform(c);var n=!1;so(this,k,l,m)?n=!0:(k.x=e,k.y=h,k.transform(c),so(this,k,l,m)?n=!0:(l.x=d,l.y=h,l.transform(c),so(this,k,l,m)?n=!0:(k.x=d,k.y=f,k.transform(c),so(this,k,l,m)&&(n=!0))));v.v(k);v.$e(c);v.v(l);v.v(m);return n};function so(a,b,c,d){if(!a.RD(b,c,d))return!1;a=b.x;b=b.y;var e=c.x;c=c.y;var f=d.x;d=d.y;if(a===e){var h=0;a=0;b<c?(h=b,a=c):(h=c,a=b);return d>=h&&d<=a}a<e?(h=a,a=e):h=e;return f>=h&&f<=a}
Y.prototype.LD=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d+=2)if(b.Ro(a[d],a[d+1])>e)return!0;return!1}if(c&&null!==this.fill&&this.Wj(a,!0))return!0;var e=a.rf(b);b=e;1.5<this.lb&&(e=this.lb/2+Math.sqrt(e),e*=e);var f=this.bb;if(null===f&&(kj(this,Infinity,Infinity),f=this.bb,null===f))return!1;if(!c){var h=f.mb,k=h.x,l=h.y,m=h.x+h.width,h=h.y+h.height;if(Ta(a.x,a.y,k,l)<=e&&Ta(a.x,a.y,m,l)<=e&&Ta(a.x,a.y,k,h)<=e&&Ta(a.x,a.y,m,h)<=e)return!0}k=f.vc;l=f.Cc;m=f.vb;h=f.Bb;if(f.type===
Ie){if(c=Sa(a.x,a.y,k,l,m,h),f=(k-m)*(a.x-m)+(l-h)*(a.y-h),c<=(0<=(m-k)*(a.x-k)+(h-l)*(a.y-l)&&0<=f?e:b))return!0}else{if(f.type===Je)return b=!1,c&&(b=Sa(a.x,a.y,k,l,k,h)<=e||Sa(a.x,a.y,k,l,m,l)<=e||Sa(a.x,a.y,m,l,m,h)<=e||Sa(a.x,a.y,k,h,m,h)<=e),b;if(f.type===Ke){b=a.x-(k+m)/2;var f=a.y-(l+h)/2,n=Math.abs(m-k)/2,p=Math.abs(h-l)/2;if(0===n||0===p)return c=Sa(a.x,a.y,k,l,m,h),c<=e?!0:!1;if(c){if(a=ue(n,p,b,f),a*a<=e)return!0}else return Ta(b,f,-n,0)>=e||Ta(b,f,0,-p)>=e||Ta(b,f,0,p)>=e||Ta(b,f,n,0)>=
e?!1:!0}else if(f.type===Fe){h=f.mb;k=h.x;l=h.y;m=h.x+h.width;h=h.y+h.height;if(a.x>m&&a.x<k&&a.y>h&&a.y<l&&Sa(a.x,a.y,k,l,k,h)>e&&Sa(a.x,a.y,k,l,m,l)>e&&Sa(a.x,a.y,m,h,k,h)>e&&Sa(a.x,a.y,m,h,m,l)>e)return!1;b=Math.sqrt(e);if(c){if(null===this.fill?vf(f,a.x,a.y,b):f.Fa(a,b,!0))return!0}else{c=f.Ub;for(b=0;b<c.count;b++){k=c.n[b];n=k.Aa;p=k.xa;if(a.Ro(n,p)>e)return!1;l=k.sb.n;m=l.length;for(h=0;h<m;h++){var q=l[h];switch(q.type){case ff:case Ye:n=q.I;p=q.J;if(a.Ro(n,p)>e)return!1;break;case gf:f=v.jb();
Zd(n,p,q.rc,q.Kc,q.mh,q.nh,q.I,q.J,.8,f);n=d(f,a);v.sa(f);if(n)return!1;n=q.I;p=q.J;if(a.Ro(n,p)>e)return!1;break;case hf:f=v.jb();ce(n,p,q.rc,q.Kc,q.I,q.J,.8,f);n=d(f,a);v.sa(f);if(n)return!1;n=q.I;p=q.J;if(a.Ro(n,p)>e)return!1;break;case jf:case kf:var r=q.type===jf?lf(q,k):mf(q,k,n,p),s=r.length;if(0===s){n=q.na;p=q.ua;if(a.Ro(n,p)>e)return!1;break}q=null;f=v.jb();for(b=0;b<s;b++)if(q=r[b],f.length=0,Zd(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.8,f),d(f,a))return v.sa(f),!1;v.sa(f);null!==q&&(n=
q[6],p=q[7]);break;default:v.k("Unknown Segment type: "+q.type)}}}return!0}}}return!1};v.defineProperty(Y,{fh:"geometry"},function(){return null!==this.bb?this.bb:this.Kf},function(a){var b=this.bb;if(b!==a){this.Kf=null!==a?this.bb=a.freeze():this.bb=null;var c=this.Y;null!==c&&(c.Aj=NaN);this.N();this.h("geometry",b,a);0!==(this.fa&1024)&&(a=this.Y,null!==a&&Bm(this,a,"geometryString"))}});
v.defineProperty(Y,{VG:"geometryString"},function(){return null===this.fh?"":this.fh.toString()},function(a){a=$e(a);var b=a.normalize();this.fh=a;this.position=a=v.Mb(-b.x,-b.y);v.v(a)});v.defineProperty(Y,{dE:"isGeometryPositioned"},function(){return this.Pq},function(a){var b=this.Pq;b!==a&&(this.Pq=a,this.N(),this.h("isGeometryPositioned",b,a))});Y.prototype.de=function(){this.bb=null};
v.defineProperty(Y,{fill:"fill"},function(){return this.pd},function(a){var b=this.pd;b!==a&&(a instanceof ha&&a.freeze(),this.pd=a,this.pa(),this.h("fill",b,a))});v.defineProperty(Y,{stroke:"stroke"},function(){return this.Dc},function(a){var b=this.Dc;b!==a&&(a instanceof ha&&a.freeze(),this.Dc=a,this.pa(),this.h("stroke",b,a))});
v.defineProperty(Y,{lb:"strokeWidth"},function(){return this.Rh},function(a){var b=this.Rh;if(b!==a)if(0<=a){this.Rh=a;this.N();var c=this.Y;null!==c&&(c.Aj=NaN);this.h("strokeWidth",b,a)}else v.va(a,"value >= 0",Y,"strokeWidth:value")});v.defineProperty(Y,{HK:"strokeCap"},function(){return this.wo},function(a){var b=this.wo;b!==a&&("string"!==typeof a||"butt"!==a&&"round"!==a&&"square"!==a?v.va(a,'"butt", "round", or "square"',Y,"strokeCap"):(this.wo=a,this.pa(),this.h("strokeCap",b,a)))});
v.defineProperty(Y,{JK:"strokeJoin"},function(){return this.yo},function(a){var b=this.yo;b!==a&&("string"!==typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?v.va(a,'"miter", "bevel", or "round"',Y,"strokeJoin"):(this.yo=a,this.pa(),this.h("strokeJoin",b,a)))});v.defineProperty(Y,{KK:"strokeMiterLimit"},function(){return this.rm},function(a){var b=this.rm;if(b!==a)if(1<=a){this.rm=a;this.pa();var c=this.Y;null!==c&&(c.Aj=NaN);this.h("strokeMiterLimit",b,a)}else v.va(a,"value >= 1",Y,"strokeWidth:value")});
v.defineProperty(Y,{dF:"strokeDashArray"},function(){return this.xo},function(a){var b=this.xo;if(b!==a){null===a||Array.isArray(a)||v.Dd(a,"Array",Y,"strokeDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v.k("strokeDashArray:value "+f+" at index "+e+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.xo=a;this.pa();this.h("strokeDashArray",b,a)}});
v.defineProperty(Y,{IK:"strokeDashOffset"},function(){return this.le},function(a){var b=this.le;b!==a&&0<=a&&(this.le=a,this.pa(),this.h("strokeDashOffset",b,a))});v.defineProperty(Y,{Ab:"figure"},function(){return this.Jn},function(a){var b=this.Jn;if(b!==a){var c=po[a];"function"===typeof c?c=a:(c=po[a.toLowerCase()])||v.k("Unknown Shape.figure: "+a);b!==c&&(a=this.Y,null!==a&&(a.Aj=NaN),this.Jn=c,this.Kf=null,this.de(),this.N(),this.h("figure",b,c))}});
v.defineProperty(Y,{Kp:"toArrow"},function(){return this.Co},function(a){var b=this.Co;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=to(a);null===c?v.k("Unknown Shape.toArrow: "+a):b!==c&&(this.Co=c,this.Kf=null,this.de(),this.N(),uo(this),this.h("toArrow",b,c))}});
v.defineProperty(Y,{uz:"fromArrow"},function(){return this.Mn},function(a){var b=this.Mn;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=to(a);null===c?v.k("Unknown Shape.fromArrow: "+a):b!==c&&(this.Mn=c,this.Kf=null,this.de(),this.N(),uo(this),this.h("fromArrow",b,c))}});function uo(a){var b=a.g;null!==b&&b.la.ib||(a.Vt=vo,"None"!==a.Co?(a.ve=-1,a.Uj=uc):"None"!==a.Mn&&(a.ve=0,a.Uj=new L(1-uc.x,uc.y)))}
v.defineProperty(Y,{B:"spot1"},function(){return this.Oh},function(a){v.A(a,L,Y,"spot1");var b=this.Oh;b.K(a)||(this.Oh=a=a.S(),this.N(),this.h("spot1",b,a))});v.defineProperty(Y,{C:"spot2"},function(){return this.Ph},function(a){v.A(a,L,Y,"spot2");var b=this.Ph;b.K(a)||(this.Ph=a=a.S(),this.N(),this.h("spot2",b,a))});v.defineProperty(Y,{Ac:"parameter1"},function(){return this.Hr},function(a){var b=this.Hr;b!==a&&(this.Hr=a,this.de(),this.N(),this.h("parameter1",b,a))});
v.defineProperty(Y,{Mt:"parameter2"},function(){return this.Ir},function(a){var b=this.Ir;b!==a&&(this.Ir=a,this.de(),this.N(),this.h("parameter2",b,a))});v.u(Y,{Ha:"naturalBounds"},function(){if(null!==this.bb)return this.Qc.assign(this.bb.mb),this.Qc;var a=this.za;return new A(0,0,a.width,a.height)});v.defineProperty(Y,{Xw:"pathPattern"},function(){return this.Kr},function(a){var b=this.Kr;b!==a&&(this.Kr=a,this.pa(),this.h("pathPattern",b,a))});
v.defineProperty(Y,{yK:"pathObject"},function(){return this.Xw},function(a){this.Xw=a});v.defineProperty(Y,{wz:"geometryStretch"},function(){return this.Hq},function(a){var b=this.Hq;b!==a&&(v.pb(a,G,Y,"geometryStretch"),this.Hq=a,this.h("geometryStretch",b,a))});v.defineProperty(Y,{interval:"interval"},function(){return this.Mq},function(a){var b=this.Mq;a=Math.floor(a);if(b!==a&&0<=a){this.Mq=a;var c=this.g;null!==c&&this.R===c.$o&&Sk(c);this.N();this.h("interval",b,a)}});
Y.makeGeometry=function(a,b,c){var d=null;if("None"!==a.Kp)d=Jd[a.Kp];else if("None"!==a.uz)d=Jd[a.uz];else{var e=po[a.Ab];"string"===typeof e&&(e=po[e]);void 0===e&&v.k("Unknown Shape.figure: "+a.Ab);d=e(a,b,c);d.Sn=b;d.Qn=c}null===d&&(e=po.Rectangle,"function"===typeof e&&(d=e(a,b,c)));return d};Y.getFigureGenerators=function(){var a=new na("string","function"),b;for(b in po)if(b!==b.toLowerCase()){var c=po[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};
Y.defineFigureGenerator=function(a,b){v.j(a,"string",Y,"defineFigureGenerator:name");"string"===typeof b?""!==b&&po[b]||v.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+b):v.j(b,"function",Y,"defineFigureGenerator:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||v.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);po[a]=b;po[c]=a};
Y.getArrowheadGeometries=function(){var a=new na("string",ve),b;for(b in Jd)if(b!==b.toLowerCase()){var c=Jd[b];c instanceof ve&&a.add(b,c)}a.freeze();return a};
Y.defineArrowheadGeometry=function(a,b){v.j(a,"string",Y,"defineArrowheadGeometry:name");var c=null;"string"===typeof b?(v.j(b,"string",Y,"defineArrowheadGeometry:pathstr"),c=$e(b,!1)):(v.A(b,ve,Y,"defineArrowheadGeometry:pathstr"),c=b);var d=a.toLowerCase();""!==a&&"none"!==d&&a!==d||v.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a);Jd[a]=c;Jd[d]=a};
function bh(){G.call(this);this.me="";this.Dc="black";this.Ah="13px sans-serif";this.tm="start";this.Rq=!0;this.Ul=this.Vl=!1;this.Tk=wo;this.vm=xo;this.qv=this.De=0;this.Ln=this.zy=this.Ay=null;this.Lk=new yo;this.Bq=!1;this.nf=this.Vk=this.As=null;this.Lj=this.Kj=0;this.yi=Infinity;this.lv=0}v.Ja(bh,G);v.ea("TextBlock",bh);var zo=new ta,Ao=0,Bo=new ta,Co=0,Do="...",Eo="",Fo=(new Rc(null)).el;bh.getEllipsis=function(){return Do};bh.setEllipsis=function(a){Do=a;Bo=new ta;Co=0};
bh.prototype.cloneProtected=function(a){G.prototype.cloneProtected.call(this,a);a.me=this.me;a.Dc=this.Dc;a.Ah=this.Ah;a.tm=this.tm;a.Rq=this.Rq;a.Vl=this.Vl;a.Ul=this.Ul;a.Tk=this.Tk;a.vm=this.vm;a.De=this.De;a.qv=this.qv;a.Ay=this.Ay;a.zy=this.zy;a.Ln=this.Ln;a.Lk.Zs(this.Lk);a.Bq=this.Bq;a.As=this.As;a.Vk=this.Vk;a.nf=this.nf;a.Kj=this.Kj;a.Lj=this.Lj;a.yi=this.yi;a.lv=this.lv};
bh.prototype.toString=function(){return 22<this.me.length?'TextBlock("'+this.me.substring(0,20)+'"...)':'TextBlock("'+this.me+'")'};var Go;bh.None=Go=v.p(bh,"None",0);var Ho;bh.WrapFit=Ho=v.p(bh,"WrapFit",1);var xo;bh.WrapDesiredSize=xo=v.p(bh,"WrapDesiredSize",2);var wo;bh.OverflowClip=wo=v.p(bh,"OverflowClip",0);var Io;bh.OverflowEllipsis=Io=v.p(bh,"OverflowEllipsis",1);bh.prototype.N=function(){G.prototype.N.call(this);this.zy=this.Ay=null};
v.defineProperty(bh,{font:"font"},function(){return this.Ah},function(a){var b=this.Ah;b!==a&&(this.Ah=a,this.Ln=null,this.N(),this.h("font",b,a))});bh.isValidFont=function(a){var b=Fo.font;if(a===b||"10px sans-serif"===a)return!0;Fo.font="10px sans-serif";var c;Fo.font=a;var d=Fo.font;if("10px sans-serif"!==d)return Fo.font=b,!0;Fo.font="19px serif";c=Fo.font;Fo.font=a;d=Fo.font;Fo.font=b;return d!==c};
v.defineProperty(bh,{text:"text"},function(){return this.me},function(a){var b=this.me;a=null!==a&&void 0!==a?a.toString():"";b!==a&&(this.me=a,this.N(),this.h("text",b,a))});v.defineProperty(bh,{textAlign:"textAlign"},function(){return this.tm},function(a){var b=this.tm;b!==a&&("start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.tm=a,this.pa(),this.h("textAlign",b,a)):v.va(a,'"start", "end", "left", "right", or "center"',bh,"textAlign"))});
v.u(bh,{Ha:"naturalBounds"},function(){if(!this.Qc.G()){var a=Jo(this,this.me,this.Lk,999999).width,b=Ko(this,a,this.Lk),c=this.za;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);Wa(this.Qc,a,b)}return this.Qc});v.defineProperty(bh,{Mw:"isMultiline"},function(){return this.Rq},function(a){var b=this.Rq;b!==a&&(this.Rq=a,this.N(),this.h("isMultiline",b,a))});
v.defineProperty(bh,{WJ:"isUnderline"},function(){return this.Vl},function(a){var b=this.Vl;b!==a&&(this.Vl=a,this.pa(),this.h("isUnderline",b,a))});v.defineProperty(bh,{VJ:"isStrikethrough"},function(){return this.Ul},function(a){var b=this.Ul;b!==a&&(this.Ul=a,this.pa(),this.h("isStrikethrough",b,a))});v.defineProperty(bh,{vF:"wrap"},function(){return this.vm},function(a){var b=this.vm;b!==a&&(this.vm=a,this.N(),this.h("wrap",b,a))});
v.defineProperty(bh,{overflow:"overflow"},function(){return this.Tk},function(a){var b=this.Tk;b!==a&&(this.Tk=a,this.N(),this.h("overflow",b,a))});v.defineProperty(bh,{stroke:"stroke"},function(){return this.Dc},function(a){var b=this.Dc;b!==a&&(a instanceof ha&&a.freeze(),this.Dc=a,this.pa(),this.h("stroke",b,a))});v.u(bh,{CH:"lineCount"},function(){return this.De});v.defineProperty(bh,{pz:"editable"},function(){return this.Bq},function(a){var b=this.Bq;b!==a&&(this.Bq=a,this.h("editable",b,a))});
v.defineProperty(bh,{eF:"textEditor"},function(){return this.As},function(a){var b=this.As;b!==a&&(a instanceof HTMLElement||v.k("textEditor must be an HTMLElement, not: "+a),this.As=a,this.h("textEditor",b,a))});v.defineProperty(bh,{rz:"errorFunction"},function(){return this.nf},function(a){var b=this.nf;b!==a&&(null!==a&&v.j(a,"function",bh,"errorFunction"),this.nf=a,this.h("errorFunction",b,a))});
bh.prototype.Yj=function(a,b){if(null!==this.Dc&&0!==this.me.length&&null!==this.Ah){var c=this.Ha.width,d=Lo(this);a.textAlign=this.tm;Nm(this,a,this.Dc,!0,!1);(this.Vl||this.Ul)&&Nm(this,a,this.Dc,!1,!1);var e=this.Lk,f=0,h=!1,k=v.Mb(0,0);this.Zg.ub(k);var l=v.Mb(0,d);this.Zg.ub(l);var m=k.rf(l);v.v(k);v.v(l);k=b.scale;8>m*k*k&&(h=!0);b.lf!==a&&(h=!1);!1===b.Ui("textGreeking")&&(h=!1);for(var m=b.Tq,k=this.Kj,l=this.Lj,n=this.De,p=0;p<n;p++){var q=e.kf[p],r=e.Be[p];q>c&&(q=c);var f=f+k,s=r,r=a,
t=f,u=c,x=d,w=0,y=this.tm;"start"===y&&(y=m?"right":"left");"end"===y&&(y=m?"left":"right");h?("left"===y?w=0:"right"===y?w=u-q:"center"===y&&(w=(u-q)/2),r.fillRect(0+w,t+.25*x,q,1)):("left"===y?w=0:"right"===y?w=u:"center"===y&&(w=u/2),r.fillText(s,0+w,t+x-.25*x),s=x/20|0,0===s&&(s=1),"right"===y?w-=q:"center"===y&&(w-=q/2),this.Vl&&(r.beginPath(),r.lineWidth=s,r.moveTo(0+w,t+x-.2*x),r.lineTo(0+w+q,t+x-.2*x),r.stroke()),this.Ul&&(r.beginPath(),r.lineWidth=s,t=t+x-x/2.2|0,0!==s%2&&(t+=.5),r.moveTo(0+
w,t),r.lineTo(0+w+q,t),r.stroke()));f+=d+l}}};
bh.prototype.mp=function(a,b,c,d){this.lv=a;var e=this.Lk;e.reset();var f=0,h=0;if(isNaN(this.za.width)){f=this.me.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===f.length)f=0;else if(this.Mw){for(var k=h=0,l=!1;!l;){var m=f.indexOf("\n",k);-1===m&&(m=f.length,l=!0);k=Mo(f.substr(k,m-k).replace(/^\s+|\s+$/g,""),this.Ah);k>h&&(h=k);k=m+1}f=h}else h=f.indexOf("\n",0),0<=h&&(f=f.substr(0,h)),f=k=Mo(f,this.Ah);f=Math.min(f,a/this.scale);f=Math.max(8,f)}else f=this.za.width;null!==this.R&&(f=Math.min(f,
this.R.xf.width),f=Math.max(f,this.R.kh.width));h=Ko(this,f,e);m=h=isNaN(this.za.height)?Math.min(h,b/this.scale):this.za.height;if(0!==e.Te&&1!==e.Be.length&&this.Tk===Io&&(b=this.Ah,l=this.Tk===Io?No(b):0,k=this.Kj+this.Lj,k=Math.max(0,Lo(this)+k),m=Math.min(this.KH-1,Math.max(Math.floor(m/k+.01)-1,0)),!(m+1>=e.Be.length))){k=e.Be[m];for(a=Math.max(1,a-l);Mo(k,b)>a&&1<k.length;)k=k.substr(0,k.length-1);k+=Do;a=Mo(k,b);e.Be[m]=k;e.Be=e.Be.slice(0,m+1);e.kf[m]=a;e.kf=e.kf.slice(0,m+1);e.Mi=e.Be.length;
e.Te=Math.max(e.Te,a);this.De=e.Mi}if(this.vF===Ho||isNaN(this.za.width))f=e.Te,isNaN(this.za.width)&&(f=Math.max(8,f));f=Math.max(c,f);h=Math.max(d,h);Wa(this.Qc,f,h);Cm(this,0,0,f,h)};bh.prototype.Ni=function(a,b,c,d){Gm(this,a,b,c,d)};
function Jo(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");var e=0,f=0,h=0,k=a.Ah,f=a.Kj+a.Lj,l=Math.max(0,Lo(a)+f),h=a.Tk===Io?No(k):0;if(a.De>=a.yi)return new ia(0,l);if(a.vm===Go){c.Mi=1;f=Mo(b,k);if(0===h||f<=d)return c.Te=f,c.kf.push(c.Te),c.Be.push(b),new ia(f,l);var m=Oo(b);b=b.substr(m.length);for(var n=Oo(b),f=Mo(m+n,k);0<n.length&&f<=d;)m+=n,b=b.substr(n.length),n=Oo(b),f=Mo((m+n).replace(/^\s+|\s+$/g,""),k);m+=n.replace(/^\s+|\s+$/g,"");for(d=Math.max(1,d-h);Mo(m,k)>d&&1<m.length;)m=m.substr(0,
m.length-1);m+=Do;h=Mo(m,k);c.kf.push(h);c.Te=h;c.Be.push(m);return new ia(h,l)}var p=0;0===b.length&&(p=1,c.kf.push(0),c.Be.push(b));for(;0<b.length;){m=Oo(b);for(b=b.substr(m.length);Mo(m,k)>d;){n=1;f=Mo(m.substr(0,n),k);for(h=0;f<=d;)n++,h=f,f=Mo(m.substr(0,n),k);1===n?(c.kf[a.De+p]=f,e=Math.max(e,f)):(c.kf[a.De+p]=h,e=Math.max(e,h));n--;1>n&&(n=1);c.Be[a.De+p]=m.substr(0,n);p++;m=m.substr(n);if(a.De+p>a.yi)break}n=Oo(b);for(f=Mo(m+n,k);0<n.length&&f<=d;)m+=n,b=b.substr(n.length),n=Oo(b),f=Mo((m+
n).replace(/^\s+|\s+$/g,""),k);m=m.replace(/^\s+|\s+$/g,"");if(""!==m&&(0===n.length?(c.kf.push(f),e=Math.max(e,f)):(h=Mo(m,k),c.kf.push(h),e=Math.max(e,h)),c.Be.push(m),p++,a.De+p>a.yi))break}c.Mi=Math.min(a.yi,p);c.Te=Math.max(c.Te,e);return new ia(c.Te,l*c.Mi)}function Oo(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function Mo(a,b){Eo!==b&&(Eo=Fo.font=b);return Fo.measureText(a).width}
function Lo(a){if(null!==a.Ln)return a.Ln;var b=a.Ah;Eo!==b&&(Eo=Fo.font=b);var c=0;void 0!==zo[b]&&5E3>Ao?c=zo[b]:(c=1.3*Fo.measureText("M").width,zo[b]=c,Ao++);return a.Ln=c}function No(a){Eo!==a&&(Eo=Fo.font=a);var b=0;void 0!==Bo[a]&&5E3>Co?b=Bo[a]:(b=Fo.measureText(Do).width,Bo[a]=b,Co++);return b}
function Ko(a,b,c){var d=a.me.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e=a.Kj+a.Lj,e=Math.max(0,Lo(a)+e);if(0===d.length)return c.Te=0,a.De=1,e;if(!a.Mw){var f=d.indexOf("\n",0);0<=f&&(d=d.substr(0,f))}for(var f=0,h=a.De=0,k=-1,l=!1;!l;)k=d.indexOf("\n",h),-1===k&&(k=d.length,l=!0),h<=k&&(h=d.substr(h,k-h),a.vm!==Go?(c.Mi=0,h=Jo(a,h,c,b),f+=h.height,a.De+=c.Mi):(Jo(a,h,c,b),f+=e,a.De++),a.De===a.yi&&(l=!0)),h=k+1;return a.qv=f}
v.defineProperty(bh,{wA:"textValidation"},function(){return this.Vk},function(a){var b=this.Vk;b!==a&&(null!==a&&v.j(a,"function",bh,"textValidation"),this.Vk=a,this.h("textValidation",b,a))});v.defineProperty(bh,{EK:"spacingAbove"},function(){return this.Kj},function(a){var b=this.Kj;b!==a&&(this.Kj=a,this.h("spacingAbove",b,a))});v.defineProperty(bh,{FK:"spacingBelow"},function(){return this.Lj},function(a){var b=this.Lj;b!==a&&(this.Lj=a,this.h("spacingBelow",b,a))});
v.defineProperty(bh,{KH:"maxLines"},function(){return this.yi},function(a){var b=this.yi;b!==a&&(a=Math.floor(a),0>=a&&v.va(a,"> 0",bh,"maxLines"),this.yi=a,this.h("maxLines",b,a),this.N())});v.u(bh,{hK:"metrics"},function(){return this.Lk});function yo(){this.Te=this.Mi=0;this.kf=[];this.Be=[]}yo.prototype.reset=function(){this.Te=this.Mi=0;this.kf=[];this.Be=[]};yo.prototype.Zs=function(a){this.Mi=a.Mi;this.Te=a.Te;this.kf=v.fl(a.kf);this.Be=v.fl(a.Be)};v.u(yo,{sJ:"arrSize"},function(){return this.kf});
v.u(yo,{tJ:"arrText"},function(){return this.Be});v.u(yo,{gK:"maxLineWidth"},function(){return this.Te});function nk(){G.call(this);this.Re=null;this.ts="";this.Jj=Fd;this.Nn=He;this.zo=this.Mj=this.nf=null;this.qy=!1;this.Uu=!0;this.qo=null}v.Ja(nk,G);v.ea("Picture",nk);nk.prototype.cloneProtected=function(a){G.prototype.cloneProtected.call(this,a);a.element=this.Re;a.ts=this.ts;a.Jj=this.Jj.S();a.Nn=this.Nn;a.nf=this.nf;a.Mj=this.Mj;a.Uu=this.Uu;a.qo=this.qo};var Po=new ta,Qo=0,hk=[];
function Ro(){var a=hk;if(0===a.length)for(var b=window.document.getElementsByTagName("canvas"),c=b.length,d=0;d<c;d++){var e=b[d];e.parentElement&&e.parentElement.W&&a.push(e.parentElement.W)}return a}var So;nk.clearCache=So=function(a){void 0===a&&(a="");v.j(a,"string",nk,"clearCache:url");""!==a?Po[a]&&(delete Po[a],Qo--):(Po=new ta,Qo=0)};nk.prototype.toString=function(){return"Picture("+this.source+")#"+v.ld(this)};
v.defineProperty(nk,{element:"element"},function(){return this.Re},function(a){var b=this.Re;if(b!==a){null===a||a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||v.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+a);this.qy=a instanceof HTMLCanvasElement;this.Re=a;if(null!==a)if(!0===a.complete||void 0===a.complete)a.Zu instanceof Event&&null!==this.nf&&this.nf(this,a.Zu),!0===a.ty&&null!==this.Mj&&this.Mj(this,null),a.ty=!0,this.za.G()||
(Qk(this,!1),this.N());else{var c=this;a.HB||(a.addEventListener("load",function(b){To(a,b);c.za.G()||(Qk(c,!1),c.N())}),a.addEventListener("error",function(b){Uo(a,b)}),a.HB=!0)}this.h("element",b,a);this.pa()}});
v.defineProperty(nk,{source:"source"},function(){return this.ts},function(a){var b=this.ts;if(b!==a){v.j(a,"string",nk,"source");this.ts=a;var c=Po,d=this.g;if(void 0!==c[a])var e=c[a].Io[0].source;else{30<Qo&&(So(),c=Po);var e=v.createElement("img"),f=this;e.addEventListener("load",function(a){To(e,a);f.za.G()||(Qk(f,!1),f.N())});e.addEventListener("error",function(a){Uo(e,a)});e.HB=!0;var h=this.qo;null!==h&&(e.crossOrigin=h(this));e.src=a;c[a]=new Vo(e);Qo++}null!==d&&Ml(d,this);this.element=e;
null!==d&&Ll(d,this);this.N();this.pa();this.h("source",b,a)}});function To(a,b){a.ty=!0;a.Zu=!1;for(var c=null,d=Ro(),e=d.length,f=0;f<e;f++){var h=d[f],k=h.ko.ja(a.src);if(null!==k)for(e=k.length,f=0;f<e;f++)c=k[f],h.sC.add(c),h.ue(),null!==c.Mj&&c.Mj(c,b)}}function Uo(a,b){a.Zu=b;for(var c=null,d=Ro(),e=d.length,f=0;f<e;f++)if(c=d[f].ko.ja(a.src),null!==c){for(var e=c.length,h=v.jb(),f=0;f<e;f++)h.push(c[f]);for(f=0;f<e;f++)c=h[f],null!==c.nf&&c.nf(c,b);v.sa(h)}}
v.defineProperty(nk,{DK:"sourceCrossOrigin"},function(){return this.qo},function(a){if(this.qo!==a&&(null!==a&&v.j(a,"function",nk,"sourceCrossOrigin"),this.qo=a,null!==this.element)){var b=this.element.src;null===a&&"string"===typeof b?this.element.crossOrigin=null:null!==a&&(this.element.crossOrigin=a(this));this.element.src=b}});
v.defineProperty(nk,{cj:"sourceRect"},function(){return this.Jj},function(a){var b=this.Jj;b.K(a)||(v.A(a,A,nk,"sourceRect"),this.Jj=a=a.S(),this.pa(),this.h("sourceRect",b,a))});v.defineProperty(nk,{hH:"imageStretch"},function(){return this.Nn},function(a){var b=this.Nn;b!==a&&(v.pb(a,G,nk,"imageStretch"),this.Nn=a,this.pa(),this.h("imageStretch",b,a))});
v.defineProperty(nk,{rz:"errorFunction"},function(){return this.nf},function(a){var b=this.nf;b!==a&&(null!==a&&v.j(a,"function",nk,"errorFunction"),this.nf=a,this.h("errorFunction",b,a))});v.defineProperty(nk,{NK:"successFunction"},function(){return this.Mj},function(a){var b=this.Mj;b!==a&&(null!==a&&v.j(a,"function",nk,"successFunction"),this.Mj=a,this.h("successFunction",b,a))});
nk.prototype.Yj=function(a,b){var c=this.Re;if(null!==c){var d=c.src;null!==d&&""!==d||v.k('Element has no source ("src") attribute: '+c);if(!(c.Zu instanceof Event)&&!0===c.ty){var d=this.Ha,e=0,f=0,h=this.qy,k=h?+c.width:c.naturalWidth,h=h?+c.height:c.naturalHeight;void 0===k&&c.videoWidth&&(k=c.videoWidth);void 0===h&&c.videoHeight&&(h=c.videoHeight);k=k||d.width;h=h||d.height;if(0!==k&&0!==h){var l=k,m=h;this.cj.G()&&(e=this.Jj.x,f=this.Jj.y,k=this.Jj.width,h=this.Jj.height);var n=k,p=h,q=this.Nn;
switch(q){case Si:if(this.cj.G())break;e+=Math.max((n-d.width)/2,0);f+=Math.max((p-d.height)/2,0);k=Math.min(d.width,n);h=Math.min(d.height,p);break;case He:n=d.width;p=d.height;break;case Ui:case Vi:var r=0;q===Ui?(r=Math.min(d.height/p,d.width/n),n*=r,p*=r):q===Vi&&(r=Math.max(d.height/p,d.width/n),n*=r,p*=r,e+=(n-d.width)/2/n*k,f+=(p-d.height)/2/p*h,k*=1/(n/d.width),h*=1/(p/d.height),n=d.width,p=d.height)}var q=this.Ti()*b.scale,s=k*h/(n*q*p*q),r=Po[this.source],q=null;if(void 0!==r&&16<s){2>r.Io.length&&
(Wo(r,4,l,m),Wo(r,16,l,m));for(var l=r.Io,m=l.length,q=l[0],t=0;t<m;t++)if(l[t].wp*l[t].wp<s)q=l[t];else break}if(!b.Gn){if(null===this.zo)if(null===this.Re)this.zo=!1;else{l=(new Rc(null)).el;l.drawImage(this.Re,0,0);try{l.getImageData(0,0,1,1).data[3]&&(this.zo=!1),this.zo=!1}catch(u){this.zo=!0}}if(this.zo)return}if(b.Ui("pictureRatioOptimization")&&!b.sy&&void 0!==r&&null!==q&&1!==q.wp){a.save();r=q.wp;try{a.drawImage(q.source,e/r,f/r,Math.min(q.source.width,k/r),Math.min(q.source.height,h/r),
Math.max((d.width-n)/2,0),Math.max((d.height-p)/2,0),Math.min(d.width,n),Math.min(d.height,p))}catch(x){this.Uu=!1}a.restore()}else try{a.drawImage(c,e,f,k,h,Math.max((d.width-n)/2,0),Math.max((d.height-p)/2,0),Math.min(d.width,n),Math.min(d.height,p))}catch(w){this.Uu=!1}}}}};v.u(nk,{Ha:"naturalBounds"},function(){return this.Qc});
nk.prototype.mp=function(a,b,c,d){var e=this.za,f=Fm(this,!0),h=this.Re,k=this.qy;if(k||!this.yy&&h&&h.complete)this.yy=!0;null===h&&(isFinite(a)||(a=0),isFinite(b)||(b=0));isFinite(e.width)||f===He||f===vm?(isFinite(a)||(a=this.cj.G()?this.cj.width:k?+h.width:h.naturalWidth),c=0):null!==h&&!1!==this.yy&&(a=this.cj.G()?this.cj.width:k?+h.width:h.naturalWidth);isFinite(e.height)||f===He||f===um?(isFinite(b)||(b=this.cj.G()?this.cj.height:k?+h.height:h.naturalHeight),d=0):null!==h&&!1!==this.yy&&(b=
this.cj.G()?this.cj.height:k?+h.height:h.naturalHeight);isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);e=this.xf;f=this.kh;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);null===h||h.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0));Wa(this.Qc,a,b);Cm(this,0,0,a,b)};nk.prototype.Ni=function(a,b,c,d){Gm(this,a,b,c,d)};function Vo(a){this.Io=[new Xo(a,1)]}
function Wo(a,b,c,d){var e=new Rc(null),f=e.el,h=1/b;e.width=c/b;e.height=d/b;b=new Xo(e.xd,b);c=a.Io[a.Io.length-1];f.setTransform(h*c.wp,0,0,h*c.wp,0,0);f.drawImage(c.source,0,0);a.Io.push(b)}function Xo(a,b){this.source=a;this.wp=b}function ma(){this.o=new ve;this.Rb=null}g=ma.prototype;g.reset=function(){this.o=new ve;this.Rb=null};
function N(a,b,c,d,e,f){null===a.o&&v.k("StreamGeometryContext has been closed");void 0!==e&&!0===e?(null===a.Rb&&v.k("Need to call beginFigure first"),d=new wf(ff),d.I=b,d.J=c,a.Rb.sb.add(d)):(a.Rb=new Ge,a.Rb.Aa=b,a.Rb.xa=c,a.Rb.ut=d,a.o.Ub.add(a.Rb));void 0!==f&&(a.Rb.Tn=f)}function P(a){null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Rb&&v.k("Need to call beginFigure first");var b=a.Rb.sb.length;0<b&&a.Rb.sb.da(b-1).close()}
function cf(a){null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Rb&&v.k("Need to call beginFigure first");0<a.Rb.sb.length&&(a.Rb.ut=!0)}g.Ya=function(a){null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Rb&&v.k("Need to call beginFigure first");this.Rb.wl=a};g.moveTo=function(a,b,c){void 0===c&&(c=!1);null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Rb&&v.k("Need to call beginFigure first");var d=new wf(ff);d.I=a;d.J=b;c&&d.close();this.Rb.sb.add(d)};
g.lineTo=function(a,b,c){void 0===c&&(c=!1);null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Rb&&v.k("Need to call beginFigure first");var d=new wf(Ye);d.I=a;d.J=b;c&&d.close();this.Rb.sb.add(d)};function O(a,b,c,d,e,f,h,k){void 0===k&&(k=!1);null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Rb&&v.k("Need to call beginFigure first");var l=new wf(gf);l.rc=b;l.Kc=c;l.mh=d;l.nh=e;l.I=f;l.J=h;k&&l.close();a.Rb.sb.add(l)}
function af(a,b,c,d,e){var f;void 0===f&&(f=!1);null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Rb&&v.k("Need to call beginFigure first");var h=new wf(hf);h.rc=b;h.Kc=c;h.I=d;h.J=e;f&&h.close();a.Rb.sb.add(h)}g.arcTo=function(a,b,c,d,e,f,h){void 0===f&&(f=0);void 0===h&&(h=!1);null===this.o&&v.k("StreamGeometryContext has been closed");null===this.Rb&&v.k("Need to call beginFigure first");var k=new wf(jf);k.xe=a;k.Af=b;k.na=c;k.ua=d;k.radiusX=e;k.radiusY=0!==f?f:e;h&&k.close();this.Rb.sb.add(k)};
function bf(a,b,c,d,e,f,h,k){var l;void 0===l&&(l=!1);null===a.o&&v.k("StreamGeometryContext has been closed");null===a.Rb&&v.k("Need to call beginFigure first");b=new wf(kf,h,k,b,c,d,e,f);l&&b.close();a.Rb.sb.add(b)}function Yo(a){a=Zo(a);var b=v.jb();b[0]=a[0];for(var c=1,d=1;d<a.length;)b[c]=a[d],b[c+1]=a[d],b[c+2]=a[d+1],d+=2,c+=3;v.sa(a);return b}
function Zo(a){var b=$o(a),c=v.jb(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var f=0;f<e;f++){var h=b[f],k=b[f+1],l=b[(d+f-1)%e],m=b[(d+f+a)%e];c[2*f]=h;c[2*f+1]=he(h.x,h.y,l.x,l.y,k.x,k.y,m.x,m.y,new z)}c[c.length]=c[0];v.sa(b);return c}function $o(a){for(var b=v.jb(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new z(.5+.5*Math.cos(d),.5+.5*Math.sin(d));b.push(b[0]);return b}
var po={None:"Rectangle",Rectangle:function(a,b,c){a=new ve;a.type=Je;a.Aa=0;a.xa=0;a.I=b;a.J=c;return a},Square:function(a,b,c){a=new ve;a.Kd=Ui;a.type=Je;a.Aa=0;a.xa=0;a.I=Math.min(b,c);a.J=Math.min(b,c);return a},Ellipse:function(a,b,c){a=new ve;a.type=Ke;a.Aa=0;a.xa=0;a.I=b;a.J=c;a.B=Gd;a.C=Hd;return a},Circle:function(a,b,c){a=new ve;a.Kd=Ui;a.type=Ke;a.Aa=0;a.xa=0;a.I=Math.min(b,c);a.J=Math.min(b,c);a.B=Gd;a.C=Hd;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new ve;var d=new Ge,
e=new wf;e.I=b;e.J=.5*c;d.sb.add(e);b=new wf;b.I=0;b.J=c;d.sb.add(b.close());a.Ub.add(d);a.B=new L(0,.25);a.C=new L(.5,.75);return a},TriangleDown:function(a,b,c){a=new ve;var d=new Ge,e=new wf;e.I=b;e.J=0;d.sb.add(e);e=new wf;e.I=.5*b;e.J=c;d.sb.add(e.close());a.Ub.add(d);a.B=new L(.25,0);a.C=new L(.75,.5);return a},TriangleLeft:function(a,b,c){a=new ve;var d=new Ge;d.Aa=b;d.xa=c;var e=new wf;e.I=0;e.J=.5*c;d.sb.add(e);c=new wf;c.I=b;c.J=0;d.sb.add(c.close());a.Ub.add(d);a.B=new L(.5,.25);a.C=new L(1,
.75);return a},TriangleUp:function(a,b,c){a=new ve;var d=new Ge;d.Aa=b;d.xa=c;var e=new wf;e.I=0;e.J=c;d.sb.add(e);c=new wf;c.I=.5*b;c.J=0;d.sb.add(c.close());a.Ub.add(d);a.B=new L(.25,.5);a.C=new L(.75,1);return a},Line1:function(a,b,c){a=new ve;a.type=Ie;a.Aa=0;a.xa=0;a.I=b;a.J=c;return a},Line2:function(a,b,c){a=new ve;a.type=Ie;a.Aa=b;a.xa=0;a.I=0;a.J=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new ve;a.type=Ie;a.Aa=0;a.xa=c/2;a.I=b;a.J=c/2;return a},LineV:function(a,b,c){a=new ve;a.type=
Ie;a.Aa=b/2;a.xa=0;a.I=b/2;a.J=c;return a},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(a,b,c){a=v.s();N(a,0,0,!1);O(a,$c*b,0,1*b,(1-$c)*c,b,c);b=a.o;v.q(a);return b},Curve2:function(a,b,c){a=v.s();N(a,0,0,!1);O(a,0,$c*c,(1-$c)*b,c,b,c);b=a.o;v.q(a);return b},Curve3:function(a,b,c){a=v.s();N(a,1*b,0,!1);O(a,1*b,$c*c,$c*b,1*c,0,1*c);b=a.o;v.q(a);return b},Curve4:function(a,b,c){a=v.s();N(a,1*b,0,!1);O(a,(1-$c)*b,0,0,(1-$c)*c,0,1*c);b=a.o;v.q(a);return b},Alternative:"Triangle",Merge:"Triangle",
Triangle:function(a,b,c){a=v.s();N(a,.5*b,0*c,!0);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,!0);b=a.o;b.B=new L(.25,.5);b.C=new L(.75,1);v.q(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=v.s();N(a,.5*b,0,!0);a.lineTo(0,.5*c);a.lineTo(.5*b,1*c);a.lineTo(1*b,.5*c,!0);b=a.o;b.B=new L(.25,.25);b.C=new L(.75,.75);v.q(a);return b},Pentagon:function(a,b,c){var d=$o(5);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.2,.22);b.C=new L(.8,
.9);v.q(a);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=$o(6);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.07,.25);b.C=new L(.93,.75);v.q(a);return b},Heptagon:function(a,b,c){var d=$o(7);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.2,.15);b.C=new L(.8,.85);v.q(a);return b},Octagon:function(a,b,c){var d=$o(8);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);
for(var e=1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.15,.15);b.C=new L(.85,.85);v.q(a);return b},Nonagon:function(a,b,c){var d=$o(9);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.17,.13);b.C=new L(.82,.82);v.q(a);return b},Decagon:function(a,b,c){var d=$o(10);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.16,.16);b.C=new L(.84,.84);v.q(a);return b},
Dodecagon:function(a,b,c){var d=$o(12);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.16,.16);b.C=new L(.84,.84);v.q(a);return b},FivePointedStar:function(a,b,c){var d=Zo(5);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.312,.383);b.C=new L(.693,.765);v.q(a);return b},SixPointedStar:function(a,b,c){var d=Zo(6);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*
b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.17,.251);b.C=new L(.833,.755);v.q(a);return b},SevenPointedStar:function(a,b,c){var d=Zo(7);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.363,.361);b.C=new L(.641,.709);v.q(a);return b},EightPointedStar:function(a,b,c){var d=Zo(8);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.252,.255);b.C=new L(.75,.75);v.q(a);return b},NinePointedStar:function(a,
b,c){var d=Zo(9);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.355,.361);b.C=new L(.645,.651);v.q(a);return b},TenPointedStar:function(a,b,c){var d=Zo(10);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.281,.261);b.C=new L(.723,.748);v.q(a);return b},FivePointedBurst:function(a,b,c){var d=Yo(5);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.312,.383);b.C=new L(.693,.765);v.q(a);return b},SixPointedBurst:function(a,b,c){var d=Yo(6);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.17,.251);b.C=new L(.833,.755);v.q(a);return b},SevenPointedBurst:function(a,b,c){var d=Yo(7);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.363,.361);b.C=new L(.641,.709);v.q(a);return b},EightPointedBurst:function(a,b,c){var d=Yo(8);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.252,.255);b.C=new L(.75,.75);v.q(a);return b},NinePointedBurst:function(a,b,c){var d=Yo(9);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.355,.361);b.C=new L(.645,.651);v.q(a);return b},TenPointedBurst:function(a,b,c){var d=Yo(10);a=v.s();N(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)O(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);v.sa(d);P(a);b=a.o;b.B=new L(.281,.261);b.C=new L(.723,.748);v.q(a);return b},Cloud:function(a,b,c){a=v.s();N(a,.08034461*b,.1944299*c,!0);O(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*
b,.05349299*c);O(a,.2450511*b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c);O(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c);O(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c);O(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c);O(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c);O(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c);O(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*
c);O(a,.7431877*b,1.009325*c,.5624123*b,1.021761*c,.5101666*b,.9310455*c);O(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c);O(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c);O(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c);O(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c);O(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c);P(a);b=a.o;b.B=new L(.1,.1);b.C=new L(.9,.9);v.q(a);return b},
Gate:"Crescent",Crescent:function(a,b,c){a=v.s();N(a,0,0,!0);O(a,1*b,0,1*b,1*c,0,1*c);O(a,.5*b,.75*c,.5*b,.25*c,0,0);P(a);b=a.o;b.B=new L(.511,.19);b.C=new L(.776,.76);v.q(a);return b},FramedRectangle:function(a,b,c){var d=v.s(),e=a?a.Ac:NaN;a=a?a.Mt:NaN;isNaN(e)&&(e=.1);isNaN(a)&&(a=.1);N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,!0);N(d,e*b,a*c,!1,!0);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,!0);b=d.o;b.B=new L(e,a);b.C=new L(1-e,1-a);v.q(d);return b},
Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=v.s();N(a,0,0,!0);O(a,$c*b,0,1*b,(.5-$c/2)*c,1*b,.5*c);O(a,1*b,(.5+$c/2)*c,$c*b,1*c,0,1*c);P(a);b=a.o;b.B=new L(0,.2);b.C=new L(.75,.8);v.q(a);return b},Heart:function(a,b,c){a=v.s();N(a,.5*b,1*c,!0);O(a,.1*b,.8*c,0,.5*c,0*b,.3*c);O(a,0*b,0,.45*b,0,.5*b,.3*c);O(a,.55*b,0,1*b,0,1*b,.3*c);O(a,b,.5*c,.9*b,.8*c,.5*b,1*c);P(a);b=a.o;b.B=new L(.15,.29);b.C=new L(.86,.68);v.q(a);return b},Spade:function(a,b,c){a=v.s();N(a,.5*b,0,!0);a.lineTo(.51*b,.01*c);
O(a,.6*b,.2*c,b,.25*c,b,.5*c);O(a,b,.8*c,.6*b,.8*c,.55*b,.7*c);O(a,.5*b,.75*c,.55*b,.95*c,.75*b,c);a.lineTo(.25*b,c);O(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c);O(a,.4*b,.8*c,0,.8*c,0,.5*c);O(a,0,.25*c,.4*b,.2*c,.49*b,.01*c);P(a);b=a.o;b.B=new L(.19,.26);b.C=new L(.8,.68);v.q(a);return b},Club:function(a,b,c){a=v.s();N(a,.4*b,.6*c,!0);O(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c);a.lineTo(.85*b,c);O(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,f=0,h=4*(Math.SQRT2-1)/3*d;O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*
b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e+.05)*b,(.5-h+f-.02)*c,.65*b,.36771243*c);d=.2;e=0;f=-.3;h=4*(Math.SQRT2-1)/3*d;O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+
e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,.35*b,.36771243*c);d=.2;e=-.3;f=0;h=4*(Math.SQRT2-1)/3*d;O(a,(.5+d+e-.05)*b,(.5-h+f-.02)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,.4*b,.6*c);P(a);b=a.o;b.B=new L(.06,.39);b.C=new L(.93,.58);v.q(a);return b},Ring:function(a,b,c){a=v.s();var d=4*(Math.SQRT2-1)/3*.5;N(a,b,.5*
c,!0);O(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);O(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);O(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);O(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;N(a,.5*b,.1*c,!0,!0);O(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);O(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);O(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);O(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);b=a.o;b.B=new L(.146,.146);b.C=new L(.853,.853);b.Kd=Ui;v.q(a);return b},YinYang:function(a,b,c){var d=.5;a=v.s();d=.5;N(a,.5*b,0,!0);a.arcTo(270,
180,.5*b,.5*b,.5*b);O(a,1*b,d*c,0,d*c,d*b,0,!0);var d=.1,e=.25;N(a,(.5+d)*b,e*c,!0,!0);a.arcTo(0,-360,.5*b,c*e,d*b);P(a);N(a,.5*b,0,!1);a.arcTo(270,-180,.5*b,.5*b,.5*b);a.Ya(!1);e=.75;N(a,(.5+d)*b,e*c,!0);a.arcTo(0,360,.5*b,c*e,d*b);P(a);b=a.o;b.Kd=Ui;v.q(a);return b},Peace:function(a,b,c){a=v.s();var d=4*(Math.SQRT2-1)/3*.5;N(a,b,.5*c,!0);O(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);O(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);O(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);O(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;
N(a,.5*b,.1*c,!0,!0);O(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);O(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);O(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);O(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);var d=.07,e=0,f=-.707*.11,h=4*(Math.SQRT2-1)/3*d;N(a,(.5+d+e)*b,(.5+f)*c,!0);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*
c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);d=.07;e=-.707*.11;f=.707*.11;h=4*(Math.SQRT2-1)/3*d;N(a,(.5+d+e)*b,(.5+f)*c,!0);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);d=.07;e=.707*.11;f=.707*.11;h=4*(Math.SQRT2-1)/3*d;N(a,(.5+d+e)*b,(.5+f)*c,!0);O(a,(.5+d+e)*b,(.5-h+
f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);b=a.o;b.B=new L(.146,.146);b.C=new L(.853,.853);b.Kd=Ui;v.q(a);return b},NotAllowed:function(a,b,c){var d=.5*$c,e=.5;a=v.s();N(a,.5*b,(.5-e)*c,!0);O(a,(.5-d)*b,(.5-e)*c,(.5-e)*b,(.5-d)*c,(.5-e)*b,.5*c);O(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,
(.5+e)*c);O(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+e)*b,.5*c);O(a,(.5+e)*b,(.5-d)*c,(.5+d)*b,(.5-e)*c,.5*b,(.5-e)*c);var e=.4,d=.4*$c,f=v.L(),h=v.L(),k=v.L(),l=v.L();$d(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.42,f,h,k,l,l);var m=v.L(),n=v.L(),p=v.L();$d(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.58,l,l,p,m,n);var q=v.L(),r=v.L(),s=v.L();$d(.5,.5+e,.5-d,.5+e,.5-e,.5+d,.5-e,.5,.42,q,r,s,l,l);var t=v.L(),u=v.L(),x=v.L();$d(.5,.5+e,.5-d,.5+e,.5-e,.5+d,.5-e,.5,.58,l,l,x,t,u);N(a,x.x*b,x.y*c,!0,!0);O(a,t.x*b,
t.y*c,u.x*b,u.y*c,(.5-e)*b,.5*c);O(a,(.5-e)*b,(.5-d)*c,(.5-d)*b,(.5-e)*c,.5*b,(.5-e)*c);O(a,f.x*b,f.y*c,h.x*b,h.y*c,k.x*b,k.y*c);a.lineTo(x.x*b,x.y*c);P(a);N(a,s.x*b,s.y*c,!0,!0);a.lineTo(p.x*b,p.y*c);O(a,m.x*b,m.y*c,n.x*b,n.y*c,(.5+e)*b,.5*c);O(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);O(a,q.x*b,q.y*c,r.x*b,r.y*c,s.x*b,s.y*c);P(a);v.v(f);v.v(h);v.v(k);v.v(l);v.v(m);v.v(n);v.v(p);v.v(q);v.v(r);v.v(s);v.v(t);v.v(u);v.v(x);b=a.o;v.q(a);b.Kd=Ui;return b},Fragile:function(a,b,c){a=v.s();N(a,
0,0,!0);a.lineTo(.25*b,0);a.lineTo(.2*b,.15*c);a.lineTo(.3*b,.25*c);a.lineTo(.29*b,.33*c);a.lineTo(.35*b,.25*c);a.lineTo(.3*b,.15*c);a.lineTo(.4*b,0);a.lineTo(1*b,0);O(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c);a.lineTo(.55*b,.9*c);a.lineTo(.7*b,.9*c);a.lineTo(.7*b,1*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.9*c);a.lineTo(.45*b,.9*c);a.lineTo(.45*b,.5*c);O(a,.25*b,.5*c,0,.25*c,0,0);P(a);b=a.o;b.B=new L(.25,0);b.C=new L(.75,.4);v.q(a);return b},HourGlass:function(a,b,c){a=v.s();N(a,.65*b,.5*c,!0);a.lineTo(1*b,
1*c);a.lineTo(0,1*c);a.lineTo(.35*b,.5*c);a.lineTo(0,0);a.lineTo(1*b,0);P(a);b=a.o;v.q(a);return b},Lightning:function(a,b,c){a=v.s();N(a,0*b,.55*c,!0);a.lineTo(.75*b,0);a.lineTo(.25*b,.45*c);a.lineTo(.9*b,.48*c);a.lineTo(.4*b,1*c);a.lineTo(.65*b,.55*c);P(a);b=a.o;v.q(a);return b},Parallelogram1:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.1);var d=v.s();N(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.B=new L(a,0);b.C=new L(1-a,1);v.q(d);return b},Input:"Output",Output:function(a,
b,c){a=v.s();N(a,0,1*c,!0);a.lineTo(.1*b,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);P(a);b=a.o;b.B=new L(.1,0);b.C=new L(.9,1);v.q(a);return b},Parallelogram2:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.25);var d=v.s();N(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.B=new L(a,0);b.C=new L(1-a,1);v.q(d);return b},ThickCross:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.25);var d=v.s();N(d,(.5-a/2)*b,0,!0);d.lineTo((.5+a/2)*b,0);d.lineTo((.5+a/2)*b,(.5-a/2)*c);d.lineTo(1*b,(.5-
a/2)*c);d.lineTo(1*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,1*c);d.lineTo((.5-a/2)*b,1*c);d.lineTo((.5-a/2)*b,(.5+a/2)*c);d.lineTo(0,(.5+a/2)*c);d.lineTo(0,(.5-a/2)*c);d.lineTo((.5-a/2)*b,(.5-a/2)*c);P(d);b=d.o;b.B=new L(.5-a/2,.5-a/2);b.C=new L(.5+a/2,.5+a/2);v.q(d);return b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=v.s();N(d,.3*b,0,!0);d.lineTo(.5*b,.2*c);d.lineTo(.7*b,0);d.lineTo(1*b,.3*c);d.lineTo(.8*b,.5*c);d.lineTo(1*b,.7*c);d.lineTo(.7*b,1*c);d.lineTo(.5*b,.8*
c);d.lineTo(.3*b,1*c);d.lineTo(0,.7*c);d.lineTo(.2*b,.5*c);d.lineTo(0,.3*c);P(d);b=d.o;b.B=new L(.5-a,.5-a);b.C=new L(.5+a,.5+a);v.q(d);return b},ThinCross:function(a,b,c){var d=a?a.Ac:NaN;isNaN(d)&&(d=.1);a=v.s();N(a,(.5-d/2)*b,0,!0);a.lineTo((.5+d/2)*b,0);a.lineTo((.5+d/2)*b,(.5-d/2)*c);a.lineTo(1*b,(.5-d/2)*c);a.lineTo(1*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,1*c);a.lineTo((.5-d/2)*b,1*c);a.lineTo((.5-d/2)*b,(.5+d/2)*c);a.lineTo(0,(.5+d/2)*c);a.lineTo(0,(.5-d/2)*c);a.lineTo((.5-
d/2)*b,(.5-d/2)*c);P(a);b=a.o;v.q(a);return b},ThinX:function(a,b,c){a=v.s();N(a,.1*b,0,!0);a.lineTo(.5*b,.4*c);a.lineTo(.9*b,0);a.lineTo(1*b,.1*c);a.lineTo(.6*b,.5*c);a.lineTo(1*b,.9*c);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.6*c);a.lineTo(.1*b,1*c);a.lineTo(0,.9*c);a.lineTo(.4*b,.5*c);a.lineTo(0,.1*c);P(a);b=a.o;v.q(a);return b},RightTriangle:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);P(a);b=a.o;b.B=new L(0,.5);b.C=new L(.5,1);v.q(a);return b},RoundedIBeam:function(a,b,c){a=
v.s();N(a,0,0,!0);a.lineTo(1*b,0);O(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c);a.lineTo(0,1*c);O(a,.5*b,.75*c,.5*b,.25*c,0,0);P(a);b=a.o;v.q(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.Ac:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*$c;var e=v.s();N(e,d,0,!0);e.lineTo(b-d,0);O(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);O(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);O(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);O(e,0,a,a,0,d,0);P(e);b=e.o;1<a?(b.B=new L(0,0,a,a),b.C=new L(1,1,-a,-a)):(b.B=rb,b.C=Eb);v.q(e);return b},
Border:function(a,b,c){var d=a?a.Ac:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=v.s();N(a,d,0,!0);a.lineTo(b-d,0);O(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);O(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);O(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);O(a,0,0,0,0,d,0);P(a);b=a.o;b.B=rb;b.C=Eb;v.q(a);return b},SquareIBeam:function(a,b,c){var d=a?a.Ac:NaN;isNaN(d)&&(d=.2);a=v.s();N(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,d*c);a.lineTo((.5+d/2)*b,d*c);a.lineTo((.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*
c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((.5-d/2)*b,(1-d)*c);a.lineTo((.5-d/2)*b,d*c);a.lineTo(0,d*c);P(a);b=a.o;v.q(a);return b},Trapezoid:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.2);var d=v.s();N(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.B=new L(a,0);b.C=new L(1-a,1);v.q(d);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.Ac:NaN;isNaN(d)&&(d=0);a=v.s();N(a,d,0,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*
b,1*c);P(a);b=a.o;b.B=new L(.1,0);b.C=new L(.9,1);v.q(a);return b},GenderMale:function(a,b,c){a=v.s();var d=.4*$c,e=.4,f=v.L(),h=v.L(),k=v.L(),l=v.L();N(a,(.5-e)*b,.5*c,!0);O(a,(.5-e)*b,(.5-d)*c,(.5-d)*b,(.5-e)*c,.5*b,(.5-e)*c);$d(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.44,k,l,h,f,f);O(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);var m=v.Mb(h.x,h.y);$d(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.56,f,f,h,k,l);var n=v.Mb(h.x,h.y);a.lineTo((.1*m.x+.855)*b,.1*m.y*c);a.lineTo(.85*b,.1*m.y*c);a.lineTo(.85*b,0);a.lineTo(1*
b,0);a.lineTo(1*b,.15*c);a.lineTo((.1*n.x+.9)*b,.15*c);a.lineTo((.1*n.x+.9)*b,(.1*n.y+.05*.9)*c);a.lineTo(n.x*b,n.y*c);O(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+e)*b,.5*c);O(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);O(a,(.5-d)*b,(.5+e)*c,(.5-e)*b,(.5+d)*c,(.5-e)*b,.5*c);e=.35;d=.35*$c;N(a,.5*b,(.5-e)*c,!0,!0);O(a,(.5-d)*b,(.5-e)*c,(.5-e)*b,(.5-d)*c,(.5-e)*b,.5*c);O(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,(.5+e)*c);O(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+e)*b,.5*c);O(a,(.5+e)*b,(.5-d)*c,(.5+
d)*b,(.5-e)*c,.5*b,(.5-e)*c);N(a,(.5-e)*b,.5*c,!0);v.v(f);v.v(h);v.v(k);v.v(l);v.v(m);v.v(n);b=a.o;b.B=new L(.202,.257);b.C=new L(.692,.839);b.Kd=Ui;v.q(a);return b},GenderFemale:function(a,b,c){a=v.s();var d=.375,e=0,f=-.125,h=4*(Math.SQRT2-1)/3*d;N(a,(.525+e)*b,(.5+d+f)*c,!0);O(a,(.5+h+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+h+f)*c,(.5+d+e)*b,(.5+f)*c);O(a,(.5+d+e)*b,(.5-h+f)*c,(.5+h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5-h+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-d+e)*b,
(.5+h+f)*c,(.5-h+e)*b,(.5+d+f)*c,(.475+e)*b,(.5+d+f)*c);a.lineTo(.475*b,.85*c);a.lineTo(.425*b,.85*c);a.lineTo(.425*b,.9*c);a.lineTo(.475*b,.9*c);a.lineTo(.475*b,1*c);a.lineTo(.525*b,1*c);a.lineTo(.525*b,.9*c);a.lineTo(.575*b,.9*c);a.lineTo(.575*b,.85*c);a.lineTo(.525*b,.85*c);P(a);d=.325;e=0;f=-.125;h=4*(Math.SQRT2-1)/3*d;N(a,(.5+d+e)*b,(.5+f)*c,!0,!0);O(a,(.5+d+e)*b,(.5+h+f)*c,(.5+h+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);O(a,(.5-h+e)*b,(.5+d+f)*c,(.5-d+e)*b,(.5+h+f)*c,(.5-d+e)*b,(.5+f)*c);O(a,(.5-
d+e)*b,(.5-h+f)*c,(.5-h+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);O(a,(.5+h+e)*b,(.5-d+f)*c,(.5+d+e)*b,(.5-h+f)*c,(.5+d+e)*b,(.5+f)*c);N(a,(.525+e)*b,(.5+d+f)*c,!0);b=a.o;b.B=new L(.232,.136);b.C=new L(.782,.611);b.Kd=Ui;v.q(a);return b},PlusLine:function(a,b,c){a=v.s();N(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.o;v.q(a);return b},XLine:function(a,b,c){a=v.s();N(a,0,1*c,!1);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.o;v.q(a);return b},AsteriskLine:function(a,b,c){a=
v.s();var d=.2/Math.SQRT2;N(a,d*b,(1-d)*c,!1);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,.5*c);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0*c);a.lineTo(.5*b,1*c);b=a.o;v.q(a);return b},CircleLine:function(a,b,c){var d=.5*$c;a=v.s();N(a,1*b,.5*c,!1);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.o;b.B=new L(.146,.146);b.C=new L(.853,.853);b.Kd=Ui;v.q(a);return b},Pie:function(a,
b,c){a=v.s();var d=4*(Math.SQRT2-1)/3*.5;N(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0);O(a,.7*b,0*c,.5*b,0*c,.5*b,0*c);O(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);O(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c);O(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);a.lineTo(.5*b,.5*c);P(a);b=a.o;v.q(a);return b},PiePiece:function(a,b,c){var d=$c/Math.SQRT2*.5,e=Math.SQRT2/2,f=1-Math.SQRT2/2;a=v.s();N(a,b,c,!0);O(a,b,(1-d)*c,(e+d)*b,(f+d)*c,e*b,f*c);a.lineTo(0,c);P(a);b=a.o;v.q(a);return b},StopSign:function(a,
b,c){a=1/(Math.SQRT2+2);var d=v.s();N(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,(1-a)*c);d.lineTo(0,a*c);P(d);b=d.o;b.B=new L(a/2,a/2);b.C=new L(1-a/2,1-a/2);v.q(d);return b},LogicImplies:function(a,b,c){var d=a?a.Ac:NaN;isNaN(d)&&(d=.2);a=v.s();N(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);b=a.o;b.B=rb;b.C=new L(.8,.5);v.q(a);return b},LogicIff:function(a,b,c){var d=a?a.Ac:
NaN;isNaN(d)&&(d=.2);a=v.s();N(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(d*b,0);a.lineTo(0,.5*c);a.lineTo(d*b,c);b=a.o;b.B=new L(.2,0);b.C=new L(.8,.5);v.q(a);return b},LogicNot:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.q(a);return b},LogicAnd:function(a,b,c){a=v.s();N(a,0,1*c,!1);a.lineTo(.5*b,0);a.lineTo(1*b,1*c);b=a.o;b.B=new L(.25,.5);b.C=new L(.75,1);v.q(a);return b},LogicOr:function(a,b,c){a=v.s();
N(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);b=a.o;b.B=new L(.219,0);b.C=new L(.78,.409);v.q(a);return b},LogicXor:function(a,b,c){a=v.s();N(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);var d=.5*$c;O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.o;b.Kd=Ui;v.q(a);return b},LogicTruth:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);
b=a.o;v.q(a);return b},LogicFalsity:function(a,b,c){a=v.s();N(a,0,1*c,!1);a.lineTo(1*b,1*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);b=a.o;v.q(a);return b},LogicThereExists:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,.5*c);a.lineTo(0,.5*c);a.moveTo(1*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.o;v.q(a);return b},LogicForAll:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);a.moveTo(.25*b,.5*c);a.lineTo(.75*b,.5*c);b=a.o;b.B=new L(.25,0);b.C=new L(.75,.5);v.q(a);
return b},LogicIsDefinedAs:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(b,0);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.o;b.B=new L(.01,.01);b.C=new L(.99,.49);v.q(a);return b},LogicIntersect:function(a,b,c){var d=.5*$c;a=v.s();N(a,0,1*c,!1);a.lineTo(0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);a.lineTo(1*b,1*c);b=a.o;b.B=new L(0,.5);b.C=Eb;v.q(a);return b},LogicUnion:function(a,b,c){var d=.5*$c;a=v.s();N(a,1*b,0,!1);a.lineTo(1*b,.5*c);O(a,
1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);a.lineTo(0,0);b=a.o;b.B=rb;b.C=new L(1,.5);v.q(a);return b},Arrow:function(a,b,c){var d=a?a.Ac:NaN,e=a?a.Mt:NaN;isNaN(d)&&(d=.3);isNaN(e)&&(e=.3);a=v.s();N(a,0,(.5-e/2)*c,!0);a.lineTo((1-d)*b,(.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(.5+e/2)*c);a.lineTo(0,(.5+e/2)*c);P(a);b=a.o;b.B=new L(0,.5-e/2);d=he(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,v.L());b.C=new L(d.x,d.y);v.v(d);v.q(a);return b},
ISOProcess:"Chevron",Chevron:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);P(a);b=a.o;v.q(a);return b},DoubleArrow:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(.3*b,.214*c);a.lineTo(.3*b,0);a.lineTo(1*b,.5*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.786*c);a.lineTo(0,1*c);P(a);N(a,.3*b,.214*c,!1);a.lineTo(.3*b,.786*c);a.Ya(!1);b=a.o;v.q(a);return b},DoubleEndArrow:function(a,b,c){a=v.s();N(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);
a.lineTo(.7*b,.7*c);a.lineTo(.3*b,.7*c);a.lineTo(.3*b,1*c);a.lineTo(0,.5*c);a.lineTo(.3*b,0);a.lineTo(.3*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);P(a);b=a.o;c=he(0,.5,.3,0,0,.3,.3,.3,v.L());b.B=new L(c.x,c.y);c=he(.7,1,1,.5,.7,.7,1,.7,c);b.C=new L(c.x,c.y);v.v(c);v.q(a);return b},IBeamArrow:function(a,b,c){a=v.s();N(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.2*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.2*b,0);a.lineTo(.2*b,.3*c);a.lineTo(.7*b,.3*c);
a.lineTo(.7*b,0);P(a);b=a.o;b.B=new L(0,.3);c=he(.7,1,1,.5,.7,.7,1,.7,v.L());b.C=new L(c.x,c.y);v.v(c);v.q(a);return b},Pointer:function(a,b,c){a=v.s();N(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(.2*b,.5*c);a.lineTo(0,0);P(a);b=a.o;b.B=new L(.2,.35);c=he(.2,.65,1,.65,0,1,1,.5,v.L());b.C=new L(c.x,c.y);v.v(c);v.q(a);return b},RoundedPointer:function(a,b,c){a=v.s();N(a,1*b,.5*c,!0);a.lineTo(0,1*c);O(a,.5*b,.75*c,.5*b,.25*c,0,0);P(a);b=a.o;b.B=new L(.4,.35);c=he(.2,.65,1,.65,0,1,1,.5,v.L());b.C=new L(c.x,
c.y);v.v(c);v.q(a);return b},SplitEndArrow:function(a,b,c){a=v.s();N(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(0,.7*c);a.lineTo(.2*b,.5*c);a.lineTo(0,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);P(a);b=a.o;b.B=new L(.2,.3);c=he(.7,1,1,.5,.7,.7,1,.7,v.L());b.C=new L(c.x,c.y);v.v(c);v.q(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=v.s();N(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.7*b,0);P(a);b=a.o;b.B=rb;b.C=new L(.7,1);v.q(a);
return b},Cone1:function(a,b,c){var d=.5*$c,e=.1*$c;a=v.s();N(a,0,.9*c,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.9*c);O(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);P(a);b=a.o;b.B=new L(.25,.5);b.C=new L(.75,.97);v.q(a);return b},Cone2:function(a,b,c){a=v.s();N(a,0,.9*c,!0);O(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c);a.lineTo(.5*b,0);a.lineTo(0,.9*c);P(a);N(a,0,.9*c,!1);O(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c);a.Ya(!1);b=a.o;b.B=new L(.25,.5);b.C=new L(.75,.82);v.q(a);return b},
Cube1:function(a,b,c){a=v.s();N(a,.5*b,1*c,!0);a.lineTo(1*b,.85*c);a.lineTo(1*b,.15*c);a.lineTo(.5*b,0*c);a.lineTo(0*b,.15*c);a.lineTo(0*b,.85*c);P(a);N(a,.5*b,1*c,!1);a.lineTo(.5*b,.3*c);a.lineTo(0,.15*c);a.moveTo(.5*b,.3*c);a.lineTo(1*b,.15*c);a.Ya(!1);b=a.o;b.B=new L(0,.3);b.C=new L(.5,.85);v.q(a);return b},Cube2:function(a,b,c){a=v.s();N(a,0,.3*c,!0);a.lineTo(0*b,1*c);a.lineTo(.7*b,c);a.lineTo(1*b,.7*c);a.lineTo(1*b,0*c);a.lineTo(.3*b,0*c);P(a);N(a,0,.3*c,!1);a.lineTo(.7*b,.3*c);a.lineTo(1*b,
0*c);a.moveTo(.7*b,.3*c);a.lineTo(.7*b,1*c);a.Ya(!1);b=a.o;b.B=new L(0,.3);b.C=new L(.7,1);v.q(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=.5*$c,e=.1*$c;a=v.s();N(a,0,.1*c,!0);O(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);a.lineTo(b,.9*c);O(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);N(a,0,.1*c,!1);O(a,0,(.1+e)*c,(.5-d)*b,.2*c,.5*b,.2*c);O(a,(.5+d)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c);a.Ya(!1);b=a.o;b.B=new L(0,
.2);b.C=new L(1,.9);v.q(a);return b},Cylinder2:function(a,b,c){var d=.5*$c,e=.1*$c;a=v.s();N(a,0,.9*c,!0);a.lineTo(0,.1*c);O(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);a.lineTo(1*b,.9*c);O(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);N(a,0,.9*c,!1);O(a,0,(.9-e)*c,(.5-d)*b,.8*c,.5*b,.8*c);O(a,(.5+d)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c);a.Ya(!1);b=a.o;b.B=new L(0,.1);b.C=new L(1,.8);v.q(a);return b},Cylinder3:function(a,b,c){var d=.1*$c,e=.5*$c;a=v.s();
N(a,.1*b,0,!0);a.lineTo(.9*b,0);O(a,(.9+d)*b,0,1*b,(.5-e)*c,1*b,.5*c);O(a,1*b,(.5+e)*c,(.9+d)*b,1*c,.9*b,1*c);a.lineTo(.1*b,1*c);O(a,(.1-d)*b,1*c,0,(.5+e)*c,0,.5*c);O(a,0,(.5-e)*c,(.1-d)*b,0,.1*b,0);N(a,.1*b,0,!1);O(a,(.1+d)*b,0,.2*b,(.5-e)*c,.2*b,.5*c);O(a,.2*b,(.5+e)*c,(.1+d)*b,1*c,.1*b,1*c);a.Ya(!1);b=a.o;b.B=new L(.2,0);b.C=new L(.9,1);v.q(a);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=.1*$c,e=.5*$c;a=v.s();N(a,.9*b,0,!0);O(a,(.9+d)*b,0,1*b,(.5-e)*c,1*b,.5*c);O(a,1*b,(.5+
e)*c,(.9+d)*b,1*c,.9*b,1*c);a.lineTo(.1*b,1*c);O(a,(.1-d)*b,1*c,0,(.5+e)*c,0,.5*c);O(a,0,(.5-e)*c,(.1-d)*b,0,.1*b,0);a.lineTo(.9*b,0);N(a,.9*b,0,!1);O(a,(.9-d)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);O(a,.8*b,(.5+e)*c,(.9-d)*b,1*c,.9*b,1*c);a.Ya(!1);b=a.o;b.B=new L(.1,0);b.C=new L(.8,1);v.q(a);return b},Prism1:function(a,b,c){a=v.s();N(a,.25*b,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(b,.5*c);a.lineTo(.5*b,c);a.lineTo(0,c);P(a);N(a,.25*b,.25*c,!1);a.lineTo(.5*b,c);a.Ya(!1);b=a.o;b.B=new L(.408,.172);b.C=new L(.833,
.662);v.q(a);return b},Prism2:function(a,b,c){a=v.s();N(a,0,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);P(a);N(a,0,c,!1);a.lineTo(.25*b,.5*c);a.lineTo(b,.25*c);a.moveTo(0,.25*c);a.lineTo(.25*b,.5*c);a.Ya(!1);b=a.o;b.B=new L(.25,.5);b.C=new L(.75,.75);v.q(a);return b},Pyramid1:function(a,b,c){a=v.s();N(a,.5*b,0,!0);a.lineTo(b,.75*c);a.lineTo(.5*b,1*c);a.lineTo(0,.75*c);P(a);N(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.Ya(!1);b=a.o;b.B=new L(.25,.367);b.C=new L(.75,
.875);v.q(a);return b},Pyramid2:function(a,b,c){a=v.s();N(a,.5*b,0,!0);a.lineTo(b,.85*c);a.lineTo(.5*b,1*c);a.lineTo(0,.85*c);P(a);N(a,.5*b,0,!1);a.lineTo(.5*b,.7*c);a.lineTo(0,.85*c);a.moveTo(.5*b,.7*c);a.lineTo(1*b,.85*c);a.Ya(!1);b=a.o;b.B=new L(.25,.367);b.C=new L(.75,.875);v.q(a);return b},Actor:function(a,b,c){var d=.2*$c,e=.1*$c,f=.5,h=.1;a=v.s();N(a,f*b,(h+.1)*c,!0);O(a,(f-d)*b,(h+.1)*c,(f-.2)*b,(h+e)*c,(f-.2)*b,h*c);O(a,(f-.2)*b,(h-e)*c,(f-d)*b,(h-.1)*c,f*b,(h-.1)*c);O(a,(f+d)*b,(h-.1)*c,
(f+.2)*b,(h-e)*c,(f+.2)*b,h*c);O(a,(f+.2)*b,(h+e)*c,(f+d)*b,(h+.1)*c,f*b,(h+.1)*c);d=.05;e=$c*d;N(a,.5*b,.2*c,!0);a.lineTo(.95*b,.2*c);f=.95;h=.25;O(a,(f+e)*b,(h-d)*c,(f+d)*b,(h-e)*c,(f+d)*b,h*c);a.lineTo(1*b,.6*c);a.lineTo(.85*b,.6*c);a.lineTo(.85*b,.35*c);d=.025;e=$c*d;f=.825;h=.35;O(a,(f+d)*b,(h-e)*c,(f+e)*b,(h-d)*c,f*b,(h-d)*c);O(a,(f-e)*b,(h-d)*c,(f-d)*b,(h-e)*c,(f-d)*b,h*c);a.lineTo(.8*b,1*c);a.lineTo(.55*b,1*c);a.lineTo(.55*b,.7*c);d=.05;e=$c*d;f=.5;h=.7;O(a,(f+d)*b,(h-e)*c,(f+e)*b,(h-d)*c,
f*b,(h-d)*c);O(a,(f-e)*b,(h-d)*c,(f-d)*b,(h-e)*c,(f-d)*b,h*c);a.lineTo(.45*b,1*c);a.lineTo(.2*b,1*c);a.lineTo(.2*b,.35*c);d=.025;e=$c*d;f=.175;h=.35;O(a,(f+d)*b,(h-e)*c,(f+e)*b,(h-d)*c,f*b,(h-d)*c);O(a,(f-e)*b,(h-d)*c,(f-d)*b,(h-e)*c,(f-d)*b,h*c);a.lineTo(.15*b,.6*c);a.lineTo(0*b,.6*c);a.lineTo(0*b,.25*c);d=.05;e=$c*d;f=.05;h=.25;O(a,(f-d)*b,(h-e)*c,(f-e)*b,(h-d)*c,f*b,(h-d)*c);a.lineTo(.5*b,.2*c);b=a.o;b.B=new L(.2,.2);b.C=new L(.8,.65);v.q(a);return b},Card:function(a,b,c){a=v.s();N(a,1*b,0*c,!0);
a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,.2*c);a.lineTo(.2*b,0*c);P(a);b=a.o;b.B=new L(0,.2);b.C=Eb;v.q(a);return b},Collate:function(a,b,c){a=v.s();N(a,.5*b,.5*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);N(a,.5*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);b=a.o;b.B=new L(.25,0);b.C=new L(.75,.25);v.q(a);return b},CreateRequest:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.1);var d=v.s();N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);N(d,0,
a*c,!1);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.Ya(!1);b=d.o;b.B=new L(0,a);b.C=new L(1,1-a);v.q(d);return b},Database:function(a,b,c){a=v.s();var d=.5*$c,e=.1*$c;N(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);O(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);O(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);N(a,1*b,.1*c,!1);O(a,1*b,(.1+e)*c,(.5+d)*b,.2*c,.5*b,.2*c);O(a,(.5-d)*b,.2*c,0,(.1+e)*c,0,.1*c);a.moveTo(1*b,.2*c);
O(a,1*b,(.2+e)*c,(.5+d)*b,.3*c,.5*b,.3*c);O(a,(.5-d)*b,.3*c,0,(.2+e)*c,0,.2*c);a.moveTo(1*b,.3*c);O(a,1*b,(.3+e)*c,(.5+d)*b,.4*c,.5*b,.4*c);O(a,(.5-d)*b,.4*c,0,(.3+e)*c,0,.3*c);a.Ya(!1);b=a.o;b.B=new L(0,.4);b.C=new L(1,.9);v.q(a);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(.75*b,0);O(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(0,1*c);O(a,.25*b,.9*c,.25*b,.1*c,0,0);P(a);b=a.o;b.B=new L(.226,0);b.C=new L(.81,1);v.q(a);return b},DiskStorage:function(a,b,c){a=
v.s();var d=.5*$c,e=.1*$c;N(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);O(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);O(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);N(a,1*b,.1*c,!1);O(a,1*b,(.1+e)*c,(.5+d)*b,.2*c,.5*b,.2*c);O(a,(.5-d)*b,.2*c,0,(.1+e)*c,0,.1*c);a.moveTo(1*b,.2*c);O(a,1*b,(.2+e)*c,(.5+d)*b,.3*c,.5*b,.3*c);O(a,(.5-d)*b,.3*c,0,(.2+e)*c,0,.2*c);a.Ya(!1);b=a.o;b.B=new L(0,.3);b.C=new L(1,.9);v.q(a);return b},Display:function(a,
b,c){a=v.s();N(a,.25*b,0,!0);a.lineTo(.75*b,0);O(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(.25*b,1*c);a.lineTo(0,.5*c);P(a);b=a.o;b.B=new L(.25,0);b.C=new L(.75,1);v.q(a);return b},DividedEvent:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)?a=.2:.15>a&&(a=.15);var d=v.s(),e=.2*$c;N(d,0,.2*c,!0);O(d,0,(.2-e)*c,(.2-e)*b,0,.2*b,0);d.lineTo(.8*b,0);O(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c);d.lineTo(1*b,.8*c);O(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c);d.lineTo(.2*b,1*c);O(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c);d.lineTo(0,.2*c);
N(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ya(!1);b=d.o;b.B=new L(0,a);b.C=new L(1,1-a);v.q(d);return b},DividedProcess:function(a,b,c){a=a?a.Ac:NaN;if(isNaN(a)||.1>a)a=.1;var d=v.s();N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);N(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ya(!1);b=d.o;b.B=new L(0,a);b.C=Eb;v.q(d);return b},Document:function(a,b,c){c/=.8;a=v.s();N(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);O(a,.5*b,.4*c,.5*b,1*c,0,.7*c);P(a);b=a.o;b.B=rb;b.C=new L(1,.6);v.q(a);
return b},ExternalOrganization:function(a,b,c){a=a?a.Ac:NaN;if(isNaN(a)||.2>a)a=.2;var d=v.s();N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);N(d,a*b,0,!1);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);d.Ya(!1);b=d.o;b.B=new L(a/2,a/2);b.C=new L(1-a/2,1-a/2);v.q(d);return b},ExternalProcess:function(a,b,c){a=v.s();N(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);P(a);
N(a,.1*b,.4*c,!1);a.lineTo(.1*b,.6*c);a.moveTo(.9*b,.6*c);a.lineTo(.9*b,.4*c);a.moveTo(.6*b,.1*c);a.lineTo(.4*b,.1*c);a.moveTo(.4*b,.9*c);a.lineTo(.6*b,.9*c);a.Ya(!1);b=a.o;b.B=new L(.25,.25);b.C=new L(.75,.75);v.q(a);return b},File:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);P(a);N(a,.75*b,0,!1);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.25*c);a.Ya(!1);b=a.o;b.B=new L(0,.25);b.C=Eb;v.q(a);return b},Interrupt:function(a,b,c){a=v.s();N(a,1*b,
.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);N(a,1*b,.5*c,!1);a.lineTo(1*b,1*c);N(a,1*b,.5*c,!1);a.lineTo(1*b,0);b=a.o;b.B=new L(0,.25);b.C=new L(.5,.75);v.q(a);return b},InternalStorage:function(a,b,c){var d=a?a.Ac:NaN;a=a?a.Mt:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.1);var e=v.s();N(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);P(e);N(e,d*b,0,!1);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);e.Ya(!1);b=e.o;b.B=new L(d,a);b.C=Eb;v.q(e);return b},Junction:function(a,b,
c){a=v.s();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,f=.5*$c;N(a,1*b,.5*c,!0);O(a,1*b,(.5+f)*c,(.5+f)*b,1*c,.5*b,1*c);O(a,(.5-f)*b,1*c,0,(.5+f)*c,0,.5*c);O(a,0,(.5-f)*c,(.5-f)*b,0,.5*b,0);O(a,(.5+f)*b,0,1*b,(.5-f)*c,1*b,.5*c);N(a,(e+d)*b,(e+d)*c,!1);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);a.Ya(!1);b=a.o;b.Kd=Ui;v.q(a);return b},LinedDocument:function(a,b,c){c/=.8;a=v.s();N(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);O(a,.5*b,.4*c,.5*b,1*c,0,.7*c);P(a);N(a,.1*
b,0,!1);a.lineTo(.1*b,.75*c);a.Ya(!1);b=a.o;b.B=new L(.1,0);b.C=new L(1,.6);v.q(a);return b},LoopLimit:function(a,b,c){a=v.s();N(a,0,1*c,!0);a.lineTo(0,.25*c);a.lineTo(.25*b,0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);P(a);b=a.o;b.B=new L(0,.25);b.C=Eb;v.q(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=v.s();var d=.5*$c;N(a,.5*b,1*c,!0);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+
d)*c,(.5+d)*b,.9*c,.6*b,.9*c);a.lineTo(1*b,.9*c);a.lineTo(1*b,1*c);a.lineTo(.5*b,1*c);b=a.o;b.B=new L(.15,.15);b.C=new L(.85,.8);v.q(a);return b},ManualInput:function(a,b,c){a=v.s();N(a,1*b,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.25*c);P(a);b=a.o;b.B=new L(0,.25);b.C=Eb;v.q(a);return b},MessageFromUser:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.7);var d=v.s();N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(a*b,.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);b=d.o;b.B=rb;b.C=new L(a,1);v.q(d);return b},
MicroformProcessing:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.25);var d=v.s();N(d,0,0,!0);d.lineTo(.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.5*b,(1-a)*c);d.lineTo(0,1*c);P(d);b=d.o;b.B=new L(0,a);b.C=new L(1,1-a);v.q(d);return b},MicroformRecording:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.15*c);a.lineTo(1*b,.85*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);P(a);b=a.o;b.B=new L(0,.25);b.C=new L(1,.75);v.q(a);return b},MultiDocument:function(a,b,c){c/=.8;a=v.s();
N(a,b,0,!0);a.lineTo(b,.5*c);O(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c);a.lineTo(.9*b,.6*c);O(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c);a.lineTo(.8*b,.7*c);O(a,.4*b,.4*c,.4*b,1*c,0,.7*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);a.lineTo(.1*b,.1*c);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);P(a);N(a,.1*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.54*c);a.moveTo(.2*b,.1*c);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.44*c);a.Ya(!1);b=a.o;b.B=new L(0,.25);b.C=new L(.8,.77);v.q(a);return b},MultiProcess:function(a,b,c){a=v.s();
N(a,.1*b,.1*c,!0);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.8*c);a.lineTo(.9*b,.8*c);a.lineTo(.9*b,.9*c);a.lineTo(.8*b,.9*c);a.lineTo(.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);P(a);N(a,.2*b,.1*c,!1);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.8*c);a.moveTo(.1*b,.2*c);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.9*c);a.Ya(!1);b=a.o;b.B=new L(0,.2);b.C=new L(.8,1);v.q(a);return b},OfflineStorage:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.1);var d=1-a,e=v.s();N(e,0,0,!0);e.lineTo(1*
b,0);e.lineTo(.5*b,1*c);P(e);N(e,.5*a*b,a*c,!1);e.lineTo((1-.5*a)*b,a*c);e.Ya(!1);b=e.o;b.B=new L(d/4+.5*a,a);b.C=new L(3*d/4+.5*a,a+.5*d);v.q(e);return b},OffPageConnector:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.5*c);a.lineTo(.75*b,1*c);a.lineTo(0,1*c);P(a);b=a.o;b.B=rb;b.C=new L(.75,1);v.q(a);return b},Or:function(a,b,c){a=v.s();var d=.5*$c;N(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,
(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);N(a,1*b,.5*c,!1);a.lineTo(0,.5*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);a.Ya(!1);b=a.o;b.Kd=Ui;v.q(a);return b},PaperTape:function(a,b,c){c/=.8;a=v.s();N(a,0,.7*c,!0);a.lineTo(0,.3*c);O(a,.5*b,.6*c,.5*b,0,1*b,.3*c);a.lineTo(1*b,.7*c);O(a,.5*b,.4*c,.5*b,1*c,0,.7*c);P(a);b=a.o;b.B=new L(0,.49);b.C=new L(1,.75);v.q(a);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.Ac:NaN;a=a?a.Mt:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=v.s();N(e,0,0,!0);e.lineTo(1*b,0);e.lineTo((1-
a)*b,.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);P(e);b=e.o;b.B=new L(d,0);b.C=new L(1-a,1);v.q(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Ac:NaN;a=a?a.Mt:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=v.s();N(e,0,0,!0);e.lineTo((1-a)*b,0);e.lineTo(1*b,.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);P(e);b=e.o;b.B=new L(d,0);b.C=new L(1-a,1);v.q(e);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.1);var d=v.s();N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,
1*c);P(d);N(d,(1-a)*b,0,!1);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);d.Ya(!1);b=d.o;b.B=new L(a,0);b.C=new L(1-a,1);v.q(d);return b},Process:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.1);var d=v.s();N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);P(d);N(d,a*b,0,!1);d.lineTo(a*b,1*c);d.Ya(!1);b=d.o;b.B=new L(a,0);b.C=Eb;v.q(d);return b},Sort:function(a,b,c){a=v.s();N(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);P(a);N(a,0,.5*c,!1);a.lineTo(1*b,.5*
c);a.Ya(!1);b=a.o;b.B=new L(.25,.25);b.C=new L(.75,.5);v.q(a);return b},Start:function(a,b,c){a=v.s();N(a,.25*b,0,!0);N(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);N(a,.25*b,0,!1);a.lineTo(.25*b,1*c);a.moveTo(.75*b,0);a.lineTo(.75*b,1*c);a.Ya(!1);b=a.o;b.B=new L(.25,0);b.C=new L(.75,1);v.q(a);return b},Terminator:function(a,b,c){a=v.s();N(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);b=a.o;b.B=new L(.23,0);
b.C=new L(.77,1);v.q(a);return b},TransmittalTape:function(a,b,c){a=a?a.Ac:NaN;isNaN(a)&&(a=.1);var d=v.s();N(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);P(d);b=d.o;b.B=rb;b.C=new L(1,1-a);v.q(d);return b},AndGate:function(a,b,c){a=v.s();var d=.5*$c;N(a,0,0,!0);a.lineTo(.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);a.lineTo(0,1*c);P(a);b=a.o;b.B=rb;b.C=new L(.55,1);v.q(a);return b},Buffer:function(a,b,c){a=v.s();N(a,
0,0,!0);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);P(a);b=a.o;b.B=new L(0,.25);b.C=new L(.5,.75);v.q(a);return b},Clock:function(a,b,c){a=v.s();var d=.5*$c;N(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);N(a,1*b,.5*c,!1);a.lineTo(1*b,.5*c);N(a,.8*b,.75*c,!1);a.lineTo(.8*b,.25*c);a.lineTo(.6*b,.25*c);a.lineTo(.6*b,.75*c);a.lineTo(.4*b,.75*c);a.lineTo(.4*b,.25*c);a.lineTo(.2*b,.25*c);a.lineTo(.2*
b,.75*c);a.Ya(!1);b=a.o;b.Kd=Ui;v.q(a);return b},Ground:function(a,b,c){a=v.s();N(a,.5*b,0,!1);a.lineTo(.5*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.3*b,.8*c);a.lineTo(.7*b,.8*c);a.moveTo(.4*b,1*c);a.lineTo(.6*b,1*c);b=a.o;v.q(a);return b},Inverter:function(a,b,c){a=v.s();var d=.1*$c;N(a,.8*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.8*b,.5*c);N(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c);O(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);O(a,.8*b,(.5-d)*c,(.9-d)*b,.4*
c,.9*b,.4*c);O(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.o;b.B=new L(0,.25);b.C=new L(.4,.75);v.q(a);return b},NandGate:function(a,b,c){a=v.s();var d=.5*$c,e=.4*$c,f=.1*$c;N(a,.8*b,.5*c,!0);O(a,.8*b,(.5+e)*c,(.4+d)*b,1*c,.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.4*b,0);O(a,(.4+d)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);N(a,1*b,.5*c,!0);O(a,1*b,(.5+f)*c,(.9+f)*b,.6*c,.9*b,.6*c);O(a,(.9-f)*b,.6*c,.8*b,(.5+f)*c,.8*b,.5*c);O(a,.8*b,(.5-f)*c,(.9-f)*b,.4*c,.9*b,.4*c);O(a,(.9+f)*b,.4*c,1*b,(.5-f)*c,1*b,.5*
c);b=a.o;b.B=new L(0,.05);b.C=new L(.55,.95);v.q(a);return b},NorGate:function(a,b,c){a=v.s();var d=.5,e=$c*d,f=0,h=.5;N(a,.8*b,.5*c,!0);O(a,.7*b,(h+e)*c,(f+e)*b,(h+d)*c,0,1*c);O(a,.25*b,.75*c,.25*b,.25*c,0,0);O(a,(f+e)*b,(h-d)*c,.7*b,(h-e)*c,.8*b,.5*c);d=.1;e=.1*$c;f=.9;h=.5;N(a,(f-d)*b,h*c,!0);O(a,(f-d)*b,(h-e)*c,(f-e)*b,(h-d)*c,f*b,(h-d)*c);O(a,(f+e)*b,(h-d)*c,(f+d)*b,(h-e)*c,(f+d)*b,h*c);O(a,(f+d)*b,(h+e)*c,(f+e)*b,(h+d)*c,f*b,(h+d)*c);O(a,(f-e)*b,(h+d)*c,(f-d)*b,(h+e)*c,(f-d)*b,h*c);b=a.o;b.B=
new L(.2,.25);b.C=new L(.6,.75);v.q(a);return b},OrGate:function(a,b,c){a=v.s();var d=.5*$c;N(a,0,0,!0);O(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c);O(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c);O(a,.25*b,.75*c,.25*b,.25*c,0,0);P(a);b=a.o;b.B=new L(.2,.25);b.C=new L(.75,.75);v.q(a);return b},XnorGate:function(a,b,c){a=v.s();var d=.5,e=$c*d,f=.2,h=.5;N(a,.1*b,0,!1);O(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);N(a,.8*b,.5*c,!0);O(a,.7*b,(h+e)*c,(f+e)*b,(h+d)*c,.2*b,1*c);O(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);O(a,(f+e)*
b,(h-d)*c,.7*b,(h-e)*c,.8*b,.5*c);d=.1;e=.1*$c;f=.9;h=.5;N(a,(f-d)*b,h*c,!0);O(a,(f-d)*b,(h-e)*c,(f-e)*b,(h-d)*c,f*b,(h-d)*c);O(a,(f+e)*b,(h-d)*c,(f+d)*b,(h-e)*c,(f+d)*b,h*c);O(a,(f+d)*b,(h+e)*c,(f+e)*b,(h+d)*c,f*b,(h+d)*c);O(a,(f-e)*b,(h+d)*c,(f-d)*b,(h+e)*c,(f-d)*b,h*c);b=a.o;b.B=new L(.4,.25);b.C=new L(.65,.75);v.q(a);return b},XorGate:function(a,b,c){a=v.s();var d=.5*$c;N(a,.1*b,0,!1);O(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);N(a,.2*b,0,!0);O(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c);O(a,.9*b,(.5+d)*
c,(.2+d)*b,1*c,.2*b,1*c);O(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);P(a);b=a.o;b.B=new L(.4,.25);b.C=new L(.8,.75);v.q(a);return b},Capacitor:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.q(a);return b},Resistor:function(a,b,c){a=v.s();N(a,0,.5*c,!1);a.lineTo(.1*b,0);a.lineTo(.2*b,1*c);a.lineTo(.3*b,0);a.lineTo(.4*b,1*c);a.lineTo(.5*b,0);a.lineTo(.6*b,1*c);a.lineTo(.7*b,.5*c);b=a.o;v.q(a);return b},Inductor:function(a,b,c){a=v.s();var d=.1*$c,e=.1;N(a,(e-.5*
d)*b,c,!1);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.3;O(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.5;O(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.7;O(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);O(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.9;O(a,(e+.1)*b,0,(e+d)*b,c,(e+.5*d)*b,c);b=a.o;v.q(a);return b},ACvoltageSource:function(a,b,c){a=v.s();var d=.5*$c;N(a,0*b,.5*c,!1);O(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);O(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+d)*
c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);a.moveTo(.1*b,.5*c);O(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c);b=a.o;b.Kd=Ui;v.q(a);return b},DCvoltageSource:function(a,b,c){a=v.s();N(a,0,.75*c,!1);a.lineTo(0,.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.q(a);return b},Diode:function(a,b,c){a=v.s();N(a,1*b,0,!1);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);a.lineTo(1*b,1*c);b=a.o;b.B=new L(0,.25);b.C=new L(.5,.75);v.q(a);return b},Wifi:function(a,b,c){var d=b,e=c;
b*=.38;c*=.6;a=v.s();var f=.8*$c,h=.8,k=0,l=.5,d=(d-b)/2,e=(e-c)/2;N(a,k*b+d,(l+h)*c+e,!0);O(a,(k-f)*b+d,(l+h)*c+e,(k-h)*b+d,(l+f)*c+e,(k-h)*b+d,l*c+e);O(a,(k-h)*b+d,(l-f)*c+e,(k-f)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);O(a,k*b+d,(l-h)*c+e,(k-h+.5*f)*b+d,(l-f)*c+e,(k-h+.5*f)*b+d,l*c+e);O(a,(k-h+.5*f)*b+d,(l+f)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);P(a);f=.4*$c;h=.4;k=.2;l=.5;N(a,k*b+d,(l+h)*c+e,!0);O(a,(k-f)*b+d,(l+h)*c+e,(k-h)*b+d,(l+f)*c+e,(k-h)*b+d,l*c+e);O(a,(k-h)*b+d,(l-f)*c+e,(k-f)*b+d,(l-h)*c+e,k*
b+d,(l-h)*c+e);O(a,k*b+d,(l-h)*c+e,(k-h+.5*f)*b+d,(l-f)*c+e,(k-h+.5*f)*b+d,l*c+e);O(a,(k-h+.5*f)*b+d,(l+f)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);P(a);f=.2*$c;h=.2;l=k=.5;N(a,(k-h)*b+d,l*c+e,!0);O(a,(k-h)*b+d,(l-f)*c+e,(k-f)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);O(a,(k+f)*b+d,(l-h)*c+e,(k+h)*b+d,(l-f)*c+e,(k+h)*b+d,l*c+e);O(a,(k+h)*b+d,(l+f)*c+e,(k+f)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);O(a,(k-f)*b+d,(l+h)*c+e,(k-h)*b+d,(l+f)*c+e,(k-h)*b+d,l*c+e);f=.4*$c;h=.4;k=.8;l=.5;N(a,k*b+d,(l-h)*c+e,!0);O(a,(k+f)*b+d,(l-
h)*c+e,(k+h)*b+d,(l-f)*c+e,(k+h)*b+d,l*c+e);O(a,(k+h)*b+d,(l+f)*c+e,(k+f)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);O(a,k*b+d,(l+h)*c+e,(k+h-.5*f)*b+d,(l+f)*c+e,(k+h-.5*f)*b+d,l*c+e);O(a,(k+h-.5*f)*b+d,(l-f)*c+e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);P(a);f=.8*$c;h=.8;k=1;l=.5;N(a,k*b+d,(l-h)*c+e,!0);O(a,(k+f)*b+d,(l-h)*c+e,(k+h)*b+d,(l-f)*c+e,(k+h)*b+d,l*c+e);O(a,(k+h)*b+d,(l+f)*c+e,(k+f)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);O(a,k*b+d,(l+h)*c+e,(k+h-.5*f)*b+d,(l+f)*c+e,(k+h-.5*f)*b+d,l*c+e);O(a,(k+h-.5*f)*b+d,(l-f)*c+
e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);P(a);b=a.o;v.q(a);return b},Email:function(a,b,c){a=v.s();N(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);P(a);N(a,0,0,!1);a.lineTo(.5*b,.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(.45*b,.54*c);a.moveTo(1*b,1*c);a.lineTo(.55*b,.54*c);a.Ya(!1);b=a.o;v.q(a);return b},Ethernet:function(a,b,c){a=v.s();N(a,.35*b,0,!0);a.lineTo(.65*b,0);a.lineTo(.65*b,.4*c);a.lineTo(.35*b,.4*c);a.lineTo(.35*b,0);P(a);N(a,.1*b,1*c,!0,!0);a.lineTo(.4*b,1*c);
a.lineTo(.4*b,.6*c);a.lineTo(.1*b,.6*c);a.lineTo(.1*b,1*c);P(a);N(a,.6*b,1*c,!0,!0);a.lineTo(.9*b,1*c);a.lineTo(.9*b,.6*c);a.lineTo(.6*b,.6*c);a.lineTo(.6*b,1*c);P(a);N(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.5*b,.4*c);a.moveTo(.75*b,.5*c);a.lineTo(.75*b,.6*c);a.moveTo(.25*b,.5*c);a.lineTo(.25*b,.6*c);a.Ya(!1);b=a.o;v.q(a);return b},Power:function(a,b,c){a=v.s();var d=.4*$c,e=.4,f=v.L(),h=v.L(),k=v.L(),l=v.L();$d(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.5,f,f,h,k,l);var m=v.Mb(h.x,
h.y);N(a,h.x*b,h.y*c,!0);O(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+e)*b,.5*c);O(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);O(a,(.5-d)*b,(.5+e)*c,(.5-e)*b,(.5+d)*c,(.5-e)*b,.5*c);$d(.5-e,.5,.5-e,.5-d,.5-d,.5-e,.5,.5-e,.5,k,l,h,f,f);O(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);d=.3*$c;e=.3;$d(.5-e,.5,.5-e,.5-d,.5-d,.5-e,.5,.5-e,.5,k,l,h,f,f);a.lineTo(h.x*b,h.y*c);O(a,l.x*b,l.y*c,k.x*b,k.y*c,(.5-e)*b,.5*c);O(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,(.5+e)*c);O(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+
e)*b,.5*c);$d(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.5,f,f,h,k,l);O(a,l.x*b,l.y*c,k.x*b,k.y*c,h.x*b,h.y*c);P(a);N(a,.45*b,0,!0);a.lineTo(.45*b,.5*c);a.lineTo(.55*b,.5*c);a.lineTo(.55*b,0);P(a);v.v(f);v.v(h);v.v(k);v.v(l);v.v(m);b=a.o;b.B=new L(.25,.55);b.C=new L(.75,.8);v.q(a);return b},Fallout:function(a,b,c){a=v.s();var d=.5*$c;N(a,0*b,.5*c,!0);O(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);O(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,
.5*c);var e=d=0;N(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.4;e=0;P(a);N(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.2;e=-.3;P(a);N(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);P(a);b=a.o;b.Kd=Ui;v.q(a);return b},IrritationHazard:function(a,b,c){a=v.s();N(a,.2*b,0*c,!0);a.lineTo(.5*b,.3*c);a.lineTo(.8*
b,0*c);a.lineTo(1*b,.2*c);a.lineTo(.7*b,.5*c);a.lineTo(1*b,.8*c);a.lineTo(.8*b,1*c);a.lineTo(.5*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0*b,.8*c);a.lineTo(.3*b,.5*c);a.lineTo(0*b,.2*c);P(a);b=a.o;b.B=new L(.3,.3);b.C=new L(.7,.7);v.q(a);return b},ElectricalHazard:function(a,b,c){a=v.s();N(a,.37*b,0*c,!0);a.lineTo(.5*b,.11*c);a.lineTo(.77*b,.04*c);a.lineTo(.33*b,.49*c);a.lineTo(1*b,.37*c);a.lineTo(.63*b,.86*c);a.lineTo(.77*b,.91*c);a.lineTo(.34*b,1*c);a.lineTo(.34*b,.78*c);a.lineTo(.44*b,.8*c);a.lineTo(.65*
b,.56*c);a.lineTo(0*b,.68*c);P(a);b=a.o;v.q(a);return b},FireHazard:function(a,b,c){a=v.s();N(a,.1*b,1*c,!0);O(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c);O(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c);O(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c);O(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c);O(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c);O(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c);P(a);b=a.o;b.B=new L(.05,.645);b.C=new L(.884,.908);v.q(a);return b},BpmnActivityLoop:function(a,b,c){a=v.s();var d=4*(Math.SQRT2-1)/3*.5;N(a,.65*b,1*c,
!1);O(a,(1-d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);O(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c);O(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);O(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c);a.moveTo(.25*b,.8*c);a.lineTo(.35*b,1*c);a.lineTo(.1*b,1*c);b=a.o;v.q(a);return b},BpmnActivityParallel:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.o;v.q(a);return b},BpmnActivitySequential:function(a,b,c){a=v.s();N(a,0,0,!1);a.lineTo(1*
b,0);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.o;v.q(a);return b},BpmnActivityAdHoc:function(a,b,c){a=v.s();N(a,0,0,!1);N(a,1*b,1*c,!1);N(a,0,.5*c,!1);O(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c);O(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c);b=a.o;v.q(a);return b},BpmnActivityCompensation:function(a,b,c){a=v.s();N(a,0,.5*c,!0);a.lineTo(.5*b,0);a.lineTo(.5*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);a.lineTo(.5*b,1*c);P(a);b=a.o;v.q(a);return b},BpmnTaskMessage:function(a,
b,c){a=v.s();N(a,0,.2*c,!0);a.lineTo(1*b,.2*c);a.lineTo(1*b,.8*c);a.lineTo(0,.8*c);a.lineTo(0,.8*c);P(a);N(a,0,.2*c,!1);a.lineTo(.5*b,.5*c);a.lineTo(1*b,.2*c);a.Ya(!1);b=a.o;v.q(a);return b},BpmnTaskScript:function(a,b,c){a=v.s();N(a,.7*b,1*c,!0);a.lineTo(.3*b,1*c);O(a,.6*b,.5*c,0,.5*c,.3*b,0);a.lineTo(.7*b,0);O(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c);P(a);N(a,.45*b,.73*c,!1);a.lineTo(.7*b,.73*c);a.moveTo(.38*b,.5*c);a.lineTo(.63*b,.5*c);a.moveTo(.31*b,.27*c);a.lineTo(.56*b,.27*c);a.Ya(!1);b=a.o;v.q(a);return b},
BpmnTaskUser:function(a,b,c){a=v.s();N(a,0,0,!1);N(a,.335*b,(1-.555)*c,!0);a.lineTo(.335*b,.595*c);a.lineTo(.665*b,.595*c);a.lineTo(.665*b,(1-.555)*c);O(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.68*c);O(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c);a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*d,f=f*d;O(a,(.5-(e+d)/2)*b,(d+(d+f)/2)*c,(.5-d)*b,(d+f)*c,(.5-d)*b,d*c);O(a,(.5-d)*b,(d-f)*c,(.5-e)*b,(d-d)*c,.5*b,(d-d)*c);
O(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-f)*c,(.5+d)*b,d*c);O(a,(.5+d)*b,(d+f)*c,(.5+(e+d)/2)*b,(d+(d+f)/2)*c,.635*b,.405*c);a.lineTo(.635*b,.405*c);a.lineTo(.665*b,(1-.555)*c);a.lineTo(.665*b,.595*c);a.lineTo(.335*b,.595*c);N(a,.2*b,1*c,!1);a.lineTo(.2*b,.8*c);N(a,.8*b,1*c,!1);a.lineTo(.8*b,.8*c);b=a.o;v.q(a);return b},BpmnEventConditional:function(a,b,c){a=v.s();N(a,.1*b,0,!0);a.lineTo(.9*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);P(a);N(a,.2*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.moveTo(.2*b,.4*c);a.lineTo(.8*
b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.2*b,.8*c);a.lineTo(.8*b,.8*c);a.Ya(!1);b=a.o;v.q(a);return b},BpmnEventError:function(a,b,c){a=v.s();N(a,0,1*c,!0);a.lineTo(.33*b,0);a.lineTo(.66*b,.5*c);a.lineTo(1*b,0);a.lineTo(.66*b,1*c);a.lineTo(.33*b,.5*c);P(a);b=a.o;v.q(a);return b},BpmnEventEscalation:function(a,b,c){a=v.s();N(a,0,0,!1);N(a,1*b,1*c,!1);N(a,.1*b,1*c,!0);a.lineTo(.5*b,0);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.5*c);P(a);b=a.o;v.q(a);return b},BpmnEventTimer:function(a,b,c){a=
v.s();var d=.5*$c;N(a,1*b,.5*c,!0);O(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);O(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);O(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);O(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);N(a,.5*b,0,!1);a.lineTo(.5*b,.15*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,.85*c);a.moveTo(0,.5*c);a.lineTo(.15*b,.5*c);a.moveTo(1*b,.5*c);a.lineTo(.85*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.58*b,.1*c);a.moveTo(.5*b,.5*c);a.lineTo(.78*b,.54*c);a.Ya(!1);b=a.o;b.Kd=Ui;v.q(a);return b}},ap;for(ap in po)po[ap.toLowerCase()]=ap;
var bp={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",
BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};
function to(a){if(null!==bp){for(var b in bp){var c=$e(bp[b],!1);Jd[b]=c;b.toLowerCase()!==b&&(Jd[b.toLowerCase()]=b)}bp=null}b=Jd[a];if(void 0===b){b=a.toLowerCase();if("none"===b)return"None";b=Jd[b]}return"string"===typeof b?b:b instanceof ve?a:null}
function R(a){0===arguments.length?D.call(this):D.call(this,a);this.Q=311807;this.Kk=this.ei="";this.Yr=this.Vr=this.hs=this.dr=null;this.ks="";this.ci=this.js=this.om=null;this.Xr="";this.mo=null;this.Wr=Ed;this.Zr="";this.no=null;this.me="";this.mv=this.fq=this.vk=null;this.xi=(new z(NaN,NaN)).freeze();this.ir="";this.Pk=null;this.jr=rb;this.sr=nd;this.lr=od;this.yq=null;this.er=cp;this.qm=md;this.pm="gray";this.og=4;this.aC=-1;this.Ms=NaN;this.BF=new A;this.dm=null;this.Aj=NaN}v.Ja(R,D);
v.ea("Part",R);R.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a);a.Q=this.Q&-4097|49152;a.ei=this.ei;a.Kk=this.Kk;a.dr=this.dr;a.hs=this.hs;a.Vr=this.Vr;a.Yr=this.Yr;a.ks=this.ks;a.js=this.js;a.ci=null;a.Xr=this.Xr;a.Wr=this.Wr.S();a.Zr=this.Zr;a.me=this.me;a.fq=this.fq;a.xi.assign(this.xi);a.ir=this.ir;a.jr=this.jr.S();a.sr=this.sr.S();a.lr=this.lr.S();a.yq=this.yq;a.er=this.er;a.qm=this.qm.S();a.pm=this.pm;a.og=this.og;a.Ms=this.Ms};
R.prototype.Wh=function(a){D.prototype.Wh.call(this,a);a.rl();a.om=null;a.mo=null;a.no=null;a.Pk=null;a.dm=null};R.prototype.toString=function(){var a=v.af(Object.getPrototypeOf(this))+"#"+v.ld(this);null!==this.data&&(a+="("+Ef(this.data)+")");return a};R.LayoutNone=0;var nl;R.LayoutAdded=nl=1;var vl;R.LayoutRemoved=vl=2;R.LayoutShown=4;R.LayoutHidden=8;R.LayoutNodeSized=16;var Zl;R.LayoutGroupLayout=Zl=32;R.LayoutNodeReplaced=64;var cp;R.LayoutStandard=cp=nl|vl|28|Zl|64;R.LayoutAll=16777215;
R.prototype.Ym=function(a,b,c,d,e,f,h){var k=this.g;null!==k&&(a===Cf&&"elements"===b?e instanceof D?ol(e,function(a){ql(k,a);pl(k,a)}):e instanceof nk&&Ll(k,e):a===Df&&"elements"===b&&(e instanceof D?ol(e,function(a){ul(k,a);tl(k,a)}):e instanceof nk&&Ml(k,e)),k.Lc(a,b,c,d,e,f,h))};R.prototype.updateTargetBindings=R.prototype.Hb=function(a){D.prototype.Hb.call(this,a);if(null!==this.data){a=this.ya.n;for(var b=a.length,c=0;c<b;c++){var d=a[c];d instanceof D&&ol(d,function(a){null!==a.data&&a.Hb()})}}};
R.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.ba;if(c instanceof Q){var d=c.Mm(a),b=b.RG(d),e=this.Oa;b!==e&&(b=null!==e?c.gb(e.data):void 0,e=c.tp,"function"===typeof e?e(a,b):a[e]=b,c.nx(a,d))}}}};v.u(R,{hw:"adornments"},function(){return null===this.ci?xa:this.ci.oE});R.prototype.findAdornment=R.prototype.So=function(a){var b=this.ci;return null===b?null:b.ja(a)};
R.prototype.addAdornment=R.prototype.Yk=function(a,b){if(null!==b){var c=null,d=this.ci;null!==d&&(c=d.ja(a));if(c!==b){if(null!==c){var e=c.g;null!==e&&e.remove(c)}null===d&&(this.ci=d=new na("string",Vg));b.ei!==a&&(b.fc=a);d.add(a,b);c=this.g;null!==c&&(c.add(b),b.data=this.data)}}};R.prototype.removeAdornment=R.prototype.bj=function(a){var b=this.ci;if(null!==b){var c=b.ja(a);if(null!==c){var d=c.g;null!==d&&d.remove(c)}b.remove(a);0===b.count&&(this.ci=null)}};
R.prototype.clearAdornments=R.prototype.Vs=function(){var a=this.ci;if(null!==a){for(var b=v.jb(),a=a.i;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.bj(b[c]);v.sa(b)}};
R.prototype.updateAdornments=function(){var a=this.g;if(null!==a){a:{if(this.hb&&this.tI){var b=this.Wt;if(!(null!==b&&this.U.G()&&this.isVisible()&&b.Zi()&&b.U.G()))break a;var c=this.So("Selection");if(null===c){c=this.uI;null===c&&(c=this instanceof W?a.GH:this instanceof V?a.cH:a.XH);if(!(c instanceof Vg))break a;Xg(c);c=c.copy();null!==c&&(c.fc="Selection",c.Zb=b)}if(null!==c){var d=c.placeholder;if(null!==d){var e=b.Ti(),f=0;b instanceof Y&&(f=b.lb);var h=v.Fl();h.m((b.Ha.width+f)*e,(b.Ha.height+
f)*e);d.za=h;v.$j(h)}c.angle=b.ol();c.type!==Di&&(d=v.L(),c.location=b.Xa(rb,d),v.v(d));this.Yk("Selection",c);break a}}this.bj("Selection")}dp(this,a);for(a=this.hw;a.next();)b=a.value,b.Hb(),b.N()}};function dp(a,b){b.Za.Pe.each(function(b){b.isEnabled&&b.updateAdornments(a)});b.Za.updateAdornments(a)}v.u(R,{layer:"layer"},function(){return this.mv});v.u(R,{g:"diagram"},function(){var a=this.mv;return null!==a?a.g:null});
v.defineProperty(R,{Tf:"layerName"},function(){return this.Kk},function(a){var b=this.Kk;if(b!==a){v.j(a,"string",R,"layerName");var c=this.g;if(null===c||null!==c.et(a)&&!c.Qp)if(this.Kk=a,null!==c&&c.qc(),this.h("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.g,null!==c&&(a=c.et(a),null!==a&&a!==b))){var d=b.Ne(-1,this,!0);0<=d&&c.Lc(Df,"parts",b,this,null,d,!0);b.visible!==a.visible&&this.nd(a.visible);d=a.cp(99999999,this,!0);0<=d&&c.Lc(Cf,"parts",a,null,this,!0,d);d=this.zt;if(null!==
d){var e=c.Sa;c.Sa=!0;d(this,b,a);c.Sa=e}}}});v.defineProperty(R,{zt:"layerChanged"},function(){return this.dr},function(a){var b=this.dr;b!==a&&(null!==a&&v.j(a,"function",R,"layerChanged"),this.dr=a,this.h("layerChanged",b,a))});v.defineProperty(R,{hn:"zOrder"},function(){return this.Ms},function(a){var b=this.Ms;if(b!==a){v.j(a,"number",R,"zOrder");this.Ms=a;var c=this.layer;null!==c&&ek(c,-1,this);this.h("zOrder",b,a);a=this.g;null!==a&&a.pa()}});
R.prototype.invalidateAdornments=R.prototype.Od=function(){var a=this.g;null!==a&&(Ak(a),0!==(this.Q&16384)!==!0&&(this.Q|=16384,a.ue()))};function ak(a){0!==(a.Q&16384)!==!1&&(a.updateAdornments(),a.Q&=-16385)}function Xm(a){if(!1===gl(a)){var b=a.g;null!==b&&(b.fg.add(a),a instanceof S&&!b.la.ib&&a.cf(),b.ue());ep(a,!0);a.si()}}function fp(a){if(!1!==gl(a)){var b=a.position,c=a.location;c.G()&&b.G()||gp(a,b,c);var c=a.mc,d=c.copy();c.Pa();c.x=b.x;c.y=b.y;c.freeze();a.Vw(d,c);ep(a,!1)}}
v.u(R,{bc:"locationObject"},function(){if(null===this.Pk){var a=this.Lz;""!==a?(a=this.ce(a),this.Pk=null!==a?a:this):this.Pk=this instanceof Vg?this.type!==Di&&null!==this.placeholder?this.placeholder:this:this}return this.Pk.visible?this.Pk:this});v.defineProperty(R,{QH:"minLocation"},function(){return this.sr},function(a){var b=this.sr;b.K(a)||(this.sr=a=a.S(),this.h("minLocation",b,a))});
v.defineProperty(R,{LH:"maxLocation"},function(){return this.lr},function(a){var b=this.lr;b.K(a)||(this.lr=a=a.S(),this.h("maxLocation",b,a))});v.defineProperty(R,{Lz:"locationObjectName"},function(){return this.ir},function(a){var b=this.ir;b!==a&&(this.ir=a,this.Pk=null,Rm(this),this.h("locationObjectName",b,a))});v.defineProperty(R,{ef:"locationSpot"},function(){return this.jr},function(a){var b=this.jr;b.K(a)||(this.jr=a=a.S(),Rm(this),this.h("locationSpot",b,a))});
R.prototype.move=function(a){this.position=a};R.prototype.moveTo=R.prototype.moveTo=function(a,b){var c=v.Mb(a,b);this.move(c);v.v(c)};R.prototype.isVisible=function(){if(!this.visible)return!1;var a=this.layer;if(null!==a&&!a.visible)return!1;a=this.g;if(null!==a&&(a=a.Na,a.df&&(a=a.fm.ja(this),null!==a&&a.ex)))return!0;a=this.Oa;return null===a||a.fe&&a.isVisible()?!0:!1};
R.prototype.nd=function(a){var b=this.g;a?(this.H(4),this.Od(),null!==b&&b.fg.add(this)):(this.H(8),this.Vs());this.rl();null!==b&&(b.qc(),b.pa())};
R.prototype.findObject=R.prototype.ce=function(a){if(this.name===a)return this;var b=this.dm;null===b&&(this.dm=b=new ta);if(void 0!==b[a])return b[a];for(var c=this.ya.n,d=c.length,e=0;e<d;e++){var f=c[e];if(f.name===a)return b[a]=f;if(f instanceof D)if(null===f.vj&&null===f.hg){if(f=f.ce(a),null!==f)return b[a]=f}else if(Jl(f)&&(f=f.ya.first(),null!==f&&f.name===a))return b[a]=f}return b[a]=null};
function hp(a,b,c,d){void 0===d&&(d=new z);c=c.se()?zb:c;var e=b.Ha;d.m(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(null===b||b===a)return d;b.transform.ub(d);for(b=b.R;null!==b&&b!==a;)b.transform.ub(d),b=b.R;a.Ok.ub(d);d.offset(-a.jd.x,-a.jd.y);return d}R.prototype.ensureBounds=R.prototype.sf=function(){kj(this,Infinity,Infinity);this.Ec()};
function dk(a,b){var c=a.BF,d;isNaN(a.Aj)&&(a.Aj=ho(a));d=a.Aj;var e=2*d;if(!a.wl)return c.m(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,f=b.width,h=b.height,k=a.shadowBlur,l=a.zI,f=f+k,h=h+k;d-=k/2;e-=k/2;0<l.x?f+=l.x:(d+=l.x,f-=l.x);0<l.y?h+=l.y:(e+=l.y,h-=l.y);c.m(d-1,e-1,f+2,h+2);return c}
R.prototype.Ec=function(){this.si();if(!1===fl(this))fp(this);else{var a=this.mc,b=v.ag();b.assign(a);a.Pa();var c=Zj(this);this.Ni(0,0,this.jd.width,this.jd.height);var d=this.position;gp(this,d,this.location);a.x=d.x;a.y=d.y;a.freeze();this.Vw(b,a);Hm(this,!1);b.K(a)?this.yf(c):!this.Pd()||K(b.width,a.width)&&K(b.height,a.height)||0<=this.aC&&this.H(16);v.Vb(b);ep(this,!1)}};
R.prototype.Vw=function(a,b){var c=this.g;if(null!==c){var d=!1;if(!1===c.sj&&a.G()){var e=c.$d,f=c.padding,h=e.x+f.left,k=e.y+f.top,l=e.width-2*f.right,e=e.height-2*f.bottom;a.x>h&&a.y>k&&a.right<l&&a.bottom<e&&b.x>h&&b.y>k&&b.right<l&&b.bottom<e&&(d=!0)}0!==(this.Q&65536)!==!0&&a.K(b)||rl(this,d,c);c.pa();a.K(b)||this.rl()}};
v.defineProperty(R,{location:"location"},function(){return this.xi},function(a){var b=this.xi;if(!b.K(a)){a=a.S();var c;c=a;if(this instanceof W)c=!1;else{this.xi=c;if(!1===fl(this)){Xm(this);var d=this.kb;if(d.G()){var e=d.copy();d.m(d.x+(c.x-b.x),d.y+(c.y-b.y));ip(this,this.g,d,e);this.h("position",e,d)}}c=!0}c&&this.h("location",b,a)}});
R.prototype.pA=function(a,b){if(this instanceof W||!a.G())return!1;var c=this.g;if(null!==c&&(ip(this,c,a,b),!0===c.la.ib))return!0;this.kb=a;c=this.xi;if(c.G()){var d=c.copy();c.m(c.x+(a.x-b.x),c.y+(a.y-b.y));this.h("location",d,c)}!1===gl(this)&&!1===fl(this)&&(Xm(this),fp(this));return!0};function ip(a,b,c,d){null===b||a instanceof Vg||(b=b.Na,b.pc&&Nj(b,a,"position",d.copy(),c.copy(),!1))}
R.prototype.px=function(a,b){var c=this.xi,d=this.kb;gl(this)||fl(this)?c.m(NaN,NaN):c.m(c.x+a-d.x,c.y+b-d.y);d.m(a,b);Xm(this)};
function gp(a,b,c){var d=v.L(),e=a.ef,f=a.bc;e.se()&&v.k("determineOffset: Part's locationSpot must be real: "+e.toString());var h=f.Ha,k=f instanceof Y?f.lb:0;d.$t(0,0,h.width+k,h.height+k,e);if(f!==a)for(d.offset(-k/2,-k/2),f.transform.ub(d),e=f.R;null!==e&&e!==a;)e.transform.ub(d),e=e.R;a.Ok.ub(d);d.offset(-a.jd.x,-a.jd.y);e=a.g;c.G()?(f=b.x,h=b.y,b.m(c.x-d.x,c.y-d.y),null!==e&&(c=e.Na,(k=c.tj)||!c.pc||a instanceof Vg||Nj(c,a,"position",new z(f,h),b,!1),k||b.x===f&&b.y===h||(k=e.tb,e.tb=!0,a.h("position",
new z(f,h),b),e.tb=k))):b.G()&&(f=c.copy(),c.m(b.x+d.x,b.y+d.y),c.K(f)||null===e||(k=e.tb,e.tb=!0,a.h("location",f,c),e.tb=k));v.v(d);a.si()}function rl(a,b,c){Im(a,!1);a instanceof S&&gm(c,a);a.layer.Gc||b||c.qc();b=a.mc;var d=c.rb;d.G()?(Zj(a)?Za(b,d)||a.yf(!1):b.yg(d)&&a.yf(!0),a.updateAdornments()):c.Fk=!0}R.prototype.vl=function(){return!0};
function bk(a,b){var c=a.mc;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)&&a.isVisible()){var d=a.transform;null!==a.nc&&(Nm(a,b,a.nc,!0,!0),b.fillRect(c.x,c.y,c.width,c.height));null===a.nc&&null===a.Ib&&(Nm(a,b,"rgba(0,0,0,0.4)",!0,!1),b.fillRect(c.x,c.y,c.width,c.height));null!==a.Ib&&(d.vt()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),c=a.Ha,Nm(a,b,a.Ib,!0,!1),b.fillRect(0,0,c.width,c.height),d.vt()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*
d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}R.prototype.Pd=function(){return!0};
v.defineProperty(R,{fc:"category"},function(){return this.ei},function(a){var b=this.ei;if(b!==a){v.j(a,"string",R,"category");var c=this.g,d=this.data,e=null;if(null!==c&&null!==d&&!(this instanceof Vg)){var f=c.ba.la;f.isEnabled&&!f.ib&&(e=this.clone(),e.ya.Tc(this.ya))}this.ei=a;this.h("category",b,a);null===c||null===d||this instanceof Vg?(e=this.Mf,null!==e&&(a=e.ci,null!==a&&a.remove(b),e.Yk(this.fc,this))):(f=c.ba,f.la.ib||(this instanceof W?(f instanceof Q?f.WE(d,a):f instanceof Qf&&f.xI(d,
a),c=Tl(c,a),null!==c&&(Xg(c),c=c.copy(),null!==c&&jp(this,c,b,a))):(null!==f&&f.lx(d,a),c=Ql(c,d,a),null!==c&&(Xg(c),c=c.copy(),null===c||c instanceof W||(c.location=this.location,jp(this,c,b,a)))),null!==e&&(b=this.clone(),b.ya.Tc(this.ya),this.h("self",e,b))))}});v.defineProperty(R,{self:"self"},function(){return this},function(a){jp(this,a,this.fc,a.fc)});var kp=!1;
function jp(a,b,c,d){b.constructor===a.constructor||kp||(kp=!0,v.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),v.trace("  Old class: "+v.af(a)+", new class: "+v.af(b)+", part: "+a.toString()));a.Vs();var e=a.data;c=a.Tf;var f=a.hb,h=a.hh,k=!0,l=!0,m=!1;if(a instanceof S)var n=a,k=n.Yi,l=n.md,m=n.hu;b.Wh(a);b.cloneProtected(a);a.ei=d;a.N();a.pa();b=a.g;d=!0;null!==b&&(d=b.tb,b.tb=!0);a.je=e;null!==e&&a.Hb();null!==b&&(b.tb=d);e=a.Tf;e!==c&&(a.Kk=c,
a.Tf=e);a instanceof S&&(n=a,n.Yi=k,n.md=l,n.hu=m,n.Pd()&&n.H(64));a.hb=f;a.hh=h}R.prototype.canCopy=function(){if(!this.AG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Vj)return!1;a=a.g;return null===a?!0:a.Vj?!0:!1};R.prototype.canDelete=function(){if(!this.FG)return!1;var a=this.layer;if(null===a)return!0;if(!a.xm)return!1;a=a.g;return null===a?!0:a.xm?!0:!1};
R.prototype.canEdit=function(){if(!this.GI)return!1;var a=this.layer;if(null===a)return!0;if(!a.lw)return!1;a=a.g;return null===a?!0:a.lw?!0:!1};R.prototype.canGroup=function(){if(!this.dH)return!1;var a=this.layer;if(null===a)return!0;if(!a.iw)return!1;a=a.g;return null===a?!0:a.iw?!0:!1};R.prototype.canMove=function(){if(!this.VH)return!1;var a=this.layer;if(null===a)return!0;if(!a.bl)return!1;a=a.g;return null===a?!0:a.bl?!0:!1};
R.prototype.canReshape=function(){if(!this.iI)return!1;var a=this.layer;if(null===a)return!0;if(!a.jw)return!1;a=a.g;return null===a?!0:a.jw?!0:!1};R.prototype.canResize=function(){if(!this.jI)return!1;var a=this.layer;if(null===a)return!0;if(!a.Us)return!1;a=a.g;return null===a?!0:a.Us?!0:!1};R.prototype.canRotate=function(){if(!this.mI)return!1;var a=this.layer;if(null===a)return!0;if(!a.kw)return!1;a=a.g;return null===a?!0:a.kw?!0:!1};
R.prototype.canSelect=function(){if(!this.Al)return!1;var a=this.layer;if(null===a)return!0;if(!a.of)return!1;a=a.g;return null===a?!0:a.of?!0:!1};v.defineProperty(R,{AG:"copyable"},function(){return 0!==(this.Q&1)},function(a){var b=0!==(this.Q&1);b!==a&&(this.Q^=1,this.h("copyable",b,a))});v.defineProperty(R,{FG:"deletable"},function(){return 0!==(this.Q&2)},function(a){var b=0!==(this.Q&2);b!==a&&(this.Q^=2,this.h("deletable",b,a))});
v.defineProperty(R,{GI:"textEditable"},function(){return 0!==(this.Q&4)},function(a){var b=0!==(this.Q&4);b!==a&&(this.Q^=4,this.h("textEditable",b,a),this.Od())});v.defineProperty(R,{dH:"groupable"},function(){return 0!==(this.Q&8)},function(a){var b=0!==(this.Q&8);b!==a&&(this.Q^=8,this.h("groupable",b,a))});v.defineProperty(R,{VH:"movable"},function(){return 0!==(this.Q&16)},function(a){var b=0!==(this.Q&16);b!==a&&(this.Q^=16,this.h("movable",b,a))});
v.defineProperty(R,{tI:"selectionAdorned"},function(){return 0!==(this.Q&32)},function(a){var b=0!==(this.Q&32);b!==a&&(this.Q^=32,this.h("selectionAdorned",b,a),this.Od())});v.defineProperty(R,{Gz:"isInDocumentBounds"},function(){return 0!==(this.Q&64)},function(a){var b=0!==(this.Q&64);if(b!==a){this.Q^=64;var c=this.g;null!==c&&c.qc();this.h("isInDocumentBounds",b,a)}});
v.defineProperty(R,{jE:"isLayoutPositioned"},function(){return 0!==(this.Q&128)},function(a){var b=0!==(this.Q&128);b!==a&&(this.Q^=128,this.h("isLayoutPositioned",b,a),this.H(a?4:8))});v.defineProperty(R,{Al:"selectable"},function(){return 0!==(this.Q&256)},function(a){var b=0!==(this.Q&256);b!==a&&(this.Q^=256,this.h("selectable",b,a),this.Od())});
v.defineProperty(R,{iI:"reshapable"},function(){return 0!==(this.Q&512)},function(a){var b=0!==(this.Q&512);b!==a&&(this.Q^=512,this.h("reshapable",b,a),this.Od())});v.defineProperty(R,{jI:"resizable"},function(){return 0!==(this.Q&1024)},function(a){var b=0!==(this.Q&1024);b!==a&&(this.Q^=1024,this.h("resizable",b,a),this.Od())});v.defineProperty(R,{mI:"rotatable"},function(){return 0!==(this.Q&2048)},function(a){var b=0!==(this.Q&2048);b!==a&&(this.Q^=2048,this.h("rotatable",b,a),this.Od())});
v.defineProperty(R,{hb:"isSelected"},function(){return 0!==(this.Q&4096)},function(a){var b=0!==(this.Q&4096);if(b!==a){var c=this.g;if(!a||this.canSelect()&&!(null!==c&&c.selection.count>=c.MH)){this.Q^=4096;var d=!1;if(null!==c){d=c.tb;c.tb=!0;var e=c.selection;e.Pa();a?e.add(this):e.remove(this);e.freeze()}this.h("isSelected",b,a);this.Od();a=this.vI;null!==a&&a(this);null!==c&&(c.ue(),c.tb=d)}}});
v.defineProperty(R,{hh:"isHighlighted"},function(){return 0!==(this.Q&524288)},function(a){var b=0!==(this.Q&524288);if(b!==a){this.Q^=524288;var c=this.g;null!==c&&(c=c.Om,c.Pa(),a?c.add(this):c.remove(this),c.freeze());this.h("isHighlighted",b,a);this.pa()}});v.defineProperty(R,{wl:"isShadowed"},function(){return 0!==(this.Q&8192)},function(a){var b=0!==(this.Q&8192);b!==a&&(this.Q^=8192,this.h("isShadowed",b,a),this.pa())});function gl(a){return 0!==(a.Q&32768)}
function ep(a,b){a.Q=b?a.Q|32768:a.Q&-32769}function Im(a,b){a.Q=b?a.Q|65536:a.Q&-65537}function Zj(a){return 0!==(a.Q&131072)}R.prototype.yf=function(a){this.Q=a?this.Q|131072:this.Q&-131073};function lp(a,b){a.Q=b?a.Q|1048576:a.Q&-1048577}v.defineProperty(R,{$D:"isAnimated"},function(){return 0!==(this.Q&262144)},function(a){var b=0!==(this.Q&262144);b!==a&&(this.Q^=262144,this.h("isAnimated",b,a))});
v.defineProperty(R,{lA:"selectionObjectName"},function(){return this.ks},function(a){var b=this.ks;b!==a&&(this.ks=a,this.om=null,this.h("selectionObjectName",b,a))});v.defineProperty(R,{uI:"selectionAdornmentTemplate"},function(){return this.hs},function(a){var b=this.hs;b!==a&&(this instanceof W&&(a.type=Di),this.hs=a,this.h("selectionAdornmentTemplate",b,a))});
v.u(R,{Wt:"selectionObject"},function(){if(null===this.om){var a=this.lA;null!==a&&""!==a?(a=this.ce(a),this.om=null!==a?a:this):this instanceof W?(a=this.path,this.om=null!==a?a:this):this.om=this}return this.om});v.defineProperty(R,{vI:"selectionChanged"},function(){return this.js},function(a){var b=this.js;b!==a&&(null!==a&&v.j(a,"function",R,"selectionChanged"),this.js=a,this.h("selectionChanged",b,a))});
v.defineProperty(R,{KE:"resizeAdornmentTemplate"},function(){return this.Vr},function(a){var b=this.Vr;b!==a&&(this.Vr=a,this.h("resizeAdornmentTemplate",b,a))});v.defineProperty(R,{ME:"resizeObjectName"},function(){return this.Xr},function(a){var b=this.Xr;b!==a&&(this.Xr=a,this.mo=null,this.h("resizeObjectName",b,a))});v.u(R,{LE:"resizeObject"},function(){if(null===this.mo){var a=this.ME;null!==a&&""!==a?(a=this.ce(a),this.mo=null!==a?a:this):this.mo=this}return this.mo});
v.defineProperty(R,{kI:"resizeCellSize"},function(){return this.Wr},function(a){var b=this.Wr;b.K(a)||(this.Wr=a=a.S(),this.h("resizeCellSize",b,a))});v.defineProperty(R,{nI:"rotateAdornmentTemplate"},function(){return this.Yr},function(a){var b=this.Yr;b!==a&&(this.Yr=a,this.h("rotateAdornmentTemplate",b,a))});v.defineProperty(R,{oI:"rotateObjectName"},function(){return this.Zr},function(a){var b=this.Zr;b!==a&&(this.Zr=a,this.no=null,this.h("rotateObjectName",b,a))});
v.u(R,{OE:"rotateObject"},function(){if(null===this.no){var a=this.oI;null!==a&&""!==a?(a=this.ce(a),this.no=null!==a?a:this):this.no=this}return this.no});v.defineProperty(R,{text:"text"},function(){return this.me},function(a){var b=this.me;b!==a&&(this.me=a,this.h("text",b,a))});
v.defineProperty(R,{Oa:"containingGroup"},function(){return this.vk},function(a){if(this.Pd()){var b=this.vk;if(b!==a){null===a||this!==a&&!a.Yh(this)||(this===a&&v.k("Cannot make a Group a member of itself: "+this.toString()),v.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString()));this.H(vl);var c=this.g;null!==b?mp(b,this):this instanceof V&&null!==c&&c.Wk.remove(this);this.vk=a;null!==a?np(a,this):this instanceof V&&null!==c&&c.Wk.add(this);this.H(nl);
if(null!==c){var d=this.data,e=c.ba;null!==d&&e instanceof Q&&e.nx(d,e.gb(null!==a?a.data:null))}d=this.tD;null!==d&&(e=!0,null!==c&&(e=c.Sa,c.Sa=!0),d(this,b,a),null!==c&&(c.Sa=e));if(this instanceof V)for(c=new J(R),Ig(c,this,!0,0,!0),c=c.i;c.next();)if(d=c.value,d instanceof S)for(d=d.te;d.next();)Ol(d.value);if(this instanceof S)for(d=this.te;d.next();)Ol(d.value);this.h("containingGroup",b,a);null!==a&&(b=a.layer,null!==b&&ek(b,-1,a))}}else v.k("cannot set the Part.containingGroup of a Link or Adornment")});
g=R.prototype;g.rl=function(){var a=this.Oa;null!==a&&(a.N(),null!==a.Gb&&a.Gb.N(),a.cf())};g.pa=function(){var a=this.g;null!==a&&!fl(this)&&!gl(this)&&this.isVisible()&&this.mc.G()&&a.pa(dk(this,this.mc))};g.qt=function(a){a||(a=this.vk,null!==a&&np(a,this))};g.rt=function(a){a||(a=this.vk,null!==a&&mp(a,this))};g.Jm=function(){var a=this.data;if(null!==a){var b=this.g;null!==b&&(b=b.ba,null!==b&&b.hx(a))}};
v.defineProperty(R,{tD:"containingGroupChanged"},function(){return this.fq},function(a){var b=this.fq;b!==a&&(null!==a&&v.j(a,"function",R,"containingGroupChanged"),this.fq=a,this.h("containingGroupChanged",b,a))});R.prototype.findSubGraphLevel=function(){return op(this,this)};function op(a,b){var c=b.Oa;return null!==c?1+op(a,c):b instanceof S&&(c=b.Ad,null!==c)?op(a,c):0}R.prototype.findTopLevelPart=function(){return pp(this,this)};
function pp(a,b){var c=b.Oa;return null!==c?pp(a,c):b instanceof S&&(c=b.Ad,null!==c)?pp(a,c):b}v.u(R,{fp:"isTopLevel"},function(){return null!==this.Oa||this instanceof S&&this.uf?!1:!0});R.prototype.isMemberOf=R.prototype.Yh=function(a){return a instanceof V?qp(this,this,a):!1};function qp(a,b,c){if(b===c||null===c)return!1;var d=b.Oa;return null===d||d!==c&&!qp(a,d,c)?b instanceof S&&(b=b.Ad,null!==b)?qp(a,b,c):!1:!0}
R.prototype.findCommonContainingGroup=R.prototype.NG=function(a){if(null===a)return null;if(this===a)return this.Oa;for(var b=this;null!==b;)b instanceof V&&lp(b,!0),b=b.Oa;for(var c=null,b=a;null!==b;){if(0!==(b.Q&1048576)){c=b;break}b=b.Oa}for(b=this;null!==b;)b instanceof V&&lp(b,!1),b=b.Oa;return c};v.defineProperty(R,{BH:"layoutConditions"},function(){return this.er},function(a){var b=this.er;b!==a&&(this.er=a,this.h("layoutConditions",b,a))});
R.prototype.canLayout=function(){if(!this.jE||!this.isVisible())return!1;var a=this.layer;return null!==a&&a.Gc||this instanceof S&&this.uf?!1:!0};R.prototype.invalidateLayout=R.prototype.H=function(a){void 0===a&&(a=16777215);var b;this.jE&&0!==(a&this.BH)?(b=this.layer,null!==b&&b.Gc||this instanceof S&&this.uf?b=!1:(b=this.g,b=null!==b&&b.la.ib?!1:!0)):b=!1;if(b)if(b=this.vk,null!==b){var c=b.Pb;null!==c?c.H():b.H(a)}else a=this.g,null!==a&&(c=a.Pb,null!==c&&c.H())};
function sl(a){if(!a.isVisible())return!1;a=a.layer;return null!==a&&a.Gc?!1:!0}v.defineProperty(R,{ED:"dragComputation"},function(){return this.yq},function(a){var b=this.yq;b!==a&&(null!==a&&v.j(a,"function",R,"dragComputation"),this.yq=a,this.h("dragComputation",b,a))});v.defineProperty(R,{zI:"shadowOffset"},function(){return this.qm},function(a){var b=this.qm;b.K(a)||(this.qm=a=a.S(),this.pa(),this.h("shadowOffset",b,a))});
v.defineProperty(R,{shadowColor:"shadowColor"},function(){return this.pm},function(a){var b=this.pm;b!==a&&(this.pm=a,this.pa(),this.h("shadowColor",b,a))});v.defineProperty(R,{shadowBlur:"shadowBlur"},function(){return this.og},function(a){var b=this.og;b!==a&&(this.og=a,this.pa(),this.h("shadowBlur",b,a))});function Vg(a){0===arguments.length?R.call(this,Xi):R.call(this,a);this.Q&=-257;this.Kk="Adornment";this.Gb=this.Mg=this.Db=null}v.Ja(Vg,R);v.ea("Adornment",Vg);
Vg.prototype.toString=function(){var a=this.Mf;return"Adornment("+this.fc+")"+(null!==a?a.toString():"")};Vg.prototype.updateRelationshipsFromData=function(){};Vg.prototype.Tm=function(a){var b=this.Zb.Y,c=this.Zb;if(b instanceof W&&c instanceof Y){var d=b.path,c=d.fh;b.Tm(a);c=d.fh;a=this.ya.n;b=a.length;for(d=0;d<b;d++){var e=a[d];e.Rf&&e instanceof Y&&(e.bb=c)}}};v.u(Vg,{placeholder:"placeholder"},function(){return this.Gb});
v.defineProperty(Vg,{Zb:"adornedObject"},function(){return this.Db},function(a){var b=this.Mf,c=null;null!==a&&(c=a.Y);null===b||null!==a&&b===c||b.bj(this.fc);this.Db=a;null!==c&&c.Yk(this.fc,this)});v.u(Vg,{Mf:"adornedPart"},function(){var a=this.Db;return null!==a?a.Y:null});Vg.prototype.vl=function(){var a=this.Db;if(null===a)return!0;a=a.Y;return null===a||!fl(a)};Vg.prototype.Pd=function(){return!1};v.u(Vg,{Oa:"containingGroup"},function(){return null});
Vg.prototype.Ym=function(a,b,c,d,e,f,h){if(a===Cf&&"elements"===b)if(e instanceof Ri){var k=e;null===this.Gb?this.Gb=k:this.Gb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else e instanceof D&&(k=e.dt(function(a){return a instanceof Ri}),k instanceof Ri&&(null===this.Gb?this.Gb=k:this.Gb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else a===Df&&"elements"===b&&null!==this.Gb&&(d===this.Gb?this.Gb=null:d instanceof D&&
this.Gb.ul(d)&&(this.Gb=null));R.prototype.Ym.call(this,a,b,c,d,e,f,h)};Vg.prototype.updateAdornments=function(){};Vg.prototype.Jm=function(){};function S(a){0===arguments.length?R.call(this,Xi):R.call(this,a);this.ec=new I(W);this.Xn=this.Nk=this.gr=this.fr=null;this.Yq=!0;this.Js=!1;this.Es=null;this.Yp=this.Zq=!0;this.Zp=ld;this.Xd=this.uh=null;this.Nr=rp;this.Sj=!1}v.Ja(S,R);v.ea("Node",S);
S.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.fr=this.fr;a.gr=this.gr;a.Nk=this.Nk;a.Yq=this.Yq;a.Js=this.Js;a.Es=this.Es;a.Zq=this.Zq;a.Yp=this.Yp;a.Zp=this.Zp.S();a.Nr=this.Nr};S.prototype.Wh=function(a){R.prototype.Wh.call(this,a);a.cf();a.uh=this.uh;a.Xd=null};var sp;S.DirectionDefault=sp=v.p(S,"DirectionDefault",0);S.DirectionAbsolute=v.p(S,"DirectionAbsolute",1);var tp;S.DirectionRotatedNode=tp=v.p(S,"DirectionRotatedNode",2);var zm;
S.DirectionRotatedNodeOrthogonal=zm=v.p(S,"DirectionRotatedNodeOrthogonal",3);S.SpreadingNone=v.p(S,"SpreadingNone",10);var rp;S.SpreadingEvenly=rp=v.p(S,"SpreadingEvenly",11);var up;S.SpreadingPacked=up=v.p(S,"SpreadingPacked",12);function vp(a,b){null!==b&&(null===a.uh&&(a.uh=new J(ok)),a.uh.add(b))}
function wp(a,b,c,d){if(null===b||null===a.uh)return null;for(var e=a.uh.i;e.next();){var f=e.value;if(f.sp===a&&f.Jt===b&&f.Yw===c&&f.Zw===d||f.sp===b&&f.Jt===a&&f.Yw===d&&f.Zw===c)return f}return null}S.prototype.invalidateLinkBundle=function(a,b,c){if(void 0===b||null===b)b="";if(void 0===c||null===c)c="";a=wp(this,a,b,c);null!==a&&a.dp()};
S.prototype.Ym=function(a,b,c,d,e,f,h){a===Cf&&"elements"===b?this.Xd=null:a===Df&&"elements"===b&&(null===this.g?this.Xd=null:d instanceof G&&bo(this,d,function(a,b){Ym(a,b,!0)}));R.prototype.Ym.call(this,a,b,c,d,e,f,h)};S.prototype.invalidateConnectedLinks=S.prototype.cf=function(a){void 0===a&&(a=null);for(var b=this.te;b.next();){var c=b.value;null!==a&&a.contains(c)||(xp(this,c.kd),xp(this,c.Td),c.ic())}};
function xp(a,b){if(null!==b){var c=b.Mr;null!==c&&c.dp();c=a.Oa;null===c||c.fe||xp(c,c.ll(""))}}S.prototype.vl=function(){return!0};v.defineProperty(S,{cI:"portSpreading"},function(){return this.Nr},function(a){var b=this.Nr;b!==a&&(this.Nr=a,this.h("portSpreading",b,a),a=this.g,null!==a&&a.la.ib||this.cf())});v.defineProperty(S,{mD:"avoidable"},function(){return this.Yp},function(a){var b=this.Yp;if(b!==a){this.Yp=a;var c=this.g;null!==c&&gm(c,this);this.h("avoidable",b,a)}});
v.defineProperty(S,{jG:"avoidableMargin"},function(){return this.Zp},function(a){"number"===typeof a?a=new cb(a):v.A(a,cb,S,"avoidableMargin");var b=this.Zp;if(!b.K(a)){this.Zp=a=a.S();var c=this.g;null!==c&&gm(c,this);this.h("avoidableMargin",b,a)}});S.prototype.canAvoid=function(){return this.mD&&!this.uf};S.prototype.getAvoidableRect=function(a){a.set(this.U);a.gw(this.jG);return a};S.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.isVisible();)a=a.Oa;return a};
S.prototype.isVisible=function(){if(!R.prototype.isVisible.call(this))return!1;var a=!0,b=!0,c=this.g;if(null!==c){a=c.Na;if(a.df&&(a=a.fm.ja(this),null!==a&&a.ex))return!0;a=c.Qd;b=c.zA===kk}if(b){if(c=this.ml(),null!==c&&!c.md)return!1}else if(c=a?this.PG():this.QG(),0<c.count&&c.all(function(a){return!a.md}))return!1;c=this.Ad;return null!==c?c.isVisible():!0};S.prototype.nd=function(a){R.prototype.nd.call(this,a);for(var b=this.te;b.next();)b.value.nd(a)};v.u(S,{te:"linksConnected"},function(){return this.ec.i});
S.prototype.findLinksConnected=S.prototype.JD=function(a){void 0===a&&(a=null);if(null===a)return this.ec.i;var b=new Aa(this.ec),c=this;b.Wm=function(b){return b.T===c&&b.xg===a||b.Z===c&&b.sh===a};return b};S.prototype.findLinksOutOf=S.prototype.Cw=function(a){void 0===a&&(a=null);var b=new Aa(this.ec),c=this;b.Wm=function(b){return b.T!==c?!1:null===a?!0:b.xg===a};return b};
S.prototype.findLinksInto=S.prototype.wg=function(a){void 0===a&&(a=null);var b=new Aa(this.ec),c=this;b.Wm=function(b){return b.Z!==c?!1:null===a?!0:b.sh===a};return b};
S.prototype.findNodesConnected=S.prototype.KD=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.ec.i;d.next();){var e=d.value;if(e.T===this){if(null===a||e.xg===a)e=e.Z,null!==b?b.add(e):null!==c&&c!==e?(b=new J(S),b.add(c),b.add(e)):c=e}else e.Z!==this||null!==a&&e.sh!==a||(e=e.T,null!==b?b.add(e):null!==c&&c!==e?(b=new J(S),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new ya(c):xa};
S.prototype.findNodesOutOf=S.prototype.QG=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.ec.i;d.next();){var e=d.value;e.T!==this||null!==a&&e.xg!==a||(e=e.Z,null!==b?b.add(e):null!==c&&c!==e?(b=new J(S),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new ya(c):xa};
S.prototype.findNodesInto=S.prototype.PG=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.ec.i;d.next();){var e=d.value;e.Z!==this||null!==a&&e.sh!==a||(e=e.T,null!==b?b.add(e):null!==c&&c!==e?(b=new J(S),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new ya(c):xa};
S.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new Aa(this.ec),e=this;d.Wm=function(d){return(d.T!==e||d.Z!==a||null!==b&&d.xg!==b||null!==c&&d.sh!==c)&&(d.T!==a||d.Z!==e||null!==c&&d.xg!==c||null!==b&&d.sh!==b)?!1:!0};return d};S.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new Aa(this.ec),e=this;d.Wm=function(d){return d.T!==e||d.Z!==a||null!==b&&d.xg!==b||null!==c&&d.sh===c?!1:!0};return d};
v.defineProperty(S,{DH:"linkConnected"},function(){return this.fr},function(a){var b=this.fr;b!==a&&(null!==a&&v.j(a,"function",S,"linkConnected"),this.fr=a,this.h("linkConnected",b,a))});v.defineProperty(S,{EH:"linkDisconnected"},function(){return this.gr},function(a){var b=this.gr;b!==a&&(null!==a&&v.j(a,"function",S,"linkDisconnected"),this.gr=a,this.h("linkDisconnected",b,a))});
v.defineProperty(S,{Rw:"linkValidation"},function(){return this.Nk},function(a){var b=this.Nk;b!==a&&(null!==a&&v.j(a,"function",S,"linkValidation"),this.Nk=a,this.h("linkValidation",b,a))});
function yp(a,b,c){xp(a,c);if(!a.ec.contains(b)){a.ec.add(b);var d=a.DH;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.Sa,f.Sa=!0);d(a,b,c);null!==f&&(f.Sa=e)}b.Hc&&(c=b.T,b=b.Z,null!==c&&null!==b&&c!==b&&(d=!0,f=a.g,null!==f&&(d=f.Qd),a=d?b:c,e=d?c:b,a.Sj||(a.Sj=e),!e.Yi||null!==f&&f.la.ib||(d?c===e&&(e.Yi=!1):b===e&&(e.Yi=!1))))}}
function zp(a,b,c){xp(a,c);if(a.ec.remove(b)){var d=a.EH,e=a.g;if(null!==d){var f=!0;null!==e&&(f=e.Sa,e.Sa=!0);d(a,b,c);null!==e&&(e.Sa=f)}b.Hc&&(c=!0,null!==e&&(c=e.Qd),a=c?b.Z:b.T,b=c?b.T:b.Z,null!==a&&(a.Sj=!1),null===b||b.Yi||(0===b.ec.count?(b.Sj=null,null!==e&&e.la.ib||(b.Yi=!0)):$l(b)))}}
function $l(a){a.Sj=!1;if(0!==a.ec.count){var b=!0,c=a.g;if(null===c||!c.la.ib){null!==c&&(b=c.Qd);for(c=a.ec.i;c.next();){var d=c.value;if(d.Hc)if(b){if(d.T===a){a.Yi=!1;return}}else if(d.Z===a){a.Yi=!1;return}}a.Yi=!0}}}
S.prototype.updateRelationshipsFromData=function(){R.prototype.updateRelationshipsFromData.call(this);var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.ba;if(c instanceof Qf){var d=c.Nm(a),b=b.Ze(d),e=this.ml();b!==e&&(b=null!==e?c.gb(e.data):void 0,e=c.vp,"function"===typeof e?e(a,b):a[e]=b,c.qh(a,d))}}}};S.prototype.qt=function(a){R.prototype.qt.call(this,a);a||($l(this),a=this.Xn,null!==a&&Ap(a,this))};
S.prototype.rt=function(a){R.prototype.rt.call(this,a);a||(a=this.Xn,null!==a&&null!==a.Ce&&(a.Ce.remove(this),a.N()))};S.prototype.Jm=function(){if(0<this.ec.count){var a=this.g;if(null!==a)for(var b=a.nb.DD,c=this.ec.copy().i;c.next();){var d=c.value;b?a.remove(d):(d.T===this&&(d.T=null),d.Z===this&&(d.Z=null))}}this.Ad=null;R.prototype.Jm.call(this)};v.u(S,{uf:"isLinkLabel"},function(){return null!==this.Xn});
v.defineProperty(S,{Ad:"labeledLink"},function(){return this.Xn},function(a){var b=this.Xn;if(b!==a){var c=this.g,d=this.data;if(null!==b&&(null!==b.Ce&&(b.Ce.remove(this),b.N()),null!==c&&null!==d&&!c.la.ib)){var e=b.data,f=c.ba;if(null!==e&&f instanceof Q){var h=f.gb(d);void 0!==h&&f.FE(e,h)}}this.Xn=a;null!==a&&(Ap(a,this),null===c||null===d||c.la.ib||(e=a.data,f=c.ba,null!==e&&f instanceof Q&&(h=f.gb(d),void 0!==h&&f.Zy(e,h))));Rm(this);this.h("labeledLink",b,a)}});
S.prototype.findPort=S.prototype.ll=function(a){if(null===this.Xd){if(""===a&&!1===this.Ch)return this;Zm(this)}var b=this.Xd.ja(a);return null!==b||""!==a&&(b=this.Xd.ja(""),null!==b)?b:this};v.u(S,{port:"port"},function(){return this.ll("")});v.u(S,{ports:"ports"},function(){null===this.Xd&&Zm(this);return this.Xd.oE});function Zm(a){null===a.Xd?a.Xd=new na("string",G):a.Xd.clear();bo(a,a,function(a,c){var d=c.Sd;null!==d&&a.Xd.add(d,c)});0===a.Xd.count&&a.Xd.add("",a)}
function Ym(a,b,c){var d=b.Sd;if(null!==d&&(null!==a.Xd&&a.Xd.remove(d),b=a.g,null!==b&&c)){c=null;for(d=a.JD(d);d.next();)a=d.value,null===c&&(c=v.jb()),c.push(a);if(null!==c){for(d=0;d<c.length;d++)a=c[d],b.remove(a);v.sa(c)}}}
S.prototype.isInTreeOf=function(a){if(null===a||a===this)return!1;var b=!0,c=this.g;null!==c&&(b=c.Qd);c=this;if(b)for(;c!==a;){for(var b=null,d=c.ec.i;d.next();){var e=d.value;if(e.Hc&&(b=e.T,b!==c&&b!==this))break}if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){b=null;for(d=c.ec.i;d.next()&&(e=d.value,!e.Hc||(b=e.Z,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0};
S.prototype.findTreeRoot=function(){var a=!0,b=this.g;null!==b&&(a=b.Qd);b=this;if(a)for(;;){for(var a=null,c=b.ec.i;c.next();){var d=c.value;if(d.Hc&&(a=d.T,a!==b&&a!==this))break}if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){a=null;for(c=b.ec.i;c.next()&&(d=c.value,!d.Hc||(a=d.Z,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}};
S.prototype.findCommonTreeParent=function(a){if(null===a)return null;if(this===a)return this;for(var b=this;null!==b;)lp(b,!0),b=b.ml();for(var c=null,b=a;null!==b;){if(0!==(b.Q&1048576)){c=b;break}b=b.ml()}for(b=this;null!==b;)lp(b,!1),b=b.ml();return c};S.prototype.findTreeParentLink=S.prototype.Vo=function(){var a=!0,b=this.g;null!==b&&(a=b.Qd);b=this.ec.i;if(a)for(;b.next();){if(a=b.value,a.Hc&&a.T!==this)return a}else for(;b.next();)if(a=b.value,a.Hc&&a.Z!==this)return a;return null};
S.prototype.findTreeParentNode=S.prototype.ml=function(){var a=this.Sj;if(null===a)return null;if(a instanceof S)return a;var b=!0,a=this.g;null!==a&&(b=a.Qd);a=this.ec.i;if(b)for(;a.next();){if(b=a.value,b.Hc&&(b=b.T,b!==this))return this.Sj=b}else for(;a.next();)if(b=a.value,b.Hc&&(b=b.Z,b!==this))return this.Sj=b;return this.Sj=null};S.prototype.findTreeParentChain=function(){function a(b,d){if(null!==b){d.add(b);var e=b.Vo();null!==e&&(d.add(e),a(b.ml(),d))}}var b=new J(R);a(this,b);return b};
S.prototype.findTreeLevel=function(){return Bp(this,this)};function Bp(a,b){var c=b.ml();return null===c?0:1+Bp(a,c)}S.prototype.findTreeChildrenLinks=S.prototype.Ew=function(){var a=!0,b=this.g;null!==b&&(a=b.Qd);if(a){var a=new Aa(this.ec),c=this;a.Wm=function(a){return a.Hc&&a.T===c?!0:!1}}else a=new Aa(this.ec),c=this,a.Wm=function(a){return a.Hc&&a.Z===c?!0:!1};return a};
S.prototype.findTreeChildrenNodes=S.prototype.MD=function(){var a=!0,b=this.g;null!==b&&(a=b.Qd);var c=b=null,d=this.ec.i;if(a)for(;d.next();)a=d.value,a.Hc&&a.T===this&&(a=a.Z,null!==b?b.add(a):null!==c&&c!==a?(b=new I(S),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.Hc&&a.Z===this&&(a=a.T,null!==b?b.add(a):null!==c&&c!==a?(b=new I(S),b.add(c),b.add(a)):c=a);return null!==b?b.i:null!==c?new ya(c):xa};
S.prototype.findTreeParts=function(a){void 0===a&&(a=Infinity);v.j(a,"number",S,"collapseTree:level");var b=new J(R);Ig(b,this,!1,a,!0);return b};S.prototype.collapseTree=S.prototype.collapseTree=function(a){void 0===a&&(a=1);v.We(a,S,"collapseTree:level");1>a&&(a=1);var b=this.g;if(null!==b&&!b.gh){b.gh=!0;var c=new J(S);c.add(this);Cp(this,c,b.Qd,a,b.Na,this,b.zA===kk);b.gh=!1}};
function Cp(a,b,c,d,e,f,h){if(1<d)for(var k=c?a.Cw():a.wg();k.next();){var l=k.value;l.Hc&&(l=l.yz(a),null===l||l===a||b.contains(l)||(b.add(l),Cp(l,b,c,d-1,e,f,h)))}else Dp(a,b,c,e,f,h)}function Dp(a,b,c,d,e,f){for(var h=e===a?!0:a.md,k=c?a.Cw():a.wg();k.next();){var l=k.value;l.Hc&&(l=l.yz(a),null===l||l===a||b.contains(l)||(b.add(l),h&&(f&&Wj(d,l,e),l.rl(),l.nd(!1)),l.md&&(l.hu=l.md,Dp(l,b,c,d,e,f))))}a.md=!1}
S.prototype.expandTree=S.prototype.expandTree=function(a){void 0===a&&(a=2);v.We(a,S,"expandTree:level");2>a&&(a=2);var b=this.g;if(null!==b&&!b.gh){b.gh=!0;var c=new J(S);c.add(this);Ep(this,c,b.Qd,a,b.Na,this,b.zA===kk);b.gh=!1}};function Ep(a,b,c,d,e,f,h){for(var k=f===a?!1:a.md,l=c?a.Cw():a.wg();l.next();){var m=l.value;m.Hc&&(k||m.rg||m.ic(),m=m.yz(a),null!==m&&m!==a&&!b.contains(m)&&(b.add(m),k||(m.nd(!0),m.rl(),h&&Vj(e,m,f)),2<d||m.hu))&&(m.hu=!1,Ep(m,b,c,d-1,e,f,h))}a.md=!0}
v.defineProperty(S,{md:"isTreeExpanded"},function(){return this.Yq},function(a){var b=this.Yq;if(b!==a){this.Yq=a;var c=this.g;this.h("isTreeExpanded",b,a);b=this.NI;if(null!==b){var d=!0;null!==c&&(d=c.Sa,c.Sa=!0);b(this);null!==c&&(c.Sa=d)}null!==c&&c.la.ib?this.nd(a):a?this.expandTree():this.collapseTree()}});v.defineProperty(S,{hu:"wasTreeExpanded"},function(){return this.Js},function(a){var b=this.Js;b!==a&&(this.Js=a,this.h("wasTreeExpanded",b,a))});
v.defineProperty(S,{NI:"treeExpandedChanged"},function(){return this.Es},function(a){var b=this.Es;b!==a&&(null!==a&&v.j(a,"function",S,"treeExpandedChanged"),this.Es=a,this.h("treeExpandedChanged",b,a))});v.defineProperty(S,{Yi:"isTreeLeaf"},function(){return this.Zq},function(a){var b=this.Zq;b!==a&&(this.Zq=a,this.h("isTreeLeaf",b,a))});
function W(){R.call(this,Di);this.eg=null;this.Bh="";this.qg=this.Gq=null;this.Sh="";this.Ds=null;this.Ur=this.Tr=this.Sr=!1;this.$q=!0;this.Rp=Gi;this.kq=0;this.nq=Gi;this.oq=NaN;this.km=gn;this.ss=.5;this.Ce=null;this.Zc=(new I(z)).freeze();this.oo=this.Ee=null;this.rg=!1;this.Iv=null;this.Ny=!1;this.Mg=this.Dn=this.zn=this.di=this.qi=this.bb=null;this.Qy=new z;this.KC=this.IC=null;this.Px=!1;this.ga=null}v.Ja(W,R);v.ea("Link",W);
W.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.Bh=this.Bh;a.Gq=this.Gq;a.Sh=this.Sh;a.Ds=this.Ds;a.Sr=this.Sr;a.Tr=this.Tr;a.Ur=this.Ur;a.$q=this.$q;a.Rp=this.Rp;a.kq=this.kq;a.nq=this.nq;a.oq=this.oq;a.km=this.km;a.ss=this.ss;null!==this.ga&&(a.ga=this.ga.copy())};W.prototype.Wh=function(a){R.prototype.Wh.call(this,a);this.Bh=a.Bh;this.Sh=a.Sh;a.Ee=null;a.ic();a.di=this.di};var gn;W.Normal=gn=v.p(W,"Normal",1);W.Orthogonal=v.p(W,"Orthogonal",2);
W.AvoidsNodes=v.p(W,"AvoidsNodes",6);var Fp;W.AvoidsNodesStraight=Fp=v.p(W,"AvoidsNodesStraight",7);var Gi;W.None=Gi=v.p(W,"None",0);var Ni;W.Bezier=Ni=v.p(W,"Bezier",9);var Fi;W.JumpGap=Fi=v.p(W,"JumpGap",10);var Ei;W.JumpOver=Ei=v.p(W,"JumpOver",11);var dn;W.End=dn=v.p(W,"End",17);var en;W.Scale=en=v.p(W,"Scale",18);var fn;W.Stretch=fn=v.p(W,"Stretch",19);var vo;W.OrientAlong=vo=v.p(W,"OrientAlong",21);var Xn;W.OrientPlus90=Xn=v.p(W,"OrientPlus90",22);var Zn;
W.OrientMinus90=Zn=v.p(W,"OrientMinus90",23);var Gp;W.OrientOpposite=Gp=v.p(W,"OrientOpposite",24);var Hp;W.OrientUpright=Hp=v.p(W,"OrientUpright",25);var Yn;W.OrientPlus90Upright=Yn=v.p(W,"OrientPlus90Upright",26);var $n;W.OrientMinus90Upright=$n=v.p(W,"OrientMinus90Upright",27);var ao;W.OrientUpright45=ao=v.p(W,"OrientUpright45",28);W.prototype.Me=function(){null===this.ga&&(this.ga=new ym)};
W.prototype.vl=function(){var a=this.T;if(null!==a){var b=a.findVisibleNode();null!==b&&(a=b);if(fl(a)||gl(a))return!1}a=this.Z;return null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),fl(a)||gl(a))?!1:!0};W.prototype.pA=function(){return!1};W.prototype.Pd=function(){return!1};
W.prototype.computeAngle=function(a,b,c){a=0;switch(b){default:case Gi:a=0;break;case vo:a=c;break;case Xn:a=c+90;break;case Zn:a=c-90;break;case Gp:a=c+180;break;case Hp:a=re(c);90<a&&270>a&&(a-=180);break;case Yn:a=re(c+90);90<a&&270>a&&(a-=180);break;case $n:a=re(c-90);90<a&&270>a&&(a-=180);break;case ao:a=re(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return re(a)};
v.defineProperty(W,{T:"fromNode"},function(){return this.eg},function(a){var b=this.eg;if(b!==a){var c=this.kd;null!==b&&(this.qg!==b&&zp(b,this,c),Ip(this),this.H(vl));this.eg=a;null!==a&&this.nd(a.isVisible());this.qi=null;this.ic();var d=this.g;if(null!==d){var e=this.data,f=d.ba;if(null!==e)if(f instanceof Q){var h=null!==a?a.data:null;f.mx(e,f.gb(h))}else f instanceof Qf&&(h=null!==a?a.data:null,d.Qd?f.qh(e,f.gb(h)):(null!==b&&f.qh(b.data,void 0),f.qh(h,f.gb(null!==this.qg?this.qg.data:null))))}e=
this.kd;f=this.PD;null!==f&&(h=!0,null!==d&&(h=d.Sa,d.Sa=!0),f(this,c,e),null!==d&&(d.Sa=h));null!==a&&(this.qg!==a&&yp(a,this,e),Jp(this),this.H(nl));this.h("fromNode",b,a);Ol(this)}});
v.defineProperty(W,{xg:"fromPortId"},function(){return this.Bh},function(a){var b=this.Bh;if(b!==a){var c=this.kd;null!==c&&xp(this.T,c);Ip(this);this.Bh=a;var d=this.kd;null!==d&&xp(this.T,d);var e=this.g;if(null!==e){var f=this.data,h=e.ba;null!==f&&h instanceof Q&&h.nA(f,a)}c!==d&&(this.qi=null,this.ic(),f=this.PD,null!==f&&(h=!0,null!==e&&(h=e.Sa,e.Sa=!0),f(this,c,d),null!==e&&(e.Sa=h)));Jp(this);this.h("fromPortId",b,a)}});v.u(W,{kd:"fromPort"},function(){var a=this.eg;return null===a?null:a.ll(this.Bh)});
v.defineProperty(W,{PD:"fromPortChanged"},function(){return this.Gq},function(a){var b=this.Gq;b!==a&&(null!==a&&v.j(a,"function",W,"fromPortChanged"),this.Gq=a,this.h("fromPortChanged",b,a))});
v.defineProperty(W,{Z:"toNode"},function(){return this.qg},function(a){var b=this.qg;if(b!==a){var c=this.Td;null!==b&&(this.eg!==b&&zp(b,this,c),Ip(this),this.H(vl));this.qg=a;null!==a&&this.nd(a.isVisible());this.qi=null;this.ic();var d=this.g;if(null!==d){var e=this.data,f=d.ba;if(null!==e)if(f instanceof Q){var h=null!==a?a.data:null;f.qx(e,f.gb(h))}else f instanceof Qf&&(h=null!==a?a.data:null,d.Qd?(null!==b&&f.qh(b.data,void 0),f.qh(h,f.gb(null!==this.eg?this.eg.data:null))):f.qh(e,f.gb(h)))}e=
this.Td;f=this.gF;null!==f&&(h=!0,null!==d&&(h=d.Sa,d.Sa=!0),f(this,c,e),null!==d&&(d.Sa=h));null!==a&&(this.eg!==a&&yp(a,this,e),Jp(this),this.H(nl));this.h("toNode",b,a);Ol(this)}});
v.defineProperty(W,{sh:"toPortId"},function(){return this.Sh},function(a){var b=this.Sh;if(b!==a){var c=this.Td;null!==c&&xp(this.Z,c);Ip(this);this.Sh=a;var d=this.Td;null!==d&&xp(this.Z,d);var e=this.g;if(null!==e){var f=this.data,h=e.ba;null!==f&&h instanceof Q&&h.qA(f,a)}c!==d&&(this.qi=null,this.ic(),f=this.gF,null!==f&&(h=!0,null!==e&&(h=e.Sa,e.Sa=!0),f(this,c,d),null!==e&&(e.Sa=h)));Jp(this);this.h("toPortId",b,a)}});v.u(W,{Td:"toPort"},function(){var a=this.qg;return null===a?null:a.ll(this.Sh)});
v.defineProperty(W,{gF:"toPortChanged"},function(){return this.Ds},function(a){var b=this.Ds;b!==a&&(null!==a&&v.j(a,"function",W,"toPortChanged"),this.Ds=a,this.h("toPortChanged",b,a))});v.defineProperty(W,{xb:"fromSpot"},function(){return null!==this.ga?this.ga.qj:fc},function(a){this.Me();var b=this.ga.qj;b.K(a)||(a=a.S(),this.ga.qj=a,this.h("fromSpot",b,a),this.ic())});
v.defineProperty(W,{nl:"fromEndSegmentLength"},function(){return null!==this.ga?this.ga.oj:NaN},function(a){this.Me();var b=this.ga.oj;b!==a&&(0>a&&v.va(a,">= 0",W,"fromEndSegmentLength"),this.ga.oj=a,this.h("fromEndSegmentLength",b,a),this.ic())});v.defineProperty(W,{lt:"fromEndSegmentDirection"},function(){return null!==this.ga?this.ga.nj:sp},function(a){this.Me();var b=this.ga.nj;b!==a&&(this.ga.nj=a,this.h("fromEndSegmentDirection",b,a),this.ic())});
v.defineProperty(W,{mt:"fromShortLength"},function(){return null!==this.ga?this.ga.pj:NaN},function(a){this.Me();var b=this.ga.pj;b!==a&&(this.ga.pj=a,this.h("fromShortLength",b,a),this.ic())});v.defineProperty(W,{yb:"toSpot"},function(){return null!==this.ga?this.ga.Rj:fc},function(a){this.Me();var b=this.ga.Rj;b.K(a)||(a=a.S(),this.ga.Rj=a,this.h("toSpot",b,a),this.ic())});
v.defineProperty(W,{Gl:"toEndSegmentLength"},function(){return null!==this.ga?this.ga.Pj:NaN},function(a){this.Me();var b=this.ga.Pj;b!==a&&(0>a&&v.va(a,">= 0",W,"toEndSegmentLength"),this.ga.Pj=a,this.h("toEndSegmentLength",b,a),this.ic())});v.defineProperty(W,{eu:"toEndSegmentDirection"},function(){return null!==this.ga?this.ga.Oj:sp},function(a){this.Me();var b=this.ga.Oj;b!==a&&(this.ga.Oj=a,this.h("toEndSegmentDirection",b,a),this.ic())});
v.defineProperty(W,{fu:"toShortLength"},function(){return null!==this.ga?this.ga.Qj:NaN},function(a){this.Me();var b=this.ga.Qj;b!==a&&(this.ga.Qj=a,this.h("toShortLength",b,a),this.ic())});function Ol(a){var b=a.T,c=a.Z;null!==b?null!==c?Kp(a,b.NG(c)):Kp(a,null):Kp(a,null)}function Kp(a,b){var c=a.vk;if(c!==b){null!==c&&mp(c,a);a.vk=b;null!==b&&np(b,a);var d=a.tD;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.Sa,f.Sa=!0);d(a,c,b);null!==f&&(f.Sa=e)}!a.rg||a.IC!==c&&a.KC!==c||a.ic()}}
W.prototype.rl=function(){var a=this.Oa;null!==a&&this.T!==a&&this.Z!==a&&a.rw&&R.prototype.rl.call(this)};W.prototype.getOtherNode=W.prototype.yz=function(a){var b=this.T;return a===b?this.Z:b};W.prototype.getOtherPort=function(a){var b=this.kd;return a===b?this.Td:b};v.u(W,{UJ:"isLabeledLink"},function(){return null===this.Ce?!1:0<this.Ce.count});v.u(W,{Sf:"labelNodes"},function(){return null===this.Ce?xa:this.Ce.i});function Ap(a,b){null===a.Ce&&(a.Ce=new J(S));a.Ce.add(b);a.N()}
W.prototype.qt=function(a){R.prototype.qt.call(this,a);Lp(this)&&Hi(this,this.U);a||(a=this.eg,null!==a&&yp(a,this,this.kd),a=this.qg,null!==a&&yp(a,this,this.Td),Jp(this))};W.prototype.rt=function(a){R.prototype.rt.call(this,a);Lp(this)&&Hi(this,this.U);a||(a=this.eg,null!==a&&zp(a,this,this.kd),a=this.qg,null!==a&&zp(a,this,this.Td),Ip(this))};
W.prototype.Jm=function(){this.rg=!0;if(null!==this.Ce){var a=this.g;if(null!==a)for(var b=this.Ce.copy().i;b.next();)a.remove(b.value)}b=this.data;null!==b&&(a=this.g,null!==a&&(a=a.ba,a instanceof Q?a.gx(b):a instanceof Qf&&a.qh(b,void 0)))};
W.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.ba;if(c instanceof Q){var d=c.pl(a),e=b.Ze(d),f=this.T;e!==f&&(e=null!==f?c.gb(f.data):void 0,f=c.ip,"function"===typeof f?f(a,e):a[f]=e,c.mx(a,d));d=c.ql(a);e=b.Ze(d);f=this.Z;e!==f&&(e=null!==f?c.gb(f.data):void 0,f=c.kp,"function"===typeof f?f(a,e):a[f]=e,c.qx(a,d));var h=c.ak(a);if(0<h.length||0<this.Sf.count){if(1===h.length&&1===this.Sf.count&&(b=h[0],d=this.Sf.first(),c.gb(d.data)===
b))return;var d=(new J).Tc(h),k=new J;this.Sf.each(function(a){null!==a.data&&(a=c.gb(a.data),void 0!==a&&k.add(a))});b=k.copy();b.fA(d);d=d.copy();d.fA(k);if(0<b.count||0<d.count)h.length=0,k.each(function(a){h.push(a)}),b.each(function(b){c.FE(a,b)}),d.each(function(b){c.Zy(a,b)})}}}}};
W.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;R.prototype.move.call(this,a);this.xl(c,b);for(a=this.Sf;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};v.defineProperty(W,{fI:"relinkableFrom"},function(){return this.Sr},function(a){var b=this.Sr;b!==a&&(this.Sr=a,this.h("relinkableFrom",b,a),this.Od())});
v.defineProperty(W,{gI:"relinkableTo"},function(){return this.Tr},function(a){var b=this.Tr;b!==a&&(this.Tr=a,this.h("relinkableTo",b,a),this.Od())});W.prototype.canRelinkFrom=function(){if(!this.fI)return!1;var a=this.layer;if(null===a)return!0;if(!a.ym)return!1;a=a.g;return null===a||a.ym?!0:!1};W.prototype.canRelinkTo=function(){if(!this.gI)return!1;var a=this.layer;if(null===a)return!0;if(!a.ym)return!1;a=a.g;return null===a||a.ym?!0:!1};
v.defineProperty(W,{Rt:"resegmentable"},function(){return this.Ur},function(a){var b=this.Ur;b!==a&&(this.Ur=a,this.h("resegmentable",b,a),this.Od())});v.defineProperty(W,{Hc:"isTreeLink"},function(){return this.$q},function(a){var b=this.$q;b!==a&&(this.$q=a,this.h("isTreeLink",b,a),null!==this.T&&$l(this.T),null!==this.Z&&$l(this.Z))});v.u(W,{path:"path"},function(){var a=this.Ye();return a instanceof Y?a:null});
v.u(W,{Zm:"routeBounds"},function(){this.en();var a=new A;var b=Infinity,c=Infinity,d=this.oa;if(0===d)a.m(NaN,NaN,0,0);else{if(1===d)d=this.l(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.m(d.x,d.y,0,0);else if(2===d){var e=this.l(0),f=this.l(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y);a.m(e.x,e.y,0,0);a.fj(f)}else if(this.computeCurve()===Ni&&3<=d&&!this.jc)if(e=this.l(0),b=e.x,c=e.y,a.m(b,c,0,0),3===d)d=this.l(1),b=Math.min(d.x,b),c=Math.min(d.y,c),f=this.l(2),b=Math.min(f.x,b),c=Math.min(f.y,c),Yd(e.x,
e.y,d.x,d.y,d.x,d.y,f.x,f.y,.5,a);else for(var h=3;h<d;h+=3){var k=this.l(h-2);h+3>=d&&(h=d-1);var l=this.l(h-1),f=this.l(h);Yd(e.x,e.y,k.x,k.y,l.x,l.y,f.x,f.y,.5,a);b=Math.min(f.x,b);c=Math.min(f.y,c);e=f}else for(e=this.l(0),f=this.l(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.m(e.x,e.y,0,0),a.fj(f),h=2;h<d;h++)e=this.l(h),b=Math.min(e.x,b),c=Math.min(e.y,c),a.fj(e);this.Qy.m(b-a.x,c-a.y)}return this.Iv=a});v.u(W,{uE:"midPoint"},function(){this.en();return this.computeMidPoint(new z)});
W.prototype.computeMidPoint=function(a){var b=this.oa;if(0===b)return a.assign(Dd),a;if(1===b)return a.assign(this.l(0)),a;if(2===b){var c=this.l(0),d=this.l(1);a.m((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===Ni&&3<=b&&!this.jc){if(3===b)return this.l(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=this.l(e),d=this.l(e+1),f=this.l(e+2),e=this.l(e+3),b=d.x,h=d.y,d=f.x,k=f.y,f=(b+d)/2,l=(h+k)/2,h=((c.y+h)/2+l)/2,k=(l+(k+e.y)/2)/2;a.x=(((c.x+b)/2+f)/2+(f+(d+e.x)/2)/2)/2;a.y=(h+k)/2}else a.assign(this.l(e));
return a}e=0;f=v.jb();for(h=0;h<b-1;h++)c=0,c=this.l(h),d=this.l(h+1),Hc(c.x,d.x)?(c=d.y-c.y,0>c&&(c=-c)):Hc(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.rf(d)),f.push(c),e+=c;for(d=h=c=0;c<e/2&&h<b;){d=f[h];if(c+d>e/2)break;c+=d;h++}v.sa(f);b=this.l(h);f=this.l(h+1);b.x===f.x?b.y>f.y?a.m(b.x,b.y-(e/2-c)):a.m(b.x,b.y+(e/2-c)):b.y===f.y?b.x>f.x?a.m(b.x-(e/2-c),b.y):a.m(b.x+(e/2-c),b.y):(c=(e/2-c)/d,a.m(b.x+c*(f.x-b.x),b.y+c*(f.y-b.y)));return a};v.u(W,{tE:"midAngle"},function(){this.en();return this.computeMidAngle()});
W.prototype.computeMidAngle=function(){var a=this.oa;if(2>a)return NaN;if(this.computeCurve()===Ni&&4<=a&&!this.jc){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),b=this.l(c),d=this.l(c+1),a=this.l(c+2),c=this.l(c+3),e=d.x,d=d.y,f=a.x,a=a.y,h=(e+f)/2,k=(d+a)/2;return Va(((b.x+e)/2+h)/2,((b.y+d)/2+k)/2,(h+(f+c.x)/2)/2,(k+(a+c.y)/2)/2)}if(0<c&&c+1<a)return b=this.l(c-1),d=this.l(c+1),b.xc(d)}c=a/2|0;if(0===a%2)return b=this.l(c-1),d=this.l(c),4<=a&&b.Fc(d)&&(b=this.l(c-2),a=this.l(c+1),
c=b.rf(d),e=d.rf(a),!(c>e+10))?e>c+10?d.xc(a):b.xc(a):b.xc(d);b=this.l(c-1);d=this.l(c);a=this.l(c+1);c=b.rf(d);e=d.rf(a);return c>e+10?b.xc(d):e>c+10?d.xc(a):b.xc(a)};
v.defineProperty(W,{points:"points"},function(){return this.Zc},function(a){var b=this.Zc;if(b!==a){var c=null;if(Array.isArray(a)){var d=0===a.length%2;if(d)for(var e=0;e<a.length;e++)if("number"!==typeof a[e]||isNaN(a[e])){d=!1;break}if(d)for(c=new I(z),d=0;d<a.length/2;d++)e=(new z(a[2*d],a[2*d+1])).freeze(),c.add(e);else{for(var f=!0,d=0;d<a.length;d++)if(e=a[d],!v.Ta(e)||"number"!==typeof e.x||isNaN(e.x)||"number"!==typeof e.y||isNaN(e.y)){f=!1;break}if(f)for(c=new I(z),d=0;d<a.length;d++)e=
a[d],c.add((new z(e.x,e.y)).freeze());else v.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+a)}}else if(a instanceof I)for(c=a.copy(),a=c.i;a.next();)a.value.freeze();else v.k("Link.points value is not an instance of List or Array: "+a);c.freeze();this.Zc=c;this.de();this.N();Mp(this);a=this.g;null!==a&&(a.Qm||a.la.ib||a.Sw.add(this),a.Na.pc&&(this.oo=c));this.h("points",b,c)}});v.u(W,{oa:"pointsCount"},function(){return this.Zc.count});
W.prototype.getPoint=W.prototype.l=function(a){return this.Zc.n[a]};W.prototype.setPoint=W.prototype.zf=function(a,b){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.Ig(a,b)};W.prototype.setPointAt=W.prototype.V=function(a,b,c){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.Ig(a,new z(b,c))};
W.prototype.insertPoint=function(a,b){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.yd(a,b)};W.prototype.insertPointAt=W.prototype.w=function(a,b,c){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.yd(a,new z(b,c))};W.prototype.addPoint=W.prototype.Th=function(a){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.add(a)};
W.prototype.addPointAt=W.prototype.$k=function(a,b){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.add(new z(a,b))};W.prototype.removePoint=W.prototype.GE=function(a){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.Vc(a)};W.prototype.clearPoints=W.prototype.Mo=function(){null===this.Ee&&v.k("Call Link.startRoute before modifying the points of the route.");this.Zc.clear()};
W.prototype.movePoints=W.prototype.xl=function(a,b){for(var c=new I(z),d=this.Zc.i;d.next();){var e=d.value;c.add((new z(e.x+a,e.y+b)).freeze())}c.freeze();d=this.Zc;this.Zc=c;this.N();Mp(this);e=this.g;null!==e&&e.Na.pc&&(this.oo=c);this.h("points",d,c)};W.prototype.startRoute=W.prototype.Cl=function(){null===this.Ee&&(this.Ee=this.Zc,this.Zc=this.Zc.copy())};
W.prototype.commitRoute=W.prototype.Pi=function(){if(null!==this.Ee){for(var a=this.Ee,b=this.Zc,c=Infinity,d=Infinity,e=a.n,f=e.length,h=0;h<f;h++)var k=e[h],c=Math.min(k.x,c),d=Math.min(k.y,d);for(var l=Infinity,m=Infinity,n=b.n,p=n.length,h=0;h<p;h++)k=n[h],l=Math.min(k.x,l),m=Math.min(k.y,m),k.freeze();b.freeze();if(p===f)for(h=0;h<p;h++){if(f=e[h],k=n[h],f.x-c!==k.x-l||f.y-d!==k.y-m){this.N();this.de();break}}else this.N(),this.de();this.Ee=null;c=this.g;null!==c&&c.Na.pc&&(this.oo=b);Mp(this);
this.h("points",a,b)}};W.prototype.rollbackRoute=W.prototype.lI=function(){null!==this.Ee&&(this.Zc=this.Ee,this.Ee=null)};function Mp(a){0===a.Zc.count?a.rg=!1:(a.rg=!0,a.zn=a.l(0).copy(),a.Dn=a.l(a.oa-1).copy(),Np(a,!1))}W.prototype.invalidateRoute=W.prototype.ic=function(){if(!this.Ny){var a=this.g;a&&(a.Sw.contains(this)||a.la.ib||a.Na.vH&&!a.Na.df)||(a=this.path,null!==a&&(this.rg=!1,this.N(),a.N()))}};v.defineProperty(W,{Jp:"suspendsRouting"},function(){return this.Ny},function(a){this.Ny=a});
W.prototype.updateRoute=W.prototype.en=function(){if(!this.rg&&!this.Px){var a=!0;try{this.Px=!0,this.Cl(),a=this.computePoints()}finally{this.Px=!1,a?this.Pi():this.lI()}}};
W.prototype.computePoints=function(){var a=this.g;if(null===a)return!1;var b=this.T,c=null;null===b?(a.lm||(a.Jv=new Y,a.Jv.za=pd,a.Jv.lb=0,a.lm=new S,a.lm.add(a.Jv),a.lm.sf()),this.zn&&(a.lm.position=a.lm.location=this.zn,a.lm.sf(),b=a.lm,c=a.Jv)):c=this.kd;if(null!==c&&!b.isVisible()){var d=b.findVisibleNode();null!==d&&d!==b?(b=d,c=d.ll("")):b=d}this.IC=b;if(null===b||!b.location.G())return!1;for(;!(null===c||c.U.G()&&c.Zi());)c=c.R;if(null===c)return!1;var d=this.Z,e=null;null===d?(a.mm||(a.Kv=
new Y,a.Kv.za=pd,a.Kv.lb=0,a.mm=new S,a.mm.add(a.Kv),a.mm.sf()),this.Dn&&(a.mm.position=a.mm.location=this.Dn,a.mm.sf(),d=a.mm,e=a.Kv)):e=this.Td;null===e||d.isVisible()||(a=d.findVisibleNode(),null!==a&&a!==d?(d=a,e=a.ll("")):d=a);this.KC=d;if(null===d||!d.location.G())return!1;for(;!(null===e||e.U.G()&&e.Zi());)e=e.R;if(null===e)return!1;var a=this.oa,f=Op(this,c),h=Pp(this,e),k=c===e&&null!==c,l=this.jc,m=this.Ke===Ni;this.qi=k&&!l?m=!0:!1;var n=this.Qs===Gi||k;if(l||f!==qb||h!==qb||k){m=this.sl;
n&&(l&&m||k)&&this.Mo();var p=k?this.computeCurviness():0,q=this.getLinkPoint(b,c,f,!0,l,d,e),r=0,s=0,t=0;if(l||f!==qb||k){var u=this.computeEndSegmentLength(b,c,f,!0),t=this.getLinkDirection(b,c,q,f,!0,l,d,e);k&&(t-=l?90:30,0>p&&(t-=180));0>t?t+=360:360<=t&&(t-=360);k&&(u+=Math.abs(p));0===t?r=u:90===t?s=u:180===t?r=-u:270===t?s=-u:(r=u*Math.cos(t*Math.PI/180),s=u*Math.sin(t*Math.PI/180));if(f.se()&&k){var x=c.Xa(zb,v.L()),w=v.Mb(x.x+1E3*r,x.y+1E3*s);this.getLinkPointFromPoint(b,c,x,w,!0,q);v.v(x);
v.v(w)}}var u=this.getLinkPoint(d,e,h,!1,l,b,c),y=0,B=0,H=0;if(l||h!==qb||k)x=this.computeEndSegmentLength(d,e,h,!1),H=this.getLinkDirection(d,e,u,h,!1,l,b,c),k&&(H+=l?0:30,0>p&&(H+=180)),0>H?H+=360:360<=H&&(H-=360),k&&(x+=Math.abs(p)),0===H?y=x:90===H?B=x:180===H?y=-x:270===H?B=-x:(y=x*Math.cos(H*Math.PI/180),B=x*Math.sin(H*Math.PI/180)),h.se()&&k&&(x=e.Xa(zb,v.L()),w=v.Mb(x.x+1E3*y,x.y+1E3*B),this.getLinkPointFromPoint(d,e,x,w,!1,u),v.v(x),v.v(w));e=q;if(l||f!==qb||k)e=new z(q.x+r,q.y+s);c=u;if(l||
h!==qb||k)c=new z(u.x+y,u.y+B);!n&&!l&&f===qb&&3<a&&this.adjustPoints(0,q,a-2,c)?this.zf(a-1,u):!n&&!l&&h===qb&&3<a&&this.adjustPoints(1,e,a-1,u)?this.zf(0,q):!n&&!l&&4<a&&this.adjustPoints(1,e,a-2,c)?(this.zf(0,q),this.zf(a-1,u)):!n&&l&&6<=a&&!m&&this.adjustPoints(1,e,a-2,c)?(this.zf(0,q),this.zf(a-1,u)):(this.Mo(),this.Th(q),(l||f!==qb||k)&&this.Th(e),l&&this.addOrthoPoints(e,t,c,H,b,d),(l||h!==qb||k)&&this.Th(c),this.Th(u))}else f=!1,!n&&3<=a&&(n=this.getLinkPoint(b,c,qb,!0,!1,d,e),h=this.getLinkPoint(d,
e,qb,!1,!1,b,c),f=this.adjustPoints(0,n,a-1,h))&&(n=this.getLinkPoint(b,c,qb,!0,!1,d,e),h=this.getLinkPoint(d,e,qb,!1,!1,b,c),this.adjustPoints(0,n,a-1,h)),f||(this.Mo(),m?(a=this.getLinkPoint(b,c,qb,!0,!1,d,e),n=this.getLinkPoint(d,e,qb,!1,!1,b,c),f=n.x-a.x,h=n.y-a.y,k=this.computeCurviness(),m=l=0,q=a.x+f/3,t=a.y+h/3,r=q,s=t,K(h,0)?s=0<f?s-k:s+k:(l=-f/h,m=Math.sqrt(k*k/(l*l+1)),0>k&&(m=-m),r=(0>h?-1:1)*m+q,s=l*(r-q)+t),q=a.x+2*f/3,t=a.y+2*h/3,u=q,y=t,K(h,0)?y=0<f?y-k:y+k:(u=(0>h?-1:1)*m+q,y=l*(u-
q)+t),this.Mo(),this.Th(a),this.$k(r,s),this.$k(u,y),this.Th(n),this.zf(0,this.getLinkPoint(b,c,qb,!0,!1,d,e)),this.zf(3,this.getLinkPoint(d,e,qb,!1,!1,b,c))):(a=d,d=this.getLinkPoint(b,c,qb,!0,!1,a,e),e=this.getLinkPoint(a,e,qb,!1,!1,b,c),this.hasCurviness()?(h=e.x-d.x,b=e.y-d.y,c=this.computeCurviness(),a=d.x+h/2,n=d.y+b/2,f=a,k=n,K(b,0)?k=0<h?k-c:k+c:(h=-h/b,f=Math.sqrt(c*c/(h*h+1)),0>c&&(f=-f),f=(0>b?-1:1)*f+a,k=h*(f-a)+n),this.Th(d),this.$k(f,k)):this.Th(d),this.Th(e)));return!0};
function Qp(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
W.prototype.getLinkPointFromPoint=function(a,b,c,d,e,f){void 0===f&&(f=new z);if(null===a||null===b)return f.assign(c),f;a.isVisible()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port));var h=e=0,k=0,l=0;a=null;e=b.R;null===e||e.Lg()||(e=e.R);if(null===e)e=d.x,h=d.y,k=c.x,l=c.y;else{a=e.Zg;e=1/(a.m11*a.m22-a.m12*a.m21);var k=a.m22*e,l=-a.m12*e,m=-a.m21*e,n=a.m11*e,p=e*(a.m21*a.dy-a.m22*a.dx),q=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*k+d.y*m+p;h=d.x*l+d.y*n+q;k=c.x*k+c.y*m+p;l=c.x*l+c.y*n+q}b.Zo(e,h,k,l,
f);null!==a&&f.transform(a);return f};function Rp(a,b){var c=b.Mr;null===c&&(c=new Sp,c.port=b,c.Jc=b.Y,b.Mr=c);return Tp(c,a)}
W.prototype.getLinkPoint=function(a,b,c,d,e,f,h,k){void 0===k&&(k=new z);if(c.bd())return b.Xa(c,k),k;if(c.Wi()&&(c=Rp(this,b),null!==c)){k.assign(c.jp);if(e&&this.jx===Fp){var l=Rp(this,h);if(null!==l&&c.Hm<l.Hm){c=v.L();var l=v.L(),m=new A(b.Xa(rb,c),b.Xa(Eb,l)),n=this.computeSpot(!d);a=this.getLinkPoint(f,h,n,!d,e,a,b,l);a.x>=m.x&&a.x<=m.x+m.width?k.x=a.x:a.y>=m.y&&a.y<=m.y+m.height&&(k.y=a.y);v.v(c);v.v(l)}}return k}f=b.Xa(zb,v.L());l=c=null;this.oa>(e?6:2)?(l=d?this.l(1):this.l(this.oa-2),e&&
(l=Qp(f,l.copy()))):(c=v.L(),l=h.Xa(zb,c),e&&(l=Qp(f,l)),v.v(c));this.getLinkPointFromPoint(a,b,f,l,d,k);v.v(f);return k};
W.prototype.getLinkDirection=function(a,b,c,d,e,f,h,k){a:if(d.bd())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.Wi()){var l=Rp(this,b);if(null!==l)switch(l.ge){case v.dd:c=270;break a;case v.Nc:c=180;break a;default:case v.Xc:c=0;break a;case v.Wc:c=90;break a}}var l=b.Xa(zb,v.L()),m=null,n=null;this.oa>(f?6:2)?(n=e?this.l(1):this.l(this.oa-2),n=f?Qp(l,n.copy()):c):(m=v.L(),n=k.Xa(zb,m),v.v(m));c=0;c=Math.abs(n.x-l.x)>Math.abs(n.y-
l.y)?n.x>=l.x?0:180:n.y>=l.y?90:270;v.v(l)}d.se()&&h.Yh(a)&&(c+=180,360<=c&&(c-=360));a=sp;a=e?this.lt:this.eu;a===sp&&(a=e?b.lt:b.eu);switch(a){case tp:b=b.ol();c+=b;360<=c&&(c-=360);break;case sp:case zm:b=b.ol();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};
W.prototype.computeEndSegmentLength=function(a,b,c,d){if(null!==b&&c.Wi()&&(a=Rp(this,b),null!==a))return a.yw;a=NaN;a=d?this.nl:this.Gl;null!==b&&isNaN(a)&&(a=d?b.nl:b.Gl);isNaN(a)&&(a=10);return a};W.prototype.computeSpot=function(a){return a?Op(this,this.kd):Pp(this,this.Td)};function Op(a,b){if(null===b)return zb;var c=a.xb;c.Uc()&&(void 0===b&&(b=a.kd),null!==b&&(c=b.xb));return c===fc?qb:c}
function Pp(a,b){if(null===b)return zb;var c=a.yb;c.Uc()&&(void 0===b&&(b=a.Td),null!==b&&(c=b.yb));return c===fc?qb:c}W.prototype.computeOtherPoint=function(a,b){var c=b.Xa(zb),d;d=b.Mr;d=null!==d?Tp(d,this):null;null!==d&&(c=d.jp);return c};W.prototype.computeShortLength=function(a){return a?Up(this):Vp(this)};function Up(a){var b=a.mt;isNaN(b)&&(a=a.kd,null!==a&&(b=a.mt));return isNaN(b)?0:b}function Vp(a){var b=a.fu;isNaN(b)&&(a=a.Td,null!==a&&(b=a.fu));return isNaN(b)?0:b}
W.prototype.Zj=function(a,b,c,d,e,f){if(!1===this.Hg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=f;void 0===f&&(h=v.rh(),h.reset());h.multiply(this.transform);if(this.Em(a,h))return io(this,b,c,e),void 0===f&&v.$e(h),!0;if(this.yg(a,h)){var k=!1;if(!this.Qg)for(var l=this.ya.n,m=l.length;m--;){var n=l[m];if(n.visible||n===this.bc){var p=n.U,q=this.Ha;if(!(p.x>q.width||p.y>q.height||0>p.x+p.width||0>p.y+p.height)){p=v.rh();p.set(h);if(n instanceof D)k=n.Zj(a,b,c,d,e,p);else if(this.path===
n){var k=n,r=a,s=d,q=p;if(!1===k.Hg)k=!1;else if(q.multiply(k.transform),s)b:{var t=r,u=q;if(k.Em(t,u))k=!0;else{if(void 0===u&&(u=k.transform,t.Xj(k.U))){k=!0;break b}var q=t.left,r=t.right,s=t.top,t=t.bottom,x=v.L(),w=v.L(),y=v.L(),B=v.rh();B.set(u);B.wE(k.transform);B.Dz();w.x=r;w.y=s;w.transform(B);x.x=q;x.y=s;x.transform(B);u=!1;so(k,x,w,y)?u=!0:(x.x=r,x.y=t,x.transform(B),so(k,x,w,y)?u=!0:(w.x=q,w.y=t,w.transform(B),so(k,x,w,y)?u=!0:(x.x=q,x.y=s,x.transform(B),so(k,x,w,y)&&(u=!0))));v.$e(B);
v.v(x);v.v(w);v.v(y);k=u}}else k=k.Em(r,q)}else k=Em(n,a,d,p);k&&(null!==b&&(n=b(n)),n&&(null===c||c(n))&&e.add(n));v.$e(p)}}}void 0===f&&v.$e(h);return k||null!==this.background||null!==this.zm}void 0===f&&v.$e(h);return!1};v.u(W,{jc:"isOrthogonal"},function(){return 2===(this.km.value&2)});v.u(W,{sl:"isAvoiding"},function(){return 4===(this.km.value&4)});W.prototype.computeCurve=function(){if(null===this.qi){var a=this.kd,b=this.jc;this.qi=null!==a&&a===this.Td&&!b}return this.qi?Ni:this.Ke};
W.prototype.computeCorner=function(){if(this.Ke===Ni)return 0;var a=this.kz;if(isNaN(a)||0>a)a=10;return a};W.prototype.findMidLabel=function(){for(var a=this.path,b=this.ya.n,c=b.length,d=0;d<c;d++){var e=b[d];if(e!==a&&!e.Rf&&(-Infinity===e.ve||isNaN(e.ve)))return e}for(a=this.Sf;a.next();)if(b=a.value,-Infinity===b.ve||isNaN(b.ve))return b;return null};
W.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var a;a=Math.max(14,this.computeThickness());var b=this.kd,c=this.Td;if(null!==b&&null!==c){var d=this.findMidLabel();if(null!==d){var e=d.Ha,f=d.margin,h=isNaN(e.width)?30:e.width*d.scale+f.left+f.right,e=isNaN(e.height)?14:e.height*d.scale+f.top+f.bottom,d=d.Vt;d===vo||d===Hp||d===Gp?a=Math.max(a,e):d===Zn||d===$n||d===Xn||d===Yn?a=Math.max(a,h):(b=b.Xa(zb).xc(c.Xa(zb))/180*Math.PI,a=Math.max(a,Math.abs(Math.sin(b)*h)+Math.abs(Math.cos(b)*
e)+1));this.Ke===Ni&&(a*=1.333)}}return a};W.prototype.arrangeBundledLinks=function(a,b){if(b)for(var c=0;c<a.length;c++)a[c].ic()};W.prototype.computeCurviness=function(){var a=this.uw;if(isNaN(a)){var a=16,b=this.di;if(null!==b){for(var c=v.jb(),d=0,e=b.links,f=0;f<e.length;f++){var h=e[f],h=h.computeSpacing();c.push(h);d+=h}d=-d/2;for(f=0;f<e.length;f++){h=e[f];if(h===this){a=d+c[f]/2;break}d+=c[f]}b.sp===this.T&&(a=-a);v.sa(c)}}return a};
W.prototype.computeThickness=function(){if(!this.isVisible())return 0;var a=this.path;return null!==a?Math.max(a.lb,1):1};W.prototype.hasCurviness=function(){return!isNaN(this.uw)||null!==this.di};
W.prototype.adjustPoints=function(a,b,c,d){var e=this.Qs;if(this.jc){if(e===en)return!1;e===fn&&(e=dn)}switch(e){case en:var f=this.l(a),h=this.l(c);if(!f.Fc(b)||!h.Fc(d)){var e=f.x,f=f.y,k=h.x-e,l=h.y-f,m=Math.sqrt(k*k+l*l);if(!Hc(m,0)){var n=0;Hc(k,0)?n=0>l?-Math.PI/2:Math.PI/2:(n=Math.atan(l/Math.abs(k)),0>k&&(n=Math.PI-n));var h=b.x,p=b.y,l=d.x-h,q=d.y-p,r=Math.sqrt(l*l+q*q),k=0;Hc(l,0)?k=0>q?-Math.PI/2:Math.PI/2:(k=Math.atan(q/Math.abs(l)),0>l&&(k=Math.PI-k));m=r/m;n=k-n;this.zf(a,b);for(a+=
1;a<c;a++)b=this.l(a),k=b.x-e,l=b.y-f,b=Math.sqrt(k*k+l*l),Hc(b,0)||(q=0,Hc(k,0)?q=0>l?-Math.PI/2:Math.PI/2:(q=Math.atan(l/Math.abs(k)),0>k&&(q=Math.PI-q)),k=q+n,b*=m,this.V(a,h+b*Math.cos(k),p+b*Math.sin(k)));this.zf(c,d)}}return!0;case fn:f=this.l(a);p=this.l(c);if(!f.Fc(b)||!p.Fc(d)){var e=f.x,f=f.y,h=p.x,p=p.y,m=(h-e)*(h-e)+(p-f)*(p-f),k=b.x,n=b.y,l=d.x,q=d.y,r=0,s=1;0!==l-k?(r=(q-n)/(l-k),s=Math.sqrt(1+1/(r*r))):r=9E9;this.zf(a,b);for(a+=1;a<c;a++){b=this.l(a);var t=b.x,u=b.y,x=.5;0!==m&&(x=
((e-t)*(e-h)+(f-u)*(f-p))/m);var w=e+x*(h-e),y=f+x*(p-f);b=Math.sqrt((t-w)*(t-w)+(u-y)*(u-y));u<r*(t-w)+y&&(b=-b);0<r&&(b=-b);t=k+x*(l-k);x=n+x*(q-n);0!==r?(b=t+b/s,this.V(a,b,x-(b-t)/r)):this.V(a,t,x+b)}this.zf(c,d)}return!0;case dn:return this.jc&&(e=this.l(a),f=this.l(a+1),h=this.l(a+2),K(e.y,f.y)?K(f.x,h.x)?this.V(a+1,f.x,b.y):K(f.y,h.y)&&this.V(a+1,b.x,f.y):K(e.x,f.x)&&(K(f.y,h.y)?this.V(a+1,b.x,f.y):K(f.x,h.x)&&this.V(a+1,f.x,b.y)),e=this.l(c),f=this.l(c-1),h=this.l(c-2),K(e.y,f.y)?K(f.x,h.x)?
this.V(c-1,f.x,d.y):K(f.y,h.y)&&this.V(c-1,d.x,f.y):K(e.x,f.x)&&(K(f.y,h.y)?this.V(c-1,d.x,f.y):K(f.x,h.x)&&this.V(c-1,f.x,d.y))),this.zf(a,b),this.zf(c,d),!0;default:return!1}};
W.prototype.addOrthoPoints=function(a,b,c,d,e,f){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var h=e.U.copy(),k=f.U.copy();if(h.G()&&k.G()){h.Qf(8,8);k.Qf(8,8);h.fj(a);k.fj(c);var l,m;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&k.right>a.x||90===d&&c.y>a.y&&k.right>a.x)l=new z(c.x,a.y),m=new z(c.x,(a.y+c.y)/2),180===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x<k.left?this.computeMidOrthoPosition(a.x,
k.left,!1):a.x<k.right&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.right,m.x=l.x,m.y=c.y):0===d&&a.x<k.left&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new z(a.x,c.y);m=new z((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)180===d&&(k.Fa(a)||h.Fa(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,
k.bottom),!0):c.y>a.y&&(180===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x>=h.left&&c.x<=a.x||a.x<=k.right&&a.x>=c.x){if(90===d||270===d)l=new z(Math.max((a.x+c.x)/2,a.x),a.y),m=new z(l.x,c.y)}else l.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,0===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&k.left<a.x||
90===d&&c.y>a.y&&k.left<a.x)l=new z(c.x,a.y),m=new z(c.x,(a.y+c.y)/2),0===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x>k.right?this.computeMidOrthoPosition(a.x,k.right,!1):a.x>k.left&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.left,m.x=l.x,m.y=c.y):180===d&&a.x>k.right&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new z(a.x,c.y);m=new z((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)0===d&&(k.Fa(a)||h.Fa(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,k.bottom),!0):c.y>a.y&&(0===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x<=h.right&&c.x>=a.x||a.x>=k.left&&a.x<=c.x){if(90===d||270===d)l=new z(Math.min((a.x+c.x)/2,a.x),a.y),m=new z(l.x,c.y)}else l.y=270===
d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,180===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&k.bottom>a.y||0===d&&c.x>a.x&&k.bottom>a.y)l=new z(a.x,c.y),m=new z((a.x+c.x)/2,c.y),270===d?(l.y=this.computeMidOrthoPosition(a.y,c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(l.y=a.y<k.top?this.computeMidOrthoPosition(a.y,k.top,!0):a.y<k.bottom&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?
this.computeMidOrthoPosition(a.y,c.y,!0):k.bottom,m.x=c.x,m.y=l.y):90===d&&a.y<k.top&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new z(c.x,a.y);m=new z(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<h.left||180===d&&c.x>h.right)270===d&&(k.Fa(a)||h.Fa(c))?l.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(270===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,
Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y>=h.top&&c.y<=a.y||a.y<=k.bottom&&a.y>=c.y){if(0===d||180===d)l=new z(a.x,Math.max((a.y+c.y)/2,a.y)),m=new z(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,90===d?h.right:Math.max(h.right,k.right)),m.x=l.x,m.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&k.top<a.y||0===d&&c.x>a.x&&k.top<a.y)l=new z(a.x,c.y),m=new z((a.x+c.x)/2,c.y),90===d?(l.y=this.computeMidOrthoPosition(a.y,
c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(l.y=a.y>k.bottom?this.computeMidOrthoPosition(a.y,k.bottom,!0):a.y>k.top&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?this.computeMidOrthoPosition(a.y,c.y,!0):k.top,m.x=c.x,m.y=l.y):270===d&&a.y>k.bottom&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new z(c.x,a.y);m=new z(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<h.left||180===d&&c.x>h.right)90===d&&(k.Fa(a)||h.Fa(c))?l.x=this.computeMidOrthoPosition(a.x,
c.x,!1):c.x<a.x&&(90===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(90===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y<=h.bottom&&c.y>=a.y||a.y>=k.top&&a.y<=c.y){if(0===d||180===d)l=new z(a.x,Math.min((a.y+c.y)/2,a.y)),m=new z(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,270===d?h.right:Math.max(h.right,
k.right)),m.x=l.x,m.y=c.y}var n=l,p=m;if(this.sl){var q=this.g,r;(r=null===q)||(q.Na.df?r=!1:(r=q.Wa,r=r instanceof Zg?!r.Yv||r.oH:!0),r=!r);if(r||h.Fa(c)&&!f.Yh(e)||k.Fa(a)&&!e.Yh(f)||e===f||this.layer.Gc)a=!1;else if(e=bm(q,!0,this.Oa,null),e.hp(Math.min(a.x,n.x),Math.min(a.y,n.y),Math.abs(a.x-n.x),Math.abs(a.y-n.y))&&e.hp(Math.min(n.x,p.x),Math.min(n.y,p.y),Math.abs(n.x-p.x),Math.abs(n.y-p.y))&&e.hp(Math.min(p.x,c.x),Math.min(p.y,c.y),Math.abs(p.x-c.x),Math.abs(p.y-c.y)))a=!1;else if(h=h.copy().bi(k),
h.Qf(2*e.Lo,2*e.Jo),Wp(e,a,b,c,d,h),k=Xp(e,c.x,c.y),e.abort||999999!==k||(em(e),k=e.aF,h.Qf(e.Lo*k,e.Jo*k),Wp(e,a,b,c,d,h),k=Xp(e,c.x,c.y)),e.abort||999999!==k||(em(e),k=e.pE,h.Qf(e.Lo*k,e.Jo*k),Wp(e,a,b,c,d,h),k=Xp(e,c.x,c.y)),!e.abort&&999999===k&&e.tF&&(em(e),Wp(e,a,b,c,d,e.mb),k=Xp(e,c.x,c.y)),!e.abort&&999999>k&&0!==Xp(e,c.x,c.y)){Yp(this,e,c.x,c.y,d,!0);d=this.l(2);if(4>this.oa)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.V(2,d.x,d.y),this.w(3,d.x,d.y);else if(c=this.l(3),0===b||
180===b)K(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.V(2,b,a.y),this.V(3,b,c.y)):K(d.y,c.y)?(Math.abs(a.y-d.y)<=e.Jo/2&&(this.V(2,d.x,a.y),this.V(3,c.x,a.y)),this.w(2,d.x,a.y)):this.V(2,a.x,d.y);else if(90===b||270===b)K(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.V(2,a.x,b),this.V(3,c.x,b)):K(d.x,c.x)?(Math.abs(a.x-d.x)<=e.Lo/2&&(this.V(2,a.x,d.y),this.V(3,a.x,c.y)),this.w(2,a.x,d.y)):this.V(2,d.x,a.y);a=!0}else a=!1}else a=!1;a||(this.Th(l),this.Th(m))}};
W.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};function Oh(a){if(null===a.g||!a.sl)return!1;var b=a.points.n,c=b.length;if(4>c)return!1;a=bm(a.g,!0,a.Oa,null);for(var d=1;d<c-2;d++){var e=b[d],f=b[d+1];if(!a.hp(Math.min(e.x,f.x),Math.min(e.y,f.y),Math.abs(e.x-f.x),Math.abs(e.y-f.y)))return!0}return!1}
function Yp(a,b,c,d,e,f){var h=b.Lo,k=b.Jo,l=Xp(b,c,d),m=c,n=d;for(0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k;1<l&&Xp(b,m,n)===l-1;)c=m,d=n,0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k,l-=1;if(f){if(1<l)if(180===e||0===e)c=Math.floor(c/h)*h+h/2;else if(90===e||270===e)d=Math.floor(d/k)*k+k/2}else c=Math.floor(c/h)*h+h/2,d=Math.floor(d/k)*k+k/2;1<l&&(f=e,m=c,n=d,0===e?(f=90,n+=k):90===e?(f=180,m-=h):180===e?(f=270,n-=k):270===e&&(f=0,m+=h),Xp(b,m,n)===l-1?Yp(a,b,m,n,f,!1):(m=c,n=d,0===e?(f=270,n-=k):90===
e?(f=0,m+=h):180===e?(f=90,n+=k):270===e&&(f=180,m-=h),Xp(b,m,n)===l-1&&Yp(a,b,m,n,f,!1)));a.$k(c,d)}W.prototype.findClosestSegment=function(a){var b=a.x;a=a.y;for(var c=this.l(0),d=this.l(1),e=Sa(b,a,c.x,c.y,d.x,d.y),f=0,h=1;h<this.oa-1;h++){var c=this.l(h+1),k=Sa(b,a,d.x,d.y,c.x,c.y),d=c;k<e&&(f=h,e=k)}return f};W.prototype.invalidateGeometry=W.prototype.de=function(){this.bb=null};v.u(W,{fh:"geometry"},function(){null===this.bb&&(this.en(),this.bb=this.makeGeometry());return this.bb});
W.prototype.Tm=function(a){if(!a){if(!1===this.rg)return;a=this.Ye();if(null!==this.bb&&(null===a||null!==a.fh))return}this.bb=this.makeGeometry();a=this.path;if(null!==a){a.bb=this.bb;for(var b=this.ya.n,c=b.length,d=0;d<c;d++){var e=b[d];e!==a&&e.Rf&&e instanceof Y&&(e.bb=this.bb)}}};
W.prototype.makeGeometry=function(){var a=this.oa;if(2>a){var b=new ve(Fe),c=new Ge(0,0);b.Ub.add(c);return b}var d=!1,b=this.g;null!==b&&Lp(this)&&b.yk.contains(this)&&null!==this.Iv&&(d=!0);var c=b=0,e=this.l(0).copy(),f=e.copy(),b=this.Zc.n,h=this.computeCurve();if(h===Ni&&3<=a&&!Hc(this.Hp,0))if(3===a)var k=this.l(1),b=Math.min(e.x,k.x),c=Math.min(e.y,k.y),k=this.l(2),b=Math.min(b,k.x),c=Math.min(c,k.y);else{if(this.jc)for(k=0;k<a;k++)c=b[k],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);else for(k=
3;k<a;k+=3)k+3>=a&&(k=a-1),b=this.l(k),f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);b=f.x;c=f.y}else{for(k=0;k<a;k++)c=b[k],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);b=f.x;c=f.y}b-=this.Qy.x;c-=this.Qy.y;e.x-=b;e.y-=c;if(2!==a||Lp(this)){var l=v.s();0!==Up(this)&&Zp(this,e,!0,f);N(l,e.x,e.y,!1,!1);if(h===Ni&&3<=a&&!Hc(this.Hp,0))if(3===a)k=this.l(1),a=k.x-b,d=k.y-c,k=this.l(2).copy(),k.x-=b,k.y-=c,0!==Vp(this)&&Zp(this,k,!1,f),O(l,a,d,a,d,k.x,k.y);else if(this.jc){for(var f=new z(b,c),e=this.l(1).copy(),
h=new z(b,c),a=new z(b,c),d=this.l(0),m=null,n=this.Hp/3,k=1;k<this.oa-1;k++){var m=this.l(k),p=d,q=m,r=this.l($p(this,m,k,!1));if(!Hc(p.x,q.x)||!Hc(q.x,r.x))if(!Hc(p.y,q.y)||!Hc(q.y,r.y)){var s=n,t=h,u=a;isNaN(s)&&(s=this.Hp/3);var x=p.x,p=p.y,w=q.x,q=q.y,y=r.x,r=r.y,B=s*aq(x,p,w,q),s=s*aq(w,q,y,r);Hc(p,q)&&Hc(w,y)&&(w>x?r>q?(t.x=w-B,t.y=q-B,u.x=w+s,u.y=q+s):(t.x=w-B,t.y=q+B,u.x=w+s,u.y=q-s):r>q?(t.x=w+B,t.y=q-B,u.x=w-s,u.y=q+s):(t.x=w+B,t.y=q+B,u.x=w-s,u.y=q-s));Hc(x,w)&&Hc(q,r)&&(q>p?(y>w?(t.x=
w-B,t.y=q-B,u.x=w+s):(t.x=w+B,t.y=q-B,u.x=w-s),u.y=q+s):(y>w?(t.x=w-B,t.y=q+B,u.x=w+s):(t.x=w+B,t.y=q+B,u.x=w-s),u.y=q-s));if(Hc(x,w)&&Hc(w,y)||Hc(p,q)&&Hc(q,r))x=.5*(x+y),p=.5*(p+r),t.x=x,t.y=p,u.x=x,u.y=p;1===k?(e.x=.5*(d.x+m.x),e.y=.5*(d.y+m.y)):2===k&&Hc(d.x,this.l(0).x)&&Hc(d.y,this.l(0).y)&&(e.x=.5*(d.x+m.x),e.y=.5*(d.y+m.y));O(l,e.x-b,e.y-c,h.x-b,h.y-c,m.x-b,m.y-c);f.set(h);e.set(a);d=m}}k=d.x;d=d.y;f=this.l(this.oa-1);k=.5*(k+f.x);d=.5*(d+f.y);O(l,a.x-b,a.y-c,k-b,d-c,f.x-b,f.y-c)}else for(k=
3;k<a;k+=3)d=this.l(k-2),k+3>=a&&(k=a-1),f=this.l(k-1),e=this.l(k),k===a-1&&0!==Vp(this)&&(e=e.copy(),Zp(this,e,!1,ad)),O(l,d.x-b,d.y-c,f.x-b,f.y-c,e.x-b,e.y-c);else{f=v.L();f.assign(this.l(0));for(k=1;k<a;){k=$p(this,f,k,1<k);t=this.l(k);if(k>=a-1){f!==t&&(0!==Vp(this)&&(t=t.copy(),Zp(this,t,!1,ad)),bq(this,l,-b,-c,f,t,d));break}k=$p(this,t,k+1,k<a-3);e=l;h=-b;m=-c;n=f;u=this.l(k);x=f;p=d;K(n.y,t.y)&&K(t.x,u.x)?(s=this.computeCorner(),s=Math.min(s,Math.abs(t.x-n.x)/2),s=w=Math.min(s,Math.abs(u.y-
t.y)/2),K(s,0)?(bq(this,e,h,m,n,t,p),x.assign(t)):(q=t.x,y=t.y,r=q,B=y,q=t.x>n.x?t.x-s:t.x+s,B=u.y>t.y?t.y+w:t.y-w,bq(this,e,h,m,n,new z(q,y),p),af(e,t.x+h,t.y+m,r+h,B+m),x.m(r,B))):K(n.x,t.x)&&K(t.y,u.y)?(s=this.computeCorner(),w=Math.min(s,Math.abs(t.y-n.y)/2),w=s=Math.min(w,Math.abs(u.x-t.x)/2),K(s,0)?(bq(this,e,h,m,n,t,p),x.assign(t)):(q=t.x,B=y=t.y,y=t.y>n.y?t.y-w:t.y+w,r=u.x>t.x?t.x+s:t.x-s,bq(this,e,h,m,n,new z(q,y),p),af(e,t.x+h,t.y+m,r+h,B+m),x.m(r,B))):(bq(this,e,h,m,n,t,p),x.assign(t))}v.v(f)}b=
l.o;v.q(l)}else l=this.l(1).copy(),l.x-=b,l.y-=c,0!==Up(this)&&Zp(this,e,!0,f),0!==Vp(this)&&Zp(this,l,!1,f),b=new ve(Ie),b.Aa=e.x,b.xa=e.y,b.I=l.x,b.J=l.y;return b};function aq(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Hc(a,0)?b:Hc(b,0)?a:Math.sqrt(a*a+b*b)}
function Zp(a,b,c,d){var e=a.oa;if(!(2>e))if(c){var f=a.l(1);c=f.x-d.x;d=f.y-d.y;f=aq(b.x,b.y,c,d);0!==f&&(e=2===e?.5*f:f,a=Up(a),a>e&&(a=e),c=a*(c-b.x)/f,a=a*(d-b.y)/f,b.x+=c,b.y+=a)}else f=a.l(e-2),c=f.x-d.x,d=f.y-d.y,f=aq(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=Vp(a),a>e&&(a=e),c=a*(b.x-c)/f,a=a*(b.y-d)/f,b.x-=c,b.y-=a)}
function $p(a,b,c,d){for(var e=a.oa,f=b;Hc(b.x,f.x)&&Hc(b.y,f.y);){if(c>=e)return e-1;f=a.l(c++)}if(!Hc(b.x,f.x)&&!Hc(b.y,f.y))return c-1;for(var h=f;Hc(b.x,f.x)&&Hc(f.x,h.x)&&(!d||(b.y>=f.y?f.y>=h.y:f.y<=h.y))||Hc(b.y,f.y)&&Hc(f.y,h.y)&&(!d||(b.x>=f.x?f.x>=h.x:f.x<=h.x));){if(c>=e)return e-1;h=a.l(c++)}return c-2}
function bq(a,b,c,d,e,f,h){if(!h&&Lp(a)){h=[];var k=0;a.isVisible()&&(k=cq(a,e,f,h));var l=e.x,l=e.y;if(0<k)if(K(e.y,f.y))if(e.x<f.x)for(var m=0;m<k;){var n=Math.max(e.x,Math.min(h[m++]-5,f.x-10));b.lineTo(n+c,f.y+d);for(var l=n+c,p=Math.min(n+10,f.x);m<k;){var q=h[m];if(q<p+10)m++,p=Math.min(q+5,f.x);else break}q=(n+p)/2+c;q=f.y-10+d;n=p+c;p=f.y+d;a.Ke===Fi?N(b,n,p,!1,!1):O(b,l,q,n,q,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.x,Math.max(h[m--]+5,f.x+10));b.lineTo(n+c,f.y+d);l=n+c;for(p=Math.max(n-10,
f.x);0<=m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,f.x);else break;q=f.y-10+d;n=p+c;p=f.y+d;a.Ke===Fi?N(b,n,p,!1,!1):O(b,l,q,n,q,n,p)}else if(K(e.x,f.x))if(e.y<f.y)for(m=0;m<k;){n=Math.max(e.y,Math.min(h[m++]-5,f.y-10));b.lineTo(f.x+c,n+d);l=n+d;for(p=Math.min(n+10,f.y);m<k;)if(q=h[m],q<p+10)m++,p=Math.min(q+5,f.y);else break;q=f.x-10+c;n=f.x+c;p+=d;a.Ke===Fi?N(b,n,p,!1,!1):O(b,q,l,q,p,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.y,Math.max(h[m--]+5,f.y+10));b.lineTo(f.x+c,n+d);l=n+d;for(p=Math.max(n-10,f.y);0<=
m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,f.y);else break;q=f.x-10+c;n=f.x+c;p+=d;a.Ke===Fi?N(b,n,p,!1,!1):O(b,q,l,q,p,n,p)}}b.lineTo(f.x+c,f.y+d)}
function cq(a,b,c,d){var e=a.g;if(null===e||b.K(c))return 0;for(e=e.Qw;e.next();){var f=e.value;if(null!==f&&f.visible)for(var f=f.wb.n,h=f.length,k=0;k<h;k++){var l=f[k];if(l instanceof W){if(l===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(l.isVisible()&&Lp(l)){var m=l.Zm;m.G()&&a.Zm.yg(m)&&!a.usesSamePort(l)&&(m=l.path,null!==m&&m.Zi()&&dq(b,c,d,l))}}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function dq(a,b,c,d){for(var e=K(a.y,b.y),f=d.oa,h=d.l(0),k=v.L(),l=1;l<f;l++){var m=d.l(l);if(l<f-1){var n=d.l(l+1);if(h.y===m.y&&m.y===n.y){if(m.x>h.x&&n.x>m.x||m.x<h.x&&n.x<m.x)m=n,l++}else h.x===m.x&&m.x===n.x&&(m.y>h.y&&n.y>m.y||m.y<h.y&&n.y<m.y)&&(m=n,l++)}a:{var n=k,p=a.x,q=a.y,r=b.x,s=b.y,t=h.x,h=h.y,u=m.x,x=m.y;if(!K(p,r)){if(K(q,s)&&K(t,u)&&Math.min(p,r)<t&&Math.max(p,r)>t&&Math.min(h,x)<q&&Math.max(h,x)>q&&!K(h,x)){n.x=t;n.y=q;n=!0;break a}}else if(!K(q,s)&&K(h,x)&&Math.min(q,s)<h&&Math.max(q,
s)>h&&Math.min(t,u)<p&&Math.max(t,u)>p&&!K(t,u)){n.x=p;n.y=h;n=!0;break a}n.x=0;n.y=0;n=!1}n&&(e?c.push(k.x):c.push(k.y));h=m}v.v(k)}v.u(W,{it:"firstPickIndex"},function(){return 2>=this.oa?0:this.jc||Op(this)!==qb?1:0});v.u(W,{Pw:"lastPickIndex"},function(){var a=this.oa;return 0===a?0:2>=a?a-1:this.jc||Pp(this)!==qb?a-2:a-1});function Lp(a){a=a.Ke;return a===Ei||a===Fi}function Np(a,b){if(b||Lp(a)){var c=a.g;null===c||c.yk.contains(a)||null===a.Iv||c.yk.add(a,a.Iv)}}
function Hi(a,b){var c=a.layer;if(null!==c&&c.visible&&!c.Gc){var d=c.g;if(null!==d)for(var e=!1,d=d.Qw;d.next();){var f=d.value;if(f.visible)if(f===c)for(var e=!0,h=!1,f=f.wb.n,k=f.length,l=0;l<k;l++){var m=f[l];m instanceof W&&(m===a?h=!0:h&&eq(a,m,b))}else if(e)for(f=f.wb.n,k=f.length,l=0;l<k;l++)m=f[l],m instanceof W&&eq(a,m,b)}}}function eq(a,b,c){if(null!==b&&null!==b.bb&&Lp(b)){var d=b.Zm;d.G()&&(a.Zm.yg(d)||c.yg(d))&&(a.usesSamePort(b)||b.de())}}
W.prototype.usesSamePort=function(a){var b=this.oa,c=a.oa;if(0<b&&0<c){var d=this.l(0),e=a.l(0);if(d.Fc(e))return!0;b=this.l(b-1);a=a.l(c-1);if(b.Fc(a)||d.Fc(a)||b.Fc(e))return!0}else if(this.T===a.T||this.Z===a.Z||this.T===a.Z||this.Z===a.T)return!0;return!1};
W.prototype.isVisible=function(){if(!R.prototype.isVisible.call(this))return!1;var a=this.Oa,b=!0,c=this.g;null!==c&&(b=c.Qd);var d=this.T;if(null!==d){if(this.Hc&&b&&!d.md)return!1;if(d===a)return!0;for(c=d;null!==c;){if(c.Ad===this)return!0;c=c.Oa}c=d.findVisibleNode();if(null===c||c===a)return!1}d=this.Z;if(null!==d){if(this.Hc&&!b&&!d.md)return!1;if(d===a)return!0;for(c=d;null!==c;){if(c.Ad===this)return!0;c=c.Oa}b=d.findVisibleNode();if(null===b||b===a)return!1}return!0};
W.prototype.nd=function(a){R.prototype.nd.call(this,a);null!==this.di&&this.di.dp();if(null!==this.Ce)for(var b=this.Ce.i;b.next();)b.value.nd(a)};v.defineProperty(W,{Qs:"adjusting"},function(){return this.Rp},function(a){var b=this.Rp;b!==a&&(this.Rp=a,this.h("adjusting",b,a))});v.defineProperty(W,{kz:"corner"},function(){return this.kq},function(a){var b=this.kq;b!==a&&(this.kq=a,this.de(),this.h("corner",b,a))});
v.defineProperty(W,{Ke:"curve"},function(){return this.nq},function(a){var b=this.nq;b!==a&&(this.nq=a,this.ic(),this.de(),Np(this,b===Fi||b===Ei||a===Fi||a===Ei),this.h("curve",b,a))});v.defineProperty(W,{uw:"curviness"},function(){return this.oq},function(a){var b=this.oq;b!==a&&(this.oq=a,this.ic(),this.de(),this.h("curviness",b,a))});
v.defineProperty(W,{jx:"routing"},function(){return this.km},function(a){var b=this.km;b!==a&&(this.km=a,this.qi=null,this.ic(),Np(this,2===(b.value&2)||2===(a.value&2)),this.h("routing",b,a))});v.defineProperty(W,{Hp:"smoothness"},function(){return this.ss},function(a){var b=this.ss;b!==a&&(this.ss=a,this.de(),this.h("smoothness",b,a))});
function Jp(a){var b=a.eg;if(null!==b){var c=a.qg;if(null!==c){var d=a.Bh;a=a.Sh;for(var e=null,f=null,h=b.ec.n,k=h.length,l=0;l<k;l++){var m=h[l];if(m.eg===b&&m.Bh===d&&m.qg===c&&m.Sh===a||m.eg===c&&m.Bh===a&&m.qg===b&&m.Sh===d)null===f?f=m:(null===e&&(e=[],e.push(f)),e.push(m))}if(null!==e){f=wp(b,c,d,a);null===f&&(f=new ok,f.sp=b,f.Yw=d,f.Jt=c,f.Zw=a,vp(b,f),vp(c,f));f.links=e;for(l=0;l<e.length;l++)m=e[l],m.di=f;f.dp()}}}}
function Ip(a){var b=a.di;null!==b&&(a.di=null,a=b.links.indexOf(a),0<=a&&(v.Uh(b.links,a),b.dp()))}function ok(){v.dc(this);this.gv=!1;this.Zw=this.Jt=this.Yw=this.sp=null;this.links=[]}ok.prototype.dp=function(){if(!this.gv){var a=this.links;0<a.length&&(a=a[0].g,null!==a&&a.KB.add(this))}this.gv=!0};
ok.prototype.BA=function(){if(this.gv){this.gv=!1;var a=this.links;if(0<a.length){var b=a[0],c=b.g;b.arrangeBundledLinks(a,null===c||c.Qm);1===a.length&&(b.di=null,a.length=0)}0===a.length&&(a=this.sp,null!==this&&null!==a.uh&&a.uh.remove(this),a=this.Jt,null!==this&&null!==a.uh&&a.uh.remove(this))}};v.Ld(ok,{sp:!0,Yw:!0,Jt:!0,Zw:!0,links:!0,spacing:!0});
function cm(){v.dc(this);this.sA=this.group=null;this.st=!0;this.abort=!1;this.lg=this.kg=1;this.nr=this.mr=-1;this.ie=this.he=8;this.oc=null;this.tF=!1;this.aF=22;this.pE=111}v.Ld(cm,{group:!0,sA:!0,st:!0,abort:!0,tF:!0,aF:!0,pE:!0});
cm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.kg=Math.floor((a.x-this.he)/this.he)*this.he;this.lg=Math.floor((b-this.ie)/this.ie)*this.ie;this.mr=Math.ceil((c+2*this.he)/this.he)*this.he;this.nr=Math.ceil((d+2*this.ie)/this.ie)*this.ie;a=1+(Math.ceil((this.mr-this.kg)/this.he)|0);b=1+(Math.ceil((this.nr-this.lg)/this.ie)|0);if(null===this.oc||this.Do<a-1||this.Eo<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],f=0;f<=b;f++)e[f]=0;c[d]=e}this.oc=
c;this.Do=a-1;this.Eo=b-1}if(null!==this.oc)for(a=0;a<=this.Do;a++)for(b=0;b<=this.Eo;b++)this.oc[a][b]=999999}};v.u(cm,{mb:null},function(){return new A(this.kg,this.lg,this.mr-this.kg,this.nr-this.lg)});v.defineProperty(cm,{Lo:null},function(){return this.he},function(a){0<a&&a!==this.he&&(this.he=a,this.initialize(this.mb))});v.defineProperty(cm,{Jo:null},function(){return this.ie},function(a){0<a&&a!==this.ie&&(this.ie=a,this.initialize(this.mb))});
function fq(a,b,c){return a.kg<=b&&b<=a.mr&&a.lg<=c&&c<=a.nr}function Xp(a,b,c){if(!fq(a,b,c))return 0;b-=a.kg;b/=a.he;c-=a.lg;c/=a.ie;return a.oc[b|0][c|0]}function fm(a,b,c){fq(a,b,c)&&(b-=a.kg,b/=a.he,c-=a.lg,c/=a.ie,a.oc[b|0][c|0]=0)}function em(a){if(null!==a.oc)for(var b=0;b<=a.Do;b++)for(var c=0;c<=a.Eo;c++)1<=a.oc[b][c]&&(a.oc[b][c]|=999999)}
cm.prototype.hp=function(a,b,c,d){if(a>this.mr||a+c<this.kg||b>this.nr||b+d<this.lg)return!0;a=(a-this.kg)/this.he|0;b=(b-this.lg)/this.ie|0;c=Math.max(0,c)/this.he+1|0;var e=Math.max(0,d)/this.ie+1|0;0>a&&(c+=a,a=0);0>b&&(e+=b,b=0);if(0>c||0>e)return!0;d=Math.min(a+c-1,this.Do)|0;for(c=Math.min(b+e-1,this.Eo)|0;a<=d;a++)for(e=b;e<=c;e++)if(0===this.oc[a][e])return!1;return!0};
function gq(a,b,c,d,e,f,h,k,l){if(!(b<f||b>h||c<k||c>l)){var m,n;m=b|0;n=c|0;var p=a.oc[m][n];if(1<=p&&999999>p)for(e?n+=d:m+=d,p+=1;f<=m&&m<=h&&k<=n&&n<=l&&!(p>=a.oc[m][n]);)a.oc[m][n]=p,p+=1,e?n+=d:m+=d;m=e?n:m;if(e)if(0<d)for(c+=d;c<m;c+=d)gq(a,b,c,1,!e,f,h,k,l),gq(a,b,c,-1,!e,f,h,k,l);else for(c+=d;c>m;c+=d)gq(a,b,c,1,!e,f,h,k,l),gq(a,b,c,-1,!e,f,h,k,l);else if(0<d)for(b+=d;b<m;b+=d)gq(a,b,c,1,!e,f,h,k,l),gq(a,b,c,-1,!e,f,h,k,l);else for(b+=d;b>m;b+=d)gq(a,b,c,1,!e,f,h,k,l),gq(a,b,c,-1,!e,f,h,
k,l)}}function hq(a,b,c,d,e,f,h,k,l,m,n){for(var p=b|0,q=c|0,r=a.oc[p][q];0===r&&p>k&&p<l&&q>m&&q<n;)if(h?q+=f:p+=f,r=a.oc[p][q],1>=Math.abs(p-d)&&1>=Math.abs(q-e))return a.abort=!0,0;p=b|0;q=c|0;r=a.oc[p][q];b=1;for(a.oc[p][q]=b;0===r&&p>k&&p<l&&q>m&&q<n;)h?q+=f:p+=f,r=a.oc[p][q],a.oc[p][q]=b,b+=1;return h?q:p}
function Wp(a,b,c,d,e,f){if(null!==a.oc){a.abort=!1;var h=b.x,k=b.y;if(fq(a,h,k)){var h=h-a.kg,h=h/a.he,k=k-a.lg,k=k/a.ie,l=d.x,m=d.y;if(fq(a,l,m))if(l-=a.kg,l/=a.he,m-=a.lg,m/=a.ie,1>=Math.abs(h-l)&&1>=Math.abs(k-m))a.abort=!0;else{var n=f.x;b=f.y;d=f.x+f.width;var p=f.y+f.height,n=n-a.kg,n=n/a.he;b-=a.lg;b/=a.ie;d-=a.kg;d/=a.he;p-=a.lg;p/=a.ie;f=Math.max(0,Math.min(a.Do,n|0));d=Math.min(a.Do,Math.max(0,d|0));b=Math.max(0,Math.min(a.Eo,b|0));var p=Math.min(a.Eo,Math.max(0,p|0)),h=h|0,k=k|0,l=l|0,
m=m|0,n=h,q=k,r=0===c||90===c?1:-1;(c=90===c||270===c)?q=hq(a,h,k,l,m,r,c,f,d,b,p):n=hq(a,h,k,l,m,r,c,f,d,b,p);if(!a.abort){a:{c=0===e||90===e?1:-1;e=90===e||270===e;for(var r=l|0,s=m|0,t=a.oc[r][s];0===t&&r>f&&r<d&&s>b&&s<p;)if(e?s+=c:r+=c,t=a.oc[r][s],1>=Math.abs(r-h)&&1>=Math.abs(s-k)){a.abort=!0;break a}r=l|0;s=m|0;t=a.oc[r][s];for(a.oc[r][s]=999999;0===t&&r>f&&r<d&&s>b&&s<p;)e?s+=c:r+=c,t=a.oc[r][s],a.oc[r][s]=999999}a.abort||(gq(a,n,q,1,!1,f,d,b,p),gq(a,n,q,-1,!1,f,d,b,p),gq(a,n,q,1,!0,f,d,
b,p),gq(a,n,q,-1,!0,f,d,b,p))}}}}}function Sp(){v.dc(this);this.port=this.Jc=null;this.Xf=[];this.rp=!1}v.Ld(Sp,{Jc:!0,port:!0,Xf:!0,rp:!0});Sp.prototype.toString=function(){for(var a=this.Xf,b=this.Jc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];null!==d&&(b+="\n  "+d.toString())}return b};
function iq(a,b,c,d){b=b.offsetY;switch(b){case v.Wc:return 90;case v.Nc:return 180;case v.dd:return 270;case v.Xc:return 0}switch(b){case v.Wc|v.dd:return 180<c?270:90;case v.Nc|v.Xc:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case v.Nc|v.dd:return c>a&&c<=180+a?180:270;case v.dd|v.Xc:return c>180-a&&c<=360-a?270:0;case v.Xc|v.Wc:return c>a&&c<=180+a?90:0;case v.Wc|v.Nc:return c>180-a&&c<=360-a?180:90;case v.Nc|v.dd|v.Xc:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case v.dd|v.Xc|v.Wc:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case v.Xc|v.Wc|v.Nc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case v.Wc|v.Nc|v.dd:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(v.Nc|v.dd|v.Xc|v.Wc)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}Sp.prototype.dp=function(){this.Xf.length=0};
function Tp(a,b){var c=a.Xf;if(0===c.length){a:if(!a.rp){c=a.rp;a.rp=!0;var d,e=null,f=a.Jc,f=f instanceof V?f:null;if(null===f||f.fe)d=a.Jc.JD(a.port.Sd);else{if(!f.U.G()){a.rp=c;break a}e=f;d=e.HD()}var h=a.Xf.length=0,k=a.port.Xa(rb,v.L()),l=a.port.Xa(Eb,v.L()),f=v.hk(k.x,k.y,0,0);f.fj(l);v.v(k);v.v(l);k=v.Mb(f.x+f.width/2,f.y+f.height/2);for(d=d.i;d.next();)if(l=d.value,l.isVisible()){var m=qb,n=l.kd===a.port||l.T.Yh(e),m=n?Op(l,a.port):Pp(l,a.port);if(m.Wi()&&(n=n?l.Td:l.kd,null!==n)){var p=
n.Y;if(null!==p){var n=l.computeOtherPoint(p,n),p=k.xc(n),m=iq(f,m,p,l.jc),q=0;0===m?(q=v.Xc,180<p&&(p-=360)):q=90===m?v.Wc:180===m?v.Nc:v.dd;m=a.Xf[h];void 0===m?(m=new jq(l,p,q),a.Xf[h]=m):(m.link=l,m.angle=p,m.ge=q);m.Ww.set(n);h++}}}v.v(k);a.Xf.sort(Sp.prototype.WH);e=a.Xf.length;k=-1;for(h=d=0;h<e;h++)m=a.Xf[h],void 0!==m&&(m.ge!==k&&(k=m.ge,d=0),m.bp=d,d++);k=-1;d=0;for(h=e-1;0<=h;h--)m=a.Xf[h],void 0!==m&&(m.ge!==k&&(k=m.ge,d=m.bp+1),m.Hm=d);h=a.Xf;n=a.port;e=a.Jc.cI;k=v.L();d=v.L();l=v.L();
m=v.L();n.Xa(rb,k);n.Xa(tb,d);n.Xa(Eb,l);n.Xa(Cb,m);var r=q=p=n=0;if(e===up)for(var s=0;s<h.length;s++){var t=h[s];if(null!==t){var u=t.link.computeThickness();switch(t.ge){case v.Wc:q+=u;break;case v.Nc:r+=u;break;case v.dd:n+=u;break;default:case v.Xc:p+=u}}}for(var x=0,w=0,y=1,s=0;s<h.length;s++)if(t=h[s],null!==t){var B,H;if(x!==t.ge){x=t.ge;switch(x){case v.Wc:B=l;H=m;break;case v.Nc:B=m;H=k;break;case v.dd:B=k;H=d;break;default:case v.Xc:B=d,H=l}var C=H.x-B.x;H=H.y-B.y;switch(x){case v.Wc:q>
Math.abs(C)?(y=Math.abs(C)/q,q=Math.abs(C)):y=1;break;case v.Nc:r>Math.abs(H)?(y=Math.abs(H)/r,r=Math.abs(H)):y=1;break;case v.dd:n>Math.abs(C)?(y=Math.abs(C)/n,n=Math.abs(C)):y=1;break;default:case v.Xc:p>Math.abs(H)?(y=Math.abs(H)/p,p=Math.abs(H)):y=1}w=0}var T=t.jp;if(e===up){u=t.link.computeThickness();u*=y;T.set(B);switch(x){case v.Wc:T.x=B.x+C/2+q/2-w-u/2;break;case v.Nc:T.y=B.y+H/2+r/2-w-u/2;break;case v.dd:T.x=B.x+C/2-n/2+w+u/2;break;default:case v.Xc:T.y=B.y+H/2-p/2+w+u/2}w+=u}else u=.5,
e===rp&&(u=(t.bp+1)/(t.Hm+1)),T.x=B.x+C*u,T.y=B.y+H*u}v.v(k);v.v(d);v.v(l);v.v(m);B=a.Xf;for(C=0;C<B.length;C++)H=B[C],null!==H&&(H.yw=a.computeEndSegmentLength(H));a.rp=c;v.Vb(f)}c=a.Xf}for(f=0;f<c.length;f++)if(B=c[f],null!==B&&B.link===b)return B;return null}Sp.prototype.WH=function(a,b){return a===b?0:null===a?-1:null===b?1:a.ge<b.ge?-1:a.ge>b.ge?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
Sp.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.Jc,this.port,qb,b.kd===this.port),d=a.bp;if(0>d)return c;var e=a.Hm;if(1>=e||!b.jc)return c;var b=a.Ww,f=a.jp;if(a.ge===v.Nc||a.ge===v.Wc)d=e-1-d;return((a=a.ge===v.Nc||a.ge===v.Xc)?b.y<f.y:b.x<f.x)?c+8*d:(a?b.y===f.y:b.x===f.x)?c:c+8*(e-1-d)};function jq(a,b,c){this.link=a;this.angle=b;this.ge=c;this.Ww=new z;this.Hm=this.bp=0;this.jp=new z;this.yw=0}
v.Ld(jq,{link:!0,angle:!0,ge:!0,Ww:!0,bp:!0,Hm:!0,jp:!0,yw:!0});jq.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.ge.toString()+":"+this.bp.toString()+"/"+this.Hm.toString()+" "+this.jp.toString()+" "+this.yw.toString()+" "+this.Ww.toString()};function ym(){this.Rj=this.qj=fc;this.Pj=this.oj=NaN;this.Oj=this.nj=sp;this.Qj=this.pj=NaN}
ym.prototype.copy=function(){var a=new ym;a.qj=this.qj.S();a.Rj=this.Rj.S();a.oj=this.oj;a.Pj=this.Pj;a.nj=this.nj;a.Oj=this.Oj;a.pj=this.pj;a.Qj=this.Qj;return a};function V(a){0===arguments.length?S.call(this,Xi):S.call(this,a);this.pr=new J(R);this.fo=new J(V);this.Qk=this.qr=this.or=null;this.Gs=!1;this.Wq=!0;this.Is=!1;this.Gb=this.ws=null;this.cq=!1;this.dq=!0;this.Lq=this.eq=!1;this.Vd=new Zf;this.Vd.group=this;this.Ey=!1}v.Ja(V,S);v.ea("Group",V);
V.prototype.cloneProtected=function(a){S.prototype.cloneProtected.call(this,a);a.or=this.or;a.qr=this.qr;a.Qk=this.Qk;a.Gs=this.Gs;a.Wq=this.Wq;a.Is=this.Is;a.ws=this.ws;var b=a.dt(function(a){return a instanceof Ri});a.Gb=b instanceof Ri?b:null;a.cq=this.cq;a.dq=this.dq;a.eq=this.eq;a.Lq=this.Lq;null!==this.Vd?(a.Vd=this.Vd.copy(),a.Vd.group=a):(null!==a.Vd&&(a.Vd.group=null),a.Vd=null)};
V.prototype.Wh=function(a){S.prototype.Wh.call(this,a);var b=a.To();for(a=a.Ic;a.next();){var c=a.value;c.N();c.H(8);c.Vs();if(c instanceof S)c.cf(b);else if(c instanceof W)for(c=c.Sf;c.next();)c.value.cf(b)}};
V.prototype.Ym=function(a,b,c,d,e,f,h){if(a===Cf&&"elements"===b)if(e instanceof Ri){var k=e;null===this.Gb?this.Gb=k:this.Gb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else e instanceof D&&(k=e.dt(function(a){return a instanceof Ri}),k instanceof Ri&&(null===this.Gb?this.Gb=k:this.Gb!==k&&v.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else a===Df&&"elements"===b&&null!==this.Gb&&(d===this.Gb?this.Gb=null:d instanceof D&&this.Gb.ul(d)&&
(this.Gb=null));S.prototype.Ym.call(this,a,b,c,d,e,f,h)};V.prototype.Ni=function(a,b,c,d){this.Pk=this.Gb;D.prototype.Ni.call(this,a,b,c,d)};V.prototype.vl=function(){if(!S.prototype.vl.call(this))return!1;for(var a=this.Ic;a.next();){var b=a.value;if(b instanceof S){if(b.isVisible()&&fl(b))return!1}else if(b instanceof W&&b.isVisible()&&fl(b)&&b.T!==this&&b.Z!==this)return!1}return!0};v.u(V,{placeholder:"placeholder"},function(){return this.Gb});
v.defineProperty(V,{sD:"computesBoundsAfterDrag"},function(){return this.cq},function(a){var b=this.cq;b!==a&&(v.j(a,"boolean",V,"computesBoundsAfterDrag"),this.cq=a,this.h("computesBoundsAfterDrag",b,a))});v.defineProperty(V,{rw:"computesBoundsIncludingLinks"},function(){return this.dq},function(a){v.j(a,"boolean",V,"computesBoundsIncludingLinks");var b=this.dq;b!==a&&(this.dq=a,this.h("computesBoundsIncludingLinks",b,a))});
v.defineProperty(V,{uG:"computesBoundsIncludingLocation"},function(){return this.eq},function(a){v.j(a,"boolean",V,"computesBoundsIncludingLocation");var b=this.eq;b!==a&&(this.eq=a,this.h("computesBoundsIncludingLocation",b,a))});v.defineProperty(V,{eH:"handlesDragDropForMembers"},function(){return this.Lq},function(a){v.j(a,"boolean",V,"handlesDragDropForMembers");var b=this.Lq;b!==a&&(this.Lq=a,this.h("handlesDragDropForMembers",b,a))});v.u(V,{Ic:"memberParts"},function(){return this.pr.i});
function np(a,b){if(a.pr.add(b)){b instanceof V&&a.fo.add(b);var c=a.NH;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.Sa,e.Sa=!0);c(a,b);null!==e&&(e.Sa=d)}a.isVisible()&&a.fe||b.nd(!1)}b instanceof W&&!a.rw||(c=a.Gb,null===c&&(c=a),c.N())}function mp(a,b){if(a.pr.remove(b)){b instanceof V&&a.fo.remove(b);var c=a.OH;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.Sa,e.Sa=!0);c(a,b);null!==e&&(e.Sa=d)}a.isVisible()&&a.fe||b.nd(!0)}b instanceof W&&!a.rw||(c=a.Gb,null===c&&(c=a),c.N())}
V.prototype.Jm=function(){if(0<this.pr.count){var a=this.g;if(null!==a)for(var b=this.pr.copy().i;b.next();)a.remove(b.value)}S.prototype.Jm.call(this)};v.defineProperty(V,{Pb:"layout"},function(){return this.Vd},function(a){var b=this.Vd;b!==a&&(null!==a&&v.A(a,Zf,V,"layout"),null!==b&&(b.g=null,b.group=null),this.Vd=a,null!==a&&(a.g=this.g,a.group=this),this.h("layout",b,a))});
v.defineProperty(V,{NH:"memberAdded"},function(){return this.or},function(a){var b=this.or;b!==a&&(null!==a&&v.j(a,"function",V,"memberAdded"),this.or=a,this.h("memberAdded",b,a))});v.defineProperty(V,{OH:"memberRemoved"},function(){return this.qr},function(a){var b=this.qr;b!==a&&(null!==a&&v.j(a,"function",V,"memberRemoved"),this.qr=a,this.h("memberRemoved",b,a))});
v.defineProperty(V,{Pz:"memberValidation"},function(){return this.Qk},function(a){var b=this.Qk;b!==a&&(null!==a&&v.j(a,"function",V,"memberValidation"),this.Qk=a,this.h("memberValidation",b,a))});V.prototype.canAddMembers=function(a){var b=this.g;if(null===b)return!1;b=b.nb;for(a=ah(a).i;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0};
V.prototype.addMembers=function(a,b){var c=this.g;if(null===c)return!1;for(var c=c.nb,d=!0,e=ah(a).i;e.next();){var f=e.value;!b||c.isValidMember(this,f)?f.Oa=this:d=!1}return d};v.defineProperty(V,{QI:"ungroupable"},function(){return this.Gs},function(a){var b=this.Gs;b!==a&&(v.j(a,"boolean",V,"ungroupable"),this.Gs=a,this.h("ungroupable",b,a))});V.prototype.canUngroup=function(){if(!this.QI)return!1;var a=this.layer;if(null!==a&&!a.mw)return!1;a=a.g;return null===a||a.mw?!0:!1};
V.prototype.cf=function(a){void 0===a&&(a=null);S.prototype.cf.call(this,a);for(var b=this.HD();b.next();){var c=b.value;if(null===a||!a.contains(c)){var d=c.T;null!==d&&d!==this&&d.Yh(this)&&!d.isVisible()?c.ic():(d=c.Z,null!==d&&d!==this&&d.Yh(this)&&!d.isVisible()&&c.ic())}}};V.prototype.findExternalLinksConnected=V.prototype.HD=function(){var a=this.To();a.add(this);for(var b=new J(W),c=a.i;c.next();){var d=c.value;if(d instanceof S)for(d=d.te;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.i};
V.prototype.findExternalNodesConnected=function(){var a=this.To();a.add(this);for(var b=new J(S),c=a.i;c.next();){var d=c.value;if(d instanceof S)for(d=d.te;d.next();){var e=d.value,f=e.T;a.contains(f)&&f!==this||b.add(f);e=e.Z;a.contains(e)&&e!==this||b.add(e)}}return b.i};V.prototype.findContainingGroupChain=function(){function a(b,d){null!==b&&(d.add(b),a(b.Oa,d))}var b=new J(R);a(this,b);return b};
V.prototype.findSubGraphParts=V.prototype.To=function(){var a=new J(R);Ig(a,this,!0,0,!0);a.remove(this);return a};V.prototype.nd=function(a){S.prototype.nd.call(this,a);for(var b=this.Ic;b.next();)b.value.nd(a)};V.prototype.collapseSubGraph=V.prototype.collapseSubGraph=function(){var a=this.g;if(null!==a&&!a.gh){a.gh=!0;var b=this.To();kq(this,b,a.Na,this);a.gh=!1}};
function kq(a,b,c,d){for(var e=a.Ic;e.next();){var f=e.value;f.nd(!1);if(f instanceof V){var h=f;h.fe&&(h.DA=h.fe,kq(h,b,c,d))}if(f instanceof S)f.cf(b),Wj(c,f,d);else if(f instanceof W)for(f=f.Sf;f.next();)f.value.cf(b)}a.fe=!1}V.prototype.expandSubGraph=V.prototype.expandSubGraph=function(){var a=this.g;if(null!==a&&!a.gh){a.gh=!0;var b=this.To();lq(this,b,a.Na,this);a.gh=!1}};
function lq(a,b,c,d){for(var e=a.Ic;e.next();){var f=e.value;f.nd(!0);if(f instanceof V){var h=f;h.DA&&(h.DA=!1,lq(h,b,c,d))}if(f instanceof S)f.cf(b),Vj(c,f,d);else if(f instanceof W)for(f=f.Sf;f.next();)f.value.cf(b)}a.fe=!0}
v.defineProperty(V,{fe:"isSubGraphExpanded"},function(){return this.Wq},function(a){var b=this.Wq;if(b!==a){v.j(a,"boolean",V,"isSubGraphExpanded");this.Wq=a;var c=this.g;this.h("isSubGraphExpanded",b,a);b=this.EI;if(null!==b){var d=!0;null!==c&&(d=c.Sa,c.Sa=!0);b(this);null!==c&&(c.Sa=d)}null!==c&&c.la.ib?null!==this.Gb&&this.Gb.N():a?this.expandSubGraph():this.collapseSubGraph()}});
v.defineProperty(V,{DA:"wasSubGraphExpanded"},function(){return this.Is},function(a){var b=this.Is;b!==a&&(v.j(a,"boolean",V,"wasSubGraphExpanded"),this.Is=a,this.h("wasSubGraphExpanded",b,a))});v.defineProperty(V,{EI:"subGraphExpandedChanged"},function(){return this.ws},function(a){var b=this.ws;b!==a&&(null!==a&&v.j(a,"function",V,"subGraphExpandedChanged"),this.ws=a,this.h("subGraphExpandedChanged",b,a))});
V.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);var c=a.x-c,b=a.y-b,d=v.Mb(c,b);S.prototype.move.call(this,a);for(a=this.To().i;a.next();){var e=a.value;if(!(e instanceof W||e instanceof S&&e.uf)){var f=e.position,h=e.location;f.G()?(d.x=f.x+c,d.y=f.y+b,e.position=d):h.G()&&(d.x=h.x+c,d.y=h.y+b,e.location=d)}}for(a.reset();a.next();)e=a.value,e instanceof W&&(f=e.position,d.x=f.x+c,d.y=f.y+b,e.move(d));v.v(d)};
function Ri(){G.call(this);this.Ue=cd;this.bs=new A(NaN,NaN,NaN,NaN)}v.Ja(Ri,G);v.ea("Placeholder",Ri);Ri.prototype.cloneProtected=function(a){G.prototype.cloneProtected.call(this,a);a.Ue=this.Ue.S();a.bs=this.bs.copy()};Ri.prototype.Wj=function(a){if(null===this.background&&null===this.zm)return!1;var b=this.Ha;return ab(0,0,b.width,b.height,a.x,a.y)};
Ri.prototype.mp=function(){var a=this.Y;null!==a&&(a instanceof V||a instanceof Vg)||v.k("Placeholder is not inside a Group or Adornment.");if(a instanceof V){var b=this.computeBorder(this.bs),c=this.Qc;Wa(c,b.width||0,b.height||0);Cm(this,0,0,c.width,c.height);for(var c=a.Ic,d=!1;c.next();)if(c.value.isVisible()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new z,c.Yt(b,a.ef),a.location=new z(c.x,c.y))}else{var b=this.za,c=this.Qc,d=this.padding,e=d.left+d.right,f=d.top+d.bottom;if(b.G())Wa(c,b.width+
e||0,b.height+f||0),Cm(this,-d.left,-d.top,c.width,c.height);else{var h=a.Zb,k=h.Xa(rb,v.L()),b=v.hk(k.x,k.y,0,0);b.fj(h.Xa(Eb,k));b.fj(h.Xa(tb,k));b.fj(h.Xa(Cb,k));a.xi.m(b.x,b.y);Wa(c,b.width+e||0,b.height+f||0);Cm(this,-d.left,-d.top,c.width,c.height);v.v(k);v.Vb(b)}}};Ri.prototype.Ni=function(a,b,c,d){var e=this.U;e.x=a;e.y=b;e.width=c;e.height=d};
Ri.prototype.computeBorder=function(a){var b=this.Y;if(b instanceof V){var c=b;if(c.sD&&this.bs.G()){var d=c.g;if(null!==d&&(d=d.Wa,d instanceof Zg&&!d.zq&&null!==d.ac&&!d.ac.contains(c)))return a.assign(this.bs),a}}var c=v.ag(),d=this.computeMemberBounds(c),e=this.padding;a.m(d.x-e.left,d.y-e.top,d.width+e.left+e.right,d.height+e.top+e.bottom);v.Vb(c);b instanceof V&&(c=b,c.uG&&c.location.G()&&a.fj(c.location));return a};
Ri.prototype.computeMemberBounds=function(a){if(!(this.Y instanceof V))return a.m(0,0,0,0),a;for(var b=this.Y,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,h=b.Ic;h.next();){var k=h.value;if(k.isVisible()){if(k instanceof W){var l=k;if(!b.rw)continue;if(el(l))continue;if(l.T===b||l.Z===b)continue}k=k.U;k.left<c&&(c=k.left);k.top<d&&(d=k.top);k.right>e&&(e=k.right);k.bottom>f&&(f=k.bottom)}}isFinite(c)&&isFinite(d)?a.m(c,d,e-c,f-d):(b=b.location,c=this.padding,a.m(b.x+c.left,b.y+c.top,0,0));return a};
v.defineProperty(Ri,{padding:"padding"},function(){return this.Ue},function(a){"number"===typeof a?((isNaN(a)||0>a)&&v.va(a,">= 0",Ri,"padding"),a=new cb(a)):(v.A(a,cb,Ri,"padding"),(isNaN(a.left)||0>a.left)&&v.va(a.left,">= 0",Ri,"padding:value.left"),(isNaN(a.right)||0>a.right)&&v.va(a.right,">= 0",Ri,"padding:value.right"),(isNaN(a.top)||0>a.top)&&v.va(a.top,">= 0",Ri,"padding:value.top"),(isNaN(a.bottom)||0>a.bottom)&&v.va(a.bottom,">= 0",Ri,"padding:value.bottom"));var b=this.Ue;b.K(a)||(this.Ue=
a=a.S(),this.h("padding",b,a))});function Zf(){0<arguments.length&&v.cd(Zf);v.dc(this);this.oy=this.W=null;this.uj=this.Sq=!0;this.ar=!1;this.Vp=(new z(0,0)).freeze();this.Uq=this.Vq=!0;this.wB="";this.Vn=!1;this.Fy=null}v.ea("Layout",Zf);Zf.prototype.cloneProtected=function(a){a.Sq=this.Sq;a.uj=this.uj;a.ar=this.ar;a.Vp.assign(this.Vp);a.Vq=this.Vq;a.Uq=this.Uq;a.wB=this.wB;this.uj||(a.Vn=!0)};Zf.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};
Zf.prototype.toString=function(){var a=v.af(Object.getPrototypeOf(this)),a=a+"(";null!==this.group&&(a+=" in "+this.group);null!==this.g&&(a+=" for "+this.g);return a+")"};v.defineProperty(Zf,{g:"diagram"},function(){return this.W},function(a){null!==a&&v.A(a,E,Zf,"diagram");this.W=a});v.defineProperty(Zf,{group:"group"},function(){return this.oy},function(a){this.oy!==a&&(null!==a&&v.A(a,V,Zf,"group"),this.oy=a,null!==a&&(this.W=a.g))});
v.defineProperty(Zf,{tH:"isOngoing"},function(){return this.Sq},function(a){this.Sq!==a&&(v.j(a,"boolean",Zf,"isOngoing"),this.Sq=a)});v.defineProperty(Zf,{iE:"isInitial"},function(){return this.uj},function(a){v.j(a,"boolean",Zf,"isInitial");this.uj=a;a||(this.Vn=!0)});v.defineProperty(Zf,{Nw:"isViewportSized"},function(){return this.ar},function(a){this.ar!==a&&(v.j(a,"boolean",Zf,"isViewportSized"),(this.ar=a)&&this.H())});
v.defineProperty(Zf,{xt:"isRouting"},function(){return this.Vq},function(a){this.Vq!==a&&(v.j(a,"boolean",Zf,"isRouting"),this.Vq=a)});v.defineProperty(Zf,{kE:"isRealtime"},function(){return this.Uq},function(a){this.Uq!==a&&(v.j(a,"boolean",Zf,"isRealtime"),this.Uq=a)});v.defineProperty(Zf,{wf:"isValidLayout"},function(){return this.Vn},function(a){this.Vn!==a&&(v.j(a,"boolean",Zf,"isValidLayout"),this.Vn=a,a||(a=this.g,null!==a&&(a.vu=!0)))});
Zf.prototype.invalidateLayout=Zf.prototype.H=function(){if(this.Vn){var a=this.g;if(null!==a&&!a.la.ib){var b=a.Na;!b.Un&&(b.df&&b.$h(),this.tH&&a.Qm||this.iE&&!a.Qm)&&(this.wf=!1,a.ue())}}};v.defineProperty(Zf,{network:"network"},function(){return this.Fy},function(a){var b=this.Fy;b!==a&&(null!==a&&v.A(a,$f,Zf,"network"),null!==b&&(b.Pb=null),this.Fy=a,null!==a&&(a.Pb=this))});Zf.prototype.createNetwork=function(){return new $f};
Zf.prototype.makeNetwork=function(a){var b=this.createNetwork();b.Pb=this;a instanceof E?(b.Tj(a.Bg,!0),b.Tj(a.links,!0)):a instanceof V?b.Tj(a.Ic):b.Tj(a.i);return b};Zf.prototype.updateParts=function(){var a=this.g;if(null===a&&null!==this.network)for(var b=this.network.vertexes.i;b.next();){var c=b.value.Jc;if(null!==c&&(a=c.g,null!==a))break}this.wf=!0;try{null!==a&&a.Qb("Layout"),this.commitLayout()}finally{null!==a&&a.wd("Layout")}};
Zf.prototype.commitLayout=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();if(this.xt)for(a=this.network.edges.i;a.next();)a.value.commit()};
Zf.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new J(R);a instanceof E?(mq(this,b,a.Bg,!0,this.Uz,!0,!1,!0),mq(this,b,a.ek,!0,this.Uz,!0,!1,!0)):a instanceof V?mq(this,b,a.Ic,!1,this.Uz,!0,!1,!0):b.Tc(a.i);var c=b.count;if(0<c){a=this.g;null!==a&&a.Qb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Yd.x,e=d,f=this.Yd.y,h=0,k=0,b=b.i;b.next();){var l=b.value;l.sf();var m=l.Ca,n=m.width,
m=m.height;l.moveTo(e,f);l.Ey=!1;e+=Math.max(n,50)+20;k=Math.max(k,Math.max(m,50));h>=c-1?(h=0,e=d,f+=k+20,k=0):h++}null!==a&&a.wd("Layout")}this.wf=!0};Zf.prototype.Uz=function(a){return!a.location.G()||a instanceof V&&a.Ey?!0:!1};
function mq(a,b,c,d,e,f,h,k){for(c=c.i;c.next();){var l=c.value;d&&!l.fp||null!==e&&!e(l)||!l.canLayout()||(f&&l instanceof S?l.uf||(l instanceof V?null===l.Pb?mq(a,b,l.Ic,!1,e,f,h,k):b.add(l):b.add(l)):h&&l instanceof W?b.add(l):!k||!l.Pd()||l instanceof S||b.add(l))}}
Zf.prototype.collectParts=Zf.prototype.oG=function(a){var b=new J(R);a instanceof E?(mq(this,b,a.Bg,!0,null,!0,!0,!0),mq(this,b,a.links,!0,null,!0,!0,!0),mq(this,b,a.ek,!0,null,!0,!0,!0)):a instanceof V?mq(this,b,a.Ic,!1,null,!0,!0,!0):mq(this,b,a.i,!1,null,!0,!0,!0);return b};v.defineProperty(Zf,{Yd:"arrangementOrigin"},function(){return this.Vp},function(a){v.A(a,z,Zf,"arrangementOrigin");this.Vp.K(a)||(this.Vp.assign(a),this.H())});
Zf.prototype.initialOrigin=function(a){var b=this.group;if(null!==b){var c=b.position.copy();(isNaN(c.x)||isNaN(c.y))&&c.set(a);b=b.placeholder;null!==b&&(c=b.Xa(rb),(isNaN(c.x)||isNaN(c.y))&&c.set(a),c.x+=b.padding.left,c.y+=b.padding.top);return c}return a};function $f(){v.dc(this);this.Vd=null;this.clear()}v.ea("LayoutNetwork",$f);
$f.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.i;a.next();){var b=a.value;b.clear();b.network=null}if(this.edges)for(a=this.edges.i;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new J(nq);this.edges=new J(oq);this.Yz=new na(S,nq);this.Kz=new na(W,oq)};
$f.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutNetwork"+(null!==this.Pb?"("+this.Pb.toString()+")":"");if(0>=a)return b;b+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count;if(1<a){for(var c=this.vertexes.i;c.next();)b+="\n    "+c.value.toString(a-1);for(c=this.edges.i;c.next();)b+="\n    "+c.value.toString(a-1)}return b};v.defineProperty($f,{Pb:"layout"},function(){return this.Vd},function(a){this.Vd=a});$f.prototype.createVertex=function(){return new nq};
$f.prototype.createEdge=function(){return new oq};
$f.prototype.addParts=$f.prototype.Tj=function(a,b,c){if(null!==a){void 0===b&&(b=!1);v.j(b,"boolean",$f,"addParts:toplevelonly");void 0===c&&(c=null);null===c&&(c=function(a){if(a instanceof S)return!a.uf;if(a instanceof W){var b=a.T;if(null===b||b.uf)return!1;a=a.Z;return null===a||a.uf?!1:!0}return!1});for(a=a.i;a.next();){var d=a.value;if(d instanceof S&&(!b||d.fp)&&d.canLayout()&&c(d))if(d instanceof V&&null===d.Pb)this.Tj(d.Ic,!1);else if(null===this.Lm(d)){var e=this.createVertex();e.Jc=d;
this.al(e)}}for(a.reset();a.next();)if(d=a.value,d instanceof W&&(!b||d.fp)&&d.canLayout()&&c(d)&&null===this.Aw(d)){var f=d.T,e=d.Z;null!==f&&null!==e&&f!==e&&(f=this.findGroupVertex(f),e=this.findGroupVertex(e),null!==f&&null!==e&&this.lp(f,e,d))}}};$f.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;a=this.Lm(b);if(null!==a)return a;for(b=b.Oa;null!==b;){a=this.Lm(b);if(null!==a)return a;b=b.Oa}return null};
$f.prototype.addVertex=$f.prototype.al=function(a){if(null!==a){this.vertexes.add(a);var b=a.Jc;null!==b&&this.Yz.add(b,a);a.network=this}};$f.prototype.addNode=$f.prototype.Ps=function(a){if(null===a)return null;var b=this.Lm(a);null===b&&(b=this.createVertex(),b.Jc=a,this.al(b));return b};$f.prototype.deleteVertex=$f.prototype.CD=function(a){if(null!==a&&pq(this,a)){for(var b=a.Qe,c=b.count-1;0<=c;c--){var d=b.da(c);this.Po(d)}b=a.Le;for(c=b.count-1;0<=c;c--)d=b.da(c),this.Po(d)}};
function pq(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);c&&(a.Yz.remove(b.Jc),b.network=null);return c}$f.prototype.deleteNode=function(a){null!==a&&(a=this.Lm(a),null!==a&&this.CD(a))};$f.prototype.findVertex=$f.prototype.Lm=function(a){return null===a?null:this.Yz.ja(a)};$f.prototype.addEdge=$f.prototype.Go=function(a){if(null!==a){this.edges.add(a);var b=a.link;null!==b&&null===this.Aw(b)&&this.Kz.add(b,a);b=a.toVertex;null!==b&&b.eD(a);b=a.fromVertex;null!==b&&b.dD(a);a.network=this}};
$f.prototype.addLink=function(a){if(null===a)return null;var b=a.T,c=a.Z,d=this.Aw(a);null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.Ps(b)),null!==c&&(d.toVertex=this.Ps(c)),this.Go(d)):(d.fromVertex=null!==b?this.Ps(b):null,d.toVertex=null!==c?this.Ps(c):null);return d};$f.prototype.deleteEdge=$f.prototype.Po=function(a){if(null!==a){var b=a.toVertex;null!==b&&b.BD(a);b=a.fromVertex;null!==b&&b.AD(a);qq(this,a)}};
function qq(a,b){null!==b&&a.edges.remove(b)&&(a.Kz.remove(b.link),b.network=null)}$f.prototype.deleteLink=function(a){null!==a&&(a=this.Aw(a),null!==a&&this.Po(a))};$f.prototype.findEdge=$f.prototype.Aw=function(a){return null===a?null:this.Kz.ja(a)};$f.prototype.linkVertexes=$f.prototype.lp=function(a,b,c){if(null===a||null===b)return null;if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.Go(d);return d}return null};
$f.prototype.reverseEdge=$f.prototype.ix=function(a){if(null!==a){var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.AD(a),c.BD(a),a.ix(),b.eD(a),c.dD(a))}};$f.prototype.deleteSelfEdges=$f.prototype.ww=function(){for(var a=v.jb(),b=this.edges.i;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.Po(a[c]);v.sa(a)};
$f.prototype.deleteArtificialVertexes=function(){for(var a=v.jb(),b=this.vertexes.i;b.next();){var c=b.value;null===c.Jc&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.CD(a[b]);c=v.jb();for(b=this.edges.i;b.next();){var d=b.value;null===d.link&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.Po(c[b]);v.sa(a);v.sa(c)};function rq(a){for(var b=v.jb(),c=a.edges.i;c.next();){var d=c.value;null!==d.fromVertex&&null!==d.toVertex||b.push(d)}c=b.length;for(d=0;d<c;d++)a.Po(b[d]);v.sa(b)}
$f.prototype.splitIntoSubNetworks=$f.prototype.DI=function(){this.deleteArtificialVertexes();rq(this);this.ww();for(var a=new I($f),b=!0;b;)for(var b=!1,c=this.vertexes.i;c.next();){var d=c.value;if(0<d.Qe.count||0<d.Le.count){b=this.Pb.createNetwork();a.add(b);sq(this,b,d);b=!0;break}}a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function sq(a,b,c){if(null!==c&&c.network!==b){pq(a,c);b.al(c);for(var d=c.lc;d.next();){var e=d.value;e.network!==b&&(qq(a,e),b.Go(e),sq(a,b,e.fromVertex))}for(d=c.hc;d.next();)c=d.value,c.network!==b&&(qq(a,c),b.Go(c),sq(a,b,c.toVertex))}}$f.prototype.findAllParts=function(){for(var a=new J(R),b=this.vertexes.i;b.next();)a.add(b.value.Jc);for(b=this.edges.i;b.next();)a.add(b.value.link);return a};
function nq(){v.dc(this);this.network=null;this.M=(new A(0,0,10,10)).freeze();this.P=(new z(5,5)).freeze();this.clear()}v.ea("LayoutVertex",nq);nq.prototype.clear=function(){this.qd=this.je=null;this.Qe=new I(oq);this.Le=new I(oq)};
nq.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutVertex#"+v.ld(this);if(0<a&&(b+=null!==this.Jc?"("+this.Jc.toString()+")":"",1<a)){a="";for(var c=!0,d=this.Qe.i;d.next();){var e=d.value;c?c=!1:a+=",";a+=e.toString(0)}e="";c=!0;for(d=this.Le.i;d.next();){var f=d.value;c?c=!1:e+=",";e+=f.toString(0)}b+=" sources: "+a+" destinations: "+e}return b};
v.defineProperty(nq,{data:"data"},function(){return this.je},function(a){this.je=a;if(null!==a){var b=a.bounds;a=b.x;var c=b.y,d=b.width,b=b.height;this.P.m(d/2,b/2);this.M.m(a,c,d,b)}});v.defineProperty(nq,{Jc:"node"},function(){return this.qd},function(a){if(this.qd!==a){this.qd=a;a.sf();var b=a.U,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.M.m(c,d,e,b);if(!(a instanceof V)&&(a=a.bc.Xa(zb),a.G())){this.P.m(a.x-c,a.y-d);return}this.P.m(e/2,b/2)}});
v.defineProperty(nq,{mb:"bounds"},function(){return this.M},function(a){this.M.K(a)||this.M.assign(a)});v.defineProperty(nq,{focus:"focus"},function(){return this.P},function(a){this.P.K(a)||this.P.assign(a)});v.defineProperty(nq,{na:"centerX"},function(){return this.M.x+this.P.x},function(a){var b=this.M;b.x+this.P.x!==a&&(b.Pa(),b.x=a-this.P.x,b.freeze())});v.defineProperty(nq,{ua:"centerY"},function(){return this.M.y+this.P.y},function(a){var b=this.M;b.y+this.P.y!==a&&(b.Pa(),b.y=a-this.P.y,b.freeze())});
v.defineProperty(nq,{jt:"focusX"},function(){return this.P.x},function(a){var b=this.P;b.x!==a&&(b.Pa(),b.x=a,b.freeze())});v.defineProperty(nq,{kt:"focusY"},function(){return this.P.y},function(a){var b=this.P;b.y!==a&&(b.Pa(),b.y=a,b.freeze())});v.defineProperty(nq,{x:"x"},function(){return this.M.x},function(a){var b=this.M;b.x!==a&&(b.Pa(),b.x=a,b.freeze())});v.defineProperty(nq,{y:"y"},function(){return this.M.y},function(a){var b=this.M;b.y!==a&&(b.Pa(),b.y=a,b.freeze())});
v.defineProperty(nq,{width:"width"},function(){return this.M.width},function(a){var b=this.M;b.width!==a&&(b.Pa(),b.width=a,b.freeze())});v.defineProperty(nq,{height:"height"},function(){return this.M.height},function(a){var b=this.M;b.height!==a&&(b.Pa(),b.height=a,b.freeze())});
nq.prototype.commit=function(){var a=this.je;if(null!==a){var b=this.mb,c=a.bounds;v.Ta(c)?(c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height):a.bounds=b.copy()}else if(a=this.Jc,null!==a){b=this.mb;if(!(a instanceof V)){var c=a.U,d=a.bc.Xa(zb);if(c.G()&&d.G()){a.moveTo(b.x+this.jt-(d.x-c.x),b.y+this.kt-(d.y-c.y));return}}a.moveTo(b.x,b.y)}};nq.prototype.addSourceEdge=nq.prototype.eD=function(a){null!==a&&(this.Qe.contains(a)||this.Qe.add(a))};
nq.prototype.deleteSourceEdge=nq.prototype.BD=function(a){null!==a&&this.Qe.remove(a)};nq.prototype.addDestinationEdge=nq.prototype.dD=function(a){null!==a&&(this.Le.contains(a)||this.Le.add(a))};nq.prototype.deleteDestinationEdge=nq.prototype.AD=function(a){null!==a&&this.Le.remove(a)};v.u(nq,{CI:"sourceVertexes"},function(){for(var a=new J(nq),b=this.lc;b.next();)a.add(b.value.fromVertex);return a.i});
v.u(nq,{HG:"destinationVertexes"},function(){for(var a=new J(nq),b=this.hc;b.next();)a.add(b.value.toVertex);return a.i});v.u(nq,{vertexes:"vertexes"},function(){for(var a=new J(nq),b=this.lc;b.next();)a.add(b.value.fromVertex);for(b=this.hc;b.next();)a.add(b.value.toVertex);return a.i});v.u(nq,{lc:"sourceEdges"},function(){return this.Qe.i});v.u(nq,{hc:"destinationEdges"},function(){return this.Le.i});
v.u(nq,{edges:"edges"},function(){for(var a=new I(oq),b=this.lc;b.next();)a.add(b.value);for(b=this.hc;b.next();)a.add(b.value);return a.i});v.u(nq,{MG:"edgesCount"},function(){return this.Qe.count+this.Le.count});var tq;nq.standardComparer=tq=function(a,b){var c=a.qd,d=b.qd;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:null!==d?-1:0};
nq.smartComparer=function(a,b){if(null!==a){if(null!==b){var c=a.qd,d=b.qd;if(null!==c){if(null!==d){for(var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;if(0!==f-h)return f-
h}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0};function oq(){v.dc(this);this.network=null;this.clear()}v.ea("LayoutEdge",oq);oq.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null};
oq.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutEdge#"+v.ld(this);0<a&&(b+=null!==this.link?"("+this.link.toString()+")":"",1<a&&(b+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null")));return b};oq.prototype.ix=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};oq.prototype.commit=function(){};
oq.prototype.getOtherVertex=oq.prototype.XG=function(a){return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null};function mm(){0<arguments.length&&v.cd(mm);Zf.call(this);this.Nw=!0;this.Ks=this.Ls=NaN;this.jj=(new ia(NaN,NaN)).freeze();this.Nh=(new ia(10,10)).freeze();this.Ae=pn;this.ed=nn;this.Mh=jn;this.wh=uq}v.Ja(mm,Zf);v.ea("GridLayout",mm);
mm.prototype.cloneProtected=function(a){Zf.prototype.cloneProtected.call(this,a);a.Ls=this.Ls;a.Ks=this.Ks;a.jj.assign(this.jj);a.Nh.assign(this.Nh);a.Ae=this.Ae;a.ed=this.ed;a.Mh=this.Mh;a.wh=this.wh};
mm.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.Yd=this.initialOrigin(this.Yd);var b=this.g;a=this.oG(a);for(var c=a.copy().i;c.next();){var d=c.value;if(d instanceof W){var e=d;if(null!==e.T||null!==e.Z){a.remove(e);continue}}d.sf();if(d instanceof V)for(d=d.Ic;d.next();)a.remove(d.value)}e=a.cc();if(0!==e.length){switch(this.sorting){case mn:e.reverse();break;case jn:e.sort(this.comparer);
break;case kn:e.sort(this.comparer),e.reverse()}var f=this.UI;isNaN(f)&&(f=0);var h=this.wF,h=isNaN(h)&&null!==b?Math.max(b.rb.width-b.padding.left-b.padding.right,0):Math.max(this.wF,0);0>=f&&0>=h&&(f=1);a=this.spacing.width;isFinite(a)||(a=0);c=this.spacing.height;isFinite(c)||(c=0);null!==b&&b.Qb("Layout");d=[];switch(this.alignment){case qn:var k=a,l=c,m=Math.max(this.Ko.width,1);if(!isFinite(m))for(var n=m=0;n<e.length;n++)var p=e[n],q=p.Ca,m=Math.max(m,q.width);var m=Math.max(m+k,1),r=Math.max(this.Ko.height,
1);if(!isFinite(r))for(n=r=0;n<e.length;n++)p=e[n],q=p.Ca,r=Math.max(r,q.height);for(var r=Math.max(r+l,1),s=this.Nf,t=this.Yd.x,u=t,x=this.Yd.y,w=0,y=0,n=0;n<e.length;n++){var p=e[n],q=p.Ca,B=Math.ceil((q.width+k)/m)*m,H=Math.ceil((q.height+l)/r)*r,C=0;switch(s){case on:C=Math.abs(u-q.width);break;default:C=u+q.width}if(0<f&&w>f-1||0<h&&0<w&&C>h)d.push(new A(0,x,h+k,y)),w=0,u=t,x+=y,y=0;y=Math.max(y,H);H=0;switch(s){case on:H=-q.width;break;default:H=0}p.moveTo(u+H,x);switch(s){case on:u-=B;break;
default:u+=B}w++}d.push(new A(0,x,h+k,y));break;case pn:k=f;l=a;m=c;n=Math.max(this.Ko.width,1);p=x=B=0;q=v.L();for(f=0;f<e.length;f++)r=e[f],s=r.Ca,t=hp(r,r.bc,r.ef,q),B=Math.max(B,t.x),x=Math.max(x,s.width-t.x),p=Math.max(p,t.y);u=this.Nf;switch(u){case on:B+=l;break;default:x+=l}var n=isFinite(n)?Math.max(n+l,1):Math.max(B+x,1),T=x=this.Yd.x,w=this.Yd.y,y=0;h>=B&&(h-=B);for(var B=H=0,C=Math.max(this.Ko.height,1),ba=p=0,U=!0,M=v.L(),f=0;f<e.length;f++){r=e[f];s=r.Ca;t=hp(r,r.bc,r.ef,q);if(0<y)switch(u){case on:T=
(T-x-(s.width-t.x))/n;T=Hc(Math.round(T),T)?Math.round(T):Math.floor(T);T=T*n+x;break;default:T=(T-x+t.x)/n,T=Hc(Math.round(T),T)?Math.round(T):Math.ceil(T),T=T*n+x}else switch(u){case on:H=T+t.x+s.width;break;default:H=T-t.x}var aa=0;switch(u){case on:aa=-(T+t.x)+H;break;default:aa=T+s.width-t.x-H}if(0<k&&y>k-1||0<h&&0<y&&aa>h){d.push(new A(0,U?w-p:w,h+l,ba+p+m));for(T=0;T<y&&f!==y;T++){var aa=e[f-y+T],Ia=hp(aa,aa.bc,aa.ef,M);aa.moveTo(aa.position.x,aa.position.y+p-Ia.y)}ba+=m;w=U?w+ba:w+(ba+p);
y=ba=p=0;T=x;U=!1}T===x&&(B=u===on?Math.max(B,s.width-t.x):Math.min(B,-t.x));p=Math.max(p,t.y);ba=Math.max(ba,s.height-t.y);isFinite(C)&&(ba=Math.max(ba,Math.max(s.height,C)-t.y));U?r.moveTo(T-t.x,w-t.y):r.moveTo(T-t.x,w);switch(u){case on:T-=t.x+l;break;default:T+=s.width-t.x+l}y++}d.push(new A(0,w,h+l,(U?ba:ba+p)+m));for(T=0;T<y&&f!==y;T++)aa=e[f-y+T],Ia=hp(aa,aa.bc,aa.ef,q),aa.moveTo(aa.position.x,aa.position.y+p-Ia.y);v.v(q);v.v(M);if(u===on)for(f=0;f<d.length;f++)e=d[f],e.width+=B,e.x-=B;else for(f=
0;f<d.length;f++)e=d[f],e.x>B&&(e.width+=e.x-B,e.x=B)}for(k=f=h=e=0;k<d.length;k++)l=d[k],e=Math.min(e,l.x),h=Math.min(h,l.y),f=Math.max(f,l.x+l.width);this.Nf===on?this.commitLayers(d,new z(e+a/2-(f+e),h-c/2)):this.commitLayers(d,new z(e-a/2,h-c/2));null!==b&&b.wd("Layout");this.wf=!0}};mm.prototype.commitLayers=function(){};
v.defineProperty(mm,{wF:"wrappingWidth"},function(){return this.Ls},function(a){this.Ls!==a&&(v.j(a,"number",mm,"wrappingWidth"),0<a||isNaN(a))&&(this.Ls=a,this.Nw=isNaN(a),this.H())});v.defineProperty(mm,{UI:"wrappingColumn"},function(){return this.Ks},function(a){this.Ks!==a&&(v.j(a,"number",mm,"wrappingColumn"),0<a||isNaN(a))&&(this.Ks=a,this.H())});v.defineProperty(mm,{Ko:"cellSize"},function(){return this.jj},function(a){v.A(a,ia,mm,"cellSize");this.jj.K(a)||(this.jj.assign(a),this.H())});
v.defineProperty(mm,{spacing:"spacing"},function(){return this.Nh},function(a){v.A(a,ia,mm,"spacing");this.Nh.K(a)||(this.Nh.assign(a),this.H())});v.defineProperty(mm,{alignment:"alignment"},function(){return this.Ae},function(a){this.Ae!==a&&(v.pb(a,mm,mm,"alignment"),a===pn||a===qn)&&(this.Ae=a,this.H())});v.defineProperty(mm,{Nf:"arrangement"},function(){return this.ed},function(a){this.ed!==a&&(v.pb(a,mm,mm,"arrangement"),a===nn||a===on)&&(this.ed=a,this.H())});
v.defineProperty(mm,{sorting:"sorting"},function(){return this.Mh},function(a){this.Mh!==a&&(v.pb(a,mm,mm,"sorting"),a===ln||a===mn||a===jn||a===kn)&&(this.Mh=a,this.H())});v.defineProperty(mm,{comparer:"comparer"},function(){return this.wh},function(a){this.wh!==a&&(v.j(a,"function",mm,"comparer"),this.wh=a,this.H())});var uq;mm.standardComparer=uq=function(a,b){var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
mm.smartComparer=function(a,b){if(null!==a){if(null!==b){for(var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;if(0!==f-h)return f-h}}else if(""!==c[e])return 1;return""!==
d[e]&&void 0!==d[e]?-1:0}return 1}return null!==b?-1:0};var qn;mm.Position=qn=v.p(mm,"Position",0);var pn;mm.Location=pn=v.p(mm,"Location",1);var nn;mm.LeftToRight=nn=v.p(mm,"LeftToRight",2);var on;mm.RightToLeft=on=v.p(mm,"RightToLeft",3);var ln;mm.Forward=ln=v.p(mm,"Forward",4);var mn;mm.Reverse=mn=v.p(mm,"Reverse",5);var jn;mm.Ascending=jn=v.p(mm,"Ascending",6);var kn;mm.Descending=kn=v.p(mm,"Descending",7);
function rn(){0<arguments.length&&v.cd(rn);Zf.call(this);this.ey=this.Hn=this.Gd=0;this.Aq=360;this.by=Hn;this.zk=0;this.DB=Hn;this.Du=this.tg=this.TC=0;this.dw=new vq;this.Fu=this.gm=0;this.NF=600;this.Pr=NaN;this.Xp=1;this.vs=0;this.xs=360;this.ed=Hn;this.aa=Dn;this.Mh=An;this.wh=tq;this.Nh=6;this.Dr=Kn}v.Ja(rn,Zf);v.ea("CircularLayout",rn);
rn.prototype.cloneProtected=function(a){Zf.prototype.cloneProtected.call(this,a);a.Pr=this.Pr;a.Xp=this.Xp;a.vs=this.vs;a.xs=this.xs;a.ed=this.ed;a.aa=this.aa;a.Mh=this.Mh;a.wh=this.wh;a.Nh=this.Nh;a.Dr=this.Dr};rn.prototype.createNetwork=function(){return new wq};
rn.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.first(),a.na=0,a.ua=0);else{var b=new I(xq);b.Tc(a.i);a=new I(xq);var c=new I(xq),d;d=this.sort(b);var e=this.by,f=this.DB,h=this.Gd,k=this.Hn,l=this.ey,m=this.Aq,b=this.zk,n=this.TC,p=this.tg,q=this.Du,e=this.Nf,f=this.Tw,h=this.dI;if(!isFinite(h)||
0>=h)h=NaN;k=this.iG;if(!isFinite(k)||0>=k)k=1;l=this.xe;isFinite(l)||(l=0);m=this.Af;if(!isFinite(m)||360<m||1>m)m=360;b=this.spacing;isFinite(b)||(b=NaN);e===In&&f===Jn?e=Hn:e===In&&f!==Jn&&(f=Jn,e=this.Nf);if((this.direction===Bn||this.direction===Cn)&&this.sorting!==An){for(var r=0;!(r>=d.length);r+=2){a.add(d.da(r));if(r+1>=d.length)break;c.add(d.da(r+1))}this.direction===Bn?(this.Nf===In&&a.reverse(),d=new I(xq),d.Tc(a),d.Tc(c)):(this.Nf===In&&c.reverse(),d=new I(xq),d.Tc(c),d.Tc(a))}for(var s=
d.length,t=n=0,r=0;r<d.length;r++){var p=l+m*t*(this.direction===Dn?1:-1)/s,u=d.da(r).diameter;isNaN(u)&&(u=yq(d.da(r),p));360>m&&(0===r||r===d.length-1)&&(u/=2);n+=u;t++}if(isNaN(h)||e===In){isNaN(b)&&(b=6);if(e!==Hn&&e!==In){u=-Infinity;for(r=0;r<s;r++){var q=d.da(r),x=d.da(r===s-1?0:r+1);isNaN(q.diameter)&&yq(q,0);isNaN(x.diameter)&&yq(x,0);u=Math.max(u,(q.diameter+x.diameter)/2)}q=u+b;e===Fn?(p=2*Math.PI/s,h=(u+b)/p):h=zq(this,q*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180)}else h=zq(this,n+(360<=
m?s:s-1)*(e!==In?b:1.6*b),k,l*Math.PI/180,m*Math.PI/180);p=h*k}else if(p=h*k,t=Aq(this,h,p,l*Math.PI/180,m*Math.PI/180),isNaN(b)){if(e===Hn||e===In)b=(t-n)/(360<=m?s:s-1)}else if(e===Hn||e===In)r=(t-n)/(360<=m?s:s-1),r<b?(h=zq(this,n+b*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180),p=h*k):b=r;else{u=-Infinity;for(r=0;r<s;r++)q=d.da(r),x=d.da(r===s-1?0:r+1),isNaN(q.diameter)&&yq(q,0),isNaN(x.diameter)&&yq(x,0),u=Math.max(u,(q.diameter+x.diameter)/2);q=u+b;r=zq(this,q*(360<=m?s:s-1),k,l*Math.PI/180,
m*Math.PI/180);r>h?(h=r,p=h*k):q=t/(360<=m?s:s-1)}this.by=e;this.DB=f;this.Gd=h;this.Hn=k;this.ey=l;this.Aq=m;this.zk=b;this.TC=n;this.tg=p;this.Du=q;b=d;d=this.by;e=this.Gd;f=this.ey;k=this.Aq;l=this.zk;m=this.tg;n=this.Du;if(this.direction!==Bn&&this.direction!==Cn||d!==In)if(this.direction===Bn||this.direction===Cn){h=0;switch(d){case Gn:h=180*Bq(this,e,m,f,n)/Math.PI;break;case Hn:n=b=0;h=a.first();null!==h&&(b=yq(h,Math.PI/2));h=c.first();null!==h&&(n=yq(h,Math.PI/2));h=180*Bq(this,e,m,f,l+(b+
n)/2)/Math.PI;break;case Fn:h=k/b.length}if(this.direction===Bn){switch(d){case Gn:Cq(this,a,f,En);break;case Hn:Dq(this,a,f,En);break;case Fn:Eq(this,a,k/2,f,En)}switch(d){case Gn:Cq(this,c,f+h,Dn);break;case Hn:Dq(this,c,f+h,Dn);break;case Fn:Eq(this,c,k/2,f+h,Dn)}}else{switch(d){case Gn:Cq(this,c,f,En);break;case Hn:Dq(this,c,f,En);break;case Fn:Eq(this,c,k/2,f,En)}switch(d){case Gn:Cq(this,a,f+h,Dn);break;case Hn:Dq(this,a,f+h,Dn);break;case Fn:Eq(this,a,k/2,f+h,Dn)}}}else switch(d){case Gn:Cq(this,
b,f,this.direction);break;case Hn:Dq(this,b,f,this.direction);break;case Fn:Eq(this,b,k,f,this.direction);break;case In:Fq(this,b,k,f,this.direction)}else Fq(this,b,k,f-k/2,Dn)}this.updateParts();this.network=null;this.wf=!0};
function Eq(a,b,c,d,e){var f=a.Aq,h=a.Gd;a=a.tg;d=d*Math.PI/180;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=d+(e===Dn?l*c/(360<=f?k:k-1):-(l*c)/k),n=b.da(l),p=h*Math.tan(m)/a,p=Math.sqrt((h*h+a*a*p*p)/(1+p*p));n.na=p*Math.cos(m);n.ua=p*Math.sin(m);n.actualAngle=180*m/Math.PI}}
function Dq(a,b,c,d){var e=a.Gd,f=a.tg,h=a.zk;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.da(l),n=b.da(l===k-1?0:l+1),p=f*Math.sin(c);m.na=e*Math.cos(c);m.ua=p;m.actualAngle=180*c/Math.PI;isNaN(m.diameter)&&yq(m,0);isNaN(n.diameter)&&yq(n,0);m=Bq(a,e,f,d===Dn?c:-c,(m.diameter+n.diameter)/2+h);c+=d===Dn?m:-m}}
function Cq(a,b,c,d){var e=a.Gd,f=a.tg,h=a.Du;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.da(l);m.na=e*Math.cos(c);m.ua=f*Math.sin(c);m.actualAngle=180*c/Math.PI;m=Bq(a,e,f,d===Dn?c:-c,h);c+=d===Dn?m:-m}}function Fq(a,b,c,d,e){var f=a.Fu,f=a.Aq;a.gm=0;a.dw=new vq;if(360>c){for(f=d+(e===Dn?f:-f);0>f;)f+=360;f%=360;180<f&&(f-=360);f*=Math.PI/180;a.Fu=f;Gq(a,b,c,d,e)}else Hq(a,b,c,d,e);a.dw.commit(b)}
function Hq(a,b,c,d,e){var f=a.Gd,h=a.zk,k=a.Hn,l=f*Math.cos(d*Math.PI/180),m=a.tg*Math.sin(d*Math.PI/180),n=b.cc();if(3===n.length)n[0].na=f,n[0].ua=0,n[1].na=n[0].na-n[0].width/2-n[1].width/2-h,n[1].y=n[0].y,n[2].na=(n[0].na+n[1].na)/2,n[2].y=n[0].y-n[2].height-h;else if(4===n.length)n[0].na=f,n[0].ua=0,n[2].na=-n[0].na,n[2].ua=n[0].ua,n[1].na=0,n[1].y=Math.min(n[0].y,n[2].y)-n[1].height-h,n[3].na=0,n[3].y=Math.max(n[0].y+n[0].height+h,n[2].y+n[2].height+h);else{for(var f=v.L(),p=0;p<n.length;p++){n[p].na=
l;n[p].ua=m;if(p>=n.length-1)break;Iq(a,l,m,n,p,e,f)||Jq(a,l,m,n,p,e,f);l=f.x;m=f.y}v.v(f);a.gm++;if(!(23<a.gm)){var l=n[0].na,m=n[0].ua,f=n[n.length-1].na,p=n[n.length-1].ua,q=Math.abs(l-f)-((n[0].width+n[n.length-1].width)/2+h),r=Math.abs(m-p)-((n[0].height+n[n.length-1].height)/2+h),h=0;1>Math.abs(r)?Math.abs(l-f)<(n[0].width+n[n.length-1].width)/2&&(h=0):h=0<r?r:1>Math.abs(q)?0:q;q=!1;q=Math.abs(f)>Math.abs(p)?0<f!==m>p:0<p!==l<f;if(q=e===Dn?q:!q)h=-Math.abs(h),h=Math.min(h,-n[n.length-1].width),
h=Math.min(h,-n[n.length-1].height);a.dw.compare(h,n);1<Math.abs(h)&&(a.Gd=8>a.gm?a.Gd-h/(2*Math.PI):5>n.length&&10<h?a.Gd/2:a.Gd-(0<h?1.7:-2.3),a.tg=a.Gd*k,Hq(a,b,c,d,e))}}}
function Gq(a,b,c,d,e){for(var f=a.Gd,h=a.tg,k=a.Hn,l=f*Math.cos(d*Math.PI/180),m=h*Math.sin(d*Math.PI/180),n=v.L(),p=b.cc(),q=0;q<p.length;q++){p[q].na=l;p[q].ua=m;if(q>=p.length-1)break;Iq(a,l,m,p,q,e,n)||Jq(a,l,m,p,q,e,n);l=n.x;m=n.y}v.v(n);a.gm++;if(!(23<a.gm)){l=Math.atan2(m,l);l=e===Dn?a.Fu-l:l-a.Fu;l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI;f=l*(f+h)/2;h=a.dw;if(Math.abs(f)<Math.abs(h.Wo))for(h.Wo=f,h.gn=[],h.Lp=[],l=0;l<p.length;l++)h.gn[l]=p[l].mb.x,h.Lp[l]=p[l].mb.y;1<Math.abs(f)&&
(a.Gd=8>a.gm?a.Gd-f/(2*Math.PI):a.Gd-(0<f?1.7:-2.3),a.tg=a.Gd*k,Gq(a,b,c,d,e))}}function Iq(a,b,c,d,e,f,h){var k=a.Gd,l=a.tg,m=0,n=0;a=(d[e].width+d[e+1].width)/2+a.zk;var p=!1;if(0<=c!==(f===Dn)){if(m=b+a,m>k){m=b-a;if(m<-k)return h.x=m,h.y=n,!1;p=!0}}else if(m=b-a,m<-k){m=b+a;if(m>k)return h.x=m,h.y=n,!1;p=!0}n=Math.sqrt(1-Math.min(1,m*m/(k*k)))*l;0>c!==p&&(n=-n);if(Math.abs(c-n)>(d[e].height+d[e+1].height)/2)return h.x=m,h.y=n,!1;h.x=m;h.y=n;return!0}
function Jq(a,b,c,d,e,f,h){var k=a.Gd,l=a.tg,m=0,n=0;a=(d[e].height+d[e+1].height)/2+a.zk;d=!1;if(0<=b!==(f===Dn)){if(n=c-a,n<-l){n=c+a;if(n>l){h.x=m;h.y=n;return}d=!0}}else if(n=c+a,n>l){n=c-a;if(n<-l){h.x=m;h.y=n;return}d=!0}m=Math.sqrt(1-Math.min(1,n*n/(l*l)))*k;0>b!==d&&(m=-m);h.x=m;h.y=n}rn.prototype.commitLayout=function(){this.commitNodes();this.xt&&this.commitLinks()};
rn.prototype.commitNodes=function(){for(var a=this.YF,b=this.network.vertexes.i;b.next();){var c=b.value;c.x+=a.x;c.y+=a.y;c.commit()}};rn.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
function Aq(a,b,c,d,e){var f=a.NF;if(.001>Math.abs(a.Hn-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;for(var h=0,k=0,k=void 0!==d&&void 0!==e?e/(f+1):Math.PI/(2*(f+1)),l=0,m=0;m<=f;m++)l=void 0!==d&&void 0!==e?d+m*e/f:m*Math.PI/(2*f),l=Math.sin(l),h+=Math.sqrt(1-a*a*l*l)*k;return void 0!==d&&void 0!==e?(b>c?b:c)*h:4*(b>c?b:c)*h}function zq(a,b,c,d,e){var f=0,f=void 0!==d&&void 0!==e?Aq(a,1,c,d,e):Aq(a,1,c);return b/f}
function Bq(a,b,c,d,e){if(.001>Math.abs(a.Hn-1))return e/b;var f=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,h=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var k=0;;k++){var l=Math.sin(d+k*a),h=h+(b>c?b:c)*Math.sqrt(1-f*f*l*l)*a;if(h>=e)return k*a}}
rn.prototype.sort=function(a){switch(this.sorting){case xn:break;case zn:a.reverse();break;case sn:a.sort(this.comparer);break;case tn:a.sort(this.comparer);a.reverse();break;case An:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new I(xq),c=0;c<a.length;c++){var e=-1,f=-1;if(0===c)for(var h=0;h<a.length;h++){var k=a.da(h).MG;k>e&&(e=k,f=h)}else for(h=0;h<a.length;h++)k=b[h],k>e&&(e=k,f=h);d.add(a.da(f));b[f]=-1;f=a.da(f);e=0;for(h=f.lc;h.next();)e=a.indexOf(h.value.fromVertex),0>e||0<=b[e]&&
b[e]++;for(f=f.hc;f.next();)e=a.indexOf(f.value.toVertex),0>e||0<=b[e]&&b[e]++}a=[];for(b=0;b<d.length;b++){h=d.da(b);a[b]=[];for(var l=0,c=h.hc;c.next();)l=d.indexOf(c.value.toVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(c=h.lc;c.next();)l=d.indexOf(c.value.fromVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}h=[];for(b=0;b<a.length;b++)h[b]=0;for(var c=[],k=[],m=[],e=[],f=new I(xq),n=0,b=0;b<a.length;b++){var p=a[b].length;if(1===p)e.push(b);else if(0===p)f.add(d.da(b));else{if(0===n)c.push(b);
else{for(var q=Infinity,r=Infinity,s=-1,t=[],p=0;p<c.length;p++)0>a[c[p]].indexOf(c[p===c.length-1?0:p+1])&&t.push(p===c.length-1?0:p+1);if(0===t.length)for(p=0;p<c.length;p++)t.push(p);for(p=0;p<t.length;p++){var u=t[p],x,l=a[b];x=k;for(var w=m,y=h,B=u,H=c,C=0,T=0;T<x.length;T++){var ba=y[x[T]],U=y[w[T]],M=0,aa=0;ba<U?(M=ba,aa=U):(M=U,aa=ba);if(M<B&&B<=aa)for(ba=0;ba<l.length;ba++)U=l[ba],0>H.indexOf(U)||M<y[U]&&y[U]<aa||M===y[U]||aa===y[U]||C++;else for(ba=0;ba<l.length;ba++)U=l[ba],0>H.indexOf(U)||
M<y[U]&&y[U]<aa&&M!==y[U]&&aa!==y[U]&&C++}x=C;for(y=w=0;y<a[b].length;y++)l=c.indexOf(a[b][y]),0<=l&&(l=Math.abs(u-(l>=u?l+1:l)),w+=l<c.length+1-l?l:c.length+1-l);for(y=0;y<k.length;y++)l=h[k[y]],B=h[m[y]],l>=u&&l++,B>=u&&B++,l>B&&(H=B,B=l,l=H),B-l<(c.length+2)/2===(l<u&&u<=B)&&w++;if(x<q||x===q&&w<r)q=x,r=w,s=u}c.splice(s,0,b);for(p=0;p<c.length;p++)h[c[p]]=p;for(p=0;p<a[b].length;p++)q=a[b][p],0<=c.indexOf(q)&&(k.push(b),m.push(q))}n++}}k=!1;for(m=c.length;;){k=!0;for(h=0;h<e.length;h++)if(b=e[h],
n=a[b][0],l=c.indexOf(n),0<=l){for(r=p=0;r<a[n].length;r++)q=a[n][r],q=c.indexOf(q),0>q||q===l||(s=q>l?q-l:l-q,p+=q<l!==s>m-s?1:-1);c.splice(0>p?l:l+1,0,b);e.splice(h,1);h--}else k=!1;if(k)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],f.add(d.da(l));return f;default:v.k("Invalid sorting type.")}return a};v.defineProperty(rn,{dI:"radius"},function(){return this.Pr},function(a){this.Pr!==a&&(v.j(a,"number",rn,"radius"),0<a||isNaN(a))&&(this.Pr=a,this.H())});
v.defineProperty(rn,{iG:"aspectRatio"},function(){return this.Xp},function(a){this.Xp!==a&&(v.j(a,"number",rn,"aspectRatio"),0<a&&(this.Xp=a,this.H()))});v.defineProperty(rn,{xe:"startAngle"},function(){return this.vs},function(a){this.vs!==a&&(v.j(a,"number",rn,"startAngle"),this.vs=a,this.H())});v.defineProperty(rn,{Af:"sweepAngle"},function(){return this.xs},function(a){this.xs!==a&&(v.j(a,"number",rn,"sweepAngle"),this.xs=0<a&&360>=a?a:360,this.H())});
v.defineProperty(rn,{Nf:"arrangement"},function(){return this.ed},function(a){this.ed!==a&&(v.pb(a,rn,rn,"arrangement"),a===In||a===Hn||a===Gn||a===Fn)&&(this.ed=a,this.H())});v.defineProperty(rn,{direction:"direction"},function(){return this.aa},function(a){this.aa!==a&&(v.pb(a,rn,rn,"direction"),a===Dn||a===En||a===Bn||a===Cn)&&(this.aa=a,this.H())});
v.defineProperty(rn,{sorting:"sorting"},function(){return this.Mh},function(a){this.Mh!==a&&(v.pb(a,rn,rn,"sorting"),a===xn||a===zn||a===sn||tn||a===An)&&(this.Mh=a,this.H())});v.defineProperty(rn,{comparer:"comparer"},function(){return this.wh},function(a){this.wh!==a&&(v.j(a,"function",rn,"comparer"),this.wh=a,this.H())});v.defineProperty(rn,{spacing:"spacing"},function(){return this.Nh},function(a){this.Nh!==a&&(v.j(a,"number",rn,"spacing"),this.Nh=a,this.H())});
v.defineProperty(rn,{Tw:"nodeDiameterFormula"},function(){return this.Dr},function(a){this.Dr!==a&&(v.pb(a,rn,rn,"nodeDiameterFormula"),a===Kn||a===Jn)&&(this.Dr=a,this.H())});v.u(rn,{ZF:"actualXRadius"},function(){return this.Gd});v.u(rn,{$F:"actualYRadius"},function(){return this.tg});v.u(rn,{XI:"actualSpacing"},function(){return this.zk});v.u(rn,{YF:"actualCenter"},function(){return isNaN(this.Yd.x)||isNaN(this.Yd.y)?new z(0,0):new z(this.Yd.x+this.ZF,this.Yd.y+this.$F)});var Hn;
rn.ConstantSpacing=Hn=v.p(rn,"ConstantSpacing",0);var Gn;rn.ConstantDistance=Gn=v.p(rn,"ConstantDistance",1);var Fn;rn.ConstantAngle=Fn=v.p(rn,"ConstantAngle",2);var In;rn.Packed=In=v.p(rn,"Packed",3);var Dn;rn.Clockwise=Dn=v.p(rn,"Clockwise",4);var En;rn.Counterclockwise=En=v.p(rn,"Counterclockwise",5);var Bn;rn.BidirectionalLeft=Bn=v.p(rn,"BidirectionalLeft",6);var Cn;rn.BidirectionalRight=Cn=v.p(rn,"BidirectionalRight",7);var xn;rn.Forwards=xn=v.p(rn,"Forwards",8);var zn;
rn.Reverse=zn=v.p(rn,"Reverse",9);var sn;rn.Ascending=sn=v.p(rn,"Ascending",10);var tn;rn.Descending=tn=v.p(rn,"Descending",11);var An;rn.Optimized=An=v.p(rn,"Optimized",12);var Kn;rn.Pythagorean=Kn=v.p(rn,"Pythagorean",13);var Jn;rn.Circular=Jn=v.p(rn,"Circular",14);function vq(){this.Wo=-Infinity;this.Lp=this.gn=null}
vq.prototype.compare=function(a,b){if(0<a&&0>this.Wo||Math.abs(a)<Math.abs(this.Wo)&&!(0>a&&0<this.Wo)){this.Wo=a;this.gn=[];this.Lp=[];for(var c=0;c<b.length;c++)this.gn[c]=b[c].mb.x,this.Lp[c]=b[c].mb.y}};vq.prototype.commit=function(a){if(null!==this.gn&&null!==this.Lp)for(var b=0;b<this.gn.length;b++){var c=a.da(b);c.x=this.gn[b];c.y=this.Lp[b]}};function wq(){$f.call(this)}v.Ja(wq,$f);v.ea("CircularNetwork",wq);wq.prototype.createVertex=function(){return new xq};wq.prototype.createEdge=function(){return new Kq};
function xq(){nq.call(this);this.actualAngle=this.diameter=NaN}v.Ja(xq,nq);v.ea("CircularVertex",xq);
function yq(a,b){var c=a.network;if(null===c)return NaN;c=c.Pb;if(null===c)return NaN;if(c.Nf===In)if(c.Tw===Jn)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.Tw===Jn?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function Kq(){oq.call(this)}v.Ja(Kq,oq);v.ea("CircularEdge",Kq);
function Lq(){0<arguments.length&&v.cd(Lq);Zf.call(this);this.sg=null;this.cr=0;this.bg=(new ia(100,100)).freeze();this.Wp=!1;this.Lh=!0;this.vh=!1;this.eo=100;this.Cq=1;this.Dh=1E3;this.Qr=Math;this.Cn=.05;this.Bn=50;this.yn=150;this.An=0;this.sq=10;this.rq=5}v.Ja(Lq,Zf);v.ea("ForceDirectedLayout",Lq);
Lq.prototype.cloneProtected=function(a){Zf.prototype.cloneProtected.call(this,a);a.bg.assign(this.bg);a.Wp=this.Wp;a.Lh=this.Lh;a.vh=this.vh;a.eo=this.eo;a.Cq=this.Cq;a.Dh=this.Dh;a.Qr=this.Qr;a.Cn=this.Cn;a.Bn=this.Bn;a.yn=this.yn;a.An=this.An;a.sq=this.sq;a.rq=this.rq};Lq.prototype.createNetwork=function(){return new Mq};
Lq.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.Oz;if(0<this.network.vertexes.count){this.network.ww();for(var b=this.network.vertexes.i;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.i;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);
this.az();this.cr=0;if(this.needsClusterLayout()){b=this.network;for(c=b.DI().i;c.next();){this.network=c.value;for(var d=this.network.vertexes.i;d.next();){var e=d.value;e.Zf=e.vertexes.count;e.dk=1;e.Dm=null;e.ph=null}Nq(this,0,a)}this.network=b;c.reset();for(var d=this.jD,f=c.count,h=!0,k=e=0,l=v.jb(),m=0;m<f+b.vertexes.count+2;m++)l[m]=null;f=0;c.reset();for(var n=v.ag();c.next();)if(m=c.value,this.ah(m,n),h)h=!1,e=n.x+n.width/2,k=n.y+n.height/2,l[0]=new z(n.x+n.width+d.width,n.y),l[1]=new z(n.x,
n.y+n.height+d.height),f=2;else{var p=Oq(l,f,e,k,n.width,n.height,d),q=l[p],r=new z(q.x+n.width+d.width,q.y),s=new z(q.x,q.y+n.height+d.height);p+1<f&&l.splice(p+1,0,null);l[p]=r;l[p+1]=s;f++;p=q.x-n.x;q=q.y-n.y;for(m=m.vertexes.i;m.next();)r=m.value,r.na+=p,r.ua+=q}v.Vb(n);for(m=b.vertexes.i;m.next();)h=m.value,n=h.mb,2>f?(e=n.x+n.width/2,k=n.y+n.height/2,l[0]=new z(n.x+n.width+d.width,n.y),l[1]=new z(n.x,n.y+n.height+d.height),f=2):(p=Oq(l,f,e,k,n.width,n.height,d),q=l[p],r=new z(q.x+n.width+d.width,
q.y),s=new z(q.x,q.y+n.height+d.height),p+1<f&&l.splice(p+1,0,null),l[p]=r,l[p+1]=s,f++,h.na=q.x+h.width/2,h.ua=q.y+h.height/2);v.sa(l);for(c.reset();c.next();){d=c.value;for(e=d.vertexes.i;e.next();)b.al(e.value);for(d=d.edges.i;d.next();)b.Go(d.value)}}Pq(this,a);this.updateParts()}this.eo=a;this.network=null;this.wf=!0};
Lq.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var a=0,b=0,c=this.network.vertexes.first().mb,d=this.network.vertexes.i;d.next();){if(d.value.mb.yg(c)&&(a++,2<a))return!0;if(10<b)break;b++}return!1};Lq.prototype.ah=function(a,b){for(var c=!0,d=a.vertexes.i;d.next();){var e=d.value;c?(c=!1,b.set(e.mb)):b.bi(e.mb)}return b};
function Nq(a,b,c){if(Qq(a,b)){var d=a.Dh;a.Dh*=1+1/(b+1);var e=Rq(a,b),f=Math.max(0,Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10));a.Oz+=f;Nq(a,b+1,c);Pq(a,f);ar(a,e);b=a.sg;null===b?b=new I(gr):b.clear();b.Tc(e.vertexes);b.sort(function(a,b){return null===a||null===b||a===b?0:b.Zf-a.Zf});for(e=b.i;e.next();)hr(a,e.value);a.Dh=d}}
function Qq(a,b){if(10<b||3>a.network.vertexes.count)return!1;null===a.sg?a.sg=new I(gr):a.sg.clear();a.sg.Tc(a.network.vertexes);var c=a.sg;c.sort(function(a,b){return null===a||null===b||a===b?0:b.Zf-a.Zf});for(var d=c.count-1;0<=d&&1>=c.da(d).Zf;)d--;return 1<c.count-d}
function Rq(a,b){for(var c=a.network,d=new Mq,e=a.sg.i;e.next();){var f=e.value;if(1<f.Zf){d.al(f);var h=new ir;h.Ax=f.Zf;h.Bx=f.width;h.zx=f.height;h.HA=f.P.x;h.IA=f.P.y;null===f.ph&&(f.ph=new I(ir));f.ph.add(h);f.iA=f.ph.count-1}else break}for(var k=c.edges.i;k.next();)if(e=k.value,e.fromVertex.network===d&&e.toVertex.network===d)d.Go(e);else if(e.fromVertex.network===d){var l=e.fromVertex.Dm;null===l&&(l=new I(gr),e.fromVertex.Dm=l);l.add(e.toVertex);e.fromVertex.Zf--;e.fromVertex.dk+=e.toVertex.dk}else e.toVertex.network===
d&&(l=e.toVertex.Dm,null===l&&(l=new I(gr),e.toVertex.Dm=l),l.add(e.fromVertex),e.toVertex.Zf--,e.toVertex.dk+=e.fromVertex.dk);for(e=d.edges.i;e.next();)f=e.value,f.length*=Math.max(1,Ld((f.fromVertex.dk+f.toVertex.dk)/(4*b+1)));for(e=d.vertexes.i;e.next();)if(f=e.value,l=f.Dm,null!==l&&0<l.count&&(h=f.ph.da(f.ph.count-1),h=h.Ax-f.Zf,!(0>=h))){for(var m=0,n=0,p=l.count-h;p<l.count;p++){for(var q=l.da(p),r=null,k=q.edges.i;k.next();){var s=k.value;if(s.XG(q)===f){r=s;break}}null!==r&&(n+=r.length,
m+=q.width*q.height)}l=f.na;k=f.ua;p=f.width;q=f.height;r=f.P;s=p*q;1>s&&(s=1);m=Ld((m+s+n*n*4/(h*h))/s);h=(m-1)*p/2;m=(m-1)*q/2;f.mb=new A(l-r.x-h,k-r.y-m,p+2*h,q+2*m);f.focus=new z(r.x+h,r.y+m)}a.network=d;return c}function ar(a,b){for(var c=a.network.vertexes.i;c.next();){var d=c.value;d.network=b;if(null!==d.ph){var e=d.ph.da(d.iA);d.Zf=e.Ax;var f=e.HA,h=e.IA;d.mb=new A(d.na-f,d.ua-h,e.Bx,e.zx);d.focus=new z(f,h);d.iA--}}for(c=a.network.edges.i;c.next();)c.value.network=b;a.network=b}
function hr(a,b){var c=b.Dm;if(null!==c&&0!==c.count){var d=b.na,e=b.ua,f=b.width,h=b.height;null!==b.ph&&0<b.ph.count&&(h=b.ph.da(0),f=h.Bx,h=h.zx);for(var f=Ld(f*f+h*h)/2,k=!1,l=h=0,m=0,n=b.vertexes.i;n.next();){var p=n.value;1>=p.Zf?l++:(k=!0,m++,h+=Math.atan2(b.ua-p.ua,b.na-p.na))}if(0!==l)for(0<m&&(h/=m),n=m=0,m=k?2*Math.PI/(l+1):2*Math.PI/l,0===l%2&&(n=m/2),1<c.count&&c.sort(function(a,b){return null===a||null===b||a===b?0:b.width*b.height-a.width*a.height}),k=0===l%2?0:1,c=c.i;c.next();)if(l=
c.value,!(1<l.Zf||a.isFixed(l))){for(var p=null,q=l.edges.i;q.next();){p=q.value;break}var q=l.width,r=l.height,q=Ld(q*q+r*r)/2,p=f+p.length+q,q=h+(m*(k/2>>1)+n)*(0===k%2?1:-1);l.na=d+p*Math.cos(q);l.ua=e+p*Math.sin(q);k++}}}function Oq(a,b,c,d,e,f,h){var k=9E19,l=-1,m=0;a:for(;m<b;m++){var n=a[m],p=n.x-c,q=n.y-d,p=p*p+q*q;if(p<k){for(q=m-1;0<=q;q--)if(a[q].y>n.y&&a[q].x-n.x<e+h.width)continue a;for(q=m+1;q<b;q++)if(a[q].x>n.x&&a[q].y-n.y<f+h.height)continue a;l=m;k=p}}return l}
Lq.prototype.az=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Lq.prototype.addComments=function(a){var b=a.Jc;if(null!==b)for(b=b.KD();b.next();){var c=b.value;if("Comment"===c.fc&&c.isVisible()){var d=this.network.Lm(c);null===d&&(d=this.network.Ps(c));d.charge=this.CG;for(var c=null,e=d.hc;e.next();){var f=e.value;if(f.toVertex===a){c=f;break}}if(null===c)for(e=d.lc;e.next();)if(f=e.value,f.fromVertex===a){c=f;break}null===c&&(c=this.network.lp(a,d,null));c.length=this.DG}}};
function jr(a,b){var c=a.M,d=c.x,e=c.y,f=c.width,c=c.height,h=b.M,k=h.x,l=h.y,m=h.width,h=h.height;return d+f<k?e>l+h?(d=d+f-k,e=e-l-h,Ld(d*d+e*e)):e+c<l?(d=d+f-k,e=e+c-l,Ld(d*d+e*e)):k-(d+f):d>k+m?e>l+h?(d=d-k-m,e=e-l-h,Ld(d*d+e*e)):e+c<l?(d=d-k-m,e=e+c-l,Ld(d*d+e*e)):d-(k+m):e>l+h?e-(l+h):e+c<l?l-(e+c):.1}function Pq(a,b){a.sg=null;for(var c=a.cr+b;a.cr<c&&(a.cr++,kr(a)););a.sg=null}
function kr(a){null===a.sg&&(a.sg=new I(gr),a.sg.Tc(a.network.vertexes));var b=a.sg.n;if(0>=b.length)return!1;var c=b[0];c.forceX=0;c.forceY=0;for(var d=c.na,e=d,f=c.ua,h=f,c=1;c<b.length;c++){var k=b[c];k.forceX=0;k.forceY=0;var l=k.na,k=k.ua,d=Math.min(d,l),e=Math.max(e,l),f=Math.min(f,k),h=Math.max(h,k)}(f=e-d>h-f)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.na-b.na}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.ua-b.ua});for(var h=a.Dh,m=0,n=0,p=0,c=0;c<b.length;c++){var k=
b[c],l=k.M,q=k.P,d=l.x+q.x,l=l.y+q.y,n=k.charge*a.electricalFieldX(d,l),p=k.charge*a.electricalFieldY(d,l),n=n+k.mass*a.gravitationalFieldX(d,l),p=p+k.mass*a.gravitationalFieldY(d,l);k.forceX+=n;k.forceY+=p;for(q=c+1;q<b.length;q++)if(e=b[q],e!==k){var r=e.M,n=e.P,p=r.x+n.x,r=r.y+n.y;if(d-p>h||p-d>h){if(f)break}else if(l-r>h||r-l>h){if(!f)break}else{var s=jr(k,e);1>s?(n=a.ax,null===n&&(a.ax=n=new va(0)),m=n.random(),s=n.random(),d>p?(n=Math.abs(e.M.right-k.M.x),n=(1+n)*m):d<p?(n=Math.abs(e.M.x-k.M.right),
n=-(1+n)*m):(n=Math.max(e.width,k.width),n=(1+n)*m-n/2),l>r?(p=Math.abs(e.M.bottom-k.M.y),p=(1+p)*s):d<p?(p=Math.abs(e.M.y-k.M.bottom),p=-(1+p)*s):(p=Math.max(e.height,k.height),p=(1+p)*s-p/2)):(m=-(k.charge*e.charge)/(s*s),n=(p-d)/s*m,p=(r-l)/s*m);k.forceX+=n;k.forceY+=p;e.forceX-=n;e.forceY-=p}}}for(c=a.network.edges.i;c.next();)f=c.value,k=f.fromVertex,e=f.toVertex,l=k.M,q=k.P,d=l.x+q.x,l=l.y+q.y,r=e.M,n=e.P,p=r.x+n.x,r=r.y+n.y,s=jr(k,e),1>s?(n=a.ax,null===n&&(a.ax=n=new va(0)),m=n.random(),s=
n.random(),n=(d>p?1:-1)*(1+(e.width>k.width)?e.width:k.width)*m,p=(l>r?1:-1)*(1+(e.height>k.height)?e.height:k.height)*s):(m=f.stiffness*(s-f.length),n=(p-d)/s*m,p=(r-l)/s*m),k.forceX+=n,k.forceY+=p,e.forceX-=n,e.forceY-=p;c=0;d=Math.max(a.Dh/20,50);for(e=0;e<b.length;e++)k=b[e],a.isFixed(k)?a.moveFixedVertex(k):(f=k.forceX,h=k.forceY,f<-d?f=-d:f>d&&(f=d),h<-d?h=-d:h>d&&(h=d),k.na+=f,k.ua+=h,c=Math.max(c,f*f+h*h));return c>a.GD*a.GD}Lq.prototype.moveFixedVertex=function(){};
Lq.prototype.commitLayout=function(){this.oA();this.commitNodes();this.xt&&this.commitLinks()};Lq.prototype.oA=function(){if(this.Fp)for(var a=this.network.edges.i;a.next();){var b=a.value.link;null!==b&&(b.xb=fc,b.yb=fc)}};Lq.prototype.commitNodes=function(){var a=0,b=0;if(this.hG){var c=v.ag();this.ah(this.network,c);b=this.Yd;a=b.x-c.x;b=b.y-c.y;v.Vb(c)}for(var c=v.ag(),d=this.network.vertexes.i;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.mb),c.x+=a,c.y+=b,e.mb=c;e.commit()}v.Vb(c)};
Lq.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};Lq.prototype.springStiffness=function(a){a=a.stiffness;return isNaN(a)?this.Cn:a};Lq.prototype.springLength=function(a){a=a.length;return isNaN(a)?this.Bn:a};Lq.prototype.electricalCharge=function(a){a=a.charge;return isNaN(a)?this.yn:a};Lq.prototype.electricalFieldX=function(){return 0};Lq.prototype.electricalFieldY=function(){return 0};
Lq.prototype.gravitationalMass=function(a){a=a.mass;return isNaN(a)?this.An:a};Lq.prototype.gravitationalFieldX=function(){return 0};Lq.prototype.gravitationalFieldY=function(){return 0};Lq.prototype.isFixed=function(a){return a.isFixed};v.u(Lq,{yJ:"currentIteration"},function(){return this.cr});v.defineProperty(Lq,{jD:"arrangementSpacing"},function(){return this.bg},function(a){v.A(a,ia,Lq,"arrangementSpacing");this.bg.K(a)||(this.bg.assign(a),this.H())});
v.defineProperty(Lq,{hG:"arrangesToOrigin"},function(){return this.Wp},function(a){this.Wp!==a&&(v.j(a,"boolean",Lq,"arrangesToOrigin"),this.Wp=a,this.H())});v.defineProperty(Lq,{Fp:"setsPortSpots"},function(){return this.Lh},function(a){this.Lh!==a&&(v.j(a,"boolean",Lq,"setsPortSpots"),this.Lh=a,this.H())});v.defineProperty(Lq,{comments:"comments"},function(){return this.vh},function(a){this.vh!==a&&(v.j(a,"boolean",Lq,"comments"),this.vh=a,this.H())});
v.defineProperty(Lq,{Oz:"maxIterations"},function(){return this.eo},function(a){this.eo!==a&&(v.j(a,"number",Lq,"maxIterations"),0<=a&&(this.eo=a,this.H()))});v.defineProperty(Lq,{GD:"epsilonDistance"},function(){return this.Cq},function(a){this.Cq!==a&&(v.j(a,"number",Lq,"epsilonDistance"),0<a&&(this.Cq=a,this.H()))});v.defineProperty(Lq,{PJ:"infinityDistance"},function(){return this.Dh},function(a){this.Dh!==a&&(v.j(a,"number",Lq,"infinityDistance"),1<a&&(this.Dh=a,this.H()))});
v.defineProperty(Lq,{ax:"randomNumberGenerator"},function(){return this.Qr},function(a){this.Qr!==a&&(null!==a&&"function"!==typeof a.random&&v.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+a),this.Qr=a)});v.defineProperty(Lq,{KJ:"defaultSpringStiffness"},function(){return this.Cn},function(a){this.Cn!==a&&(v.j(a,"number",Lq,"defaultSpringStiffness"),this.Cn=a,this.H())});
v.defineProperty(Lq,{JJ:"defaultSpringLength"},function(){return this.Bn},function(a){this.Bn!==a&&(v.j(a,"number",Lq,"defaultSpringLength"),this.Bn=a,this.H())});v.defineProperty(Lq,{DJ:"defaultElectricalCharge"},function(){return this.yn},function(a){this.yn!==a&&(v.j(a,"number",Lq,"defaultElectricalCharge"),this.yn=a,this.H())});v.defineProperty(Lq,{EJ:"defaultGravitationalMass"},function(){return this.An},function(a){this.An!==a&&(v.j(a,"number",Lq,"defaultGravitationalMass"),this.An=a,this.H())});
v.defineProperty(Lq,{DG:"defaultCommentSpringLength"},function(){return this.sq},function(a){this.sq!==a&&(v.j(a,"number",Lq,"defaultCommentSpringLength"),this.sq=a,this.H())});v.defineProperty(Lq,{CG:"defaultCommentElectricalCharge"},function(){return this.rq},function(a){this.rq!==a&&(v.j(a,"number",Lq,"defaultCommentElectricalCharge"),this.rq=a,this.H())});function ir(){this.IA=this.HA=this.zx=this.Bx=this.Ax=0}function Mq(){$f.call(this)}v.Ja(Mq,$f);v.ea("ForceDirectedNetwork",Mq);
Mq.prototype.createVertex=function(){return new gr};Mq.prototype.createEdge=function(){return new lr};function gr(){nq.call(this);this.isFixed=!1;this.mass=this.charge=NaN;this.dk=this.Zf=this.forceY=this.forceX=0;this.ph=this.Dm=null;this.iA=0}v.Ja(gr,nq);v.ea("ForceDirectedVertex",gr);function lr(){oq.call(this);this.length=this.stiffness=NaN}v.Ja(lr,oq);v.ea("ForceDirectedEdge",lr);
function hn(){0<arguments.length&&v.cd(hn);Zf.call(this);this.Fd=this.Zl=25;this.aa=0;this.xn=mr;this.Zn=nr;this.Pn=or;this.Xl=4;this.kn=pr;this.Ei=qr;this.Lh=!0;this.hr=4;this.Fb=this.pv=this.ob=-1;this.Hf=this.rr=0;this.Lb=this.Ef=this.Ff=this.ig=this.Ud=null;this.zr=0;this.yr=this.cm=null;this.mg=0;this.Ar=null;this.UA=new z;this.Tg=[];this.Tg.length=100}v.Ja(hn,Zf);v.ea("LayeredDigraphLayout",hn);
hn.prototype.cloneProtected=function(a){Zf.prototype.cloneProtected.call(this,a);a.Zl=this.Zl;a.Fd=this.Fd;a.aa=this.aa;a.xn=this.xn;a.Zn=this.Zn;a.Pn=this.Pn;a.Xl=this.Xl;a.kn=this.kn;a.Ei=this.Ei;a.Lh=this.Lh;a.hr=this.hr};hn.prototype.createNetwork=function(){return new rr};
hn.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.Yd=this.initialOrigin(this.Yd);this.pv=-1;this.Hf=this.rr=0;this.Ar=this.yr=this.cm=null;for(a=0;a<this.Tg.length;a++)this.Tg[a]=null;if(0<this.network.vertexes.count){this.network.ww();for(a=this.network.edges.i;a.next();)a.value.rev=!1;switch(this.xn){default:case sr:var b=0,c=this.network.vertexes.count-
1;a=[];a.length=c+1;for(var d=this.network.vertexes.i;d.next();)d.value.valid=!0;for(;null!==tr(this.network);){for(d=ur(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=ur(this.network);for(d=vr(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=vr(this.network);for(var d=null,e=0,f=this.network.vertexes.i;f.next();){var h=f.value;if(h.valid){for(var k=0,l=h.hc;l.next();)l.value.toVertex.valid&&k++;for(var l=0,m=h.lc;m.next();)m.value.fromVertex.valid&&l++;if(null===d||e<k-l)d=h,e=k-l}}null!==d&&(a[b]=
d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.i;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.ix(b),b.rev=!0);break;case mr:for(b=this.network.vertexes.i;b.next();)a=b.value,a.Qo=-1,a.finish=-1;for(a=this.network.edges.i;a.next();)a.value.forest=!1;this.zr=0;for(b.reset();b.next();)c=b.value,0===c.lc.count&&wr(this,c);for(b.reset();b.next();)c=b.value,-1===c.Qo&&wr(this,c);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,
d=c.finish,e=b.toVertex,f=e.finish,e.Qo<c.Qo&&d<f&&(this.network.ix(b),b.rev=!0))}for(a=this.network.vertexes.i;a.next();)a.value.layer=-1;this.ob=-1;this.assignLayers();for(a.reset();a.next();)this.ob=Math.max(this.ob,a.value.layer);a=[];for(c=this.network.edges.i;c.next();)b=c.value,b.valid=!1,a.push(b);for(c=0;c<a.length;c++)if(b=a[c],!b.valid&&(null!==b.fromVertex.qd&&null!==b.toVertex.qd||b.fromVertex.layer!==b.toVertex.layer)){l=h=k=f=0;e=b.fromVertex;d=b.toVertex;if(null!==b.link){k=b.link;
if(null===k)continue;var n=e.qd,f=d.qd;if(null===n||null===f)continue;var p=k.T,h=k.Z,q=k.kd,l=k.Td;b.rev&&(k=p,m=q,p=h,q=l,h=k,l=m);var r=e.P,k=b.toVertex.P,s=b.rev?d.M:e.M,m=v.L();s.G()?(hp(p,q,zb,m),m.G()||m.assign(r)):m.assign(r);n!==p&&s.G()&&p.isVisible()&&(n=e.M,n.G()&&(m.x+=s.x-n.x,m.y+=s.y-n.y));p=b.rev?e.M:d.M;n=v.L();p.G()?(hp(h,l,zb,n),n.G()||n.assign(k)):n.assign(k);f!==h&&p.G()&&h.isVisible()&&(f=d.M,f.G()&&(n.x+=p.x-f.x,n.y+=p.y-f.y));90===this.aa||270===this.aa?(f=Math.round((m.x-
r.x)/this.Fd),h=m.x,k=Math.round((n.x-k.x)/this.Fd),l=n.x):(f=Math.round((m.y-r.y)/this.Fd),h=m.y,k=Math.round((n.y-k.y)/this.Fd),l=n.y);v.v(m);v.v(n);b.portFromColOffset=f;b.portFromPos=h;b.portToColOffset=k;b.portToPos=l}else b.portFromColOffset=0,b.portFromPos=0,b.portToColOffset=0,b.portToPos=0;m=e.layer;r=d.layer;a:if(n=b,p=0,s=n.link,null!==s){var t=s.kd,u=s.Td;if(null!==t&&null!==u){var x=s.T,q=s.Z;if(null!==x&&null!==q){var w=t.xb,y=u.yb;this.Fp||(s.xb.Uc()||(w=s.xb),s.yb.Uc()||(y=s.yb));
var B=s.jc,H=xr(this,!0);if(w.Uc()||w===qb)w=H;var C=xr(this,!1);if(y.Uc()||y===qb)y=C;if(w.Wi()&&w.ap(C)&&y.Wi()&&y.ap(H)){p=0;break a}H=s.getLinkPoint(x,t,w,!0,B,q,u,v.L());w=s.getLinkDirection(x,t,H,w,!0,B,q,u);v.v(H);w===yr(this,n,!0)?p+=1:this.Fp&&null!==x&&1===x.ports.count&&n.rev&&(p+=1);w=s.getLinkPoint(q,u,y,!1,B,x,t,v.L());s=s.getLinkDirection(q,u,w,y,!1,B,x,t);v.v(w);s===yr(this,n,!1)?p+=2:this.Fp&&null!==q&&1===q.ports.count&&n.rev&&(p+=2)}}}n=1===p||3===p?!0:!1;if(p=2===p||3===p?!0:!1)q=
this.network.createVertex(),q.qd=null,q.Am=1,q.layer=m,q.near=e,this.network.al(q),e=this.network.lp(e,q,b.link),e.valid=!1,e.rev=b.rev,e.portFromColOffset=f,e.portToColOffset=0,e.portFromPos=h,e.portToPos=0,e=q;s=1;n&&s--;if(m-r>s&&0<m){b.valid=!1;q=this.network.createVertex();q.qd=null;q.Am=2;q.layer=m-1;this.network.al(q);e=this.network.lp(e,q,b.link);e.valid=!0;e.rev=b.rev;e.portFromColOffset=p?0:f;e.portToColOffset=0;e.portFromPos=p?0:h;e.portToPos=0;e=q;for(m--;m-r>s&&0<m;)q=this.network.createVertex(),
q.qd=null,q.Am=3,q.layer=m-1,this.network.al(q),e=this.network.lp(e,q,b.link),e.valid=!0,e.rev=b.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=q,m--;e=this.network.lp(q,d,b.link);e.valid=!n;n&&(q.near=d);e.rev=b.rev;e.portFromColOffset=0;e.portToColOffset=k;e.portFromPos=0;e.portToPos=l}else b.valid=!0}b=this.Ud=[];for(c=0;c<=this.ob;c++)b[c]=0;for(a=this.network.vertexes.i;a.next();)c=a.value,c.index=-1;this.initializeIndices();this.pv=-1;for(c=this.Hf=this.rr=0;c<=
this.ob;c++)b[c]>b[this.Hf]&&(this.pv=b[c]-1,this.Hf=c),b[c]<b[this.rr]&&(this.rr=c);this.Ar=[];for(c=0;c<b.length;c++)this.Ar[c]=[];for(a.reset();a.next();)b=a.value,c=this.Ar[b.layer],c[b.index]=b;this.Fb=-1;for(a=0;a<=this.ob;a++){b=zr(this,a);c=0;d=this.Ud[a];for(e=0;e<d;e++)f=b[e],c+=this.nodeMinColumnSpace(f,!0),f.column=c,c+=1,c+=this.nodeMinColumnSpace(f,!1);this.Fb=Math.max(this.Fb,c-1);Ar(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=null;this.wf=
!0};hn.prototype.linkMinLength=function(){return 1};function Br(a){var b=a.fromVertex.qd;a=a.toVertex.qd;return null===b&&null===a?8:null===b||null===a?4:1}hn.prototype.nodeMinLayerSpace=function(a,b){return null===a.qd?0:90===this.aa||270===this.aa?b?a.P.y+10:a.M.height-a.P.y+10:b?a.P.x+10:a.M.width-a.P.x+10};
hn.prototype.nodeMinColumnSpace=function(a,b){if(null===a.qd)return 0;var c=b?a.Wz:a.Vz;if(null!==c)return c;c=this.aa;return 90===c||270===c?b?a.Wz=a.P.x/this.Fd+1|0:a.Vz=(a.M.width-a.P.x)/this.Fd+1|0:b?a.Wz=a.P.y/this.Fd+1|0:a.Vz=(a.M.height-a.P.y)/this.Fd+1|0};function Cr(a){null===a.cm&&(a.cm=[]);for(var b=0,c=a.network.vertexes.i;c.next();){var d=c.value;a.cm[b]=d.layer;b++;a.cm[b]=d.column;b++;a.cm[b]=d.index;b++}return a.cm}
function Dr(a,b){for(var c=0,d=a.network.vertexes.i;d.next();){var e=d.value;e.layer=b[c];c++;e.column=b[c];c++;e.index=b[c];c++}}
function Er(a,b,c){var d=zr(a,b),e=a.Ud[b];if(null===a.yr||a.yr.length<e*e)a.yr=[];for(var f=a.yr,h=0;h<e;h++){var k=0,l=d[h],m=l.near,n=0;if(null!==m&&m.layer===l.layer)if(n=m.index,n>h)for(var p=h+1;p<n;p++)l=d[p],l.near===m&&l.Am===m.Am||k++;else for(p=h-1;p>n;p--)l=d[p],l.near===m&&l.Am===m.Am||k++;var m=0,q,r=q=p=l=0,s,t=0,u=0;s=0;var x;if(0<=c)for(n=d[h].Qe,m=0;m<n.count;m++)if(q=n.n[m],q.valid&&q.fromVertex.layer!==b)for(l=q.fromVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=
n.n[r],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,u=s.portToPos,s=s.portFromPos,p<u&&(l>t||l===t&&q>s)&&k++,u<p&&(t>l||t===l&&s>q)&&k++);if(0>=c)for(n=d[h].Le,m=0;m<n.count;m++)if(q=n.n[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=n.n[r],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,u=s.portToPos,s=s.portFromPos,q<s&&(l>t||l===t&&p>u)&&k++,s<q&&(t>l||t===l&&u>p)&&k++);f[h*e+h]=k;for(n=h+1;n<e;n++){var w=0,y=0;if(0<=c)for(k=
d[h].Qe,x=d[n].Qe,m=0;m<k.count;m++)if(q=k.n[m],q.valid&&q.fromVertex.layer!==b)for(l=q.fromVertex.index,q=q.portFromPos,r=0;r<x.count;r++)s=x.n[r],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,s=s.portFromPos,(l<t||l===t&&q<s)&&y++,(t<l||t===l&&s<q)&&w++);if(0>=c)for(k=d[h].Le,x=d[n].Le,m=0;m<k.count;m++)if(q=k.n[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,r=0;r<x.count;r++)s=x.n[r],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,u=s.portToPos,(l<t||l===t&&p<
u)&&y++,(t<l||t===l&&u<p)&&w++);f[h*e+n]=w;f[n*e+h]=y}}Ar(a,b,d);return f}hn.prototype.countCrossings=function(){for(var a=0,b=0;b<=this.ob;b++)for(var c=Er(this,b,1),d=this.Ud[b],e=0;e<d;e++)for(var f=e;f<d;f++)a+=c[e*d+f];return a};
function Fr(a){for(var b=0,c=0;c<=a.ob;c++){for(var d=a,e=c,f=zr(d,e),h=d.Ud[e],k=0,l=0;l<h;l++){var m=null,m=f[l].Le,n,p=0,q=0;if(null!==m)for(var r=0;r<m.count;r++)n=m.n[r],n.valid&&n.toVertex.layer!==e&&(p=n.fromVertex.column+n.portFromColOffset,q=n.toVertex.column+n.portToColOffset,k+=(Math.abs(p-q)+1)*Br(n))}Ar(d,e,f);b+=k}return b}
hn.prototype.normalize=function(){var a=Infinity;this.Fb=-1;for(var b=this.network.vertexes.i;b.next();){var c=b.value,a=Math.min(a,c.column-this.nodeMinColumnSpace(c,!0));this.Fb=Math.max(this.Fb,c.column+this.nodeMinColumnSpace(c,!1))}for(b.reset();b.next();)b.value.column-=a;this.Fb-=a};
function Gr(a,b,c){for(var d=zr(a,b),e=a.Ud[b],f=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.Qe);var m=null;0<=c&&(m=k.Le);var n=0,p=0,q=k.near;null!==q&&q.layer===k.layer&&(n+=q.column-1,p++);if(null!==l)for(q=0;q<l.count;q++){var k=l.n[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(n+=r.column,p++)}if(null!==m)for(l=0;l<m.count;l++)k=m.n[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(n+=q.column,p++);f[h]=0===p?-1:n/p}Ar(a,b,d);return f}
function Hr(a,b,c){for(var d=zr(a,b),e=a.Ud[b],f=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.Qe);var m=null;0<=c&&(m=k.Le);var n=0,p=[],q=k.near;null!==q&&q.layer===k.layer&&(p[n]=q.column-1,n++);if(null!==l)for(q=0;q<l.count;q++){var k=l.n[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(p[n]=r.column+k.portFromColOffset,n++)}if(null!==m)for(l=0;l<m.count;l++)k=m.n[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(p[n]=q.column+k.portToColOffset,n++);0===n?f[h]=-1:(p.sort(function(a,b){return a-b}),
m=n>>1,f[h]=n&1?p[m]:p[m-1]+p[m]>>1)}Ar(a,b,d);return f}function Ir(a,b,c,d,e,f){if(b.component===d){b.component=c;var h=0,k=0;if(e)for(var l=b.hc;l.next();){var k=l.value,m=k.toVertex,h=b.layer-m.layer,k=a.linkMinLength(k);h===k&&Ir(a,m,c,d,e,f)}if(f)for(l=b.lc;l.next();)k=l.value,m=k.fromVertex,h=m.layer-b.layer,k=a.linkMinLength(k),h===k&&Ir(a,m,c,d,e,f)}}
function Jr(a,b,c,d,e,f){if(b.component===d){b.component=c;if(e)for(var h=b.hc;h.next();)Jr(a,h.value.toVertex,c,d,e,f);if(f)for(b=b.lc;b.next();)Jr(a,b.value.fromVertex,c,d,e,f)}}function tr(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid)return b}return null}function ur(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.hc;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}}return null}
function vr(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.lc;d.next();)if(d.value.fromVertex.valid){c=!1;break}if(c)return b}}return null}function wr(a,b){b.Qo=a.zr;a.zr++;for(var c=b.hc;c.next();){var d=c.value,e=d.toVertex;-1===e.Qo&&(d.forest=!0,wr(a,e))}b.finish=a.zr;a.zr++}
hn.prototype.assignLayers=function(){switch(this.Zn){case Kr:Lr(this);break;case Mr:for(var a=0,b=this.network.vertexes.i;b.next();)a=Nr(this,b.value),this.ob=Math.max(a,this.ob);for(b.reset();b.next();)a=b.value,a.layer=this.ob-a.layer;break;default:case nr:Lr(this);for(b=this.network.vertexes.i;b.next();)b.value.valid=!1;for(b.reset();b.next();)a=b.value,0===a.lc.count&&Or(this,a);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.ob=-1;for(b.reset();b.next();){var c=b.value;c.layer-=
a;this.ob=Math.max(this.ob,c.layer)}}};function Lr(a){for(var b=a.network.vertexes.i;b.next();){var c=Pr(a,b.value);a.ob=Math.max(c,a.ob)}}function Pr(a,b){var c=0;if(-1===b.layer){for(var d=b.hc;d.next();)var e=d.value,f=e.toVertex,e=a.linkMinLength(e),c=Math.max(c,Pr(a,f)+e);b.layer=c}else c=b.layer;return c}function Nr(a,b){var c=0;if(-1===b.layer){for(var d=b.lc;d.next();)var e=d.value,f=e.fromVertex,e=a.linkMinLength(e),c=Math.max(c,Nr(a,f)+e);b.layer=c}else c=b.layer;return c}
function Or(a,b){if(!b.valid){b.valid=!0;for(var c=b.hc;c.next();)Or(a,c.value.toVertex);for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(var d=b.Qe.n,e=d.length,f=0;f<e;f++){var h=d[f],k=a.linkMinLength(h);h.fromVertex.layer-h.toVertex.layer>k&&Ir(a,h.fromVertex,0,-1,!0,!1)}for(Ir(a,b,1,-1,!0,!0);0!==b.component;){for(var k=0,d=Infinity,l=0,m=null,n=a.network.vertexes.i;n.next();){var p=n.value;if(1===p.component){for(var q=0,r=!1,s=p.Qe.n,e=s.length,f=0;f<e;f++){var h=s[f],t=h.fromVertex,
q=q+1;1!==t.component&&(k+=1,t=t.layer-p.layer,h=a.linkMinLength(h),d=Math.min(d,t-h))}h=p.Le.n;e=h.length;for(f=0;f<e;f++)s=h[f].toVertex,q-=1,1!==s.component?k-=1:r=!0;(null===m||q<l)&&!r&&(m=p,l=q)}}if(0<k){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else m.component=0}for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(Ir(a,b,1,-1,!0,!1);0!==b.component;){f=0;e=Infinity;d=0;k=null;for(l=a.network.vertexes.i;l.next();)if(m=l.value,1===m.component){n=
0;p=!1;h=m.Qe.n;q=h.length;for(r=0;r<q;r++)s=h[r].fromVertex,n+=1,1!==s.component?f+=1:p=!0;h=m.Le.n;q=h.length;for(r=0;r<q;r++)s=h[r],t=s.toVertex,n-=1,1!==t.component&&(f-=1,t=m.layer-t.layer,s=a.linkMinLength(s),e=Math.min(e,t-s));(null===k||n>d)&&!p&&(k=m,d=n)}if(0>f){for(c.reset();c.next();)f=c.value,1===f.component&&(f.layer-=e);b.component=0}else k.component=0}}}
function yr(a,b,c){return 90===a.aa?c&&!b.rev||!c&&b.rev?270:90:180===a.aa?c&&!b.rev||!c&&b.rev?0:180:270===a.aa?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
hn.prototype.initializeIndices=function(){switch(this.Pn){default:case Qr:for(var a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;b.index=this.Ud[c];this.Ud[c]++}break;case or:a=this.network.vertexes.i;for(b=this.ob;0<=b;b--)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Rr(this,c);break;case Sr:for(a=this.network.vertexes.i,b=0;b<=this.ob;b++)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Tr(this,c)}};
function Rr(a,b){var c=b.layer;b.index=a.Ud[c];a.Ud[c]++;for(var c=b.Le.cc(),d=!0;d;)for(var d=!1,e=0;e<c.length-1;e++){var f=c[e],h=c[e+1];f.portFromColOffset>h.portFromColOffset&&(d=!0,c[e]=h,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Rr(a,d))}
function Tr(a,b){var c=b.layer;b.index=a.Ud[c];a.Ud[c]++;for(var c=b.Qe.cc(),d=!0,e=0;d;)for(d=!1,e=0;e<c.length-1;e++){var f=c[e],h=c[e+1];f.portToColOffset>h.portToColOffset&&(d=!0,c[e]=h,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Tr(a,d))}
hn.prototype.reduceCrossings=function(){for(var a=this.countCrossings(),b=Cr(this),c=0,d=0,e=0,c=0;c<this.Xl;c++){for(d=0;d<=this.ob;d++)Ur(this,d,1),Vr(this,d,1);e=this.countCrossings();e<a&&(a=e,b=Cr(this));for(d=this.ob;0<=d;d--)Ur(this,d,-1),Vr(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=Cr(this))}Dr(this,b);for(c=0;c<this.Xl;c++){for(d=0;d<=this.ob;d++)Ur(this,d,0),Vr(this,d,0);e=this.countCrossings();e<a&&(a=e,b=Cr(this));for(d=this.ob;0<=d;d--)Ur(this,d,0),Vr(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=Cr(this))}Dr(this,b);var f=!1,h=c=0,k=0,d=0;switch(this.kn){case Wr:break;case Xr:for(k=a+1;(d=this.countCrossings())<k;)for(k=d,c=this.ob;0<=c;c--)for(h=0;h<=c;h++){for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Vr(this,d,-1)||f;e=this.countCrossings();e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Vr(this,d,1)||f;e=this.countCrossings();e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Vr(this,d,1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,
d=h;d<=c;d++)f=Vr(this,d,-1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this))}break;default:case pr:for(c=this.ob,h=0,k=a+1;(d=this.countCrossings())<k;){k=d;for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Vr(this,d,-1)||f;e=this.countCrossings();e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Vr(this,d,1)||f;e=this.countCrossings();
e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Vr(this,d,1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Vr(this,d,-1)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=c;d>=h;d--)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this));for(f=!0;f;)for(f=!1,d=h;d<=c;d++)f=Vr(this,d,0)||f;e>=a?Dr(this,b):(a=e,b=Cr(this))}}Dr(this,b)};
function Ur(a,b,c){var d=0,e=zr(a,b),f=a.Ud[b],h=Hr(a,b,c);c=Gr(a,b,c);for(d=0;d<f;d++)-1===c[d]&&(c[d]=e[d].column),-1===h[d]&&(h[d]=e[d].column);for(var k=!0,l;k;)for(k=!1,d=0;d<f-1;d++)if(h[d+1]<h[d]||h[d+1]===h[d]&&c[d+1]<c[d])k=!0,l=h[d],h[d]=h[d+1],h[d+1]=l,l=c[d],c[d]=c[d+1],c[d+1]=l,l=e[d],e[d]=e[d+1],e[d+1]=l;for(d=h=0;d<f;d++)l=e[d],l.index=d,h+=a.nodeMinColumnSpace(l,!0),l.column=h,h+=1,h+=a.nodeMinColumnSpace(l,!1);Ar(a,b,e)}
function Vr(a,b,c){var d=zr(a,b),e=a.Ud[b];c=Er(a,b,c);var f=0,h;h=[];for(f=0;f<e;f++)h[f]=-1;var k;k=[];for(f=0;f<e;f++)k[f]=-1;for(var l=!1,m=!0;m;)for(m=!1,f=0;f<e-1;f++){var n=c[d[f].index*e+d[f+1].index],p=c[d[f+1].index*e+d[f].index],q=0,r=0,s=d[f].column,t=d[f+1].column,u=a.nodeMinColumnSpace(d[f],!0),x=a.nodeMinColumnSpace(d[f],!1),w=a.nodeMinColumnSpace(d[f+1],!0),y=a.nodeMinColumnSpace(d[f+1],!1),u=s-u+w,x=t-x+y,w=w=0,B=d[f].lc.i;for(B.reset();B.next();)if(y=B.value,y.valid&&y.fromVertex.layer===
b){y=y.fromVertex;for(w=0;d[w]!==y;)w++;w<f&&(q+=2*(f-w),r+=2*(f+1-w));w===f+1&&(q+=1);w>f+1&&(q+=4*(w-f),r+=4*(w-(f+1)))}B=d[f].hc.i;for(B.reset();B.next();)if(y=B.value,y.valid&&y.toVertex.layer===b){y=y.toVertex;for(w=0;d[w]!==y;)w++;w===f+1&&(r+=1)}B=d[f+1].lc.i;for(B.reset();B.next();)if(y=B.value,y.valid&&y.fromVertex.layer===b){y=y.fromVertex;for(w=0;d[w]!==y;)w++;w<f&&(q+=2*(f+1-w),r+=2*(f-w));w===f&&(r+=1);w>f+1&&(q+=4*(w-(f+1)),r+=4*(w-f))}B=d[f+1].hc.i;for(B.reset();B.next();)if(y=B.value,
y.valid&&y.toVertex.layer===b){y=y.toVertex;for(w=0;d[w]!==y;)w++;w===f&&(q+=1)}var w=y=0,B=h[d[f].index],H=k[d[f].index],C=h[d[f+1].index],T=k[d[f+1].index];-1!==B&&(y+=Math.abs(B-s),w+=Math.abs(B-x));-1!==H&&(y+=Math.abs(H-s),w+=Math.abs(H-x));-1!==C&&(y+=Math.abs(C-t),w+=Math.abs(C-u));-1!==T&&(y+=Math.abs(T-t),w+=Math.abs(T-u));if(r<q-.5||r===q&&p<n-.5||r===q&&p===n&&w<y-.5)m=l=!0,d[f].column=x,d[f+1].column=u,n=d[f],d[f]=d[f+1],d[f+1]=n}for(f=0;f<e;f++)d[f].index=f;Ar(a,b,d);return l}
hn.prototype.straightenAndPack=function(){var a=0,b=!1,c=0!==(this.Ei&Yr),a=this.Ei===qr;1E3<this.network.edges.count&&!a&&(c=!1);if(c){b=[];for(a=a=0;a<=this.ob;a++)b[a]=0;for(var d=0,e=this.network.vertexes.i;e.next();){var f=e.value,a=f.layer,d=f.column,f=this.nodeMinColumnSpace(f,!1);b[a]=Math.max(b[a],d+f)}for(e.reset();e.next();)f=e.value,a=f.layer,d=f.column,f.column=(8*(this.Fb-b[a])>>1)+8*d;this.Fb*=8}if(0!==(this.Ei&Zr))for(b=!0;b;){b=!1;for(a=this.Hf+1;a<=this.ob;a++)b=$r(this,a,1)||b;
for(a=this.Hf-1;0<=a;a--)b=$r(this,a,-1)||b;b=$r(this,this.Hf,0)||b}if(0!==(this.Ei&as)){for(a=this.Hf+1;a<=this.ob;a++)bs(this,a,1);for(a=this.Hf-1;0<=a;a--)bs(this,a,-1);bs(this,this.Hf,0)}c&&(cs(this,-1),cs(this,1));if(0!==(this.Ei&Zr))for(b=!0;b;){b=!1;b=$r(this,this.Hf,0)||b;for(a=this.Hf+1;a<=this.ob;a++)b=$r(this,a,0)||b;for(a=this.Hf-1;0<=a;a--)b=$r(this,a,0)||b}};function $r(a,b,c){for(var d=!1;ds(a,b,c);)d=!0;return d}
function ds(a,b,c){var d=0,e=zr(a,b),f=a.Ud[b],h=Gr(a,b,-1);if(0<c)for(d=0;d<f;d++)h[d]=-1;var k=Gr(a,b,1);if(0>c)for(d=0;d<f;d++)k[d]=-1;for(var l=!1,m=!0;m;)for(m=!1,d=0;d<f;d++){var n=e[d].column,p=a.nodeMinColumnSpace(e[d],!0),q=a.nodeMinColumnSpace(e[d],!1),r=0,r=0>d-1||n-e[d-1].column-1>p+a.nodeMinColumnSpace(e[d-1],!1)?n-1:n,p=0,p=d+1>=f||e[d+1].column-n-1>q+a.nodeMinColumnSpace(e[d+1],!0)?n+1:n,s=q=0,t=0,u=0,x=0,w=0;if(0>=c)for(var y=e[d].lc.i;y.next();){var B=y.value;B.valid&&B.fromVertex.layer!==
b&&(u=Br(B),x=B.portFromColOffset,w=B.portToColOffset,B=B.fromVertex.column,q+=(Math.abs(n+w-(B+x))+1)*u,s+=(Math.abs(r+w-(B+x))+1)*u,t+=(Math.abs(p+w-(B+x))+1)*u)}if(0<=c)for(y=e[d].hc.i;y.next();)B=y.value,B.valid&&B.toVertex.layer!==b&&(u=Br(B),x=B.portFromColOffset,w=B.portToColOffset,B=B.toVertex.column,q+=(Math.abs(n+x-(B+w))+1)*u,s+=(Math.abs(r+x-(B+w))+1)*u,t+=(Math.abs(p+x-(B+w))+1)*u);w=x=u=0;y=h[e[d].index];B=k[e[d].index];-1!==y&&(u+=Math.abs(y-n),x+=Math.abs(y-r),w+=Math.abs(y-p));-1!==
B&&(u+=Math.abs(B-n),x+=Math.abs(B-r),w+=Math.abs(B-p));if(s<q||s===q&&x<u)m=l=!0,e[d].column=r;else if(t<q||t===q&&w<u)m=l=!0,e[d].column=p}Ar(a,b,e);a.normalize();return l}
function bs(a,b,c){var d=0,e=zr(a,b),f=a.Ud[b],h=Hr(a,b,c);c=[];for(d=0;d<f;d++)c[d]=h[d];for(h=!0;h;)for(h=!1,d=0;d<f;d++){var k=e[d].column,l=a.nodeMinColumnSpace(e[d],!0),m=a.nodeMinColumnSpace(e[d],!1),n=0,p=0,q=0,q=p=0;-1===c[d]?0===d&&d===f-1?n=k:0===d?(p=e[d+1].column,n=p-k===m+a.nodeMinColumnSpace(e[d+1],!0)?k-1:k):d===f-1?(q=e[d-1].column,n=k-q===l+a.nodeMinColumnSpace(e[d-1],!1)?k+1:k):(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+
1],!0)-m-1,n=(q+p)/2|0):0===d&&d===f-1?n=c[d]:0===d?(p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,n=Math.min(c[d],p)):d===f-1?(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,n=Math.max(c[d],q)):(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,q<c[d]&&c[d]<p?n=c[d]:q>=c[d]?n=q:p<=c[d]&&(n=p));n!==k&&(h=!0,e[d].column=n)}Ar(a,b,e);a.normalize()}
function es(a,b){for(var c=!0,d=a.network.vertexes.i;d.next();){var e=d.value,f=a.nodeMinColumnSpace(e,!0),h=a.nodeMinColumnSpace(e,!1);if(e.column-f<=b&&e.column+h>=b){c=!1;break}}e=!1;if(c)for(d.reset();d.next();)c=d.value,c.column>b&&(c.column-=1,e=!0);return e}
function fs(a,b){for(var c=b,c=b+1,d=0,e=[],f=[],d=0;d<=a.ob;d++)e[d]=!1,f[d]=!1;for(var h=a.network.vertexes.i;h.next();){var d=h.value,k=d.column-a.nodeMinColumnSpace(d,!0),l=d.column+a.nodeMinColumnSpace(d,!1);k<=b&&l>=b&&(e[d.layer]=!0);k<=c&&l>=c&&(f[d.layer]=!0)}k=!0;c=!1;for(d=0;d<=a.ob;d++)k=k&&!(e[d]&&f[d]);if(k)for(h.reset();h.next();)e=h.value,e.column>b&&(e.column-=1,c=!0);return c}
function cs(a,b){for(var c=0;c<=a.Fb;c++)for(;es(a,c););a.normalize();for(c=0;c<a.Fb;c++)for(;fs(a,c););a.normalize();var c=0,d,e=0,f=0,h=0;if(0<b)for(c=0;c<=a.Fb;c++)for(d=Cr(a),e=Fr(a),f=e+1;e<f;)f=e,gs(a,c,1),h=Fr(a),h>e?Dr(a,d):h<e&&(e=h,d=Cr(a));if(0>b)for(c=a.Fb;0<=c;c--)for(d=Cr(a),e=Fr(a),f=e+1;e<f;)f=e,gs(a,c,-1),h=Fr(a),h>e?Dr(a,d):h<e&&(e=h,d=Cr(a));a.normalize()}
function gs(a,b,c){a.mg=0;for(var d=a.network.vertexes.i;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();){var e=d.value;e.column-a.nodeMinColumnSpace(e,!0)<=b&&(e.component=a.mg)}if(0>c)for(d.reset();d.next();)e=d.value,e.column+a.nodeMinColumnSpace(e,!1)>=b&&(e.component=a.mg);a.mg++;for(d.reset();d.next();)b=d.value,-1===b.component&&(Jr(a,b,a.mg,-1,!0,!0),a.mg++);var f=0;b=[];for(f=0;f<a.mg*a.mg;f++)b[f]=!1;e=[];for(f=0;f<(a.ob+1)*(a.Fb+1);f++)e[f]=-1;for(d.reset();d.next();)for(var f=
d.value,h=f.layer,k=Math.max(0,f.column-a.nodeMinColumnSpace(f,!0)),l=Math.min(a.Fb,f.column+a.nodeMinColumnSpace(f,!1));k<=l;k++)e[h*(a.Fb+1)+k]=f.component;for(f=0;f<=a.ob;f++){if(0<c)for(k=0;k<a.Fb;k++)-1!==e[f*(a.Fb+1)+k]&&-1!==e[f*(a.Fb+1)+k+1]&&e[f*(a.Fb+1)+k]!==e[f*(a.Fb+1)+k+1]&&(b[e[f*(a.Fb+1)+k]*a.mg+e[f*(a.Fb+1)+k+1]]=!0);if(0>c)for(k=a.Fb;0<k;k--)-1!==e[f*(a.Fb+1)+k]&&-1!==e[f*(a.Fb+1)+k-1]&&e[f*(a.Fb+1)+k]!==e[f*(a.Fb+1)+k-1]&&(b[e[f*(a.Fb+1)+k]*a.mg+e[f*(a.Fb+1)+k-1]]=!0)}e=[];for(f=
0;f<a.mg;f++)e[f]=!0;h=new I("number");h.add(0);for(l=0;0!==h.count;)if(l=h.n[h.count-1],h.Vc(h.count-1),e[l])for(e[l]=!1,f=0;f<a.mg;f++)b[l*a.mg+f]&&h.yd(0,f);if(0<c)for(d.reset();d.next();)a=d.value,e[a.component]&&(a.column-=1);if(0>c)for(d.reset();d.next();)c=d.value,e[c.component]&&(c.column+=1)}
hn.prototype.commitLayout=function(){if(this.Fp)for(var a=xr(this,!0),b=xr(this,!1),c=this.network.edges.i;c.next();){var d=c.value.link;null!==d&&(d.xb=a,d.yb=b)}this.commitNodes();this.fz();this.xt&&this.commitLinks()};function xr(a,b){return 270===a.aa?b?sc:vc:90===a.aa?b?vc:sc:180===a.aa?b?tc:uc:b?uc:tc}
hn.prototype.commitNodes=function(){this.ig=[];this.Ff=[];this.Ef=[];this.Lb=[];for(var a=0;a<=this.ob;a++)this.ig[a]=0,this.Ff[a]=0,this.Ef[a]=0,this.Lb[a]=0;for(a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;this.ig[c]=Math.max(this.ig[c],this.nodeMinLayerSpace(b,!0));this.Ff[c]=Math.max(this.Ff[c],this.nodeMinLayerSpace(b,!1))}for(var b=0,d=this.Zl,c=0;c<=this.ob;c++){var e=d;0>=this.ig[c]+this.Ff[c]&&(e=0);0<c&&(b+=e/2);90===this.aa||0===this.aa?(b+=this.Ff[c],this.Ef[c]=b,b+=this.ig[c]):
(b+=this.ig[c],this.Ef[c]=b,b+=this.Ff[c]);c<this.ob&&(b+=e/2);this.Lb[c]=b}d=b;b=this.Yd;for(c=0;c<=this.ob;c++)270===this.aa?this.Ef[c]=b.y+this.Ef[c]:90===this.aa?(this.Ef[c]=b.y+d-this.Ef[c],this.Lb[c]=d-this.Lb[c]):180===this.aa?this.Ef[c]=b.x+this.Ef[c]:(this.Ef[c]=b.x+d-this.Ef[c],this.Lb[c]=d-this.Lb[c]);a.reset();for(d=e=Infinity;a.next();){var c=a.value,f=c.layer,h=c.column|0,k=0,l=0;270===this.aa||90===this.aa?(k=b.x+this.Fd*h,l=this.Ef[f]):(k=this.Ef[f],l=b.y+this.Fd*h);c.na=k;c.ua=l;
e=Math.min(c.x,e);d=Math.min(c.y,d)}e=b.x-e;b=b.y-d;this.UA=null!==this.group?new z(e,b):ad;for(a.reset();a.next();)c=a.value,null!==this.group&&(c.x+=e,c.y+=b),c.commit()};
hn.prototype.fz=function(){for(var a=0,b=this.Zl,c=0;c<=this.ob;c++)a+=this.ig[c],a+=this.Ff[c];for(var a=a+this.ob*b,b=[],c=this.Fd*this.Fb,d=this.JH;0<=d;d--)270===this.aa?0===d?b.push(new A(0,0,c,Math.abs(this.Lb[0]))):b.push(new A(0,this.Lb[d-1],c,Math.abs(this.Lb[d-1]-this.Lb[d]))):90===this.aa?0===d?b.push(new A(0,this.Lb[0],c,Math.abs(this.Lb[0]-a))):b.push(new A(0,this.Lb[d],c,Math.abs(this.Lb[d-1]-this.Lb[d]))):180===this.aa?0===d?b.push(new A(0,0,Math.abs(this.Lb[0]),c)):b.push(new A(this.Lb[d-
1],0,Math.abs(this.Lb[d-1]-this.Lb[d]),c)):0===d?b.push(new A(this.Lb[0],0,Math.abs(this.Lb[0]-a),c)):b.push(new A(this.Lb[d],0,Math.abs(this.Lb[d-1]-this.Lb[d]),c));this.commitLayers(b,this.UA)};hn.prototype.commitLayers=function(){};
hn.prototype.commitLinks=function(){for(var a=this.network.edges.i,b;a.next();)b=a.value.link,null!==b&&(b.Cl(),b.Mo(),b.Pi());for(a.reset();a.next();)b=a.value.link,null!==b&&b.en();for(a.reset();a.next();){var c=a.value;b=c.link;if(null!==b){b.Cl();var d=b,e=d.T,f=d.Z,h=d.kd,k=d.Td;if(c.valid){if(b.Ke===Ni&&4===b.oa){if(c.rev)var l=e,e=f,f=l,m=h,h=k,k=m;if(c.fromVertex.column===c.toVertex.column){var n=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,f,k),p=b.getLinkPoint(f,k,b.computeSpot(!1),!1,!1,
e,h);n.G()||n.set(e.U.dl);p.G()||p.set(f.U.dl);b.Mo();b.$k(n.x,n.y);b.$k((2*n.x+p.x)/3,(2*n.y+p.y)/3);b.$k((n.x+2*p.x)/3,(n.y+2*p.y)/3);b.$k(p.x,p.y)}else{var q=!1,r=!1;null!==h&&b.computeSpot(!0)===qb&&(q=!0);null!==k&&b.computeSpot(!1)===qb&&(r=!0);if(q||r){var s=b.l(0).x,t=b.l(0).y,u=b.l(1).x,x=b.l(1).y,w=b.l(2).x,y=b.l(2).y,B=b.l(3).x,H=b.l(3).y;if(q){90===this.aa||270===this.aa?(u=s,x=(t+H)/2):(u=(s+B)/2,x=t);b.V(1,u,x);var C=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,f,k);C.G()||C.set(e.U.dl);
b.V(0,C.x,C.y)}r&&(90===this.aa||270===this.aa?(w=B,y=(t+H)/2):(w=(s+B)/2,y=H),b.V(2,w,y),C=b.getLinkPoint(f,k,b.computeSpot(!1),!1,!1,e,h),C.G()||C.set(f.U.dl),b.V(3,C.x,C.y))}}}b.Pi()}else if(c.fromVertex.layer===c.toVertex.layer)b.Pi();else{var T=!1,ba=!1,U=0,M=b.it+1;if(b.jc)ba=!0,U=b.oa,4<U&&b.points.removeRange(2,U-3);else if(b.Ke===Ni)T=!0,U=b.oa,4<U&&b.points.removeRange(2,U-3),M=2;else{var U=b.oa,aa=b.computeSpot(!0)===qb,Ia=b.computeSpot(!1)===qb;2<U&&aa&&Ia?b.points.removeRange(1,U-2):
3<U&&aa&&!Ia?b.points.removeRange(1,U-3):3<U&&!aa&&Ia?b.points.removeRange(2,U-2):4<U&&!aa&&!Ia&&b.points.removeRange(2,U-3)}var oa=c.fromVertex,Ga=c.toVertex,pa,Ca;if(c.rev){for(var ua=0;null!==Ga&&oa!==Ga;){Ca=pa=null;for(var gc=Ga.lc.i;gc.next();){var ud=gc.value;if(ud.link===c.link&&(pa=ud.fromVertex,Ca=ud.toVertex,null===pa.qd))break}if(pa!==oa)if(ob=b.l(M-1).x,eb=b.l(M-1).y,ka=pa.na,la=pa.ua,ba)180===this.aa||0===this.aa?2===M?(b.w(M++,ob,eb),b.w(M++,ob,la)):(we=null!==Ca?Ca.ua:eb,we!==la&&
(pb=this.Lb[pa.layer-1],b.w(M++,pb,eb),b.w(M++,pb,la))):2===M?(b.w(M++,ob,eb),b.w(M++,ka,eb)):(xd=null!==Ca?Ca.na:ob,xd!==ka&&(pb=this.Lb[pa.layer-1],b.w(M++,ob,pb),b.w(M++,ka,pb)));else if(2===M)if(Ua=Math.max(10,this.ig[Ga.layer]),Ra=Math.max(10,this.Ff[Ga.layer]),T)180===this.aa?ka<=Ga.M.x?(ua=Ga.M.x,b.w(M++,ua-Ua,la),b.w(M++,ua,la),b.w(M++,ua+Ra,la)):(b.w(M++,ka-Ua,la),b.w(M++,ka,la),b.w(M++,ka+Ra,la)):90===this.aa?la>=Ga.M.bottom?(ua=Ga.M.y+Ga.M.height,b.w(M++,ka,ua+Ra),b.w(M++,ka,ua),b.w(M++,
ka,ua-Ua)):(b.w(M++,ka,la+Ra),b.w(M++,ka,la),b.w(M++,ka,la-Ua)):270===this.aa?la<=Ga.M.y?(ua=Ga.M.y,b.w(M++,ka,ua-Ua),b.w(M++,ka,ua),b.w(M++,ka,ua+Ra)):(b.w(M++,ka,la-Ua),b.w(M++,ka,la),b.w(M++,ka,la+Ra)):0===this.aa&&(ka>=Ga.M.right?(ua=Ga.M.x+Ga.M.width,b.w(M++,ua+Ra,la),b.w(M++,ua,la),b.w(M++,ua-Ua,la)):(b.w(M++,ka+Ra,la),b.w(M++,ka,la),b.w(M++,ka-Ua,la)));else{b.w(M++,ob,eb);var vd=0;if(180===this.aa||0===this.aa){if(180===this.aa?ka>=Ga.M.right:ka<=Ga.M.x)vd=(0===this.aa?-Ua:Ra)/2;b.w(M++,ob+
vd,la)}else{if(270===this.aa?la>=Ga.M.bottom:la<=Ga.M.y)vd=(90===this.aa?-Ua:Ra)/2;b.w(M++,ka,eb+vd)}b.w(M++,ka,la)}else Ua=Math.max(10,this.ig[pa.layer]),Ra=Math.max(10,this.Ff[pa.layer]),180===this.aa?(T&&b.w(M++,ka-Ua,la),b.w(M++,ka,la),T&&b.w(M++,ka+Ra,la)):90===this.aa?(T&&b.w(M++,ka,la+Ra),b.w(M++,ka,la),T&&b.w(M++,ka,la-Ua)):270===this.aa?(T&&b.w(M++,ka,la-Ua),b.w(M++,ka,la),T&&b.w(M++,ka,la+Ra)):(T&&b.w(M++,ka+Ra,la),b.w(M++,ka,la),T&&b.w(M++,ka-Ua,la));Ga=pa}if(null===k||b.computeSpot(!1)!==
qb||ba)if(ob=b.l(M-1).x,eb=b.l(M-1).y,ka=b.l(M).x,la=b.l(M).y,ba){var Le=this.Ff[oa.layer],Wb=0;180===this.aa||0===this.aa?(Wb=eb,Wb>=oa.M.y&&Wb<=oa.M.bottom&&(180===this.aa?ka>=oa.M.x:ka<=oa.M.right)&&(ua=oa.na+(180===this.aa?-Le:Le),Wb=Wb<oa.M.y+oa.M.height/2?oa.M.y-this.Fd/2:oa.M.bottom+this.Fd/2,b.w(M++,ua,eb),b.w(M++,ua,Wb)),b.w(M++,ka,Wb)):(Wb=ob,Wb>=oa.M.x&&Wb<=oa.M.right&&(270===this.aa?la>=oa.M.y:la<=oa.M.bottom)&&(ua=oa.ua+(270===this.aa?-Le:Le),Wb=Wb<oa.M.x+oa.M.width/2?oa.M.x-this.Fd/
2:oa.M.right+this.Fd/2,b.w(M++,ob,ua),b.w(M++,Wb,ua)),b.w(M++,Wb,la));b.w(M++,ka,la)}else if(T)Ua=Math.max(10,this.ig[oa.layer]),Ra=Math.max(10,this.Ff[oa.layer]),180===this.aa&&ka>=oa.M.x?(ua=oa.M.x+oa.M.width,b.V(M-2,ua,eb),b.V(M-1,ua+Ra,eb)):90===this.aa&&la<=oa.M.bottom?(ua=oa.M.y,b.V(M-2,ob,ua),b.V(M-1,ob,ua-Ua)):270===this.aa&&la>=oa.M.y?(ua=oa.M.y+oa.M.height,b.V(M-2,ob,ua),b.V(M-1,ob,ua+Ra)):0===this.aa&&ka<=oa.M.right&&(ua=oa.M.x,b.V(M-2,ua,eb),b.V(M-1,ua-Ua,eb));else{Ua=Math.max(10,this.ig[oa.layer]);
Ra=Math.max(10,this.Ff[oa.layer]);vd=0;if(180===this.aa||0===this.aa){if(180===this.aa?ka<=oa.M.x:ka>=oa.M.right)vd=(0===this.aa?Ra:-Ua)/2;b.w(M++,ka+vd,eb)}else{if(270===this.aa?la<=oa.M.y:la>=oa.M.bottom)vd=(90===this.aa?Ra:-Ua)/2;b.w(M++,ob,la+vd)}b.w(M++,ka,la)}}else{for(;null!==oa&&oa!==Ga;){Ca=pa=null;for(var Jg=oa.hc.i;Jg.next();){var wd=Jg.value;if(wd.link===c.link&&(pa=wd.toVertex,Ca=wd.fromVertex,null!==Ca.qd&&(Ca=null),null===pa.qd))break}var ob=0,eb=0,ka=0,la=0,pb=0,Ua=0,Ra=0;if(pa!==
Ga)if(ob=b.l(M-1).x,eb=b.l(M-1).y,ka=pa.na,la=pa.ua,ba)if(180===this.aa||0===this.aa){var we=null!==Ca?Ca.ua:eb;we!==la&&(pb=this.Lb[pa.layer],2===M&&(pb=0===this.aa?Math.max(pb,ob):Math.min(pb,ob)),b.w(M++,pb,eb),b.w(M++,pb,la))}else{var xd=null!==Ca?Ca.na:ob;xd!==ka&&(pb=this.Lb[pa.layer],2===M&&(pb=90===this.aa?Math.max(pb,eb):Math.min(pb,eb)),b.w(M++,ob,pb),b.w(M++,ka,pb))}else Ua=Math.max(10,this.ig[pa.layer]),Ra=Math.max(10,this.Ff[pa.layer]),180===this.aa?(b.w(M++,ka+Ra,la),T&&b.w(M++,ka,la),
b.w(M++,ka-Ua,la)):90===this.aa?(b.w(M++,ka,la-Ua),T&&b.w(M++,ka,la),b.w(M++,ka,la+Ra)):270===this.aa?(b.w(M++,ka,la+Ra),T&&b.w(M++,ka,la),b.w(M++,ka,la-Ua)):(b.w(M++,ka-Ua,la),T&&b.w(M++,ka,la),b.w(M++,ka+Ra,la));oa=pa}ba&&(ob=b.l(M-1).x,eb=b.l(M-1).y,ka=b.l(M).x,la=b.l(M).y,180===this.aa||0===this.aa?eb!==la&&(pb=0===this.aa?Math.min(Math.max((ka+ob)/2,this.Lb[Ga.layer]),ka):Math.max(Math.min((ka+ob)/2,this.Lb[Ga.layer]),ka),b.w(M++,pb,eb),b.w(M++,pb,la)):ob!==ka&&(pb=90===this.aa?Math.min(Math.max((la+
eb)/2,this.Lb[Ga.layer]),la):Math.max(Math.min((la+eb)/2,this.Lb[Ga.layer]),la),b.w(M++,ob,pb),b.w(M++,ka,pb)))}if(null!==d&&T){if(null!==h){if(b.computeSpot(!0)===qb){var ie=b.l(0),Nd=b.l(2);ie.K(Nd)||b.V(1,(ie.x+Nd.x)/2,(ie.y+Nd.y)/2)}C=b.getLinkPoint(e,h,qb,!0,!1,f,k);C.G()||C.set(e.U.dl);b.V(0,C.x,C.y)}null!==k&&(b.computeSpot(!1)===qb&&(ie=b.l(b.oa-1),Nd=b.l(b.oa-3),ie.K(Nd)||b.V(b.oa-2,(ie.x+Nd.x)/2,(ie.y+Nd.y)/2)),C=b.getLinkPoint(f,k,qb,!1,!1,e,h),C.G()||C.set(f.U.dl),b.V(b.oa-1,C.x,C.y))}b.Pi();
c.commit()}}}for(var je=new I(W),Kg=this.network.edges.i;Kg.next();){var dd=Kg.value.link;null!==dd&&dd.jc&&!je.contains(dd)&&je.add(dd)}if(0<je.count)if(90===this.aa||270===this.aa){for(var oi=0,vb=new I(hs),Xb,Od,nh=je.i;nh.next();){var Jb=nh.value;if(null!==Jb&&Jb.jc)for(var hb=2;hb<Jb.oa-3;hb++)if(Xb=Jb.l(hb),Od=Jb.l(hb+1),is(Xb.y,Od.y)&&!is(Xb.x,Od.x)){var bb=new hs;bb.layer=Math.floor(Xb.y/2);var Me=Jb.l(0),Pd=Jb.l(Jb.oa-1);bb.first=Me.x*Me.x+Me.y;bb.Rd=Pd.x*Pd.x+Pd.y;bb.He=Math.min(Xb.x,Od.x);
bb.Zd=Math.max(Xb.x,Od.x);bb.index=hb;bb.link=Jb;if(hb+2<Jb.oa){var Lg=Jb.l(hb-1),Mg=Jb.l(hb+2),hc=0;Lg.y<Xb.y?hc=Mg.y<Xb.y?3:Xb.x<Od.x?2:1:Lg.y>Xb.y&&(hc=Mg.y>Xb.y?0:Od.x<Xb.x?2:1);bb.ai=hc}vb.add(bb)}}if(1<vb.count){vb.sort(this.SE);for(var ic=0;ic<vb.count;){for(var ke=vb.n[ic].layer,ed=ic+1;ed<vb.count&&vb.n[ed].layer===ke;)ed++;if(1<ed-ic)for(var jb=ic;jb<ed;){for(var Tc=vb.n[jb].Zd,Ka=ic+1;Ka<ed&&vb.n[Ka].He<Tc;)Tc=Math.max(Tc,vb.n[Ka].Zd),Ka++;var kb=Ka-jb;if(1<kb){vb.Ip(this.kx,jb,jb+kb);
for(var wc=1,yd=vb.n[jb].Rd,hb=jb;hb<Ka;hb++){var Hb=vb.n[hb];Hb.Rd!==yd&&(wc++,yd=Hb.Rd)}vb.Ip(this.RE,jb,jb+kb);for(var le=1,yd=vb.n[jb].first,hb=jb;hb<Ka;hb++)Hb=vb.n[hb],Hb.first!==yd&&(le++,yd=Hb.first);var of=!0,Ne=le;wc<le?(of=!1,Ne=wc,yd=vb.n[jb].Rd,vb.Ip(this.kx,jb,jb+kb)):yd=vb.n[jb].first;for(var Jf=0,hb=jb;hb<Ka;hb++){Hb=vb.n[hb];(of?Hb.first:Hb.Rd)!==yd&&(Jf++,yd=of?Hb.first:Hb.Rd);Jb=Hb.link;Xb=Jb.l(Hb.index);Od=Jb.l(Hb.index+1);var Kb=this.qE*(Jf-(Ne-1)/2);oi++;Jb.Cl();Jb.V(Hb.index,
Xb.x,Xb.y+Kb);Jb.V(Hb.index+1,Od.x,Od.y+Kb);Jb.Pi()}}jb=Ka}ic=ed}}}else{for(var xe=0,Lb=new I(hs),jc,Qb,Ic=je.i;Ic.next();){var wb=Ic.value;if(null!==wb&&wb.jc)for(var Bb=2;Bb<wb.oa-3;Bb++)if(jc=wb.l(Bb),Qb=wb.l(Bb+1),is(jc.x,Qb.x)&&!is(jc.y,Qb.y)){var Ib=new hs;Ib.layer=Math.floor(jc.x/2);var Qd=wb.l(0),Ng=wb.l(wb.oa-1);Ib.first=Qd.x+Qd.y*Qd.y;Ib.Rd=Ng.x+Ng.y*Ng.y;Ib.He=Math.min(jc.y,Qb.y);Ib.Zd=Math.max(jc.y,Qb.y);Ib.index=Bb;Ib.link=wb;if(Bb+2<wb.oa){var oh=wb.l(Bb-1),ph=wb.l(Bb+2),ye=0;oh.x<jc.x?
ye=ph.x<jc.x?3:jc.y<Qb.y?2:1:oh.x>jc.x&&(ye=ph.x>jc.x?0:Qb.y<jc.y?2:1);Ib.ai=ye}Lb.add(Ib)}}if(1<Lb.count){Lb.sort(this.SE);for(var Jc=0;Jc<Lb.count;){for(var ze=Lb.n[Jc].layer,kc=Jc+1;kc<Lb.count&&Lb.n[kc].layer===ze;)kc++;if(1<kc-Jc)for(var xb=Jc;xb<kc;){for(var yb=Lb.n[xb].Zd,Kc=Jc+1;Kc<kc&&Lb.n[Kc].He<yb;)yb=Math.max(yb,Lb.n[Kc].Zd),Kc++;var Og=Kc-xb;if(1<Og){Lb.Ip(this.kx,xb,xb+Og);for(var Uc=1,Vc=Lb.n[xb].Rd,Bb=xb;Bb<Kc;Bb++){var ib=Lb.n[Bb];ib.Rd!==Vc&&(Uc++,Vc=ib.Rd)}Lb.Ip(this.RE,xb,xb+Og);
for(var Lc=1,Vc=Lb.n[xb].first,Bb=xb;Bb<Kc;Bb++)ib=Lb.n[Bb],ib.first!==Vc&&(Lc++,Vc=ib.first);var Rd=!0,Sd=Lc;Uc<Lc?(Rd=!1,Sd=Uc,Vc=Lb.n[xb].Rd,Lb.Ip(this.kx,xb,xb+Og)):Vc=Lb.n[xb].first;for(var pf=0,Bb=xb;Bb<Kc;Bb++){ib=Lb.n[Bb];(Rd?ib.first:ib.Rd)!==Vc&&(pf++,Vc=Rd?ib.first:ib.Rd);wb=ib.link;jc=wb.l(ib.index);Qb=wb.l(ib.index+1);var pi=this.qE*(pf-(Sd-1)/2);xe++;wb.Cl();wb.V(ib.index,jc.x+pi,jc.y);wb.V(ib.index+1,Qb.x+pi,Qb.y);wb.Pi()}}xb=Kc}Jc=kc}}}};
hn.prototype.SE=function(a,b){return a instanceof hs&&b instanceof hs&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.He<b.He?-1:a.He>b.He?1:a.Zd<b.Zd?-1:a.Zd>b.Zd?1:0:0};hn.prototype.RE=function(a,b){return a instanceof hs&&b instanceof hs&&a!==b?a.first<b.first?-1:a.first>b.first||a.ai<b.ai?1:a.ai>b.ai||a.He<b.He?-1:a.He>b.He?1:a.Zd<b.Zd?-1:a.Zd>b.Zd?1:0:0};
hn.prototype.kx=function(a,b){return a instanceof hs&&b instanceof hs&&a!==b?a.Rd<b.Rd?-1:a.Rd>b.Rd||a.ai<b.ai?1:a.ai>b.ai||a.He<b.He?-1:a.He>b.He?1:a.Zd<b.Zd?-1:a.Zd>b.Zd?1:0:0};function is(a,b){var c=a-b;return-1<c&&1>c}function zr(a,b){var c,d=a.Ud[b];if(d>=a.Tg.length){c=[];for(var e=0;e<a.Tg.length;e++)c[e]=a.Tg[e];a.Tg=c}void 0===a.Tg[d]||null===a.Tg[d]?c=[]:(c=a.Tg[d],a.Tg[d]=null);d=a.Ar[b];for(e=0;e<d.length;e++){var f=d[e];c[f.index]=f}return c}function Ar(a,b,c){a.Tg[a.Ud[b]]=c}
v.defineProperty(hn,{layerSpacing:"layerSpacing"},function(){return this.Zl},function(a){this.Zl!==a&&(v.j(a,"number",hn,"layerSpacing"),0<=a&&(this.Zl=a,this.H()))});v.defineProperty(hn,{vJ:"columnSpacing"},function(){return this.Fd},function(a){this.Fd!==a&&(v.j(a,"number",hn,"columnSpacing"),0<a&&(this.Fd=a,this.H()))});
v.defineProperty(hn,{direction:"direction"},function(){return this.aa},function(a){this.aa!==a&&(v.j(a,"number",hn,"direction"),0===a||90===a||180===a||270===a?(this.aa=a,this.H()):v.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))});v.defineProperty(hn,{angle:"angle"},function(){return this.direction},function(a){this.direction=a});
v.defineProperty(hn,{BG:"cycleRemoveOption"},function(){return this.xn},function(a){this.xn!==a&&(v.pb(a,hn,hn,"cycleRemoveOption"),a===sr||a===mr)&&(this.xn=a,this.H())});v.defineProperty(hn,{AH:"layeringOption"},function(){return this.Zn},function(a){this.Zn!==a&&(v.pb(a,hn,hn,"layeringOption"),a===nr||a===Kr||a===Mr)&&(this.Zn=a,this.H())});
v.defineProperty(hn,{mH:"initializeOption"},function(){return this.Pn},function(a){this.Pn!==a&&(v.pb(a,hn,hn,"initializeOption"),a===or||a===Sr||a===Qr)&&(this.Pn=a,this.H())});v.defineProperty(hn,{ZJ:"iterations"},function(){return this.Xl},function(a){this.Xl!==a&&(v.We(a,rr,"iterations"),0<=a&&(this.Xl=a,this.H()))});v.defineProperty(hn,{fG:"aggressiveOption"},function(){return this.kn},function(a){this.kn!==a&&(v.pb(a,hn,hn,"aggressiveOption"),a===Wr||a===pr||a===Xr)&&(this.kn=a,this.H())});
v.defineProperty(hn,{vK:"packOption"},function(){return this.Ei},function(a){this.Ei!==a&&(v.j(a,"number",hn,"packOption"),0<=a&&8>a&&(this.Ei=a,this.H()))});v.defineProperty(hn,{Fp:"setsPortSpots"},function(){return this.Lh},function(a){this.Lh!==a&&(v.j(a,"boolean",hn,"setsPortSpots"),this.Lh=a,this.H())});v.defineProperty(hn,{qE:"linkSpacing"},function(){return this.hr},function(a){this.hr!==a&&(v.j(a,"number",hn,"linkSpacing"),0<=a&&(this.hr=a,this.H()))});v.u(hn,{JH:"maxLayer"},function(){return this.ob});
v.u(hn,{eK:"maxIndex"},function(){return this.pv});v.u(hn,{dK:"maxColumn"},function(){return this.Fb});v.u(hn,{jK:"minIndexLayer"},function(){return this.rr});v.u(hn,{fK:"maxIndexLayer"},function(){return this.Hf});var mr;hn.CycleDepthFirst=mr=v.p(hn,"CycleDepthFirst",0);var sr;hn.CycleGreedy=sr=v.p(hn,"CycleGreedy",1);var nr;hn.LayerOptimalLinkLength=nr=v.p(hn,"LayerOptimalLinkLength",0);var Kr;hn.LayerLongestPathSink=Kr=v.p(hn,"LayerLongestPathSink",1);var Mr;
hn.LayerLongestPathSource=Mr=v.p(hn,"LayerLongestPathSource",2);var or;hn.InitDepthFirstOut=or=v.p(hn,"InitDepthFirstOut",0);var Sr;hn.InitDepthFirstIn=Sr=v.p(hn,"InitDepthFirstIn",1);var Qr;hn.InitNaive=Qr=v.p(hn,"InitNaive",2);var Wr;hn.AggressiveNone=Wr=v.p(hn,"AggressiveNone",0);var pr;hn.AggressiveLess=pr=v.p(hn,"AggressiveLess",1);var Xr;hn.AggressiveMore=Xr=v.p(hn,"AggressiveMore",2);hn.PackNone=0;var Yr;hn.PackExpand=Yr=1;var Zr;hn.PackStraighten=Zr=2;var as;hn.PackMedian=as=4;var qr;
hn.PackAll=qr=7;function hs(){this.index=this.Zd=this.He=this.Rd=this.first=this.layer=0;this.link=null;this.ai=0}v.Ld(hs,{layer:!0,first:!0,Rd:!0,He:!0,Zd:!0,index:!0,link:!0,ai:!0});function rr(){$f.call(this)}v.Ja(rr,$f);v.ea("LayeredDigraphNetwork",rr);rr.prototype.createVertex=function(){return new js};rr.prototype.createEdge=function(){return new ks};
function js(){nq.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=null;this.valid=!1;this.finish=this.Qo=NaN;this.Am=0;this.Vz=this.Wz=null}v.Ja(js,nq);v.ea("LayeredDigraphVertex",js);function ks(){oq.call(this);this.forest=this.rev=this.valid=!1;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}v.Ja(ks,oq);v.ea("LayeredDigraphEdge",ks);
function Z(){0<arguments.length&&v.cd(Z);Zf.call(this);this.ud=new J(Object);this.Jr=ls;this.Df=ms;this.Fs=ns;this.nv=os;this.PA=null;this.vh=!0;this.ed=ps;this.bg=(new ia(10,10)).freeze();this.ra=new qs;this.ta=new qs;this.Oy=[]}v.Ja(Z,Zf);v.ea("TreeLayout",Z);Z.prototype.cloneProtected=function(a){Zf.prototype.cloneProtected.call(this,a);a.Jr=this.Jr;a.Fs=this.Fs;a.nv=this.nv;a.vh=this.vh;a.ed=this.ed;a.bg.assign(this.bg);a.ra.copyInheritedPropertiesFrom(this.ra);a.ta.copyInheritedPropertiesFrom(this.ta)};
Z.prototype.createNetwork=function(){return new rs};Z.prototype.makeNetwork=function(a){function b(a){if(a instanceof S)return!a.uf&&"Comment"!==a.fc;if(a instanceof W){var b=a.T;if(null===b||b.uf||"Comment"===b.fc)return!1;a=a.Z;return null===a||a.uf||"Comment"===a.fc?!1:!0}return!1}var c=this.createNetwork();c.Pb=this;a instanceof E?(c.Tj(a.Bg,!0,b),c.Tj(a.links,!0,b)):a instanceof V?c.Tj(a.Ic,!1,b):c.Tj(a.i,!1,b);return c};
Z.prototype.doLayout=function(a){null===a&&v.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.Nf!==ss&&(this.Yd=this.initialOrigin(this.Yd));var b=this.g;null===b&&a instanceof E&&(b=a);this.Df=this.path===ls&&null!==b?b.Qd?ms:ts:this.path===ls?ms:this.path;if(0<this.network.vertexes.count){this.network.ww();for(a=this.network.vertexes.i;a.next();)b=a.value,b.initialized=!1,b.level=
0,b.parent=null,b.children=[];if(0<this.ud.count){a=new J(qs);for(b=this.ud.i;b.next();){var c=b.value;c instanceof S?(c=this.network.Lm(c),null!==c&&a.add(c)):c instanceof qs&&a.add(c)}this.ud=a}0===this.ud.count&&this.findRoots();for(a=this.ud.copy().i;a.next();)b=a.value,b.initialized||(b.initialized=!0,us(this,b));for(a=this.ud.i;a.next();)b=a.value,b instanceof qs&&vs(this,b);for(a=this.ud.i;a.next();)b=a.value,b instanceof qs&&ws(this,b);for(a=this.ud.i;a.next();)b=a.value,b instanceof qs&&
xs(this,b);this.az();if(this.Iz===ys){c=[];for(a=this.network.vertexes.i;a.next();){var d=a.value,b=d.parent;null===b&&(b=d);var b=0===b.angle||180===b.angle,e=c[d.level];void 0===e&&(e=0);c[d.level]=Math.max(e,b?d.width:d.height)}for(d=0;d<c.length;d++)void 0===c[d]&&(c[d]=0);this.PA=c;for(a=this.network.vertexes.i;a.next();)d=a.value,b=d.parent,null===b&&(b=d),0===b.angle||180===b.angle?(180===b.angle&&(d.jt+=c[d.level]-d.width),d.width=c[d.level]):(270===b.angle&&(d.kt+=c[d.level]-d.height),d.height=
c[d.level])}else if(this.Iz===zs)for(a=this.network.vertexes.i;a.next();){c=a.value;b=0===c.angle||180===c.angle;e=-1;for(d=0;d<c.children.length;d++)var f=c.children[d],e=Math.max(e,b?f.width:f.height);if(0<=e)for(d=0;d<c.children.length;d++)f=c.children[d],b?(180===c.angle&&(f.jt+=e-f.width),f.width=e):(270===c.angle&&(f.kt+=e-f.height),f.height=e)}for(a=this.ud.i;a.next();)b=a.value,b instanceof qs&&this.layoutTree(b);this.arrangeTrees();this.updateParts()}this.network=null;this.ud=new J(Object);
this.wf=!0};
Z.prototype.findRoots=function(){for(var a=this.network.vertexes.i;a.next();){var b=a.value;switch(this.Df){case ms:0===b.lc.count&&this.ud.add(b);break;case ts:0===b.hc.count&&this.ud.add(b);break;default:v.k("Unhandled path value "+this.Df.toString())}}if(0===this.ud.count){for(var a=999999,b=null,c=this.network.vertexes.i;c.next();){var d=c.value;switch(this.Df){case ms:d.lc.count<a&&(a=d.lc.count,b=d);break;case ts:d.hc.count<a&&(a=d.hc.count,b=d);break;default:v.k("Unhandled path value "+this.Df.toString())}}null!==
b&&this.ud.add(b)}};
function us(a,b){if(null!==b){switch(a.Df){case ms:if(0<b.hc.count){for(var c=new I(qs),d=b.HG;d.next();){var e=d.value;As(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.cc())}break;case ts:if(0<b.lc.count){c=new I(qs);for(d=b.CI;d.next();)e=d.value,As(a,b,e)&&c.add(e);0<c.count&&(b.children=c.cc())}break;default:v.k("Unhandled path value"+a.Df.toString())}c=b.children;d=c.length;for(e=0;e<d;e++){var f=c[e];f.initialized=!0;f.level=b.level+1;f.parent=b;a.ud.remove(f)}for(e=0;e<d;e++)f=c[e],us(a,f)}}
function As(a,b,c){if(c.initialized){var d;if(null===b)d=!1;else{for(d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}Z.prototype.removeChild=function(a,b){if(null!==a&&null!==b){for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),f=0,e=0;e<c.length;e++)c[e]!==b&&(d[f++]=c[e]);a.children=d}}};
function vs(a,b){if(null!==b){a.initializeTreeVertexValues(b);b.alignment===Bs&&a.sortTreeVertexChildren(b);for(var c=0,d=b.Cm,e=0,f=b.children,h=f.length,k=0;k<h;k++){var l=f[k];vs(a,l);c+=l.descendantCount+1;d=Math.max(d,l.maxChildrenCount);e=Math.max(e,l.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function Cs(a,b){switch(a.Fs){default:case ns:return null!==b.parent?b.parent:a.ra;case Ds:return null===b.parent?a.ra:null===b.parent.parent?a.ta:b.parent;case Es:return null!==b.parent?null!==b.parent.parent?b.parent.parent:a.ta:a.ra;case Fs:var c=!0;if(0===b.Cm)c=!1;else for(var d=b.children,e=d.length,f=0;f<e;f++)if(0<d[f].Cm){c=!1;break}return c&&null!==b.parent?a.ta:null!==b.parent?b.parent:a.ra}}
Z.prototype.initializeTreeVertexValues=function(a){var b=Cs(this,a);a.copyInheritedPropertiesFrom(b);if(null!==a.parent&&a.parent.alignment===Bs){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=!0};function ws(a,b){if(null!==b){a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)ws(a,c[e])}}Z.prototype.assignTreeVertexValues=function(){};
function xs(a,b){if(null!==b){b.alignment!==Bs&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)xs(a,c[e])}}Z.prototype.sortTreeVertexChildren=function(a){switch(a.sorting){case Gs:break;case Hs:a.children.reverse();break;case Is:a.children.sort(a.comparer);break;case Js:a.children.sort(a.comparer);a.children.reverse();break;default:v.k("Unhandled sorting value "+a.sorting.toString())}};Z.prototype.az=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Z.prototype.addComments=function(a){var b=a.angle,c=a.parent,d=0,e=Ks,e=!1;null!==c&&(d=c.angle,e=c.alignment,e=Ls(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Cm,f=0,h=0,k=0,l=a.commentSpacing;if(null!==a.Jc)for(var m=a.Jc.KD();m.next();){var n=m.value;"Comment"===n.fc&&n.canLayout()&&(null===a.comments&&(a.comments=[]),a.comments.push(n),n.sf(),n=n.Ca,b&&!c||!e&&!d&&c||e&&d&&c?(f=Math.max(f,n.width),h+=n.height+Math.abs(k)):(f+=n.width+Math.abs(k),h=Math.max(h,n.height)),k=l)}null!==a.comments&&
(b&&!c||!e&&!d&&c||e&&d&&c?(f+=Math.abs(a.commentMargin),h=Math.max(0,h-a.height)):(h+=Math.abs(a.commentMargin),f=Math.max(0,f-a.width)),e=v.hk(0,0,a.M.width+f,a.M.height+h),a.mb=e,v.Vb(e))};function Ls(a){return a===Ms||a===Bs||a===Ns||a===Os}function Ps(a){return a===Ms||a===Bs}function Qs(a){var b=a.parent;if(null!==b){var c=b.alignment;if(Ls(c)){if(Ps(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Ns)return!0}}return!1}
Z.prototype.layoutComments=function(a){if(null!==a.comments){var b=a.Jc.Ca,c=a.parent,d=a.angle,e=0,f=Ks,f=!1;null!==c&&(e=c.angle,f=c.alignment,f=Ls(f));for(var c=90===d||270===d,d=90===e||270===e,h=0===a.Cm,k=Qs(a),l=0,m=a.comments,n=m.length,p=v.L(),q=0;q<n;q++){var r=m[q],s=r.Ca;if(c&&!h||!f&&!d&&h||f&&d&&h){if(135<e&&!f||d&&k)if(0<=a.commentMargin)for(p.m(a.M.x-a.commentMargin-s.width,a.M.y+l),r.move(p),r=r.wg();r.next();){var t=r.value;t.xb=tc;t.yb=uc}else for(p.m(a.M.x+2*a.P.x-a.commentMargin,
a.M.y+l),r.move(p),r=r.wg();r.next();)t=r.value,t.xb=uc,t.yb=tc;else if(0<=a.commentMargin)for(p.m(a.M.x+2*a.P.x+a.commentMargin,a.M.y+l),r.move(p),r=r.wg();r.next();)t=r.value,t.xb=uc,t.yb=tc;else for(p.m(a.M.x+a.commentMargin-s.width,a.M.y+l),r.move(p),r=r.wg();r.next();)t=r.value,t.xb=tc,t.yb=uc;l=0<=a.commentSpacing?l+(s.height+a.commentSpacing):l+(a.commentSpacing-s.height)}else{if(135<e&&!f||!d&&k)if(0<=a.commentMargin)for(p.m(a.M.x+l,a.M.y-a.commentMargin-s.height),r.move(p),r=r.wg();r.next();)t=
r.value,t.xb=sc,t.yb=vc;else for(p.m(a.M.x+l,a.M.y+2*a.P.y-a.commentMargin),r.move(p),r=r.wg();r.next();)t=r.value,t.xb=vc,t.yb=sc;else if(0<=a.commentMargin)for(p.m(a.M.x+l,a.M.y+2*a.P.y+a.commentMargin),r.move(p),r=r.wg();r.next();)t=r.value,t.xb=vc,t.yb=sc;else for(p.m(a.M.x+l,a.M.y+a.commentMargin-s.height),r.move(p),r=r.wg();r.next();)t=r.value,t.xb=sc,t.yb=vc;l=0<=a.commentSpacing?l+(s.width+a.commentSpacing):l+(a.commentSpacing-s.width)}}v.v(p);b=l-a.commentSpacing-(c?b.height:b.width);if(this.Df===
ms)for(e=a.hc;e.next();)a=e.value.link,null===a||a.sl||(a.nl=0<b?b:NaN);else for(e=a.lc;e.next();)a=e.value.link,null===a||a.sl||(a.Gl=0<b?b:NaN)}};
Z.prototype.layoutTree=function(a){if(null!==a){for(var b=a.children,c=b.length,d=0;d<c;d++)this.layoutTree(b[d]);switch(a.compaction){case Rs:Ss(this,a);break;case Ts:if(a.alignment===Bs)Ss(this,a);else if(0===a.Cm){var d=a.parent,b=!1,c=0,e=Ks;null!==d&&(c=d.angle,e=d.alignment,b=Ls(e));d=Qs(a);a.ma.m(0,0);a.fb.m(a.width,a.height);null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.Ma.m(0,0):180===c&&!b||(90===c||270===c)&&d?a.Ma.m(a.width-2*a.P.x,0):a.Ma.m(0,a.height-2*a.P.y);a.At=
null;a.St=null}else{for(var f=Us(a),b=90===f||270===f,h=0,k=a.children,l=k.length,m=0;m<l;m++)var n=k[m],h=Math.max(h,b?n.fb.width:n.fb.height);var p=a.alignment,d=p===Vs,q=p===Ws,r=Ls(p),s=Math.max(0,a.breadthLimit),c=Xs(a),t=a.nodeSpacing,u=Ys(a),x=a.rowSpacing,w=0;if(d||q||a.Ap||a.Bp&&1===a.maxGenerationCount)w=Math.max(0,a.rowIndent);var d=a.width,e=a.height,y=0,B=0,H=0,C=null,T=null,ba=0,U=0,M=0,aa=0,Ia=0,oa=0,Ga=0,pa=0,n=0;r&&!Ps(p)&&135<f&&k.reverse();if(Ps(p))if(1<l)for(m=0;m<l;m++)0===m%
2&&m!==l-1?pa=Math.max(pa,b?k[m].fb.width:k[m].fb.height):0!==m%2&&(n=Math.max(n,b?k[m].fb.width:k[m].fb.height));else 1===l&&(pa=b?k[0].fb.width:k[0].fb.height);if(r){switch(p){case Ms:U=135>f?Zs(a,k,pa,y,B):$s(a,k,pa,y,B);pa=U.x;y=U.width;B=U.height;break;case Ns:for(m=0;m<l;m++){var n=k[m],Ca=n.fb,C=0===oa?0:x;b?(n.ma.m(h-Ca.width,aa+C),y=Math.max(y,Ca.width),B=Math.max(B,aa+C+Ca.height),aa+=C+Ca.height):(n.ma.m(M+C,h-Ca.height),y=Math.max(y,M+C+Ca.width),B=Math.max(B,Ca.height),M+=C+Ca.width);
oa++}break;case Os:for(m=0;m<l;m++)n=k[m],Ca=n.fb,C=0===oa?0:x,b?(n.ma.m(t/2+a.P.x,aa+C),y=Math.max(y,Ca.width),B=Math.max(B,aa+C+Ca.height),aa+=C+Ca.height):(n.ma.m(M+C,t/2+a.P.y),y=Math.max(y,M+C+Ca.width),B=Math.max(B,Ca.height),M+=C+Ca.width),oa++}C=at(this,2);T=at(this,2);b?(C[0].m(0,0),C[1].m(0,B),T[0].m(y,0)):(C[0].m(0,0),C[1].m(y,0),T[0].m(0,B));T[1].m(y,B)}else for(m=0;m<l;m++){n=k[m];Ca=n.fb;if(b){0<s&&0<oa&&M+t+Ca.width>s&&(M<h&&bt(a,p,h-M,0,Ga,m-1),Ia++,oa=0,Ga=m,H=B,M=0,aa=135<f?-B-x:
B+x);ht(this,n,0,aa);var ua=0;if(0===oa){if(C=n.At,T=n.St,ba=Ca.width,U=Ca.height,null===C||null===T||f!==Us(n))C=at(this,2),T=at(this,2),C[0].m(0,0),C[1].m(0,U),T[0].m(ba,0),T[1].m(ba,U)}else{var gc=v.jb(),U=it(this,a,n,C,T,ba,U,gc),ua=U.x,C=gc[0],T=gc[1],ba=U.width,U=U.height;v.sa(gc);M<Ca.width&&0>ua&&(jt(a,-ua,0,Ga,m-1),kt(C,-ua,0),kt(T,-ua,0),ua=0)}n.ma.m(ua,aa);y=Math.max(y,ba);B=Math.max(B,H+(0===Ia?0:x)+Ca.height);M=ba}else{0<s&&0<oa&&aa+t+Ca.height>s&&(aa<h&&bt(a,p,0,h-aa,Ga,m-1),Ia++,oa=
0,Ga=m,H=y,aa=0,M=135<f?-y-x:y+x);ht(this,n,M,0);ua=0;if(0===oa){if(C=n.At,T=n.St,ba=Ca.width,U=Ca.height,null===C||null===T||f!==Us(n))C=at(this,2),T=at(this,2),C[0].m(0,0),C[1].m(ba,0),T[0].m(0,U),T[1].m(ba,U)}else gc=v.jb(),U=it(this,a,n,C,T,ba,U,gc),ua=U.x,C=gc[0],T=gc[1],ba=U.width,U=U.height,v.sa(gc),aa<Ca.height&&0>ua&&(jt(a,0,-ua,Ga,m-1),kt(C,0,-ua),kt(T,0,-ua),ua=0);n.ma.m(M,ua);B=Math.max(B,U);y=Math.max(y,H+(0===Ia?0:x)+Ca.width);aa=U}oa++}0<Ia&&(b?(B+=Math.max(0,c),M<y&&bt(a,p,y-M,0,Ga,
l-1),0<w&&(q||jt(a,w,0,0,l-1),y+=w)):(y+=Math.max(0,c),aa<B&&bt(a,p,0,B-aa,Ga,l-1),0<w&&(q||jt(a,0,w,0,l-1),B+=w)));q=h=0;switch(p){case lt:b?h+=y/2-a.P.x-u/2:q+=B/2-a.P.y-u/2;break;case Ks:0<Ia?b?h+=y/2-a.P.x-u/2:q+=B/2-a.P.y-u/2:b?(m=k[0].ma.x+k[0].Ma.x,pa=k[l-1].ma.x+k[l-1].Ma.x+2*k[l-1].P.x,h+=m+(pa-m)/2-a.P.x-u/2):(m=k[0].ma.y+k[0].Ma.y,pa=k[l-1].ma.y+k[l-1].Ma.y+2*k[l-1].P.y,q+=m+(pa-m)/2-a.P.y-u/2);break;case Vs:b?(h-=u,y+=u):(q-=u,B+=u);break;case Ws:b?(h+=y-a.width+u,y+=u):(q+=B-a.height+
u,B+=u);break;case Ms:b?h=1<l?h+(pa+t/2-a.P.x):h+(k[0].P.x-a.P.x+k[0].Ma.x):q=1<l?q+(pa+t/2-a.P.y):q+(k[0].P.y-a.P.y+k[0].Ma.y);break;case Ns:b?h+=y+t/2-a.P.x:q+=B+t/2-a.P.y;break;case Os:break;default:v.k("Unhandled alignment value "+p.toString())}for(m=0;m<l;m++)n=k[m],b?n.ma.m(n.ma.x+n.Ma.x-h,n.ma.y+(135<f?(r?-B:-n.fb.height)+n.Ma.y-c:e+c+n.Ma.y)):n.ma.m(n.ma.x+(135<f?(r?-y:-n.fb.width)+n.Ma.x-c:d+c+n.Ma.x),n.ma.y+n.Ma.y-q);l=k=0;r?b?(y=mt(a,y,h),0>h&&(h=0),135<f&&(q+=B+c),B+=e+c,p===Os&&(k+=t/
2+a.P.x),l+=e+c):(135<f&&(h+=y+c),y+=d+c,B=nt(a,B,q),0>q&&(q=0),p===Os&&(l+=t/2+a.P.y),k+=d+c):b?(null===a.comments?d>y&&(p=ot(p,d-y,0),k=p.x,l=p.y,y=d,h=0):y=mt(a,y,h),0>h&&(k-=h,h=0),135<f&&(q+=B+c),B=Math.max(Math.max(B,e),B+e+c),l+=e+c):(135<f&&(h+=y+c),y=Math.max(Math.max(y,d),y+d+c),null===a.comments?e>B&&(p=ot(p,0,e-B),k=p.x,l=p.y,B=e,q=0):B=nt(a,B,q),0>q&&(l-=q,q=0),k+=d+c);if(0<Ia)f=at(this,4),p=at(this,4),b?(f[2].m(0,e+c),f[3].m(f[2].x,B),p[2].m(y,f[2].y),p[3].m(p[2].x,f[3].y)):(f[2].m(d+
c,0),f[3].m(y,f[2].y),p[2].m(f[2].x,B),p[3].m(f[3].x,p[2].y));else{f=at(this,C.length+2);p=at(this,T.length+2);for(m=0;m<C.length;m++)r=C[m],f[m+2].m(r.x+k,r.y+l);for(m=0;m<T.length;m++)r=T[m],p[m+2].m(r.x+k,r.y+l)}b?(f[0].m(h,0),f[1].m(f[0].x,e),f[2].y<f[1].y&&(f[2].x>f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x>f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),p[0].m(h+d,0),p[1].m(p[0].x,e),p[2].y<p[1].y&&(p[2].x<p[0].x?p[2].assign(p[1]):p[1].assign(p[2])),p[3].y<p[2].y&&(p[3].x<
p[0].x?p[3].assign(p[2]):p[2].assign(p[3])),f[2].y-=c/2,p[2].y-=c/2):(f[0].m(0,q),f[1].m(d,f[0].y),f[2].x<f[1].x&&(f[2].y>f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y>f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),p[0].m(0,q+e),p[1].m(d,p[0].y),p[2].x<p[1].x&&(p[2].y<p[0].y?p[2].assign(p[1]):p[1].assign(p[2])),p[3].x<p[2].x&&(p[3].y<p[0].y?p[3].assign(p[2]):p[2].assign(p[3])),f[2].x-=c/2,p[2].x-=c/2);pt(this,C);pt(this,T);a.At=f;a.St=p;a.Ma.m(h,q);a.fb.m(y,B)}break;default:v.k("Unhandled compaction value "+
a.compaction.toString())}}};
function Ss(a,b){if(0===b.Cm){var c=!1,d=0,e=Ks;null!==b.parent&&(d=b.parent.angle,e=b.parent.alignment,c=Ls(e));e=Qs(b);b.ma.m(0,0);b.fb.m(b.width,b.height);null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!e?b.Ma.m(0,0):180===d&&!c||(90===d||270===d)&&e?b.Ma.m(b.width-2*b.P.x,0):b.Ma.m(0,b.height-2*b.P.y)}else{for(var c=Us(b),d=90===c||270===c,f=0,e=b.children,h=e.length,k=0;k<h;k++)var l=e[k],f=Math.max(f,d?l.fb.width:l.fb.height);var m=b.alignment,n=m===Vs,p=m===Ws,q=Ls(m),r=Math.max(0,
b.breadthLimit),s=Xs(b),t=b.nodeSpacing,u=Ys(b),x=n||p?0:u/2,w=b.rowSpacing,y=0;if(n||p||b.Ap||b.Bp&&1===b.maxGenerationCount)y=Math.max(0,b.rowIndent);var n=b.width,B=b.height,H=0,C=0,T=0,ba=0,U=0,M=0,aa=0,Ia=0,oa=0,Ga=0;q&&!Ps(m)&&135<c&&e.reverse();if(Ps(m))if(1<h)for(k=0;k<h;k++){var l=e[k],pa=l.fb;0===k%2&&k!==h-1?oa=Math.max(oa,(d?pa.width:pa.height)+qt(l)-t):0!==k%2&&(Ga=Math.max(Ga,(d?pa.width:pa.height)+qt(l)-t))}else 1===h&&(oa=d?e[0].fb.width:e[0].fb.height);if(q)switch(m){case Ms:case Bs:C=
135>c?Zs(b,e,oa,H,C):$s(b,e,oa,H,C);oa=C.x;H=C.width;C=C.height;break;case Ns:for(k=0;k<h;k++)l=e[k],pa=l.fb,r=0===aa?0:w,d?(l.ma.m(f-pa.width,U+r),H=Math.max(H,pa.width),C=Math.max(C,U+r+pa.height),U+=r+pa.height):(l.ma.m(ba+r,f-pa.height),H=Math.max(H,ba+r+pa.width),C=Math.max(C,pa.height),ba+=r+pa.width),aa++;break;case Os:for(f=0;f<h;f++)l=e[f],pa=l.fb,r=0===aa?0:w,d?(l.ma.m(t/2+b.P.x,U+r),H=Math.max(H,pa.width),C=Math.max(C,U+r+pa.height),U+=r+pa.height):(l.ma.m(ba+r,t/2+b.P.y),H=Math.max(H,
ba+r+pa.width),C=Math.max(C,pa.height),ba+=r+pa.width),aa++}else for(k=0;k<h;k++)l=e[k],pa=l.fb,d?(0<r&&0<aa&&ba+t+pa.width>r&&(ba<f&&bt(b,m,f-ba,0,Ia,k-1),M++,aa=0,Ia=k,T=C,ba=0,U=135<c?-C-w:C+w),Ga=0===aa?x:t,ht(a,l,0,U),l.ma.m(ba+Ga,U),H=Math.max(H,ba+Ga+pa.width),C=Math.max(C,T+(0===M?0:w)+pa.height),ba+=Ga+pa.width):(0<r&&0<aa&&U+t+pa.height>r&&(U<f&&bt(b,m,0,f-U,Ia,k-1),M++,aa=0,Ia=k,T=H,U=0,ba=135<c?-H-w:H+w),Ga=0===aa?x:t,ht(a,l,ba,0),l.ma.m(ba,U+Ga),C=Math.max(C,U+Ga+pa.height),H=Math.max(H,
T+(0===M?0:w)+pa.width),U+=Ga+pa.height),aa++;0<M&&(d?(C+=Math.max(0,s),ba<H&&bt(b,m,H-ba,0,Ia,h-1),0<y&&(p||jt(b,y,0,0,h-1),H+=y)):(H+=Math.max(0,s),U<C&&bt(b,m,0,C-U,Ia,h-1),0<y&&(p||jt(b,0,y,0,h-1),C+=y)));y=p=0;switch(m){case lt:d?p+=H/2-b.P.x-u/2:y+=C/2-b.P.y-u/2;break;case Ks:0<M?d?p+=H/2-b.P.x-u/2:y+=C/2-b.P.y-u/2:d?(m=e[0].ma.x+e[0].Ma.x,t=e[h-1].ma.x+e[h-1].Ma.x+2*e[h-1].P.x,p+=m+(t-m)/2-b.P.x-u/2):(m=e[0].ma.y+e[0].Ma.y,t=e[h-1].ma.y+e[h-1].Ma.y+2*e[h-1].P.y,y+=m+(t-m)/2-b.P.y-u/2);break;
case Vs:d?(p-=u,H+=u):(y-=u,C+=u);break;case Ws:d?(p+=H-b.width+u,H+=u):(y+=C-b.height+u,C+=u);break;case Ms:case Bs:d?p=1<h?p+(oa+t/2-b.P.x):p+(e[0].P.x-b.P.x+e[0].Ma.x):y=1<h?y+(oa+t/2-b.P.y):y+(e[0].P.y-b.P.y+e[0].Ma.y);break;case Ns:d?p+=H+t/2-b.P.x:y+=C+t/2-b.P.y;break;case Os:break;default:v.k("Unhandled alignment value "+m.toString())}for(k=0;k<h;k++)l=e[k],d?l.ma.m(l.ma.x+l.Ma.x-p,l.ma.y+(135<c?(q?-C:-l.fb.height)+l.Ma.y-s:B+s+l.Ma.y)):l.ma.m(l.ma.x+(135<c?(q?-H:-l.fb.width)+l.Ma.x-s:n+s+
l.Ma.x),l.ma.y+l.Ma.y-y);d?(H=mt(b,H,p),0>p&&(p=0),135<c&&(y+=C+s),C+=B+s):(135<c&&(p+=H+s),H+=n+s,C=nt(b,C,y),0>y&&(y=0));b.Ma.m(p,y);b.fb.m(H,C)}}
function Zs(a,b,c,d,e){var f=b.length;if(0===f)return new A(c,0,d,e);if(1===f){var h=b[0];d=h.fb.width;e=h.fb.height;return new A(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=90===Us(a),n=0,p=0,q=0,r=0;r<f;r++)if(!(0!==r%2||1<f&&r===f-1)){var h=b[r],s=h.fb,t=0===n?0:l;if(m){var u=qt(h)-k;h.ma.m(c-(s.width+u),q+t);d=Math.max(d,s.width+u);e=Math.max(e,q+t+s.height);q+=t+s.height}else u=qt(h)-k,h.ma.m(p+t,c-(s.height+u)),e=Math.max(e,s.height+u),d=Math.max(d,p+t+s.width),p+=t+s.width;n++}var n=
0,x=p,w=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<f;r++)0!==r%2&&(h=b[r],s=h.fb,t=0===n?0:l,m?(u=qt(h)-k,h.ma.m(p+u,q+t),d=Math.max(d,p+s.width+u),e=Math.max(e,q+t+s.height),q+=t+s.height):(u=qt(h)-k,h.ma.m(p+t,q+u),d=Math.max(d,p+t+s.width),e=Math.max(e,q+s.height+u),p+=t+s.width),n++);1<f&&1===f%2&&(h=b[f-1],s=h.fb,b=rt(h,m?Math.max(Math.abs(w),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.ma.m(c+k/2-h.P.x-h.Ma.x,e+b),m=c+k/2-h.P.x-h.Ma.x,d=Math.max(d,m+s.width),0>m&&(d-=m),e=Math.max(e,Math.max(w,
q)+b+s.height),0>h.ma.x&&(c=st(a,h.ma.x,!1,c,k))):(h.ma.m(d+b,c+k/2-h.P.y-h.Ma.y),d=Math.max(d,Math.max(x,p)+b+s.width),m=c+k/2-h.P.y-h.Ma.y,e=Math.max(e,m+s.height),0>m&&(e-=m),0>h.ma.y&&(c=st(a,h.ma.y,!0,c,k))));return new A(c,0,d,e)}
function $s(a,b,c,d,e){var f=b.length;if(0===f)return new A(c,0,d,e);if(1===f){var h=b[0];d=h.fb.width;e=h.fb.height;return new A(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=270===Us(a),n=0,p=0,q=0,r=0;r<f;r++)if(!(0!==r%2||1<f&&r===f-1)){var h=b[r],s=h.fb,t=0===n?0:l;if(m){var u=qt(h)-k,q=q-(t+s.height);h.ma.m(c-(s.width+u),q);d=Math.max(d,s.width+u);e=Math.max(e,Math.abs(q))}else u=qt(h)-k,p-=t+s.width,h.ma.m(p,c-(s.height+u)),e=Math.max(e,s.height+u),d=Math.max(d,Math.abs(p));n++}var n=0,
x=p,w=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<f;r++)0!==r%2&&(h=b[r],s=h.fb,t=0===n?0:l,m?(u=qt(h)-k,q-=t+s.height,h.ma.m(p+u,q),d=Math.max(d,p+s.width+u),e=Math.max(e,Math.abs(q))):(u=qt(h)-k,p-=t+s.width,h.ma.m(p,q+u),e=Math.max(e,q+s.height+u),d=Math.max(d,Math.abs(p))),n++);1<f&&1===f%2&&(h=b[f-1],s=h.fb,l=rt(h,m?Math.max(Math.abs(w),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.ma.m(c+k/2-h.P.x-h.Ma.x,-e-s.height-l),p=c+k/2-h.P.x-h.Ma.x,d=Math.max(d,p+s.width),0>p&&(d-=p),e=Math.max(e,Math.abs(Math.min(w,
q))+l+s.height),0>h.ma.x&&(c=st(a,h.ma.x,!1,c,k))):(h.ma.m(-d-s.width-l,c+k/2-h.P.y-h.Ma.y),d=Math.max(d,Math.abs(Math.min(x,p))+l+s.width),p=c+k/2-h.P.y-h.Ma.y,e=Math.max(e,p+s.height),0>p&&(e-=p),0>h.ma.y&&(c=st(a,h.ma.y,!0,c,k))));for(r=0;r<f;r++)h=b[r],m?h.ma.m(h.ma.x,h.ma.y+e):h.ma.m(h.ma.x+d,h.ma.y);return new A(c,0,d,e)}function qt(a){return null===a.parent?0:a.parent.nodeSpacing}function rt(a){return null===a.parent?0:a.parent.rowSpacing}
function st(a,b,c,d,e){a=a.children;for(var f=a.length,h=0;h<f;h++)c?a[h].ma.m(a[h].ma.x,a[h].ma.y-b):a[h].ma.m(a[h].ma.x-b,a[h].ma.y);b=a[f-1];return Math.max(d,c?b.Ma.y+b.P.y-e/2:b.Ma.x+b.P.x-e/2)}
function mt(a,b,c){switch(a.alignment){case Ks:case lt:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Vs:return a.width>b?a.width:b;case Ws:return 2*a.P.x>b?a.width:b+a.width-2*a.P.x;case Ms:case Bs:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Ns:return a.width-a.P.x+a.nodeSpacing/2+b;case Os:return Math.max(a.width,a.P.x+a.nodeSpacing/2+b);default:return b}}
function nt(a,b,c){switch(a.alignment){case Ks:case lt:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Vs:return a.height>b?a.height:b;case Ws:return 2*a.P.y>b?a.height:b+a.height-2*a.P.y;case Ms:case Bs:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Ns:return a.height-a.P.y+a.nodeSpacing/2+b;case Os:return Math.max(a.height,a.P.y+a.nodeSpacing/2+b);default:return b}}
function ot(a,b,c){switch(a){case lt:b/=2;c/=2;break;case Ks:b/=2;c/=2;break;case Vs:c=b=0;break;case Ws:break;default:v.k("Unhandled alignment value "+a.toString())}return new z(b,c)}function bt(a,b,c,d,e,f){b=ot(b,c,d);jt(a,b.x,b.y,e,f)}function jt(a,b,c,d,e){if(0!==b||0!==c)for(a=a.children;d<=e;d++){var f=a[d].ma;f.x+=b;f.y+=c}}
function ht(a,b,c,d){var e=b.parent;switch(a.Df){case ms:for(a=b.lc;a.next();)b=a.value,b.fromVertex===e&&b.Rr.m(c,d);break;case ts:for(a=b.hc;a.next();)b=a.value,b.toVertex===e&&b.Rr.m(c,d);break;default:v.k("Unhandled path value "+a.Df.toString())}}function kt(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function it(a,b,c,d,e,f,h,k){var l=Us(b),m=90===l||270===l,n=b.nodeSpacing;b=d;var p=e;d=f;e=h;var q=c.At,r=c.St;h=c.fb;var s=m?Math.max(e,h.height):Math.max(d,h.width);if(null===q||l!==Us(c))q=at(a,2),r=at(a,2),m?(q[0].m(0,0),q[1].m(0,h.height),r[0].m(h.width,0),r[1].m(r[0].x,q[1].y)):(q[0].m(0,0),q[1].m(h.width,0),r[0].m(0,h.height),r[1].m(q[1].x,r[0].y));if(m){c=d;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=l=0;l<p.length&&m<q.length;){e=p[l];var t=q[m];f=t.x;var u=t.y;f+=
c;var x=e;l+1<p.length&&(x=p[l+1]);var w=t,t=w.x,w=w.y;m+1<q.length&&(w=q[m+1],t=w.x,w=w.y,t+=c);var y=d;e.y===u?y=f-e.x:e.y>u&&e.y<w?y=f+(e.y-u)/(w-u)*(t-f)-e.x:u>e.y&&u<x.y&&(y=f-(e.x+(u-e.y)/(x.y-e.y)*(x.x-e.x)));y<d&&(d=y);x.y<=e.y?l++:w<=u?m++:(x.y<=w&&l++,w<=x.y&&m++)}c-=d;c+=n;l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=at(a,b.length+l.length);for(d=f=e=0;f<l.length&&l[f].y<b[0].y;)u=l[f++],n[d++].m(u.x+m,u.y);for(;e<b.length;)u=b[e++],n[d++].m(u.x,u.y);for(e=b[b.length-
1].y;f<l.length&&l[f].y<=e;)f++;for(;f<l.length&&l[f].y>e;)u=l[f++],n[d++].m(u.x+m,u.y);l=at(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);pt(a,n);d=l}f=r;u=c;if(null===p||2>p.length||null===f||2>f.length)e=null;else{n=at(a,p.length+f.length);for(m=x=l=0;l<p.length&&p[l].y<f[0].y;)e=p[l++],n[m++].m(e.x,e.y);for(;x<f.length;)e=f[x++],n[m++].m(e.x+u,e.y);for(f=f[f.length-1].y;l<p.length&&p[l].y<=f;)l++;for(;l<p.length&&p[l].y>f;)e=p[l++],n[m++].m(e.x,e.y);e=at(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);pt(a,n)}f=
Math.max(0,c)+h.width;h=s}else{c=e;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=l=0;l<p.length&&m<q.length;)e=p[l],t=q[m],f=t.x,u=t.y,u+=c,x=e,l+1<p.length&&(x=p[l+1]),w=t,t=w.x,w=w.y,m+1<q.length&&(w=q[m+1],t=w.x,w=w.y,w+=c),y=d,e.x===f?y=u-e.y:e.x>f&&e.x<t?y=u+(e.x-f)/(t-f)*(w-u)-e.y:f>e.x&&f<x.x&&(y=u-(e.y+(f-e.x)/(x.x-e.x)*(x.y-e.y))),y<d&&(d=y),x.x<=e.x?l++:t<=f?m++:(x.x<=t&&l++,t<=x.x&&m++);c-=d;c+=n;l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=at(a,
b.length+l.length);for(d=f=e=0;f<l.length&&l[f].x<b[0].x;)u=l[f++],n[d++].m(u.x,u.y+m);for(;e<b.length;)u=b[e++],n[d++].m(u.x,u.y);for(e=b[b.length-1].x;f<l.length&&l[f].x<=e;)f++;for(;f<l.length&&l[f].x>e;)u=l[f++],n[d++].m(u.x,u.y+m);l=at(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);pt(a,n);d=l}f=r;u=c;if(null===p||2>p.length||null===f||2>f.length)e=null;else{n=at(a,p.length+f.length);for(m=x=l=0;l<p.length&&p[l].x<f[0].x;)e=p[l++],n[m++].m(e.x,e.y);for(;x<f.length;)e=f[x++],n[m++].m(e.x,e.y+u);for(f=
f[f.length-1].x;l<p.length&&p[l].x<=f;)l++;for(;l<p.length&&p[l].x>f;)e=p[l++],n[m++].m(e.x,e.y);e=at(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);pt(a,n)}f=s;h=Math.max(0,c)+h.height}pt(a,b);pt(a,q);pt(a,p);pt(a,r);k[0]=d;k[1]=e;return new A(c,0,f,h)}function at(a,b){var c=a.Oy[b];if(void 0!==c&&(c=c.pop(),void 0!==c))return c;for(var c=[],d=0;d<b;d++)c[d]=new z;return c}function pt(a,b){var c=b.length,d=a.Oy[c];void 0===d&&(d=[],a.Oy[c]=d);d.push(b)}
Z.prototype.arrangeTrees=function(){if(this.ed===ss)for(var a=this.ud.i;a.next();){var b=a.value;if(b instanceof qs){var c=b.Jc;if(null!==c){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);tt(this,b,c,d)}}}else{c=[];for(a=this.ud.i;a.next();)b=a.value,b instanceof qs&&c.push(b);switch(this.sorting){case Gs:break;case Hs:c.reverse();break;case Is:c.sort(this.comparer);break;case Js:c.sort(this.comparer);c.reverse();break;default:v.k("Unhandled sorting value "+this.sorting.toString())}b=
this.Yd;a=b.x;b=b.y;for(d=0;d<c.length;d++){var e=c[d];tt(this,e,a+e.Ma.x,b+e.Ma.y);switch(this.ed){case ps:b+=e.fb.height+this.bg.height;break;case ut:a+=e.fb.width+this.bg.width;break;default:v.k("Unhandled arrangement value "+this.ed.toString())}}}};function tt(a,b,c,d){if(null!==b){b.x=c;b.y=d;b=b.children;for(var e=b.length,f=0;f<e;f++){var h=b[f];tt(a,h,c+h.ma.x,d+h.ma.y)}}}Z.prototype.commitLayout=function(){this.oA();this.commitNodes();this.fz();this.xt&&this.commitLinks()};
Z.prototype.commitNodes=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();for(a.reset();a.next();)this.layoutComments(a.value)};
Z.prototype.fz=function(){if(this.Iz===ys){for(var a=this.PA,b=[],c=null,d=this.network.vertexes.i;d.next();){var e=d.value;null===c?c=e.mb.copy():c.bi(e.mb);var f=b[e.level],f=void 0===f?Xs(e):Math.max(f,Xs(e));b[e.level]=f}for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);90===this.angle||270===this.angle?(c.Qf(this.nodeSpacing/2,this.layerSpacing),e=new z(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.Qf(this.layerSpacing,this.nodeSpacing/2),e=new z(-this.layerSpacing/2,-this.nodeSpacing/2));var f=
[],c=90===this.angle||270===this.angle?c.width:c.height,h=0;if(180===this.angle||270===this.angle)for(d=0;d<a.length;d++)h+=a[d]+b[d];for(d=0;d<a.length;d++){var k=a[d]+b[d];270===this.angle?(h-=k,f.push(new A(0,h,c,k))):90===this.angle?(f.push(new A(0,h,c,k)),h+=k):180===this.angle?(h-=k,f.push(new A(h,0,k,c))):(f.push(new A(h,0,k,c)),h+=k)}this.commitLayers(f,e)}};Z.prototype.commitLayers=function(){};Z.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
Z.prototype.oA=function(){for(var a=this.ud.i;a.next();){var b=a.value;b instanceof qs&&vt(this,b)}};function vt(a,b){if(null!==b){a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)vt(a,c[e])}}
Z.prototype.setPortSpots=function(a){var b=a.alignment;if(Ls(b)){var c=this.Df===ms,d=Us(a),e;switch(d){case 0:e=uc;break;case 90:e=vc;break;case 180:e=tc;break;default:e=sc}var f=a.children,h=f.length;switch(b){case Ms:case Bs:for(b=0;b<h;b++){var k=f[b],k=(c?k.lc:k.hc).first();if(null!==k&&(k=k.link,null!==k)){var l=90===d||270===d?tc:sc;if(1===h||b===h-1&&1===h%2)switch(d){case 0:l=tc;break;case 90:l=sc;break;case 180:l=uc;break;default:l=vc}else 0===b%2&&(l=90===d||270===d?uc:vc);c?(a.setsPortSpot&&
(k.xb=e),a.setsChildPortSpot&&(k.yb=l)):(a.setsPortSpot&&(k.xb=l),a.setsChildPortSpot&&(k.yb=e))}}break;case Ns:l=90===d||270===d?uc:vc;for(d=c?a.hc:a.lc;d.next();)k=d.value.link,null!==k&&(c?(a.setsPortSpot&&(k.xb=e),a.setsChildPortSpot&&(k.yb=l)):(a.setsPortSpot&&(k.xb=l),a.setsChildPortSpot&&(k.yb=e)));break;case Os:for(l=90===d||270===d?tc:sc,d=c?a.hc:a.lc;d.next();)k=d.value.link,null!==k&&(c?(a.setsPortSpot&&(k.xb=e),a.setsChildPortSpot&&(k.yb=l)):(a.setsPortSpot&&(k.xb=l),a.setsChildPortSpot&&
(k.yb=e)))}}else if(c=Us(a),this.Df===ms)for(e=a.hc;e.next();){if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.Uc())switch(c){case 0:d.xb=uc;break;case 90:d.xb=vc;break;case 180:d.xb=tc;break;default:d.xb=sc}else d.xb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Uc())switch(c){case 0:d.yb=tc;break;case 90:d.yb=sc;break;case 180:d.yb=uc;break;default:d.yb=vc}else d.yb=a.childPortSpot}}else for(e=a.lc;e.next();)if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.Uc())switch(c){case 0:d.yb=
uc;break;case 90:d.yb=vc;break;case 180:d.yb=tc;break;default:d.yb=sc}else d.yb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Uc())switch(c){case 0:d.xb=tc;break;case 90:d.xb=sc;break;case 180:d.xb=uc;break;default:d.xb=vc}else d.xb=a.childPortSpot}};function Us(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function Xs(a){var b=Us(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width);return c}function Ys(a){var b=Us(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
v.defineProperty(Z,{CK:"roots"},function(){return this.ud},function(a){this.ud!==a&&(v.A(a,J,Z,"roots"),this.ud=a,this.H())});v.defineProperty(Z,{path:"path"},function(){return this.Jr},function(a){this.Jr!==a&&(v.pb(a,Z,Z,"path"),this.Jr=a,this.H())});v.defineProperty(Z,{OI:"treeStyle"},function(){return this.Fs},function(a){this.ed!==a&&(v.pb(a,Z,Z,"treeStyle"),a===ns||a===Es||a===Fs||a===Ds)&&(this.Fs=a,this.H())});
v.defineProperty(Z,{Iz:"layerStyle"},function(){return this.nv},function(a){this.ed!==a&&(v.pb(a,Z,Z,"layerStyle"),a===os||a===zs||a===ys)&&(this.nv=a,this.H())});v.defineProperty(Z,{comments:"comments"},function(){return this.vh},function(a){this.vh!==a&&(v.j(a,"boolean",Z,"comments"),this.vh=a,this.H())});v.defineProperty(Z,{Nf:"arrangement"},function(){return this.ed},function(a){this.ed!==a&&(v.pb(a,Z,Z,"arrangement"),a===ps||a===ut||a===ss)&&(this.ed=a,this.H())});
v.defineProperty(Z,{jD:"arrangementSpacing"},function(){return this.bg},function(a){v.A(a,ia,Z,"arrangementSpacing");this.bg.K(a)||(this.bg.assign(a),this.H())});v.defineProperty(Z,{BK:"rootDefaults"},function(){return this.ra},function(a){this.ra!==a&&(v.A(a,qs,Z,"rootDefaults"),this.ra=a,this.H())});v.defineProperty(Z,{fJ:"alternateDefaults"},function(){return this.ta},function(a){this.ta!==a&&(v.A(a,qs,Z,"alternateDefaults"),this.ta=a,this.H())});
v.defineProperty(Z,{sorting:"sorting"},function(){return this.ra.sorting},function(a){this.ra.sorting!==a&&(v.pb(a,Z,Z,"sorting"),a===Gs||a===Hs||a===Is||Js)&&(this.ra.sorting=a,this.H())});v.defineProperty(Z,{comparer:"comparer"},function(){return this.ra.comparer},function(a){this.ra.comparer!==a&&(v.j(a,"function",Z,"comparer"),this.ra.comparer=a,this.H())});
v.defineProperty(Z,{angle:"angle"},function(){return this.ra.angle},function(a){this.ra.angle!==a&&(v.j(a,"number",Z,"angle"),0===a||90===a||180===a||270===a?(this.ra.angle=a,this.H()):v.k("TreeLayout.angle must be 0, 90, 180, or 270"))});v.defineProperty(Z,{alignment:"alignment"},function(){return this.ra.alignment},function(a){this.ra.alignment!==a&&(v.pb(a,Z,Z,"alignment"),this.ra.alignment=a,this.H())});
v.defineProperty(Z,{nodeIndent:"nodeIndent"},function(){return this.ra.nodeIndent},function(a){this.ra.nodeIndent!==a&&(v.j(a,"number",Z,"nodeIndent"),0<=a&&(this.ra.nodeIndent=a,this.H()))});v.defineProperty(Z,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ra.nodeIndentPastParent},function(a){this.ra.nodeIndentPastParent!==a&&(v.j(a,"number",Z,"nodeIndentPastParent"),0<=a&&1>=a&&(this.ra.nodeIndentPastParent=a,this.H()))});
v.defineProperty(Z,{nodeSpacing:"nodeSpacing"},function(){return this.ra.nodeSpacing},function(a){this.ra.nodeSpacing!==a&&(v.j(a,"number",Z,"nodeSpacing"),this.ra.nodeSpacing=a,this.H())});v.defineProperty(Z,{layerSpacing:"layerSpacing"},function(){return this.ra.layerSpacing},function(a){this.ra.layerSpacing!==a&&(v.j(a,"number",Z,"layerSpacing"),this.ra.layerSpacing=a,this.H())});
v.defineProperty(Z,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ra.layerSpacingParentOverlap},function(a){this.ra.layerSpacingParentOverlap!==a&&(v.j(a,"number",Z,"layerSpacingParentOverlap"),0<=a&&1>=a&&(this.ra.layerSpacingParentOverlap=a,this.H()))});v.defineProperty(Z,{compaction:"compaction"},function(){return this.ra.compaction},function(a){this.ra.compaction!==a&&(v.pb(a,Z,Z,"compaction"),a===Rs||a===Ts)&&(this.ra.compaction=a,this.H())});
v.defineProperty(Z,{breadthLimit:"breadthLimit"},function(){return this.ra.breadthLimit},function(a){this.ra.breadthLimit!==a&&(v.j(a,"number",Z,"breadthLimit"),0<=a&&(this.ra.breadthLimit=a,this.H()))});v.defineProperty(Z,{rowSpacing:"rowSpacing"},function(){return this.ra.rowSpacing},function(a){this.ra.rowSpacing!==a&&(v.j(a,"number",Z,"rowSpacing"),this.ra.rowSpacing=a,this.H())});
v.defineProperty(Z,{rowIndent:"rowIndent"},function(){return this.ra.rowIndent},function(a){this.ra.rowIndent!==a&&(v.j(a,"number",Z,"rowIndent"),0<=a&&(this.ra.rowIndent=a,this.H()))});v.defineProperty(Z,{commentSpacing:"commentSpacing"},function(){return this.ra.commentSpacing},function(a){this.ra.commentSpacing!==a&&(v.j(a,"number",Z,"commentSpacing"),this.ra.commentSpacing=a,this.H())});
v.defineProperty(Z,{commentMargin:"commentMargin"},function(){return this.ra.commentMargin},function(a){this.ra.commentMargin!==a&&(v.j(a,"number",Z,"commentMargin"),this.ra.commentMargin=a,this.H())});v.defineProperty(Z,{setsPortSpot:"setsPortSpot"},function(){return this.ra.setsPortSpot},function(a){this.ra.setsPortSpot!==a&&(v.j(a,"boolean",Z,"setsPortSpot"),this.ra.setsPortSpot=a,this.H())});
v.defineProperty(Z,{portSpot:"portSpot"},function(){return this.ra.portSpot},function(a){v.A(a,L,Z,"portSpot");this.ra.portSpot.K(a)||(this.ra.portSpot=a,this.H())});v.defineProperty(Z,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ra.setsChildPortSpot},function(a){this.ra.setsChildPortSpot!==a&&(v.j(a,"boolean",Z,"setsChildPortSpot"),this.ra.setsChildPortSpot=a,this.H())});
v.defineProperty(Z,{childPortSpot:"childPortSpot"},function(){return this.ra.childPortSpot},function(a){v.A(a,L,Z,"childPortSpot");this.ra.childPortSpot.K(a)||(this.ra.childPortSpot=a,this.H())});v.defineProperty(Z,{qJ:"alternateSorting"},function(){return this.ta.sorting},function(a){this.ta.sorting!==a&&(v.pb(a,Z,Z,"alternateSorting"),a===Gs||a===Hs||a===Is||Js)&&(this.ta.sorting=a,this.H())});
v.defineProperty(Z,{eJ:"alternateComparer"},function(){return this.ta.comparer},function(a){this.ta.comparer!==a&&(v.j(a,"function",Z,"alternateComparer"),this.ta.comparer=a,this.H())});v.defineProperty(Z,{ZI:"alternateAngle"},function(){return this.ta.angle},function(a){this.ta.angle!==a&&(v.j(a,"number",Z,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.ta.angle=a,this.H())});
v.defineProperty(Z,{YI:"alternateAlignment"},function(){return this.ta.alignment},function(a){this.ta.alignment!==a&&(v.pb(a,Z,Z,"alternateAlignment"),this.ta.alignment=a,this.H())});v.defineProperty(Z,{iJ:"alternateNodeIndent"},function(){return this.ta.nodeIndent},function(a){this.ta.nodeIndent!==a&&(v.j(a,"number",Z,"alternateNodeIndent"),0<=a&&(this.ta.nodeIndent=a,this.H()))});
v.defineProperty(Z,{jJ:"alternateNodeIndentPastParent"},function(){return this.ta.nodeIndentPastParent},function(a){this.ta.nodeIndentPastParent!==a&&(v.j(a,"number",Z,"alternateNodeIndentPastParent"),0<=a&&1>=a&&(this.ta.nodeIndentPastParent=a,this.H()))});v.defineProperty(Z,{kJ:"alternateNodeSpacing"},function(){return this.ta.nodeSpacing},function(a){this.ta.nodeSpacing!==a&&(v.j(a,"number",Z,"alternateNodeSpacing"),this.ta.nodeSpacing=a,this.H())});
v.defineProperty(Z,{gJ:"alternateLayerSpacing"},function(){return this.ta.layerSpacing},function(a){this.ta.layerSpacing!==a&&(v.j(a,"number",Z,"alternateLayerSpacing"),this.ta.layerSpacing=a,this.H())});v.defineProperty(Z,{hJ:"alternateLayerSpacingParentOverlap"},function(){return this.ta.layerSpacingParentOverlap},function(a){this.ta.layerSpacingParentOverlap!==a&&(v.j(a,"number",Z,"alternateLayerSpacingParentOverlap"),0<=a&&1>=a&&(this.ta.layerSpacingParentOverlap=a,this.H()))});
v.defineProperty(Z,{dJ:"alternateCompaction"},function(){return this.ta.compaction},function(a){this.ta.compaction!==a&&(v.pb(a,Z,Z,"alternateCompaction"),a===Rs||a===Ts)&&(this.ta.compaction=a,this.H())});v.defineProperty(Z,{$I:"alternateBreadthLimit"},function(){return this.ta.breadthLimit},function(a){this.ta.breadthLimit!==a&&(v.j(a,"number",Z,"alternateBreadthLimit"),0<=a&&(this.ta.breadthLimit=a,this.H()))});
v.defineProperty(Z,{nJ:"alternateRowSpacing"},function(){return this.ta.rowSpacing},function(a){this.ta.rowSpacing!==a&&(v.j(a,"number",Z,"alternateRowSpacing"),this.ta.rowSpacing=a,this.H())});v.defineProperty(Z,{mJ:"alternateRowIndent"},function(){return this.ta.rowIndent},function(a){this.ta.rowIndent!==a&&(v.j(a,"number",Z,"alternateRowIndent"),0<=a&&(this.ta.rowIndent=a,this.H()))});
v.defineProperty(Z,{cJ:"alternateCommentSpacing"},function(){return this.ta.commentSpacing},function(a){this.ta.commentSpacing!==a&&(v.j(a,"number",Z,"alternateCommentSpacing"),this.ta.commentSpacing=a,this.H())});v.defineProperty(Z,{bJ:"alternateCommentMargin"},function(){return this.ta.commentMargin},function(a){this.ta.commentMargin!==a&&(v.j(a,"number",Z,"alternateCommentMargin"),this.ta.commentMargin=a,this.H())});
v.defineProperty(Z,{pJ:"alternateSetsPortSpot"},function(){return this.ta.setsPortSpot},function(a){this.ta.setsPortSpot!==a&&(v.j(a,"boolean",Z,"alternateSetsPortSpot"),this.ta.setsPortSpot=a,this.H())});v.defineProperty(Z,{lJ:"alternatePortSpot"},function(){return this.ta.portSpot},function(a){v.A(a,L,Z,"alternatePortSpot");this.ta.portSpot.K(a)||(this.ta.portSpot=a,this.H())});
v.defineProperty(Z,{oJ:"alternateSetsChildPortSpot"},function(){return this.ta.setsChildPortSpot},function(a){this.ta.setsChildPortSpot!==a&&(v.j(a,"boolean",Z,"alternateSetsChildPortSpot"),this.ta.setsChildPortSpot=a,this.H())});v.defineProperty(Z,{aJ:"alternateChildPortSpot"},function(){return this.ta.childPortSpot},function(a){v.A(a,L,Z,"alternateChildPortSpot");this.ta.childPortSpot.K(a)||(this.ta.childPortSpot=a,this.H())});var ls;Z.PathDefault=ls=v.p(Z,"PathDefault",-1);var ms;
Z.PathDestination=ms=v.p(Z,"PathDestination",0);var ts;Z.PathSource=ts=v.p(Z,"PathSource",1);var Gs;Z.SortingForwards=Gs=v.p(Z,"SortingForwards",10);var Hs;Z.SortingReverse=Hs=v.p(Z,"SortingReverse",11);var Is;Z.SortingAscending=Is=v.p(Z,"SortingAscending",12);var Js;Z.SortingDescending=Js=v.p(Z,"SortingDescending",13);var lt;Z.AlignmentCenterSubtrees=lt=v.p(Z,"AlignmentCenterSubtrees",20);var Ks;Z.AlignmentCenterChildren=Ks=v.p(Z,"AlignmentCenterChildren",21);var Vs;
Z.AlignmentStart=Vs=v.p(Z,"AlignmentStart",22);var Ws;Z.AlignmentEnd=Ws=v.p(Z,"AlignmentEnd",23);var Ms;Z.AlignmentBus=Ms=v.p(Z,"AlignmentBus",24);var Bs;Z.AlignmentBusBranching=Bs=v.p(Z,"AlignmentBusBranching",25);var Ns;Z.AlignmentTopLeftBus=Ns=v.p(Z,"AlignmentTopLeftBus",26);var Os;Z.AlignmentBottomRightBus=Os=v.p(Z,"AlignmentBottomRightBus",27);var Rs;Z.CompactionNone=Rs=v.p(Z,"CompactionNone",30);var Ts;Z.CompactionBlock=Ts=v.p(Z,"CompactionBlock",31);var ns;
Z.StyleLayered=ns=v.p(Z,"StyleLayered",40);var Fs;Z.StyleLastParents=Fs=v.p(Z,"StyleLastParents",41);var Es;Z.StyleAlternating=Es=v.p(Z,"StyleAlternating",42);var Ds;Z.StyleRootOnly=Ds=v.p(Z,"StyleRootOnly",43);var ps;Z.ArrangementVertical=ps=v.p(Z,"ArrangementVertical",50);var ut;Z.ArrangementHorizontal=ut=v.p(Z,"ArrangementHorizontal",51);var ss;Z.ArrangementFixedRoots=ss=v.p(Z,"ArrangementFixedRoots",52);var os;Z.LayerIndividual=os=v.p(Z,"LayerIndividual",60);var zs;
Z.LayerSiblings=zs=v.p(Z,"LayerSiblings",61);var ys;Z.LayerUniform=ys=v.p(Z,"LayerUniform",62);function rs(){$f.call(this)}v.Ja(rs,$f);v.ea("TreeNetwork",rs);rs.prototype.createVertex=function(){return new qs};rs.prototype.createEdge=function(){return new wt};
function qs(){nq.call(this);this.initialized=!1;this.parent=null;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=null;this.ma=new z(0,0);this.fb=new ia(0,0);this.Ma=new z(0,0);this.Bp=this.Ap=this.qI=!1;this.St=this.At=null;this.sorting=Gs;this.comparer=tq;this.angle=0;this.alignment=Ks;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=Ts;this.breadthLimit=
0;this.rowSpacing=25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=!0;this.portSpot=fc;this.setsChildPortSpot=!0;this.childPortSpot=fc}v.Ja(qs,nq);v.ea("TreeVertex",qs);
qs.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};v.u(qs,{Cm:"childrenCount"},function(){return this.children.length});v.defineProperty(qs,{AK:"relativePosition"},function(){return this.ma},function(a){this.ma.set(a)});v.defineProperty(qs,{MK:"subtreeSize"},function(){return this.fb},function(a){this.fb.set(a)});
v.defineProperty(qs,{LK:"subtreeOffset"},function(){return this.Ma},function(a){this.Ma.set(a)});function wt(){oq.call(this);this.Rr=new z(0,0)}v.Ja(wt,oq);v.ea("TreeEdge",wt);
wt.prototype.commit=function(){var a=this.link;if(null!==a&&!a.sl){var b=this.network.Pb,c=null,d=null;switch(b.Df){case ms:c=this.fromVertex;d=this.toVertex;break;case ts:c=this.toVertex;d=this.fromVertex;break;default:v.k("Unhandled path value "+b.Df.toString())}if(null!==c&&null!==d)if(b=this.Rr,0!==b.x||0!==b.y||c.qI){var d=c.mb,e=Us(c),f=Xs(c),h=c.rowSpacing;a.en();var k=a.Ke===Ni,l=a.jc,m=0,n,p;a.Cl();if(l||k){for(m=2;4<a.oa;)a.GE(2);n=a.l(1);p=a.l(2)}else{for(m=1;3<a.oa;)a.GE(1);n=a.l(0);p=
a.l(a.oa-1)}var q=a.l(a.oa-1),r=0;0===e?(c.alignment===Ws?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-Ys(c))))):c.alignment===Vs?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+Ys(c))))):r=c.Ap||c.Bp&&1===c.maxGenerationCount?d.top-c.Ma.y+b.y:d.y+d.height/2+b.y,k?(a.w(m,n.x,r),m++,a.w(m,d.right+f,r),m++,a.w(m,d.right+f+(b.x-h)/3,r),m++,a.w(m,d.right+f+2*(b.x-h)/3,r),m++,a.w(m,d.right+f+(b.x-h),r),m++,a.w(m,p.x,r)):(l&&(a.w(m,d.right+f/2,n.y),
m++),a.w(m,d.right+f/2,r),m++,a.w(m,d.right+f+b.x-(l?h/2:h),r),m++,l&&a.w(m,a.l(m-1).x,p.y))):90===e?(c.alignment===Ws?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-Ys(c))))):c.alignment===Vs?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+Ys(c))))):r=c.Ap||c.Bp&&1===c.maxGenerationCount?d.left-c.Ma.x+b.x:d.x+d.width/2+b.x,k?(a.w(m,r,n.y),m++,a.w(m,r,d.bottom+f),m++,a.w(m,r,d.bottom+f+(b.y-h)/3),m++,a.w(m,r,d.bottom+f+2*(b.y-h)/3),m++,a.w(m,r,d.bottom+
f+(b.y-h)),m++,a.w(m,r,p.y)):(l&&(a.w(m,n.x,d.bottom+f/2),m++),a.w(m,r,d.bottom+f/2),m++,a.w(m,r,d.bottom+f+b.y-(l?h/2:h)),m++,l&&a.w(m,p.x,a.l(m-1).y))):180===e?(c.alignment===Ws?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-Ys(c))))):c.alignment===Vs?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+Ys(c))))):r=c.Ap||c.Bp&&1===c.maxGenerationCount?d.top-c.Ma.y+b.y:d.y+d.height/2+b.y,k?(a.w(m,n.x,r),m++,a.w(m,d.left-f,r),m++,a.w(m,d.left-f+(b.x+
h)/3,r),m++,a.w(m,d.left-f+2*(b.x+h)/3,r),m++,a.w(m,d.left-f+(b.x+h),r),m++,a.w(m,p.x,r)):(l&&(a.w(m,d.left-f/2,n.y),m++),a.w(m,d.left-f/2,r),m++,a.w(m,d.left-f+b.x+(l?h/2:h),r),m++,l&&a.w(m,a.l(m-1).x,p.y))):270===e?(c.alignment===Ws?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-Ys(c))))):c.alignment===Vs?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+Ys(c))))):r=c.Ap||c.Bp&&1===c.maxGenerationCount?d.left-c.Ma.x+b.x:d.x+d.width/2+b.x,k?(a.w(m,
r,n.y),m++,a.w(m,r,d.top-f),m++,a.w(m,r,d.top-f+(b.y+h)/3),m++,a.w(m,r,d.top-f+2*(b.y+h)/3),m++,a.w(m,r,d.top-f+(b.y+h)),m++,a.w(m,r,p.y)):(l&&(a.w(m,n.x,d.top-f/2),m++),a.w(m,r,d.top-f/2),m++,a.w(m,r,d.top-f+b.y+(l?h/2:h)),m++,l&&a.w(m,p.x,a.l(m-1).y))):v.k("Invalid angle "+e);a.Pi()}else e=c,f=d,a=this.link,c=Us(e),c!==Us(f)&&(b=Xs(e),d=e.mb,e=f.mb,0===c&&e.left-d.right<b+1||90===c&&e.top-d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1||(a.en(),e=a.Ke===Ni,f=a.jc,h=Ls(this.fromVertex.alignment),
a.Cl(),0===c?(c=d.right+b/2,e?4===a.oa&&(b=a.l(3).y,a.V(1,c-20,a.l(1).y),a.w(2,c-20,b),a.w(3,c,b),a.w(4,c+20,b),a.V(5,a.l(5).x,b)):f?h?a.V(3,a.l(2).x,a.l(4).y):6===a.oa&&(a.V(2,c,a.l(2).y),a.V(3,c,a.l(3).y)):4===a.oa?a.w(2,c,a.l(2).y):3===a.oa?a.V(1,c,a.l(2).y):2===a.oa&&a.w(1,c,a.l(1).y)):90===c?(b=d.bottom+b/2,e?4===a.oa&&(c=a.l(3).x,a.V(1,a.l(1).x,b-20),a.w(2,c,b-20),a.w(3,c,b),a.w(4,c,b+20),a.V(5,c,a.l(5).y)):f?h?a.V(3,a.l(2).x,a.l(4).y):6===a.oa&&(a.V(2,a.l(2).x,b),a.V(3,a.l(3).x,b)):4===a.oa?
a.w(2,a.l(2).x,b):3===a.oa?a.V(1,a.l(2).x,b):2===a.oa&&a.w(1,a.l(1).x,b)):180===c?(c=d.left-b/2,e?4===a.oa&&(b=a.l(3).y,a.V(1,c+20,a.l(1).y),a.w(2,c+20,b),a.w(3,c,b),a.w(4,c-20,b),a.V(5,a.l(5).x,b)):f?h?a.V(3,a.l(2).x,a.l(4).y):6===a.oa&&(a.V(2,c,a.l(2).y),a.V(3,c,a.l(3).y)):4===a.oa?a.w(2,c,a.l(2).y):3===a.oa?a.V(1,c,a.l(2).y):2===a.oa&&a.w(1,c,a.l(1).y)):270===c&&(b=d.top-b/2,e?4===a.oa&&(c=a.l(3).x,a.V(1,a.l(1).x,b+20),a.w(2,c,b+20),a.w(3,c,b),a.w(4,c,b-20),a.V(5,c,a.l(5).y)):f?h?a.V(3,a.l(2).x,
a.l(4).y):6===a.oa&&(a.V(2,a.l(2).x,b),a.V(3,a.l(3).x,b)):4===a.oa?a.w(2,a.l(2).x,b):3===a.oa?a.V(1,a.l(2).x,b):2===a.oa&&a.w(1,a.l(1).x,b)),a.Pi()))}};v.defineProperty(wt,{zK:"relativePoint"},function(){return this.Rr},function(a){this.Rr.set(a)});function xt(){G.call(this);this.Re=null}v.Ja(xt,G);xt.prototype.cloneProtected=function(a){G.prototype.cloneProtected.call(this,a);a.element=this.Re.cloneNode(!0)};xt.prototype.toString=function(){return"HTMLHost("+this.Re.toString()+")#"+v.ld(this)};
xt.prototype.Yj=function(a,b){var c=this.Re;if(null!==c){var d=this.Xa(zb);d.x-=this.U.width/2;d.y-=this.U.height/2;d.x-=this.U.x;d.y-=this.U.y;var d=b.nF(d),e=b.jl;null===e||e.contains(c)||e.appendChild(c);e=this.transform;c.style.transform="matrix("+e.m11+","+e.m12+","+e.m21+","+e.m22+","+e.dx+","+e.dy+")";c.style.transformOrigin="0 0";e=d.y;c.style.left=d.x+"px";c.style.top=e+"px"}};
xt.prototype.mp=function(a,b,c,d){var e=this.za;isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);var e=this.xf,f=this.kh;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);c=this.Re;null!==c&&(b=c.getBoundingClientRect(),a=b.width,b=b.height);Wa(this.Qc,a,b);Cm(this,0,0,a,b)};xt.prototype.Ni=function(a,b,c,d){Gm(this,a,b,c,d)};v.u(xt,{Ha:"naturalBounds"},function(){return this.Qc});
v.defineProperty(xt,{element:"element"},function(){return this.Re},function(a){var b=this.Re;b!==a&&(a instanceof HTMLElement||v.k("HTMLHost.element must be an instance of HTMLElement."),this.Re=a,a.className="HTMLHost",this.h("element",b,a),this.pa())});ea.version="1.6.24";
window&&(window.module&&"object"===typeof window.module&&"object"===typeof window.module.exports?window.module.exports=ea:window.define&&"function"===typeof window.define&&window.define.amd?(window.go=ea,window.define(ea)):window.go=ea);"undefined"!==typeof module&&"object"===typeof module.exports&&(module.exports=ea); })(window);
/*
 * GoJS v1.6.24 JavaScript Library for HTML Diagrams
 * Northwoods Software, https://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2017 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: https://gojs.net/1.6.24/doc/license.html.
 */

(function(window) { var f,aa={};if(!window.document||void 0===window.document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),g=Math.max(8,16-(c-a)),h=window.setTimeout(function(){b(c+g)},g);a=c+g;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){window.clearTimeout(a)})})();
var u={cj:!1,Sz:!1,lE:!1,AH:!1,eF:!1,DE:!1,ut:null,enableBoundsInfo:function(a){u.cj=!0;a&&a.Sp()},disableBoundsInfo:function(a){u.cj=!1;a&&(ca(a.gd,!0),a.Sp())},iE:function(a,b){void 0===a&&(a=u.ut);void 0===b&&(b=a.Gl("").mb);var c=b.length,d=a.gd;d.fillStyle="rgba(255,255,0,.3)";for(var e=0;e<c;e++){var g=b.ea(e),h=g.W;if(null!==g.va)u.iE(a,g.va);else{var k=g.Ak.copy();k.vA(g.Jd);d.save();d.transform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy);d.fillRect(h.x,h.y,h.width,h.height);d.restore()}}},jE:function(a,
b){a||(a=u.ut);b||(b=a.Gl("").mb);var c=a.gd,d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=b.ea(e),h=g.Ga,k=g.Ak;null!==g.va?u.jE(a,g.va):(c.save(),c.transform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),c.fillRect(h.x,h.y,h.width,h.height),c.restore())}},vH:function(a,b){a||(a=u.ut);b||(b=a.Gl("").mb);var c=a.gd,d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=b.ea(e),h=g.Ia,k=g.Ak;null!==g.va?u.vH(a,g.va):(c.save(),c.transform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),
c.fillRect(h.x||0,h.y||0,h.width,h.height),c.restore())}},vK:function(){u.jE();u.iE()},wK:function(a){a||(a=u.ut);var b=a.ad;a=a.gd;a.strokeStyle="rgba(0,255,0,.9)";a.rect(b.x,b.y,b.width,b.height);a.stroke()},kE:function(a,b){b.fillStyle="red";b.fillRect(0,0,8,8);b.lineWidth=8;b.strokeStyle="rgba(255,255,0,.6)";var c=a.xb;b.rect(c.x,c.y,c.width,c.height);b.stroke();b.fillStyle="rgba(0,255,0,.2)";b.fillRect(a.ad.x,a.ad.y,a.ad.width,a.ad.height)},wH:function(a,b){b instanceof da||(a.lineWidth=2,a.strokeStyle=
"rgba(255,0,0,.5)",a.rect(b.Xb.x,b.Xb.y,b.Xb.width,b.Xb.height),a.stroke(),void 0!==b.stroke&&(a.strokeStyle=b.stroke),void 0!==b.Oe&&(a.lineWidth=b.Oe),null!==b.T&&b.T.type===ga&&(a.lineWidth=1,a.strokeStyle="rgba(10,200,10,.6)",void 0!==b.stroke&&(a.strokeStyle=b.stroke),void 0!==b.Oe&&(a.lineWidth=b.Oe)))},xH:function(a,b){a.lineWidth=1;a.strokeStyle="rgba(0,0,255,.5)";a.rect(b.Ga.x,b.Ga.y,b.Ga.width,b.Ga.height);a.stroke();void 0!==b.stroke&&(a.strokeStyle=b.stroke);void 0!==b.Oe&&(a.lineWidth=
b.Oe)},Rz:function(a,b,c){a.setTransform(1,0,0,1,0,0);a.scale(b.jd,b.jd);a.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);c=b.Yb.length;for(var d=0;d<c;d++)for(var e=b.Yb.ea(d),g=e.mb.length,h=0;h<g;h++){var k=e.mb.ea(h);if(void 0!==k.location&&null!==k.location){if(k.location.F()){var l=k.location.x,m=k.location.y;a.beginPath();a.strokeStyle="limegreen";a.lineWidth=2;a.moveTo(l,m+6);a.lineTo(l,m);a.lineTo(l+6,m);a.moveTo(l,m);a.lineTo(l+10,m+20);a.stroke()}l=k.position.x;m=k.position.y;a.beginPath();
a.strokeStyle="red";a.lineWidth=2;a.moveTo(l,m+6);a.lineTo(l,m);a.lineTo(l+6,m);a.moveTo(l,m);a.lineTo(l+20,m+10);a.stroke()}}a.setTransform(1,0,0,1,0,0)},xK:function(a,b,c){var d=a.length;b.fillStyle="rgba(255,0,0,.1)";for(var e=0;e<d;e++){var g,h=a[e];g=c.Jd;var k=h.x,l=h.y,m=k+h.width,n=l+h.height,p=g.m11,q=g.m12,r=g.m21,s=g.m22,t=g.dx,v=g.dy,x=k*p+l*r+t,h=k*q+l*s+v;g=m*p+l*r+t;var l=m*q+l*s+v,y=k*p+n*r+t,k=k*q+n*s+v,p=m*p+n*r+t,m=m*q+n*s+v,n=x,q=h,n=Math.min(n,g),x=Math.max(x,g),q=Math.min(q,
l),h=Math.max(h,l),n=Math.min(n,y),x=Math.max(x,y),q=Math.min(q,k),h=Math.max(h,k),n=Math.min(n,p),x=Math.max(x,p),q=Math.min(q,m),h=Math.max(h,m);g=new w(n,q,x-n,h-q);b.fillRect(g.x,g.y,g.width,g.height)}},yH:function(a,b,c,d,e){a.fillStyle="rgba(0,255,0,.2)";a.fillRect(b,c,d,e)},zH:function(a,b,c){a.save();var d=b.Jd;d.reset();1!==b.scale&&d.scale(b.scale);b=b.position;0===b.x&&0===b.y||d.translate(-b.x,-b.y);a.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);c=c.Yc.o;d=c.length;for(b=0;b<d;b++){var e=
c[b];a.beginPath();a.moveTo(e.x-4,e.y);a.lineTo(e.x+4,e.y);a.moveTo(e.x,e.y-4);a.lineTo(e.x,e.y+4);a.lineWidth=2;a.strokeStyle="rgba(255,0,0,.9)";a.stroke()}a.restore()},tK:function(a){a||(a=u.ut);for(a=a.ln;a.next();)z.trace(a.value.toString())},nL:function(a,b){var c=b.ko(a),d=b.Qb;d.ue=b.aB(c);d.ga=c;return ha(b,d,a)},iL:function(a,b){b.pe(a.ga)&&(b.gd.fillStyle="lime",b.gd.fillRect(a.ue.x,a.ue.y,1*b.scale,1*b.scale))},jL:function(a){var b=ja(a,!1,null,null);if(!b.yp){a=a.gd;for(var c=0;c<=b.Nm;c++)for(var d=
0;d<=b.Om;d++){var e=b.lc[c][d];if(0!==e){var g=c*b.Rd+b.Sf,h=d*b.Ad+b.Tf;0!==e&&(a.fillStyle="rgba(255, 0, 0, .2)",a.fillRect(g,h,b.Rd,b.Ad));999999<=e||(e%=10,a.fillStyle="blue",a.fillText(e.toString(),g,h+b.Ad))}}}},dumpReferences:function(a){if(a instanceof B)for(a=a.ln;a.next();){var b=a.value;z.trace(b.toString());for(b=b.oi;b.next();)u.dumpReferences(b.value)}else if(a instanceof D){z.trace("References for "+a);null!==a.layer&&z.trace("  "+a.layer.toString()+' LayerName: "'+a.If+'"');a.un!==
a&&z.trace("  SelectionObject: "+a.un.toString()+' SelectionObjectName: "'+a.Kx+'"');a.Zb!==a&&z.trace("  LocationObject: "+a.Zb.toString()+' LocationObjectName: "'+a.ux+'"');if(a.Xg){for(var c="",b=a.Xg.i;b.next();)c+=b.key+" ";z.trace("  Adornments: "+c)}null!==a.Qa&&z.trace("  ContainingGroup: "+a.Qa.toString());if(a instanceof E){if(a.Ed)for(b=a.Ed.i;b.next(););if(0<a.ee.count){c="";for(b=a.ee;b.next();)c+=b.value.toString()+", ";z.trace("  Links: "+c)}null!==a.od&&z.trace("  LabeledLink: "+a.od.toString());
if(a instanceof F){z.trace("  Placeholder: "+a.placeholder);c="";for(b=a.Hc;b.next();)c+=b.value.toString()+", ";z.trace("  Members: "+c);c="";for(b=a.vm.i;b.next();)c+=b.value.toString()+", ";z.trace("  NestedGroups: "+c);z.trace("  Layout: "+a.Sb)}}else if(a instanceof G){z.trace("  Path: "+a.path);z.trace("  From: "+a.Y+" "+a.md+' "'+a.ag+'"');z.trace("  To: "+a.da+" "+a.Qd+' "'+a.Vg+'"');c="";for(b=a.Hf;b.next();)c+=b.value.toString()+", ";z.trace("  LabelNodes: "+c)}}},dumpVisualTree:function(a){if(a instanceof
B)for(a=a.ln;a.next();){var b=a.value;z.trace(b.toString());for(b=b.oi;b.next();)u.dumpVisualTree(b.value)}else a instanceof D&&(b=" ",a.ZD&&(b+="c"),a.cE&&(b+="d"),a.BE&&(b+="g"),a.cF&&(b+="m"),a.rF&&(b+="h"),a.sF&&(b+="z"),a.xF&&(b+="o"),a.wk&&(b+="s"),a.QF&&(b+="t"),a.FF&&(b+="A"),a.lx&&(b+="B"),a.jA&&(b+="L"),a.jb&&(b+="S"),a.tk&&(b+="H"),u.bC(a,1,b))},bC:function(a,b,c){for(var d="",e=0;e<b;e++)d+="  ";d+=a.toString();c&&(d+=c);c=" ";c=a.visible?c+"v":c+"~";a.jg&&(c+="p");a.Ff&&(c+="m");a.Mt&&
(c+="a");d+=c;if(0!==a.Vb||0!==a.column)d+=" ["+a.Vb+","+a.column+"]";d+=" "+a.W.toString();a.Aa.F()&&(d+=" d:"+a.Aa.toString());a.Ga.F()&&(d+=" n:"+a.Ga.toString());1!==a.scale&&(d+=" s:"+a.scale);0!==a.angle&&(d+=" a:"+a.angle);null!==a.background&&(d+=" b:"+a.background.toString());null!==a.wl&&(d+=" a:"+a.background.toString());a instanceof I&&(d+=" elts:"+a.va.count,0!==a.VF&&(d+=" top:"+a.VF),0!==a.WE&&(d+=" left:"+a.WE),null!==a.Tt&&(d+=" itemArray#:"+z.ab(a.Tt)),a.kI&&(d+=" cat:"+a.kI),null!==
a.data&&(d+=" data:"+a.data));null!==a.zd&&(d+=' portId: "'+a.zd+'"');z.trace(d);if(a instanceof I)for(a=a.elements;a.next();)u.bC(a.value,b+1,"")},zK:function(a){z.trace("DelayedReferences ("+a.og.count+")");for(a=a.og.i;a.next();){for(var b="",c=a.value.i;c.next();)b+=ka(c.value)+", ";z.trace("  "+a.key+": "+b)}},OD:function(a,b){if(!z.Za(b)||b instanceof Element||b instanceof CanvasRenderingContext2D||b instanceof la||b instanceof ma)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&
(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=z.tb(b,d);if(null!==e&&"function"!==typeof e){if(b.hasOwnProperty(d)){var g=Object.getPrototypeOf(b);if(g&&g.Zv&&g.Zv[d])continue}else if(z.hx(b,d))continue;""===c&&(c=b+"\n");c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n"}}return c},Mw:function(a,b){if(null!==b&&void 0!==b&&"number"!==typeof b&&"string"!==typeof b&&"boolean"!==typeof b&&"function"!==typeof b)if(void 0!==z.nd(b)){if(!u.nw.contains(b))if(u.nw.add(b),
u.Nv.add(u.OD(a,b)),b instanceof J||b instanceof K||b instanceof na)for(var c=b.i;c.next();)u.Mw(a+"["+c.key+"]",c.value);else for(c in b){var d=z.tb(b,c);if(void 0!==d&&null!==d&&z.Za(d)&&d!==b.Zv){if(b instanceof qa){if(d===b.Oj)continue}else if(b instanceof I){if("data"===c||d===b.fe)continue;if("itemArray"===c||d===b.Ji)continue;if(b instanceof D&&d===b.jl)continue}else if(!(b instanceof B))if(b instanceof ra){if("archetypeGroupData"===c||d===b.ky)continue}else if(b instanceof ta){if("archetypeLinkData"===
c||d===b.my)continue;if("archetypeLabelNodeData"===c||d===b.ly)continue}else if(b instanceof va){if("archetypeNodeData"===c||d===b.Nk)continue}else if(b instanceof M){if("nodeDataArray"===c||d===b.wf)continue;if("linkDataArray"===c||d===b.vf||d===b.rm)continue;if(d===b.vc)continue;if(d===b.og)continue}else if(b instanceof wa||b instanceof xa||b instanceof ya)continue;u.Mw(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)u.Mw(a+"["+c+"]",b[c]);else u.Nv.add(u.OD(a,b))},checkProperties:function(a){void 0===
u.nw?u.nw=new K(Object):u.nw.clear();u.Nv=new za;u.Mw("",a);a=u.Nv.toString();u.Nv=null;return a}};aa.Debug=u;
var z={qd:1,Tc:2,fd:4,ed:8,hn:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),ME:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),NE:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),GK:void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Edge/"),sk:void 0!==window.navigator&&void 0!==window.navigator.platform&&0<=window.navigator.platform.toUpperCase().indexOf("MAC"),
OE:void 0!==window.navigator&&void 0!==window.navigator.platform&&null!==window.navigator.platform.match(/(iPhone|iPod|iPad)/i),$D:function(a,b,c){var d=-1;return function(){var e=this,g=arguments;-1!==d&&z.clearTimeout(d);d=z.setTimeout(function(){d=-1;c||a.apply(e,g)},b);c&&!d&&a.apply(e,g)}},setTimeout:function(a,b){return window.setTimeout(a,b)},clearTimeout:function(a){window.clearTimeout(a)},createElement:function(a){return window.document.createElement(a)},k:function(a){throw Error(a);},oa:function(a,
b){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b);z.k(c)},l:function(a,b,c,d){a instanceof b||(c=z.getTypeName(c),void 0!==d&&(c+="."+d),z.ic(a,b,c))},g:function(a,b,c,d){typeof a!==b&&(c=z.getTypeName(c),void 0!==d&&(c+="."+d),z.ic(a,b,c))},p:function(a,b,c){"number"===typeof a&&isFinite(a)||(b=z.getTypeName(b),void 0!==c&&(b+="."+c),z.k(b+" must be a real number type, and not NaN or Infinity: "+a))},Ba:function(a,b,c,d){a instanceof
Ba&&a.Ae===b||(c=z.getTypeName(c),void 0!==d&&(c+="."+d),z.ic(a,"a constant of class "+z.kf(b),c))},ot:function(a,b){"string"===typeof a?Ca(a)||z.k('Color "'+a+'" is not a valid color string for '+b):a instanceof Da||z.k("Value for "+b+" must be a color string or a Brush, not "+a)},ic:function(a,b,c,d){b=z.getTypeName(b);c=z.getTypeName(c);void 0!==d&&(c+="."+d);"string"===typeof a?z.k(c+" value is not an instance of "+b+': "'+a+'"'):z.k(c+" value is not an instance of "+b+": "+a)},ka:function(a,
b,c,d){c=z.getTypeName(c);void 0!==d&&(c+="."+d);z.k(c+" is not in the range "+b+": "+a)},pd:function(a){z.k(z.kf(a)+" constructor cannot take any arguments.")},Ta:function(a){z.k("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(a){window.console&&window.console.log(a)},Za:function(a){return"object"===typeof a&&null!==a},isArray:function(a){return Array.isArray(a)||
a instanceof NodeList||a instanceof HTMLCollection},fI:function(a){return Array.isArray(a)},nt:function(a,b,c){z.isArray(a)||z.ic(a,"Array or NodeList or HTMLCollection",b,c)},ab:function(a){return a.length},Al:function(a){return Array.prototype.slice.call(a)},Ya:function(a,b){Array.isArray(a);return a[b]},LD:function(a,b,c){Array.isArray(a)?a[b]=c:z.k("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Fz:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=
0;d<c;d++)if(a[d]===b)return d;return-1},bj:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):z.k("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},ii:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):z.k("Cannot remove an object from an HTMLCollection or NodeList at "+b)},$x:[],O:function(){var a=z.$x.pop();return void 0===a?new N:a},Tb:function(a,b){var c=z.$x.pop();if(void 0===c)return new N(a,b);c.x=a;c.y=b;return c},A:function(a){z.$x.push(a)},
nB:[],Xl:function(){var a=z.nB.pop();return void 0===a?new Ea:a},qk:function(a){z.nB.push(a)},ay:[],lg:function(){var a=z.ay.pop();return void 0===a?new w:a},zk:function(a,b,c,d){var e=z.ay.pop();if(void 0===e)return new w(a,b,c,d);e.x=a;e.y=b;e.width=c;e.height=d;return e},dc:function(a){z.ay.push(a)},oB:[],Hh:function(){var a=z.oB.pop();return void 0===a?new Fa:a},jf:function(a){z.oB.push(a)},by:null,v:function(){var a=z.by;return null!==a?(z.by=null,a):new Ga},u:function(a){a.reset();z.by=a},mB:[],
rb:function(){var a=z.mB.pop();return void 0===a?[]:a},xa:function(a){a.length=0;z.mB.push(a)},yj:Object.freeze([]),am:1,kc:function(a){a.__gohashid=z.am++},It:function(a){var b=a.__gohashid;void 0===b&&(b=z.am++,a.__gohashid=b);return b},nd:function(a){return a.__gohashid},ia:function(a,b){b.sy=a;aa[a]=b},Ra:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},ji:function(a){a.BG=!0},defineProperty:function(a,b,c,d,e){z.g(a,"function","Util.defineProperty:classfunc");
z.g(b,"object","Util.defineProperty:propobj");z.g(c,"function","Util.defineProperty:getter");z.g(d,"function","Util.defineProperty:setter");for(var g in b){b=b[g];c={get:c,set:d,enumerable:!0};if(void 0!==e)for(var h in e)c[h]=e[h];Object.defineProperty(a.prototype,g,c);e=Object.getOwnPropertyDescriptor(a.prototype,g);b&&e&&Object.defineProperty(a.prototype,b,e);break}},FJ:!1,w:function(a,b,c,d){z.g(a,"function","Util.defineReadOnlyProperty:classfunc");z.g(b,"object","Util.defineReadOnlyProperty:propobj");
z.g(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var g=b[e];b={get:c,set:function(a){z.k('The property "'+g+'" is read-only and cannot be set to '+a)},enumerable:!0};if(void 0!==d)for(var h in d)b[h]=d[h];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);g&&d&&Object.defineProperty(a.prototype,g,d);break}},Yd:function(a,b){for(var c in b)b[c]=!0;a.prototype.Zv=b},getTypeName:function(a){return void 0===a?"":"string"===typeof a?a:"function"===
typeof a?z.kf(a):null===a?"*":""},kf:function(a){if("function"===typeof a){if(a.sy)return a.sy;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("("),b=b.substring(9,c).trim();if(""!==b)return a.sy=b}else if("object"===typeof a&&a.constructor)return z.kf(a.constructor);return typeof a},s:function(a,b,c){z.g(a,"function","Util.defineEnumValue:classfunc");z.g(b,"string","Util.defineEnumValue:name");z.g(c,"number","Util.defineEnumValue:num");c=new Ba(a,b,c);Object.freeze(c);a[b]=c;var d=a.Fu;d instanceof
na||(d=new na("string",Ba),a.Fu=d);d.add(b,c);return c},tb:function(a,b){if(!a||!b)return null;var c=void 0;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):c=a[b]}catch(d){u&&z.trace("property get error: "+d.toString())}return c},Sa:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){u&&z.trace("property set error: "+d.toString())}},qu:function(a,b){z.g(a,"object",
"Setting properties requires Objects as arguments");z.g(b,"object","Setting properties requires Objects as arguments");var c=a instanceof I,d=a instanceof B,e;for(e in b){""===e&&z.k("Setting properties requires non-empty property names");var g=a,h=e;if(c||d){var k=e.indexOf(".");if(0<k){var l=e.substring(0,k);if(c)g=a.oe(l);else if(g=a[l],void 0===g||null===g)g=a.gb[l];z.Za(g)?h=e.substr(k+1):z.k("Unable to find object named: "+l+" in "+a.toString()+" when trying to set property: "+e)}}if("_"!==
h[0]&&!z.hx(g,h))if(d&&"ModelChanged"===h){a.PG(b[h]);continue}else if(d&&"Changed"===h){a.Qm(b[h]);continue}else if(d&&z.hx(a.gb,h))g=a.gb;else if(d&&Ia(a,h)){a.Az(h,b[h]);continue}else if(a instanceof M&&"Changed"===h){a.Qm(b[h]);continue}else z.k('Trying to set undefined property "'+h+'" on object: '+g.toString());g[h]=b[e];"_"===h[0]&&g instanceof O&&g.MG(h)}},hx:function(a,b){if(a.hasOwnProperty(b))return!0;for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;
var d=c.Zv;if(d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1},UI:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e=0,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",h=0;h<a.length;h++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(h)^b[(b[c]+b[d])%256]);return g},UH:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);
for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Gg:function(a){return z.UI(z.UH(a))},Zl:null,adym:"7da71ca0ad381e90",vfo:"2be640fdb162",aH:"@COLOR1",bH:"@COLOR2"};
z.Zl=function(){var a=window.document.createElement("canvas"),b=a.getContext("2d");b[z.Gg("7ca11abfd022028846")]=z.Gg("398c3597c01238");for(var c=["","","",""],d=1;5>d;d++)b[z.Gg("7ca11abfd7330390")](z.Gg(c[d-1]),10,15*d+0);b[z.Gg("7ca11abfd022028846")]=z.Gg("39f046ebb36e4b");for(d=1;5>d;d++)b[z.Gg("7ca11abfd7330390")](z.Gg(c[d-
1]),10,15*d+0);if(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])z.s=function(a,b){var c=new Ba(a,b,2);Object.freeze(c);a[b]=c;var d=a.Fu;d instanceof na||(d=new na("string",Ba),a.Fu=d);d.add(b,c);return c};return a}();function Ba(a,b,c){z.kc(this);this.yB=a;this.Ub=b;this.GG=c}z.ia("EnumValue",Ba);Ba.prototype.toString=function(){return z.kf(this.yB)+"."+this.Ub};z.w(Ba,{Ae:"classType"},function(){return this.yB});z.w(Ba,{name:"name"},function(){return this.Ub});z.w(Ba,{value:"value"},function(){return this.GG});
var Ja;Ba.findName=Ja=function(a,b){if(void 0===b||null===b||""===b)return null;z.g(a,"function","findName:classfunc");z.g(b,"string","EnumValue.findName:name");var c=a.Fu;return c instanceof na?c.na(b):null};function za(){this.xB=[]}za.prototype.toString=function(){return this.xB.join("")};za.prototype.add=function(a){""!==a&&this.xB.push(a)};function ma(){}
function Ka(a){void 0===a&&(a=42);this.seed=a;this.Wx=48271;this.Eu=2147483647;this.lB=this.Eu/this.Wx;this.kG=this.Eu%this.Wx;this.jG=1/this.Eu;this.random()}Ka.prototype.random=function(){var a=this.seed%this.lB*this.Wx-this.seed/this.lB*this.kG;this.seed=0<a?a:a+this.Eu;return this.seed*this.jG};function Ma(){}z.w(Ma,{i:"iterator"},function(){return this});Ma.prototype.reset=Ma.prototype.reset=function(){};Ma.prototype.next=Ma.prototype.hasNext=Ma.prototype.next=function(){return!1};
Ma.prototype.first=Ma.prototype.first=function(){return null};Ma.prototype.any=function(){return!1};Ma.prototype.all=function(){return!0};Ma.prototype.each=function(){return this};Ma.prototype.map=function(){return this};Ma.prototype.filter=function(){return this};Ma.prototype.concat=function(a){return a.i};z.w(Ma,{count:"count"},function(){return 0});Ma.prototype.Nf=function(){};Ma.prototype.toString=function(){return"EmptyIterator"};var Pa=new Ma;function Ra(a){this.key=-1;this.value=a}
z.Yd(Ra,{key:!0,value:!0});z.w(Ra,{i:"iterator"},function(){return this});Ra.prototype.reset=Ra.prototype.reset=function(){this.key=-1};Ra.prototype.next=Ra.prototype.hasNext=Ra.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1};Ra.prototype.first=Ra.prototype.first=function(){this.key=0;return this.value};Ra.prototype.any=function(a){this.key=-1;return a(this.value)};Ra.prototype.all=function(a){this.key=-1;return a(this.value)};
Ra.prototype.each=function(a){this.key=-1;a(this.value);return this};Ra.prototype.map=function(a){return new Ra(a(this.value))};Ra.prototype.filter=function(a){return a(this.value)?new Ra(this.value):Pa};Ra.prototype.concat=function(a){return new Sa(this,a.i)};z.w(Ra,{count:"count"},function(){return 1});Ra.prototype.Nf=function(){this.value=null};Ra.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Sa(a,b){this.al=a;this.bl=b;this.Gu=!1}z.Yd(Sa,{key:!0,value:!0});
z.w(Sa,{i:"iterator"},function(){return this});Sa.prototype.reset=Sa.prototype.reset=function(){this.al.reset();this.bl.reset();this.Gu=!1};Sa.prototype.next=Sa.prototype.hasNext=Sa.prototype.next=function(){if(!this.Gu){var a=this.al;if(a.next())return this.key=a.key,this.value=a.value,!0;this.Gu=!0}return this.Gu&&(a=this.bl,a.next())?(this.key=a.key,this.value=a.value,!0):!1};Sa.prototype.first=Sa.prototype.first=function(){this.reset();return this.next()?this.value:null};
Sa.prototype.any=function(a){return this.al.any(a)||this.bl.any(a)?!0:!1};Sa.prototype.all=function(a){return this.al.all(a)&&this.bl.all(a)?!0:!1};Sa.prototype.each=function(a){this.al.each(a);this.bl.each(a);return this};Sa.prototype.map=function(a){return new Sa(this.al.map(a),this.bl.map(a))};Sa.prototype.filter=function(a){return new Sa(this.al.filter(a),this.bl.filter(a))};Sa.prototype.concat=function(a){return new Sa(this,a.i)};z.w(Sa,{count:"count"},function(){return this.al.count+this.bl.count});
Sa.prototype.Nf=function(){this.value=this.key=null};Sa.prototype.toString=function(){return"ConcatIterator()"};function Ta(a){this.Bc=a;this.Xh=null;this.reset()}z.Yd(Ta,{key:!0,value:!0});z.w(Ta,{i:"iterator"},function(){return this});z.defineProperty(Ta,{qn:"predicate"},function(){return this.Xh},function(a){this.Xh=a});Ta.prototype.reset=Ta.prototype.reset=function(){var a=this.Bc;a.ec=null;this.nb=a.H;this.Uc=-1};
Ta.prototype.next=Ta.prototype.hasNext=Ta.prototype.next=function(){var a=this.Bc;if(a.H!==this.nb){if(0>this.key)return!1;z.Ta(a)}var a=a.o,b=a.length,c=++this.Uc,d=this.Xh;if(null!==d)for(;c<b;){var e=a[c];if(d(e))return this.key=this.Uc=c,this.value=e,!0;c++}else{if(c<b)return this.key=c,this.value=a[c],!0;this.Nf()}return!1};
Ta.prototype.first=Ta.prototype.first=function(){var a=this.Bc;this.nb=a.H;this.Uc=0;var a=a.o,b=a.length,c=this.Xh;if(null!==c){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.Uc=d,this.value=e;d++}return null}return 0<b?(e=a[0],this.key=0,this.value=e):null};Ta.prototype.any=function(a){var b=this.Bc;b.ec=null;var c=b.H;this.Uc=-1;for(var d=b.o,e=d.length,g=this.Xh,h=0;h<e;h++){var k=d[h];if(null===g||g(k)){if(a(k))return!0;b.H!==c&&z.Ta(b)}}return!1};
Ta.prototype.all=function(a){var b=this.Bc;b.ec=null;var c=b.H;this.Uc=-1;for(var d=b.o,e=d.length,g=this.Xh,h=0;h<e;h++){var k=d[h];if(null===g||g(k)){if(!a(k))return!1;b.H!==c&&z.Ta(b)}}return!0};Ta.prototype.each=function(a){var b=this.Bc;b.ec=null;var c=b.H;this.Uc=-1;for(var d=b.o,e=d.length,g=this.Xh,h=0;h<e;h++){var k=d[h];if(null===g||g(k))a(k),b.H!==c&&z.Ta(b)}return this};
Ta.prototype.map=function(a){var b=this.Bc;b.ec=null;var c=b.H;this.Uc=-1;for(var d=[],e=b.o,g=e.length,h=this.Xh,k=0;k<g;k++){var l=e[k];if(null===h||h(l))d.push(a(l)),b.H!==c&&z.Ta(b)}a=new J;a.o=d;a.Jc();return a.i};Ta.prototype.filter=function(a){var b=this.Bc;b.ec=null;var c=b.H;this.Uc=-1;for(var d=[],e=b.o,g=e.length,h=this.Xh,k=0;k<g;k++){var l=e[k];if(null===h||h(l))a(l)&&d.push(l),b.H!==c&&z.Ta(b)}a=new J(b.ba);a.o=d;a.Jc();return a.i};
Ta.prototype.concat=function(a){this.Bc.ec=null;return new Sa(this,a.i)};z.w(Ta,{count:"count"},function(){var a=this.Xh;if(null!==a){for(var b=0,c=this.Bc.o,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Bc.o.length});Ta.prototype.Nf=function(){this.key=-1;this.value=null;this.nb=-1;this.Xh=null;this.Bc.ec=this};Ta.prototype.toString=function(){return"ListIterator@"+this.Uc+"/"+this.Bc.count};function Ua(a){this.Bc=a;this.reset()}z.Yd(Ua,{key:!0,value:!0});z.w(Ua,{i:"iterator"},function(){return this});
Ua.prototype.reset=Ua.prototype.reset=function(){var a=this.Bc;a.Mj=null;this.nb=a.H;this.Uc=a.o.length};Ua.prototype.next=Ua.prototype.hasNext=Ua.prototype.next=function(){var a=this.Bc;if(a.H!==this.nb){if(0>this.key)return!1;z.Ta(a)}var b=--this.Uc;if(0<=b)return this.key=b,this.value=a.o[b],!0;this.Nf();return!1};Ua.prototype.first=Ua.prototype.first=function(){var a=this.Bc;this.nb=a.H;var b=a.o;this.Uc=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):null};
Ua.prototype.any=function(a){var b=this.Bc;b.Mj=null;var c=b.H,d=b.o,e=d.length;this.Uc=e;for(e-=1;0<=e;e--){if(a(d[e]))return!0;b.H!==c&&z.Ta(b)}return!1};Ua.prototype.all=function(a){var b=this.Bc;b.Mj=null;var c=b.H,d=b.o,e=d.length;this.Uc=e;for(e-=1;0<=e;e--){if(!a(d[e]))return!1;b.H!==c&&z.Ta(b)}return!0};Ua.prototype.each=function(a){var b=this.Bc;b.Mj=null;var c=b.H,d=b.o,e=d.length;this.Uc=e;for(e-=1;0<=e;e--)a(d[e]),b.H!==c&&z.Ta(b);return this};
Ua.prototype.map=function(a){var b=this.Bc;b.Mj=null;var c=b.H,d=[],e=b.o,g=e.length;this.Uc=g;for(g-=1;0<=g;g--)d.push(a(e[g])),b.H!==c&&z.Ta(b);a=new J;a.o=d;a.Jc();return a.i};Ua.prototype.filter=function(a){var b=this.Bc;b.Mj=null;var c=b.H,d=[],e=b.o,g=e.length;this.Uc=g;for(g-=1;0<=g;g--){var h=e[g];a(h)&&d.push(h);b.H!==c&&z.Ta(b)}a=new J(b.ba);a.o=d;a.Jc();return a.i};Ua.prototype.concat=function(a){this.Bc.Mj=null;return new Sa(this,a.i)};z.w(Ua,{count:"count"},function(){return this.Bc.o.length});
Ua.prototype.Nf=function(){this.key=-1;this.value=null;this.nb=-1;this.Bc.Mj=this};Ua.prototype.toString=function(){return"ListIteratorBackwards("+this.Uc+"/"+this.Bc.count+")"};
function J(a){z.kc(this);this.G=!1;this.o=[];this.H=0;this.Mj=this.ec=null;void 0===a||null===a?this.ba=null:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.ba=a:z.ka(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.ba=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:z.ka(a,"null, a primitive type name, or a class type",
"List constructor: type")}z.ia("List",J);J.prototype.Zg=function(a){null!==this.ba&&("string"===typeof this.ba?typeof a===this.ba&&null!==a||z.ic(a,this.ba):a instanceof this.ba||z.ic(a,this.ba))};J.prototype.Jc=function(){var a=this.H;a++;999999999<a&&(a=0);this.H=a};J.prototype.freeze=J.prototype.freeze=function(){this.G=!0;return this};J.prototype.thaw=J.prototype.Wa=function(){this.G=!1;return this};J.prototype.toString=function(){return"List("+z.getTypeName(this.ba)+")#"+z.nd(this)};
J.prototype.add=J.prototype.push=J.prototype.add=function(a){null!==a&&(u&&this.Zg(a),this.G&&z.oa(this,a),this.o.push(a),this.Jc())};J.prototype.addAll=J.prototype.$c=function(a){if(null===a)return this;this.G&&z.oa(this);var b=this.o;if(z.isArray(a))for(var c=z.ab(a),d=0;d<c;d++){var e=z.Ya(a,d);u&&this.Zg(e);b.push(e)}else for(a=a.i;a.next();)e=a.value,u&&this.Zg(e),b.push(e);this.Jc();return this};J.prototype.clear=J.prototype.clear=function(){this.G&&z.oa(this);this.o.length=0;this.Jc()};
J.prototype.contains=J.prototype.has=J.prototype.contains=function(a){if(null===a)return!1;u&&this.Zg(a);return-1!==this.o.indexOf(a)};J.prototype.indexOf=J.prototype.indexOf=function(a){if(null===a)return-1;u&&this.Zg(a);return this.o.indexOf(a)};J.prototype.elt=J.prototype.get=J.prototype.ea=function(a){u&&z.p(a,J,"elt:i");var b=this.o;(0>a||a>=b.length)&&z.ka(a,"0 <= i < length",J,"elt:i");return b[a]};
J.prototype.setElt=J.prototype.set=J.prototype.Sg=function(a,b){u&&(this.Zg(b),z.p(a,J,"setElt:i"));var c=this.o;(0>a||a>=c.length)&&z.ka(a,"0 <= i < length",J,"setElt:i");this.G&&z.oa(this,a);c[a]=b};J.prototype.first=J.prototype.first=function(){var a=this.o;return 0===a.length?null:a[0]};J.prototype.last=J.prototype.de=function(){var a=this.o,b=a.length;return 0<b?a[b-1]:null};J.prototype.pop=J.prototype.pop=function(){this.G&&z.oa(this);var a=this.o;return 0<a.length?a.pop():null};
J.prototype.any=function(a){for(var b=this.o,c=this.H,d=b.length,e=0;e<d;e++){if(a(b[e]))return!0;this.H!==c&&z.Ta(this)}return!1};J.prototype.all=function(a){for(var b=this.o,c=this.H,d=b.length,e=0;e<d;e++){if(!a(b[e]))return!1;this.H!==c&&z.Ta(this)}return!0};J.prototype.each=function(a){for(var b=this.o,c=this.H,d=b.length,e=0;e<d;e++)a(b[e]),this.H!==c&&z.Ta(this);return this};
J.prototype.map=function(a){for(var b=new J,c=[],d=this.o,e=this.H,g=d.length,h=0;h<g;h++)c.push(a(d[h])),this.H!==e&&z.Ta(this);b.o=c;b.Jc();return b};J.prototype.filter=function(a){for(var b=new J(this.ba),c=[],d=this.o,e=this.H,g=d.length,h=0;h<g;h++){var k=d[h];a(k)&&c.push(k);this.H!==e&&z.Ta(this)}b.o=c;b.Jc();return b};J.prototype.concat=function(a){return this.copy().$c(a)};
J.prototype.insertAt=J.prototype.Md=function(a,b){u&&(this.Zg(b),z.p(a,J,"insertAt:i"));0>a&&z.ka(a,">= 0",J,"insertAt:i");this.G&&z.oa(this,a);var c=this.o;a>=c.length?c.push(b):c.splice(a,0,b);this.Jc();return!0};J.prototype.remove=J.prototype["delete"]=J.prototype.remove=function(a){if(null===a)return!1;u&&this.Zg(a);this.G&&z.oa(this,a);var b=this.o;a=b.indexOf(a);if(-1===a)return!1;a===b.length-1?b.pop():b.splice(a,1);this.Jc();return!0};
J.prototype.removeAt=J.prototype.dd=function(a){u&&z.p(a,J,"removeAt:i");var b=this.o;(0>a||a>=b.length)&&z.ka(a,"0 <= i < length",J,"removeAt:i");this.G&&z.oa(this,a);a===b.length-1?b.pop():b.splice(a,1);this.Jc()};
J.prototype.removeRange=J.prototype.removeRange=function(a,b){u&&(z.p(a,J,"removeRange:from"),z.p(b,J,"removeRange:to"));var c=this.o;(0>a||a>=c.length)&&z.ka(a,"0 <= from < length",J,"elt:from");(0>b||b>=c.length)&&z.ka(b,"0 <= to < length",J,"elt:to");this.G&&z.oa(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.Jc()};J.prototype.copy=function(){var a=new J(this.ba),b=this.o;0<b.length&&(a.o=Array.prototype.slice.call(b));return a};
J.prototype.toArray=J.prototype.jc=function(){for(var a=this.o,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};J.prototype.toSet=J.prototype.UF=function(){for(var a=new K(this.ba),b=this.o,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};J.prototype.sort=J.prototype.sort=function(a){u&&z.g(a,"function",J,"sort:sortfunc");this.G&&z.oa(this);this.o.sort(a);this.Jc();return this};
J.prototype.sortRange=J.prototype.dq=function(a,b,c){var d=this.o,e=d.length;void 0===b&&(b=0);void 0===c&&(c=e);u&&(z.g(a,"function",J,"sortRange:sortfunc"),z.p(b,J,"sortRange:from"),z.p(c,J,"sortRange:to"));this.G&&z.oa(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&z.ka(b,"0 <= from < length",J,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.Jc()),this;if(0===b)if(c>=e)d.sort(a);else for(g=d.slice(0,c),g.sort(a),a=0;a<c;a++)d[a]=g[a];else if(c>=e)for(g=d.slice(b),
g.sort(a),a=b;a<e;a++)d[a]=g[a-b];else for(g=d.slice(b,c),g.sort(a),a=b;a<c;a++)d[a]=g[a-b];this.Jc();return this};J.prototype.reverse=J.prototype.reverse=function(){this.G&&z.oa(this);this.o.reverse();this.Jc();return this};z.w(J,{count:"count"},function(){return this.o.length});z.w(J,{size:"size"},function(){return this.o.length});z.w(J,{length:"length"},function(){return this.o.length});z.w(J,{i:"iterator"},function(){if(0>=this.o.length)return Pa;var a=this.ec;return null!==a?(a.reset(),a):new Ta(this)});
z.w(J,{kn:"iteratorBackwards"},function(){if(0>=this.o.length)return Pa;var a=this.Mj;return null!==a?(a.reset(),a):new Ua(this)});function Wa(a){this.Zh=a;this.reset()}z.Yd(Wa,{key:!0,value:!0});z.w(Wa,{i:"iterator"},function(){return this});Wa.prototype.reset=Wa.prototype.reset=function(){var a=this.Zh;a.ec=null;this.nb=a.H;this.lb=null};
Wa.prototype.next=Wa.prototype.hasNext=Wa.prototype.next=function(){var a=this.Zh;if(a.H!==this.nb){if(null===this.key)return!1;z.Ta(a)}var b=this.lb,b=null===b?a.Ka:b.bb;if(null!==b)return this.lb=b,this.value=b.value,this.key=b.key,!0;this.Nf();return!1};Wa.prototype.first=Wa.prototype.first=function(){var a=this.Zh;this.nb=a.H;a=a.Ka;if(null!==a){this.lb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Wa.prototype.any=function(a){var b=this.Zh;b.ec=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(a(d.value))return!0;b.H!==c&&z.Ta(b);d=d.bb}return!1};Wa.prototype.all=function(a){var b=this.Zh;b.ec=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(!a(d.value))return!1;b.H!==c&&z.Ta(b);d=d.bb}return!0};Wa.prototype.each=function(a){var b=this.Zh;b.ec=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;)a(d.value),b.H!==c&&z.Ta(b),d=d.bb;return this};
Wa.prototype.map=function(a){var b=this.Zh;b.ec=null;for(var c=new J,d=b.H,e=b.Ka;null!==e;)c.add(a(e.value)),b.H!==d&&z.Ta(b),e=e.bb;return c.i};Wa.prototype.filter=function(a){var b=this.Zh;b.ec=null;for(var c=new J(b.ba),d=b.H,e=b.Ka;null!==e;){var g=e.value;a(g)&&c.add(g);b.H!==d&&z.Ta(b);e=e.bb}return c.i};Wa.prototype.concat=function(a){this.Zh.ec=null;return new Sa(this,a.i)};z.w(Wa,{count:"count"},function(){return this.Zh.sd});
Wa.prototype.Nf=function(){this.value=this.key=null;this.nb=-1;this.Zh.ec=this};Wa.prototype.toString=function(){return null!==this.lb?"SetIterator@"+this.lb.value:"SetIterator"};
function K(a){z.kc(this);this.G=!1;void 0===a||null===a?this.ba=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.ba=a:z.ka(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.ba=a===Object?"object":a===String?"string":a===Number?"number":a:z.ka(a,"null, a primitive type name, or a class type","Set constructor: type");this.td={};this.sd=0;this.ec=null;this.H=0;this.Uh=this.Ka=null}z.ia("Set",K);
K.prototype.Zg=function(a){null!==this.ba&&("string"===typeof this.ba?typeof a===this.ba&&null!==a||z.ic(a,this.ba):a instanceof this.ba||z.ic(a,this.ba))};K.prototype.Jc=function(){var a=this.H;a++;999999999<a&&(a=0);this.H=a};K.prototype.freeze=K.prototype.freeze=function(){this.G=!0;return this};K.prototype.thaw=K.prototype.Wa=function(){this.G=!1;return this};K.prototype.toString=function(){return"Set("+z.getTypeName(this.ba)+")#"+z.nd(this)};
K.prototype.add=K.prototype.add=function(a){if(null===a)return!1;u&&this.Zg(a);this.G&&z.oa(this,a);var b=a;z.Za(a)&&(b=z.It(a));return void 0===this.td[b]?(this.sd++,a=new Ya(a,a),this.td[b]=a,b=this.Uh,null===b?this.Ka=a:(a.Go=b,b.bb=a),this.Uh=a,this.Jc(),!0):!1};K.prototype.addAll=K.prototype.$c=function(a){if(null===a)return this;this.G&&z.oa(this);if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++)this.add(z.Ya(a,c));else for(a=a.i;a.next();)this.add(a.value);return this};
K.prototype.contains=K.prototype.has=K.prototype.contains=function(a){if(null===a)return!1;u&&this.Zg(a);var b=a;return z.Za(a)&&(b=z.nd(a),void 0===b)?!1:void 0!==this.td[b]};K.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(!this.contains(a.value))return!1;return!0};K.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(this.contains(a.value))return!0;return!1};
K.prototype.first=K.prototype.first=function(){var a=this.Ka;return null===a?null:a.value};K.prototype.any=function(a){for(var b=this.H,c=this.Ka;null!==c;){if(a(c.value))return!0;this.H!==b&&z.Ta(this);c=c.bb}return!1};K.prototype.all=function(a){for(var b=this.H,c=this.Ka;null!==c;){if(!a(c.value))return!1;this.H!==b&&z.Ta(this);c=c.bb}return!0};K.prototype.each=function(a){for(var b=this.H,c=this.Ka;null!==c;)a(c.value),this.H!==b&&z.Ta(this),c=c.bb;return this};
K.prototype.map=function(a){for(var b=new K,c=this.H,d=this.Ka;null!==d;)b.add(a(d.value)),this.H!==c&&z.Ta(this),d=d.bb;return b};K.prototype.filter=function(a){for(var b=new K(this.ba),c=this.H,d=this.Ka;null!==d;){var e=d.value;a(e)&&b.add(e);this.H!==c&&z.Ta(this);d=d.bb}return b};K.prototype.concat=function(a){return this.copy().$c(a)};
K.prototype.remove=K.prototype["delete"]=K.prototype.remove=function(a){if(null===a)return!1;u&&this.Zg(a);this.G&&z.oa(this,a);var b=a;if(z.Za(a)&&(b=z.nd(a),void 0===b))return!1;a=this.td[b];if(void 0===a)return!1;var c=a.bb,d=a.Go;null!==c&&(c.Go=d);null!==d&&(d.bb=c);this.Ka===a&&(this.Ka=c);this.Uh===a&&(this.Uh=d);delete this.td[b];this.sd--;this.Jc();return!0};
K.prototype.removeAll=K.prototype.IA=function(a){if(null===a)return this;this.G&&z.oa(this);if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++)this.remove(z.Ya(a,c));else for(a=a.i;a.next();)this.remove(a.value);return this};K.prototype.retainAll=function(a){if(null===a||0===this.count)return this;this.G&&z.oa(this);var b=new K(this.ba);b.$c(a);a=[];for(var c=this.i;c.next();){var d=c.value;b.contains(d)||a.push(d)}this.IA(a);return this};
K.prototype.clear=K.prototype.clear=function(){this.G&&z.oa(this);this.td={};this.sd=0;this.Uh=this.Ka=null;this.Jc()};K.prototype.copy=function(){var a=new K(this.ba),b=this.td,c;for(c in b)a.add(b[c].value);return a};K.prototype.toArray=K.prototype.jc=function(){var a=Array(this.sd),b=this.td,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};K.prototype.toList=function(){var a=new J(this.ba),b=this.td,c;for(c in b)a.add(b[c].value);return a};z.w(K,{count:"count"},function(){return this.sd});
z.w(K,{size:"size"},function(){return this.sd});z.w(K,{i:"iterator"},function(){if(0>=this.sd)return Pa;var a=this.ec;return null!==a?(a.reset(),a):new Wa(this)});function Za(a){this.Na=a;this.reset()}z.Yd(Za,{key:!0,value:!0});z.w(Za,{i:"iterator"},function(){return this});Za.prototype.reset=Za.prototype.reset=function(){this.nb=this.Na.H;this.lb=null};
Za.prototype.next=Za.prototype.hasNext=Za.prototype.next=function(){var a=this.Na;if(a.H!==this.nb){if(null===this.key)return!1;z.Ta(a)}var b=this.lb,b=null===b?a.Ka:b.bb;if(null!==b)return this.lb=b,this.value=this.key=a=b.key,!0;this.Nf();return!1};Za.prototype.first=Za.prototype.first=function(){var a=this.Na;this.nb=a.H;a=a.Ka;return null!==a?(this.lb=a,this.value=this.key=a=a.key):null};
Za.prototype.any=function(a){var b=this.Na,c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(a(d.key))return!0;b.H!==c&&z.Ta(b);d=d.bb}return!1};Za.prototype.all=function(a){var b=this.Na,c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(!a(d.key))return!1;b.H!==c&&z.Ta(b);d=d.bb}return!0};Za.prototype.each=function(a){var b=this.Na,c=b.H;this.lb=null;for(var d=b.Ka;null!==d;)a(d.key),b.H!==c&&z.Ta(b),d=d.bb;return this};
Za.prototype.map=function(a){var b=this.Na,c=b.H;this.lb=null;for(var d=new J,e=b.Ka;null!==e;)d.add(a(e.key)),b.H!==c&&z.Ta(b),e=e.bb;return d.i};Za.prototype.filter=function(a){var b=this.Na,c=b.H;this.lb=null;for(var d=new J(b.bf),e=b.Ka;null!==e;){var g=e.key;a(g)&&d.add(g);b.H!==c&&z.Ta(b);e=e.bb}return d.i};Za.prototype.concat=function(a){return new Sa(this,a.i)};z.w(Za,{count:"count"},function(){return this.Na.sd});Za.prototype.Nf=function(){this.value=this.key=null;this.nb=-1};
Za.prototype.toString=function(){return null!==this.lb?"MapKeySetIterator@"+this.lb.value:"MapKeySetIterator"};function $a(a){z.kc(this);this.G=!0;this.Na=a}z.Ra($a,K);$a.prototype.freeze=function(){return this};$a.prototype.Wa=function(){return this};$a.prototype.toString=function(){return"MapKeySet("+this.Na.toString()+")"};$a.prototype.add=$a.prototype.set=$a.prototype.add=function(){z.k("This Set is read-only: "+this.toString());return!1};
$a.prototype.contains=$a.prototype.has=$a.prototype.contains=function(a){return this.Na.contains(a)};$a.prototype.remove=$a.prototype["delete"]=$a.prototype.remove=function(){z.k("This Set is read-only: "+this.toString());return!1};$a.prototype.clear=$a.prototype.clear=function(){z.k("This Set is read-only: "+this.toString())};$a.prototype.first=$a.prototype.first=function(){var a=this.Na.Ka;return null!==a?a.key:null};
$a.prototype.any=function(a){for(var b=this.Na.Ka;null!==b;){if(a(b.key))return!0;b=b.bb}return!1};$a.prototype.all=function(a){for(var b=this.Na.Ka;null!==b;){if(!a(b.key))return!1;b=b.bb}return!0};$a.prototype.each=function(a){for(var b=this.Na.Ka;null!==b;)a(b.key),b=b.bb;return this};$a.prototype.map=function(a){for(var b=new K,c=this.Na.Ka;null!==c;)b.add(a(c.key)),c=c.bb;return b};
$a.prototype.filter=function(a){for(var b=new K(this.Na.bf),c=this.Na.Ka;null!==c;){var d=c.key;a(d)&&b.add(d);c=c.bb}return b};$a.prototype.concat=function(a){return this.UF().$c(a)};$a.prototype.copy=function(){return new $a(this.Na)};$a.prototype.toSet=$a.prototype.UF=function(){var a=new K(this.Na.bf),b=this.Na.td,c;for(c in b)a.add(b[c].key);return a};$a.prototype.toArray=$a.prototype.jc=function(){var a=this.Na.td,b=Array(this.Na.sd),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};
$a.prototype.toList=function(){var a=new J(this.ba),b=this.Na.td,c;for(c in b)a.add(b[c].key);return a};z.w($a,{count:"count"},function(){return this.Na.sd});z.w($a,{size:"size"},function(){return this.Na.sd});z.w($a,{i:"iterator"},function(){return 0>=this.Na.sd?Pa:new Za(this.Na)});function ab(a){this.Na=a;this.reset()}z.Yd(ab,{key:!0,value:!0});z.w(ab,{i:"iterator"},function(){return this});ab.prototype.reset=ab.prototype.reset=function(){var a=this.Na;a.Nj=null;this.nb=a.H;this.lb=null};
ab.prototype.next=ab.prototype.hasNext=ab.prototype.next=function(){var a=this.Na;if(a.H!==this.nb){if(null===this.key)return!1;z.Ta(a)}var b=this.lb,b=null===b?a.Ka:b.bb;if(null!==b)return this.lb=b,this.value=b.value,this.key=b.key,!0;this.Nf();return!1};ab.prototype.first=ab.prototype.first=function(){var a=this.Na;this.nb=a.H;a=a.Ka;if(null!==a){this.lb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
ab.prototype.any=function(a){var b=this.Na;b.Nj=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(a(d.value))return!0;b.H!==c&&z.Ta(b);d=d.bb}return!1};ab.prototype.all=function(a){var b=this.Na;b.Nj=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(!a(d.value))return!1;b.H!==c&&z.Ta(b);d=d.bb}return!0};ab.prototype.each=function(a){var b=this.Na;b.Nj=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;)a(d.value),b.H!==c&&z.Ta(b),d=d.bb;return this};
ab.prototype.map=function(a){var b=this.Na;b.Nj=null;var c=b.H;this.lb=null;for(var d=new J,e=b.Ka;null!==e;)d.add(a(e.value)),b.H!==c&&z.Ta(b),e=e.bb;return d.i};ab.prototype.filter=function(a){var b=this.Na;b.Nj=null;var c=b.H;this.lb=null;for(var d=new J(b.bf),e=b.Ka;null!==e;){var g=e.value;a(g)&&d.add(g);b.H!==c&&z.Ta(b);e=e.bb}return d.i};ab.prototype.concat=function(a){this.Na.Nj=null;return new Sa(this,a.i)};z.w(ab,{count:"count"},function(){return this.Na.sd});
ab.prototype.Nf=function(){this.value=this.key=null;this.nb=-1;this.Na.Nj=this};ab.prototype.toString=function(){return null!==this.lb?"MapValueSetIterator@"+this.lb.value:"MapValueSetIterator"};function Ya(a,b){this.key=a;this.value=b;this.Go=this.bb=null}z.Yd(Ya,{key:!0,value:!0});Ya.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function bb(a){this.Na=a;this.reset()}z.Yd(bb,{key:!0,value:!0});z.w(bb,{i:"iterator"},function(){return this});
bb.prototype.reset=bb.prototype.reset=function(){var a=this.Na;a.ec=null;this.nb=a.H;this.lb=null};bb.prototype.next=bb.prototype.hasNext=bb.prototype.next=function(){var a=this.Na;if(a.H!==this.nb){if(null===this.key)return!1;z.Ta(a)}var b=this.lb,b=null===b?a.Ka:b.bb;if(null!==b)return this.lb=b,this.key=b.key,this.value=b.value,!0;this.Nf();return!1};
bb.prototype.first=bb.prototype.first=function(){var a=this.Na;this.nb=a.H;a=a.Ka;return null!==a?(this.lb=a,this.key=a.key,this.value=a.value,a):null};bb.prototype.any=function(a){var b=this.Na;b.ec=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(a(d))return!0;b.H!==c&&z.Ta(b);d=d.bb}return!1};bb.prototype.all=function(a){var b=this.Na;b.ec=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;){if(!a(d))return!1;b.H!==c&&z.Ta(b);d=d.bb}return!0};
bb.prototype.each=function(a){var b=this.Na;b.ec=null;var c=b.H;this.lb=null;for(var d=b.Ka;null!==d;)a(d),b.H!==c&&z.Ta(b),d=d.bb;return this};bb.prototype.map=function(a){var b=this.Na;b.ec=null;var c=b.H;this.lb=null;for(var d=new J,e=b.Ka;null!==e;)d.add(a(e)),b.H!==c&&z.Ta(b),e=e.bb;return d.i};bb.prototype.filter=function(a){var b=this.Na;b.ec=null;var c=b.H;this.lb=null;for(var d=new J,e=b.Ka;null!==e;)a(e)&&d.add(e),b.H!==c&&z.Ta(b),e=e.bb;return d.i};
bb.prototype.concat=function(a){this.Na.ec=null;return new Sa(this,a.i)};z.w(bb,{count:"count"},function(){return this.Na.sd});bb.prototype.Nf=function(){this.value=this.key=null;this.nb=-1;this.Na.ec=this};bb.prototype.toString=function(){return null!==this.lb?"MapIterator@"+this.lb:"MapIterator"};
function na(a,b){z.kc(this);this.G=!1;void 0===a||null===a?this.bf=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.bf=a:z.ka(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.bf=a===Object?"object":a===String?"string":a===Number?"number":a:z.ka(a,"null, a primitive type name, or a class type","Map constructor: keytype");void 0===b||null===b?this.gi=null:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===
b||"function"===b?this.gi=b:z.ka(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.gi=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:z.ka(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.td={};this.sd=0;this.Nj=this.ec=null;this.H=0;this.Uh=this.Ka=null}z.ia("Map",na);
function cb(a,b){null!==a.bf&&("string"===typeof a.bf?typeof b===a.bf&&null!==b||z.ic(b,a.bf):b instanceof a.bf||z.ic(b,a.bf))}na.prototype.Jc=function(){var a=this.H;a++;999999999<a&&(a=0);this.H=a};na.prototype.freeze=na.prototype.freeze=function(){this.G=!0;return this};na.prototype.thaw=na.prototype.Wa=function(){this.G=!1;return this};na.prototype.toString=function(){return"Map("+z.getTypeName(this.bf)+","+z.getTypeName(this.gi)+")#"+z.nd(this)};
na.prototype.add=na.prototype.set=na.prototype.add=function(a,b){u&&(cb(this,a),null!==this.gi&&("string"===typeof this.gi?typeof b===this.gi&&null!==b||z.ic(b,this.gi):b instanceof this.gi||z.ic(b,this.gi)));this.G&&z.oa(this,a);var c=a;z.Za(a)&&(c=z.It(a));var d=this.td[c];if(void 0===d)return this.sd++,d=new Ya(a,b),this.td[c]=d,c=this.Uh,null===c?this.Ka=d:(d.Go=c,c.bb=d),this.Uh=d,this.Jc(),!0;d.value=b;return!1};
na.prototype.addAll=na.prototype.$c=function(a){if(null===a)return this;if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++){var d=z.Ya(a,c);this.add(d.key,d.value)}else for(a=a.i;a.next();)this.add(a.key,a.value);return this};na.prototype.first=na.prototype.first=function(){return this.Ka};na.prototype.any=function(a){for(var b=this.H,c=this.Ka;null!==c;){if(a(c))return!0;this.H!==b&&z.Ta(this);c=c.bb}return!1};
na.prototype.all=function(a){for(var b=this.H,c=this.Ka;null!==c;){if(!a(c))return!1;this.H!==b&&z.Ta(this);c=c.bb}return!0};na.prototype.each=function(a){for(var b=this.H,c=this.Ka;null!==c;)a(c),this.H!==b&&z.Ta(this),c=c.bb;return this};na.prototype.map=function(a){for(var b=new na(this.bf),c=this.H,d=this.Ka;null!==d;)b.add(d.key,a(d)),this.H!==c&&z.Ta(this),d=d.bb;return b};
na.prototype.filter=function(a){for(var b=new na(this.bf,this.gi),c=this.H,d=this.Ka;null!==d;)a(d)&&b.add(d.key,d.value),this.H!==c&&z.Ta(this),d=d.bb;return b};na.prototype.concat=function(a){return this.copy().$c(a)};na.prototype.contains=na.prototype.has=na.prototype.contains=function(a){u&&cb(this,a);var b=a;return z.Za(a)&&(b=z.nd(a),void 0===b)?!1:void 0!==this.td[b]};
na.prototype.getValue=na.prototype.get=na.prototype.na=function(a){u&&cb(this,a);var b=a;if(z.Za(a)&&(b=z.nd(a),void 0===b))return null;a=this.td[b];return void 0===a?null:a.value};
na.prototype.remove=na.prototype["delete"]=na.prototype.remove=function(a){if(null===a)return!1;u&&cb(this,a);this.G&&z.oa(this,a);var b=a;if(z.Za(a)&&(b=z.nd(a),void 0===b))return!1;a=this.td[b];if(void 0===a)return!1;var c=a.bb,d=a.Go;null!==c&&(c.Go=d);null!==d&&(d.bb=c);this.Ka===a&&(this.Ka=c);this.Uh===a&&(this.Uh=d);delete this.td[b];this.sd--;this.Jc();return!0};na.prototype.clear=na.prototype.clear=function(){this.G&&z.oa(this);this.td={};this.sd=0;this.Uh=this.Ka=null;this.Jc()};
na.prototype.copy=function(){var a=new na(this.bf,this.gi),b=this.td,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};na.prototype.toArray=na.prototype.jc=function(){var a=this.td,b=Array(this.sd),c=0,d;for(d in a){var e=a[d];b[c]=new Ya(e.key,e.value);c++}return b};na.prototype.toKeySet=na.prototype.vj=function(){return new $a(this)};z.w(na,{count:"count"},function(){return this.sd});z.w(na,{size:"size"},function(){return this.sd});
z.w(na,{i:"iterator"},function(){if(0>=this.count)return Pa;var a=this.ec;return null!==a?(a.reset(),a):new bb(this)});z.w(na,{TE:"iteratorKeys"},function(){return 0>=this.count?Pa:new Za(this)});z.w(na,{UE:"iteratorValues"},function(){if(0>=this.count)return Pa;var a=this.Nj;return null!==a?(a.reset(),a):new ab(this)});function N(a,b){void 0===a?this.K=this.J=0:"number"===typeof a&&"number"===typeof b?(this.J=a,this.K=b):z.k("Invalid arguments to Point constructor: "+a+", "+b);this.G=!1}
z.ia("Point",N);z.ji(N);z.Yd(N,{x:!0,y:!0});N.prototype.assign=function(a){this.J=a.J;this.K=a.K};N.prototype.setTo=N.prototype.n=function(a,b){u&&(z.g(a,"number",N,"setTo:x"),z.g(b,"number",N,"setTo:y"));this.J=a;this.K=b;return this};N.prototype.set=N.prototype.set=function(a){u&&z.l(a,N,N,"set:p");this.Pa();this.J=a.J;this.K=a.K;return this};N.prototype.copy=function(){var a=new N;a.J=this.J;a.K=this.K;return a};f=N.prototype;f.La=function(){this.G=!0;Object.freeze(this);return this};
f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.G=!0;return this};f.Wa=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.G=!1;return this};f.Pa=function(a){if(this.G){var b="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
N.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new N(c,e)}return new N};N.stringify=function(a){return a instanceof N?a.x.toString()+" "+a.y.toString():a.toString()};N.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};N.prototype.equals=N.prototype.N=function(a){return a instanceof N?this.J===a.x&&this.K===a.y:!1};
N.prototype.equalTo=N.prototype.Xw=function(a,b){return this.J===a&&this.K===b};N.prototype.equalsApprox=N.prototype.Mc=function(a){return eb(this.J,a.x)&&eb(this.K,a.y)};N.prototype.add=N.prototype.add=function(a){u&&z.l(a,N,N,"add:p");this.Pa();this.J+=a.x;this.K+=a.y;return this};N.prototype.subtract=N.prototype.xu=function(a){u&&z.l(a,N,N,"subtract:p");this.Pa();this.J-=a.x;this.K-=a.y;return this};
N.prototype.offset=N.prototype.offset=function(a,b){u&&(z.p(a,N,"offset:dx"),z.p(b,N,"offset:dy"));this.Pa();this.J+=a;this.K+=b;return this};N.prototype.rotate=N.prototype.rotate=function(a){u&&z.p(a,N,"rotate:angle");this.Pa();if(0===a)return this;var b=this.J,c=this.K;if(0===b&&0===c)return this;var d=0,e=0;360<=a?a-=360:0>a&&(a+=360);90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(a=a*Math.PI/180,d=Math.cos(a),e=Math.sin(a));this.J=d*b-e*c;this.K=e*b+d*c;return this};
N.prototype.scale=N.prototype.scale=function(a,b){u&&(z.p(a,N,"scale:sx"),z.p(b,N,"scale:sy"));this.J*=a;this.K*=b;return this};N.prototype.distanceSquaredPoint=N.prototype.Af=function(a){u&&z.l(a,N,N,"distanceSquaredPoint:p");var b=a.x-this.J;a=a.y-this.K;return b*b+a*a};N.prototype.distanceSquared=N.prototype.jp=function(a,b){u&&(z.p(a,N,"distanceSquared:px"),z.p(b,N,"distanceSquared:py"));var c=a-this.J,d=b-this.K;return c*c+d*d};
N.prototype.normalize=N.prototype.normalize=function(){this.Pa();var a=this.J,b=this.K,c=Math.sqrt(a*a+b*b);0<c&&(this.J=a/c,this.K=b/c);return this};N.prototype.directionPoint=N.prototype.Ec=function(a){u&&z.l(a,N,N,"directionPoint:p");return fb(a.x-this.J,a.y-this.K)};N.prototype.direction=N.prototype.direction=function(a,b){u&&(z.p(a,N,"direction:px"),z.p(b,N,"direction:py"));return fb(a-this.J,b-this.K)};
function fb(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}N.prototype.projectOntoLineSegment=function(a,b,c,d){u&&(z.p(a,N,"projectOntoLineSegment:px"),z.p(b,N,"projectOntoLineSegment:py"),z.p(c,N,"projectOntoLineSegment:qx"),z.p(d,N,"projectOntoLineSegment:qy"));ib(a,b,c,d,this.J,this.K,this);return this};
N.prototype.projectOntoLineSegmentPoint=function(a,b){u&&(z.l(a,N,N,"projectOntoLineSegmentPoint:p"),z.l(b,N,N,"projectOntoLineSegmentPoint:q"));ib(a.x,a.y,b.x,b.y,this.J,this.K,this);return this};N.prototype.snapToGrid=function(a,b,c,d){u&&(z.p(a,N,"snapToGrid:originx"),z.p(b,N,"snapToGrid:originy"),z.p(c,N,"snapToGrid:cellwidth"),z.p(d,N,"snapToGrid:cellheight"));jb(this.J,this.K,a,b,c,d,this);return this};
N.prototype.snapToGridPoint=function(a,b){u&&(z.l(a,N,N,"snapToGridPoint:p"),z.l(b,Ea,N,"snapToGridPoint:q"));jb(this.J,this.K,a.x,a.y,b.width,b.height,this);return this};N.prototype.setRectSpot=N.prototype.ru=function(a,b){u&&(z.l(a,w,N,"setRectSpot:r"),z.l(b,Q,N,"setRectSpot:spot"));this.Pa();this.J=a.x+b.x*a.width+b.offsetX;this.K=a.y+b.y*a.height+b.offsetY;return this};
N.prototype.setSpot=N.prototype.tu=function(a,b,c,d,e){u&&(z.p(a,N,"setSpot:x"),z.p(b,N,"setSpot:y"),z.p(c,N,"setSpot:w"),z.p(d,N,"setSpot:h"),(0>c||0>d)&&z.k("Point.setSpot:Width and height cannot be negative"),z.l(e,Q,N,"setSpot:spot"));this.Pa();this.J=a+e.x*c+e.offsetX;this.K=b+e.y*d+e.offsetY;return this};N.prototype.transform=function(a){u&&z.l(a,Fa,N,"transform:t");a.Cb(this);return this};function tb(a,b){u&&z.l(b,Fa,N,"transformInverted:t");b.li(a);return a}var ub;
N.distanceLineSegmentSquared=ub=function(a,b,c,d,e,g){u&&(z.p(a,N,"distanceLineSegmentSquared:px"),z.p(b,N,"distanceLineSegmentSquared:py"),z.p(c,N,"distanceLineSegmentSquared:ax"),z.p(d,N,"distanceLineSegmentSquared:ay"),z.p(e,N,"distanceLineSegmentSquared:bx"),z.p(g,N,"distanceLineSegmentSquared:by"));var h=e-c,k=g-d,l=h*h+k*k;c-=a;d-=b;var m=-c*h-d*k;if(0>=m||m>=l)return h=e-a,k=g-b,Math.min(c*c+d*d,h*h+k*k);a=h*d-k*c;return a*a/l};var vb;
N.distanceSquared=vb=function(a,b,c,d){u&&(z.p(a,N,"distanceSquared:px"),z.p(b,N,"distanceSquared:py"),z.p(c,N,"distanceSquared:qx"),z.p(d,N,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var wb;
N.direction=wb=function(a,b,c,d){u&&(z.p(a,N,"direction:px"),z.p(b,N,"direction:py"),z.p(c,N,"direction:qx"),z.p(d,N,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};z.defineProperty(N,{x:"x"},function(){return this.J},function(a){this.Pa(a);u&&z.g(a,"number",N,"x");this.J=a});
z.defineProperty(N,{y:"y"},function(){return this.K},function(a){this.Pa(a);u&&z.g(a,"number",N,"y");this.K=a});N.prototype.isReal=N.prototype.F=function(){return isFinite(this.x)&&isFinite(this.y)};function Ea(a,b){void 0===a?this.Ea=this.Fa=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.Fa=a,this.Ea=b):z.k("Invalid arguments to Size constructor: "+a+", "+b);this.G=!1}z.ia("Size",Ea);z.ji(Ea);z.Yd(Ea,{width:!0,height:!0});
Ea.prototype.assign=function(a){this.Fa=a.Fa;this.Ea=a.Ea};Ea.prototype.setTo=Ea.prototype.n=function(a,b){u&&(z.g(a,"number",Ea,"setTo:w"),z.g(b,"number",Ea,"setTo:h"),0>a&&z.ka(a,">= 0",Ea,"setTo:w"),0>b&&z.ka(b,">= 0",Ea,"setTo:h"));this.Fa=a;this.Ea=b;return this};Ea.prototype.set=Ea.prototype.set=function(a){u&&z.l(a,Ea,Ea,"set:s");this.Pa();this.Fa=a.Fa;this.Ea=a.Ea;return this};Ea.prototype.copy=function(){var a=new Ea;a.Fa=this.Fa;a.Ea=this.Ea;return a};f=Ea.prototype;
f.La=function(){this.G=!0;Object.freeze(this);return this};f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.G=!0;return this};f.Wa=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.G=!1;return this};f.Pa=function(a){if(this.G){var b="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
Ea.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new Ea(c,e)}return new Ea};Ea.stringify=function(a){return a instanceof Ea?a.width.toString()+" "+a.height.toString():a.toString()};Ea.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
Ea.prototype.equals=Ea.prototype.N=function(a){return a instanceof Ea?this.Fa===a.width&&this.Ea===a.height:!1};Ea.prototype.equalTo=Ea.prototype.Xw=function(a,b){return this.Fa===a&&this.Ea===b};Ea.prototype.equalsApprox=Ea.prototype.Mc=function(a){return eb(this.Fa,a.width)&&eb(this.Ea,a.height)};z.defineProperty(Ea,{width:"width"},function(){return this.Fa},function(a){this.Pa(a);u&&z.g(a,"number",Ea,"width");0>a&&z.ka(a,">= 0",Ea,"width");this.Fa=a});
z.defineProperty(Ea,{height:"height"},function(){return this.Ea},function(a){this.Pa(a);u&&z.g(a,"number",Ea,"height");0>a&&z.ka(a,">= 0",Ea,"height");this.Ea=a});Ea.prototype.isReal=Ea.prototype.F=function(){return isFinite(this.width)&&isFinite(this.height)};
function w(a,b,c,d){void 0===a?this.Ea=this.Fa=this.K=this.J=0:a instanceof N?b instanceof N?(this.J=Math.min(a.J,b.J),this.K=Math.min(a.K,b.K),this.Fa=Math.abs(a.J-b.J),this.Ea=Math.abs(a.K-b.K)):b instanceof Ea?(this.J=a.J,this.K=a.K,this.Fa=b.Fa,this.Ea=b.Ea):z.k("Incorrect arguments supplied to Rect constructor"):"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.J=a,this.K=b,this.Fa=c,this.Ea=d):z.k("Invalid arguments to Rect constructor: "+
a+", "+b+", "+c+", "+d);this.G=!1}z.ia("Rect",w);z.ji(w);z.Yd(w,{x:!0,y:!0,width:!0,height:!0});w.prototype.assign=function(a){this.J=a.J;this.K=a.K;this.Fa=a.Fa;this.Ea=a.Ea};function yb(a,b,c){a.Fa=b;a.Ea=c}w.prototype.setTo=w.prototype.n=function(a,b,c,d){u&&(z.g(a,"number",w,"setTo:x"),z.g(b,"number",w,"setTo:y"),z.g(c,"number",w,"setTo:w"),z.g(d,"number",w,"setTo:h"),0>c&&z.ka(c,">= 0",w,"setTo:w"),0>d&&z.ka(d,">= 0",w,"setTo:h"));this.J=a;this.K=b;this.Fa=c;this.Ea=d;return this};
w.prototype.set=w.prototype.set=function(a){u&&z.l(a,w,w,"set:r");this.Pa();this.J=a.J;this.K=a.K;this.Fa=a.Fa;this.Ea=a.Ea;return this};w.prototype.setPoint=w.prototype.Kf=function(a){u&&z.l(a,N,w,"setPoint:p");this.Pa();this.J=a.J;this.K=a.K;return this};w.prototype.setSize=function(a){u&&z.l(a,Ea,w,"setSize:s");this.Pa();this.Fa=a.Fa;this.Ea=a.Ea;return this};w.prototype.copy=function(){var a=new w;a.J=this.J;a.K=this.K;a.Fa=this.Fa;a.Ea=this.Ea;return a};f=w.prototype;
f.La=function(){this.G=!0;Object.freeze(this);return this};f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.G=!0;return this};f.Wa=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.G=!1;return this};f.Pa=function(a){if(this.G){var b="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
w.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var h=0;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return new w(c,e,g,h)}return new w};w.stringify=function(a){return a instanceof w?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
w.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};w.prototype.equals=w.prototype.N=function(a){return a instanceof w?this.J===a.x&&this.K===a.y&&this.Fa===a.width&&this.Ea===a.height:!1};w.prototype.equalTo=w.prototype.Xw=function(a,b,c,d){return this.J===a&&this.K===b&&this.Fa===c&&this.Ea===d};w.prototype.equalsApprox=w.prototype.Mc=function(a){return eb(this.J,a.x)&&eb(this.K,a.y)&&eb(this.Fa,a.width)&&eb(this.Ea,a.height)};
w.prototype.containsPoint=w.prototype.Ma=function(a){u&&z.l(a,N,w,"containsPoint:p");return this.J<=a.x&&this.J+this.Fa>=a.x&&this.K<=a.y&&this.K+this.Ea>=a.y};w.prototype.containsRect=w.prototype.nk=function(a){u&&z.l(a,w,w,"containsRect:r");return this.J<=a.x&&a.x+a.width<=this.J+this.Fa&&this.K<=a.y&&a.y+a.height<=this.K+this.Ea};
w.prototype.contains=w.prototype.contains=function(a,b,c,d){u?(z.p(a,w,"contains:x"),z.p(b,w,"contains:y"),void 0===c?c=0:z.p(c,w,"contains:w"),void 0===d?d=0:z.p(d,w,"contains:h"),(0>c||0>d)&&z.k("Rect.contains:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0));return this.J<=a&&a+c<=this.J+this.Fa&&this.K<=b&&b+d<=this.K+this.Ea};w.prototype.reset=function(){this.Pa();this.Ea=this.Fa=this.K=this.J=0};
w.prototype.offset=w.prototype.offset=function(a,b){u&&(z.p(a,w,"offset:dx"),z.p(b,w,"offset:dy"));this.Pa();this.J+=a;this.K+=b;return this};w.prototype.inflate=w.prototype.bg=function(a,b){u&&(z.p(a,w,"inflate:w"),z.p(b,w,"inflate:h"));return zb(this,b,a,b,a)};w.prototype.addMargin=w.prototype.Dw=function(a){u&&z.l(a,Db,w,"addMargin:m");return zb(this,a.top,a.right,a.bottom,a.left)};
w.prototype.subtractMargin=w.prototype.qJ=function(a){u&&z.l(a,Db,w,"subtractMargin:m");return zb(this,-a.top,-a.right,-a.bottom,-a.left)};w.prototype.grow=function(a,b,c,d){u&&(z.p(a,w,"grow:t"),z.p(b,w,"grow:r"),z.p(c,w,"grow:b"),z.p(d,w,"grow:l"));return zb(this,a,b,c,d)};function zb(a,b,c,d,e){a.Pa();var g=a.Fa;c+e<=-g?(a.J+=g/2,a.Fa=0):(a.J-=e,a.Fa+=c+e);c=a.Ea;b+d<=-c?(a.K+=c/2,a.Ea=0):(a.K-=b,a.Ea+=b+d);return a}
w.prototype.intersectRect=function(a){u&&z.l(a,w,w,"intersectRect:r");return Eb(this,a.x,a.y,a.width,a.height)};w.prototype.intersect=function(a,b,c,d){u&&(z.p(a,w,"intersect:x"),z.p(b,w,"intersect:y"),z.p(c,w,"intersect:w"),z.p(d,w,"intersect:h"),(0>c||0>d)&&z.k("Rect.intersect:Width and height cannot be negative"));return Eb(this,a,b,c,d)};
function Eb(a,b,c,d,e){a.Pa();var g=Math.max(a.J,b),h=Math.max(a.K,c);b=Math.min(a.J+a.Fa,b+d);c=Math.min(a.K+a.Ea,c+e);a.J=g;a.K=h;a.Fa=Math.max(0,b-g);a.Ea=Math.max(0,c-h);return a}w.prototype.intersectsRect=w.prototype.Jg=function(a){u&&z.l(a,w,w,"intersectsRect:r");return this.FE(a.x,a.y,a.width,a.height)};
w.prototype.intersects=w.prototype.FE=function(a,b,c,d){u&&(z.p(a,w,"intersects:x"),z.p(b,w,"intersects:y"),z.p(a,w,"intersects:w"),z.p(b,w,"intersects:h"),(0>c||0>d)&&z.k("Rect.intersects:Width and height cannot be negative"));var e=this.Fa,g=this.J;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return!1;a=this.Ea;c=this.K;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0};
function Gb(a,b){var c=a.Fa,d=b.width+10+10,e=a.J,g=b.x-10;if(e>d+g||g>c+e)return!1;c=a.Ea;d=b.height+10+10;e=a.K;g=b.y-10;return e>d+g||g>c+e?!1:!0}w.prototype.unionPoint=w.prototype.wj=function(a){u&&z.l(a,N,w,"unionPoint:p");return Hb(this,a.x,a.y,0,0)};w.prototype.unionRect=w.prototype.ri=function(a){u&&z.l(a,w,w,"unionRect:r");return Hb(this,a.J,a.K,a.Fa,a.Ea)};
w.prototype.union=w.prototype.cG=function(a,b,c,d){this.Pa();u?(z.p(a,w,"union:x"),z.p(b,w,"union:y"),void 0===c?c=0:z.p(c,w,"union:w"),void 0===d?d=0:z.p(d,w,"union:h"),(0>c||0>d)&&z.k("Rect.union:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0));return Hb(this,a,b,c,d)};function Hb(a,b,c,d,e){var g=Math.min(a.J,b),h=Math.min(a.K,c);b=Math.max(a.J+a.Fa,b+d);c=Math.max(a.K+a.Ea,c+e);a.J=g;a.K=h;a.Fa=b-g;a.Ea=c-h;return a}
w.prototype.setSpot=w.prototype.tu=function(a,b,c){u&&(z.p(a,w,"setSpot:x"),z.p(b,w,"setSpot:y"),z.l(c,Q,w,"setSpot:spot"));this.Pa();this.J=a-c.offsetX-c.x*this.Fa;this.K=b-c.offsetY-c.y*this.Ea;return this};var Ib;
w.contains=Ib=function(a,b,c,d,e,g,h,k){u?(z.p(a,w,"contains:rx"),z.p(b,w,"contains:ry"),z.p(c,w,"contains:rw"),z.p(d,w,"contains:rh"),z.p(e,w,"contains:x"),z.p(g,w,"contains:y"),void 0===h?h=0:z.p(h,w,"contains:w"),void 0===k?k=0:z.p(k,w,"contains:h"),(0>c||0>d||0>h||0>k)&&z.k("Rect.contains:Width and height cannot be negative")):(void 0===h&&(h=0),void 0===k&&(k=0));return a<=e&&e+h<=a+c&&b<=g&&g+k<=b+d};
w.intersects=function(a,b,c,d,e,g,h,k){u&&(z.p(a,w,"intersects:rx"),z.p(b,w,"intersects:ry"),z.p(c,w,"intersects:rw"),z.p(d,w,"intersects:rh"),z.p(e,w,"intersects:x"),z.p(g,w,"intersects:y"),z.p(h,w,"intersects:w"),z.p(k,w,"intersects:h"),(0>c||0>d||0>h||0>k)&&z.k("Rect.intersects:Width and height cannot be negative"));c+=a;h+=e;if(a>h||e>c)return!1;a=d+b;k+=g;return b>k||g>a?!1:!0};z.defineProperty(w,{x:"x"},function(){return this.J},function(a){this.Pa(a);u&&z.g(a,"number",w,"x");this.J=a});
z.defineProperty(w,{y:"y"},function(){return this.K},function(a){this.Pa(a);u&&z.g(a,"number",w,"y");this.K=a});z.defineProperty(w,{width:"width"},function(){return this.Fa},function(a){this.Pa(a);u&&z.g(a,"number",w,"width");0>a&&z.ka(a,">= 0",w,"width");this.Fa=a});z.defineProperty(w,{height:"height"},function(){return this.Ea},function(a){this.Pa(a);u&&z.g(a,"number",w,"height");0>a&&z.ka(a,">= 0",w,"height");this.Ea=a});
z.defineProperty(w,{left:"left"},function(){return this.J},function(a){this.Pa(a);u&&z.g(a,"number",w,"left");this.J=a});z.defineProperty(w,{top:"top"},function(){return this.K},function(a){this.Pa(a);u&&z.g(a,"number",w,"top");this.K=a});z.defineProperty(w,{right:"right"},function(){return this.J+this.Fa},function(a){this.Pa(a);u&&z.p(a,w,"right");this.J+=a-(this.J+this.Fa)});
z.defineProperty(w,{bottom:"bottom"},function(){return this.K+this.Ea},function(a){this.Pa(a);u&&z.p(a,w,"top");this.K+=a-(this.K+this.Ea)});z.defineProperty(w,{position:"position"},function(){return new N(this.J,this.K)},function(a){this.Pa(a);u&&z.l(a,N,w,"position");this.J=a.x;this.K=a.y});z.defineProperty(w,{size:"size"},function(){return new Ea(this.Fa,this.Ea)},function(a){this.Pa(a);u&&z.l(a,Ea,w,"size");this.Fa=a.width;this.Ea=a.height});
z.defineProperty(w,{yl:"center"},function(){return new N(this.J+this.Fa/2,this.K+this.Ea/2)},function(a){this.Pa(a);u&&z.l(a,N,w,"center");this.J=a.x-this.Fa/2;this.K=a.y-this.Ea/2});z.defineProperty(w,{ra:"centerX"},function(){return this.J+this.Fa/2},function(a){this.Pa(a);u&&z.p(a,w,"centerX");this.J=a-this.Fa/2});z.defineProperty(w,{za:"centerY"},function(){return this.K+this.Ea/2},function(a){this.Pa(a);u&&z.p(a,w,"centerY");this.K=a-this.Ea/2});
w.prototype.isReal=w.prototype.F=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};w.prototype.isEmpty=function(){return 0===this.width&&0===this.height};
function Db(a,b,c,d){void 0===a?this.gh=this.Yg=this.oh=this.ph=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):z.k("Invalid arguments to Margin constructor: "+a+", "+b+", "+c+", "+d);this.G=!1}z.ia("Margin",Db);z.ji(Db);z.Yd(Db,{top:!0,right:!0,bottom:!0,left:!0});Db.prototype.assign=function(a){this.ph=a.ph;this.oh=a.oh;this.Yg=a.Yg;this.gh=a.gh};
Db.prototype.setTo=Db.prototype.n=function(a,b,c,d){u&&(z.g(a,"number",Db,"setTo:t"),z.g(b,"number",Db,"setTo:r"),z.g(c,"number",Db,"setTo:b"),z.g(d,"number",Db,"setTo:l"));this.Pa();this.ph=a;this.oh=b;this.Yg=c;this.gh=d;return this};Db.prototype.set=Db.prototype.set=function(a){u&&z.l(a,Db,Db,"assign:m");this.Pa();this.ph=a.ph;this.oh=a.oh;this.Yg=a.Yg;this.gh=a.gh;return this};Db.prototype.copy=function(){var a=new Db;a.ph=this.ph;a.oh=this.oh;a.Yg=this.Yg;a.gh=this.gh;return a};f=Db.prototype;
f.La=function(){this.G=!0;Object.freeze(this);return this};f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.G=!0;return this};f.Wa=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.G=!1;return this};f.Pa=function(a){if(this.G){var b="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};
Db.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=NaN;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));if(isNaN(c))return new Db;for(var e=NaN;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));if(isNaN(e))return new Db(c);for(var g=NaN;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));if(isNaN(g))return new Db(c,e);for(var h=NaN;""===a[b];)b++;(d=a[b++])&&(h=parseFloat(d));return isNaN(h)?new Db(c,e):new Db(c,e,g,h)}return new Db};
Db.stringify=function(a){return a instanceof Db?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};Db.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};Db.prototype.equals=Db.prototype.N=function(a){return a instanceof Db?this.ph===a.top&&this.oh===a.right&&this.Yg===a.bottom&&this.gh===a.left:!1};
Db.prototype.equalTo=Db.prototype.Xw=function(a,b,c,d){return this.ph===a&&this.oh===b&&this.Yg===c&&this.gh===d};Db.prototype.equalsApprox=Db.prototype.Mc=function(a){return eb(this.ph,a.top)&&eb(this.oh,a.right)&&eb(this.Yg,a.bottom)&&eb(this.gh,a.left)};z.defineProperty(Db,{top:"top"},function(){return this.ph},function(a){this.Pa(a);u&&z.p(a,Db,"top");this.ph=a});z.defineProperty(Db,{right:"right"},function(){return this.oh},function(a){this.Pa(a);u&&z.p(a,Db,"right");this.oh=a});
z.defineProperty(Db,{bottom:"bottom"},function(){return this.Yg},function(a){this.Pa(a);u&&z.p(a,Db,"bottom");this.Yg=a});z.defineProperty(Db,{left:"left"},function(){return this.gh},function(a){this.Pa(a);u&&z.p(a,Db,"left");this.gh=a});Db.prototype.isReal=Db.prototype.F=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function Fa(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}z.ji(Fa);
z.Yd(Fa,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0});Fa.prototype.set=Fa.prototype.set=function(a){u&&z.l(a,Fa,Fa,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};Fa.prototype.copy=function(){var a=new Fa;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};Fa.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};
Fa.prototype.equals=Fa.prototype.N=function(a){return a instanceof Fa?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1};Fa.prototype.isIdentity=Fa.prototype.Pt=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};Fa.prototype.reset=Fa.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0;return this};
Fa.prototype.multiply=Fa.prototype.multiply=function(a){u&&z.l(a,Fa,Fa,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
Fa.prototype.multiplyInverted=Fa.prototype.vA=function(a){u&&z.l(a,Fa,Fa,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,h=b*(a.m21*a.dy-a.m22*a.dx),k=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*g;e=this.m12*e+this.m22*g;g=this.m11*h+this.m21*k+this.dx;h=this.m12*h+this.m22*k+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=g;this.dy=h;return this};
Fa.prototype.invert=Fa.prototype.fA=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),g=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
Fa.prototype.rotate=Fa.prototype.rotate=function(a,b,c){u&&(z.p(a,Fa,"rotate:angle"),z.p(b,Fa,"rotate:rx"),z.p(c,Fa,"rotate:ry"));360<=a?a-=360:0>a&&(a+=360);if(0===a)return this;this.translate(b,c);var d=0,e=0;90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(e=a*Math.PI/180,d=Math.cos(e),e=Math.sin(e));a=this.m12*d+this.m22*e;var g=this.m11*-e+this.m21*d,h=this.m12*-e+this.m22*d;this.m11=this.m11*d+this.m21*e;this.m12=a;this.m21=g;this.m22=h;this.translate(-b,-c);return this};
Fa.prototype.translate=Fa.prototype.translate=function(a,b){u&&(z.p(a,Fa,"translate:x"),z.p(b,Fa,"translate:y"));this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b;return this};Fa.prototype.scale=Fa.prototype.scale=function(a,b){void 0===b&&(b=a);u&&(z.p(a,Fa,"translate:sx"),z.p(b,Fa,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b;return this};
Fa.prototype.transformPoint=Fa.prototype.Cb=function(a){u&&z.l(a,N,Fa,"transformPoint:p");var b=a.J,c=a.K;a.J=b*this.m11+c*this.m21+this.dx;a.K=b*this.m12+c*this.m22+this.dy;return a};Fa.prototype.invertedTransformPoint=Fa.prototype.li=function(a){u&&z.l(a,N,Fa,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),g=a.J,h=a.K;a.J=g*this.m22*b+h*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.K=g*c+h*d+e;return a};
Fa.prototype.transformRect=Fa.prototype.aG=function(a){u&&z.l(a,w,Fa,"transformRect:rect");var b=a.J,c=a.K,d=b+a.Fa,e=c+a.Ea,g=this.m11,h=this.m12,k=this.m21,l=this.m22,m=this.dx,n=this.dy,p=b*g+c*k+m,q=b*h+c*l+n,r=d*g+c*k+m,c=d*h+c*l+n,s=b*g+e*k+m,b=b*h+e*l+n,g=d*g+e*k+m,d=d*h+e*l+n,e=p,h=q,p=Math.min(p,r),e=Math.max(e,r),h=Math.min(h,c),q=Math.max(q,c),p=Math.min(p,s),e=Math.max(e,s),h=Math.min(h,b),q=Math.max(q,b),p=Math.min(p,g),e=Math.max(e,g),h=Math.min(h,d),q=Math.max(q,d);a.J=p;a.K=h;a.Fa=
e-p;a.Ea=q-h;return a};function Q(a,b,c,d){void 0===a?this.yg=this.xg=this.K=this.J=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d);this.G=!1}z.ia("Spot",Q);z.ji(Q);z.Yd(Q,{x:!0,y:!0,offsetX:!0,offsetY:!0});Q.prototype.assign=function(a){this.J=a.J;this.K=a.K;this.xg=a.xg;this.yg=a.yg};
Q.prototype.setTo=Q.prototype.n=function(a,b,c,d){u&&(Kb(a,"setTo:x"),Kb(b,"setTo:y"),Pb(c,"setTo:offx"),Pb(d,"setTo:offy"));this.Pa();this.J=a;this.K=b;this.xg=c;this.yg=d;return this};Q.prototype.set=Q.prototype.set=function(a){u&&z.l(a,Q,Q,"set:s");this.Pa();this.J=a.J;this.K=a.K;this.xg=a.xg;this.yg=a.yg;return this};Q.prototype.copy=function(){var a=new Q;a.J=this.J;a.K=this.K;a.xg=this.xg;a.yg=this.yg;return a};f=Q.prototype;f.La=function(){this.G=!0;Object.freeze(this);return this};
f.V=function(){return Object.isFrozen(this)?this:this.copy().freeze()};f.freeze=function(){this.G=!0;return this};f.Wa=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.G=!1;return this};f.Pa=function(a){if(this.G){var b="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);z.k(b)}};function Tb(a,b){a.J=NaN;a.K=NaN;a.xg=b;return a}function Kb(a,b){(isNaN(a)||1<a||0>a)&&z.ka(a,"0 <= "+b+" <= 1",Q,b)}
function Pb(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&z.ka(a,"real number, not NaN or Infinity",Q,b)}var Ub;
Q.parse=Ub=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return Yb;if("TopLeft"===a)return Zb;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return $b;if("TopRight"===a)return cc;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return dc;if("Center"===a)return ec;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return fc;if("BottomLeft"===a)return gc;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return hc;if("BottomRight"===a)return ic;if("TopSide"===a)return pc;if("LeftSide"===
a)return qc;if("RightSide"===a)return sc;if("BottomSide"===a)return tc;if("TopBottomSides"===a)return uc;if("LeftRightSides"===a)return vc;if("TopLeftSides"===a)return wc;if("TopRightSides"===a)return xc;if("BottomLeftSides"===a)return Cc;if("BottomRightSides"===a)return Dc;if("NotTopSide"===a)return Ec;if("NotLeftSide"===a)return Fc;if("NotRightSide"===a)return Gc;if("NotBottomSide"===a)return Hc;if("AllSides"===a)return Ic;if("Default"===a)return Pc;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;
var d=a[b++];void 0!==d&&0<d.length&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(g=parseFloat(d));for(var h=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(h=parseFloat(d));return new Q(c,e,g,h)}return new Q};Q.stringify=function(a){return a instanceof Q?a.cd()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
Q.prototype.toString=function(){return this.cd()?0===this.xg&&0===this.yg?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.N(Yb)?"None":this.N(Zb)?"TopLeft":this.N($b)?"Top":this.N(cc)?"TopRight":this.N(dc)?"Left":this.N(ec)?"Center":this.N(fc)?"Right":this.N(gc)?"BottomLeft":this.N(hc)?"Bottom":this.N(ic)?"BottomRight":this.N(pc)?"TopSide":this.N(qc)?"LeftSide":this.N(sc)?"RightSide":this.N(tc)?"BottomSide":this.N(uc)?"TopBottomSides":this.N(vc)?
"LeftRightSides":this.N(wc)?"TopLeftSides":this.N(xc)?"TopRightSides":this.N(Cc)?"BottomLeftSides":this.N(Dc)?"BottomRightSides":this.N(Ec)?"NotTopSide":this.N(Fc)?"NotLeftSide":this.N(Gc)?"NotRightSide":this.N(Hc)?"NotBottomSide":this.N(Ic)?"AllSides":this.N(Pc)?"Default":"None"};Q.prototype.equals=Q.prototype.N=function(a){return a instanceof Q?(this.J===a.x||isNaN(this.J)&&isNaN(a.x))&&(this.K===a.y||isNaN(this.K)&&isNaN(a.y))&&this.xg===a.offsetX&&this.yg===a.offsetY:!1};
Q.prototype.opposite=function(){return new Q(.5-(this.J-.5),.5-(this.K-.5),-this.xg,-this.yg)};Q.prototype.includesSide=Q.prototype.vp=function(a){if(!this.lj())return!1;if(!a.lj())if(a.N(Qc))a=qc;else if(a.N(Rc))a=sc;else if(a.N(Sc))a=pc;else if(a.N(Tc))a=tc;else return!1;a=a.offsetY;return(this.yg&a)===a};z.defineProperty(Q,{x:"x"},function(){return this.J},function(a){this.Pa(a);u&&Kb(a,"x");this.J=a});
z.defineProperty(Q,{y:"y"},function(){return this.K},function(a){this.Pa(a);u&&Kb(a,"y");this.K=a});z.defineProperty(Q,{offsetX:"offsetX"},function(){return this.xg},function(a){this.Pa(a);u&&Pb(a,"offsetX");this.xg=a});z.defineProperty(Q,{offsetY:"offsetY"},function(){return this.yg},function(a){this.Pa(a);u&&Pb(a,"offsetY");this.yg=a});Q.prototype.isSpot=Q.prototype.cd=function(){return!isNaN(this.x)&&!isNaN(this.y)};Q.prototype.isNoSpot=Q.prototype.Be=function(){return isNaN(this.x)||isNaN(this.y)};
Q.prototype.isSide=Q.prototype.lj=function(){return this.Be()&&1===this.offsetX&&0!==this.offsetY};Q.prototype.isDefault=Q.prototype.bd=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var Yb;Q.None=Yb=Tb(new Q(0,0,0,0),0).La();var Pc;Q.Default=Pc=Tb(new Q(0,0,-1,0),-1).La();var Zb;Q.TopLeft=Zb=(new Q(0,0,0,0)).La();var $b;Q.TopCenter=$b=(new Q(.5,0,0,0)).La();var cc;Q.TopRight=cc=(new Q(1,0,0,0)).La();var dc;Q.LeftCenter=dc=(new Q(0,.5,0,0)).La();var ec;
Q.Center=ec=(new Q(.5,.5,0,0)).La();var fc;Q.RightCenter=fc=(new Q(1,.5,0,0)).La();var gc;Q.BottomLeft=gc=(new Q(0,1,0,0)).La();var hc;Q.BottomCenter=hc=(new Q(.5,1,0,0)).La();var ic;Q.BottomRight=ic=(new Q(1,1,0,0)).La();var Zc;Q.MiddleTop=Zc=$b;var $c;Q.MiddleLeft=$c=dc;var ad;Q.MiddleRight=ad=fc;var bd;Q.MiddleBottom=bd=hc;var Sc;Q.Top=Sc=$b;var Qc;Q.Left=Qc=dc;var Rc;Q.Right=Rc=fc;var Tc;Q.Bottom=Tc=hc;var pc;Q.TopSide=pc=Tb(new Q(0,0,1,z.qd),1).La();var qc;
Q.LeftSide=qc=Tb(new Q(0,0,1,z.Tc),1).La();var sc;Q.RightSide=sc=Tb(new Q(0,0,1,z.fd),1).La();var tc;Q.BottomSide=tc=Tb(new Q(0,0,1,z.ed),1).La();var uc;Q.TopBottomSides=uc=Tb(new Q(0,0,1,z.qd|z.ed),1).La();var vc;Q.LeftRightSides=vc=Tb(new Q(0,0,1,z.Tc|z.fd),1).La();var wc;Q.TopLeftSides=wc=Tb(new Q(0,0,1,z.qd|z.Tc),1).La();var xc;Q.TopRightSides=xc=Tb(new Q(0,0,1,z.qd|z.fd),1).La();var Cc;Q.BottomLeftSides=Cc=Tb(new Q(0,0,1,z.ed|z.Tc),1).La();var Dc;
Q.BottomRightSides=Dc=Tb(new Q(0,0,1,z.ed|z.fd),1).La();var Ec;Q.NotTopSide=Ec=Tb(new Q(0,0,1,z.Tc|z.fd|z.ed),1).La();var Fc;Q.NotLeftSide=Fc=Tb(new Q(0,0,1,z.qd|z.fd|z.ed),1).La();var Gc;Q.NotRightSide=Gc=Tb(new Q(0,0,1,z.qd|z.Tc|z.ed),1).La();var Hc;Q.NotBottomSide=Hc=Tb(new Q(0,0,1,z.qd|z.Tc|z.fd),1).La();var Ic;Q.AllSides=Ic=Tb(new Q(0,0,1,z.qd|z.Tc|z.fd|z.ed),1).La();function cd(){this.pf=[1,0,0,1,0,0]}
cd.prototype.copy=function(){var a=new cd;a.pf[0]=this.pf[0];a.pf[1]=this.pf[1];a.pf[2]=this.pf[2];a.pf[3]=this.pf[3];a.pf[4]=this.pf[4];a.pf[5]=this.pf[5];return a};function dd(a){this.type=a;this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0;this.RD=[];this.pattern=null}dd.prototype.addColorStop=function(a,b){this.RD.push({offset:a,color:b})};
function ed(a,b,c){this.fillStyle="#000000";this.font="10px sans-serif";this.globalAlpha=1;this.lineCap="butt";this.mn=0;this.lineJoin="miter";this.lineWidth=1;this.miterLimit=10;this.shadowBlur=0;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowOffsetY=this.shadowOffsetX=0;this.strokeStyle="#000000";this.textAlign="start";this.Ow=!1;this.Ag=this.Is=this.Hs=0;this.document=b||document;this.mE=c;this.px=null;this.path=[];this.fj=new cd;this.stack=[];this.Cf=[];this.Vw=a;this.MI="http://www.w3.org/2000/svg";
this.width=this.Vw.width;this.height=this.Vw.height;this.Vl=pd(this,"svg",{width:this.width+"px",height:this.height+"px",EL:"0 0 "+this.Vw.width+" "+this.Vw.height});this.Vl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");this.Vl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");qd(this,1,0,0,1,0,0);a=z.am++;b=pd(this,"clipPath",{id:"mainClip"+a});b.appendChild(pd(this,"rect",{x:0,y:0,width:this.width,height:this.height}));
this.Vl.appendChild(b);this.Cf[0].setAttributeNS(null,"clip-path","url(#mainClip"+a+")")}f=ed.prototype;f.arc=function(a,b,c,d,e,g){rd(this,a,b,c,d,e,g)};f.beginPath=function(){this.path=[]};f.bezierCurveTo=function(a,b,c,d,e,g){this.path.push(["C",a,b,c,d,e,g])};f.clearRect=function(){};f.clip=function(){sd(this,"clipPath",this.path,new cd)};f.closePath=function(){this.path.push(["z"])};f.createLinearGradient=function(a,b,c,d){var e=new dd("linear");e.x1=a;e.y1=b;e.x2=c;e.y2=d;return e};
f.createPattern=function(a){var b=new dd("pattern");b.pattern=a;return b};f.createRadialGradient=function(a,b,c,d,e,g){var h=new dd("radial");h.x1=a;h.y1=b;h.r1=c;h.x2=d;h.y2=e;h.r2=g;return h};
f.drawImage=function(a,b,c,d,e,g,h,k,l){var m="";a instanceof HTMLCanvasElement&&(m=a.toDataURL());a instanceof HTMLImageElement&&(m=a.src);m={x:0,y:0,width:a.naturalWidth,height:a.naturalHeight,href:m};m.preserveAspectRatio=td(d,k)&&td(e,l)?"xMidYMid slice":"none";var n="";k/=d;l/=e;if(0!==g||0!==h)n+=" translate("+g+", "+h+")";if(1!==k||1!==l)n+=" scale("+k+", "+l+")";if(0!==b||0!==c)n+=" translate("+-b+", "+-c+")";if(0!==b||0!==c||d!==a.naturalWidth||e!==a.naturalHeight)a="CLIP"+z.am++,g=pd(this,
"clipPath",{id:a}),g.appendChild(pd(this,"rect",{x:b,y:c,width:d,height:e})),this.Vl.appendChild(g),m["clip-path"]="url(#"+a+")";ud(this,"image",m,this.fj,n);this.addElement("image",m)};f.fill=function(){sd(this,"fill",this.path,this.fj)};f.Hg=function(){this.Ow?this.clip():this.fill()};f.fillRect=function(a,b,c,d){vd(this,"fill",[a,b,c,d],this.fj)};
f.fillText=function(a,b,c){a=[a,b,c];b=this.textAlign;"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle");b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b};ud(this,"fill",b,this.fj);this.addElement("text",b,a[0])};f.lineTo=function(a,b){this.path.push(["L",a,b])};f.moveTo=function(a,b){this.path.push(["M",a,b])};f.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])};f.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])};
f.restore=function(){this.fj=this.stack.pop();this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle;this.font=a.font;this.globalAlpha=a.globalAlpha;this.lineCap=a.lineCap;this.mn=a.mn;this.lineJoin=a.lineJoin;this.lineWidth=a.lineWidth;this.miterLimit=a.miterLimit;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.shadowOffsetX=a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.strokeStyle=a.strokeStyle;this.textAlign=a.textAlign};
f.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,mn:this.mn,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a);this.stack.push(this.fj.copy())};
f.setTransform=function(a,b,c,d,e,g){1===a&&0===b&&0===c&&1===d&&0===e&&0===g||qd(this,a,b,c,d,e,g)};f.scale=function(){};f.stroke=function(){sd(this,"stroke",this.path,this.fj)};f.uj=function(){this.Kn||this.stroke()};f.strokeRect=function(a,b,c,d){vd(this,"stroke",[a,b,c,d],this.fj)};function pd(a,b,c,d){a=a.document.createElementNS(a.MI,b);if(z.Za(c))for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);void 0!==d&&(a.textContent=d);return a}
f.addElement=function(a,b,c){a=pd(this,a,b,c);0<this.Cf.length?this.Cf[this.Cf.length-1].appendChild(a):this.Vl.appendChild(a);return this.px=a};
function ud(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha);"fill"===b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof dd?wd(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"===b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof dd?wd(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit);d=d.pf;d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")";void 0!==e&&(d+=e);c.transform=d}
function wd(a,b){var c="GRAD"+z.am++,d;if("linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=pd(a,"linearGradient",d);else if("radial"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=pd(a,"radialGradient",d);else if("pattern"===b.type){var e=b.pattern;d={width:e.width,height:e.height,id:c,patternUnits:"userSpaceOnUse"};var g="";e instanceof HTMLCanvasElement&&(g=e.toDataURL());e instanceof HTMLImageElement&&(g=e.src);e={x:0,y:0,width:e.width,
height:e.height,href:g};d=pd(a,"pattern",d);d.appendChild(pd(a,"image",e))}else throw Error("invalid gradient");for(var e=b.RD,g=e.length,h=[],k=0;k<g;k++){var l=e[k],m=l.color,l={offset:l.offset,"stop-color":m};/^rgba\(/.test(m)&&(m=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m),l["stop-color"]="rgb("+m[1]+","+m[2]+","+m[3]+")",l["stop-opacity"]=m[4]);h.push(l)}h.sort(function(a,b){return a.offset>b.offset?1:-1});for(k=0;k<g;k++)d.appendChild(pd(a,"stop",
h[k]));a.Vl.appendChild(d);return"url(#"+c+")"}function vd(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]};ud(a,b,c,d);a.addElement("rect",c)}
function sd(a,b,c,d){for(var e=[],g=0;g<c.length;g++){var h=z.Al(c[g]),k=[h.shift()];if("A"===k[0])k.push(h.shift()+","+h.shift(),h.shift(),h.shift()+","+h.shift(),h.shift()+","+h.shift());else for(;h.length;)k.push(h.shift()+","+h.shift());e.push(k.join(" "))}c={d:e.join(" ")};ud(a,b,c,d);"clipPath"===b?(b="CLIP"+z.am++,d=pd(a,"clipPath",{id:b}),d.appendChild(pd(a,"path",c)),a.Vl.appendChild(d),0<a.Cf.length&&a.Cf[a.Cf.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",
c)}function rd(a,b,c,d,e,g,h){var k=Math.abs(e-g);if(e!==g){var l=b+d*Math.cos(g);g=c+d*Math.sin(g);k>=2*Math.PI?(rd(a,b,c,d,e,e+Math.PI,h),rd(a,b,c,d,e+Math.PI,e+2*Math.PI,h),a.path.push(["M",l,g])):(b+=d*Math.cos(e),c+=d*Math.sin(e),k=180*k/Math.PI,e=h?0:1,h=180<=k===!!h?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,k,h,e,l,g]))}}function qd(a,b,c,d,e,g,h){var k=new cd;k.pf=[b,c,d,e,g,h];b={};ud(a,"g",b,k);k=a.addElement("g",b);a.Cf.push(k)}
f.fb=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var a="SHADOW"+z.am++,b=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),c,d,e,g,h;c=pd(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",vL:this.shadowBlur/2});d=pd(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor});e=pd(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"});g=pd(this,"feOffset",{"in":"comp",result:"offsetBlur",
dx:this.shadowOffsetX,dy:this.shadowOffsetY});h=pd(this,"feMerge",{});h.appendChild(pd(this,"feMergeNode",{"in":"offsetBlur"}));h.appendChild(pd(this,"feMergeNode",{"in":"SourceGraphic"}));b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(g);b.appendChild(h);0<this.Cf.length&&this.Cf[this.Cf.length-1].setAttributeNS(null,"filter","url(#"+a+")")}};f.TA=function(a,b,c){this.Hs=a;this.Is=b;this.Ag=c};f.vn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0};
f.wn=function(){this.shadowOffsetX=this.Hs;this.shadowOffsetY=this.Is;this.shadowBlur=this.Ag};f.Uz=function(){return!1};f.Qz=function(){};function la(a,b){this.ownerDocument=void 0===b?document:b;var c=this.ownerDocument.createElement("canvas");c.tabIndex=0;this.Ld=c;this.zl=new xd(c);c.Z=a;Object.seal(this)}f=la.prototype;f.toDataURL=function(a,b){return this.Ld.toDataURL(a,b)};f.getBoundingClientRect=function(){return this.Ld.getBoundingClientRect()};f.focus=function(){return this.Ld.focus()};
f.addEventListener=function(a,b,c){this.Ld.addEventListener(a,b,c)};f.removeEventListener=function(a,b,c){this.Ld.removeEventListener(a,b,c)};z.defineProperty(la,{width:"width"},function(){return this.Ld.width},function(a){this.Ld.width=a});z.defineProperty(la,{height:"height"},function(){return this.Ld.height},function(a){this.Ld.height=a});z.defineProperty(la,{style:"style"},function(){return this.Ld.style},function(a){this.Ld.style=a});
function xd(a){a.getContext&&a.getContext("2d")||z.k("Browser does not support HTML Canvas Element");this.Ca=a.getContext("2d");this.ny=this.py=this.oy="";this.Kn=!1;this.Ag=this.Is=this.Hs=0;Object.seal(this)}z.defineProperty(xd,{fillStyle:"fillStyle"},function(){return this.Ca.fillStyle},function(a){this.ny!==a&&(this.ny=this.Ca.fillStyle=a)});z.defineProperty(xd,{font:"font"},function(){return this.Ca.font},function(a){this.oy!==a&&(this.oy=this.Ca.font=a)});
z.defineProperty(xd,{globalAlpha:"globalAlpha"},function(){return this.Ca.globalAlpha},function(a){this.Ca.globalAlpha=a});z.defineProperty(xd,{lineCap:"lineCap"},function(){return this.Ca.lineCap},function(a){this.Ca.lineCap=a});z.defineProperty(xd,{mn:"lineDashOffset"},function(){return this.Ca.mn},function(a){this.Ca.mn=a});z.defineProperty(xd,{lineJoin:"lineJoin"},function(){return this.Ca.lineJoin},function(a){this.Ca.lineJoin=a});
z.defineProperty(xd,{lineWidth:"lineWidth"},function(){return this.Ca.lineWidth},function(a){this.Ca.lineWidth=a});z.defineProperty(xd,{miterLimit:"miterLimit"},function(){return this.Ca.miterLimit},function(a){this.Ca.miterLimit=a});z.defineProperty(xd,{shadowBlur:"shadowBlur"},function(){return this.Ca.shadowBlur},function(a){this.Ca.shadowBlur=a});z.defineProperty(xd,{shadowColor:"shadowColor"},function(){return this.Ca.shadowColor},function(a){this.Ca.shadowColor=a});
z.defineProperty(xd,{shadowOffsetX:"shadowOffsetX"},function(){return this.Ca.shadowOffsetX},function(a){this.Ca.shadowOffsetX=a});z.defineProperty(xd,{shadowOffsetY:"shadowOffsetY"},function(){return this.Ca.shadowOffsetY},function(a){this.Ca.shadowOffsetY=a});z.defineProperty(xd,{strokeStyle:"strokeStyle"},function(){return this.Ca.strokeStyle},function(a){this.py!==a&&(this.py=this.Ca.strokeStyle=a)});
z.defineProperty(xd,{textAlign:"textAlign"},function(){return this.Ca.textAlign},function(a){this.Ca.textAlign=a});z.defineProperty(xd,{Jt:"imageSmoothingEnabled"},function(){return this.Ca.Jt},function(a){this.Ca.Jt=a});f=xd.prototype;f.arc=function(a,b,c,d,e,g){this.Ca.arc(a,b,c,d,e,g)};f.beginPath=function(){this.Ca.beginPath()};f.bezierCurveTo=function(a,b,c,d,e,g){this.Ca.bezierCurveTo(a,b,c,d,e,g)};f.clearRect=function(a,b,c,d){this.Ca.clearRect(a,b,c,d)};f.clip=function(){this.Ca.clip()};
f.closePath=function(){this.Ca.closePath()};f.createLinearGradient=function(a,b,c,d){return this.Ca.createLinearGradient(a,b,c,d)};f.createPattern=function(a,b){return this.Ca.createPattern(a,b)};f.createRadialGradient=function(a,b,c,d,e,g){return this.Ca.createRadialGradient(a,b,c,d,e,g)};f.drawImage=function(a,b,c,d,e,g,h,k,l){void 0===d?this.Ca.drawImage(a,b,c):this.Ca.drawImage(a,b,c,d,e,g,h,k,l)};f.fill=function(){this.Ca.fill()};f.fillRect=function(a,b,c,d){this.Ca.fillRect(a,b,c,d)};
f.fillText=function(a,b,c){this.Ca.fillText(a,b,c)};f.getImageData=function(a,b,c,d){return this.Ca.getImageData(a,b,c,d)};f.lineTo=function(a,b){this.Ca.lineTo(a,b)};f.measureText=function(a){return this.Ca.measureText(a)};f.moveTo=function(a,b){this.Ca.moveTo(a,b)};f.quadraticCurveTo=function(a,b,c,d){this.Ca.quadraticCurveTo(a,b,c,d)};f.rect=function(a,b,c,d){this.Ca.rect(a,b,c,d)};f.restore=function(){this.Ca.restore()};xd.prototype.rotate=function(a){this.Ca.rotate(a)};f=xd.prototype;
f.save=function(){this.Ca.save()};f.setTransform=function(a,b,c,d,e,g){this.Ca.setTransform(a,b,c,d,e,g)};f.scale=function(a,b){this.Ca.scale(a,b)};f.stroke=function(){this.Ca.stroke()};f.transform=function(a,b,c,d,e,g){1===a&&0===b&&0===c&&1===d&&0===e&&0===g||this.Ca.transform(a,b,c,d,e,g)};f.translate=function(a,b){this.Ca.translate(a,b)};
f.Hg=function(a){if(a instanceof Da&&a.type===yd){var b=a.Nn;a=a.vy;a>b?(this.scale(b/a,1),this.translate((a-b)/2,0)):b>a&&(this.scale(1,a/b),this.translate(0,(b-a)/2));this.Kn?this.clip():this.fill();a>b?(this.translate(-(a-b)/2,0),this.scale(1/(b/a),1)):b>a&&(this.translate(0,-(b-a)/2),this.scale(1,1/(a/b)))}else this.Kn?this.clip():this.fill()};f.uj=function(){this.Kn||this.stroke()};z.defineProperty(xd,{Ow:"clipInsteadOfFill"},function(){return this.Kn},function(a){this.Kn=a});f=xd.prototype;
f.TA=function(a,b,c){this.Hs=a;this.Is=b;this.Ag=c};f.vn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0};f.wn=function(){this.shadowOffsetX=this.Hs;this.shadowOffsetY=this.Is;this.shadowBlur=this.Ag};f.Uz=function(a,b){var c=this.Ca;if(void 0!==c.setLineDash)c.setLineDash(a),c.lineDashOffset=b;else if(void 0!==c.webkitLineDash)c.webkitLineDash=a,c.webkitLineDashOffset=b;else if(void 0!==c.mozDash)c.mozDash=a,c.mozDashOffset=b;else return!1;return!0};
f.Qz=function(){var a=this.Ca;void 0!==a.setLineDash?(a.setLineDash(z.yj),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=z.yj,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0)};function ca(a,b){b&&(a.oy="");a.py="";a.ny=""}
var Hd=(Math.sqrt(2)-1)/3*4,Id=(new N(0,0)).La(),Jd=(new w(0,0,0,0)).La(),Kd=(new Db(0,0,0,0)).La(),Ld=(new Db(2,2,2,2)).La(),Md=(new N(6,6)).La(),Nd=(new N(-Infinity,-Infinity)).La(),Od=(new N(Infinity,Infinity)).La(),Pd=(new Ea(0,0)).La(),Qd=(new Ea(1,1)).La(),ae=(new Ea(6,6)).La(),be=(new Ea(8,8)).La(),ce=(new Ea(10,10)).La(),de=(new Ea(Infinity,Infinity)).La(),ee=(new N(NaN,NaN)).La(),fe=(new Ea(NaN,NaN)).La(),ge=(new w(NaN,NaN,NaN,NaN)).La(),he=(new Q(.156,.156)).La(),ie=(new Q(.844,.844)).La(),
je=new ma,ke=new ma,le=null;function se(a){if(0>=a)return 0;var b=le;if(null===b){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);le=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)}function eb(a,b){var c=a-b;return.5>c&&-.5<c}function td(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function te(a,b,c,d,e,g,h){0>=e&&(e=1E-6);var k=0,l=0,m=0,n=0;a<c?(l=a,k=c):(l=c,k=a);b<d?(n=b,m=d):(n=d,m=b);if(a===c)return n<=h&&h<=m&&a-e<=g&&g<=a+e;if(b===d)return l<=g&&g<=k&&b-e<=h&&h<=b+e;k+=e;l-=e;if(l<=g&&g<=k&&(m+=e,n-=e,n<=h&&h<=m))if(k-l>m-n)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=h&&h<=g+e)return!0}else return!0;else if(b-d>e||d-b>e){if(h=(c-a)/(d-b)*(h-b)+a,h-e<=g&&g<=h+e)return!0}else return!0;return!1}
function ue(a,b,c,d,e,g,h,k,l,m,n,p){if(te(a,b,h,k,p,c,d)&&te(a,b,h,k,p,e,g))return te(a,b,h,k,p,m,n);var q=(a+c)/2,r=(b+d)/2,s=(c+e)/2,t=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(q+s)/2;c=(r+t)/2;var s=(s+e)/2,t=(t+g)/2,v=(d+s)/2,x=(c+t)/2;return ue(a,b,q,r,d,c,v,x,l,m,n,p)||ue(v,x,s,t,e,g,h,k,l,m,n,p)}
function ve(a,b,c,d,e,g,h,k,l,m){if(te(a,b,h,k,l,c,d)&&te(a,b,h,k,l,e,g))Hb(m,a,b,0,0),Hb(m,h,k,0,0);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+g)/2,s=(d+q)/2,t=(c+r)/2;ve(a,b,n,p,d,c,s,t,l,m);ve(s,t,q,r,e,g,h,k,l,m)}}
function we(a,b,c,d,e,g,h,k,l,m){if(te(a,b,h,k,l,c,d)&&te(a,b,h,k,l,e,g))0===m.length&&(m.push(a),m.push(b)),m.push(h),m.push(k);else{var n=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(n+q)/2;c=(p+r)/2;var q=(q+e)/2,r=(r+g)/2,s=(d+q)/2,t=(c+r)/2;we(a,b,n,p,d,c,s,t,l,m);we(s,t,q,r,e,g,h,k,l,m)}}
function xe(a,b,c,d,e,g,h,k,l,m,n,p,q,r){var s=1-l;a=a*s+c*l;b=b*s+d*l;c=c*s+e*l;d=d*s+g*l;e=e*s+h*l;g=g*s+k*l;k=a*s+c*l;h=b*s+d*l;c=c*s+e*l;d=d*s+g*l;m.x=a;m.y=b;n.x=k;n.y=h;p.x=k*s+c*l;p.y=h*s+d*l;q.x=c;q.y=d;r.x=e;r.y=g}function ye(a,b,c,d,e,g,h,k,l,m){if(te(a,b,e,g,m,c,d))return te(a,b,e,g,m,k,l);var n=(a+c)/2,p=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var q=(n+c)/2,r=(p+d)/2;return ye(a,b,n,p,q,r,h,k,l,m)||ye(q,r,c,d,e,g,h,k,l,m)}
function ze(a,b,c,d,e,g,h,k){if(te(a,b,e,g,h,c,d))Hb(k,a,b,0,0),Hb(k,e,g,0,0);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var n=(l+c)/2,p=(m+d)/2;ze(a,b,l,m,n,p,h,k);ze(n,p,c,d,e,g,h,k)}}function Je(a,b,c,d,e,g,h,k){if(te(a,b,e,g,h,c,d))0===k.length&&(k.push(a),k.push(b)),k.push(e),k.push(g);else{var l=(a+c)/2,m=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var n=(l+c)/2,p=(m+d)/2;Je(a,b,l,m,n,p,h,k);Je(n,p,c,d,e,g,h,k)}}
function Ke(a,b,c,d,e,g,h,k,l,m,n,p,q,r){0>=q&&(q=1E-6);if(te(a,b,h,k,q,c,d)&&te(a,b,h,k,q,e,g)){var s=(a-h)*(m-p)-(b-k)*(l-n);if(0===s)return!1;q=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/s;s=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/s;if((l>n?l-n:n-l)<(m>p?m-p:p-m)){if(h=l=0,b<k?(l=b,h=k):(l=k,h=b),s<l||s>h)return!1}else if(a<h?l=a:(l=h,h=a),q<l||q>h)return!1;r.x=q;r.y=s;return!0}var s=(a+c)/2,t=(b+d)/2;c=(c+e)/2;d=(d+g)/2;e=(e+h)/2;g=(g+k)/2;var v=(s+c)/2,x=(t+d)/2;c=(c+e)/2;d=(d+g)/2;var y=(v+c)/2,A=(x+d)/2,
C=(n-l)*(n-l)+(p-m)*(p-m),L=!1;Ke(a,b,s,t,v,x,y,A,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<C&&(C=b,L=!0));a=r.x;s=r.y;Ke(y,A,c,d,e,g,h,k,l,m,n,p,q,r)&&(b=(r.x-l)*(r.x-l)+(r.y-m)*(r.y-m),b<C?L=!0:(r.x=a,r.y=s));return L}
function Le(a,b,c,d,e,g,h,k,l,m,n,p,q){var r=0;0>=q&&(q=1E-6);if(te(a,b,h,k,q,c,d)&&te(a,b,h,k,q,e,g)){q=(a-h)*(m-p)-(b-k)*(l-n);if(0===q)return r;var s=((a*k-b*h)*(l-n)-(a-h)*(l*p-m*n))/q,t=((a*k-b*h)*(m-p)-(b-k)*(l*p-m*n))/q;if(s>=n)return r;if((l>n?l-n:n-l)<(m>p?m-p:p-m)){if(a=l=0,b<k?(l=b,a=k):(l=k,a=b),t<l||t>a)return r}else if(a<h?(l=a,a=h):l=h,s<l||s>a)return r;0<q?r++:0>q&&r--}else{var s=(a+c)/2,t=(b+d)/2,v=(c+e)/2,x=(d+g)/2;e=(e+h)/2;g=(g+k)/2;d=(s+v)/2;c=(t+x)/2;var v=(v+e)/2,x=(x+g)/2,
y=(d+v)/2,A=(c+x)/2,r=r+Le(a,b,s,t,d,c,y,A,l,m,n,p,q),r=r+Le(y,A,v,x,e,g,h,k,l,m,n,p,q)}return r}
function ib(a,b,c,d,e,g,h){if(td(a,c)){var k=0;c=0;b<d?(k=b,c=d):(k=d,c=b);d=g;if(d<k)return h.x=a,h.y=k,!1;if(d>c)return h.x=a,h.y=c,!1;h.x=a;h.y=d;return!0}if(td(b,d)){a<c?k=a:(k=c,c=a);d=e;if(d<k)return h.x=k,h.y=b,!1;if(d>c)return h.x=c,h.y=b,!1;h.x=d;h.y=b;return!0}k=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>k)return h.x=a,h.y=b,!1;if(1.000005<k)return h.x=c,h.y=d,!1;h.x=a+k*(c-a);h.y=b+k*(d-b);return!0}
function Me(a,b,c,d,e,g,h,k,l){if(eb(a,c)&&eb(b,d))return l.x=a,l.y=b,!1;if(td(e,h)){if(td(a,c))return ib(a,b,c,d,e,g,l),!1;g=(d-b)/(c-a)*(e-a)+b;return ib(a,b,c,d,e,g,l)}k=(k-g)/(h-e);if(td(a,c)){g=k*(a-e)+g;c=h=0;b<d?(h=b,c=d):(h=d,c=b);if(g<h)return l.x=a,l.y=h,!1;if(g>c)return l.x=a,l.y=c,!1;l.x=a;l.y=g;return!0}h=(d-b)/(c-a);if(td(k,h))return ib(a,b,c,d,e,g,l),!1;e=(h*a-k*e+g-b)/(h-k);if(td(h,0)){a<c?h=a:(h=c,c=a);if(e<h)return l.x=h,l.y=b,!1;if(e>c)return l.x=c,l.y=b,!1;l.x=e;l.y=b;return!0}g=
h*(e-a)+b;return ib(a,b,c,d,e,g,l)}function Ne(a,b,c,d,e,g,h,k,l){var m=1E21,n=a,p=b;if(Me(a,b,a,d,e,g,h,k,l)){var q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g);q<m&&(m=q,n=l.x,p=l.y)}Me(c,b,c,d,e,g,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g),q<m&&(m=q,n=l.x,p=l.y));Me(a,b,c,b,e,g,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g),q<m&&(m=q,n=l.x,p=l.y));Me(a,d,c,d,e,g,h,k,l)&&(q=(l.x-e)*(l.x-e)+(l.y-g)*(l.y-g),q<m&&(m=q,n=l.x,p=l.y));l.x=n;l.y=p;return 1E21>m}
function Oe(a,b,c,d,e,g,h,k,l){c=a-c;var m=e-h,n=h=0;0===c||0===m?0===c?(k=(g-k)/m,h=a,n=k*h+(g-k*e)):(d=(b-d)/c,h=e,n=d*h+(b-d*a)):(d=(b-d)/c,k=(g-k)/m,a=b-d*a,h=(g-k*e-a)/(d-k),n=d*h+a);l.n(h,n);return l}
function Pe(a,b,c){var d=b.x,e=b.y,g=c.x,h=c.y,k=a.left,l=a.right,m=a.top,n=a.bottom;return d===g?(g=a=0,e<h?(a=e,g=h):(a=h,g=e),k<=d&&d<=l&&a<=n&&g>=m):e===h?(d<g?a=d:(a=g,g=d),m<=e&&e<=n&&a<=l&&g>=k):a.Ma(b)||a.Ma(c)||bf(k,m,l,m,d,e,g,h)||bf(l,m,l,n,d,e,g,h)||bf(l,n,k,n,d,e,g,h)||bf(k,n,k,m,d,e,g,h)?!0:!1}function bf(a,b,c,d,e,g,h,k){return 0>=cf(a,b,c,d,e,g)*cf(a,b,c,d,h,k)&&0>=cf(e,g,h,k,a,b)*cf(e,g,h,k,c,d)}
function cf(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0}function df(a){0>a&&(a+=360);360<=a&&(a-=360);return a}
function ef(a,b,c,d){var e=Math.PI;d||(b*=e/180,c*=e/180);d=b<c?1:-1;var g=[],h=e/2,k=b;for(b=Math.min(2*e,Math.abs(c-b));1E-5<b;){c=k+d*Math.min(b,h);var e=(c-k)/2,l=a*Math.cos(e),m=a*Math.sin(e),n=-m,p=l*l+n*n,q=p+l*l+n*m,p=4/3*(Math.sqrt(2*p*q)-q)/(l*m-n*l),m=l-p*n,l=n+p*l,n=-l,p=e+k,e=Math.cos(p),p=Math.sin(p);g.push([0+a*Math.cos(k),0+a*Math.sin(k),0+m*e-l*p,0+m*p+l*e,0+m*e-n*p,0+m*p+n*e,0+a*Math.cos(c),0+a*Math.sin(c)]);b-=Math.abs(c-k);k=c}return g}
function jb(a,b,c,d,e,g,h){c=Math.floor((a-c)/e)*e+c;d=Math.floor((b-d)/g)*g+d;var k=c;c+e-a<e/2&&(k=c+e);a=d;d+g-b<g/2&&(a=d+g);h.n(k,a)}function ff(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g}
function gf(a,b,c,d){var e=0>c,g=0>d,h=0,k=h=0;a<b?(h=1,k=0):(h=0,k=1);var l=0,m=0,n=0,p=0,l=0===h?a:b,n=0===h?c:d;if(0===h?e:g)n=-n;h=k;m=0===h?a:b;p=0===h?c:d;if(0===h?e:g)p=-p;a=a=0;if(0<p)if(0<n){b=l*l;a=m*m;l*=n;c=m*p;d=-a+c;e=-a+Math.sqrt(l*l+c*c);m=d;for(g=0;9999999999>g;++g){m=.5*(d+e);if(m===d||m===e)break;k=l/(m+b);h=c/(m+a);k=k*k+h*h-1;if(0<k)d=m;else if(0>k)e=m;else break}n=b*n/(m+b)-n;p=a*p/(m+a)-p;a=Math.sqrt(n*n+p*p)}else a=Math.abs(p-m);else p=l*l-m*m,a=l*n,a<p?(p=a/p,a=m*Math.sqrt(Math.abs(1-
p*p)),n=l*p-n,a=Math.sqrt(n*n+a*a)):a=Math.abs(n-l);return a}function hf(a){1<arguments.length&&z.k("Geometry constructor can take at most one optional argument, the Geometry type.");z.kc(this);this.G=!1;void 0===a?a=jf:u&&z.Ba(a,hf,hf,"constructor:type");this.ba=a;this.Gb=this.zb=this.Cc=this.xc=0;this.Dj=new J(kf);this.nv=this.Dj.H;this.Xu=(new w).freeze();this.hb=!0;this.ci=Zb;this.di=ic;this.oo=this.qo=NaN;this.Ci=lf}z.ia("Geometry",hf);z.ji(hf);
hf.prototype.copy=function(){var a=new hf;a.ba=this.ba;a.xc=this.xc;a.Cc=this.Cc;a.zb=this.zb;a.Gb=this.Gb;for(var b=this.Dj.o,c=b.length,d=a.Dj,e=0;e<c;e++){var g=b[e].copy();d.add(g)}a.nv=this.nv;a.Xu.assign(this.Xu);a.hb=this.hb;a.ci=this.ci.V();a.di=this.di.V();a.qo=this.qo;a.oo=this.oo;a.Ci=this.Ci;return a};var mf;hf.Line=mf=z.s(hf,"Line",0);var nf;hf.Rectangle=nf=z.s(hf,"Rectangle",1);var of;hf.Ellipse=of=z.s(hf,"Ellipse",2);var jf;hf.Path=jf=z.s(hf,"Path",3);
hf.prototype.La=function(){this.freeze();Object.freeze(this);return this};hf.prototype.freeze=function(){this.G=!0;var a=this.cc;a.freeze();for(var a=a.o,b=a.length,c=0;c<b;c++)a[c].freeze();return this};hf.prototype.Wa=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.G=!1;var a=this.cc;a.Wa();for(var a=a.o,b=a.length,c=0;c<b;c++)a[c].Wa();return this};
hf.prototype.equalsApprox=hf.prototype.Mc=function(a){if(!(a instanceof hf))return!1;if(this.type!==a.type)return this.type===mf&&a.type===jf?pf(this,a):a.type===mf&&this.type===jf?pf(a,this):!1;if(this.type===jf){var b=this.cc.o;a=a.cc.o;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Mc(a[d]))return!1;return!0}return eb(this.Ha,a.Ha)&&eb(this.Da,a.Da)&&eb(this.L,a.L)&&eb(this.M,a.M)};
function pf(a,b){if(a.type!==mf||b.type!==jf)return!1;if(1===b.cc.count){var c=b.cc.ea(0);if(1===c.Ab.count&&eb(a.Ha,c.Ha)&&eb(a.Da,c.Da)&&(c=c.Ab.ea(0),c.type===qf&&eb(a.L,c.L)&&eb(a.M,c.M)))return!0}return!1}var rf;hf.stringify=rf=function(a){return a.toString()};
hf.prototype.toString=function(a){void 0===a&&(a=-1);switch(this.type){case mf:return 0>a?"M"+this.Ha.toString()+" "+this.Da.toString()+"L"+this.L.toString()+" "+this.M.toString():"M"+this.Ha.toFixed(a)+" "+this.Da.toFixed(a)+"L"+this.L.toFixed(a)+" "+this.M.toFixed(a);case nf:var b=new w(this.Ha,this.Da,0,0);b.cG(this.L,this.M,0,0);return 0>a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case of:b=new w(this.Ha,this.Da,0,0);b.cG(this.L,this.M,0,0);if(0>a){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case jf:for(var b="",c=this.cc.o,d=c.length,e=0;e<d;e++){var g=c[e];0<e&&(b+=" x ");g.Ot&&(b+="F ");b+=g.toString(a)}return b;default:return this.type.toString()}};
hf.fillPath=function(a){"string"!==typeof a&&z.ic(a,"string",hf,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var sf;
hf.parse=sf=function(a,b){function c(){return m>=t-1?!0:null!==l[m+1].match(/[A-Za-z]/)}function d(){m++;return l[m]}function e(){var a=new N(parseFloat(d()),parseFloat(d()));n===n.toLowerCase()&&(a.x=s.x+a.x,a.y=s.y+a.y);return a}function g(){return s=e()}function h(){return r=e()}function k(){return"c"!==p.toLowerCase()&&"s"!==p.toLowerCase()?s:new N(2*s.x-r.x,2*s.y-r.y)}void 0===b&&(b=!1);"string"!==typeof a&&z.ic(a,"string",hf,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var l=a.split(" "),m=-1,n="",p="",q=new N(0,0),r=new N(0,0),s=new N(0,
0),t=l.length,v=z.v(),x=!1,y=!1,A=!0;!(m>=t-1);)if(p=n,n=d(),""!==n)switch(n.toUpperCase()){case "X":A=!0;y=x=!1;break;case "M":var C=g();null===v.$b||!0===A?(R(v,C.x,C.y,x,!1,!y),A=!1):v.moveTo(C.x,C.y);for(q=s;!c();)C=g(),v.lineTo(C.x,C.y);break;case "L":for(;!c();)C=g(),v.lineTo(C.x,C.y);break;case "H":for(;!c();)s=C=new N((n===n.toLowerCase()?s.x:0)+parseFloat(d()),s.y),v.lineTo(s.x,s.y);break;case "V":for(;!c();)s=C=new N(s.x,(n===n.toLowerCase()?s.y:0)+parseFloat(d())),v.lineTo(s.x,s.y);break;
case "C":for(;!c();){var L=e(),H=h(),C=g();S(v,L.x,L.y,H.x,H.y,C.x,C.y)}break;case "S":for(;!c();)L=k(),H=h(),C=g(),S(v,L.x,L.y,H.x,H.y,C.x,C.y);break;case "Q":for(;!c();)H=h(),C=g(),zf(v,H.x,H.y,C.x,C.y);break;case "T":for(;!c();)r=H=k(),C=g(),zf(v,H.x,H.y,C.x,C.y);break;case "B":for(;!c();){var C=parseFloat(d()),L=parseFloat(d()),H=parseFloat(d()),U=parseFloat(d()),ea=parseFloat(d()),W=ea,P=!1;c()||(W=parseFloat(d()),c()||(P=0!==parseFloat(d())));n===n.toLowerCase()&&(H+=s.x,U+=s.y);v.arcTo(C,L,
H,U,ea,W,P)}break;case "A":for(;!c();)L=Math.abs(parseFloat(d())),H=Math.abs(parseFloat(d())),U=parseFloat(d()),ea=!!parseFloat(d()),W=!!parseFloat(d()),C=g(),Af(v,L,H,U,ea,W,C.x,C.y);break;case "Z":C=v.q.cc.o[v.q.cc.length-1];T(v);s=q;break;case "F":C="";for(L=1;l[m+L];)if(null!==l[m+L].match(/[Uu]/))L++;else if(null===l[m+L].match(/[A-Za-z]/))L++;else{C=l[m+L];break}C.match(/[Mm]/)?x=!0:Bf(v);break;case "U":C="";for(L=1;l[m+L];)if(null!==l[m+L].match(/[Ff]/))L++;else if(null===l[m+L].match(/[A-Za-z]/))L++;
else{C=l[m+L];break}C.match(/[Mm]/)?y=!0:v.fb(!1)}q=v.q;z.u(v);if(b)for(v=q.cc.i;v.next();)C=v.value,C.Ot=!0;return q};function Cf(a,b){for(var c=a.length,d=z.O(),e=0;e<c;e++){var g=a[e];d.x=g[0];d.y=g[1];b.Cb(d);g[0]=d.x;g[1]=d.y;d.x=g[2];d.y=g[3];b.Cb(d);g[2]=d.x;g[3]=d.y;d.x=g[4];d.y=g[5];b.Cb(d);g[4]=d.x;g[5]=d.y;d.x=g[6];d.y=g[7];b.Cb(d);g[6]=d.x;g[7]=d.y}z.A(d)}
hf.prototype.iA=function(){if(this.hb||this.nv!==this.cc.H)return!0;for(var a=this.cc.o,b=a.length,c=0;c<b;c++)if(a[c].iA())return!0;return!1};hf.prototype.eB=function(){this.hb=!1;this.nv=this.cc.H;for(var a=this.cc.o,b=a.length,c=0;c<b;c++)a[c].eB()};hf.prototype.sh=function(){var a=this.Xu;a.Wa();isNaN(this.qo)||isNaN(this.oo)?a.n(0,0,0,0):a.n(0,0,this.qo,this.oo);Df(this,a,!1);Hb(a,0,0,0,0);a.freeze()};
hf.prototype.computeBoundsWithoutOrigin=hf.prototype.eH=function(){var a=new w;Df(this,a,!0);return a};
function Df(a,b,c){switch(a.type){case mf:case nf:case of:c?b.n(a.xc,a.Cc,0,0):Hb(b,a.xc,a.Cc,0,0);Hb(b,a.zb,a.Gb,0,0);break;case jf:var d=a.cc;a=d.o;for(var d=d.length,e=0;e<d;e++){var g=a[e];c&&0===e?b.n(g.Ha,g.Da,0,0):Hb(b,g.Ha,g.Da,0,0);for(var h=g.Ab.o,k=h.length,l=g.Ha,m=g.Da,n=0;n<k;n++){var p=h[n];switch(p.type){case qf:case Ef:l=p.L;m=p.M;Hb(b,l,m,0,0);break;case Ff:ve(l,m,p.zc,p.Qc,p.Ch,p.Dh,p.L,p.M,.5,b);l=p.L;m=p.M;break;case Gf:ze(l,m,p.zc,p.Qc,p.L,p.M,.5,b);l=p.L;m=p.M;break;case Hf:case If:var q=
p.type===Hf?Jf(p,g):Kf(p,g,l,m),r=q.length;if(0===r){l=p.ra;m=p.za;Hb(b,l,m,0,0);break}for(var p=null,s=0;s<r;s++)p=q[s],ve(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,b);null!==p&&(l=p[6],m=p[7]);break;default:z.k("Unknown Segment type: "+p.type)}}}break;default:z.k("Unknown Geometry type: "+a.type)}}hf.prototype.normalize=hf.prototype.normalize=function(){this.G&&z.oa(this);var a=this.eH();this.offset(-a.x,-a.y);return new N(-a.x,-a.y)};
hf.prototype.offset=hf.prototype.offset=function(a,b){this.G&&z.oa(this);u&&(z.p(a,hf,"offset"),z.p(b,hf,"offset"));this.transform(1,0,0,1,a,b);return this};hf.prototype.scale=hf.prototype.scale=function(a,b){this.G&&z.oa(this);u&&(z.p(a,hf,"scale:x"),z.p(b,hf,"scale:y"),0===a&&z.ka(a,"scale must be non-zero",hf,"scale:x"),0===b&&z.ka(b,"scale must be non-zero",hf,"scale:y"));this.transform(a,0,0,b,0,0);return this};
hf.prototype.rotate=hf.prototype.rotate=function(a,b,c){this.G&&z.oa(this);void 0===b&&(b=0);void 0===c&&(c=0);u&&(z.p(a,hf,"rotate:angle"),z.p(b,hf,"rotate:x"),z.p(c,hf,"rotate:y"));var d=z.Hh();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);z.jf(d);return this};
hf.prototype.transform=hf.prototype.transform=function(a,b,c,d,e,g){var h=0,k=0;switch(this.type){case mf:case nf:case of:h=this.xc;k=this.Cc;this.xc=h*a+k*c+e;this.Cc=h*b+k*d+g;h=this.zb;k=this.Gb;this.zb=h*a+k*c+e;this.Gb=h*b+k*d+g;break;case jf:for(var l=this.cc.o,m=l.length,n=0;n<m;n++){var p=l[n],h=p.Ha,k=p.Da;p.Ha=h*a+k*c+e;p.Da=h*b+k*d+g;for(var p=p.Ab.o,q=p.length,r=0;r<q;r++){var s=p[r];switch(s.type){case qf:case Ef:h=s.L;k=s.M;s.L=h*a+k*c+e;s.M=h*b+k*d+g;break;case Ff:h=s.zc;k=s.Qc;s.zc=
h*a+k*c+e;s.Qc=h*b+k*d+g;h=s.Ch;k=s.Dh;s.Ch=h*a+k*c+e;s.Dh=h*b+k*d+g;h=s.L;k=s.M;s.L=h*a+k*c+e;s.M=h*b+k*d+g;break;case Gf:h=s.zc;k=s.Qc;s.zc=h*a+k*c+e;s.Qc=h*b+k*d+g;h=s.L;k=s.M;s.L=h*a+k*c+e;s.M=h*b+k*d+g;break;case Hf:h=s.ra;k=s.za;s.ra=h*a+k*c+e;s.za=h*b+k*d+g;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.Fe+=h);0>a&&(s.Fe=180-s.Fe,s.Lf=-s.Lf);0>d&&(s.Fe=-s.Fe,s.Lf=-s.Lf);s.radiusX*=Math.sqrt(a*a+c*c);void 0!==s.radiusY&&(s.radiusY*=Math.sqrt(b*b+d*d));break;case If:h=s.L;k=s.M;s.L=h*
a+k*c+e;s.M=h*b+k*d+g;0!==b&&(h=180*Math.atan2(b,a)/Math.PI,0>h&&(h+=360),s.xj+=h);0>a&&(s.xj=180-s.xj,s.Ol=!s.Ol);0>d&&(s.xj=-s.xj,s.Ol=!s.Ol);s.radiusX*=Math.sqrt(a*a+c*c);s.radiusY*=Math.sqrt(b*b+d*d);break;default:z.k("Unknown Segment type: "+s.type)}}}}this.hb=!0;return this};
hf.prototype.Ma=function(a,b,c,d){var e=a.x,g=a.y,h=this.vb.x-20;a=a.y;for(var k=0,l=0,m=0,n=0,p=0,q=0,r=this.cc.o,s=r.length,t=0;t<s;t++){var v=r[t];if(v.Ot){if(c&&v.Ma(e,g,b))return!0;for(var x=v.Ab,l=v.Ha,m=v.Da,y=l,A=m,C=x.o,L=0;L<=x.length;L++){var H,U;L!==x.length?(H=C[L],U=H.type,p=H.L,q=H.M):(U=qf,p=y,q=A);switch(U){case Ef:n=Lf(e,g,h,a,l,m,y,A);if(isNaN(n))return!0;k+=n;y=p;A=q;break;case qf:n=Lf(e,g,h,a,l,m,p,q);if(isNaN(n))return!0;k+=n;break;case Ff:n=Le(l,m,H.zc,H.Qc,H.Ch,H.Dh,p,q,h,
a,e,g,.5);k+=n;break;case Gf:n=Le(l,m,(l+2*H.zc)/3,(m+2*H.Qc)/3,(2*H.zc+p)/3,(2*H.Qc+q)/3,p,q,h,a,e,g,.5);k+=n;break;case Hf:case If:U=H.type===Hf?Jf(H,v):Kf(H,v,l,m);var ea=U.length;if(0===ea){n=Lf(e,g,h,a,l,m,H.ra,H.za);if(isNaN(n))return!0;k+=n;break}for(var W=null,P=0;P<ea;P++){W=U[P];if(0===P){n=Lf(e,g,h,a,l,m,W[0],W[1]);if(isNaN(n))return!0;k+=n}n=Le(W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],h,a,e,g,.5);k+=n}null!==W&&(p=W[6],q=W[7]);break;default:z.k("Unknown Segment type: "+H.type)}l=p;m=q}if(0!==
k)return!0;k=0}else if(v.Ma(e,g,d?b:b+2))return!0}return 0!==k};function Lf(a,b,c,d,e,g,h,k){if(te(e,g,h,k,.05,a,b))return NaN;var l=(a-c)*(g-k);if(0===l)return 0;var m=((a*d-b*c)*(e-h)-(a-c)*(e*k-g*h))/l;b=(a*d-b*c)*(g-k)/l;if(m>=a)return 0;if((e>h?e-h:h-e)<(g>k?g-k:k-g)){if(e=a=0,g<k?(a=g,e=k):(a=k,e=g),b<a||b>e)return 0}else if(e<h?(a=e,e=h):a=h,m<a||m>e)return 0;return 0<l?1:-1}function Pf(a,b,c,d){a=a.cc.o;for(var e=a.length,g=0;g<e;g++)if(a[g].Ma(b,c,d))return!0;return!1}
hf.prototype.getPointAlongPath=function(a){(0>a||1<a)&&z.ka(a,"0 <= fraction <= 1",hf,"getPointAlongPath:fraction");var b=this.cc.first(),c=z.rb(),d=[];d.push(b.Ha);d.push(b.Da);for(var e=b.Ha,g=b.Da,h=e,k=g,l=b.Ab.o,m=l.length,n=0;n<m;n++){var p=l[n];switch(p.ba){case Ef:c.push(d);d=[];d.push(p.L);d.push(p.M);e=p.L;g=p.M;h=e;k=g;break;case qf:d.push(p.L);d.push(p.M);e=p.L;g=p.M;break;case Ff:we(e,g,p.Dd,p.Ne,p.nh,p.zg,p.zb,p.Gb,.5,d);e=p.L;g=p.M;break;case Gf:Je(e,g,p.Dd,p.Ne,p.zb,p.Gb,.5,d);e=p.L;
g=p.M;break;case Hf:var q=Jf(p,b),r=q.length;if(0===r){d.push(p.ra);d.push(p.za);e=p.ra;g=p.za;break}for(var s=0;s<r;s++){var t=q[s];we(e,g,t[2],t[3],t[4],t[5],t[6],t[7],.5,d);e=t[6];g=t[7]}break;case If:q=Kf(p,b,e,g);r=q.length;for(s=0;s<r;s++)t=q[s],we(e,g,t[2],t[3],t[4],t[5],t[6],t[7],.5,d),e=t[6],g=t[7];break;default:z.k("Segment not of valid type")}p.Th&&(d.push(h),d.push(k))}c.push(d);q=0;h=c.length;for(k=d=b=0;k<h;k++)for(l=c[k],m=l.length,n=0;n<m;n+=2)e=l[n],g=l[n+1],0!==n&&(p=Math.sqrt(vb(b,
d,e,g)),q+=p),b=e,d=g;a*=q;for(k=q=0;k<h;k++)for(l=c[k],m=l.length,n=0;n<m;n++){e=l[n];g=l[n+1];if(0!==n){p=Math.sqrt(vb(b,d,e,g));if(q+p>a)return n=(a-q)/p,z.xa(c),new N(b+(e-b)*n,d+(g-d)*n);q+=p}b=e;d=g}z.xa(c);return null};z.defineProperty(hf,{type:"type"},function(){return this.ba},function(a){this.ba!==a&&(u&&z.Ba(a,hf,hf,"type"),this.G&&z.oa(this,a),this.ba=a,this.hb=!0)});
z.defineProperty(hf,{Ha:"startX"},function(){return this.xc},function(a){this.xc!==a&&(u&&z.p(a,hf,"startX"),this.G&&z.oa(this,a),this.xc=a,this.hb=!0)});z.defineProperty(hf,{Da:"startY"},function(){return this.Cc},function(a){this.Cc!==a&&(u&&z.p(a,hf,"startY"),this.G&&z.oa(this,a),this.Cc=a,this.hb=!0)});z.defineProperty(hf,{L:"endX"},function(){return this.zb},function(a){this.zb!==a&&(u&&z.p(a,hf,"endX"),this.G&&z.oa(this,a),this.zb=a,this.hb=!0)});
z.defineProperty(hf,{M:"endY"},function(){return this.Gb},function(a){this.Gb!==a&&(u&&z.p(a,hf,"endY"),this.G&&z.oa(this,a),this.Gb=a,this.hb=!0)});z.defineProperty(hf,{cc:"figures"},function(){return this.Dj},function(a){this.Dj!==a&&(u&&z.l(a,J,hf,"figures"),this.G&&z.oa(this,a),this.Dj=a,this.hb=!0)});hf.prototype.add=hf.prototype.add=function(a){this.Dj.add(a);return this};
hf.prototype.setSpots=function(a,b,c,d,e,g,h,k){this.G&&z.oa(this);this.ci=(new Q(a,b,e,g)).freeze();this.di=(new Q(c,d,h,k)).freeze();return this};z.defineProperty(hf,{C:"spot1"},function(){return this.ci},function(a){u&&z.l(a,Q,hf,"spot1");this.G&&z.oa(this,a);this.ci=a.V()});z.defineProperty(hf,{D:"spot2"},function(){return this.di},function(a){u&&z.l(a,Q,hf,"spot2");this.G&&z.oa(this,a);this.di=a.V()});
z.defineProperty(hf,{Xd:"defaultStretch"},function(){return this.Ci},function(a){u&&z.Ba(a,O,hf,"stretch");this.G&&z.oa(this,a);this.Ci=a});z.w(hf,{vb:"bounds"},function(){this.iA()&&(this.eB(),this.sh());return this.Xu});function kf(a,b,c,d){z.kc(this);this.G=!1;void 0===c&&(c=!0);this.im=c;void 0===d&&(d=!0);this.ro=d;void 0!==a?(u&&z.p(a,kf,"sx"),this.xc=a):this.xc=0;void 0!==b?(u&&z.p(b,kf,"sy"),this.Cc=b):this.Cc=0;this.Ko=new J(Qf);this.ow=this.Ko.H;this.hb=!0}z.ia("PathFigure",kf);z.ji(kf);
kf.prototype.copy=function(){var a=new kf;a.im=this.im;a.ro=this.ro;a.xc=this.xc;a.Cc=this.Cc;for(var b=this.Ko.o,c=b.length,d=a.Ko,e=0;e<c;e++){var g=b[e].copy();d.add(g)}a.ow=this.ow;a.hb=this.hb;return a};kf.prototype.equalsApprox=kf.prototype.Mc=function(a){if(!(a instanceof kf&&eb(this.Ha,a.Ha)&&eb(this.Da,a.Da)))return!1;var b=this.Ab.o;a=a.Ab.o;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Mc(a[d]))return!1;return!0};f=kf.prototype;
f.toString=function(a){void 0===a&&(a=-1);for(var b=0>a?"M"+this.Ha.toString()+" "+this.Da.toString():"M"+this.Ha.toFixed(a)+" "+this.Da.toFixed(a),c=this.Ab.o,d=c.length,e=0;e<d;e++)b+=" "+c[e].toString(a);return b};f.freeze=function(){this.G=!0;var a=this.Ab;a.freeze();for(var b=a.o,a=a.length,c=0;c<a;c++)b[c].freeze();return this};f.Wa=function(){this.G=!1;var a=this.Ab;a.Wa();for(var a=a.o,b=a.length,c=0;c<b;c++)a[c].Wa();return this};
f.iA=function(){if(this.hb)return!0;var a=this.Ab;if(this.ow!==a.H)return!0;for(var a=a.o,b=a.length,c=0;c<b;c++)if(a[c].hb)return!0;return!1};f.eB=function(){this.hb=!1;var a=this.Ab;this.ow=a.H;for(var a=a.o,b=a.length,c=0;c<b;c++){var d=a[c];d.hb=!1;d.ng=null}};z.defineProperty(kf,{Ot:"isFilled"},function(){return this.im},function(a){u&&z.g(a,"boolean",kf,"isFilled");this.G&&z.oa(this,a);this.im=a});
z.defineProperty(kf,{tk:"isShadowed"},function(){return this.ro},function(a){u&&z.g(a,"boolean",kf,"isShadowed");this.G&&z.oa(this,a);this.ro=a});z.defineProperty(kf,{Ha:"startX"},function(){return this.xc},function(a){u&&z.p(a,kf,"startX");this.G&&z.oa(this,a);this.xc=a;this.hb=!0});z.defineProperty(kf,{Da:"startY"},function(){return this.Cc},function(a){u&&z.p(a,kf,"startY");this.G&&z.oa(this,a);this.Cc=a;this.hb=!0});
z.defineProperty(kf,{Ab:"segments"},function(){return this.Ko},function(a){u&&z.l(a,J,kf,"segments");this.G&&z.oa(this,a);this.Ko=a;this.hb=!0});kf.prototype.add=kf.prototype.add=function(a){this.Ko.add(a);return this};
kf.prototype.Ma=function(a,b,c){for(var d=this.Ha,e=this.Da,g=d,h=e,k=this.Ab.o,l=k.length,m=0;m<l;m++){var n=k[m];switch(n.type){case Ef:g=n.L;h=n.M;d=n.L;e=n.M;break;case qf:if(te(d,e,n.L,n.M,c,a,b))return!0;d=n.L;e=n.M;break;case Ff:if(ue(d,e,n.zc,n.Qc,n.Ch,n.Dh,n.L,n.M,.5,a,b,c))return!0;d=n.L;e=n.M;break;case Gf:if(ye(d,e,n.zc,n.Qc,n.L,n.M,.5,a,b,c))return!0;d=n.L;e=n.M;break;case Hf:case If:var p=n.type===Hf?Jf(n,this):Kf(n,this,d,e),q=p.length;if(0===q){if(te(d,e,n.ra,n.za,c,a,b))return!0;
d=n.ra;e=n.za;break}for(var r=null,s=0;s<q;s++)if(r=p[s],0===s&&te(d,e,r[0],r[1],c,a,b)||ue(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],.5,a,b,c))return!0;null!==r&&(d=r[6],e=r[7]);break;default:z.k("Unknown Segment type: "+n.type)}if(n.ix&&(d!==g||e!==h)&&te(d,e,g,h,c,a,b))return!0}return!1};
function Qf(a,b,c,d,e,g,h,k){z.kc(this);this.G=!1;void 0===a?a=qf:u&&z.Ba(a,Qf,Qf,"constructor:type");this.ba=a;void 0!==b?(u&&z.p(b,Qf,"ex"),this.zb=b):this.zb=0;void 0!==c?(u&&z.p(c,Qf,"ey"),this.Gb=c):this.Gb=0;void 0===d&&(d=0);void 0===e&&(e=0);void 0===g&&(g=0);void 0===h&&(h=0);a===If?(a=g%360,0>a&&(a+=360),this.Dd=a,this.Ne=0,u&&z.p(d,Qf,"x1"),this.nh=Math.max(d,0),u&&z.p(e,Qf,"y1"),this.zg=Math.max(e,0),this.wo="boolean"===typeof h?!!h:!1,this.Ln=!!k):(u&&z.p(d,Qf,"x1"),this.Dd=d,u&&z.p(e,
Qf,"y1"),this.Ne=e,u&&z.p(g,Qf,"x2"),a===Hf&&(g=Math.max(g,0)),this.nh=g,"number"===typeof h?(a===Hf&&(h=Math.max(h,0)),this.zg=h):this.zg=0,this.Ln=this.wo=!1);this.Th=!1;this.hb=!0;this.ng=null}z.ia("PathSegment",Qf);z.ji(Qf);Qf.prototype.copy=function(){var a=new Qf;a.ba=this.ba;a.zb=this.zb;a.Gb=this.Gb;a.Dd=this.Dd;a.Ne=this.Ne;a.nh=this.nh;a.zg=this.zg;a.wo=this.wo;a.Ln=this.Ln;a.Th=this.Th;a.hb=this.hb;return a};
Qf.prototype.equalsApprox=Qf.prototype.Mc=function(a){if(!(a instanceof Qf)||this.type!==a.type||this.ix!==a.ix)return!1;switch(this.type){case Ef:case qf:return eb(this.L,a.L)&&eb(this.M,a.M);case Ff:return eb(this.L,a.L)&&eb(this.M,a.M)&&eb(this.zc,a.zc)&&eb(this.Qc,a.Qc)&&eb(this.Ch,a.Ch)&&eb(this.Dh,a.Dh);case Gf:return eb(this.L,a.L)&&eb(this.M,a.M)&&eb(this.zc,a.zc)&&eb(this.Qc,a.Qc);case Hf:return eb(this.Fe,a.Fe)&&eb(this.Lf,a.Lf)&&eb(this.ra,a.ra)&&eb(this.za,a.za)&&eb(this.radiusX,a.radiusX)&&
eb(this.radiusY,a.radiusY);case If:return this.Ol===a.Ol&&this.mx===a.mx&&eb(this.xj,a.xj)&&eb(this.L,a.L)&&eb(this.M,a.M)&&eb(this.radiusX,a.radiusX)&&eb(this.radiusY,a.radiusY);default:return!1}};
Qf.prototype.toString=function(a){void 0===a&&(a=-1);var b="";switch(this.type){case Ef:b=0>a?"M"+this.L.toString()+" "+this.M.toString():"M"+this.L.toFixed(a)+" "+this.M.toFixed(a);break;case qf:b=0>a?"L"+this.L.toString()+" "+this.M.toString():"L"+this.L.toFixed(a)+" "+this.M.toFixed(a);break;case Ff:b=0>a?"C"+this.zc.toString()+" "+this.Qc.toString()+" "+this.Ch.toString()+" "+this.Dh.toString()+" "+this.L.toString()+" "+this.M.toString():"C"+this.zc.toFixed(a)+" "+this.Qc.toFixed(a)+" "+this.Ch.toFixed(a)+
" "+this.Dh.toFixed(a)+" "+this.L.toFixed(a)+" "+this.M.toFixed(a);break;case Gf:b=0>a?"Q"+this.zc.toString()+" "+this.Qc.toString()+" "+this.L.toString()+" "+this.M.toString():"Q"+this.zc.toFixed(a)+" "+this.Qc.toFixed(a)+" "+this.L.toFixed(a)+" "+this.M.toFixed(a);break;case Hf:b=0>a?"B"+this.Fe.toString()+" "+this.Lf.toString()+" "+this.ra.toString()+" "+this.za.toString()+" "+this.radiusX:"B"+this.Fe.toFixed(a)+" "+this.Lf.toFixed(a)+" "+this.ra.toFixed(a)+" "+this.za.toFixed(a)+" "+this.radiusX;
break;case If:b=0>a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xj.toString()+" "+(this.mx?1:0)+" "+(this.Ol?1:0)+" "+this.L.toString()+" "+this.M.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.xj.toFixed(a)+" "+(this.mx?1:0)+" "+(this.Ol?1:0)+" "+this.L.toFixed(a)+" "+this.M.toFixed(a);break;default:b=this.type.toString()}return b+(this.Th?"z":"")};var Ef;Qf.Move=Ef=z.s(Qf,"Move",0);var qf;Qf.Line=qf=z.s(Qf,"Line",1);var Ff;
Qf.Bezier=Ff=z.s(Qf,"Bezier",2);var Gf;Qf.QuadraticBezier=Gf=z.s(Qf,"QuadraticBezier",3);var Hf;Qf.Arc=Hf=z.s(Qf,"Arc",4);var If;Qf.SvgArc=If=z.s(Qf,"SvgArc",4);Qf.prototype.freeze=function(){this.G=!0;return this};Qf.prototype.Wa=function(){this.G=!1;return this};Qf.prototype.close=Qf.prototype.close=function(){this.Th=!0;return this};
function Jf(a,b){if(null!==a.ng&&!1===b.hb)return a.ng;var c=a.radiusX,d=a.radiusY;void 0===d&&(d=c);if(0===c||0===d)return a.ng=[],a.ng;var e=a.Dd,g=a.Ne,h=ef(c<d?c:d,a.Fe,a.Fe+a.Lf,!1);if(c!==d){var k=z.Hh();k.reset();c<d?k.scale(1,d/c):k.scale(c/d,1);Cf(h,k);z.jf(k)}c=h.length;for(d=0;d<c;d++)k=h[d],k[0]+=e,k[1]+=g,k[2]+=e,k[3]+=g,k[4]+=e,k[5]+=g,k[6]+=e,k[7]+=g;a.ng=h;return a.ng}
function Kf(a,b,c,d){function e(a,b,c,d){return(a*d<b*c?-1:1)*Math.acos((a*c+b*d)/(Math.sqrt(a*a+b*b)*Math.sqrt(c*c+d*d)))}if(null!==a.ng&&!1===b.hb)return a.ng;b=a.nh;var g=a.zg;if(0===b||0===g)return a.ng=[],a.ng;var h=Math.PI/180*a.Dd,k=a.wo,l=a.Ln,m=a.zb,n=a.Gb,p=Math.cos(h),q=Math.sin(h),r=p*(c-m)/2+q*(d-n)/2,h=-q*(c-m)/2+p*(d-n)/2,s=r*r/(b*b)+h*h/(g*g);1<s&&(b*=Math.sqrt(s),g*=Math.sqrt(s));s=(k===l?-1:1)*Math.sqrt((b*b*g*g-b*b*h*h-g*g*r*r)/(b*b*h*h+g*g*r*r));isNaN(s)&&(s=0);k=s*b*h/g;s=s*-g*
r/b;isNaN(k)&&(k=0);isNaN(s)&&(s=0);c=(c+m)/2+p*k-q*s;d=(d+n)/2+q*k+p*s;n=e(1,0,(r-k)/b,(h-s)/g);p=(r-k)/b;m=(h-s)/g;r=(-r-k)/b;k=(-h-s)/g;h=e(p,m,r,k);r=(p*r+m*k)/(Math.sqrt(p*p+m*m)*Math.sqrt(r*r+k*k));-1>=r?h=Math.PI:1<=r&&(h=0);!l&&0<h&&(h-=2*Math.PI);l&&0>h&&(h+=2*Math.PI);l=b>g?1:b/g;r=b>g?g/b:1;b=ef(b>g?b:g,n,n+h,!0);g=z.Hh();g.reset();g.translate(c,d);g.rotate(a.Dd,0,0);g.scale(l,r);Cf(b,g);z.jf(g);a.ng=b;return a.ng}
z.defineProperty(Qf,{ix:"isClosed"},function(){return this.Th},function(a){this.Th!==a&&(this.Th=a,this.hb=!0)});z.defineProperty(Qf,{type:"type"},function(){return this.ba},function(a){u&&z.Ba(a,Qf,Qf,"type");this.G&&z.oa(this,a);this.ba=a;this.hb=!0});z.defineProperty(Qf,{L:"endX"},function(){return this.zb},function(a){u&&z.p(a,Qf,"endX");this.G&&z.oa(this,a);this.zb=a;this.hb=!0});
z.defineProperty(Qf,{M:"endY"},function(){return this.Gb},function(a){u&&z.p(a,Qf,"endY");this.G&&z.oa(this,a);this.Gb=a;this.hb=!0});z.defineProperty(Qf,{zc:"point1X"},function(){return this.Dd},function(a){u&&z.p(a,Qf,"point1X");this.G&&z.oa(this,a);this.Dd=a;this.hb=!0});z.defineProperty(Qf,{Qc:"point1Y"},function(){return this.Ne},function(a){u&&z.p(a,Qf,"point1Y");this.G&&z.oa(this,a);this.Ne=a;this.hb=!0});
z.defineProperty(Qf,{Ch:"point2X"},function(){return this.nh},function(a){u&&z.p(a,Qf,"point2X");this.G&&z.oa(this,a);this.nh=a;this.hb=!0});z.defineProperty(Qf,{Dh:"point2Y"},function(){return this.zg},function(a){u&&z.p(a,Qf,"point2Y");this.G&&z.oa(this,a);this.zg=a;this.hb=!0});z.defineProperty(Qf,{ra:"centerX"},function(){return this.Dd},function(a){u&&z.p(a,Qf,"centerX");this.G&&z.oa(this,a);this.Dd=a;this.hb=!0});
z.defineProperty(Qf,{za:"centerY"},function(){return this.Ne},function(a){u&&z.p(a,Qf,"centerY");this.G&&z.oa(this,a);this.Ne=a;this.hb=!0});z.defineProperty(Qf,{radiusX:"radiusX"},function(){return this.nh},function(a){u&&z.p(a,Qf,"radiusX");0>a&&z.ka(a,">= zero",Qf,"radiusX");this.G&&z.oa(this,a);this.nh=a;this.hb=!0});z.defineProperty(Qf,{radiusY:"radiusY"},function(){return this.zg},function(a){u&&z.p(a,Qf,"radiusY");0>a&&z.ka(a,">= zero",Qf,"radiusY");this.G&&z.oa(this,a);this.zg=a;this.hb=!0});
z.defineProperty(Qf,{Fe:"startAngle"},function(){return this.zb},function(a){this.zb!==a&&(this.G&&z.oa(this,a),u&&z.p(a,Qf,"startAngle"),a%=360,0>a&&(a+=360),this.zb=a,this.hb=!0)});z.defineProperty(Qf,{Lf:"sweepAngle"},function(){return this.Gb},function(a){u&&z.p(a,Qf,"sweepAngle");this.G&&z.oa(this,a);360<a&&(a=360);-360>a&&(a=-360);this.Gb=a;this.hb=!0});z.defineProperty(Qf,{Ol:"isClockwiseArc"},function(){return this.Ln},function(a){this.G&&z.oa(this,a);this.Ln=a;this.hb=!0});
z.defineProperty(Qf,{mx:"isLargeArc"},function(){return this.wo},function(a){this.G&&z.oa(this,a);this.wo=a;this.hb=!0});z.defineProperty(Qf,{xj:"xAxisRotation"},function(){return this.Dd},function(a){u&&z.p(a,Qf,"xAxisRotation");a%=360;0>a&&(a+=360);this.G&&z.oa(this,a);this.Dd=a;this.hb=!0});
function Rf(){this.Z=null;this.wz=(new N(0,0)).freeze();this.Dy=(new N(0,0)).freeze();this.Tu=this.Qv=0;this.Uu=1;this.Ev="";this.yw=this.kv=!1;this.gv=this.Wu=0;this.zj=this.rv=this.Bv=!1;this.Yq=null;this.ww=0;this.Bg=this.vw=null}z.ia("InputEvent",Rf);
Rf.prototype.copy=function(){var a=new Rf;a.Z=this.Z;a.wz.assign(this.ue);a.Dy.assign(this.ga);a.Qv=this.Qv;a.Tu=this.Tu;a.Uu=this.Uu;a.Ev=this.Ev;a.kv=this.kv;a.yw=this.yw;a.Wu=this.Wu;a.gv=this.gv;a.Bv=this.Bv;a.rv=this.rv;a.zj=this.zj;a.Yq=this.Yq;a.ww=this.ww;a.vw=this.vw;a.Bg=this.Bg;return a};
Rf.prototype.toString=function(){var a="^";0!==this.yd&&(a+="M:"+this.yd);0!==this.button&&(a+="B:"+this.button);""!==this.key&&(a+="K:"+this.key);0!==this.Pe&&(a+="C:"+this.Pe);0!==this.Dl&&(a+="D:"+this.Dl);this.Gc&&(a+="h");this.bubbles&&(a+="b");null!==this.ga&&(a+="@"+this.ga.toString());return a};z.defineProperty(Rf,{h:"diagram"},function(){return this.Z},function(a){this.Z=a});z.defineProperty(Rf,{ue:"viewPoint"},function(){return this.wz},function(a){z.l(a,N,Rf,"viewPoint");this.wz.assign(a)});
z.defineProperty(Rf,{ga:"documentPoint"},function(){return this.Dy},function(a){z.l(a,N,Rf,"documentPoint");this.Dy.assign(a)});z.defineProperty(Rf,{yd:"modifiers"},function(){return this.Qv},function(a){this.Qv=a});z.defineProperty(Rf,{button:"button"},function(){return this.Tu},function(a){this.Tu=a;if(null===this.event)switch(a){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}});
z.defineProperty(Rf,{buttons:"buttons"},function(){return this.Uu},function(a){this.Uu=a});z.defineProperty(Rf,{key:"key"},function(){return this.Ev},function(a){this.Ev=a});z.defineProperty(Rf,{Fl:"down"},function(){return this.kv},function(a){this.kv=a});z.defineProperty(Rf,{up:"up"},function(){return this.yw},function(a){this.yw=a});z.defineProperty(Rf,{Pe:"clickCount"},function(){return this.Wu},function(a){this.Wu=a});
z.defineProperty(Rf,{Dl:"delta"},function(){return this.gv},function(a){this.gv=a});z.defineProperty(Rf,{Qt:"isMultiTouch"},function(){return this.Bv},function(a){this.Bv=a});z.defineProperty(Rf,{Gc:"handled"},function(){return this.rv},function(a){this.rv=a});z.defineProperty(Rf,{bubbles:"bubbles"},function(){return this.zj},function(a){this.zj=a});z.defineProperty(Rf,{event:"event"},function(){return this.Yq},function(a){this.Yq=a});
z.w(Rf,{mj:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a?!0:(a=window.PointerEvent)&&this.event instanceof a&&"touch"===this.event.pointerType});z.w(Rf,{sk:"isMac"},function(){return z.sk});z.defineProperty(Rf,{timestamp:"timestamp"},function(){return this.ww},function(a){this.ww=a});z.defineProperty(Rf,{Tg:"targetDiagram"},function(){return this.vw},function(a){this.vw=a});
z.defineProperty(Rf,{Ge:"targetObject"},function(){return this.Bg},function(a){this.Bg=a});z.defineProperty(Rf,{control:"control"},function(){return 0!==(this.yd&1)},function(a){this.yd=a?this.yd|1:this.yd&-2});z.defineProperty(Rf,{shift:"shift"},function(){return 0!==(this.yd&4)},function(a){this.yd=a?this.yd|4:this.yd&-5});z.defineProperty(Rf,{alt:"alt"},function(){return 0!==(this.yd&2)},function(a){this.yd=a?this.yd|2:this.yd&-3});
z.defineProperty(Rf,{$t:"meta"},function(){return 0!==(this.yd&8)},function(a){this.yd=a?this.yd|8:this.yd&-9});z.defineProperty(Rf,{left:"left"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?0===this.button:0!==(this.buttons&1)},function(a){this.buttons=a?this.buttons|1:this.buttons&-2});
z.defineProperty(Rf,{right:"right"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?2===this.button:0!==(this.buttons&2)},function(a){this.buttons=a?this.buttons|2:this.buttons&-3});z.defineProperty(Rf,{VK:"middle"},function(){var a=this.event;return null!==a&&a instanceof MouseEvent&&("mousedown"===a.type||"mouseup"===a.type)?1===this.button:0!==(this.buttons&4)},function(a){this.buttons=a?this.buttons|4:this.buttons&-5});
function Sf(){this.Z=null;this.Ub="";this.$v=this.tw=null;this.Vu=!1}z.ia("DiagramEvent",Sf);Sf.prototype.copy=function(){var a=new Sf;a.Z=this.Z;a.Ub=this.Ub;a.tw=this.tw;a.$v=this.$v;a.Vu=this.Vu;return a};Sf.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");null!==this.WA&&(a+=":"+this.WA.toString());null!==this.CA&&(a+="("+this.CA.toString()+")");return a};z.defineProperty(Sf,{h:"diagram"},function(){return this.Z},function(a){this.Z=a});
z.defineProperty(Sf,{name:"name"},function(){return this.Ub},function(a){this.Ub=a});z.defineProperty(Sf,{WA:"subject"},function(){return this.tw},function(a){this.tw=a});z.defineProperty(Sf,{CA:"parameter"},function(){return this.$v},function(a){this.$v=a});z.defineProperty(Sf,{cancel:"cancel"},function(){return this.Vu},function(a){this.Vu=a});function Tf(){this.vq=Uf;this.Bm=this.Pv="";this.Wr=this.Xr=this.$r=this.as=this.Zr=this.Z=this.ie=null}z.ia("ChangedEvent",Tf);var Vf;
Tf.Transaction=Vf=z.s(Tf,"Transaction",-1);var Uf;Tf.Property=Uf=z.s(Tf,"Property",0);var Wf;Tf.Insert=Wf=z.s(Tf,"Insert",1);var Xf;Tf.Remove=Xf=z.s(Tf,"Remove",2);Tf.prototype.clear=Tf.prototype.clear=function(){this.Wr=this.Xr=this.$r=this.as=this.Zr=this.Z=this.ie=null};
Tf.prototype.copy=function(){var a=new Tf;a.vq=this.vq;a.Pv=this.Pv;a.Bm=this.Bm;a.ie=this.ie;a.Z=this.Z;a.Zr=this.Zr;var b=this.as;a.as=z.Za(b)&&"function"===typeof b.V?b.V():b;b=this.$r;a.$r=z.Za(b)&&"function"===typeof b.V?b.V():b;b=this.Xr;a.Xr=z.Za(b)&&"function"===typeof b.V?b.V():b;b=this.Wr;a.Wr=z.Za(b)&&"function"===typeof b.V?b.V():b;return a};
Tf.prototype.toString=function(){var a="",a=this.Dc===Vf?a+"* ":this.Dc===Uf?a+(null!==this.ha?"!m":"!d"):a+((null!==this.ha?"!m":"!d")+this.Dc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.rf&&this.rf!==this.propertyName&&(a+=" "+this.rf);a+=": ";this.Dc===Vf?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=ka(this.object)),null!==this.oldValue&&(a+="  old: "+ka(this.oldValue)),null!==this.Ng&&(a+=" "+this.Ng),null!==this.newValue&&
(a+="  new: "+ka(this.newValue)),null!==this.Lg&&(a+=" "+this.Lg));return a};Tf.prototype.getValue=Tf.prototype.na=function(a){return a?this.oldValue:this.newValue};Tf.prototype.getParam=function(a){return a?this.Ng:this.Lg};Tf.prototype.canUndo=Tf.prototype.canUndo=function(){return null!==this.ha||null!==this.h?!0:!1};Tf.prototype.undo=Tf.prototype.undo=function(){this.canUndo()&&(null!==this.ha?this.ha.Um(this,!0):null!==this.h&&this.h.Um(this,!0))};
Tf.prototype.canRedo=Tf.prototype.canRedo=function(){return null!==this.ha||null!==this.h?!0:!1};Tf.prototype.redo=Tf.prototype.redo=function(){this.canRedo()&&(null!==this.ha?this.ha.Um(this,!1):null!==this.h&&this.h.Um(this,!1))};z.defineProperty(Tf,{ha:"model"},function(){return this.ie},function(a){this.ie=a});z.defineProperty(Tf,{h:"diagram"},function(){return this.Z},function(a){this.Z=a});
z.defineProperty(Tf,{Dc:"change"},function(){return this.vq},function(a){u&&z.Ba(a,Tf,Tf,"change");this.vq=a});z.defineProperty(Tf,{rf:"modelChange"},function(){return this.Pv},function(a){u&&z.g(a,"string",Tf,"modelChange");this.Pv=a});z.defineProperty(Tf,{propertyName:"propertyName"},function(){return this.Bm},function(a){u&&"string"!==typeof a&&z.g(a,"function",Tf,"propertyName");this.Bm=a});
z.w(Tf,{SE:"isTransactionFinished"},function(){return this.vq===Vf&&("CommittedTransaction"===this.Bm||"FinishedUndo"===this.Bm||"FinishedRedo"===this.Bm)});z.defineProperty(Tf,{object:"object"},function(){return this.Zr},function(a){this.Zr=a});z.defineProperty(Tf,{oldValue:"oldValue"},function(){return this.as},function(a){this.as=a});z.defineProperty(Tf,{Ng:"oldParam"},function(){return this.$r},function(a){this.$r=a});
z.defineProperty(Tf,{newValue:"newValue"},function(){return this.Xr},function(a){this.Xr=a});z.defineProperty(Tf,{Lg:"newParam"},function(){return this.Wr},function(a){this.Wr=a});
function M(a){1<arguments.length&&z.k("Model constructor can only take one optional argument, the Array of node data.");z.kc(this);this.Kq=this.Ub="";this.Hi=!1;this.cz={};this.wf=[];this.vc=new na(null,Object);this.Wj="key";this.Qn=this.zo=null;this.Cq=this.Zu=!1;this.nq=null;this.wm="category";this.og=new na(null,K);this.Qj=null;this.Wi=!1;this.vz=null;this.pa=new Yf;void 0!==a&&(this.hg=a)}z.ia("Model",M);
M.prototype.cloneProtected=function(a){a.Ub=this.Ub;a.Kq=this.Kq;a.Hi=this.Hi;a.Wj=this.Wj;a.zo=this.zo;a.Qn=this.Qn;a.EJ=this.Zu;a.Cq=this.Cq;a.nq=this.nq;a.wm=this.wm};M.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};M.prototype.clear=M.prototype.clear=function(){this.wf=[];this.vc.clear();this.og.clear();this.pa.clear()};f=M.prototype;
f.toString=function(a){void 0===a&&(a=0);if(1<a)return this.ZA();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.hg;for(var c=z.ab(a),d=0;d<c;d++)var e=z.Ya(a,d),b=b+(" "+this.pb(e)+":"+ka(e))}return b};
f.Bn=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.Bl&&(a+=',\n  "dataFormat": '+this.quote(this.Bl));this.ib&&(a+=',\n  "isReadOnly": '+this.ib);"key"!==this.rj&&"string"===typeof this.rj&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.rj));this.Lz&&(a+=',\n  "copiesArrays": true');this.Kz&&(a+=',\n  "copiesArrayObjects": true');"category"!==this.pn&&"string"===typeof this.pn&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.pn));return a};
f.hu=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.Bl=a.dataFormat);a.isReadOnly&&(this.ib=a.isReadOnly);a.nodeKeyProperty&&(this.rj=a.nodeKeyProperty);a.copiesArrays&&(this.Lz=a.copiesArrays);a.copiesArrayObjects&&(this.Kz=a.copiesArrayObjects);a.nodeCategoryProperty&&(this.pn=a.nodeCategoryProperty)};function Zf(a){return',\n  "modelData": '+$f(a,a.uk)}function ag(a,b){var c=b.modelData;z.Za(c)&&(a.ku(c),a.uk=c)}
f.hB=function(){var a=this.uk,b=!1,c;for(c in a)if(!bg(c,a[c])){b=!0;break}a="";b&&(a=Zf(this));return a+',\n  "nodeDataArray": '+cg(this,this.hg,!0)};f.FA=function(a){ag(this,a);a=a.nodeDataArray;z.isArray(a)&&(this.ku(a),this.hg=a)};
function dg(a,b,c,d){if(b===c)return!0;if(typeof b!==typeof c||"function"===typeof b||"function"===typeof c)return!1;if(Array.isArray(b)&&Array.isArray(c)){if(d.na(b)===c)return!0;d.add(b,c);if(b.length!==c.length)return!1;for(var e=0;e<b.length;e++)if(!dg(a,b[e],c[e],d))return!1;return!0}if(z.Za(b)&&z.Za(c)){if(d.na(b)===c)return!0;d.add(b,c);for(e in b){var g=b[e];if(!bg(e,g)){var h=c[e];if(void 0===h||!dg(a,g,h,d))return!1}}for(var k in c)if(h=c[k],!bg(k,h)&&(g=b[k],void 0===g||!dg(a,g,h,d)))return!1;
return!0}return!1}function pg(a,b,c){a[c]!==b[c]&&z.k("Model.computeJsonDifference: Model."+c+' is not the same in both models: "'+a[c]+'" and "'+b[c]+'"')}
f.iB=function(a){pg(this,a,"nodeKeyProperty");this instanceof qg&&pg(this,a,"nodeParentKeyProperty");for(var b=new K,c=new K,d=(new K).$c(this.vc.TE),e=new na,g=a.hg,h=0;h<g.length;h++){var k=g[h],l=a.pb(k);if(void 0!==l){d.remove(l);var m=this.ne(l);null===m?(b.add(l),c.add(k)):dg(this,m,k,e)||c.add(k)}else this.oA(k),l=this.pb(k),b.add(l),c.add(k)}g="";dg(this,this.uk,a.uk,e)||(g+=Zf(this));0<b.count&&(g+=this.gy+cg(this,b.jc(),!0));0<c.count&&(g+=this.qB+cg(this,c.jc(),!0));0<d.count&&(g+=this.iy+
cg(this,d.jc(),!0));return g};M.prototype.computeJsonDifference=M.prototype.computeJSONDifference=function(a,b){z.l(a,M,M,"computeJsonDifference:newmodel");void 0===b&&(b=this.constructor===M?"go.Model":this.constructor===V?"go.GraphLinksModel":this.constructor===qg?"go.TreeModel":z.kf(this));return'{ "class": '+this.quote(b)+', "incremental": 1'+this.Bn()+this.iB(a)+"}"};f=M.prototype;f.gy=',\n  "insertedNodeKeys": ';f.qB=',\n  "modifiedNodeData": ';f.iy=',\n  "removedNodeKeys": ';
f.gB=function(a,b){var c=this,d=!1,e=new K,g=new K,h=new K;a.Zf.each(function(a){a.ha===c&&("nodeDataArray"===a.rf?a.Dc===Wf?e.add(a.newValue):a.Dc===Xf&&h.add(a.oldValue):c.le(a.object)?g.add(a.object):c.uk===a.object&&a.Dc===Uf&&(d=!0))});var k=new K;e.each(function(a){k.add(c.pb(a));b||g.add(a)});var l=new K;h.each(function(a){l.add(c.pb(a));b&&g.add(a)});var m="";d&&(m+=Zf(this));0<k.count&&(m+=(b?this.iy:this.gy)+cg(this,k.jc(),!0));0<g.count&&(m+=this.qB+cg(this,g.jc(),!0));0<l.count&&(m+=(b?
this.gy:this.iy)+cg(this,l.jc(),!0));return m};
f.EA=function(a){ag(this,a);var b=a.insertedNodeKeys;if(z.isArray(b))for(var c=z.ab(b),d=0;d<c;d++){var e=z.Ya(b,d),g=this.ne(e);null===g&&(g=this.copyNodeData({}),this.Ox(g,e),this.sl(g))}b=a.modifiedNodeData;if(z.isArray(b))for(c=z.ab(b),d=0;d<c;d++){var h=z.Ya(b,d),e=this.pb(h),g=this.ne(e);if(null!==g)for(var k in h)"__gohashid"!==k&&k!==this.rj&&this.setDataProperty(g,k,h[k])}a=a.removedNodeKeys;if(z.isArray(a))for(c=z.ab(a),d=0;d<c;d++)e=z.Ya(a,d),g=this.ne(e),null!==g&&this.Gx(g)};
M.prototype.toIncrementalJson=M.prototype.toIncrementalJSON=function(a,b){z.l(a,Tf,M,"toIncrementalJson:e");a.Dc!==Vf&&z.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+a.toString());var c=a.object;if(!(a.SE&&c instanceof rg))return'{ "incremental": 0 }';void 0===b&&(b=this.constructor===M?"go.Model":this.constructor===V?"go.GraphLinksModel":this.constructor===qg?"go.TreeModel":z.kf(this));return'{ "class": '+this.quote(b)+', "incremental": 1'+this.Bn()+this.gB(c,"FinishedUndo"===
a.propertyName)+"}"};M.prototype.toJson=M.prototype.toJSON=M.prototype.ZA=function(a){void 0===a&&(a=this.constructor===M?"go.Model":this.constructor===V?"go.GraphLinksModel":this.constructor===qg?"go.TreeModel":z.kf(this));return'{ "class": '+this.quote(a)+this.Bn()+this.hB()+"}"};
M.prototype.applyIncrementalJson=M.prototype.applyIncrementalJSON=function(a){var b=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{b=window.JSON.parse(a)}catch(c){u&&z.trace("JSON.parse error: "+c.toString())}else z.trace("WARNING: no JSON.parse available");else"object"===typeof a?b=a:z.k("Unable to modify a Model from: "+a);var d=b.incremental;"number"!==typeof d&&z.k("Unable to apply non-incremental changes to Model: "+a);0!==d&&(this.Wb("applyIncrementalJson"),this.EA(b),this.Kd("applyIncrementalJson"))};
M.fromJson=M.fromJSON=function(a,b){void 0===b&&(b=null);null!==b&&z.l(b,M,M,"fromJson:model");var c=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){u&&z.trace("JSON.parse error: "+d.toString())}else z.trace("WARNING: no JSON.parse available");else"object"===typeof a?c=a:z.k("Unable to construct a Model from: "+a);if(null===b){var e;e=null;var g=c["class"];if("string"===typeof g)try{var h=null;0===g.indexOf("go.")?(g=g.substr(3),h=aa[g]):(h=aa[g],
void 0===h&&(h=window[g]));"function"===typeof h&&(e=new h)}catch(k){}null===e||e instanceof M?b=e:z.k("Unable to construct a Model of declared class: "+c["class"])}null===b&&(b=new V);b.hu(c);b.FA(c);return b};
M.prototype.replaceJsonObjects=M.prototype.ku=function(a){if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++){var d=z.Ya(a,c);z.Za(d)&&z.LD(a,c,this.ku(d))}else if(z.Za(a)){for(c in a)if(d=a[c],z.Za(d)&&(d=this.ku(d),a[c]=d,"points"===c&&Array.isArray(d))){for(var e=0===d.length%2,g=0;g<d.length;g++)if("number"!==typeof d[g]){e=!1;break}if(e){e=new J(N);for(g=0;g<d.length/2;g++){var h=new N(d[2*g],d[2*g+1]);e.add(h)}e.freeze();a[c]=e}}if("object"===typeof a){c=a;d=a["class"];if("NaN"===d)c=NaN;else if("Date"===
d)c=new Date(a.value);else if("go.Point"===d)c=new N(sg(a.x),sg(a.y));else if("go.Size"===d)c=new Ea(sg(a.width),sg(a.height));else if("go.Rect"===d)c=new w(sg(a.x),sg(a.y),sg(a.width),sg(a.height));else if("go.Margin"===d)c=new Db(sg(a.top),sg(a.right),sg(a.bottom),sg(a.left));else if("go.Spot"===d)c="string"===typeof a["enum"]?Ub(a["enum"]):new Q(sg(a.x),sg(a.y),sg(a.offsetX),sg(a.offsetY));else if("go.Brush"===d){if(c=new Da,c.type=Ja(Da,a.type),"string"===typeof a.color&&(c.color=a.color),a.start instanceof
Q&&(c.start=a.start),a.end instanceof Q&&(c.end=a.end),"number"===typeof a.startRadius&&(c.wu=sg(a.startRadius)),"number"===typeof a.endRadius&&(c.xt=sg(a.endRadius)),a=a.colorStops,z.Za(a))for(b in a)c.addColorStop(parseFloat(b),a[b])}else"go.Geometry"===d?(b=null,b="string"===typeof a.path?sf(a.path):new hf,b.type=Ja(hf,a.type),"number"===typeof a.startX&&(b.Ha=sg(a.startX)),"number"===typeof a.startY&&(b.Da=sg(a.startY)),"number"===typeof a.endX&&(b.L=sg(a.endX)),"number"===typeof a.endY&&(b.M=
sg(a.endY)),a.spot1 instanceof Q&&(b.C=a.spot1),a.spot2 instanceof Q&&(b.D=a.spot2),c=b):"go.EnumValue"===d&&(b=a.classType,0===b.indexOf("go.")&&(b=b.substr(3)),c=Ja(aa[b],a.name));a=c}}return a};
M.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++){var e=a[d];if('"'===e||"\\"===e)b+="\\"+e;else if("\b"===e)b+="\\b";else if("\f"===e)b+="\\f";else if("\n"===e)b+="\\n";else if("\r"===e)b+="\\r";else if("\t"===e)b+="\\t";else var g=a.charCodeAt(d),b=16>g?b+("\\u000"+a.charCodeAt(d).toString(16)):32>g?b+("\\u00"+a.charCodeAt(d).toString(16)):8232===g?b+"\\u2028":8233===g?b+"\\u2029":b+e}return'"'+b+'"'};
M.prototype.writeJsonValue=M.prototype.Du=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"===typeof a?this.quote(a):"number"===typeof a?Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.Du(a.valueOf()):z.isArray(a)?cg(this,a):z.Za(a)?$f(this,a):"function"===typeof a?"null":a.toString()};
function cg(a,b,c){void 0===c&&(c=!1);var d=z.ab(b);if(0>=d)return"[]";var e=new za;e.add("[ ");c&&1<d&&e.add("\n");for(var g=0;g<d;g++){var h=z.Ya(b,g);void 0!==h&&(0<g&&(e.add(","),c&&e.add("\n")),e.add(a.Du(h)))}c&&1<d&&e.add("\n");e.add(" ]");return e.toString()}function bg(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"===typeof b?!0:!1}function tg(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}
function $f(a,b){var c=b;if(c instanceof N){var d=c;b={"class":"go.Point",x:tg(d.x),y:tg(d.y)}}else if(c instanceof Ea){var e=c;b={"class":"go.Size",width:tg(e.width),height:tg(e.height)}}else if(c instanceof w)b={"class":"go.Rect",x:tg(c.x),y:tg(c.y),width:tg(c.width),height:tg(c.height)};else if(c instanceof Db)b={"class":"go.Margin",top:tg(c.top),right:tg(c.right),bottom:tg(c.bottom),left:tg(c.left)};else if(c instanceof Q)e=c,b=e.cd()?{"class":"go.Spot",x:tg(e.x),y:tg(e.y),offsetX:tg(e.offsetX),
offsetY:tg(e.offsetY)}:{"class":"go.Spot","enum":e.toString()};else if(c instanceof Da){b={"class":"go.Brush",type:c.type.name};if(c.type===ug)b.color=c.color;else if(c.type===vg||c.type===yd)b.start=c.start,b.end=c.end,c.type===yd&&(0!==c.wu&&(b.startRadius=tg(c.wu)),isNaN(c.xt)||(b.endRadius=tg(c.xt)));if(null!==c.st){for(var g={},h=c.st.i;h.next();)g[h.key]=h.value;b.colorStops=g}}else if(c instanceof hf)b={"class":"go.Geometry",type:c.type.name},0!==c.Ha&&(b.startX=tg(c.Ha)),0!==c.Da&&(b.startY=
tg(c.Da)),0!==c.L&&(b.endX=tg(c.L)),0!==c.M&&(b.endY=tg(c.M)),c.C.N(Zb)||(b.spot1=c.C),c.D.N(ic)||(b.spot2=c.D),c.type===jf&&(b.path=rf(c));else if(c instanceof Ba)b={"class":"go.EnumValue",classType:z.kf(c.Ae),name:c.name};else if(c instanceof O||c instanceof B||c instanceof wg||c instanceof M||c instanceof xg||c instanceof ra||c instanceof yg||c instanceof wa||c instanceof Yf||c instanceof rg)return z.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+
c.toString()),"{}";g="{";c=!0;for(d in b)if(e=z.tb(b,d),!bg(d,e))if(c?c=!1:g+=", ",g+='"'+d+'":',"points"===d&&e instanceof J&&e.ba===N){h=e;e="[";for(h=h.i;h.next();){var k=h.value;1<e.length&&(e+=",");e+=a.Du(k.x);e+=",";e+=a.Du(k.y)}e+="]";g+=e}else g+=a.Du(e);return g+"}"}function sg(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}
z.defineProperty(M,{name:"name"},function(){return this.Ub},function(a){var b=this.Ub;b!==a&&(z.g(a,"string",M,"name"),this.Ub=a,this.j("name",b,a))});z.defineProperty(M,{Bl:"dataFormat"},function(){return this.Kq},function(a){var b=this.Kq;b!==a&&(z.g(a,"string",M,"dataFormat"),this.Kq=a,this.j("dataFormat",b,a))});z.defineProperty(M,{ib:"isReadOnly"},function(){return this.Hi},function(a){var b=this.Hi;b!==a&&(z.g(a,"boolean",M,"isReadOnly"),this.Hi=a,this.j("isReadOnly",b,a))});
z.defineProperty(M,{uk:"modelData"},function(){return this.cz},function(a){var b=this.cz;b!==a&&(z.g(a,"object",M,"modelData"),this.cz=a,this.j("modelData",b,a),this.Mb(a))});M.prototype.addChangedListener=M.prototype.Qm=function(a){z.g(a,"function",M,"addChangedListener:listener");null===this.Qj&&(this.Qj=new J("function"));this.Qj.add(a)};
M.prototype.removeChangedListener=M.prototype.iu=function(a){z.g(a,"function",M,"removeChangedListener:listener");null!==this.Qj&&(this.Qj.remove(a),0===this.Qj.count&&(this.Qj=null))};M.prototype.Lw=function(a){this.Bb||this.pa.CE(a);if(null!==this.Qj){var b=this.Qj,c=b.length;if(1===c)b=b.ea(0),b(a);else if(0!==c)for(var d=b.jc(),e=0;e<c;e++)b=d[e],b(a)}};M.prototype.raiseChangedEvent=M.prototype.Rc=function(a,b,c,d,e,g,h){zg(this,"",a,b,c,d,e,g,h)};
M.prototype.raiseChanged=M.prototype.j=function(a,b,c,d,e){zg(this,"",Uf,a,this,b,c,d,e)};M.prototype.raiseDataChanged=M.prototype.DA=function(a,b,c,d,e,g){zg(this,"",Uf,b,a,c,d,e,g)};function zg(a,b,c,d,e,g,h,k,l){void 0===k&&(k=null);void 0===l&&(l=null);var m=new Tf;m.ha=a;m.Dc=c;m.rf=b;m.propertyName=d;m.object=e;m.oldValue=g;m.Ng=k;m.newValue=h;m.Lg=l;a.Lw(m)}
z.defineProperty(M,{pa:"undoManager"},function(){return this.vz},function(a){var b=this.vz;b!==a&&(z.l(a,Yf,M,"undoManager"),null!==b&&b.XI(this),this.vz=a,null!==a&&a.OG(this))});z.defineProperty(M,{Bb:"skipsUndoManager"},function(){return this.Wi},function(a){z.g(a,"boolean",M,"skipsUndoManager");this.Wi=a});
M.prototype.Um=function(a,b){if(null!==a&&a.ha===this)if(a.Dc===Uf){var c=a.object,d=a.propertyName,e=a.na(b);z.Sa(c,d,e)}else a.Dc===Wf?"nodeDataArray"===a.rf?(c=a.newValue,z.Za(c)&&(d=this.pb(c),void 0!==d&&(b?(z.ii(this.wf,a.Lg),this.vc.remove(d)):(z.bj(this.wf,a.Lg,c),this.vc.add(d,c))))):""===a.rf?(c=a.object,!z.isArray(c)&&a.propertyName&&(c=z.tb(a.object,a.propertyName)),z.isArray(c)&&(d=a.newValue,e=a.Lg,b?z.ii(c,e):z.bj(c,e,d))):z.k("unknown ChangedEvent.Insert object: "+a.toString()):a.Dc===
Xf?"nodeDataArray"===a.rf?(c=a.oldValue,z.Za(c)&&(d=this.pb(c),void 0!==d&&(b?(z.bj(this.wf,a.Ng,c),this.vc.add(d,c)):(z.ii(this.wf,a.Ng),this.vc.remove(d))))):""===a.rf?(c=a.object,!z.isArray(c)&&a.propertyName&&(c=z.tb(a.object,a.propertyName)),z.isArray(c)&&(d=a.oldValue,e=a.Ng,b?z.bj(c,e,d):z.ii(c,e))):z.k("unknown ChangedEvent.Remove object: "+a.toString()):a.Dc!==Vf&&z.k("unknown ChangedEvent: "+a.toString())};M.prototype.startTransaction=M.prototype.Wb=function(a){return this.pa.Wb(a)};
M.prototype.commitTransaction=M.prototype.Kd=function(a){return this.pa.Kd(a)};M.prototype.rollbackTransaction=M.prototype.Vp=function(){return this.pa.Vp()};M.prototype.updateTargetBindings=M.prototype.Mb=function(a,b){void 0===b&&(b="");zg(this,"SourceChanged",Vf,b,a,null,null)};
z.defineProperty(M,{rj:"nodeKeyProperty"},function(){return this.Wj},function(a){var b=this.Wj;b!==a&&(Ag(a,M,"nodeKeyProperty"),""===a&&z.k("Model.nodeKeyProperty may not be the empty string"),0<this.vc.count&&z.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Wj=a,this.j("nodeKeyProperty",b,a))});function Ag(a,b,c){"string"!==typeof a&&"function"!==typeof a&&z.ic(a,"string or function",b,c)}
M.prototype.getKeyForNodeData=M.prototype.pb=function(a){if(null!==a){var b=this.Wj;if(""!==b&&(b=z.tb(a,b),void 0!==b)){if(Bg(b))return b;z.k("Key value for node data "+a+" is not a number or a string: "+b)}}};
M.prototype.setKeyForNodeData=M.prototype.Ox=function(a,b){void 0!==b&&null!==b&&Bg(b)||z.ic(b,"number or string",M,"setKeyForNodeData:key");if(null!==a){var c=this.Wj;if(""!==c)if(this.le(a)){var d=z.tb(a,c);d!==b&&null===this.ne(b)&&(z.Sa(a,c,b),this.vc.remove(d),this.vc.add(b,a),zg(this,"nodeKey",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c),this.ju(d,b))}else z.Sa(a,c,b)}};
z.defineProperty(M,{OK:"makeUniqueKeyFunction"},function(){return this.zo},function(a){var b=this.zo;b!==a&&(null!==a&&z.g(a,"function",M,"makeUniqueKeyFunction"),this.zo=a,this.j("makeUniqueKeyFunction",b,a))});function Bg(a){return"number"===typeof a||"string"===typeof a}M.prototype.containsNodeData=M.prototype.le=function(a){var b=this.pb(a);return void 0===b?!1:this.vc.na(b)===a};
M.prototype.findNodeDataForKey=M.prototype.ne=function(a){null===a&&z.k("Model.findNodeDataForKey:key must not be null");return void 0!==a&&Bg(a)?this.vc.na(a):null};
z.defineProperty(M,{hg:"nodeDataArray"},function(){return this.wf},function(a){var b=this.wf;if(b!==a){z.nt(a,M,"nodeDataArray");this.vc.clear();this.cB();for(var c=z.ab(a),d=0;d<c;d++){var e=z.Ya(a,d);if(!z.Za(e)){z.k("Model.nodeDataArray must only contain Objects, not: "+e);return}z.It(e)}this.wf=a;for(var g=new J(Object),d=0;d<c;d++){var e=z.Ya(a,d),h=this.pb(e);void 0===h?g.add(e):null!==this.vc.na(h)?g.add(e):this.vc.add(h,e)}for(d=g.i;d.next();)e=d.value,this.oA(e),g=this.pb(e),void 0!==g&&
this.vc.add(g,e);zg(this,"nodeDataArray",Uf,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=z.Ya(a,d),this.Up(e),this.Tp(e);this.QD();z.fI(a)||(this.ib=!0)}});
M.prototype.makeNodeDataKeyUnique=M.prototype.oA=function(a){if(null!==a){var b=this.Wj;if(""!==b){var c=this.pb(a);if(void 0===c||this.vc.contains(c)){var d=this.zo;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.vc.contains(c))){z.Sa(a,b,c);return}if("string"===typeof c){for(d=2;this.vc.contains(c+d);)d++;z.Sa(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.vc.count-1;this.vc.contains(d);)d--;z.Sa(a,b,d)}else z.k("Model.getKeyForNodeData returned something other than a string or a number: "+
c)}}}};M.prototype.addNodeData=M.prototype.sl=function(a){null!==a&&(z.It(a),Cg(this,a,!0))};function Cg(a,b,c){var d=a.pb(b);if(void 0===d||a.vc.na(d)!==b)if(a.oA(b),d=a.pb(b),void 0===d)z.k("Model.makeNodeDataKeyUnique failed on "+b+".  Data not added to Model.");else{a.vc.add(d,b);if(c){var e=z.ab(a.wf);z.bj(a.wf,e,b)}zg(a,"nodeDataArray",Wf,"nodeDataArray",a,null,b,null,e);a.Up(b);a.Tp(b)}}
M.prototype.addNodeDataCollection=function(a){if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++)this.sl(z.Ya(a,c));else for(a=a.i;a.next();)this.sl(a.value)};M.prototype.removeNodeData=M.prototype.Gx=function(a){null!==a&&Dg(this,a,!0)};function Dg(a,b,c){var d=a.pb(b);if(void 0!==d&&a.vc.contains(d)){a.vc.remove(d);if(c){var e=z.Fz(a.wf,b);if(0>e)return;z.ii(a.wf,e)}zg(a,"nodeDataArray",Xf,"nodeDataArray",a,b,null,e,null);a.Bu(b)}}
M.prototype.removeNodeDataCollection=function(a){if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++)this.Gx(z.Ya(a,c));else for(a=a.i;a.next();)this.Gx(a.value)};f=M.prototype;f.ju=function(a,b){var c=Eg(this,a);c instanceof K&&this.og.add(b,c)};f.cB=function(){};f.Up=function(){};f.Tp=function(){};f.Bu=function(){};function Fg(a,b,c){if(void 0!==b){var d=a.og.na(b);null===d&&(d=new K(Object),a.og.add(b,d));d.add(c)}}
function Gg(a,b,c){if(void 0!==b){var d=a.og.na(b);d instanceof K&&(void 0===c||null===c?a.og.remove(b):(d.remove(c),0===d.count&&a.og.remove(b)))}}function Eg(a,b){if(void 0===b)return null;var c=a.og.na(b);return c instanceof K?c:null}M.prototype.clearUnresolvedReferences=M.prototype.QD=function(a){void 0===a?this.og.clear():this.og.remove(a)};
z.defineProperty(M,{fK:"copyNodeDataFunction"},function(){return this.Qn},function(a){var b=this.Qn;b!==a&&(null!==a&&z.g(a,"function",M,"copyNodeDataFunction"),this.Qn=a,this.j("copyNodeDataFunction",b,a))});z.defineProperty(M,{Lz:"copiesArrays"},function(){return this.Zu},function(a){var b=this.Zu;b!==a&&(null!==a&&z.g(a,"boolean",M,"copiesArrays"),this.Zu=a,this.j("copiesArrays",b,a))});
z.defineProperty(M,{Kz:"copiesArrayObjects"},function(){return this.Cq},function(a){var b=this.Cq;b!==a&&(null!==a&&z.g(a,"boolean",M,"copiesArrayObjects"),this.Cq=a,this.j("copiesArrayObjects",b,a))});M.prototype.copyNodeData=function(a){if(null===a)return null;var b=null,b=this.Qn,b=null!==b?b(a,this):Hg(this,a,!0);z.Za(b)&&z.kc(b);return b};
function Hg(a,b,c){if(a.Lz&&Array.isArray(b)){var d=[];for(c=0;c<b.length;c++){var e=Hg(a,b[c],a.Kz);d.push(e)}z.kc(d);return d}if(c&&z.Za(b)){c=(c=b.constructor)?new c:{};for(d in b)if("__gohashid"!==d){var e=z.tb(b,d),g;g=e;g instanceof O||g instanceof B||g instanceof wg||g instanceof Ig||g instanceof Jg||g instanceof xg||g instanceof ra||g instanceof yg||g instanceof Rf||g instanceof Sf?("_"!==d[0]&&z.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+
d+'" of data object: '+b.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+g.toString()),g=!0):g=g instanceof M||g instanceof Yf||g instanceof rg||g instanceof Tf?!0:!1;g||(e=Hg(a,e,!1));z.Sa(c,d,e)}z.kc(c);return c}return b instanceof N?b.copy():b instanceof Ea?b.copy():b instanceof w?b.copy():b instanceof Q?b.copy():b instanceof Db?b.copy():b}
z.defineProperty(M,{QG:"afterCopyFunction"},function(){return this.nq},function(a){var b=this.nq;b!==a&&(null!==a&&z.g(a,"function",M,"afterCopyFunction"),this.nq=a,this.j("afterCopyFunction",b,a))});var Kg=!1;
M.prototype.setDataProperty=function(a,b,c){u&&(z.g(a,"object",M,"setDataProperty:data"),z.g(b,"string",M,"setDataProperty:propname"),""===b&&z.k("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.le(a))if(b===this.rj)this.Ox(a,c);else{if(b===this.pn){this.Lx(a,c);return}}else!Kg&&a instanceof O&&(Kg=!0,z.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));var d=z.tb(a,b);d!==c&&
(z.Sa(a,b,c),this.DA(a,b,d,c))};M.prototype.addArrayItem=function(a,b){this.bI(a,-1,b)};M.prototype.insertArrayItem=M.prototype.bI=function(a,b,c){u&&(z.nt(a,M,"insertArrayItem:arr"),z.p(b,M,"insertArrayItem:idx"));a===this.wf&&z.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=z.ab(a));z.bj(a,b,c);zg(this,"",Wf,"",a,null,c,null,b)};
M.prototype.removeArrayItem=function(a,b){void 0===b&&(b=-1);u&&(z.nt(a,M,"removeArrayItem:arr"),z.p(b,M,"removeArrayItem:idx"));a===this.wf&&z.k("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=z.ab(a)-1);var c=z.Ya(a,b);z.ii(a,b);zg(this,"",Xf,"",a,c,null,b,null)};z.defineProperty(M,{pn:"nodeCategoryProperty"},function(){return this.wm},function(a){var b=this.wm;b!==a&&(Ag(a,M,"nodeCategoryProperty"),this.wm=a,this.j("nodeCategoryProperty",b,a))});
M.prototype.getCategoryForNodeData=M.prototype.$z=function(a){if(null===a)return"";var b=this.wm;if(""===b)return"";b=z.tb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;z.k("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
M.prototype.setCategoryForNodeData=M.prototype.Lx=function(a,b){z.g(b,"string",M,"setCategoryForNodeData:cat");if(null!==a){var c=this.wm;if(""!==c)if(this.le(a)){var d=z.tb(a,c);void 0===d&&(d="");d!==b&&(z.Sa(a,c,b),zg(this,"nodeCategory",Uf,c,a,d,b))}else z.Sa(a,c,b)}};
function V(a,b){2<arguments.length&&z.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");M.call(this);this.vf=[];this.rm=new K(Object);this.hd=new na(null,Object);this.el="";this.Nk=this.Pn=this.Ao=null;this.Vh="from";this.Wh="to";this.tm=this.sm="";this.qm="category";this.vg="";this.Do="isGroup";this.kh="group";this.Dq=!1;void 0!==a&&(this.hg=a);void 0!==b&&(this.Kg=b)}z.Ra(V,M);z.ia("GraphLinksModel",V);
V.prototype.cloneProtected=function(a){M.prototype.cloneProtected.call(this,a);a.el=this.el;a.Ao=this.Ao;a.Pn=this.Pn;a.Vh=this.Vh;a.Wh=this.Wh;a.sm=this.sm;a.tm=this.tm;a.qm=this.qm;a.vg=this.vg;a.Do=this.Do;a.kh=this.kh;a.Dq=this.Dq};V.prototype.clear=V.prototype.clear=function(){M.prototype.clear.call(this);this.vf=[];this.hd.clear();this.rm.clear()};f=V.prototype;
f.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.ZA();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.hg;for(var c=z.ab(a),d=0,d=0;d<c;d++)var e=z.Ya(a,d),b=b+(" "+this.pb(e)+":"+ka(e));b+="\n link data:";a=this.Kg;c=z.ab(a);for(d=0;d<c;d++)e=z.Ya(a,d),b+=" "+this.Ll(e)+"--\x3e"+this.Ml(e)}return b};
f.Bn=function(){var a=M.prototype.Bn.call(this),b="";"category"!==this.Wt&&"string"===typeof this.Wt&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.Wt));""!==this.pj&&"string"===typeof this.pj&&(b+=',\n  "linkKeyProperty": '+this.quote(this.pj));"from"!==this.Ep&&"string"===typeof this.Ep&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.Ep));"to"!==this.Gp&&"string"===typeof this.Gp&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.Gp));""!==this.Xt&&"string"===typeof this.Xt&&(b+=',\n  "linkFromPortIdProperty": '+
this.quote(this.Xt));""!==this.Zt&&"string"===typeof this.Zt&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.Zt));""!==this.Yt&&"string"===typeof this.Yt&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.Yt));"isGroup"!==this.eu&&"string"===typeof this.eu&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.eu));"group"!==this.Pp&&"string"===typeof this.Pp&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Pp));return a+b};
f.hu=function(a){M.prototype.hu.call(this,a);a.linkKeyProperty&&(this.pj=a.linkKeyProperty);a.linkFromKeyProperty&&(this.Ep=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.Gp=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.Xt=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Zt=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.Wt=a.linkCategoryProperty);a.linkLabelKeysProperty&&(this.Yt=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&(this.eu=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&
(this.Pp=a.nodeGroupKeyProperty)};f.hB=function(){var a=M.prototype.hB.call(this),b=',\n  "linkDataArray": '+cg(this,this.Kg,!0);return a+b};f.FA=function(a){M.prototype.FA.call(this,a);a=a.linkDataArray;z.isArray(a)&&(this.ku(a),this.Kg=a)};
f.iB=function(a){a instanceof V||z.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel");""===this.pj&&z.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var b=M.prototype.iB.call(this,a);pg(this,a,"linkKeyProperty");pg(this,a,"linkFromKeyProperty");pg(this,a,"linkToKeyProperty");pg(this,a,"linkLabelKeysProperty");pg(this,a,"nodeIsGroupProperty");pg(this,a,"nodeGroupKeyProperty");for(var c=new K,d=new K,e=(new K).$c(this.hd.TE),
g=new na,h=a.Kg,k=0;k<h.length;k++){var l=h[k],m=a.lf(l);if(void 0!==m){e.remove(m);var n=this.At(m);null===n?(c.add(m),d.add(l)):dg(this,n,l,g)||d.add(l)}else this.nA(l),m=this.lf(l),c.add(m),d.add(l)}a=b;0<c.count&&(a+=this.ey+cg(this,c.jc(),!0));0<d.count&&(a+=this.pB+cg(this,d.jc(),!0));0<e.count&&(a+=this.hy+cg(this,e.jc(),!0));return a};f.ey=',\n  "insertedLinkKeys": ';f.pB=',\n  "modifiedLinkData": ';f.hy=',\n  "removedLinkKeys": ';
f.gB=function(a,b){""===this.pj&&z.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var c=M.prototype.gB.call(this,a,b),d=this,e=new K,g=new K,h=new K;a.Zf.each(function(a){a.ha===d&&("linkDataArray"===a.rf?a.Dc===Wf?e.add(a.newValue):a.Dc===Xf&&h.add(a.oldValue):d.th(a.object)&&g.add(a.object))});var k=new K;e.each(function(a){k.add(d.lf(a));b||g.add(a)});var l=new K;h.each(function(a){l.add(d.lf(a));b&&g.add(a)});0<k.count&&(c+=(b?this.hy:this.ey)+
cg(this,k.jc(),!0));0<g.count&&(c+=this.pB+cg(this,g.jc(),!0));0<l.count&&(c+=(b?this.ey:this.hy)+cg(this,l.jc(),!0));return c};
f.EA=function(a){M.prototype.EA.call(this,a);var b=a.insertedLinkKeys;if(z.isArray(b))for(var c=z.ab(b),d=0;d<c;d++){var e=z.Ya(b,d),g=this.At(e);null===g&&(g=this.Qw({}),this.IF(g,e),this.gt(g))}b=a.modifiedLinkData;if(z.isArray(b))for(c=z.ab(b),d=0;d<c;d++){var h=z.Ya(b,d),e=this.lf(h),g=this.At(e);if(null!==g)for(var k in h)"__gohashid"!==k&&k!==this.pj&&this.setDataProperty(g,k,h[k])}a=a.removedLinkKeys;if(z.isArray(a))for(c=z.ab(a),d=0;d<c;d++)e=z.Ya(a,d),g=this.At(e),null!==g&&this.Fx(g)};
f.Um=function(a,b){var c=null;if(a.Dc===Wf){if("linkDataArray"===a.rf?c=this.vf:"linkLabelKeys"===a.rf&&(c=this.rk(a.object)),z.isArray(c)){if(b)z.ii(c,a.Lg),c===this.vf&&(c=this.lf(a.newValue),void 0!==c&&this.hd.remove(c));else if(z.bj(c,a.Lg,a.newValue),c===this.vf){var d=a.newValue,c=this.lf(d);void 0!==c&&this.hd.add(c,d)}return}}else if(a.Dc===Xf&&("linkDataArray"===a.rf?c=this.vf:"linkLabelKeys"===a.rf&&(c=this.rk(a.object)),z.isArray(c))){b?(z.bj(c,a.Ng,a.oldValue),c===this.vf&&(d=a.newValue,
c=this.lf(d),void 0!==c&&this.hd.add(c,d))):(z.ii(c,a.Ng),c===this.vf&&(c=this.lf(a.newValue),void 0!==c&&this.hd.remove(c)));return}M.prototype.Um.call(this,a,b)};z.defineProperty(V,{Ez:"archetypeNodeData"},function(){return this.Nk},function(a){var b=this.Nk;b!==a&&(null!==a&&z.l(a,Object,V,"archetypeNodeData"),this.Nk=a,this.j("archetypeNodeData",b,a))});V.prototype.on=function(a){if(void 0!==a){var b=this.Nk;if(null!==b){var c=this.ne(a);null===c&&(c=this.copyNodeData(b),z.Sa(c,this.Wj,a),this.sl(c))}return a}};
z.defineProperty(V,{Ep:"linkFromKeyProperty"},function(){return this.Vh},function(a){var b=this.Vh;b!==a&&(Ag(a,V,"linkFromKeyProperty"),this.Vh=a,this.j("linkFromKeyProperty",b,a))});V.prototype.getFromKeyForLinkData=V.prototype.Ll=function(a){if(null!==a){var b=this.Vh;if(""!==b&&(b=z.tb(a,b),void 0!==b)){if(Bg(b))return b;z.k("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
V.prototype.setFromKeyForLinkData=V.prototype.Mx=function(a,b){null===b&&(b=void 0);void 0===b||Bg(b)||z.ic(b,"number or string",V,"setFromKeyForLinkData:key");if(null!==a){var c=this.Vh;if(""!==c)if(b=this.on(b),this.th(a)){var d=z.tb(a,c);d!==b&&(Gg(this,d,a),z.Sa(a,c,b),null===this.ne(b)&&Fg(this,b,a),zg(this,"linkFromKey",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
z.defineProperty(V,{Gp:"linkToKeyProperty"},function(){return this.Wh},function(a){var b=this.Wh;b!==a&&(Ag(a,V,"linkToKeyProperty"),this.Wh=a,this.j("linkToKeyProperty",b,a))});V.prototype.getToKeyForLinkData=V.prototype.Ml=function(a){if(null!==a){var b=this.Wh;if(""!==b&&(b=z.tb(a,b),void 0!==b)){if(Bg(b))return b;z.k("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
V.prototype.setToKeyForLinkData=V.prototype.Qx=function(a,b){null===b&&(b=void 0);void 0===b||Bg(b)||z.ic(b,"number or string",V,"setToKeyForLinkData:key");if(null!==a){var c=this.Wh;if(""!==c)if(b=this.on(b),this.th(a)){var d=z.tb(a,c);d!==b&&(Gg(this,d,a),z.Sa(a,c,b),null===this.ne(b)&&Fg(this,b,a),zg(this,"linkToKey",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
z.defineProperty(V,{Xt:"linkFromPortIdProperty"},function(){return this.sm},function(a){var b=this.sm;b!==a&&(Ag(a,V,"linkFromPortIdProperty"),this.sm=a,this.j("linkFromPortIdProperty",b,a))});V.prototype.getFromPortIdForLinkData=V.prototype.LH=function(a){if(null===a)return"";var b=this.sm;if(""===b)return"";a=z.tb(a,b);return void 0===a?"":a};
V.prototype.setFromPortIdForLinkData=V.prototype.PA=function(a,b){z.g(b,"string",V,"setFromPortIdForLinkData:portname");if(null!==a){var c=this.sm;if(""!==c)if(this.th(a)){var d=z.tb(a,c);void 0===d&&(d="");d!==b&&(z.Sa(a,c,b),zg(this,"linkFromPortId",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};z.defineProperty(V,{Zt:"linkToPortIdProperty"},function(){return this.tm},function(a){var b=this.tm;b!==a&&(Ag(a,V,"linkToPortIdProperty"),this.tm=a,this.j("linkToPortIdProperty",b,a))});
V.prototype.getToPortIdForLinkData=V.prototype.OH=function(a){if(null===a)return"";var b=this.tm;if(""===b)return"";a=z.tb(a,b);return void 0===a?"":a};V.prototype.setToPortIdForLinkData=V.prototype.SA=function(a,b){z.g(b,"string",V,"setToPortIdForLinkData:portname");if(null!==a){var c=this.tm;if(""!==c)if(this.th(a)){var d=z.tb(a,c);void 0===d&&(d="");d!==b&&(z.Sa(a,c,b),zg(this,"linkToPortId",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
z.defineProperty(V,{Yt:"linkLabelKeysProperty"},function(){return this.vg},function(a){var b=this.vg;b!==a&&(Ag(a,V,"linkLabelKeysProperty"),this.vg=a,this.j("linkLabelKeysProperty",b,a))});V.prototype.getLabelKeysForLinkData=V.prototype.rk=function(a){if(null===a)return z.yj;var b=this.vg;if(""===b)return z.yj;a=z.tb(a,b);return void 0===a?z.yj:a};
V.prototype.setLabelKeysForLinkData=V.prototype.JF=function(a,b){z.nt(b,V,"setLabelKeysForLinkData:arr");if(null!==a){var c=this.vg;if(""!==c)if(this.th(a)){var d=z.tb(a,c);void 0===d&&(d=z.yj);if(d!==b){for(var e=z.ab(d),g=0;g<e;g++){var h=z.Ya(d,g);Gg(this,h,a)}z.Sa(a,c,b);e=z.ab(b);for(g=0;g<e;g++)h=z.Ya(b,g),null===this.ne(h)&&Fg(this,h,a);zg(this,"linkLabelKeys",Uf,c,a,d,b);"string"===typeof c&&this.Mb(a,c)}}else z.Sa(a,c,b)}};
V.prototype.addLabelKeyForLinkData=V.prototype.Bz=function(a,b){if(null!==b&&void 0!==b&&(Bg(b)||z.ic(b,"number or string",V,"addLabelKeyForLinkData:key"),null!==a)){var c=this.vg;if(""!==c){var d=z.tb(a,c);void 0===d?(c=[],c.push(b),this.JF(a,c)):z.isArray(d)?0<=z.Fz(d,b)||(z.bj(d,Infinity,b),this.th(a)&&(null===this.ne(b)&&Fg(this,b,a),zg(this,"linkLabelKeys",Wf,c,a,null,b))):z.k(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
V.prototype.removeLabelKeyForLinkData=V.prototype.mF=function(a,b){if(null!==b&&void 0!==b&&(Bg(b)||z.ic(b,"number or string",V,"removeLabelKeyForLinkData:key"),null!==a)){var c=this.vg;if(""!==c){var d=z.tb(a,c);if(z.isArray(d)){var e=z.Fz(d,b);0>e||(z.ii(d,e),this.th(a)&&(Gg(this,b,a),zg(this,"linkLabelKeys",Xf,c,a,b,null)))}else void 0!==d&&z.k(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};
z.defineProperty(V,{Kg:"linkDataArray"},function(){return this.vf},function(a){var b=this.vf;if(b!==a){z.nt(a,V,"linkDataArray");this.hd.clear();for(var c=z.ab(a),d=0;d<c;d++){var e=z.Ya(a,d);if(!z.Za(e)){z.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}z.It(e)}this.vf=a;if(""!==this.pj){for(var g=new J(Object),d=0;d<c;d++){var e=z.Ya(a,d),h=this.lf(e);void 0===h?g.add(e):null!==this.hd.na(h)?g.add(e):this.hd.add(h,e)}for(d=g.i;d.next();)e=d.value,this.nA(e),g=this.lf(e),
void 0!==g&&this.hd.add(g,e)}g=new K(Object);for(d=0;d<c;d++)e=z.Ya(a,d),g.add(e);this.rm=g;zg(this,"linkDataArray",Uf,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=z.Ya(a,d),Lg(this,e)}});z.defineProperty(V,{pj:"linkKeyProperty"},function(){return this.el},function(a){var b=this.el;if(b!==a){Ag(a,V,"linkKeyProperty");this.el=a;this.hd.clear();for(var c=z.ab(this.Kg),d=0;d<c;d++){var e=z.Ya(this.Kg,d),g=this.lf(e);void 0!==g&&this.hd.add(g,e)}this.j("linkKeyProperty",b,a)}});
V.prototype.getKeyForLinkData=V.prototype.lf=function(a){if(null!==a){var b=this.el;if(""!==b&&(b=z.tb(a,b),void 0!==b)){if(Bg(b))return b;z.k("Key value for link data "+a+" is not a number or a string: "+b)}}};
V.prototype.setKeyForLinkData=V.prototype.IF=function(a,b){void 0!==b&&null!==b&&Bg(b)||z.ic(b,"number or string",V,"setKeyForLinkData:key");if(null!==a){var c=this.el;if(""!==c)if(this.th(a)){var d=z.tb(a,c);d!==b&&null===this.At(b)&&(z.Sa(a,c,b),this.hd.remove(d),this.hd.add(b,a),zg(this,"linkKey",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
z.defineProperty(V,{PK:"makeUniqueLinkKeyFunction"},function(){return this.Ao},function(a){var b=this.Ao;b!==a&&(null!==a&&z.g(a,"function",V,"makeUniqueLinkKeyFunction"),this.Ao=a,this.j("makeUniqueLinkKeyFunction",b,a))});V.prototype.findLinkDataForKey=V.prototype.At=function(a){null===a&&z.k("GraphLinksModel.findLinkDataForKey:key must not be null");return void 0!==a&&Bg(a)?this.hd.na(a):null};
V.prototype.makeLinkDataKeyUnique=V.prototype.nA=function(a){if(null!==a){var b=this.el;if(""!==b){var c=this.lf(a);if(void 0===c||this.hd.contains(c)){var d=this.Ao;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.hd.contains(c))){z.Sa(a,b,c);return}if("string"===typeof c){for(d=2;this.hd.contains(c+d);)d++;z.Sa(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.hd.count-1;this.hd.contains(d);)d--;z.Sa(a,b,d)}else z.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+
c)}}}};V.prototype.containsLinkData=V.prototype.th=function(a){return null===a?!1:this.rm.contains(a)};V.prototype.addLinkData=V.prototype.gt=function(a){if(null!==a){if(void 0===z.nd(a))z.kc(a);else if(this.th(a))return;Mg(this,a,!0)}};
function Mg(a,b,c){if(""!==a.pj){var d=a.lf(b);if(void 0!==d&&a.hd.na(d)===b)return;a.nA(b);d=a.lf(b);if(void 0===d){z.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+b+". Data not added to model.");return}a.hd.add(d,b)}a.rm.add(b);if(c){var e=z.ab(a.vf);z.bj(a.vf,e,b)}zg(a,"linkDataArray",Wf,"linkDataArray",a,null,b,null,e);Lg(a,b)}V.prototype.addLinkDataCollection=function(a){if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++)this.gt(z.Ya(a,c));else for(a=a.i;a.next();)this.gt(a.value)};
V.prototype.removeLinkData=V.prototype.Fx=function(a){null!==a&&Zg(this,a,!0)};function Zg(a,b,c){a.rm.remove(b);var d=a.lf(b);void 0!==d&&a.hd.remove(d);if(c){var e=a.vf.indexOf(b);if(0>e)return;z.ii(a.vf,e)}zg(a,"linkDataArray",Xf,"linkDataArray",a,b,null,e,null);c=a.Ll(b);Gg(a,c,b);c=a.Ml(b);Gg(a,c,b);d=a.rk(b);if(z.isArray(d))for(var e=z.ab(d),g=0;g<e;g++)c=z.Ya(d,g),Gg(a,c,b)}
V.prototype.removeLinkDataCollection=function(a){if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++)this.Fx(z.Ya(a,c));else for(a=a.i;a.next();)this.Fx(a.value)};function Lg(a,b){var c=a.Ll(b),c=a.on(c);null===a.ne(c)&&Fg(a,c,b);c=a.Ml(b);c=a.on(c);null===a.ne(c)&&Fg(a,c,b);var d=a.rk(b);if(z.isArray(d))for(var e=z.ab(d),g=0;g<e;g++)c=z.Ya(d,g),null===a.ne(c)&&Fg(a,c,b)}
z.defineProperty(V,{eK:"copyLinkDataFunction"},function(){return this.Pn},function(a){var b=this.Pn;b!==a&&(null!==a&&z.g(a,"function",V,"copyLinkDataFunction"),this.Pn=a,this.j("copyLinkDataFunction",b,a))});V.prototype.copyLinkData=V.prototype.Qw=function(a){if(null===a)return null;var b=null,b=this.Pn,b=null!==b?b(a,this):Hg(this,a,!0);z.Za(b)&&(z.kc(b),""!==this.Vh&&z.Sa(b,this.Vh,void 0),""!==this.Wh&&z.Sa(b,this.Wh,void 0),""!==this.vg&&z.Sa(b,this.vg,[]));return b};
z.defineProperty(V,{eu:"nodeIsGroupProperty"},function(){return this.Do},function(a){var b=this.Do;b!==a&&(Ag(a,V,"nodeIsGroupProperty"),this.Do=a,this.j("nodeIsGroupProperty",b,a))});V.prototype.isGroupForNodeData=V.prototype.hA=function(a){if(null===a)return!1;var b=this.Do;return""===b?!1:z.tb(a,b)?!0:!1};z.defineProperty(V,{Pp:"nodeGroupKeyProperty"},function(){return this.kh},function(a){var b=this.kh;b!==a&&(Ag(a,V,"nodeGroupKeyProperty"),this.kh=a,this.j("nodeGroupKeyProperty",b,a))});
z.defineProperty(V,{Ym:"copiesGroupKeyOfNodeData"},function(){return this.Dq},function(a){this.Dq!==a&&(z.g(a,"boolean",V,"copiesGroupKeyOfNodeData"),this.Dq=a)});V.prototype.getGroupKeyForNodeData=V.prototype.en=function(a){if(null!==a){var b=this.kh;if(""!==b&&(b=z.tb(a,b),void 0!==b)){if(Bg(b))return b;z.k("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
V.prototype.setGroupKeyForNodeData=V.prototype.Nx=function(a,b){null===b&&(b=void 0);void 0===b||Bg(b)||z.ic(b,"number or string",V,"setGroupKeyForNodeData:key");if(null!==a){var c=this.kh;if(""!==c)if(this.le(a)){var d=z.tb(a,c);d!==b&&(Gg(this,d,a),z.Sa(a,c,b),null===this.ne(b)&&Fg(this,b,a),zg(this,"nodeGroupKey",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
V.prototype.copyNodeData=function(a){if(null===a)return null;a=M.prototype.copyNodeData.call(this,a);this.Ym||""===this.kh||void 0===z.tb(a,this.kh)||z.Sa(a,this.kh,void 0);return a};
V.prototype.setDataProperty=function(a,b,c){u&&(z.g(a,"object",V,"setDataProperty:data"),z.g(b,"string",V,"setDataProperty:propname"),""===b&&z.k("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.le(a))if(b===this.rj)this.Ox(a,c);else{if(b===this.pn){this.Lx(a,c);return}if(b===this.Pp){this.Nx(a,c);return}b===this.eu&&z.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.th(a)){if(b===
this.Ep){this.Mx(a,c);return}if(b===this.Gp){this.Qx(a,c);return}if(b===this.Xt){this.PA(a,c);return}if(b===this.Zt){this.SA(a,c);return}if(b===this.pj){this.IF(a,c);return}if(b===this.Wt){this.HF(a,c);return}if(b===this.Yt){this.JF(a,c);return}}else!Kg&&a instanceof O&&(Kg=!0,z.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));var d=z.tb(a,b);d!==c&&(z.Sa(a,b,c),this.DA(a,b,d,c))};f=V.prototype;
f.ju=function(a,b){M.prototype.ju.call(this,a,b);for(var c=this.vc.i;c.next();)this.KA(c.value,a,b);for(c=this.rm.i;c.next();){var d=c.value,e=a,g=b;if(this.Ll(d)===e){var h=this.Vh;z.Sa(d,h,g);zg(this,"linkFromKey",Uf,h,d,e,g);"string"===typeof h&&this.Mb(d,h)}this.Ml(d)===e&&(h=this.Wh,z.Sa(d,h,g),zg(this,"linkToKey",Uf,h,d,e,g),"string"===typeof h&&this.Mb(d,h));var k=this.rk(d);if(z.isArray(k))for(var l=z.ab(k),h=this.vg,m=0;m<l;m++)z.Ya(k,m)===e&&(z.LD(k,m,g),zg(this,"linkLabelKeys",Wf,h,d,e,
g))}};f.KA=function(a,b,c){if(this.en(a)===b){var d=this.kh;z.Sa(a,d,c);zg(this,"nodeGroupKey",Uf,d,a,b,c);"string"===typeof d&&this.Mb(a,d)}};f.cB=function(){M.prototype.cB.call(this);for(var a=this.Kg,b=z.ab(a),c=0;c<b;c++){var d=z.Ya(a,c);Lg(this,d)}};
f.Up=function(a){M.prototype.Up.call(this,a);a=this.pb(a);var b=Eg(this,a);if(null!==b){for(var c=new J(Object),b=b.i;b.next();){var d=b.value;if(this.le(d)){if(this.en(d)===a){var e=this.kh;zg(this,"nodeGroupKey",Uf,e,d,a,a);"string"===typeof e&&this.Mb(d,e);c.add(d)}}else{this.Ll(d)===a&&(e=this.Vh,zg(this,"linkFromKey",Uf,e,d,a,a),"string"===typeof e&&this.Mb(d,e),c.add(d));this.Ml(d)===a&&(e=this.Wh,zg(this,"linkToKey",Uf,e,d,a,a),"string"===typeof e&&this.Mb(d,e),c.add(d));var g=this.rk(d);if(z.isArray(g))for(var h=
z.ab(g),e=this.vg,k=0;k<h;k++)z.Ya(g,k)===a&&(zg(this,"linkLabelKeys",Wf,e,d,a,a),c.add(d))}}for(c=c.i;c.next();)Gg(this,a,c.value)}};f.Tp=function(a){M.prototype.Tp.call(this,a);var b=this.en(a);null===this.ne(b)&&Fg(this,b,a)};f.Bu=function(a){M.prototype.Bu.call(this,a);var b=this.en(a);Gg(this,b,a)};z.defineProperty(V,{Wt:"linkCategoryProperty"},function(){return this.qm},function(a){var b=this.qm;b!==a&&(Ag(a,V,"linkCategoryProperty"),this.qm=a,this.j("linkCategoryProperty",b,a))});
V.prototype.getCategoryForLinkData=V.prototype.ex=function(a){if(null===a)return"";var b=this.qm;if(""===b)return"";b=z.tb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;z.k("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
V.prototype.setCategoryForLinkData=V.prototype.HF=function(a,b){z.g(b,"string",V,"setCategoryForLinkData:cat");if(null!==a){var c=this.qm;if(""!==c)if(this.th(a)){var d=z.tb(a,c);void 0===d&&(d="");d!==b&&(z.Sa(a,c,b),zg(this,"linkCategory",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
function qg(a){1<arguments.length&&z.k("TreeModel constructor can only take one optional argument, the Array of node data.");M.call(this);this.lh="parent";this.Eq=!1;this.zm="parentLinkCategory";void 0!==a&&(this.hg=a)}z.Ra(qg,M);z.ia("TreeModel",qg);qg.prototype.cloneProtected=function(a){M.prototype.cloneProtected.call(this,a);a.lh=this.lh;a.Eq=this.Eq;a.zm=this.zm};
qg.prototype.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.ZA();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.hg;for(var c=z.ab(a),d=0;d<c;d++)var e=z.Ya(a,d),b=b+(" "+this.pb(e)+":"+ka(e))}return b};qg.prototype.Bn=function(){var a=M.prototype.Bn.call(this),b="";"parent"!==this.Qp&&"string"===typeof this.Qp&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.Qp));return a+b};
qg.prototype.hu=function(a){M.prototype.hu.call(this,a);a.nodeParentKeyProperty&&(this.Qp=a.nodeParentKeyProperty)};qg.prototype.on=function(a){return a};z.defineProperty(qg,{Qp:"nodeParentKeyProperty"},function(){return this.lh},function(a){var b=this.lh;b!==a&&(Ag(a,qg,"nodeParentKeyProperty"),this.lh=a,this.j("nodeParentKeyProperty",b,a))});
z.defineProperty(qg,{Zm:"copiesParentKeyOfNodeData"},function(){return this.Eq},function(a){this.Eq!==a&&(z.g(a,"boolean",qg,"copiesParentKeyOfNodeData"),this.Eq=a)});qg.prototype.getParentKeyForNodeData=qg.prototype.fn=function(a){if(null!==a){var b=this.lh;if(""!==b&&(b=z.tb(a,b),void 0!==b)){if(Bg(b))return b;z.k("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
qg.prototype.setParentKeyForNodeData=qg.prototype.Gh=function(a,b){null===b&&(b=void 0);void 0===b||Bg(b)||z.ic(b,"number or string",qg,"setParentKeyForNodeData:key");if(null!==a){var c=this.lh;if(""!==c)if(b=this.on(b),this.le(a)){var d=z.tb(a,c);d!==b&&(Gg(this,d,a),z.Sa(a,c,b),null===this.ne(b)&&Fg(this,b,a),zg(this,"nodeParentKey",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
z.defineProperty(qg,{kL:"parentLinkCategoryProperty"},function(){return this.zm},function(a){var b=this.zm;b!==a&&(Ag(a,qg,"parentLinkCategoryProperty"),this.zm=a,this.j("parentLinkCategoryProperty",b,a))});qg.prototype.getParentLinkCategoryForNodeData=qg.prototype.NH=function(a){if(null===a)return"";var b=this.zm;if(""===b)return"";b=z.tb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;z.k("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
qg.prototype.setParentLinkCategoryForNodeData=qg.prototype.iJ=function(a,b){z.g(b,"string",qg,"setParentLinkCategoryForNodeData:cat");if(null!==a){var c=this.zm;if(""!==c)if(this.le(a)){var d=z.tb(a,c);void 0===d&&(d="");d!==b&&(z.Sa(a,c,b),zg(this,"parentLinkCategory",Uf,c,a,d,b),"string"===typeof c&&this.Mb(a,c))}else z.Sa(a,c,b)}};
qg.prototype.copyNodeData=function(a){if(null===a)return null;a=M.prototype.copyNodeData.call(this,a);this.Zm||""===this.lh||void 0===z.tb(a,this.lh)||z.Sa(a,this.lh,void 0);return a};
qg.prototype.setDataProperty=function(a,b,c){u&&(z.g(a,"object",qg,"setDataProperty:data"),z.g(b,"string",qg,"setDataProperty:propname"),""===b&&z.k("TreeModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.le(a))if(b===this.rj)this.Ox(a,c);else{if(b===this.pn){this.Lx(a,c);return}if(b===this.Qp){this.Gh(a,c);return}}else!Kg&&a instanceof O&&(Kg=!0,z.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),z.trace("  Is that really your intent?"));
var d=z.tb(a,b);d!==c&&(z.Sa(a,b,c),this.DA(a,b,d,c))};f=qg.prototype;f.ju=function(a,b){M.prototype.ju.call(this,a,b);for(var c=this.vc.i;c.next();)this.KA(c.value,a,b)};f.KA=function(a,b,c){if(this.fn(a)===b){var d=this.lh;z.Sa(a,d,c);zg(this,"nodeParentKey",Uf,d,a,b,c);"string"===typeof d&&this.Mb(a,d)}};
f.Up=function(a){M.prototype.Up.call(this,a);a=this.pb(a);var b=Eg(this,a);if(null!==b){for(var c=new J(Object),b=b.i;b.next();){var d=b.value;if(this.le(d)&&this.fn(d)===a){var e=this.lh;zg(this,"nodeParentKey",Uf,e,d,a,a);"string"===typeof e&&this.Mb(d,e);c.add(d)}}for(c=c.i;c.next();)Gg(this,a,c.value)}};f.Tp=function(a){M.prototype.Tp.call(this,a);var b=this.fn(a),b=this.on(b);null===this.ne(b)&&Fg(this,b,a)};f.Bu=function(a){M.prototype.Bu.call(this,a);var b=this.fn(a);Gg(this,b,a)};
function $g(a,b,c){z.kc(this);this.G=!1;void 0===a?a="":z.g(a,"string",$g,"constructor:targetprop");void 0===b?b=a:z.g(b,"string",$g,"constructor:sourceprop");void 0===c?c=null:null!==c&&z.g(c,"function",$g,"constructor:conv");this.fD=-1;this.Bg=null;this.Wo=a;this.Vo=this.Ts=0;this.qw=null;this.qr=!1;this.Mo=b;this.Bq=c;this.Nr=ah;this.uq=null}z.ia("Binding",$g);
$g.prototype.copy=function(){var a=new $g;a.Wo=this.Wo;a.Ts=this.Ts;a.Vo=this.Vo;a.qw=this.qw;a.qr=this.qr;a.Mo=this.Mo;a.Bq=this.Bq;a.Nr=this.Nr;a.uq=this.uq;return a};var ah;$g.OneWay=ah=z.s($g,"OneWay",1);var bh;$g.TwoWay=bh=z.s($g,"TwoWay",2);$g.parseEnum=function(a,b){z.g(a,"function",$g,"parseEnum:ctor");z.Ba(b,a,$g,"parseEnum:defval");return function(c){c=Ja(a,c);return null===c?b:c}};var ka;
$g.toString=ka=function(a){var b=a;z.Za(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID)));return void 0===b?"undefined":null===b?"null":b.toString()};$g.prototype.toString=function(){return"Binding("+this.yu+":"+this.NF+(-1!==this.Wl?" "+this.Wl:"")+" "+this.mode.name+")"};$g.prototype.freeze=function(){this.G=!0;return this};
$g.prototype.Wa=function(){this.G=!1;return this};z.defineProperty($g,{Wl:null},function(){return this.fD},function(a){this.G&&z.oa(this);z.g(a,"number",$g,"targetId");this.fD=a});z.defineProperty($g,{yu:"targetProperty"},function(){return this.Wo},function(a){this.G&&z.oa(this);z.g(a,"string",$g,"targetProperty");this.Wo=a});z.defineProperty($g,{xn:"sourceName"},function(){return this.qw},function(a){this.G&&z.oa(this);null!==a&&z.g(a,"string",$g,"sourceName");this.qw=a;null!==a&&(this.qr=!1)});
z.defineProperty($g,{St:"isToModel"},function(){return this.qr},function(a){this.G&&z.oa(this);z.g(a,"boolean",$g,"isToModel");this.qr=a});z.defineProperty($g,{NF:"sourceProperty"},function(){return this.Mo},function(a){this.G&&z.oa(this);z.g(a,"string",$g,"sourceProperty");this.Mo=a});z.defineProperty($g,{gH:"converter"},function(){return this.Bq},function(a){this.G&&z.oa(this);null!==a&&z.g(a,"function",$g,"converter");this.Bq=a});
z.defineProperty($g,{WG:"backConverter"},function(){return this.uq},function(a){this.G&&z.oa(this);null!==a&&z.g(a,"function",$g,"backConverter");this.uq=a});z.defineProperty($g,{mode:"mode"},function(){return this.Nr},function(a){this.G&&z.oa(this);z.Ba(a,$g,$g,"mode");this.Nr=a});$g.prototype.makeTwoWay=$g.prototype.xI=function(a){void 0===a&&(a=null);null!==a&&z.g(a,"function",$g,"makeTwoWay");this.mode=bh;this.WG=a;return this};
$g.prototype.ofObject=$g.prototype.wx=function(a){void 0===a&&(a="");u&&z.g(a,"string",$g,"ofObject:srcname");this.xn=a;this.St=!1;return this};$g.prototype.ofModel=function(){this.xn=null;this.St=!0;return this};$g.prototype.ofData=function(){this.xn=null;this.St=!1;return this};function ch(a,b,c){a=a.xn;var d=null;return d=null===a||""===a?b:"."===a?c:".."===a?c.T:b.oe(a)}
$g.prototype.updateTarget=$g.prototype.eG=function(a,b,c){var d=this.Mo;if(void 0===c||""===d||d===c){c=this.Wo;var e=this.Bq;if(null===e&&""===c)z.trace("Binding error: target property is the empty string: "+this.toString());else{u&&"string"===typeof c&&("function"!==typeof a.setAttribute&&0<c.length&&"_"!==c[0]&&!z.hx(a,c)?z.trace("Binding error: undefined target property: "+c+" on "+a.toString()):"name"===c&&a instanceof O&&z.trace("Binding error: cannot modify GraphObject.name on "+a.toString()));
var g=b;""!==d&&(g=z.tb(b,d));if(void 0!==g)if(null===e)""!==c&&z.Sa(a,c,g);else try{if(""!==c){var h=e(g,a);u&&void 0===h&&z.trace('Binding warning: conversion function returned undefined when setting target property "'+c+'" on '+a.toString()+", function is: "+e);z.Sa(a,c,h)}else e(g,a)}catch(k){u&&z.trace("Binding error: "+k.toString()+' setting target property "'+c+'" on '+a.toString()+" with conversion function: "+e)}}}};
$g.prototype.updateSource=$g.prototype.Tx=function(a,b,c,d){void 0===d&&(d=null);if(this.Nr===bh){var e=this.Wo;if(void 0===c||e===c){c=this.Mo;var g=this.uq;if(null!==g||""!==c){var h=a;""!==e&&(h=z.tb(a,e));if(void 0!==h)if(a=null!==d?d.ha:null,null===g)null!==a?(u&&a.rj===c&&a.le(b)&&z.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),a.setDataProperty(b,c,h)):z.Sa(b,c,h);else try{if(""!==c){var k=g(h,b,a);null!==a?(u&&(a.rj===c&&a.le(b)&&z.trace("Binding error: cannot have TwoWay Binding on node data key property: "+
this.toString()),void 0===k&&z.trace('Binding warning: conversion function returned undefined when setting source property "'+c+'" on '+b.toString()+", function is: "+g)),a.setDataProperty(b,c,k)):z.Sa(b,c,k)}else g(h,b,a)}catch(l){u&&z.trace("Binding error: "+l.toString()+' setting source property "'+c+'" on '+b.toString()+" with conversion function: "+g)}}}}};function rg(){this.lG=(new J(Tf)).freeze();this.Ub="";this.mC=!1}z.ia("Transaction",rg);
rg.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.Zf.count.toString()+(this.Nt?"":", incomplete");if(void 0!==a&&0<a){a=this.Zf.count;for(var c=0;c<a;c++){var d=this.Zf.ea(c);null!==d&&(b+="\n  "+d.toString())}}return b};rg.prototype.clear=rg.prototype.clear=function(){var a=this.Zf;a.Wa();for(var b=a.count-1;0<=b;b--){var c=a.ea(b);null!==c&&c.clear()}a.clear();a.freeze()};rg.prototype.canUndo=rg.prototype.canUndo=function(){return this.Nt};
rg.prototype.undo=rg.prototype.undo=function(){if(this.canUndo())for(var a=this.Zf.count-1;0<=a;a--){var b=this.Zf.ea(a);null!==b&&b.undo()}};rg.prototype.canRedo=rg.prototype.canRedo=function(){return this.Nt};rg.prototype.redo=rg.prototype.redo=function(){if(this.canRedo())for(var a=this.Zf.count,b=0;b<a;b++){var c=this.Zf.ea(b);null!==c&&c.redo()}};z.w(rg,{Zf:"changes"},function(){return this.lG});z.defineProperty(rg,{name:"name"},function(){return this.Ub},function(a){this.Ub=a});
z.defineProperty(rg,{Nt:"isComplete"},function(){return this.mC},function(a){this.mC=a});function Yf(){this.dz=new K(M);this.af=!1;this.pG=(new J(rg)).freeze();this.dh=-1;this.BC=999;this.Ii=!1;this.fv=null;this.ql=0;this.qy=!1;u&&(this.qy=!0);this.jh=(new J("string")).freeze();this.Co=new J("number");this.My=!0;this.Yy=!1}z.ia("UndoManager",Yf);
Yf.prototype.toString=function(a){for(var b="UndoManager "+this.jj+"<"+this.history.count+"<="+this.ZE,b=b+"[",c=this.dF.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.dF.ea(d);b+="]";if(void 0!==a&&0<a)for(c=this.history.count,d=0;d<c;d++)b+="\n "+this.history.ea(d).toString(a-1);return b};
Yf.prototype.clear=Yf.prototype.clear=function(){var a=this.history;a.Wa();for(var b=a.count-1;0<=b;b--){var c=a.ea(b);null!==c&&c.clear()}a.clear();this.dh=-1;a.freeze();this.Ii=!1;this.fv=null;this.ql=0;this.jh.Wa();this.jh.clear();this.jh.freeze();this.Co.clear()};Yf.prototype.addModel=Yf.prototype.OG=function(a){this.dz.add(a)};Yf.prototype.removeModel=Yf.prototype.XI=function(a){this.dz.remove(a)};
Yf.prototype.startTransaction=Yf.prototype.Wb=function(a){void 0===a&&(a="");null===a&&(a="");if(this.qb)return!1;!0===this.My&&(this.My=!1,this.ql++,this.kd("StartingFirstTransaction",a,this.ej),0<this.ql&&this.ql--);this.isEnabled&&(this.jh.Wa(),this.jh.add(a),this.jh.freeze(),null===this.ej?this.Co.add(0):this.Co.add(this.ej.Zf.count));this.ql++;var b=1===this.Ih;b&&this.kd("StartedTransaction",a,this.ej);return b};
Yf.prototype.commitTransaction=Yf.prototype.Kd=function(a){void 0===a&&(a="");return dh(this,!0,a)};Yf.prototype.rollbackTransaction=Yf.prototype.Vp=function(){return dh(this,!1,"")};
function dh(a,b,c){if(a.qb)return!1;a.Gz&&1>a.Ih&&z.trace("Ending transaction without having started a transaction: "+c);var d=1===a.Ih;d&&b&&a.isEnabled&&a.kd("CommittingTransaction",c,a.ej);var e=0;if(0<a.Ih&&(a.ql--,a.isEnabled)){var g=a.jh.count;0<g&&(""===c&&(c=a.jh.ea(0)),a.jh.Wa(),a.jh.dd(g-1),a.jh.freeze());g=a.Co.count;0<g&&(e=a.Co.ea(g-1),a.Co.dd(g-1))}g=a.ej;if(d){if(b){a.Yy=!1;if(a.isEnabled&&null!==g){b=g;b.Nt=!0;b.name=c;d=a.history;d.Wa();for(e=d.count-1;e>a.jj;e--)g=d.ea(e),null!==
g&&g.clear(),d.dd(e),a.Yy=!0;e=a.ZE;0===e&&(e=1);0<e&&d.count>=e&&(g=d.ea(0),null!==g&&g.clear(),d.dd(0),a.dh--);d.add(b);a.dh++;d.freeze();g=b}a.kd("CommittedTransaction",c,g)}else{a.Ii=!0;try{a.isEnabled&&null!==g&&(g.Nt=!0,g.undo())}finally{a.kd("RolledBackTransaction",c,g),a.Ii=!1}null!==g&&g.clear()}a.fv=null;return!0}if(a.isEnabled&&!b&&null!==g){a=e;c=g.Zf;for(b=c.count-1;b>=a;b--)d=c.ea(b),null!==d&&d.undo(),c.Wa(),c.dd(b);c.freeze()}return!1}
Yf.prototype.canUndo=Yf.prototype.canUndo=function(){if(!this.isEnabled||0<this.Ih||this.qb)return!1;var a=this.$F;return null!==a&&a.canUndo()?!0:!1};Yf.prototype.undo=Yf.prototype.undo=function(){if(this.canUndo()){var a=this.$F;try{this.kd("StartingUndo","Undo",a),this.Ii=!0,this.dh--,a.undo()}catch(b){z.trace("undo error: "+b.toString())}finally{this.Ii=!1,this.kd("FinishedUndo","Undo",a)}}};
Yf.prototype.canRedo=Yf.prototype.canRedo=function(){if(!this.isEnabled||0<this.Ih||this.qb)return!1;var a=this.ZF;return null!==a&&a.canRedo()?!0:!1};Yf.prototype.redo=Yf.prototype.redo=function(){if(this.canRedo()){var a=this.ZF;try{this.kd("StartingRedo","Redo",a),this.Ii=!0,this.dh++,a.redo()}catch(b){z.trace("redo error: "+b.toString())}finally{this.Ii=!1,this.kd("FinishedRedo","Redo",a)}}};
Yf.prototype.kd=function(a,b,c){void 0===c&&(c=null);var d=new Tf;d.Dc=Vf;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.GI;a.next();)b=a.value,d.ha=b,b.Lw(d)};Yf.prototype.handleChanged=Yf.prototype.CE=function(a){if(this.isEnabled&&!this.qb&&!this.skipsEvent(a)){var b=this.ej;null===b&&(this.fv=b=new rg);var c=a.copy(),b=b.Zf;b.Wa();b.add(c);b.freeze();this.Gz&&0>=this.Ih&&!this.My&&(a=a.h,null!==a&&!1===a.jn||z.trace("Change not within a transaction: "+c.toString()))}};
Yf.prototype.skipsEvent=function(a){if(null===a||0>a.Dc.value)return!0;a=a.object;if(a instanceof O){if(a=a.layer,null!==a&&a.Nc)return!0}else if(a instanceof wg&&a.Nc)return!0;return!1};z.w(Yf,{GI:"models"},function(){return this.dz.i});z.defineProperty(Yf,{isEnabled:"isEnabled"},function(){return this.af},function(a){this.af=a});z.w(Yf,{$F:"transactionToUndo"},function(){return 0<=this.jj&&this.jj<=this.history.count-1?this.history.ea(this.jj):null});
z.w(Yf,{ZF:"transactionToRedo"},function(){return this.jj<this.history.count-1?this.history.ea(this.jj+1):null});z.w(Yf,{qb:"isUndoingRedoing"},function(){return this.Ii});z.w(Yf,{history:"history"},function(){return this.pG});z.defineProperty(Yf,{ZE:"maxHistoryLength"},function(){return this.BC},function(a){this.BC=a});z.w(Yf,{jj:"historyIndex"},function(){return this.dh});z.w(Yf,{ej:"currentTransaction"},function(){return this.fv});z.w(Yf,{Ih:"transactionLevel"},function(){return this.ql});
z.w(Yf,{PE:"isInTransaction"},function(){return 0<this.ql});z.defineProperty(Yf,{Gz:"checksTransactionLevel"},function(){return this.qy},function(a){this.qy=a});z.w(Yf,{dF:"nestedTransactionNames"},function(){return this.jh});function ra(){0<arguments.length&&z.pd(ra);z.kc(this);this.Z=null;this.AB=!1;this.TB=this.BB=!0;this.DB=this.EB=this.UB=this.FB=!1;this.il=this.ky=null;this.yD=1.05;this.RB=1;this.Zy=NaN;this.yC=null;this.zz=NaN;this.yz=Jd;this.Vi=null}z.ia("CommandHandler",ra);
var eh=null,fh="";ra.prototype.toString=function(){return"CommandHandler"};z.w(ra,{h:"diagram"},function(){return this.Z});ra.prototype.Sc=function(a){u&&null!==a&&z.l(a,B,ra,"setDiagram");this.Z=a};
ra.prototype.doKeyDown=function(){var a=this.h;if(null!==a){var b=a.R,c=z.sk?b.$t:b.control,d=b.shift,e=b.alt,g=b.key;!c||"C"!==g&&"Insert"!==g?c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&this.undo():"Del"===g||"Backspace"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"A"===g?this.canSelectAll()&&
this.selectAll():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.ze&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.ze&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.ye&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.ye&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?d&&a.ye?a.scroll("page","left"):a.ze&&a.scroll("page","up"):"PageDown"===g?d&&a.ye?a.scroll("page","right"):a.ze&&a.scroll("page","down"):"Home"===
g?c&&a.ze?a.scroll("document","up"):!c&&a.ye&&a.scroll("document","left"):"End"===g?c&&a.ze?a.scroll("document","down"):!c&&a.ye&&a.scroll("document","right"):" "===g?this.canScrollToPart()&&this.scrollToPart():"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():d&&"Z"===g?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===g?this.canGroupSelection()&&this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&
this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection()}};ra.prototype.doKeyUp=function(){var a=this.h;null!==a&&(a.R.bubbles=!0)};ra.prototype.stopCommand=function(){var a=this.h;if(null!==a){var b=a.cb;b instanceof gh&&a.xf&&a.Nw();null!==b&&b.doCancel()}};ra.prototype.canStopCommand=function(){return!0};
ra.prototype.selectAll=function(){var a=this.h;if(null!==a){a.ta();try{a.gc="wait";a.Ja("ChangingSelection");for(var b=a.oi;b.next();)b.value.jb=!0;for(var c=a.Mg;c.next();)c.value.jb=!0;for(var d=a.links;d.next();)d.value.jb=!0}finally{a.Ja("ChangedSelection"),a.gc=""}}};ra.prototype.canSelectAll=function(){var a=this.h;return null!==a&&a.xf};
ra.prototype.deleteSelection=function(){var a=this.h;if(null!==a&&!a.Ja("SelectionDeleting",a.selection))try{a.gc="wait";a.Wb("Delete");a.Ja("ChangingSelection");for(var b=new K(D),c=a.selection.i;c.next();)hh(b,c.value,!0,this.pH?Infinity:0,this.gE,function(a){return a.canDelete()});a.JA(b,!0);a.Ja("SelectionDeleted",b)}finally{a.Ja("ChangedSelection"),a.Kd("Delete"),a.gc=""}};ra.prototype.canDeleteSelection=function(){var a=this.h;return null===a||a.ib||a.Ef||!a.Rm||0===a.selection.count?!1:!0};
function hh(a,b,c,d,e,g){void 0===g&&(g=null);if(!(a.contains(b)||null!==g&&!g(b)||b instanceof da))if(a.add(b),b instanceof E){if(c&&b instanceof F)for(var h=b.Hc;h.next();)hh(a,h.value,c,d,e,g);if(e)for(h=b.ee;h.next();){var k=h.value;if(!a.contains(k)){var l=k.Y,m=k.da;null!==l&&a.contains(l)&&null!==m&&a.contains(m)?hh(a,k,c,d,e,g):null!==l&&null!==m||hh(a,k,c,d,e,g)}}if(1<d)for(b=b.sE();b.next();)hh(a,b.value,c,d-1,e,g)}else if(b instanceof G)for(h=b.Hf;h.next();)hh(a,h.value,c,d,e,g)}
ra.prototype.gp=function(a,b,c){var d=new na(D,D);for(a=a.i;a.next();)ih(this,a.value,b,d,c);if(null!==b){c=b.ha;a=!1;null!==b.gb.me&&(a=b.gb.me.gj);for(var e=new K(G),g=new na(G,G),h=d.i;h.next();){var k=h.value;if(k instanceof G){var l=k;a||null!==l.Y&&null!==l.da||e.add(l)}else if(c instanceof qg&&k instanceof E&&null!==k.data){var l=c,m=k,k=h.key,n=k.Il();null!==n&&(n=d.na(n),null!==n?(l.Gh(m.data,l.pb(n.data)),l=b.$f(m.data),k=k.op(),null!==k&&null!==l&&g.add(k,l)):l.Gh(m.data,void 0))}}0<e.count&&
b.JA(e,!1);if(0<g.count)for(c=g.i;c.next();)d.add(c.key,c.value)}if(null!==b&&(b=b.ha,c=b.QG,null!==c)){var p=new na;d.each(function(a){null!==a.key.data&&p.add(a.key.data,a.value.data)});c(p,b,this.h.ha)}for(b=d.i;b.next();)b.value.Mb();return d};
function ih(a,b,c,d,e){if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return d.na(b);var g=null,h=b.data;if(null!==h&&null!==c){var k=c.ha;b instanceof G?k instanceof V&&(h=k.Qw(h),z.Za(h)&&(k.gt(h),g=c.$f(h))):(h=k.copyNodeData(h),z.Za(h)&&(k.sl(h),g=c.vh(h)))}else jh(b),g=b.copy(),null!==g&&(null!==c?c.add(g):null!==h&&a.hH&&(k=a.h.ha,h=g instanceof G&&k instanceof V?k.Qw(h):k.copyNodeData(h),z.Za(h)&&(g.data=h)));if(!(g instanceof D))return null;g.jb=!1;g.yh=!1;d.add(b,g);if(b instanceof
E){for(h=b.ee;h.next();){k=h.value;if(k.Y===b){var l=d.na(k);null!==l&&(l.Y=g)}k.da===b&&(l=d.na(k),null!==l&&(l.da=g))}if(b instanceof F&&g instanceof F)for(h=g,b=b.Hc;b.next();)k=ih(a,b.value,c,d,e),k instanceof G||null===k||(k.Qa=h)}else if(b instanceof G)for(h=b.Y,null!==h&&(h=d.na(h),null!==h&&(g.Y=h)),h=b.da,null!==h&&(h=d.na(h),null!==h&&(g.da=h)),b=b.Hf;b.next();)h=ih(a,b.value,c,d,e),null!==h&&(h.od=g);return g}
ra.prototype.copySelection=function(){var a=this.h;if(null!==a){for(var b=new K(D),a=a.selection.i;a.next();)hh(b,a.value,!0,this.kH?Infinity:0,this.iH,function(a){return a.canCopy()});this.copyToClipboard(b)}};ra.prototype.canCopySelection=function(){var a=this.h;return null!==a&&a.lk&&a.Cz&&0!==a.selection.count?!0:!1};ra.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};
ra.prototype.canCutSelection=function(){var a=this.h;return null!==a&&!a.ib&&!a.Ef&&a.lk&&a.Rm&&a.Cz&&0!==a.selection.count?!0:!1};ra.prototype.copyToClipboard=function(a){var b=this.h;if(null!==b){var c=null;if(null===a)eh=null,fh="";else{var c=b.ha,d=!1,e=!1,g=null;try{if(c instanceof qg){var h=c,d=h.Zm;h.Zm=this.YD}c instanceof V&&(h=c,e=h.Ym,h.Ym=this.XD);g=b.gp(a,null,!0)}finally{c instanceof qg&&(c.Zm=d),c instanceof V&&(c.Ym=e),c=new J(D),c.$c(g),eh=c,fh=b.ha.Bl}}b.Ja("ClipboardChanged",c)}};
ra.prototype.pasteFromClipboard=function(){var a=new K(D),b=eh;if(null===b)return a;var c=this.h;if(null===c||fh!==c.ha.Bl)return a;var d=c.ha,e=!1,g=!1,h=null;try{if(d instanceof qg){var k=d,e=k.Zm;k.Zm=this.YD}d instanceof V&&(k=d,g=k.Ym,k.Ym=this.XD);h=c.gp(b,c,!1)}finally{for(d instanceof qg&&(d.Zm=e),d instanceof V&&(d.Ym=g),b=h.i;b.next();)c=b.value,d=b.key,c.location.F()||(d.location.F()?c.location=d.location:!c.position.F()&&d.position.F()&&(c.position=d.position)),a.add(c)}return a};
ra.prototype.pasteSelection=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b)try{b.gc="wait";b.Wb("Paste");b.Ja("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&kh(b);for(var d=c.i;d.next();)d.value.jb=!0;b.Ja("ChangedSelection");if(null!==a){var e=b.computePartsBounds(b.selection);if(e){var g=b.gb.me;null===g&&(g=new lh,g.Sc(b));var h=g.computeEffectiveCollection(b.selection);g.moveParts(h,new N(a.x-e.ra,a.y-e.za),!1)}}b.Ja("ClipboardPasted",c)}finally{b.Kd("Paste"),b.gc=
""}};ra.prototype.canPasteSelection=function(){var a=this.h;return null===a||a.ib||a.Ef||!a.$o||!a.Cz||null===eh||fh!==a.ha.Bl?!1:!0};ra.prototype.undo=function(){var a=this.h;null!==a&&a.pa.undo()};ra.prototype.canUndo=function(){var a=this.h;return null===a||a.ib||a.Ef?!1:a.GD&&a.pa.canUndo()};ra.prototype.redo=function(){var a=this.h;null!==a&&a.pa.redo()};ra.prototype.canRedo=function(){var a=this.h;return null===a||a.ib||a.Ef?!1:a.GD&&a.pa.canRedo()};
ra.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.Vx);z.p(a,ra,"decreaseZoom:factor");var b=this.h;null!==b&&b.xl===mh&&(a*=b.scale,a<b.Ah||a>b.zh||(b.scale=a))};ra.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.Vx);z.p(a,ra,"canDecreaseZoom:factor");var b=this.h;if(null===b||b.xl!==mh)return!1;a*=b.scale;return a<b.Ah||a>b.zh?!1:b.Kw};
ra.prototype.increaseZoom=function(a){void 0===a&&(a=this.Vx);z.p(a,ra,"increaseZoom:factor");var b=this.h;null!==b&&b.xl===mh&&(a*=b.scale,a<b.Ah||a>b.zh||(b.scale=a))};ra.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.Vx);z.p(a,ra,"canIncreaseZoom:factor");var b=this.h;if(null===b||b.xl!==mh)return!1;a*=b.scale;return a<b.Ah||a>b.zh?!1:b.Kw};ra.prototype.resetZoom=function(a){void 0===a&&(a=this.Tw);z.p(a,ra,"resetZoom:newscale");var b=this.h;null===b||a<b.Ah||a>b.zh||(b.scale=a)};
ra.prototype.canResetZoom=function(a){void 0===a&&(a=this.Tw);z.p(a,ra,"canResetZoom:newscale");var b=this.h;return null===b||a<b.Ah||a>b.zh?!1:b.Kw};ra.prototype.zoomToFit=function(){var a=this.h;if(null!==a){var b=a.scale,c=a.position;b===this.zz&&!isNaN(this.Zy)&&a.ad.N(this.yz)?(a.scale=this.Zy,a.position=this.yC,this.zz=NaN,this.yz=Jd):(this.Zy=b,this.yC=c.copy(),a.zoomToFit(),this.zz=a.scale,this.yz=a.ad.copy())}};ra.prototype.canZoomToFit=function(){var a=this.h;return null===a?!1:a.Kw};
ra.prototype.scrollToPart=function(a){void 0===a&&(a=null);null!==a&&z.l(a,D,ra,"part");var b=this.h;if(null!==b){if(null===a){try{null!==this.Vi&&(this.Vi.next()?a=this.Vi.value:this.Vi=null)}catch(c){this.Vi=null}null===a&&(0<b.gn.count?this.Vi=b.gn.i:0<b.selection.count&&(this.Vi=b.selection.i),null!==this.Vi&&this.Vi.next()&&(a=this.Vi.value))}if(null!==a){var d=b.Va;d.rn("Scroll To Part");var e=b.position.copy();b.XG(a.W);e.Mc(b.position)&&d.pi()}}};
ra.prototype.canScrollToPart=function(a){void 0===a&&(a=null);null!==a&&z.l(a,D,ra,"part");a=this.h;return null===a||0===a.selection.count&&0===a.gn.count?!1:a.ye&&a.ze};ra.prototype.collapseTree=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b)try{b.Wb("Collapse Tree");b.Va.rn("Collapse Tree");var c=new J(E);if(null!==a&&a.wd)a.collapseTree(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof E&&(a=e,a.wd&&(a.collapseTree(),c.add(a)))}b.Ja("TreeCollapsed",c)}finally{b.Kd("Collapse Tree")}};
ra.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ib)return!1;if(null!==a){if(!a.wd)return!1;if(0<a.bx().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof E&&b.wd&&0<b.bx().count)return!0;return!1};
ra.prototype.expandTree=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b)try{b.Wb("Expand Tree");b.Va.rn("Expand Tree");var c=new J(E);if(null===a||a.wd)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof E&&(a=e,a.wd||(a.expandTree(),c.add(a)))}else a.expandTree(),c.add(a);b.Ja("TreeExpanded",c)}finally{b.Kd("Expand Tree")}};
ra.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ib)return!1;if(null!==a){if(a.wd)return!1;if(0<a.bx().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof E&&!b.wd&&0<b.bx().count)return!0;return!1};
ra.prototype.groupSelection=function(){var a=this.h;if(null!==a){var b=a.ha;if(b instanceof V){var c=this.HD;if(null!==c){var d=null;try{a.gc="wait";a.Wb("Group");a.Ja("ChangingSelection");for(var e=new J(D),g=a.selection.i;g.next();){var h=g.value;h.be()&&h.canGroup()&&e.add(h)}for(var k=new J(D),l=e.i;l.next();){for(var m=l.value,g=!1,n=e.i;n.next();)if(m.mi(n.value)){g=!0;break}g||k.add(m)}if(0<k.count){var p=k.first().Qa;if(null!==p)for(;null!==p;){for(var e=!1,q=k.i;q.next();)if(!q.value.mi(p)){e=
!0;break}if(e)p=p.Qa;else break}if(c instanceof F)jh(c),d=c.copy(),null!==d&&a.add(d);else if(b.hA(c)){var r=b.copyNodeData(c);z.Za(r)&&(b.sl(r),d=a.ax(r))}if(null!==d){null!==p&&this.isValidMember(p,d)&&(d.Qa=p);for(var s=k.i;s.next();){var t=s.value;this.isValidMember(d,t)&&(t.Qa=d)}a.select(d)}}a.Ja("ChangedSelection");a.Ja("SelectionGrouped",d)}finally{a.Kd("Group"),a.gc=""}}}}};
ra.prototype.canGroupSelection=function(){var a=this.h;if(null===a||a.ib||a.Ef||!a.$o||!a.Fw||!(a.ha instanceof V)||null===this.HD)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.be()&&b.canGroup())return!0}return!1};function nh(a){var b=z.rb();for(a=a.i;a.next();){var c=a.value;c instanceof G||b.push(c)}a=new K(D);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],g=!0,h=0;h<c;h++)if(e.mi(b[h])){g=!1;break}g&&a.add(e)}z.xa(b);return a}
ra.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof G)return!1;if(null!==a){if(a===b||a.mi(b))return!1;var c=a.qA;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}c=this.qA;return null!==c?c(a,b):!0};
ra.prototype.ungroupSelection=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b){var c=b.ha;if(c instanceof V)try{b.gc="wait";b.Wb("Ungroup");b.Ja("ChangingSelection");var d=new J(F);if(null!==a)d.add(a);else for(var e=b.selection.i;e.next();){var g=e.value;g instanceof F&&(a=g,a.canUngroup()&&d.add(a))}if(0<d.count){b.Nw();for(var h=d.i;h.next();){var k=h.value;k.expandSubGraph();var l=k.Qa,m=null!==l&&null!==l.data?c.pb(l.data):void 0,n=new J(D);n.$c(k.Hc);for(var p=n.i;p.next();){var q=
p.value;q.jb=!0;if(!(q instanceof G)){var r=q.data;null!==r?c.Nx(r,m):q.Qa=l}}b.remove(k)}}b.Ja("ChangedSelection");b.Ja("SelectionUngrouped",d,n)}finally{b.Kd("Ungroup"),b.gc=""}}};ra.prototype.canUngroupSelection=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ib||b.Ef||!b.Rm||!b.Jw||!(b.ha instanceof V))return!1;if(null!==a){if(a.canUngroup())return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof F&&b.canUngroup())return!0;return!1};
ra.prototype.addTopLevelParts=function(a,b){for(var c=!0,d=nh(a).i;d.next();){var e=d.value;null!==e.Qa&&(!b||this.isValidMember(null,e)?e.Qa=null:c=!1)}return c};
ra.prototype.collapseSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b)try{b.Wb("Collapse SubGraph");b.Va.rn("Collapse SubGraph");var c=new J(F);if(null!==a&&a.se)a.collapseSubGraph(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof F&&(a=e,a.se&&(a.collapseSubGraph(),c.add(a)))}b.Ja("SubGraphCollapsed",c)}finally{b.Kd("Collapse SubGraph")}};
ra.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ib)return!1;if(null!==a)return a.se?!0:!1;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof F&&b.se)return!0;return!1};
ra.prototype.expandSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b)try{b.Wb("Expand SubGraph");b.Va.rn("Expand SubGraph");var c=new J(F);if(null===a||a.se)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof F&&(a=e,a.se||(a.expandSubGraph(),c.add(a)))}else a.expandSubGraph(),c.add(a);b.Ja("SubGraphExpanded",c)}finally{b.Kd("Expand SubGraph")}};
ra.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ib)return!1;if(null!==a)return a.se?!1:!0;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof F&&!b.se)return!0;return!1};
ra.prototype.editTextBlock=function(a){void 0===a&&(a=null);null!==a&&z.l(a,qa,ra,"editTextBlock");var b=this.h;if(null!==b){var c=b.gb.XA;if(null!==c){if(null===a){a=null;for(var d=b.selection.i;d.next();){var e=d.value;if(e.canEdit()){a=e;break}}if(null===a)return;a=a.zt(function(a){return a instanceof qa&&a.Tz})}null!==a&&(b.cb=null,c.He=a,b.cb=c)}}};
ra.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);null!==a&&z.l(a,qa,ra,"canEditTextBlock");var b=this.h;if(null===b||b.ib||b.Ef||!b.Iw||null===b.gb.XA)return!1;if(null!==a){if(a=a.ca,null!==a&&a.canEdit())return!0}else for(b=b.selection.i;b.next();)if(a=b.value,a.canEdit()&&(a=a.zt(function(a){return a instanceof qa&&a.Tz}),null!==a))return!0;return!1};
ra.prototype.showContextMenu=function(a){var b=this.h;if(null!==b){var c=b.gb.Jz;if(null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.first():b),a=c.findObjectWithContextMenu(a),null!==a)){var d=new Rf,e=null;a instanceof O?e=a.eb(ec):b.gI||(e=b.xb,e=new N(e.x+e.width/2,e.y+e.height/2));null!==e&&(d.h=b,d.ue=b.aB(e),d.ga=e,d.left=!1,d.right=!0,d.up=!0,b.R=d);b.cb=c;oh(c,!1,a)}}};
ra.prototype.canShowContextMenu=function(a){var b=this.h;if(null===b)return!1;var c=b.gb.Jz;if(null===c)return!1;void 0===a&&(a=0<b.selection.count?b.selection.first():b);return null===c.findObjectWithContextMenu(a)?!1:!0};z.defineProperty(ra,{hH:"copiesClipboardData"},function(){return this.AB},function(a){z.g(a,"boolean",ra,"copiesClipboardData");this.AB=a});
z.defineProperty(ra,{iH:"copiesConnectedLinks"},function(){return this.BB},function(a){z.g(a,"boolean",ra,"copiesConnectedLinks");this.BB=a});z.defineProperty(ra,{gE:"deletesConnectedLinks"},function(){return this.TB},function(a){z.g(a,"boolean",ra,"deletesConnectedLinks");this.TB=a});z.defineProperty(ra,{kH:"copiesTree"},function(){return this.FB},function(a){z.g(a,"boolean",ra,"copiesTree");this.FB=a});
z.defineProperty(ra,{pH:"deletesTree"},function(){return this.UB},function(a){z.g(a,"boolean",ra,"deletesTree");this.UB=a});z.defineProperty(ra,{YD:"copiesParentKey"},function(){return this.EB},function(a){z.g(a,"boolean",ra,"copiesParentKey");this.EB=a});z.defineProperty(ra,{XD:"copiesGroupKey"},function(){return this.DB},function(a){z.g(a,"boolean",ra,"copiesGroupKey");this.DB=a});
z.defineProperty(ra,{HD:"archetypeGroupData"},function(){return this.ky},function(a){null!==a&&z.l(a,Object,ra,"archetypeGroupData");var b=this.h;null!==b&&(b=b.ha,b instanceof V&&(a instanceof F||b.hA(a)||z.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)));this.ky=a});z.defineProperty(ra,{qA:"memberValidation"},function(){return this.il},function(a){null!==a&&z.g(a,"function",ra,"memberValidation");this.il=a});
z.defineProperty(ra,{Tw:"defaultScale"},function(){return this.RB},function(a){z.p(a,ra,"defaultScale");0<a||z.k("defaultScale must be larger than zero, not: "+a);this.RB=a});z.defineProperty(ra,{Vx:"zoomFactor"},function(){return this.yD},function(a){z.p(a,ra,"zoomFactor");1<a||z.k("zoomFactor must be larger than 1.0, not: "+a);this.yD=a});function xg(){0<arguments.length&&z.pd(xg);z.kc(this);this.Z=null;this.Ub="";this.af=!0;this.kC=!1;this.uD=null;this.Bw=-1}z.ia("Tool",xg);
xg.prototype.Sc=function(a){u&&null!==a&&z.l(a,B,xg,"setDiagram");this.Z=a};xg.prototype.toString=function(){return""!==this.name?this.name+" Tool":z.kf(Object.getPrototypeOf(this))};xg.prototype.updateAdornments=function(){};xg.prototype.canStart=function(){return this.isEnabled};xg.prototype.doStart=function(){};xg.prototype.doActivate=function(){this.ua=!0};xg.prototype.doDeactivate=function(){this.ua=!1};xg.prototype.doStop=function(){};xg.prototype.doCancel=function(){this.stopTool()};
xg.prototype.stopTool=function(){var a=this.h;null!==a&&a.cb===this&&(a.cb=null,a.gc="")};xg.prototype.doMouseDown=function(){!this.ua&&this.canStart()&&this.doActivate()};xg.prototype.doMouseMove=function(){};xg.prototype.doMouseUp=function(){this.stopTool()};xg.prototype.doMouseWheel=function(){};xg.prototype.canStartMultiTouch=function(){return!0};
xg.prototype.standardPinchZoomStart=function(){var a=this.h;if(null!==a){var b=a.R.event,c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Uf[0])c=a.Uf[0],d=a.Uf[1];else return;this.doCancel();if(a.rp("hasGestureZoom")){a.Ny=!0;a.KC=a.scale;var e=ph(a),g=c,h=g.clientX-e.x,c=g.clientY-e.y,g=d,d=g.clientX-e.x,g=g.clientY-e.y;z.A(e);e=d-h;c=g-c;a.cD=Math.sqrt(e*e+c*c);b.preventDefault();b.cancelBubble=!0}}};
xg.prototype.standardPinchZoomMove=function(){var a=this.h;if(null!==a){var b=a.R.event;this.doCancel();var c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Uf[0])c=a.Uf[0],d=a.Uf[1];else return;if(a.rp("hasGestureZoom")&&a.Ny){var e=ph(a),g=c,c=g.clientX-e.x,h=g.clientY-e.y,g=d,d=g.clientX-e.x,g=g.clientY-e.y;z.A(e);var e=d-c,k=g-h,e=Math.sqrt(e*e+k*k)/a.cD,c=new N((Math.min(d,c)+Math.max(d,c))/2,(Math.min(g,
h)+Math.max(g,h))/2),h=a.KC*e,d=a.wb;h!==a.scale&&d.canResetZoom(h)&&(e=a.$l,a.$l=c,d.resetZoom(h),a.$l=e);b.preventDefault();b.cancelBubble=!0}}};xg.prototype.doKeyDown=function(){var a=this.h;null!==a&&"Esc"===a.R.key&&this.doCancel()};xg.prototype.doKeyUp=function(){};xg.prototype.startTransaction=xg.prototype.Wb=function(a){void 0===a&&(a=this.name);this.Mf=null;var b=this.h;return null===b?!1:b.Wb(a)};
xg.prototype.stopTransaction=xg.prototype.yk=function(){var a=this.h;return null===a?!1:null===this.Mf?a.Vp():a.Kd(this.Mf)};
xg.prototype.standardMouseSelect=function(){var a=this.h;if(null!==a&&a.xf){var b=a.R,c=a.Bt(b.ga,!1);if(null!==c)if(z.sk?b.$t:b.control){a.Ja("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Qa;null!==b&&(b.jb=!b.jb);a.Ja("ChangedSelection")}else if(b.shift){if(!c.jb){a.Ja("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Qa;null!==b&&(b.jb=!0);a.Ja("ChangedSelection")}}else{if(!c.jb){for(b=c;null!==b&&!b.canSelect();)b=b.Qa;null!==b&&a.select(b)}}else!b.left||(z.sk?b.$t:b.control)||
b.shift||a.Nw()}};xg.prototype.standardMouseClick=function(a,b){void 0===a&&(a=null);void 0===b&&(b=function(a){return!a.layer.Nc});var c=this.h;if(null===c)return!1;var d=c.R,e=c.pe(d.ga,a,b);d.Ge=e;zh(e,d,c);return d.Gc};
function zh(a,b,c){b.Gc=!1;var d=0;b.left?d=1===b.Pe?1:2===b.Pe?2:1:b.right&&1===b.Pe&&(d=3);var e="";if(null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Ja(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Ja(e)}if(null!==a)for(;null!==a;){c=null;switch(d){case 1:c=a.click;break;case 2:c=a.wt?a.wt:a.click;break;case 3:c=
a.Iz}if(null!==c&&(c(b,a),b.Gc))break;a=a.T}else{a=null;switch(d){case 1:a=c.click;break;case 2:a=c.wt?c.wt:c.click;break;case 3:a=c.Iz}null!==a&&a(b)}}
xg.prototype.standardMouseOver=function(){var a=this.h;if(null!==a){var b=a.R;if(null!==b.h&&!0!==a.Va.wc){var c=a.Bb;a.Bb=!0;var d=a.pe(b.ga,null,null);b.Ge=d;var e=!1;if(d!==a.Rn){var g=a.Rn,h=g;a.Rn=d;this.doCurrentObjectChanged(g,d);for(b.Gc=!1;null!==g;){var k=g.bu;if(null!==k){if(d===g)break;if(null!==d&&d.Pl(g))break;k(b,g,d);e=!0;if(b.Gc)break}g=g.T}g=h;for(b.Gc=!1;null!==d;){k=d.au;if(null!==k){if(g===d)break;if(null!==g&&g.Pl(d))break;k(b,d,g);e=!0;if(b.Gc)break}d=d.T}d=a.Rn}if(null!==d){g=
d;for(k="";null!==g;){k=g.cursor;if(""!==k)break;g=g.T}a.gc=k;b.Gc=!1;for(g=d;null!==g;){k=g.uA;if(null!==k&&(k(b,g),e=!0,b.Gc))break;g=g.T}}else a.gc="",k=a.uA,null!==k&&(k(b),e=!0);e&&a.Ce();a.Bb=c}}};xg.prototype.doCurrentObjectChanged=function(){};
xg.prototype.standardMouseWheel=function(){var a=this.h;if(null!==a){var b=a.R,c=b.Dl;if(0!==c&&a.ad.F()){var d=a.wb,e=a.gb.cu;if((e===Hh&&!b.shift||e===Ih&&b.control)&&(0<c?d.canIncreaseZoom():d.canDecreaseZoom()))e=a.$l,a.$l=b.ue,0<c?d.increaseZoom():d.decreaseZoom(),a.$l=e,b.bubbles=!1;else if(e===Hh&&b.shift||e===Ih&&!b.control){var d=a.position.copy(),e=0<c?c:-c,g=b.event.deltaX,h=b.event.deltaY;void 0===g||void 0===h||0===g&&0===h||b.shift?!b.shift&&a.ze?(g=a.ou,e=e/40*g,0<c?a.scroll("pixel",
"up",e):a.scroll("pixel","down",e)):b.shift&&a.ye&&(g=a.nu,e=e/40*g,0<c?a.scroll("pixel","left",e):a.scroll("pixel","right",e)):(0!==g&&a.ye&&(0<g?a.scroll("pixel","left",-g):a.scroll("pixel","right",g)),0!==h&&a.ze&&(0<h?a.scroll("pixel","up",-h):a.scroll("pixel","down",h)));a.position.N(d)||(b.bubbles=!1)}}}};xg.prototype.standardWaitAfter=function(a,b){z.g(a,"number",xg,"standardWaitAfter:delay");this.cancelWaitAfter();var c=this,d=b.copy();this.Bw=z.setTimeout(function(){c.doWaitAfter(d)},a)};
xg.prototype.cancelWaitAfter=function(){-1!==this.Bw&&z.clearTimeout(this.Bw);this.Bw=-1};xg.prototype.doWaitAfter=function(){};xg.prototype.findToolHandleAt=function(a,b){var c=this.h;if(null===c)return null;c=c.pe(a,function(a){for(;null!==a&&!(a.T instanceof da);)a=a.T;return a});return null===c?null:c.T.nc===b?c:null};
xg.prototype.isBeyondDragSize=function(a,b){var c=this.h;if(null===c)return!1;void 0===a&&(a=c.Fc.ue);void 0===b&&(b=c.R.ue);var d=c.gb.tH,e=d.width,d=d.height;c.Fc.mj&&(e+=6,d+=6);return Math.abs(b.x-a.x)>e||Math.abs(b.y-a.y)>d};z.w(xg,{h:"diagram"},function(){return this.Z});z.defineProperty(xg,{name:"name"},function(){return this.Ub},function(a){z.g(a,"string",xg,"name");this.Ub=a});
z.defineProperty(xg,{isEnabled:"isEnabled"},function(){return this.af},function(a){z.g(a,"boolean",xg,"isEnabled");this.af=a});z.defineProperty(xg,{ua:"isActive"},function(){return this.kC},function(a){z.g(a,"boolean",xg,"isActive");this.kC=a});z.defineProperty(xg,{Mf:"transactionResult"},function(){return this.uD},function(a){null!==a&&z.g(a,"string",xg,"transactionResult");this.uD=a});
function lh(){0<arguments.length&&z.pd(lh);xg.call(this);this.name="Dragging";this.CB=this.oC=!0;this.jr=this.$B=!1;this.tC=!0;this.Oy=(new Ea(NaN,NaN)).freeze();this.Py=Zb;this.Qy=(new N(NaN,NaN)).freeze();this.ZB=!1;this.XB=this.zB=this.YB=this.KB=this.Ti=null;this.Uq=this.rC=!1;this.Po=new N(NaN,NaN);this.rw=new N;this.uw=!1;this.nC=!0;this.$n=100;this.Cj=[];this.oG=(new K(D)).freeze()}z.Ra(lh,xg);z.ia("DraggingTool",lh);
z.defineProperty(lh,{KE:"isCopyEnabled"},function(){return this.oC},function(a){z.g(a,"boolean",lh,"isCopyEnabled");this.oC=a});z.defineProperty(lh,{jH:"copiesEffectiveCollection"},function(){return this.CB},function(a){z.g(a,"boolean",lh,"copiesEffectiveCollection");this.CB=a});z.defineProperty(lh,{uH:"dragsTree"},function(){return this.$B},function(a){z.g(a,"boolean",lh,"dragsTree");this.$B=a});
z.defineProperty(lh,{kx:"isGridSnapEnabled"},function(){return this.jr},function(a){z.g(a,"boolean",lh,"isGridSnapEnabled");this.jr=a});z.defineProperty(lh,{cI:"isComplexRoutingRealtime"},function(){return this.nC},function(a){z.g(a,"boolean",lh,"isComplexRoutingRealtime");this.nC=a});z.defineProperty(lh,{eI:"isGridSnapRealtime"},function(){return this.tC},function(a){z.g(a,"boolean",lh,"isGridSnapRealtime");this.tC=a});
z.defineProperty(lh,{AE:"gridSnapCellSize"},function(){return this.Oy},function(a){z.l(a,Ea,lh,"gridSnapCellSize");this.Oy.N(a)||(this.Oy=a=a.V())});z.defineProperty(lh,{PH:"gridSnapCellSpot"},function(){return this.Py},function(a){z.l(a,Q,lh,"gridSnapCellSpot");this.Py.N(a)||(this.Py=a=a.V())});z.defineProperty(lh,{QH:"gridSnapOrigin"},function(){return this.Qy},function(a){z.l(a,N,lh,"gridSnapOrigin");this.Qy.N(a)||(this.Qy=a=a.V())});
z.defineProperty(lh,{gj:"dragsLink"},function(){return this.ZB},function(a){z.g(a,"boolean",lh,"dragsLink");this.ZB=a});z.defineProperty(lh,{an:"currentPart"},function(){return this.KB},function(a){null!==a&&z.l(a,D,lh,"currentPart");this.KB=a});z.defineProperty(lh,{oc:"copiedParts"},function(){return this.zB},function(a){this.zB=a});z.defineProperty(lh,{hc:"draggedParts"},function(){return this.YB},function(a){this.YB=a});
z.w(lh,{uK:"draggingParts"},function(){return null!==this.oc?this.oc.vj():null!==this.hc?this.hc.vj():this.oG});z.defineProperty(lh,{ld:"draggedLink"},function(){return this.XB},function(a){null!==a&&z.l(a,G,lh,"draggedLink");this.XB=a});z.defineProperty(lh,{jx:"isDragOutStarted"},function(){return this.rC},function(a){this.rC=a});z.defineProperty(lh,{xk:"startPoint"},function(){return this.rw},function(a){z.l(a,N,lh,"startPoint");this.rw.N(a)||(this.rw=a=a.V())});
z.defineProperty(lh,{bE:"delay"},function(){return this.$n},function(a){z.g(a,"number",lh,"delay");this.$n=a});lh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||a.ib&&!a.kt||!a.vl&&!a.lk&&!a.kt||!a.xf)return!1;var b=a.R;return!b.left||a.cb!==this&&(!this.isBeyondDragSize()||b.mj&&b.timestamp-a.Fc.timestamp<this.$n)?!1:null!==this.findDraggablePart()};
lh.prototype.findDraggablePart=function(){var a=this.h;if(null===a)return null;a=a.Bt(a.Fc.ga,!1);if(null===a)return null;for(;null!==a&&!a.canSelect();)a=a.Qa;return null!==a&&(a.canMove()||a.canCopy())?a:null};lh.prototype.standardMouseSelect=function(){var a=this.h;if(null!==a&&a.xf){var b=a.Bt(a.Fc.ga,!1);if(null!==b){for(;null!==b&&!b.canSelect();)b=b.Qa;this.an=b;this.an.jb||(a.Ja("ChangingSelection"),b=a.R,(z.sk?b.$t:b.control)||b.shift||kh(a),this.an.jb=!0,a.Ja("ChangedSelection"))}}};
lh.prototype.doActivate=function(){var a=this.h;if(null!==a){null===this.an&&this.standardMouseSelect();var b=this.an;null!==b&&(b.canMove()||b.canCopy())&&(this.ua=!0,this.Po.set(a.position),Jh(this,a.selection),this.Cj.length=0,this.hc=this.computeEffectiveCollection(a.selection),a.vu=!0,Kh(this,this.hc),this.Wb("Drag"),this.xk=a.Fc.ga,a.We=!0,a.kt&&(this.jx=!0,this.Uq=!1,Lh=this,Mh=this.h,this.doSimulatedDragOut()))}};
function Jh(a,b){if(a.gj){var c=a.h;null!==c&&c.Sm&&(c.ha instanceof V&&1===b.count&&b.first()instanceof G?(a.ld=b.first(),a.ld.canRelinkFrom()&&a.ld.canRelinkTo()&&a.ld.pt(),a.Ti=c.gb.jF,null===a.Ti&&(a.Ti=new Nh,a.Ti.Sc(c))):(a.ld=null,a.Ti=null))}}
lh.prototype.computeEffectiveCollection=function(a){var b=null!==this.h&&this.h.cb===this,c=new na(D);if(null===a)return c;for(var d=a.i;d.next();)Oh(this,c,d.value,b);if(null!==this.ld&&this.gj)return c;for(d=a.i;d.next();)a=d.value,a instanceof G&&(b=a.Y,null===b||c.contains(b)?(b=a.da,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c};function Ph(a){return void 0===a?new Qh(Id):new Qh(a.copy())}
function Oh(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof E){b.add(c,Ph(c.location));if(c instanceof F)for(var e=c.Hc;e.next();)Oh(a,b,e.value,d);for(e=c.ee;e.next();){var g=e.value;if(!b.contains(g)){var h=g.Y,k=g.da;null!==h&&b.contains(h)&&null!==k&&b.contains(k)&&Oh(a,b,g,d)}}if(a.uH)for(c=c.sE();c.next();)Oh(a,b,c.value,d)}else if(c instanceof G)for(g=c,b.add(g,Ph()),e=g.Hf;e.next();)Oh(a,b,e.value,d);else c instanceof da||b.add(c,Ph(c.location))}
lh.prototype.doDeactivate=function(){this.ua=!1;var a=this.h;null!==a&&Rh(a);Sh(this);Th(this,this.hc);this.hc=this.an=null;this.Uq=this.jx=!1;if(0<Uh.count){for(var b=Uh.length,c=0;c<b;c++){var d=Uh.ea(c);Vh(d);Wh(d);Sh(d);null!==d.h&&Rh(d.h)}Uh.clear()}Vh(this);this.Po.n(NaN,NaN);Lh=Mh=null;Wh(this);a.We=!1;a.gc="";a.vu=!1;this.yk()};function Sh(a){var b=a.h;if(null!==b){var c=b.Bb;b.Bb=!0;Xh(a,b.R,null);b.Bb=c}a.Cj.length=0}
function Yh(){var a=Lh;Wh(a);Zh(a);var b=a.h;null!==b&&a.Po.F()&&(b.position=a.Po);null!==b&&Rh(b)}lh.prototype.doCancel=function(){Wh(this);Zh(this);var a=this.h;null!==a&&this.Po.F()&&(a.position=this.Po);this.stopTool()};function Kh(a,b){if(null!==b){a.uw=!0;for(var c=b.i;c.next();){var d=c.key;d instanceof G&&(d.eq=!0)}}}function Th(a,b){if(null!==b){for(var c=b.i;c.next();){var d=c.key;d instanceof G&&(d.eq=!1,d.kj&&$h(d)&&d.qc())}a.uw=!1}}
lh.prototype.doKeyDown=function(){var a=this.h;null!==a&&(a=a.R,null!==a&&this.ua&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};lh.prototype.doKeyUp=function(){var a=this.h;null!==a&&null!==a.R&&this.ua&&this.doMouseMove()};function ai(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,g=-Infinity,h=a.i;h.next();){var k=h.value;if(k.be()&&k.isVisible()){var l=k.location,k=l.x,l=l.y;isNaN(k)||isNaN(l)||(k<c&&(c=k),l<d&&(d=l),k>e&&(e=k),l>g&&(g=l))}}Infinity===c?b.n(0,0,0,0):b.n(c,d,e-c,g-d)}
function bi(a,b){if(null===a.oc){var c=a.h;if(!(null===c||b&&(c.ib||c.Ef))&&null!==a.hc){var d=c.pa;d.isEnabled&&d.PE?null!==d.ej&&0<d.ej.Zf.count&&(c.pa.Vp(),c.Wb("Drag")):Zh(a);c.Bb=!b;c.lq=!b;a.xk=c.Fc.ga;d=a.jH?a.hc.vj():c.selection;d=c.gp(d,c,!0);for(c=d.i;c.next();)c.value.location=c.key.location;c=z.lg();ai(d,c);z.dc(c);for(var c=new na(D),e=a.hc.i;e.next();){var g=e.key;g.be()&&g.canCopy()&&(g=d.na(g),null!==g&&(g.Bf(),c.add(g,Ph(g.location))))}for(d=d.i;d.next();)e=d.value,e instanceof G&&
e.canCopy()&&c.add(e,Ph());a.oc=c;Jh(a,c.vj());null!==a.ld&&(c=a.ld,d=c.tn,c.Rl(a.xk.x-(d.x+d.width/2),a.xk.y-(d.y+d.height/2)))}}}function Wh(a){var b=a.h;if(null!==b){if(null!==a.oc&&(b.JA(a.oc.vj(),!1),a.oc=null,null!==a.hc))for(var c=a.hc.i;c.next();)c.key instanceof G&&(c.value.point=new N(0,0));b.Bb=!1;b.lq=!1;a.xk=b.Fc.ga}}function Vh(a){if(null!==a.ld){if(a.gj&&null!==a.Ti){var b=a.Ti;b.h.remove(b.Od);b.h.remove(b.Pd)}a.ld=null;a.Ti=null}}
function ci(a,b,c){var d=a.h;if(null!==d){var e=a.xk,g=z.O();g.assign(d.R.ga);a.moveParts(b,g.xu(e),c);z.A(g)}}
lh.prototype.moveParts=function(a,b,c){if(null!==a&&(z.l(a,na,lh,"moveParts:parts"),0!==a.count)){var d=z.O(),e=z.O();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);(b=this.uw)||Kh(this,a);for(var g=new J(di),h=new J(Ya),k=a.i;k.next();){var l=k.key;if(l.be()){var m=ei(this,l,a);if(null!==m)g.add(new di(l,k.value,m));else if(!c||l.canMove()){m=k.value.point;d.assign(m);var n=z.O(),p=this.computeMove(l,d.add(e),a,n);l.location=p;k.value.KF=n.xu(m);z.A(n)}}else k.key instanceof G&&h.add(k.lb)}for(c=
g.i;c.next();)g=c.value,m=g.info.point,d.assign(m),g.Pc.location=d.add(g.RH.KF);c=z.O();m=z.O();for(h=h.i;h.next();)if(k=h.value,g=k.key,g instanceof G)if(g.eq)l=g.Y,n=g.da,null!==this.ld&&this.gj?(k=k.value.point,a.add(g,Ph(e)),l=e.x-k.x,k=e.y-k.y,g.Rl(l,k)):(null!==l&&(c.assign(l.location),p=a.na(l),null!==p&&c.xu(p.point)),null!==n&&(m.assign(n.location),p=a.na(n),null!==p&&m.xu(p.point)),null!==l&&null!==n?c.Mc(m)?(k=k.value.point,l=d,l.assign(c),l.xu(k),a.add(g,Ph(c)),g.Rl(l.x,l.y)):(g.eq=!1,
g.qc()):(k=k.value.point,n=null!==l?c:null!==n?m:e,a.add(g,Ph(n)),l=n.x-k.x,k=n.y-k.y,g.Rl(l,k)));else if(null===g.Y||null===g.da)k=k.value.point,a.add(g,Ph(e)),l=e.x-k.x,k=e.y-k.y,g.Rl(l,k);z.A(d);z.A(e);z.A(c);z.A(m);b||Th(this,a)}};function ei(a,b,c){b=b.Qa;if(null!==b){a=ei(a,b,c);if(null!==a)return a;a=c.na(b);if(null!==a)return a}return null}
function Zh(a){if(null!==a.hc){for(var b=a.h,c=a.hc.i;c.next();){var d=c.key;d.be()&&(d.location=c.value.point)}for(c=a.hc.i;c.next();)if(d=c.key,d instanceof G&&d.eq){var e=c.value.point;a.hc.add(d,Ph());d.Rl(-e.x,-e.y)}b.cg()}}
lh.prototype.computeMove=function(a,b,c,d){void 0===d&&(d=new N);d.assign(b);if(null===a)return d;void 0===c&&(c=null);var e=b;if(this.kx&&(this.eI||null===c||this.h.R.up)&&(e=z.O(),c=e,c.assign(b),null!==a)){var g=this.h;if(null!==g){var h=g.tp,k=this.AE,g=k.width,k=k.height,l=this.QH,m=l.x,l=l.y,n=this.PH;if(null!==h){var p=h.gx;isNaN(g)&&(g=p.width);isNaN(k)&&(k=p.height);h=h.zE;isNaN(m)&&(m=h.x);isNaN(l)&&(l=h.y)}h=z.Tb(0,0);h.tu(0,0,g,k,n);jb(b.x,b.y,m+h.x,l+h.y,g,k,c);z.A(h)}}c=null!==a.hE?
a.hE(a,b,e):e;k=a.FI;g=k.x;isNaN(g)&&(g=a.location.x);k=k.y;isNaN(k)&&(k=a.location.y);h=a.AI;m=h.x;isNaN(m)&&(m=a.location.x);h=h.y;isNaN(h)&&(h=a.location.y);d.n(Math.max(g,Math.min(c.x,m)),Math.max(k,Math.min(c.y,h)));e!==b&&z.A(e);return d};function fi(a,b){if(null===b)return!0;var c=b.ca;return null===c||c instanceof da||c.layer.Nc||a.hc&&a.hc.contains(c)||a.oc&&a.oc.contains(c)?!0:!1}
function gi(a,b,c,d){var e=a.h;if(null!==e){a.gj&&(null!==a.ld&&(a.ld.Y=null,a.ld.da=null),hi(a,!1));var g=ii(e,b,null,function(b){return!fi(a,b)}),h=e.R;h.Ge=g;var k=e.Bb,l=!1;try{e.Bb=!0;l=Xh(a,h,g);if(!a.ua&&null===Lh)return;if(null===g){var m=e.JI;null!==m&&(m(h),l=!0)}if(!a.ua&&null===Lh)return;a.doDragOver(b,g);if(!a.ua&&null===Lh)return}finally{e.Bb=k,l&&e.cg()}(e.ye||e.ze)&&(c||d)&&ji(e,h.ue)}}
function Xh(a,b,c){var d=!1,e=a.Cj.length,g=0<e?a.Cj[0]:null;if(c===g)return!1;b.Gc=!1;for(var h=0;h<e;h++){var k=a.Cj[h],l=k.II;if(null!==l&&(l(b,k,c),d=!0,b.Gc))break}a.Cj.length=0;if(!a.ua&&null===Lh||null===c)return d;for(b.Gc=!1;null!==c;)a.Cj.push(c),c=ki(c);e=a.Cj.length;for(h=0;h<e&&(k=a.Cj[h],l=k.HI,null===l||(l(b,k,g),d=!0,!b.Gc));h++);return d}function ki(a){var b=a.T;return null!==b?b:a instanceof D&&!(a instanceof F)&&(a=a.Qa,null!==a&&a.TH)?a:null}
function li(a,b,c){var d=a.Ti;if(null===d)return null;var e=a.h.cn(b,d.hF,function(a){return d.findValidLinkablePort(a,c)});a=z.O();for(var g=Infinity,h=null,e=e.i;e.next();){var k=e.value;if(null!==k.ca){var l=k.eb(ec,a),l=b.Af(l);l<g&&(h=k,g=l)}}z.A(a);return h}
function hi(a,b){var c=a.ld;if(null!==c&&!(2>c.sa)){var d=a.h;if(null!==d&&!d.ib&&(d=a.Ti,null!==d)){var e=null,g=null;null===c.Y&&(e=li(a,c.m(0),!1),null!==e&&(g=e.ca));var h=null,k=null;null===c.da&&(h=li(a,c.m(c.sa-1),!0),null!==h&&(k=h.ca));d.isValidLink(g,e,k,h)?b?(c.Un=c.m(0).copy(),c.Yn=c.m(c.sa-1).copy(),c.eq=!1,c.Y=g,null!==e&&(c.ag=e.zd),c.da=k,null!==h&&(c.Vg=h.zd)):mi(d,g,e,k,h):mi(d,null,null,null,null)}}}lh.prototype.doDragOver=function(){};
function ni(a,b){var c=a.h;if(null!==c){a.gj&&hi(a,!0);Sh(a);var d=ii(c,b,null,function(b){return!fi(a,b)}),e=c.R;e.Ge=d;if(null!==d){e.Gc=!1;for(var g=d;null!==g;){var h=g.rA;if(null!==h&&(h(e,g),e.Gc))break;g=ki(g)}}else h=c.rA,null!==h&&h(e);if(a.ua||null!==Lh)if(a.doDropOnto(b,d),a.ua||null!==Lh)for(d=c.selection.i;d.next();)e=d.value,e instanceof E&&oi(c,e.W)}}lh.prototype.doDropOnto=function(){};
lh.prototype.doMouseMove=function(){if(this.ua){var a=this.h;if(null!==a&&null!==this.an&&null!==this.hc){var b=!1,c=!1;this.mayCopy()?(b=!0,a.gc="copy",bi(this,!1),Kh(this,this.oc),ci(this,this.oc,!1),Th(this,this.oc)):this.mayMove()?(c=!0,a.gc="default",Wh(this),ci(this,this.hc,!0)):this.mayDragOut()?(a.gc="no-drop",bi(this,!1),ci(this,this.oc,!1)):Wh(this);gi(this,a.R.ga,c,b)}}};
lh.prototype.doMouseUp=function(){if(this.ua){var a=this.h;if(null!==a){var b=!1,c=this.mayCopy();c&&null!==this.oc?(Wh(this),bi(this,!0),Kh(this,this.oc),ci(this,this.oc,!1),Th(this,this.oc),null!==this.oc&&a.EF(this.oc.vj())):(b=!0,Wh(this),this.mayMove()&&(ci(this,this.hc,!0),gi(this,a.R.ga,!0,!1)));this.Uq=!0;ni(this,a.R.ga);if(this.ua){this.oc=null;if(b&&null!==this.hc)for(b=this.hc.i;b.next();){var d=b.key;d instanceof E&&(d=d.Qa,null===d||null===d.placeholder||this.hc.contains(d)||d.UD&&d.Q())}a.yc();
Th(this,this.hc);this.Mf=c?"Copy":"Move";a.Ja(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};lh.prototype.mayCopy=function(){if(!this.KE)return!1;var a=this.h;if(null===a||a.ib||a.Ef||!a.$o||!a.lk||(z.sk?!a.R.alt:!a.R.control))return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.be()&&b.canCopy())return!0}return null!==this.ld&&this.gj&&this.ld.canCopy()?!0:!1};
lh.prototype.mayDragOut=function(){if(!this.KE)return!1;var a=this.h;if(null===a||!a.kt||!a.lk||a.vl)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.be()&&b.canCopy())return!0}return null!==this.ld&&this.gj&&this.ld.canCopy()?!0:!1};lh.prototype.mayMove=function(){var a=this.h;if(null===a||a.ib||!a.vl)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.be()&&b.canMove())return!0}return null!==this.ld&&this.gj&&this.ld.canMove()?!0:!1};var Uh=new J(lh),Lh=null,Mh=null;
lh.prototype.getDraggingSource=function(){return Lh};lh.prototype.mayDragIn=function(){var a=this.h;if(null===a||!a.FD||a.ib||a.Ef||!a.$o)return!1;var b=Lh;return null===b||b.h.ha.Bl!==a.ha.Bl?!1:!0};lh.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=this.h;a.Va.pi();pi(a);a=Lh;null!==a&&(a.h.gc="copy")}};lh.prototype.doSimulatedDragLeave=function(){var a=Lh;null!==a&&a.doSimulatedDragOut();this.doCancel()};
lh.prototype.doSimulatedDragOver=function(){var a=this.h;if(null!==a){var b=Lh;null!==b&&null!==b.hc&&this.mayDragIn()&&(a.gc="copy",qi(this,b.hc.vj(),!1),ci(this,this.oc,!1),gi(this,a.R.ga,!1,!0))}};
lh.prototype.doSimulatedDrop=function(){var a=this.h;if(null!==a){var b=Lh;if(null!==b){var c=b.h;b.Uq=!0;Wh(this);this.mayDragIn()&&(this.Wb("Drop"),qi(this,b.hc.vj(),!0),ci(this,this.oc,!1),null!==this.oc&&a.EF(this.oc.vj()),ni(this,a.R.ga),a.yc(),b=a.selection,null!==this.oc?this.Mf="ExternalCopy":b=new K(D),this.oc=null,a.focus(),a.Ja("ExternalObjectsDropped",b,c),this.yk())}}};
function qi(a,b,c){if(null===a.oc){var d=a.h;if(null!==d&&!d.ib&&!d.Ef){d.Bb=!c;d.lq=!c;a.xk=d.R.ga;d=d.gp(b,d,!0);c=z.lg();ai(b,c);var e=c.x+c.width/2,g=c.y+c.height/2;z.dc(c);var h=a.rw;c=new na(D);var k=z.O();for(b=b.i;b.next();){var l=b.value;if(l.be()&&l.canCopy()){var m=l.location,l=d.na(l);k.n(h.x-(e-m.x),h.y-(g-m.y));l.location=k;l.Bf();c.add(l,Ph(k))}}z.A(k);for(d=d.i;d.next();)e=d.value,e instanceof G&&e.canCopy()&&c.add(e,Ph());a.oc=c;Jh(a,c.vj());null!==a.ld&&(c=a.ld,d=c.tn,c.Rl(a.xk.x-
(d.x+d.width/2),a.xk.y-(d.y+d.height/2)))}}}lh.prototype.doSimulatedDragOut=function(){var a=this.h;null!==a&&(this.mayCopy()||this.mayMove()?a.gc="":a.gc="no-drop")};function Qh(a){this.point=a;this.KF=Id}z.ia("DraggingInfo",Qh);function di(a,b,c){this.Pc=a;this.info=b;this.RH=c}
function ri(){0<arguments.length&&z.pd(ri);xg.call(this);this.UC=100;this.wC=!1;var a=new G,b=new X;b.Ff=!0;b.stroke="blue";a.add(b);b=new X;b.fq="Standard";b.fill="blue";b.stroke="blue";a.add(b);a.If="Tool";this.mD=a;a=new E;b=new X;b.zd="";b.Hb="Rectangle";b.fill=null;b.stroke="magenta";b.ub=2;b.Aa=Qd;a.add(b);a.wk=!1;a.If="Tool";this.kD=a;this.lD=b;a=new E;b=new X;b.zd="";b.Hb="Rectangle";b.fill=null;b.stroke="magenta";b.ub=2;b.Aa=Qd;a.add(b);a.wk=!1;a.If="Tool";this.nD=a;this.oD=b;this.RC=this.QC=
this.MC=this.LC=this.NC=null;this.sC=!0;this.FG=new na(O,"boolean");this.VC=this.fl=this.gD=null}z.Ra(ri,xg);z.ia("LinkingBaseTool",ri);ri.prototype.doStop=function(){var a=this.h;null!==a&&Rh(a);this.Rg=this.Qg=this.Pg=this.Og=this.sc=null;this.Ux.clear();this.kg=null};z.defineProperty(ri,{hF:"portGravity"},function(){return this.UC},function(a){z.g(a,"number",ri,"portGravity");0<=a&&(this.UC=a)});
z.defineProperty(ri,{Cp:"isUnconnectedLinkValid"},function(){return this.wC},function(a){z.g(a,"boolean",ri,"isUnconnectedLinkValid");this.wC=a});z.defineProperty(ri,{Ug:"temporaryLink"},function(){return this.mD},function(a){z.l(a,G,ri,"temporaryLink");this.mD=a});z.defineProperty(ri,{Od:"temporaryFromNode"},function(){return this.kD},function(a){z.l(a,E,ri,"temporaryFromNode");this.kD=a});
z.defineProperty(ri,{yn:"temporaryFromPort"},function(){return this.lD},function(a){z.l(a,O,ri,"temporaryFromPort");this.lD=a});z.defineProperty(ri,{Pd:"temporaryToNode"},function(){return this.nD},function(a){z.l(a,E,ri,"temporaryToNode");this.nD=a});z.defineProperty(ri,{zn:"temporaryToPort"},function(){return this.oD},function(a){z.l(a,O,ri,"temporaryToPort");this.oD=a});z.defineProperty(ri,{sc:"originalLink"},function(){return this.NC},function(a){null!==a&&z.l(a,G,ri,"originalLink");this.NC=a});
z.defineProperty(ri,{Og:"originalFromNode"},function(){return this.LC},function(a){null!==a&&z.l(a,E,ri,"originalFromNode");this.LC=a});z.defineProperty(ri,{Pg:"originalFromPort"},function(){return this.MC},function(a){null!==a&&z.l(a,O,ri,"originalFromPort");this.MC=a});z.defineProperty(ri,{Qg:"originalToNode"},function(){return this.QC},function(a){null!==a&&z.l(a,E,ri,"originalToNode");this.QC=a});
z.defineProperty(ri,{Rg:"originalToPort"},function(){return this.RC},function(a){null!==a&&z.l(a,O,ri,"originalToPort");this.RC=a});z.defineProperty(ri,{Nd:"isForwards"},function(){return this.sC},function(a){z.g(a,"boolean",ri,"isForwards");this.sC=a});z.w(ri,{Ux:"validPortsCache"},function(){return this.FG});z.defineProperty(ri,{kg:"targetPort"},function(){return this.gD},function(a){null!==a&&z.l(a,O,ri,"targetPort");this.gD=a});
ri.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.Aa=b.W.size;e?(d.Eb=b.Eb,d.Yl=b.Yl):(d.Db=b.Db,d.Jl=b.Jl);c.of=ec;var g=z.O();c.location=b.eb(ec,g);z.A(g);d.angle=b.Kl();null!==this.Cx&&this.Cx(a,b,c,d,e)}};ri.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.Aa=Qd,b.Db=Yb,b.Eb=Yb);null!==a&&(a.location=this.h.R.ga);null!==this.Cx&&this.Cx(null,null,a,b,c)};ri.prototype.doMouseDown=function(){this.ua&&this.doMouseMove()};
ri.prototype.doMouseMove=function(){if(this.ua){var a=this.h;if(null!==a){this.kg=this.findTargetPort(this.Nd);if(null!==this.kg){var b=this.kg.ca;if(b instanceof E){this.Nd?this.copyPortProperties(b,this.kg,this.Pd,this.zn,!0):this.copyPortProperties(b,this.kg,this.Od,this.yn,!1);return}}this.Nd?this.setNoTargetPortProperties(this.Pd,this.zn,!0):this.setNoTargetPortProperties(this.Od,this.yn,!1);(a.ye||a.ze)&&ji(a,a.R.ue)}}};
ri.prototype.findValidLinkablePort=function(a,b){if(null===a)return null;var c=a.ca;if(!(c instanceof E))return null;for(;null!==a;){var d=b?a.SF:a.uE;if(!0===d&&(null!==a.zd||a instanceof E)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.T}return null};
ri.prototype.findTargetPort=function(a){var b=this.h,c=b.R.ga,d=this.hF;0>=d&&(d=.1);for(var e=this,g=b.cn(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=Infinity,b=null,g=g.i;g.next();){var h=g.value,k=h.ca;if(k instanceof E){var l=h.eb(ec,z.O()),m=c.x-l.x,n=c.y-l.y;z.A(l);l=m*m+n*n;l<d&&(m=this.Ux.na(h),null!==m?m&&(b=h,d=l):a&&this.isValidLink(this.Og,this.Pg,k,h)||!a&&this.isValidLink(k,h,this.Qg,this.Rg)?(this.Ux.add(h,!0),b=h,d=l):this.Ux.add(h,!1))}}return null!==b&&(c=b.ca,
c instanceof E&&(null===c.layer||c.layer.lt))?b:null};ri.prototype.isValidFrom=function(a,b){if(null===a||null===b)return this.Cp;if(this.h.cb===this&&(null!==a.layer&&!a.layer.lt||!0!==b.uE))return!1;var c=b.Yz;if(Infinity>c){if(null!==this.sc&&a===this.Og&&b===this.Pg)return!0;var d=b.zd;null===d&&(d="");if(a.$w(d).count>=c)return!1}return!0};
ri.prototype.isValidTo=function(a,b){if(null===a||null===b)return this.Cp;if(this.h.cb===this&&(null!==a.layer&&!a.layer.lt||!0!==b.SF))return!1;var c=b.vJ;if(Infinity>c){if(null!==this.sc&&a===this.Qg&&b===this.Rg)return!0;var d=b.zd;null===d&&(d="");if(a.Ig(d).count>=c)return!1}return!0};ri.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.ca,d=b.ca;return null!==c&&c===d};
ri.prototype.isLinked=function(a,b){if(null===a||null===b)return!1;var c=a.ca;if(!(c instanceof E))return!1;var d=a.zd;null===d&&(d="");var e=b.ca;if(!(e instanceof E))return!1;var g=b.zd;null===g&&(g="");for(e=e.Ig(g);e.next();)if(g=e.value,g.Y===c&&g.ag===d)return!0;return!1};
ri.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.JH&&d.uJ||!this.isInSameNode(b,d))&&(b.IH&&d.tJ||!this.isLinked(b,d)))||null!==this.sc&&(null!==a&&this.isLabelDependentOnLink(a,this.sc)||null!==c&&this.isLabelDependentOnLink(c,this.sc))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!this.isValidCycle(a,c,this.sc))return!1;if(null!==a){var e=a.sx;if(null!==e&&!e(a,b,c,d,this.sc))return!1}if(null!==
c&&(e=c.sx,null!==e&&!e(a,b,c,d,this.sc)))return!1;e=this.sx;return null!==e?e(a,b,c,d,this.sc):!0};ri.prototype.isLabelDependentOnLink=function(a,b){if(null===a)return!1;var c=a.od;if(null===c)return!1;if(c===b)return!0;var d=new K(E);d.add(a);return si(this,c,b,d)};function si(a,b,c,d){if(b===c)return!0;var e=b.Y;if(null!==e&&e.Df&&(d.add(e),si(a,e.od,c,d)))return!0;b=b.da;return null!==b&&b.Df&&(d.add(b),si(a,b.od,c,d))?!0:!1}
ri.prototype.isValidCycle=function(a,b,c){void 0===c&&(c=null);if(null===a||null===b)return this.Cp;var d=this.h.BJ;if(d!==Bi){if(d===Ci){if(null!==c&&!c.Oc)return!0;for(d=b.ee;d.next();){var e=d.value;if(e!==c&&e.Oc&&e.da===b)return!1}return!Di(this,a,b,c,!0)}if(d===Ei){if(null!==c&&!c.Oc)return!0;for(d=a.ee;d.next();)if(e=d.value,e!==c&&e.Oc&&e.Y===a)return!1;return!Di(this,a,b,c,!0)}if(d===Fi)return a===b?a=!0:(d=new K(E),d.add(b),a=Gi(this,d,a,b,c)),!a;if(d===Hi)return!Di(this,a,b,c,!1);if(d===
Ii)return a===b?a=!0:(d=new K(E),d.add(b),a=Ji(this,d,a,b,c)),!a}return!0};function Di(a,b,c,d,e){if(b===c)return!0;if(null===b||null===c)return!1;for(var g=b.ee;g.next();){var h=g.value;if(h!==d&&(!e||h.Oc)&&h.da===b&&(h=h.Y,h!==b&&Di(a,h,c,d,e)))return!0}return!1}function Gi(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var g=c.ee;g.next();){var h=g.value;if(h!==e&&h.da===c&&(h=h.Y,h!==c&&Gi(a,b,h,d,e)))return!0}return!1}
function Ji(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var g=c.ee;g.next();){var h=g.value;if(h!==e){var k=h.Y,h=h.da,k=k===c?h:k;if(k!==c&&Ji(a,b,k,d,e))return!0}}return!1}z.defineProperty(ri,{sx:"linkValidation"},function(){return this.fl},function(a){null!==a&&z.g(a,"function",ri,"linkValidation");this.fl=a});z.defineProperty(ri,{Cx:"portTargeted"},function(){return this.VC},function(a){null!==a&&z.g(a,"function",ri,"portTargeted");this.VC=a});
function ta(){0<arguments.length&&z.pd(ta);ri.call(this);this.name="Linking";this.my={};this.ly=null;this.fa=Ki;this.dD=null}z.Ra(ta,ri);z.ia("LinkingTool",ta);var Ki;ta.Either=Ki=z.s(ta,"Either",0);var Li;ta.ForwardsOnly=Li=z.s(ta,"ForwardsOnly",0);var Mi;ta.BackwardsOnly=Mi=z.s(ta,"BackwardsOnly",0);z.defineProperty(ta,{SG:"archetypeLinkData"},function(){return this.my},function(a){null!==a&&z.l(a,Object,ta,"archetypeLinkData");a instanceof O&&z.l(a,G,ta,"archetypeLinkData");this.my=a});
z.defineProperty(ta,{JD:"archetypeLabelNodeData"},function(){return this.ly},function(a){null!==a&&z.l(a,Object,ta,"archetypeLabelNodeData");a instanceof O&&z.l(a,E,ta,"archetypeLabelNodeData");this.ly=a});z.defineProperty(ta,{direction:"direction"},function(){return this.fa},function(a){z.Ba(a,ta,ta,"direction");this.fa=a});z.defineProperty(ta,{OF:"startObject"},function(){return this.dD},function(a){null!==a&&z.l(a,O,ta,"startObject");this.dD=a});
ta.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||a.ib||a.Ef||!a.lt)return!1;var b=a.ha;return(b instanceof V||b instanceof qg)&&a.R.left&&(a.cb===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1};
ta.prototype.findLinkablePort=function(){var a=this.h;if(null===a)return null;var b=this.OF;null===b&&(b=a.pe(a.Fc.ga,null,null));if(null===b||!(b.ca instanceof E))return null;a=this.direction;if(a===Ki||a===Li){var c=this.findValidLinkablePort(b,!1);if(null!==c)return this.Nd=!0,c}if(a===Ki||a===Mi)if(c=this.findValidLinkablePort(b,!0),null!==c)return this.Nd=!1,c;return null};
ta.prototype.doActivate=function(){var a=this.h;if(null!==a){var b=this.findLinkablePort();null!==b&&(this.Wb(this.name),a.We=!0,a.gc="pointer",this.Nd?(null===this.Pd||this.Pd.location.F()||(this.Pd.location=a.R.ga),this.Pg=b,b=this.Pg.ca,b instanceof E&&(this.Og=b),this.copyPortProperties(this.Og,this.Pg,this.Od,this.yn,!1)):(null===this.Od||this.Od.location.F()||(this.Od.location=a.R.ga),this.Rg=b,b=this.Rg.ca,b instanceof E&&(this.Qg=b),this.copyPortProperties(this.Qg,this.Rg,this.Pd,this.zn,
!0)),a.add(this.Od),a.add(this.Pd),null!==this.Ug&&(null!==this.Od&&(this.Ug.Y=this.Od),null!==this.Pd&&(this.Ug.da=this.Pd),this.Ug.qc(),a.add(this.Ug)),this.ua=!0)}};ta.prototype.doDeactivate=function(){this.ua=!1;var a=this.h;null!==a&&(a.remove(this.Ug),a.remove(this.Od),a.remove(this.Pd),a.We=!1,a.gc="",this.yk())};ta.prototype.doStop=function(){ri.prototype.doStop.call(this);this.OF=null};
ta.prototype.doMouseUp=function(){if(this.ua){var a=this.h;if(null===a)return;var b=this.Mf=null,c=null,d=null,e=null,g=this.kg=this.findTargetPort(this.Nd);if(null!==g){var h=g.ca;h instanceof E&&(this.Nd?(null!==this.Og&&(b=this.Og,c=this.Pg),d=h,e=g):(b=h,c=g,null!==this.Qg&&(d=this.Qg,e=this.Rg)))}else this.Nd?null!==this.Og&&this.Cp&&(b=this.Og,c=this.Pg):null!==this.Qg&&this.Cp&&(d=this.Qg,e=this.Rg);null!==b||null!==d?(h=this.insertLink(b,c,d,e),null!==h?(null===g&&(this.Nd?h.Yn=a.R.ga.copy():
h.Un=a.R.ga.copy()),a.xf&&a.select(h),this.Mf=this.name,a.Ja("LinkDrawn",h)):(a.ha.QD(),this.doNoLink(b,c,d,e))):this.Nd?this.doNoLink(this.Og,this.Pg,null,null):this.doNoLink(null,null,this.Qg,this.Rg)}this.stopTool()};
ta.prototype.insertLink=function(a,b,c,d){var e=this.h;if(null===e)return null;var g=e.ha;if(g instanceof qg){var h=a;b=c;e.ce||(h=c,b=a);if(null!==h&&null!==b)return g.Gh(b.data,g.pb(h.data)),b.op()}else if(g instanceof V)if(h="",null!==a&&(null===b&&(b=a),h=b.zd,null===h&&(h="")),b="",null!==c&&(null===d&&(d=c),b=d.zd,null===b&&(b="")),d=this.SG,d instanceof G){if(jh(d),g=d.copy(),null!==g)return g.Y=a,g.ag=h,g.da=c,g.Vg=b,e.add(g),a=this.JD,a instanceof E&&(jh(a),a=a.copy(),null!==a&&(a.od=g,e.add(a))),
g}else if(null!==d&&(d=g.Qw(d),z.Za(d)))return null!==a&&g.Mx(d,g.pb(a.data)),g.PA(d,h),null!==c&&g.Qx(d,g.pb(c.data)),g.SA(d,b),g.gt(d),a=this.JD,null===a||a instanceof E||(a=g.copyNodeData(a),z.Za(a)&&(g.sl(a),a=g.pb(a),void 0!==a&&g.Bz(d,a))),g=e.$f(d);return null};ta.prototype.doNoLink=function(){};
function Nh(){0<arguments.length&&z.pd(Nh);ri.call(this);this.name="Relinking";var a=new X;a.Hb="Diamond";a.Aa=be;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.De=0;this.eC=a;a=new X;a.Hb="Diamond";a.Aa=be;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.De=-1;this.pD=a;this.ac=null;this.OC=new w}z.Ra(Nh,ri);z.ia("RelinkingTool",Nh);
Nh.prototype.updateAdornments=function(a){if(null!==a&&a instanceof G){var b="RelinkFrom",c=null;if(a.jb&&!this.h.ib){var d=a.un;null!==d&&a.canRelinkFrom()&&a.W.F()&&a.isVisible()&&d.W.F()&&d.oj()&&(c=a.kp(b),null===c&&(c=this.makeAdornment(d,!1),null!==c&&(c.nc=b),a.rl(b,c)))}null===c&&a.sj(b);b="RelinkTo";c=null;a.jb&&!this.h.ib&&(d=a.un,null!==d&&a.canRelinkTo()&&a.W.F()&&a.isVisible()&&d.W.F()&&d.oj()&&(c=a.kp(b),null===c&&(c=this.makeAdornment(d,!0),null!==c&&(c.nc=b),a.rl(b,c))));null===c&&
a.sj(b)}};Nh.prototype.makeAdornment=function(a,b){var c=new da;c.type=Ni;var d=b?this.sJ:this.HH;null!==d&&c.add(d.copy());c.fc=a;return c};z.defineProperty(Nh,{HH:"fromHandleArchetype"},function(){return this.eC},function(a){null!==a&&z.l(a,O,Nh,"fromHandleArchetype");this.eC=a});z.defineProperty(Nh,{sJ:"toHandleArchetype"},function(){return this.pD},function(a){null!==a&&z.l(a,O,Nh,"toHandleArchetype");this.pD=a});z.w(Nh,{handle:"handle"},function(){return this.ac});
Nh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||a.ib||a.Ef||!a.Sm)return!1;var b=a.ha;if(!(b instanceof V||b instanceof qg)||!a.R.left)return!1;b=this.findToolHandleAt(a.Fc.ga,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Fc.ga,"RelinkTo"));return null!==b};
Nh.prototype.doActivate=function(){var a=this.h;if(null!==a){if(null===this.sc){var b=this.findToolHandleAt(a.Fc.ga,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Fc.ga,"RelinkTo"));if(null===b)return;var c=b.ca;if(!(c instanceof da&&c.Xf instanceof G))return;this.ac=b;this.Nd=null===c||"RelinkTo"===c.nc;this.sc=c.Xf}this.Wb(this.name);a.We=!0;a.gc="pointer";this.Pg=this.sc.md;this.Og=this.sc.Y;this.Rg=this.sc.Qd;this.Qg=this.sc.da;this.OC.set(this.sc.W);null!==this.sc&&0<this.sc.sa&&(null===
this.sc.Y&&(null!==this.yn&&(this.yn.Aa=Pd),null!==this.Od&&(this.Od.location=this.sc.m(0))),null===this.sc.da&&(null!==this.zn&&(this.zn.Aa=Pd),null!==this.Pd&&(this.Pd.location=this.sc.m(this.sc.sa-1))));this.copyPortProperties(this.Og,this.Pg,this.Od,this.yn,!1);this.copyPortProperties(this.Qg,this.Rg,this.Pd,this.zn,!0);a.add(this.Od);a.add(this.Pd);null!==this.Ug&&(null!==this.Od&&(this.Ug.Y=this.Od),null!==this.Pd&&(this.Ug.da=this.Pd),this.copyLinkProperties(this.sc,this.Ug),this.Ug.qc(),a.add(this.Ug));
this.ua=!0}};Nh.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.it=a.it;b.Mz=a.Mz;var c=a.Se;if(c===Oi||c===Pi)c=Qi;b.Se=c;b.Sw=a.Sw;b.Ix=a.Ix;b.cq=a.cq;b.Db=a.Db;b.Jl=a.Jl;b.Ft=a.Ft;b.Gt=a.Gt;b.Eb=a.Eb;b.Yl=a.Yl;b.zu=a.zu;b.Au=a.Au}};Nh.prototype.doDeactivate=function(){this.ua=!1;var a=this.h;null!==a&&(a.remove(this.Ug),a.remove(this.Od),a.remove(this.Pd),a.We=!1,a.gc="",this.yk())};Nh.prototype.doStop=function(){ri.prototype.doStop.call(this);this.ac=null};
Nh.prototype.doMouseUp=function(){if(this.ua){var a=this.h;if(null===a)return;this.Mf=null;var b=this.Og,c=this.Pg,d=this.Qg,e=this.Rg,g=this.sc;this.kg=this.findTargetPort(this.Nd);if(null!==this.kg){var h=this.kg.ca;h instanceof E&&(this.Nd?(d=h,e=this.kg):(b=h,c=this.kg))}else this.Cp?this.Nd?e=d=null:c=b=null:g=null;null!==g?(this.reconnectLink(g,this.Nd?d:b,this.Nd?e:c,this.Nd),null===this.kg&&(this.Nd?g.Yn=a.R.ga.copy():g.Un=a.R.ga.copy(),g.qc()),a.xf&&(g.jb=!0),this.Mf=this.name,a.Ja("LinkRelinked",
g,this.Nd?this.Rg:this.Pg)):this.doNoRelink(this.sc,this.Nd);Ri(this.sc,this.OC)}this.stopTool()};Nh.prototype.reconnectLink=function(a,b,c,d){if(null===this.h)return!1;c=null!==c&&null!==c.zd?c.zd:"";d?(a.da=b,a.Vg=c):(a.Y=b,a.ag=c);return!0};Nh.prototype.doNoRelink=function(){};function mi(a,b,c,d,e){null!==b?(a.copyPortProperties(b,c,a.Od,a.yn,!1),a.h.add(a.Od)):a.h.remove(a.Od);null!==d?(a.copyPortProperties(d,e,a.Pd,a.zn,!0),a.h.add(a.Pd)):a.h.remove(a.Pd)}
function Si(){0<arguments.length&&z.pd(Si);xg.call(this);this.name="LinkReshaping";var a=new X;a.Hb="Rectangle";a.Aa=ae;a.fill="lightblue";a.stroke="dodgerblue";this.Vk=a;a=new X;a.Hb="Diamond";a.Aa=ae;a.fill="lightblue";a.stroke="dodgerblue";this.CC=a;this.WC=3;this.jy=this.ac=null;this.PC=new N;this.Wv=null}z.Ra(Si,xg);z.ia("LinkReshapingTool",Si);var Ti;Si.None=Ti=z.s(Si,"None",0);var Ui;Si.Horizontal=Ui=z.s(Si,"Horizontal",1);var Vi;Si.Vertical=Vi=z.s(Si,"Vertical",2);var Wi;
Si.All=Wi=z.s(Si,"All",3);Si.prototype.getReshapingBehavior=Si.prototype.yE=function(a){return a&&a.XC?a.XC:Ti};Si.prototype.setReshapingBehavior=Si.prototype.su=function(a,b){z.l(a,O,Si,"setReshapingBehavior:obj");z.Ba(b,Si,Si,"setReshapingBehavior:behavior");a.XC=b};
Si.prototype.updateAdornments=function(a){if(null!==a&&a instanceof G){if(a.jb&&!this.h.ib){var b=a.path;if(null!==b&&a.canReshape()&&a.W.F()&&a.isVisible()&&b.W.F()&&b.oj()){var c=a.kp(this.name);if(null===c||c.vG!==a.sa||c.HG!==a.lu)c=this.makeAdornment(b),null!==c&&(c.vG=a.sa,c.HG=a.lu,a.rl(this.name,c));if(null!==c){c.location=a.position;return}}}a.sj(this.name)}};
Si.prototype.makeAdornment=function(a){var b=a.ca,c=b.sa,d=b.rc,e=null;if(null!==b.points&&1<c){e=new da;e.type=Ni;var c=b.Ct,g=b.qx,h=d?1:0;if(b.lu&&b.Se!==Xi)for(var k=c+h;k<g-h;k++){var l=this.makeResegmentHandle(a,k);null!==l&&(l.De=k,l.NA=.5,l.Yz=999,e.add(l))}for(k=c+1;k<g;k++)if(l=this.makeHandle(a,k),null!==l){l.De=k;if(k!==c)if(k===c+1&&d){var h=b.m(c),m=b.m(c+1);eb(h.x,m.x)&&eb(h.y,m.y)&&(m=b.m(c-1));eb(h.x,m.x)?(this.su(l,Vi),l.cursor="n-resize"):eb(h.y,m.y)&&(this.su(l,Ui),l.cursor="w-resize")}else k===
g-1&&d?(h=b.m(g-1),m=b.m(g),eb(h.x,m.x)&&eb(h.y,m.y)&&(h=b.m(g+1)),eb(h.x,m.x)?(this.su(l,Vi),l.cursor="n-resize"):eb(h.y,m.y)&&(this.su(l,Ui),l.cursor="w-resize")):k!==g&&(this.su(l,Wi),l.cursor="move");e.add(l)}e.nc=this.name;e.fc=a}return e};Si.prototype.makeHandle=function(){var a=this.Ht;return null===a?null:a.copy()};z.defineProperty(Si,{Ht:"handleArchetype"},function(){return this.Vk},function(a){null!==a&&z.l(a,O,Si,"handleArchetype");this.Vk=a});
Si.prototype.makeResegmentHandle=function(){var a=this.EI;return null===a?null:a.copy()};z.defineProperty(Si,{EI:"midHandleArchetype"},function(){return this.CC},function(a){null!==a&&z.l(a,O,Si,"midHandleArchetype");this.CC=a});z.w(Si,{handle:"handle"},function(){return this.ac});z.w(Si,{jt:"adornedLink"},function(){return this.jy});Si.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.ib&&a.Gw&&a.R.left?null!==this.findToolHandleAt(a.Fc.ga,this.name):!1};
Si.prototype.doActivate=function(){var a=this.h;if(null!==a&&(this.ac=this.findToolHandleAt(a.Fc.ga,this.name),null!==this.ac)){var b=this.ac.ca.Xf;if(b instanceof G){this.jy=b;a.We=!0;this.Wb(this.name);if(b.lu&&999===this.ac.Yz){var c=b.points.copy(),d=this.ac.eb(ec);c.Md(this.ac.De+1,d);b.rc&&c.Md(this.ac.De+1,d);b.points=c;b.ae();this.ac=this.findToolHandleAt(a.Fc.ga,this.name);if(null===this.ac){this.doDeactivate();return}}this.PC=b.m(this.ac.De);this.Wv=b.points.copy();this.ua=!0}}};
Si.prototype.doDeactivate=function(){this.yk();this.jy=this.ac=null;var a=this.h;null!==a&&(a.We=!1);this.ua=!1};Si.prototype.doCancel=function(){var a=this.jt;null!==a&&(a.points=this.Wv);this.stopTool()};Si.prototype.doMouseMove=function(){var a=this.h;this.ua&&null!==a&&(a=this.computeReshape(a.R.ga),this.reshape(a))};
Si.prototype.doMouseUp=function(){var a=this.h;if(this.ua&&null!==a){var b=this.computeReshape(a.R.ga);this.reshape(b);b=this.jt;if(null!==b&&b.lu){var c=this.handle.De,d=b.m(c-1),e=b.m(c),g=b.m(c+1);if(b.rc){if(c>b.Ct+1&&c<b.qx-1){var h=b.m(c-2);if(Math.abs(d.x-e.x)<this.Eh&&Math.abs(d.y-e.y)<this.Eh&&(Yi(this,h,d,e,g,!0)||Yi(this,h,d,e,g,!1))){var k=b.points.copy();Yi(this,h,d,e,g,!0)?(k.Sg(c-2,new N(h.x,(g.y+h.y)/2)),k.Sg(c+1,new N(g.x,(g.y+h.y)/2))):(k.Sg(c-2,new N((g.x+h.x)/2,h.y)),k.Sg(c+1,
new N((g.x+h.x)/2,g.y)));k.dd(c);k.dd(c-1);b.points=k;b.ae()}else h=b.m(c+2),Math.abs(e.x-g.x)<this.Eh&&Math.abs(e.y-g.y)<this.Eh&&(Yi(this,d,e,g,h,!0)||Yi(this,d,e,g,h,!1))&&(k=b.points.copy(),Yi(this,d,e,g,h,!0)?(k.Sg(c-1,new N(d.x,(d.y+h.y)/2)),k.Sg(c+2,new N(h.x,(d.y+h.y)/2))):(k.Sg(c-1,new N((d.x+h.x)/2,d.y)),k.Sg(c+2,new N((d.x+h.x)/2,h.y))),k.dd(c+1),k.dd(c),b.points=k,b.ae())}}else h=z.O(),ib(d.x,d.y,g.x,g.y,e.x,e.y,h)&&h.Af(e)<this.Eh*this.Eh&&(k=b.points.copy(),k.dd(c),b.points=k,b.ae()),
z.A(h)}a.yc();this.Mf=this.name;a.Ja("LinkReshaped",this.jt,this.Wv)}this.stopTool()};function Yi(a,b,c,d,e,g){return g?Math.abs(b.y-c.y)<a.Eh&&Math.abs(c.y-d.y)<a.Eh&&Math.abs(d.y-e.y)<a.Eh:Math.abs(b.x-c.x)<a.Eh&&Math.abs(c.x-d.x)<a.Eh&&Math.abs(d.x-e.x)<a.Eh}z.defineProperty(Si,{Eh:"resegmentingDistance"},function(){return this.WC},function(a){z.g(a,"number",Si,"resegmentingDistance");this.WC=a});
Si.prototype.reshape=function(a){var b=this.jt;b.Ul();var c=this.handle.De,d=this.yE(this.handle);if(b.rc)if(c===b.Ct+1)c=b.Ct+1,d===Vi?(b.aa(c,b.m(c-1).x,a.y),b.aa(c+1,b.m(c+2).x,a.y)):d===Ui&&(b.aa(c,a.x,b.m(c-1).y),b.aa(c+1,a.x,b.m(c+2).y));else if(c===b.qx-1)c=b.qx-1,d===Vi?(b.aa(c-1,b.m(c-2).x,a.y),b.aa(c,b.m(c+1).x,a.y)):d===Ui&&(b.aa(c-1,a.x,b.m(c-2).y),b.aa(c,a.x,b.m(c+1).y));else{var d=c,e=b.m(d),g=b.m(d-1),h=b.m(d+1);eb(g.x,e.x)&&eb(e.y,h.y)?(eb(g.x,b.m(d-2).x)&&!eb(g.y,b.m(d-2).y)?(b.B(d,
a.x,g.y),c++,d++):b.aa(d-1,a.x,g.y),eb(h.y,b.m(d+2).y)&&!eb(h.x,b.m(d+2).x)?b.B(d+1,h.x,a.y):b.aa(d+1,h.x,a.y)):eb(g.y,e.y)&&eb(e.x,h.x)?(eb(g.y,b.m(d-2).y)&&!eb(g.x,b.m(d-2).x)?(b.B(d,g.x,a.y),c++,d++):b.aa(d-1,g.x,a.y),eb(h.x,b.m(d+2).x)&&!eb(h.y,b.m(d+2).y)?b.B(d+1,a.x,h.y):b.aa(d+1,a.x,h.y)):eb(g.x,e.x)&&eb(e.x,h.x)?(eb(g.x,b.m(d-2).x)&&!eb(g.y,b.m(d-2).y)?(b.B(d,a.x,g.y),c++,d++):b.aa(d-1,a.x,g.y),eb(h.x,b.m(d+2).x)&&!eb(h.y,b.m(d+2).y)?b.B(d+1,a.x,h.y):b.aa(d+1,a.x,h.y)):eb(g.y,e.y)&&eb(e.y,
h.y)&&(eb(g.y,b.m(d-2).y)&&!eb(g.x,b.m(d-2).x)?(b.B(d,g.x,a.y),c++,d++):b.aa(d-1,g.x,a.y),eb(h.y,b.m(d+2).y)&&!eb(h.x,b.m(d+2).x)?b.B(d+1,h.x,a.y):b.aa(d+1,h.x,a.y));b.aa(c,a.x,a.y)}else b.aa(c,a.x,a.y),1===c&&b.computeSpot(!0).Be()&&(e=b.Y,g=b.md,null===e||e.isVisible()||(e=e.findVisibleNode(),e!==b.Y&&(g=e.Hl(""))),d=g.eb(ec,z.O()),e=b.getLinkPointFromPoint(e,g,d,a,!0,z.O()),b.aa(0,e.x,e.y),z.A(d),z.A(e)),c===b.sa-2&&b.computeSpot(!1).Be()&&(c=b.da,e=b.Qd,null===c||c.isVisible()||(c=c.findVisibleNode(),
c!==b.da&&(e=c.Hl(""))),d=e.eb(ec,z.O()),e=b.getLinkPointFromPoint(c,e,d,a,!1,z.O()),b.aa(b.sa-1,e.x,e.y),z.A(d),z.A(e));b.dj()};Si.prototype.computeReshape=function(a){var b=this.jt,c=this.handle.De;switch(this.yE(this.handle)){case Wi:return a;case Vi:return b=b.m(c),new N(b.x,a.y);case Ui:return b=b.m(c),new N(a.x,b.y);default:case Ti:return b.m(c)}};z.w(Si,{eL:"originalPoint"},function(){return this.PC});z.w(Si,{fL:"originalPoints"},function(){return this.Wv});
function Zi(){0<arguments.length&&z.pd(Zi);xg.call(this);this.name="Resizing";this.Uj=(new Ea(1,1)).freeze();this.Sj=(new Ea(9999,9999)).freeze();this.Aj=(new Ea(NaN,NaN)).freeze();this.jr=!1;this.Ib=null;var a=new X;a.kk=ec;a.Hb="Rectangle";a.Aa=ae;a.fill="lightblue";a.stroke="dodgerblue";a.ub=1;a.cursor="pointer";this.Vk=a;this.ac=null;this.Vv=new Ea;this.hz=new N;this.Ly=new Ea(0,0);this.Ky=new Ea(Infinity,Infinity);this.Jy=new Ea(1,1);this.IC=!0}z.Ra(Zi,xg);z.ia("ResizingTool",Zi);
Zi.prototype.updateAdornments=function(a){if(!(null===a||a instanceof G)){if(a.jb&&!this.h.ib){var b=a.uF;if(null!==b&&a.canResize()&&a.W.F()&&a.isVisible()&&b.W.F()&&b.oj()){var c=a.kp(this.name);if(null===c||c.fc!==b)c=this.makeAdornment(b);if(null!==c){var d=b.Kl();c.angle=d;var e=b.eb(c.of,z.O()),g=b.hj();c.location=e;z.A(e);e=c.placeholder;if(null!==e){var b=b.Ga,h=z.Xl();h.n(b.width*g,b.height*g);e.Aa=h;z.qk(h)}this.updateResizeHandles(c,d);a.rl(this.name,c);return}}}a.sj(this.name)}};
Zi.prototype.makeAdornment=function(a){var b=null,b=a.ca.tF;if(null===b){b=new da;b.type=$i;b.of=ec;var c=new aj;c.Ff=!0;b.add(c);b.add(this.makeHandle(a,Zb));b.add(this.makeHandle(a,cc));b.add(this.makeHandle(a,ic));b.add(this.makeHandle(a,gc));b.add(this.makeHandle(a,Zc));b.add(this.makeHandle(a,ad));b.add(this.makeHandle(a,bd));b.add(this.makeHandle(a,$c))}else if(jh(b),b=b.copy(),null===b)return null;b.nc=this.name;b.fc=a;return b};
Zi.prototype.makeHandle=function(a,b){var c=this.Ht;if(null===c)return null;c=c.copy();c.alignment=b;return c};
Zi.prototype.updateResizeHandles=function(a,b){if(null!==a)if(!a.alignment.bd()&&("pointer"===a.cursor||0<a.cursor.indexOf("resize")))a:{var c=a.alignment;c.Be()&&(c=ec);var d=b;if(0>=c.x)d=0>=c.y?d+225:1<=c.y?d+135:d+180;else if(1<=c.x)0>=c.y?d+=315:1<=c.y&&(d+=45);else if(0>=c.y)d+=270;else if(1<=c.y)d+=90;else break a;0>d?d+=360:360<=d&&(d-=360);a.cursor=22.5>d?"e-resize":67.5>d?"se-resize":112.5>d?"s-resize":157.5>d?"sw-resize":202.5>d?"w-resize":247.5>d?"nw-resize":292.5>d?"n-resize":337.5>d?
"ne-resize":"e-resize"}else if(a instanceof I)for(c=a.elements;c.next();)this.updateResizeHandles(c.value,b)};z.defineProperty(Zi,{Ht:"handleArchetype"},function(){return this.Vk},function(a){null!==a&&z.l(a,O,Zi,"handleArchetype");this.Vk=a});z.w(Zi,{handle:"handle"},function(){return this.ac});z.defineProperty(Zi,{fc:"adornedObject"},function(){return this.Ib},function(a){null!==a&&z.l(a,O,Zi,"adornedObject");this.Ib=a});
Zi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.ib&&a.mt&&a.R.left?null!==this.findToolHandleAt(a.Fc.ga,this.name)?!0:!1:!1};
Zi.prototype.doActivate=function(){var a=this.h;null!==a&&(this.ac=this.findToolHandleAt(a.Fc.ga,this.name),null!==this.ac&&(this.Ib=this.ac.ca.fc,this.hz.set(this.Ib.ca.location),this.Vv.set(this.Ib.Aa),this.Jy=this.computeCellSize(),this.Ly=this.computeMinSize(),this.Ky=this.computeMaxSize(),a.We=!0,this.IC=a.Va.isEnabled,a.Va.isEnabled=!1,this.Wb(this.name),this.ua=!0))};Zi.prototype.doDeactivate=function(){var a=this.h;null!==a&&(this.yk(),this.Ib=this.ac=null,this.ua=a.We=!1,a.Va.isEnabled=this.IC)};
Zi.prototype.doCancel=function(){this.Ib.Aa=this.Vv;this.Ib.ca.location=this.hz;this.stopTool()};Zi.prototype.doMouseMove=function(){var a=this.h;if(this.ua&&null!==a){var b=this.Ly,c=this.Ky,d=this.Jy,e=this.Ib.wE(a.R.ga,z.O()),g=bj;this.Ib instanceof X&&(g=cj(this.Ib));b=this.computeResize(e,this.ac.alignment,b,c,d,!(g===dj||g===ej||a.R.shift));this.resize(b);a.cg();z.A(e)}};
Zi.prototype.doMouseUp=function(){var a=this.h;if(this.ua&&null!==a){var b=this.Ly,c=this.Ky,d=this.Jy,e=this.Ib.wE(a.R.ga,z.O()),g=bj;this.Ib instanceof X&&(g=cj(this.Ib));b=this.computeResize(e,this.ac.alignment,b,c,d,!(g===dj||g===ej||a.R.shift));this.resize(b);z.A(e);a.yc();this.Mf=this.name;a.Ja("PartResized",this.Ib,this.Vv)}this.stopTool()};
Zi.prototype.resize=function(a){if(null!==this.h){var b=this.fc,c=b.ca,d=b.Kl(),e=b.hj(),g=Math.PI*d/180,h=Math.cos(g),g=Math.sin(g),k=0<d&&180>d?1:0,l=90<d&&270>d?1:0,d=180<d&&360>d?1:0,m=b.Ga.width,n=b.Ga.height;b.Aa=a.size;var p=c.position.copy();c.Bf();m=b.Ga.width-m;n=b.Ga.height-n;if(0!==m||0!==n)0!==m&&(p.x+=e*((a.x+m*l)*h-(a.y+n*k)*g)),0!==n&&(p.y+=e*((a.x+m*d)*g+(a.y+n*l)*h)),c.move(p),c instanceof E&&c.mf()}};
Zi.prototype.computeResize=function(a,b,c,d,e,g){b.Be()&&(b=ec);var h=this.fc.Ga,k=h.x,l=h.y,m=h.x+h.width,n=h.y+h.height,p=1;if(!g){var p=h.width,q=h.height;0>=p&&(p=1);0>=q&&(q=1);p=q/p}q=z.O();jb(a.x,a.y,k,l,e.width,e.height,q);a=h.copy();0>=b.x?0>=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=Math.max(n-a.y,c.height),g||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):(a.width=
a.height/p,a.x=m-a.width))):1<=b.y?(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=Math.max(m-a.x,c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),g||(b=a.height/a.width,p<b?a.height=p*a.width:(a.width=a.height/p,a.x=m-a.width))):(a.x=Math.max(q.x,m-d.width),a.x=Math.min(a.x,m-c.width),a.width=m-a.x,g||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),
a.height=Math.max(n-a.y,c.height),g||(b=a.height/a.width,p<b?(a.height=p*a.width,a.y=n-a.height):a.width=a.height/p)):1<=b.y?(a.width=Math.max(Math.min(q.x-k,d.width),c.width),a.height=Math.max(Math.min(q.y-l,d.height),c.height),g||(b=a.height/a.width,p<b?a.height=p*a.width:a.width=a.height/p)):(a.width=Math.max(Math.min(q.x-k,d.width),c.width),g||(a.height=p*a.width,a.y=l+.5*(n-l-a.height))):0>=b.y?(a.y=Math.max(q.y,n-d.height),a.y=Math.min(a.y,n-c.height),a.height=n-a.y,g||(a.width=a.height/p,a.x=
k+.5*(m-k-a.width))):1<=b.y&&(a.height=Math.max(Math.min(q.y-l,d.height),c.height),g||(a.width=a.height/p,a.x=k+.5*(m-k-a.width)));z.A(q);return a};Zi.prototype.computeMinSize=function(){var a=this.fc.dg.copy(),b=this.dg;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Zi.prototype.computeMaxSize=function(){var a=this.fc.Xe.copy(),b=this.Xe;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Zi.prototype.computeCellSize=function(){var a=new Ea(NaN,NaN),b=this.fc.ca;if(null!==b){var c=b.YI;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.cp;isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width);isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height);b=this.h;(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.gb.me,null!==c&&c.kx&&(c=c.AE,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&
0<c.height&&(a.height=c.height)),b=b.tp,null!==b&&b.visible&&this.kx&&(c=b.gx,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};
z.defineProperty(Zi,{dg:"minSize"},function(){return this.Uj},function(a){z.l(a,Ea,Zi,"minSize");if(!this.Uj.N(a)){var b=a.width;isNaN(b)&&(b=0);a=a.height;isNaN(a)&&(a=0);this.Uj.n(b,a)}});z.defineProperty(Zi,{Xe:"maxSize"},function(){return this.Sj},function(a){z.l(a,Ea,Zi,"maxSize");if(!this.Sj.N(a)){var b=a.width;isNaN(b)&&(b=Infinity);a=a.height;isNaN(a)&&(a=Infinity);this.Sj.n(b,a)}});
z.defineProperty(Zi,{cp:"cellSize"},function(){return this.Aj},function(a){z.l(a,Ea,Zi,"cellSize");this.Aj.N(a)||this.Aj.assign(a)});z.defineProperty(Zi,{kx:"isGridSnapEnabled"},function(){return this.jr},function(a){z.g(a,"boolean",Zi,"isGridSnapEnabled");this.jr=a});z.w(Zi,{cL:"originalDesiredSize"},function(){return this.Vv});z.w(Zi,{dL:"originalLocation"},function(){return this.hz});
function fj(){0<arguments.length&&z.pd(fj);xg.call(this);this.name="Rotating";this.bD=45;this.aD=2;this.Ib=null;var a=new X;a.Hb="Ellipse";a.Aa=be;a.fill="lightblue";a.stroke="dodgerblue";a.ub=1;a.cursor="pointer";this.Vk=a;this.ac=null;this.Uv=0;this.YC=new N}z.Ra(fj,xg);z.ia("RotatingTool",fj);
fj.prototype.updateAdornments=function(a){if(!(null===a||a instanceof G)){if(a.jb&&!this.h.ib){var b=a.yF;if(null!==b&&a.canRotate()&&a.W.F()&&a.isVisible()&&b.W.F()&&b.oj()){var c=a.kp(this.name);if(null===c||c.fc!==b)c=this.makeAdornment(b);if(null!==c){c.angle=b.Kl();var d=null,e=null;b===a||b===a.Zb?(d=a.Zb,e=a.of):(d=b,e=ec);for(var g=d.Ga,e=z.Tb(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.Cb(e),d=d.T;var d=e.y,g=Math.max(e.x-b.Ga.width,0),h=z.O();c.location=b.eb(new Q(1,
0,50+g,d),h);z.A(h);z.A(e);a.rl(this.name,c);return}}}a.sj(this.name)}};fj.prototype.makeAdornment=function(a){var b=null,b=a.ca.$I;if(null===b){b=new da;b.type=gj;b.of=ec;var c=this.Ht;null!==c&&b.add(c.copy())}else if(jh(b),b=b.copy(),null===b)return null;b.nc=this.name;b.fc=a;return b};z.defineProperty(fj,{Ht:"handleArchetype"},function(){return this.Vk},function(a){null!==a&&z.l(a,O,fj,"handleArchetype");this.Vk=a});z.w(fj,{handle:"handle"},function(){return this.ac});
z.defineProperty(fj,{fc:"adornedObject"},function(){return this.Ib},function(a){null!==a&&z.l(a,O,fj,"adornedObject");this.Ib=a});fj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.ib&&a.Hw&&a.R.left?null!==this.findToolHandleAt(a.Fc.ga,this.name)?!0:!1:!1};
fj.prototype.doActivate=function(){var a=this.h;if(null!==a&&(this.ac=this.findToolHandleAt(a.Fc.ga,this.name),null!==this.ac)){this.Ib=this.ac.ca.fc;var b=this.Ib.ca,c=b.Zb;this.YC=this.Ib===b||this.Ib===c?c.eb(b.of):this.Ib.eb(ec);this.Uv=this.Ib.angle;a.We=!0;a.Pz=!0;this.Wb(this.name);this.ua=!0}};fj.prototype.doDeactivate=function(){var a=this.h;null!==a&&(this.yk(),this.Ib=this.ac=null,this.ua=a.We=!1)};fj.prototype.doCancel=function(){var a=this.h;null!==a&&(a.Pz=!1);this.rotate(this.Uv);this.stopTool()};
fj.prototype.doMouseMove=function(){var a=this.h;this.ua&&null!==a&&(a=this.computeRotate(a.R.ga),this.rotate(a))};fj.prototype.doMouseUp=function(){var a=this.h;if(this.ua&&null!==a){a.Pz=!1;var b=this.computeRotate(a.R.ga);this.rotate(b);a.yc();this.Mf=this.name;a.Ja("PartRotated",this.Ib,this.Uv)}this.stopTool()};fj.prototype.rotate=function(a){u&&z.p(a,fj,"rotate:newangle");null!==this.Ib&&(this.Ib.angle=a)};
fj.prototype.computeRotate=function(a){a=this.YC.Ec(a);var b=this.Ib.T;null!==b&&(a-=b.Kl(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.mJ),180),c=Math.min(Math.abs(this.lJ),b/2);!this.h.R.shift&&0<b&&0<c&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};z.defineProperty(fj,{mJ:"snapAngleMultiple"},function(){return this.bD},function(a){z.g(a,"number",fj,"snapAngleMultiple");this.bD=a});
z.defineProperty(fj,{lJ:"snapAngleEpsilon"},function(){return this.aD},function(a){z.g(a,"number",fj,"snapAngleEpsilon");this.aD=a});z.w(fj,{bL:"originalAngle"},function(){return this.Uv});function hj(){0<arguments.length&&z.pd(hj);xg.call(this);this.name="ClickSelecting"}z.Ra(hj,xg);z.ia("ClickSelectingTool",hj);hj.prototype.canStart=function(){return!this.isEnabled||null===this.h||this.isBeyondDragSize()?!1:!0};
hj.prototype.doMouseUp=function(){this.ua&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.h.R.mj&&this.h.gb.doToolTip());this.stopTool()};function ij(){0<arguments.length&&z.pd(ij);xg.call(this);this.name="Action";this.En=null}z.Ra(ij,xg);z.ia("ActionTool",ij);
ij.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a)return!1;var b=a.R,c=a.pe(b.ga,function(a){for(;null!==a.T&&!a.Mt;)a=a.T;return a});if(null!==c){if(!c.Mt)return!1;this.En=c;a.Rn=a.pe(b.ga,null,null);return!0}return!1};ij.prototype.doMouseDown=function(){if(this.ua){var a=this.h.R,b=this.En;null!==b&&(a.Ge=b,null!==b.AD&&b.AD(a,b))}else this.canStart()&&this.doActivate()};
ij.prototype.doMouseMove=function(){if(this.ua){var a=this.h.R,b=this.En;null!==b&&(a.Ge=b,null!==b.BD&&b.BD(a,b))}};ij.prototype.doMouseUp=function(){if(this.ua){var a=this.h,b=a.R,c=this.En;if(null===c)return;b.Ge=c;null!==c.CD&&c.CD(b,c);this.isBeyondDragSize()||zh(c,b,a)}this.stopTool()};ij.prototype.doCancel=function(){var a=this.h;if(null!==a){var a=a.R,b=this.En;if(null===b)return;a.Ge=b;null!==b.zD&&b.zD(a,b)}this.stopTool()};ij.prototype.doStop=function(){this.En=null};
function va(){0<arguments.length&&z.pd(va);xg.call(this);this.name="ClickCreating";this.Nk=null;this.qC=!0;this.dC=new N(0,0)}z.Ra(va,xg);z.ia("ClickCreatingTool",va);
va.prototype.canStart=function(){if(!this.isEnabled||null===this.Ez)return!1;var a=this.h;if(null===a||a.ib||a.Ef||!a.$o||!a.R.left||this.isBeyondDragSize())return!1;if(this.dI){if(1===a.R.Pe&&(this.dC=a.R.ue.copy()),2!==a.R.Pe||this.isBeyondDragSize(this.dC))return!1}else if(1!==a.R.Pe)return!1;return a.cb!==this&&null!==a.Bt(a.R.ga,!0)?!1:!0};va.prototype.doMouseUp=function(){var a=this.h;this.ua&&null!==a&&this.insertPart(a.R.ga);this.stopTool()};
va.prototype.insertPart=function(a){var b=this.h;if(null===b)return null;var c=this.Ez;if(null===c)return null;this.Wb(this.name);var d=null;c instanceof D?c.be()&&(jh(c),d=c.copy(),null!==d&&b.add(d)):null!==c&&(c=b.ha.copyNodeData(c),z.Za(c)&&(b.ha.sl(c),d=b.vh(c)));null!==d&&(d.location=a,b.xf&&b.select(d));b.yc();this.Mf=this.name;b.Ja("PartCreated",d);this.yk();return d};
z.defineProperty(va,{Ez:"archetypeNodeData"},function(){return this.Nk},function(a){null!==a&&z.l(a,Object,va,"archetypeNodeData");this.Nk=a});z.defineProperty(va,{dI:"isDoubleClick"},function(){return this.qC},function(a){z.g(a,"boolean",va,"isDoubleClick");this.qC=a});function jj(a,b,c){this.text=a;this.SD=b;this.visible=c}function kj(){0<arguments.length&&z.pd(kj);xg.call(this);this.name="ContextMenu";this.JB=this.wy=this.GB=null;this.GC=new N;this.yy=this.Zn=null;lj(this)}z.Ra(kj,xg);
z.ia("ContextMenuTool",kj);z.aE=!1;z.qt=null;z.rt=null;
function lj(a){a.Zn=new da;a.qD=function(){a.stopTool()};if(!1===z.aE){var b=z.createElement("div"),c=z.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=
z.createElement("style");window.document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},
!1);b.addEventListener("selectstart",function(a){a.preventDefault();return!1},!1);c.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);window.document.body&&(window.document.body.appendChild(b),window.document.body.appendChild(c));z.rt=b;z.qt=c;z.aE=!0}}kj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||this.isBeyondDragSize()||!a.R.right?!1:null!==this.Zn&&a.R.mj||null!==this.findObjectWithContextMenu()?!0:!1};
kj.prototype.doStart=function(){var a=this.h;null!==a&&this.GC.set(a.Fc.ga)};kj.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu();this.Oz=null};
kj.prototype.findObjectWithContextMenu=function(a){void 0===a&&(a=null);var b=this.h;if(null===b)return null;var c=b.R,d=null;a instanceof B||(d=a instanceof O?a:b.pe(c.ga,null,function(a){return!a.layer.Nc}));if(null!==d){for(a=d;null!==a;){if(null!==a.contextMenu)return a;a=a.T}if(null!==this.Zn&&b.R.mj)return d.ca}else if(null!==b.contextMenu)return b;return null};kj.prototype.doActivate=function(){};
kj.prototype.doMouseDown=function(){xg.prototype.doMouseDown.call(this);null!==this.h&&this.h.gb.Ye.contains(this)&&mj(this)};kj.prototype.doMouseUp=function(){mj(this)};function mj(a){var b=a.h;if(null!==b)if(!a.ua)a.canStart()&&(oh(a,!0),a.ua||a.stopTool());else if(null!==a.yf){var c=b.pe(b.R.ga,null,null);null!==c&&c.Pl(a.yf)&&a.standardMouseClick(null,null);a.stopTool();a.canStart()&&(b.cb=a,a.doMouseUp())}}
function oh(a,b,c){void 0===c&&(c=null);b&&a.standardMouseSelect();a.standardMouseClick()||(a.ua=!0,null===c&&(c=a.findObjectWithContextMenu()),null!==c?(b=c.contextMenu,null!==b?(a.Oz=c instanceof O?c:null,a.showContextMenu(b,a.Oz)):a.showDefaultContextMenu()):a.showDefaultContextMenu())}kj.prototype.doMouseMove=function(){this.ua&&this.h.gb.doMouseMove()};
kj.prototype.showContextMenu=function(a,b){z.l(a,da,kj,"showContextMenu:contextmenu");null!==b&&z.l(b,O,kj,"showContextMenu:obj");var c=this.h;if(null!==c){a!==this.yf&&this.hideContextMenu();a.If="Tool";a.wk=!1;a.scale=1/c.scale;a.nc=this.name;null!==a.placeholder&&(a.placeholder.scale=c.scale);c.add(a);if(null!==b){var c=null,d=b.np();null!==d&&(c=d.data);a.fc=b;a.data=c}else a.data=c.ha;a.Bf();this.positionContextMenu(a,b);this.yf=a}};
kj.prototype.positionContextMenu=function(a){if(null===a.placeholder){var b=this.h;if(null!==b){var c=b.R.ga.copy(),d=a.Ia,e=b.xb;b.R.mj&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}}};kj.prototype.hideContextMenu=function(){var a=this.h;null!==a&&null!==this.yf&&(a.remove(this.yf),null!==this.wy&&this.wy.sj(this.yf.nc),this.yf.data=null,this.yf=this.yf.fc=null,this.standardMouseOver())};
function nj(a){if(null===a.h)return null;a=new J(jj);a.add(new jj("Copy",function(a){a.wb.copySelection()},function(a){return a.wb.canCopySelection()}));a.add(new jj("Cut",function(a){a.wb.cutSelection()},function(a){return a.wb.canCutSelection()}));a.add(new jj("Delete",function(a){a.wb.deleteSelection()},function(a){return a.wb.canDeleteSelection()}));a.add(new jj("Paste",function(a){a.wb.pasteSelection(a.R.ga)},function(a){return a.wb.canPasteSelection()}));a.add(new jj("Select All",function(a){a.wb.selectAll()},
function(a){return a.wb.canSelectAll()}));a.add(new jj("Undo",function(a){a.wb.undo()},function(a){return a.wb.canUndo()}));a.add(new jj("Redo",function(a){a.wb.redo()},function(a){return a.wb.canRedo()}));a.add(new jj("Scroll To Part",function(a){a.wb.scrollToPart()},function(a){return a.wb.canScrollToPart()}));a.add(new jj("Zoom To Fit",function(a){a.wb.zoomToFit()},function(a){return a.wb.canZoomToFit()}));a.add(new jj("Reset Zoom",function(a){a.wb.resetZoom()},function(a){return a.wb.canResetZoom()}));
a.add(new jj("Group Selection",function(a){a.wb.groupSelection()},function(a){return a.wb.canGroupSelection()}));a.add(new jj("Ungroup Selection",function(a){a.wb.ungroupSelection()},function(a){return a.wb.canUngroupSelection()}));a.add(new jj("Edit Text",function(a){a.wb.editTextBlock()},function(a){return a.wb.canEditTextBlock()}));return a}
kj.prototype.showDefaultContextMenu=function(){var a=this.h;if(null!==a){null===this.yy&&(this.yy=nj(this));this.Zn!==this.yf&&this.hideContextMenu();z.rt.innerHTML="";z.qt.addEventListener("click",this.qD,!1);var b=this,c=z.createElement("ul");c.className="defaultCXul";z.rt.appendChild(c);c.innerHTML="";for(var d=this.yy.i;d.next();){var e=d.value,g=e.text,h=e.visible;if("function"===typeof e.SD&&("function"!==typeof h||h(a))){h=z.createElement("li");h.className="defaultCXli";var k=z.createElement("a");
k.className="defaultCXa";k.href="#";k.mG=e.SD;k.addEventListener("click",function(c){this.mG(a);b.stopTool();c.preventDefault();return!1},!1);k.textContent=g;h.appendChild(k);c.appendChild(h)}}z.rt.style.display="block";z.qt.style.display="block";this.yf=this.Zn}};kj.prototype.hideDefaultContextMenu=function(){null!==this.yf&&this.yf===this.Zn&&(z.rt.style.display="none",z.qt.style.display="none",z.qt.removeEventListener("click",this.qD,!1),this.yf=null)};
z.defineProperty(kj,{yf:"currentContextMenu"},function(){return this.GB},function(a){null!==a&&z.l(a,da,kj,"currentContextMenu");this.GB=a;this.wy=null!==a?a.Xf:null});z.defineProperty(kj,{Oz:"currentObject"},function(){return this.JB},function(a){null!==a&&z.l(a,O,kj,"currentObject");this.JB=a});z.w(kj,{XK:"mouseDownPoint"},function(){return this.GC});
function oj(){0<arguments.length&&z.pd(oj);xg.call(this);this.name="DragSelecting";this.$n=175;this.vC=!1;var a=new D;a.If="Tool";a.wk=!1;var b=new X;b.name="SHAPE";b.Hb="Rectangle";b.fill=null;b.stroke="magenta";a.add(b);this.dm=a}z.Ra(oj,xg);z.ia("DragSelectingTool",oj);
oj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||!a.xf)return!1;var b=a.R;return!b.left||a.cb!==this&&(!this.isBeyondDragSize()||b.timestamp-a.Fc.timestamp<this.bE||null!==a.Bt(b.ga,!0))?!1:!0};oj.prototype.doActivate=function(){var a=this.h;null!==a&&(this.ua=!0,a.We=!0,a.Bb=!0,a.add(this.rh),this.doMouseMove())};oj.prototype.doDeactivate=function(){var a=this.h;null!==a&&(a.remove(this.rh),a.Bb=!1,this.ua=a.We=!1)};
oj.prototype.doMouseMove=function(){if(null!==this.h&&this.ua&&null!==this.rh){var a=this.computeBoxBounds(),b=this.rh.oe("SHAPE");null===b&&(b=this.rh.gf());b.Aa=a.size;this.rh.position=a.position}};oj.prototype.doMouseUp=function(){if(this.ua){var a=this.h;a.remove(this.rh);try{a.gc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.gc=""}}this.stopTool()};oj.prototype.computeBoxBounds=function(){var a=this.h;return null===a?new w(0,0,0,0):new w(a.Fc.ga,a.R.ga)};
oj.prototype.selectInRect=function(a){var b=this.h;if(null!==b){var c=b.R;b.Ja("ChangingSelection");a=b.pk(a,null,function(a){return a instanceof D?a.canSelect():!1},this.iI);if(z.sk?c.$t:c.control)if(c.shift)for(a=a.i;a.next();)c=a.value,c.jb&&(c.jb=!1);else for(a=a.i;a.next();)c=a.value,c.jb=!c.jb;else{if(!c.shift){for(var c=new J(D),d=b.selection.i;d.next();){var e=d.value;a.contains(e)||c.add(e)}for(c=c.i;c.next();)c.value.jb=!1}for(a=a.i;a.next();)c=a.value,c.jb||(c.jb=!0)}b.Ja("ChangedSelection")}};
z.defineProperty(oj,{bE:"delay"},function(){return this.$n},function(a){z.g(a,"number",oj,"delay");this.$n=a});z.defineProperty(oj,{iI:"isPartialInclusion"},function(){return this.vC},function(a){z.g(a,"boolean",oj,"isPartialInclusion");this.vC=a});z.defineProperty(oj,{rh:"box"},function(){return this.dm},function(a){null!==a&&z.l(a,D,oj,"box");this.dm=a});
function pj(){0<arguments.length&&z.pd(pj);xg.call(this);this.name="Panning";this.iz=new N;this.zj=!1;var a=this;this.eD=function(){window.document.removeEventListener("scroll",a.eD,!1);a.stopTool()}}z.Ra(pj,xg);z.ia("PanningTool",pj);pj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||!a.ye&&!a.ze||!a.R.left||a.cb!==this&&!this.isBeyondDragSize()?!1:!0};
pj.prototype.doActivate=function(){var a=this.h;null!==a&&(this.zj?(a.R.bubbles=!0,window.document.addEventListener("scroll",this.eD,!1)):(a.gc="move",a.We=!0,this.iz=a.position.copy()),this.ua=!0)};pj.prototype.doDeactivate=function(){var a=this.h;null!==a&&(a.gc="",this.ua=a.We=!1)};pj.prototype.doCancel=function(){var a=this.h;null!==a&&(a.position=this.iz,a.We=!1);this.stopTool()};pj.prototype.doMouseMove=function(){this.move()};pj.prototype.doMouseUp=function(){this.move();this.stopTool()};
pj.prototype.move=function(){var a=this.h;if(this.ua&&a)if(this.zj)a.R.bubbles=!0;else{var b=a.position,c=a.Fc.ga,d=a.R.ga,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.ye||(e=b.x);a.ze||(c=b.y);a.position=new N(e,c)}};z.defineProperty(pj,{bubbles:"bubbles"},function(){return this.zj},function(a){z.g(a,"boolean",pj,"bubbles");this.zj=a});z.w(pj,{gL:"originalPosition"},function(){return this.iz});
function qj(){0<arguments.length&&z.pd(qj);xg.call(this);this.name="TextEditing";this.LB=this.sz=this.iD=null;this.Qo=rj;this.ol=null;this.nb=sj;this.ll=null;this.DC=1;this.ZC=!0;var a=z.createElement("textarea");a.pC=!0;this.SB=a;a.addEventListener("input",function(){var a=this.textEditingTool;if(null!==a&&void 0!==a&&null!==a.He){var c=a.iD;c.text=this.value;var d=this.rJ;tj(c,a.He.Fv,Infinity);this.style.width=20+c.Ia.width*d+"px";this.style.height=10+c.Ia.height*d+"px";this.rows=c.rI}},!1);a.addEventListener("keydown",
function(a){var c=a.which,d=this.textEditingTool;null!==d&&void 0!==d&&null!==d.He&&(13===c?(!1===d.He.nx&&a.preventDefault(),d.acceptText(uj)):9===c?(d.acceptText(vj),a.preventDefault()):27===c&&(d.doCancel(),null!==d.h&&d.h.focus()))},!1);a.addEventListener("focus",function(a){var c=this.textEditingTool;null!==c&&void 0!==c&&c.doFocus(a)},!1);a.addEventListener("blur",function(a){var c=this.textEditingTool;null!==c&&void 0!==c&&c.doBlur(a)},!1)}z.ia("TextEditingTool",qj);z.Ra(qj,xg);var wj;
qj.LostFocus=wj=z.s(qj,"LostFocus",0);var xj;qj.MouseDown=xj=z.s(qj,"MouseDown",1);var vj;qj.Tab=vj=z.s(qj,"Tab",2);var uj;qj.Enter=uj=z.s(qj,"Enter",3);qj.SingleClick=z.s(qj,"SingleClick",0);var rj;qj.SingleClickSelected=rj=z.s(qj,"SingleClickSelected",1);var sj=z.s(qj,"StateNone",0),Gj=z.s(qj,"StateActive",1),Hj=z.s(qj,"StateEditing",2),Ij=z.s(qj,"StateEditing2",3),Jj=z.s(qj,"StateValidating",4),Kj=z.s(qj,"StateValidated",5);
z.defineProperty(qj,{He:"textBlock"},function(){return this.sz},function(a){null!==a&&z.l(a,qa,qj,"textBlock");this.sz=a});z.defineProperty(qj,{zf:"currentTextEditor"},function(){return this.LB},function(a){this.LB=a});z.defineProperty(qj,{oH:"defaultTextEditor"},function(){return this.SB},function(a){z.l(a,Element,qj,"defaultTextEditor");this.SB=a});z.defineProperty(qj,{VA:"starting"},function(){return this.Qo},function(a){z.Ba(a,qj,qj,"starting");this.Qo=a});
qj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||a.ib||!a.R.left||this.isBeyondDragSize())return!1;a=a.pe(a.R.ga,null,function(a){return a instanceof qa});if(null===a||!a.Tz||!a.ca.canEdit())return!1;a=a.ca;return null===a||this.VA===rj&&!a.jb?!1:!0};qj.prototype.doStart=function(){this.ua||null===this.He||this.doActivate()};
qj.prototype.doActivate=function(){if(!this.ua){var a=this.h;if(null!==a){var b=this.He;null===b&&(b=a.pe(a.R.ga,function(a){return a instanceof qa?a:null}));if(null!==b&&(this.He=b,null!==b.ca)){this.ua=!0;this.nb=Gj;var c=this.oH,d=!1;null!==b.RF&&(c=b.RF);null===c||c.pC||(d=!0);this.iD=this.He.copy();var e=new w(this.He.eb(Zb),this.He.eb(ic));a.eJ(e);if(c.pC){var g=b.eb(ec),h=a.position,k=a.scale,l=b.hj()*k;l<this.bF&&(l=this.bF);var e=b.Ga.width*l,m=b.Ga.height*l,n=(g.x-h.x)*k,g=(g.y-h.y)*k;c.value=
b.text;a.El.style.font=b.font;c.style.font="inherit";c.style.fontSize=100*l+"%";c.style.lineHeight="normal";c.style.width=e+6+"px";c.style.height=m+2+"px";c.style.left=(n-e/2|0)-1+"px";c.style.top=(g-m/2|0)-1+"px";c.style.textAlign=b.textAlign;c.style.margin="0";c.style.padding="1px";c.style.border="0";c.style.outline="none";c.style["white-space"]="pre-wrap";c.style.overflow="hidden"}a.El.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.rJ=
l;if(d&&"function"===typeof c.onActivate)c.onActivate();this.zf=c;"function"===typeof c.focus&&c.focus();"function"===typeof c.select&&this.OA&&(c.select(),c.setSelectionRange(0,9999))}}}};qj.prototype.doCancel=function(){null!==this.ll&&(this.zf.style.border=this.ll,this.ll=null);this.stopTool()};qj.prototype.doMouseUp=function(){!this.ua&&this.canStart()&&this.doActivate()};qj.prototype.doMouseDown=function(){this.ua&&this.acceptText(xj)};
qj.prototype.acceptText=function(a){switch(a){case xj:if(this.nb===Kj||this.nb===Ij)"function"===typeof this.zf.focus&&this.zf.focus();else if(this.nb===Gj||this.nb===Hj)this.nb=Jj,Lj(this);break;case wj:case uj:case vj:if(uj===a&&!0===this.sz.nx)break;if(this.nb===Gj||this.nb===Hj)this.nb=Jj,Lj(this)}};
function Lj(a){if(null!==a.He&&null!==a.zf){var b=a.He,c=a.He.text,d=a.zf.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.He,c,e)){a.nb=Hj;null!==b.Vz&&b.Vz(a,c,e);null===a.ll&&(a.ll=a.zf.style.border,a.zf.style.border="3px solid red");"function"===typeof a.zf.focus&&a.zf.focus();return}a.Wb(a.name);a.nb=Kj;c!==e&&(a.He.text=e);a.Mf=a.name;b=a.h;null!==b&&b.Ja("TextEdited",a.He,c);a.yk();a.stopTool();null!==b&&b.focus()}null!==a.ll&&(a.zf.style.border=a.ll,a.ll=null)}
qj.prototype.doDeactivate=function(){var a=this.h;if(null!==a){this.nb=sj;this.He=null;if(null!==this.zf){var b=this.zf;if("function"===typeof b.onDeactivate)b.onDeactivate();null!==b&&a.El.removeChild(b)}this.ua=!1}};qj.prototype.doFocus=function(){var a=this.zf;null!==a&&(this.nb===Gj?this.nb=Hj:this.nb===Kj?this.nb=Ij:this.nb===Ij&&(this.nb=Hj),"function"===typeof a.select&&this.OA&&(a.select(),a.setSelectionRange(0,9999)))};
qj.prototype.doBlur=function(){var a=this.zf;null!==a&&("function"===typeof a.focus&&a.focus(),"function"===typeof a.select&&this.OA&&(a.select(),a.setSelectionRange(0,9999)))};qj.prototype.isValidText=function(a,b,c){z.l(a,qa,qj,"isValidText:textblock");var d=this.YA;if(null!==d&&!d(a,b,c))return!1;d=a.YA;return null===d||d(a,b,c)?!0:!1};z.defineProperty(qj,{YA:"textValidation"},function(){return this.ol},function(a){null!==a&&z.g(a,"function",qj,"textValidation");this.ol=a});
z.defineProperty(qj,{bF:"minimumEditorScale"},function(){return this.DC},function(a){null!==a&&z.g(a,"number",qj,"minimumEditorScale");this.DC=a});z.defineProperty(qj,{OA:"selectsTextOnActivate"},function(){return this.ZC},function(a){null!==a&&z.g(a,"boolean",qj,"selectsTextOnActivate");this.ZC=a});
function gh(){xg.call(this);this.name="ToolManager";this.rG=new J(xg);this.sG=new J(xg);this.tG=new J(xg);this.hC=this.iC=850;this.WB=(new Ea(2,2)).La();this.rD=5E3;this.HC=Ih;this.fC=Mj;this.ev=this.MB=null;this.Mm=-1}z.Ra(gh,xg);z.ia("ToolManager",gh);var Ih;gh.WheelScroll=Ih=z.s(gh,"WheelScroll",0);var Hh;gh.WheelZoom=Hh=z.s(gh,"WheelZoom",1);gh.WheelNone=z.s(gh,"WheelNone",2);var Mj;gh.GestureZoom=Mj=z.s(gh,"GestureZoom",3);var Nj;gh.GestureCancel=Nj=z.s(gh,"GestureCancel",4);var Oj;
gh.GestureNone=Oj=z.s(gh,"GestureNone",5);z.defineProperty(gh,{cu:"mouseWheelBehavior"},function(){return this.HC},function(a){z.Ba(a,gh,gh,"mouseWheelBehavior");this.HC=a});z.defineProperty(gh,{qp:"gestureBehavior"},function(){return this.fC},function(a){z.Ba(a,gh,gh,"gestureBehavior");this.fC=a});
gh.prototype.initializeStandardTools=function(){this.IG=new ij;this.jF=new Nh;this.uI=new Si;this.wF=new Zi;this.bJ=new fj;this.YE=new ta;this.me=new lh;this.sH=new oj;this.NI=new pj;this.Jz=new kj;this.XA=new qj;this.YG=new va;this.ZG=new hj};gh.prototype.updateAdornments=function(a){var b=this.uh;if(null!==b&&this.ev===a){var c=b.fc;(null!==a?c.ca===a:null===c)?this.showToolTip(b,c):this.hideToolTip()}};
gh.prototype.doMouseDown=function(){var a=this.h;if(null!==a){var b=a.R;b.mj&&this.qp===Nj&&(b.bubbles=!1);if(b.Qt){if(this.qp===Oj){b.bubbles=!0;return}if(this.qp===Nj)return;if(a.cb.canStartMultiTouch()){a.cb.standardPinchZoomStart();return}}var c=a.pa;c.Gz&&0!==c.Ih&&z.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var c=this.Ye.length,d=0;d<c;d++){var e=this.Ye.ea(d);null===e.h&&e.Sc(this.h);if(e.canStart()){a.doFocus();a.cb=e;a.cb===e&&(e.ua||e.doActivate(),
e.doMouseDown());return}}1===a.R.button&&(this.cu===Ih?this.cu=Hh:this.cu===Hh&&(this.cu=Ih));this.doActivate();this.standardWaitAfter(this.EE,b)}};
gh.prototype.doMouseMove=function(){var a=this.h;if(null!==a){var b=a.R;if(b.Qt){if(this.qp===Oj){b.bubbles=!0;return}if(this.qp===Nj)return;if(a.cb.canStartMultiTouch()){a.cb.standardPinchZoomMove();return}}if(this.ua)for(var c=this.eg.length,d=0;d<c;d++){var e=this.eg.ea(d);null===e.h&&e.Sc(this.h);if(e.canStart()){a.doFocus();a.cb=e;a.cb===e&&(e.ua||e.doActivate(),e.doMouseMove());return}}Pj(this,a);null===b.event||"mousemove"!==b.event.type&&b.event.cancelable||(b.bubbles=!0)}};
function Pj(a,b){a.standardMouseOver();a.isBeyondDragSize()&&a.standardWaitAfter(a.ua?a.EE:a.VH,b.R)}gh.prototype.doCurrentObjectChanged=function(a,b){var c=this.uh;null===c||null!==b&&(b===c||b.Pl(c))||this.hideToolTip()};gh.prototype.doWaitAfter=function(a){var b=this.h;null!==b&&b.Fb&&(this.doMouseHover(),this.ua||this.doToolTip(),a.mj&&!b.R.Gc&&(a=a.copy(),a.button=2,a.buttons=2,b.R=a,b.Ss=!0,b.doMouseUp()))};
gh.prototype.doMouseHover=function(){var a=this.h;if(null!==a){var b=a.R;null===b.Ge&&(b.Ge=a.pe(b.ga,null,null));var c=b.Ge;if(null!==c)for(b.Gc=!1;null!==c;){a=this.ua?c.sA:c.tA;if(null!==a&&(a(b,c),b.Gc))break;c=c.T}else a=this.ua?a.sA:a.tA,null!==a&&a(b)}};
gh.prototype.doToolTip=function(){var a=this.h;if(null!==a){var b=a.R;null===b.Ge&&(b.Ge=a.pe(b.ga,null,null));b=b.Ge;if(null!==b){if(b!==this.uh&&!b.Pl(this.uh)){for(;null!==b;){a=b.$A;if(null!==a){this.showToolTip(a,b);return}b=b.T}this.hideToolTip()}}else a=a.$A,null!==a?this.showToolTip(a,null):this.hideToolTip()}};
gh.prototype.showToolTip=function(a,b){z.l(a,da,gh,"showToolTip:tooltip");null!==b&&z.l(b,O,gh,"showToolTip:obj");var c=this.h;if(null!==c){a!==this.uh&&this.hideToolTip();a.If="Tool";a.wk=!1;a.scale=1/c.scale;a.nc="ToolTip";null!==a.placeholder&&(a.placeholder.scale=c.scale);c.add(a);if(null!==b){var c=null,d=b.np();null!==d&&(c=d.data);a.fc=b;a.data=c}else a.data=c.ha;a.Bf();this.positionToolTip(a,b);this.uh=a;-1!==this.Mm&&(z.clearTimeout(this.Mm),this.Mm=-1);c=this.wJ;if(0<c&&Infinity!==c){var e=
this;this.Mm=z.setTimeout(function(){e.hideToolTip()},c)}}};gh.prototype.positionToolTip=function(a){if(null===a.placeholder){var b=this.h;if(null!==b){var c=b.R.ga.copy(),d=a.Ia,e=b.xb;b.R.mj&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}}};
gh.prototype.hideToolTip=function(){-1!==this.Mm&&(z.clearTimeout(this.Mm),this.Mm=-1);var a=this.h;null!==a&&null!==this.uh&&(a.remove(this.uh),null!==this.ev&&this.ev.sj(this.uh.nc),this.uh.data=null,this.uh=this.uh.fc=null)};z.defineProperty(gh,{uh:"currentToolTip"},function(){return this.MB},function(a){null!==a&&z.l(a,da,gh,"currentToolTip");this.MB=a;this.ev=null!==a?a.Xf:null});
gh.prototype.doMouseUp=function(){this.cancelWaitAfter();var a=this.h;if(null!==a){if(this.ua)for(var b=this.fg.length,c=0;c<b;c++){var d=this.fg.ea(c);null===d.h&&d.Sc(this.h);if(d.canStart()){a.doFocus();a.cb=d;a.cb===d&&(d.ua||d.doActivate(),d.doMouseUp());return}}a.doFocus();this.doDeactivate()}};gh.prototype.doMouseWheel=function(){this.standardMouseWheel()};gh.prototype.doKeyDown=function(){var a=this.h;null!==a&&a.wb.doKeyDown()};gh.prototype.doKeyUp=function(){var a=this.h;null!==a&&a.wb.doKeyUp()};
gh.prototype.doCancel=function(){null!==Lh&&Lh.doCancel();xg.prototype.doCancel.call(this)};gh.prototype.findTool=function(a){z.g(a,"string",gh,"findTool:name");for(var b=this.Ye.length,c=0;c<b;c++){var d=this.Ye.ea(c);if(d.name===a)return d}b=this.eg.length;for(c=0;c<b;c++)if(d=this.eg.ea(c),d.name===a)return d;b=this.fg.length;for(c=0;c<b;c++)if(d=this.fg.ea(c),d.name===a)return d;return null};
gh.prototype.replaceTool=function(a,b){z.g(a,"string",gh,"replaceTool:name");null!==b&&(z.l(b,xg,gh,"replaceTool:newtool"),b.h&&b.h!==this.h&&z.k("Cannot share tools between Diagrams: "+b.toString()),b.Sc(this.h));for(var c=this.Ye.length,d=0;d<c;d++){var e=this.Ye.ea(d);if(e.name===a)return null!==b?this.Ye.Sg(d,b):this.Ye.dd(d),e}c=this.eg.length;for(d=0;d<c;d++)if(e=this.eg.ea(d),e.name===a)return null!==b?this.eg.Sg(d,b):this.eg.dd(d),e;c=this.fg.length;for(d=0;d<c;d++)if(e=this.fg.ea(d),e.name===
a)return null!==b?this.fg.Sg(d,b):this.fg.dd(d),e;return null};function Qj(a,b,c,d){z.g(b,"string",gh,"replaceStandardTool:name");z.l(d,J,gh,"replaceStandardTool:list");null!==c&&(z.l(c,xg,gh,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&z.k("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.Sc(a.h));a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}z.w(gh,{Ye:"mouseDownTools"},function(){return this.rG});z.w(gh,{eg:"mouseMoveTools"},function(){return this.sG});
z.w(gh,{fg:"mouseUpTools"},function(){return this.tG});z.defineProperty(gh,{VH:"hoverDelay"},function(){return this.iC},function(a){z.g(a,"number",gh,"hoverDelay");this.iC=a});z.defineProperty(gh,{EE:"holdDelay"},function(){return this.hC},function(a){z.g(a,"number",gh,"holdDelay");this.hC=a});z.defineProperty(gh,{tH:"dragSize"},function(){return this.WB},function(a){z.l(a,Ea,gh,"dragSize");this.WB=a.V()});
z.defineProperty(gh,{wJ:"toolTipDuration"},function(){return this.rD},function(a){z.g(a,"number",gh,"toolTipDuration");this.rD=a});z.defineProperty(gh,{IG:"actionTool"},function(){return this.findTool("Action")},function(a){Qj(this,"Action",a,this.Ye)});z.defineProperty(gh,{jF:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){Qj(this,"Relinking",a,this.Ye)});
z.defineProperty(gh,{uI:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){Qj(this,"LinkReshaping",a,this.Ye)});z.defineProperty(gh,{wF:"resizingTool"},function(){return this.findTool("Resizing")},function(a){Qj(this,"Resizing",a,this.Ye)});z.defineProperty(gh,{bJ:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){Qj(this,"Rotating",a,this.Ye)});
z.defineProperty(gh,{YE:"linkingTool"},function(){return this.findTool("Linking")},function(a){Qj(this,"Linking",a,this.eg)});z.defineProperty(gh,{me:"draggingTool"},function(){return this.findTool("Dragging")},function(a){Qj(this,"Dragging",a,this.eg)});z.defineProperty(gh,{sH:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){Qj(this,"DragSelecting",a,this.eg)});
z.defineProperty(gh,{NI:"panningTool"},function(){return this.findTool("Panning")},function(a){Qj(this,"Panning",a,this.eg)});z.defineProperty(gh,{Jz:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){Qj(this,"ContextMenu",a,this.fg)});z.defineProperty(gh,{XA:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){Qj(this,"TextEditing",a,this.fg)});
z.defineProperty(gh,{YG:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){Qj(this,"ClickCreating",a,this.fg)});z.defineProperty(gh,{ZG:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){Qj(this,"ClickSelecting",a,this.fg)});
function Jg(){this.NB=Rj;this.Pq=this.Qq=this.Z=null;this.Gn=this.Rq=this.Sq=0;this.Hn=this.wc=this.so=this.Kj=!1;this.Lj=this.af=!0;this.cv=this.bv=this.IB=null;this.HB=0;this.Qo=this.dv=null;this.Pu=new K("string");this.Gy=600;this.xG=new N(0,0);this.wB=this.vB=this.vD=!1;this.xm=new na(O,Sj)}z.ia("AnimationManager",Jg);Jg.prototype.Sc=function(a){this.Z=a};function Rj(a,b,c,d){a/=d/2;return 1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}
z.defineProperty(Jg,{VA:"starting"},function(){return this.Qo},function(a){this.Qo!==a&&(null!==a&&z.g(a,"function",Jg,"starting"),this.Qo=a)});z.w(Jg,{aK:"animationReasons"},function(){return this.Pu});Jg.prototype.prepareAutomaticAnimation=Jg.prototype.rn=function(a){if(this.af&&(this.Lj||this.Z.jn)){this.Pu.add(a);var b=this.VA;if(null===b||b(this,a))this.Kj&&this.pi(),this.wc=!0}};
function Tj(a){if(a.af&&(a.Pu.clear(),a.wc))if(!a.Hn)a.wc=!1;else if(0===a.Gn){var b=+new Date;a.Gn=b;requestAnimationFrame(function(){if(!1!==a.wc&&!a.Kj&&a.Gn===b){var c=a.Z;c.ij("temporaryPixelRatio")&&(c.dk=1);Uj(c);a.wc=!1;c.Ja("AnimationStarting");Vj(a,b)}})}}
function Wj(a,b,c,d,e,g){if(a.wc&&(u&&z.l(b,O,Jg,"addPropToAnimation:obj"),!("position"===c&&d.N(e)||b instanceof D&&!b.HE))){var h=a.xm;if(h.contains(b)){var h=h.na(b),k=h.start,l=h.end;void 0===k[c]&&(k[c]=Xj(d));h.Rw&&void 0!==l[c]?h.yt[c]=Xj(e):(g||(h.yt[c]=Xj(e)),l[c]=Xj(e));g&&0===c.indexOf("position:")&&(h.yt.location=Xj(b.location))}else k=new ma,l=new ma,k[c]=Xj(d),l[c]=Xj(e),d=l,e=k.position,e instanceof N&&!e.F()&&a.Pu.contains("Expand SubGraph")&&e.assign(d.position),k=new Sj(k,l,g),g&&
0===c.indexOf("position:")&&(k.yt.location=Xj(b.location)),h.add(b,k);a.Hn=!0}}function Xj(a){return a instanceof N?a.copy():a instanceof Ea?a.copy():a}
function Vj(a,b){var c;function d(){if(!1!==g.Kj&&g.Gn===b){var a=+new Date,c=a>s?m:a-r;Yj(g);Zj(g,e,q,h,c,m);g.bv&&g.bv();pi(e);ak(g);a>s?bk(g):requestAnimationFrame(d)}}void 0===c&&(c=new ma);var e=a.Z;if(null!==e){a.Kj=!0;var g=a,h=c.AK||a.NB,k=c.$K||null,l=c.aL||null,m=c.duration||a.Gy,n=a.xG;for(c=a.xm.i;c.next();){var p=c.value.start.position;p instanceof N&&(p.F()||p.assign(n))}a.IB=h;a.bv=k;a.cv=l;a.HB=m;a.dv=a.xm;var q=a.dv;for(c=q.i;c.next();)k=c.value.end,k["position:placeholder"]&&(l=
k["position:placeholder"],n=l.eb(Zb),n.x+=l.padding.left,n.y+=l.padding.top,k["position:placeholder"]=n);Yj(a);Zj(a,e,q,h,0,m);pi(a.Z);ak(a);var r=+new Date,s=r+m;g.Gn===b&&requestAnimationFrame(function(){d()})}}
var ck={opacity:function(a,b,c,d,e,g){a.opacity=d(e,b,c-b,g)},position:function(a,b,c,d,e,g){e!==g?a.Px(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g)):a.position=new N(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g))},"position:node":function(a,b,c,d,e,g){var h=a.W,k=c.W;c=k.x+k.width/2-h.width/2;h=k.y+k.height/2-h.height/2;e!==g?a.Px(d(e,b.x,c-b.x,g),d(e,b.y,h-b.y,g)):a.position=new N(d(e,b.x,c-b.x,g),d(e,b.y,h-b.y,g))},"position:placeholder":function(a,b,c,d,e,g){e!==g?a.Px(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g)):
a.position=new N(d(e,b.x,c.x-b.x,g),d(e,b.y,c.y-b.y,g))},scale:function(a,b,c,d,e,g){a.scale=d(e,b,c-b,g)},visible:function(a,b,c,d,e,g){a.visible=e!==g?b:c}};function Yj(a){if(!a.so){var b=a.Z;a.vD=b.Bb;a.vB=b.Ee;a.wB=b.vu;b.Bb=!0;b.Ee=!0;b.vu=!0;a.so=!0}}function ak(a){var b=a.Z;b.Bb=a.vD;b.Ee=a.vB;b.vu=a.wB;a.so=!1}
function Zj(a,b,c,d,e,g){for(c=c.i;c.next();){var h=c.key,k=c.value,l=k.start,k=k.end,m;for(m in k)if(("position"!==m||!k["position:placeholder"]&&!k["position:node"])&&void 0!==ck[m])ck[m](h,l[m],k[m],d,e,g)}d=b.gA;b.gA=!0;m=a.NB;0!==a.Sq&&0!==a.Rq&&(c=a.Sq,b.bc=m(e,c,a.Rq-c,g));null!==a.Qq&&null!==a.Pq&&(c=a.Qq,a=a.Pq,b.sb=new N(m(e,c.x,a.x-c.x,g),m(e,c.y,a.y-c.y,g)));b.gA=d}Jg.prototype.stopAnimation=Jg.prototype.pi=function(){!0===this.wc&&(this.wc=!1,this.Hn&&this.Z.Ce());this.Kj&&this.af&&bk(this)};
function bk(a){a.Kj=!1;a.Gn=0;a.Hn=!1;a.Qq=null;a.Pq=null;a.Sq=0;a.Rq=0;Yj(a);for(var b=a.Z,c=a.IB,d=a.HB,e=a.dv.i;e.next();){var g=e.key,h=e.value,k=h.start,l=h.end,m=h.yt,n;for(n in l)if(void 0!==ck[n]){var p=n;!h.Rw||"position:node"!==p&&"position:placeholder"!==p||(p="position");ck[p](g,k[n],void 0!==m[n]?m[n]:h.Rw?k[n]:l[n],c,d,d)}h.Rw&&void 0!==m.location&&(g.location=m.location);h.Ex&&g.xd(!1)}for(c=a.Z.links;c.next();)d=c.value,null!==d.Jo&&(d.points=d.Jo,d.Jo=null);b.tx.clear();b.dk=null;
b.yc();b.ta();b.cg();dk(b);ak(a);a.dv=null;a.xm=new na(O,Sj);a.cv&&a.cv();a.cv=null;a.bv=null;b.Ja("AnimationFinished");b.Ce()}function ek(a,b,c){var d=b.W,e=c.W,g=null;c instanceof F&&(g=c.placeholder);null!==g?(d=g.eb(Zb),d.x+=g.padding.left,d.y+=g.padding.top,Wj(a,b,"position",d,b.position,!1)):Wj(a,b,"position",new N(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position,!1);Wj(a,b,"scale",.01,b.scale,!1);if(b instanceof F)for(b=b.Hc;b.next();)g=b.value,g instanceof E&&ek(a,g,c)}
function fk(a,b,c){if(b.isVisible()){var d=null;c instanceof F&&(d=c.placeholder);null!==d?Wj(a,b,"position:placeholder",b.position,d,!0):Wj(a,b,"position:node",b.position,c,!0);Wj(a,b,"scale",b.scale,.01,!0);a.wc&&(d=a.xm,d.contains(b)&&(d.na(b).Ex=!0));if(b instanceof F)for(b=b.Hc;b.next();)d=b.value,d instanceof E&&fk(a,d,c)}}function gk(a,b,c){a.wc&&(null===a.Qq&&b.F()&&null===a.Pq&&(a.Qq=b.copy()),a.Pq=c.copy(),a.Hn=!0)}
function hk(a,b,c){a.wc&&a.Z.jn&&(0===a.Sq&&0===a.Rq&&(a.Sq=b),a.Rq=c,a.Hn=!0)}z.defineProperty(Jg,{isEnabled:"isEnabled"},function(){return this.af},function(a){z.g(a,"boolean",Jg,"isEnabled");this.af=a});z.defineProperty(Jg,{duration:"duration"},function(){return this.Gy},function(a){z.g(a,"number",Jg,"duration");1>a&&z.ka(a,">= 1",Jg,"duration");this.Gy=a});z.w(Jg,{nf:"isAnimating"},function(){return this.Kj});z.w(Jg,{jI:"isTicking"},function(){return this.so});
z.defineProperty(Jg,{QE:"isInitial"},function(){return this.Lj},function(a){z.g(a,"boolean",Jg,"isInitial");this.Lj=a});function Sj(a,b,c){this.start=a;this.end=b;this.yt=new ma;this.Rw=c;this.Ex=!1}function wg(){0<arguments.length&&z.pd(wg);z.kc(this);this.Z=null;this.mb=new J(D);this.Ub="";this.Xc=1;this.Xy=!1;this.nl=this.xz=this.Kk=this.Jk=this.Ik=this.Hk=this.Fk=this.Gk=this.Ek=this.Mk=this.Dk=this.Lk=this.Ck=this.Bk=!0;this.Sy=!1;this.Xv=[]}z.ia("Layer",wg);
wg.prototype.Sc=function(a){this.Z=a};
wg.prototype.toString=function(a){void 0===a&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,h=0,k=this.mb.i;k.next();){var l=k.value;l instanceof F?e++:l instanceof E?d++:l instanceof G?g++:l instanceof da?h++:c++}k="";0<c&&(k+=c+" Parts ");0<d&&(k+=d+" Nodes ");0<e&&(k+=e+" Groups ");0<g&&(k+=g+" Links ");0<h&&(k+=h+" Adornments ");if(1<a)for(a=this.mb.i;a.next();)c=a.value,k+="\n    "+c.toString(),d=c.data,null!==d&&z.nd(d)&&(k+=" #"+z.nd(d)),c instanceof E?k+=" "+
ka(d):c instanceof G&&(k+=" "+ka(c.Y)+" "+ka(c.da));return b+" "+this.mb.count+": "+k};
wg.prototype.findObjectAt=wg.prototype.pe=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);if(!1===this.nl)return null;u&&!a.F()&&z.k("findObjectAt: Point must have a real value, not: "+a.toString());var d=!1;this.h.xb.Ma(a)&&(d=!0);for(var e=z.O(),g=this.mb.o,h=g.length;h--;){var k=g[h];if((!0!==d||!1!==ik(k))&&k.isVisible()&&(e.assign(a),tb(e,k.qh),k=k.pe(e,b,c),null!==k&&(null!==b&&(k=b(k)),null!==k&&(null===c||c(k)))))return z.A(e),k}z.A(e);return null};
wg.prototype.findObjectsAt=wg.prototype.lp=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof J||d instanceof K||(d=new K(O));if(!1===this.nl)return d;u&&!a.F()&&z.k("findObjectsAt: Point must have a real value, not: "+a.toString());var e=!1;this.h.xb.Ma(a)&&(e=!0);for(var g=z.O(),h=this.mb.o,k=h.length;k--;){var l=h[k];!0===e&&!1===ik(l)||!l.isVisible()||(g.assign(a),tb(g,l.qh),l.lp(g,b,c,d)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||d.add(l)))}z.A(g);return d};
wg.prototype.findObjectsIn=wg.prototype.pk=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof J||e instanceof K||(e=new K(O));if(!1===this.nl)return e;u&&!a.F()&&z.k("findObjectsIn: Rect must have a real value, not: "+a.toString());var g=!1;this.h.xb.nk(a)&&(g=!0);for(var h=this.mb.o,k=h.length;k--;){var l=h[k];(!0!==g||!1!==ik(l))&&l.isVisible()&&l.pk(a,b,c,d,e)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||e.add(l))}return e};
wg.prototype.Wz=function(a,b,c,d,e,g,h){if(!1===this.nl)return e;for(var k=this.mb.o,l=k.length;l--;){var m=k[l];(!0!==h||!1!==ik(m))&&g(m)&&m.isVisible()&&m.pk(a,b,c,d,e)&&(null!==b&&(m=b(m)),null===m||null!==c&&!c(m)||e.add(m))}return e};
wg.prototype.findObjectsNear=wg.prototype.cn=function(a,b,c,d,e,g){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof J||e instanceof K)g=e;e=!0}g instanceof J||g instanceof K||(g=new K(O));if(!1===this.nl)return g;u&&!a.F()&&z.k("findObjectsNear: Point must have a real value, not: "+a.toString());var h=!1;this.h.xb.Ma(a)&&(h=!0);for(var k=z.O(),l=z.O(),m=this.mb.o,n=m.length;n--;){var p=m[n];!0===h&&!1===ik(p)||!p.isVisible()||(k.assign(a),tb(k,p.qh),
l.n(a.x+b,a.y),tb(l,p.qh),p.cn(k,l,c,d,e,g)&&(null!==c&&(p=c(p)),null===p||null!==d&&!d(p)||g.add(p)))}z.A(k);z.A(l);return g};f=wg.prototype;f.Jf=function(a,b){if(this.visible){var c;c=void 0===b?a.xb:b;for(var d=this.mb.o,e=d.length,g=0;g<e;g++){var h=d[g];h.AC=g;if(!(h instanceof G&&!1===h.Dg)){if(h instanceof da){var k=h;if(null!==k.Xf)continue}if(Gb(h.W,c))for(h.Jf(!0),jk(h),h=h.Ew;h.next();)k=h.value,tj(k,Infinity,Infinity),k.Lc(),k.Jf(!0);else h.Jf(!1),null!==h.Ew&&0<h.Ew.count&&jk(h)}}}};
f.ff=function(a,b,c){if(this.visible&&0!==this.Xc&&(void 0===c&&(c=!0),c||!this.Nc)){c=this.mb.o;var d=c.length;if(0!==d){1!==this.Xc&&(a.globalAlpha=this.Xc);var e=this.Xv;e.length=0;for(var g=b.scale,h=0;h<d;h++){var k=c[h];if(ik(k)){if(k instanceof G){var l=k;l.rc&&e.push(l);if(!1===l.Dg)continue}l=k.W;1<l.width*g||1<l.height*g?k.ff(a,b):kk(k,a)}}a.globalAlpha=1}}};
function lk(a,b,c,d){if(a.visible&&0!==a.Xc){1!==a.Xc&&(b.globalAlpha=a.Xc);var e=a.Xv;e.length=0;var g=c.scale;a=a.mb.o;for(var h=a.length,k=d.length,l=0;l<h;l++){var m=a[l];if(ik(m)){if(m instanceof G){var n=m;n.rc&&e.push(n);if(!1===n.Dg)continue}var n=mk(m,m.W),p;a:{p=n;for(var q=d,r=k,s=2/g,t=4/g,v=0;v<r;v++){var x=q[v];if(0!==x.width&&0!==x.height&&p.FE(x.x-s,x.y-s,x.width+t,x.height+t)){p=!0;break a}}p=!1}p&&(1<n.width*g||1<n.height*g?m.ff(b,c):kk(m,b))}}b.globalAlpha=1}}
f.j=function(a,b,c,d,e){var g=this.h;null!==g&&g.Rc(Uf,a,this,b,c,d,e)};f.xp=function(a,b,c){var d=this.mb;b.Gv=this;if(a>=d.count)a=d.count;else if(d.ea(a)===b)return-1;d.Md(a,b);b.Kt(c);d=this.h;null!==d&&(c?d.ta():d.xp(b));nk(this,a,b);return a};
f.Ve=function(a,b,c){if(!c&&b.layer!==this&&null!==b.layer)return b.layer.Ve(a,b,c);var d=this.mb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.ea(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.Lt(c);d.dd(a);d=this.h;null!==d&&(c?d.ta():d.Ve(b));b.Gv=null;return a};
function nk(a,b,c){b=ok(a,b,c);if(c instanceof F&&null!==c&&isNaN(c.Dn)){if(0!==c.Hc.count){for(var d=-1,e=a.mb.o,g=e.length,h=0;h<g;h++){var k=e[h];if(k===c&&(b=h,0<=d))break;if(0>d&&k.Qa===c&&(d=h,0<=b))break}!(0>d)&&d<b&&(e=a.mb,e.dd(b),e.Md(d,c))}c=c.Qa;null!==c&&nk(a,-1,c)}}
function ok(a,b,c){var d=c.Dn;if(isNaN(d))return b;a=a.mb;var e=a.count;if(1>=e)return b;0>b&&(b=a.indexOf(c));if(0>b)return-1;for(var g=b-1,h=NaN;0<=g;){h=a.ea(g).Dn;if(!isNaN(h))break;g--}for(var k=b+1,l=NaN;k<e;){l=a.ea(k).Dn;if(!isNaN(l))break;k++}if(!isNaN(h)&&h>d)for(;;){if(-1===g||h<=d){g++;if(g===b)break;a.dd(b);a.Md(g,c);return g}for(h=NaN;0<=--g&&(h=a.ea(g).Dn,isNaN(h)););}else if(!isNaN(l)&&l<d)for(;;){if(k===e||l>=d){k--;if(k===b)break;a.dd(b);a.Md(k,c);return k}for(l=NaN;++k<e&&(l=a.ea(k).Dn,
isNaN(l)););}return b}f.clear=function(){for(var a=this.mb.jc(),b=a.length,c=0;c<b;c++)a[c].Jf(!1),this.Ve(-1,a[c],!1)};z.w(wg,{oi:"parts"},function(){return this.mb.i});z.w(wg,{lL:"partsBackwards"},function(){return this.mb.kn});z.w(wg,{h:"diagram"},function(){return this.Z});
z.defineProperty(wg,{name:"name"},function(){return this.Ub},function(a){z.g(a,"string",wg,"name");var b=this.Ub;if(b!==a){var c=this.h;if(null!==c)for(""===b&&z.k("Cannot rename default Layer to: "+a),c=c.ln;c.next();)c.value.name===a&&z.k("Layer.name is already present in this diagram: "+a);this.Ub=a;this.j("name",b,a);for(a=this.mb.i;a.next();)a.value.If=this.Ub}});
z.defineProperty(wg,{opacity:"opacity"},function(){return this.Xc},function(a){var b=this.Xc;b!==a&&(z.g(a,"number",wg,"opacity"),(0>a||1<a)&&z.ka(a,"0 <= value <= 1",wg,"opacity"),this.Xc=a,this.j("opacity",b,a),a=this.h,null!==a&&a.ta())});z.defineProperty(wg,{Nc:"isTemporary"},function(){return this.Xy},function(a){var b=this.Xy;b!==a&&(z.g(a,"boolean",wg,"isTemporary"),this.Xy=a,this.j("isTemporary",b,a))});
z.defineProperty(wg,{visible:"visible"},function(){return this.xz},function(a){var b=this.xz;if(b!==a){z.g(a,"boolean",wg,"visible");this.xz=a;this.j("visible",b,a);for(b=this.mb.i;b.next();)b.value.xd(a);a=this.h;null!==a&&a.ta()}});z.defineProperty(wg,{jg:"pickable"},function(){return this.nl},function(a){var b=this.nl;b!==a&&(z.g(a,"boolean",wg,"pickable"),this.nl=a,this.j("pickable",b,a))});
z.defineProperty(wg,{IE:"isBoundsIncluded"},function(){return this.Sy},function(a){this.Sy!==a&&(this.Sy=a,null!==this.h&&this.h.yc())});z.defineProperty(wg,{lk:"allowCopy"},function(){return this.Bk},function(a){var b=this.Bk;b!==a&&(z.g(a,"boolean",wg,"allowCopy"),this.Bk=a,this.j("allowCopy",b,a))});z.defineProperty(wg,{Rm:"allowDelete"},function(){return this.Ck},function(a){var b=this.Ck;b!==a&&(z.g(a,"boolean",wg,"allowDelete"),this.Ck=a,this.j("allowDelete",b,a))});
z.defineProperty(wg,{Iw:"allowTextEdit"},function(){return this.Lk},function(a){var b=this.Lk;b!==a&&(z.g(a,"boolean",wg,"allowTextEdit"),this.Lk=a,this.j("allowTextEdit",b,a))});z.defineProperty(wg,{Fw:"allowGroup"},function(){return this.Dk},function(a){var b=this.Dk;b!==a&&(z.g(a,"boolean",wg,"allowGroup"),this.Dk=a,this.j("allowGroup",b,a))});
z.defineProperty(wg,{Jw:"allowUngroup"},function(){return this.Mk},function(a){var b=this.Mk;b!==a&&(z.g(a,"boolean",wg,"allowUngroup"),this.Mk=a,this.j("allowUngroup",b,a))});z.defineProperty(wg,{lt:"allowLink"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(z.g(a,"boolean",wg,"allowLink"),this.Ek=a,this.j("allowLink",b,a))});
z.defineProperty(wg,{Sm:"allowRelink"},function(){return this.Gk},function(a){var b=this.Gk;b!==a&&(z.g(a,"boolean",wg,"allowRelink"),this.Gk=a,this.j("allowRelink",b,a))});z.defineProperty(wg,{vl:"allowMove"},function(){return this.Fk},function(a){var b=this.Fk;b!==a&&(z.g(a,"boolean",wg,"allowMove"),this.Fk=a,this.j("allowMove",b,a))});
z.defineProperty(wg,{Gw:"allowReshape"},function(){return this.Hk},function(a){var b=this.Hk;b!==a&&(z.g(a,"boolean",wg,"allowReshape"),this.Hk=a,this.j("allowReshape",b,a))});z.defineProperty(wg,{mt:"allowResize"},function(){return this.Ik},function(a){var b=this.Ik;b!==a&&(z.g(a,"boolean",wg,"allowResize"),this.Ik=a,this.j("allowResize",b,a))});
z.defineProperty(wg,{Hw:"allowRotate"},function(){return this.Jk},function(a){var b=this.Jk;b!==a&&(z.g(a,"boolean",wg,"allowRotate"),this.Jk=a,this.j("allowRotate",b,a))});z.defineProperty(wg,{xf:"allowSelect"},function(){return this.Kk},function(a){var b=this.Kk;b!==a&&(z.g(a,"boolean",wg,"allowSelect"),this.Kk=a,this.j("allowSelect",b,a))});
function B(a){function b(){window.document.removeEventListener("DOMContentLoaded",b,!1);pk(c)}1<arguments.length&&z.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");z.kc(this);qk=[];this.Vc=!0;this.sB=new Jg;this.sB.Sc(this);this.Hd=17;this.mr=!1;this.jz="default";var c=this;null!==window.document.body?pk(this):window.document.addEventListener("DOMContentLoaded",b,!1);this.Yb=new J(wg);this.Ob=this.Jb=0;this.Yj=this.Pb=this.gd=this.Fb=null;this.qF();this.po=
null;this.pF();this.sb=(new N(NaN,NaN)).freeze();this.bc=1;this.xv=(new N(NaN,NaN)).freeze();this.yv=NaN;this.Ov=1E-4;this.Lv=100;this.Jd=new Fa;this.Cw=(new N(NaN,NaN)).freeze();this.ov=(new w(NaN,NaN,NaN,NaN)).freeze();this.jw=(new Db(0,0,0,0)).freeze();this.kw=rk;this.gw=this.cw=null;this.cm=mh;this.On=Pc;this.Yk=mh;this.mo=Pc;this.zv=this.wv=Zb;this.ve=!0;this.gr=!1;this.rg=new K(O);this.Sk=new na(G,w);this.ao=!0;this.uB=250;this.In=-1;this.Su=(new Db(16,16,16,16)).freeze();this.hv=this.Wf=!1;
this.ho=!0;this.Fi=new Rf;this.Zc=new Rf;this.Qb=new Rf;this.hh=this.ui=null;this.Ss=!1;this.By=this.Cy=null;sk(this);this.Eo=new K(E);this.pl=new K(F);this.yo=new K(G);this.mb=new K(D);this.Dv=!0;this.xw=tk;this.lC=!1;this.zw=Bi;this.xy=this.zy=this.uz=null;this.av="";this.Oq="auto";this.zi=this.Xi=this.Ni=this.Rv=this.Oi=this.Pi=this.Qi=this.yi=this.Di=this.vi=null;this.ez=!1;this.TC={};this.bw=0;this.Uf=[null,null];this.ty=null;this.lq=this.Ay=this.nz=this.$C=this.Wi=!1;this.xC=!0;this.Uy=this.Vd=
!1;this.ie=null;var d=this;this.EC=function(a){if(a.ha===d.ha&&d.$a){d.$a=!1;try{var b=a.Dc;""===a.rf&&b===Uf&&uk(d,a.object,a.propertyName)}finally{d.$a=!0}}};this.FC=function(a){vk(d,a)};this.xD=!0;this.dh=-2;this.Ai=new na(Object,D);this.Rk=new na(Object,G);this.mm=new na(Object,Array);this.Fo=new na("string",Array);this.SC=new J(wk);this.Hi=!1;this.Ck=this.Bk=this.Hu=this.af=!0;this.Ju=this.Iu=!1;this.Ou=this.Mu=this.Kk=this.Jk=this.Ik=this.Hk=this.Fk=this.Gk=this.Ek=this.Lu=this.Mk=this.Dk=this.Lk=
!0;this.jm=this.uC=!1;this.Nu=this.Ku=this.uv=this.tv=!0;this.mw=this.iw=16;this.kz=this.hw=!1;this.xs=this.lw=null;this.lz=this.mz=0;this.df=(new Db(5)).freeze();this.pw=(new K(D)).freeze();this.Mv=999999999;this.vv=(new K(D)).freeze();this.Zk=this.hm=this.Jj=!0;this.Wk=this.Ij=!1;this.he=null;this.Qu=!0;this.fh=!1;this.qG=new K(G);this.jC=new K(xk);this.Fd=null;this.KC=1;this.Ny=!1;this.cD=0;this.wD=(new w(NaN,NaN,NaN,NaN)).freeze();this.iv=(new w(NaN,NaN,NaN,NaN)).freeze();this.Yv=new K(yk);zk(this);
this.Iv=this.qv=this.Sv=this.PB=this.OB=this.QB=this.Pj=this.Uk=this.Ri=null;Ak(this);this.ud=null;this.pv=!1;this.Rn=null;this.gb=new gh;this.gb.initializeStandardTools();this.cb=this.vt=this.gb;this.wb=new ra;this.ha=new V;this.Wi=!0;this.Sb=new yg;this.Wi=!1;this.aC=this.Ey=null;this.jd=1;this.dk=null;this.Xk=new Bk;void 0!==a&&Ck(this,a);this.cl=1;this.om=0;this.zC=new N;this.tD=500;this.Ru=new N;this.Ks=null;this.Vc=this.$k=!1}z.ia("Diagram",B);
function Ak(a){a.Ri=new na("string",D);var b=new E,c=new qa;c.bind(new $g("text","",ka));b.add(c);a.QB=b;a.Ri.add("",b);b=new E;c=new qa;c.stroke="brown";c.bind(new $g("text","",ka));b.add(c);a.Ri.add("Comment",b);b=new E;b.wk=!1;b.ND=!1;c=new X;c.Hb="Ellipse";c.fill="black";c.stroke=null;c.Aa=(new Ea(3,3)).La();b.add(c);a.Ri.add("LinkLabel",b);a.Uk=new na("string",F);b=new F;b.Kx="GROUPPANEL";b.type=Dk;c=new qa;c.font="bold 12pt sans-serif";c.bind(new $g("text","",ka));b.add(c);c=new I(Ek);c.name=
"GROUPPANEL";var d=new X;d.Hb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new aj;d.padding=(new Db(5,5,5,5)).La();c.add(d);b.add(c);a.OB=b;a.Uk.add("",b);a.Pj=new na("string",G);b=new G;c=new X;c.Ff=!0;b.add(c);c=new X;c.fq="Standard";c.fill="black";c.stroke=null;c.ub=0;b.add(c);a.PB=b;a.Pj.add("",b);b=new G;c=new X;c.Ff=!0;c.stroke="brown";b.add(c);a.Pj.add("Comment",b);b=new da;b.type=Ek;c=new X;c.fill=null;c.stroke="dodgerblue";c.ub=3;b.add(c);c=new aj;c.margin=(new Db(1.5,
1.5,1.5,1.5)).La();b.add(c);a.Sv=b;a.qv=b;b=new da;b.type=Ni;c=new X;c.Ff=!0;c.fill=null;c.stroke="dodgerblue";c.ub=3;b.add(c);a.Iv=b}
function pk(a){var b=z.createElement("p");b.style.width="100%";b.style.height="200px";b.style.boxSizing="content-box";var c=z.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.style.boxSizing="content-box";c.appendChild(b);window.document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);window.document.body.removeChild(c);c=d-b;0!==c||z.OE||
(c=11);a.Hd=c;c=z.createElement("div");c.dir="rtl";c.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";c.textContent="A";window.document.body.appendChild(c);d="reverse";0<c.scrollLeft?d="default":(c.scrollLeft=1,0===c.scrollLeft&&(d="negative"));window.document.body.removeChild(c);a.jz=d}
B.prototype.toString=function(a){void 0===a&&(a=0);var b="";this.id&&(b=this.id);this.El&&this.El.id&&(b=this.El.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Yb.i;c.next();)b+="\n  "+c.value.toString(a-1);return b};B.fromDiv=function(a){var b=a;"string"===typeof a&&(b=window.document.getElementById(a));return b instanceof HTMLDivElement&&b.Z instanceof B?b.Z:null};
z.defineProperty(B,{El:"div"},function(){return this.Pb},function(a){null!==a&&z.l(a,HTMLDivElement,B,"div");if(this.Pb!==a){qk=[];var b=this.Pb;null!==b?(b.Z=void 0,b.innerHTML="",null!==this.Fb&&(this.Fb.removeEventListener("touchstart",this.YF,!1),this.Fb.removeEventListener("touchmove",this.XF,!1),this.Fb.removeEventListener("touchend",this.WF,!1),this.Fb.Ld.Z=null),b=this.gb,null!==b&&(b.Ye.each(function(a){a.cancelWaitAfter()}),b.eg.each(function(a){a.cancelWaitAfter()}),b.fg.each(function(a){a.cancelWaitAfter()})),
b.cancelWaitAfter(),this.cb.doCancel(),this.gd=this.Fb=null,window.removeEventListener("resize",this.gG,!1),window.removeEventListener("mousemove",this.Kp,!0),window.removeEventListener("mousedown",this.Jp,!0),window.removeEventListener("mouseup",this.Mp,!0),window.removeEventListener("mousewheel",this.Bh,!0),window.removeEventListener("DOMMouseScroll",this.Bh,!0),window.removeEventListener("mouseout",this.Lp,!0)):this.fh=!1;this.Pb=null;if(null!==a){if(b=a.Z)b.El=null;Ck(this,a);this.Sp()}}});
function Fk(a){var b=a.Fb;b.addEventListener("touchstart",a.YF,!1);b.addEventListener("touchmove",a.XF,!1);b.addEventListener("touchend",a.WF,!1);b.addEventListener("mousemove",a.Kp,!1);b.addEventListener("mousedown",a.Jp,!1);b.addEventListener("mouseup",a.Mp,!1);b.addEventListener("mousewheel",a.Bh,!1);b.addEventListener("DOMMouseScroll",a.Bh,!1);b.addEventListener("mouseout",a.Lp,!1);b.addEventListener("keydown",a.nI,!1);b.addEventListener("keyup",a.oI,!1);b.addEventListener("selectstart",function(a){a.preventDefault();
return!1},!1);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("gesturechange",function(b){a.gb.qp===Nj&&b.preventDefault()},!1);b.addEventListener("pointerdown",a.OI,!1);b.addEventListener("pointermove",a.RI,!1);b.addEventListener("pointerleave",a.QI,!1);window.addEventListener("resize",a.gG,!1)}B.prototype.computePixelRatio=function(){return null!==this.dk?this.dk:this.uG};B.prototype.doMouseMove=function(){this.cb.doMouseMove()};
B.prototype.doMouseDown=function(){this.cb.doMouseDown()};B.prototype.doMouseUp=function(){this.cb.doMouseUp()};B.prototype.doMouseWheel=function(){this.cb.doMouseWheel()};B.prototype.doKeyDown=function(){this.cb.doKeyDown()};B.prototype.doKeyUp=function(){this.cb.doKeyUp()};B.prototype.doFocus=function(){this.focus()};B.prototype.focus=B.prototype.focus=function(){this.Fb&&this.Fb.focus()};
function Uj(a){if(null!==a.Fb){var b=a.Pb;if(0!==b.clientWidth&&0!==b.clientHeight){var c=a.Wk?a.Hd:0,d=a.Ij?a.Hd:0,e=a.jd;a.jd=a.computePixelRatio();a.jd!==e&&(a.gr=!0,a.Ce());if(b.clientWidth!==a.Jb+c||b.clientHeight!==a.Ob+d)a.hm=!0,a.ve=!0,b=a.Sb,null!==b&&b.ox&&a.xl===mh&&b.I(),a.Vd||a.Ce()}}}
function zk(a){var b=new wg;b.name="Background";a.ft(b);b=new wg;b.name="";a.ft(b);b=new wg;b.name="Foreground";a.ft(b);b=new wg;b.name="Adornment";b.Nc=!0;a.ft(b);b=new wg;b.name="Tool";b.Nc=!0;b.IE=!0;a.ft(b);b=new wg;b.name="Grid";b.xf=!1;b.jg=!1;b.Nc=!0;a.NG(b,a.Gl("Background"))}
function Gk(a){a.ud=new I(Hk);a.ud.name="GRID";var b=new X;b.Hb="LineH";b.stroke="lightgray";b.ub=.5;b.interval=1;a.ud.add(b);b=new X;b.Hb="LineH";b.stroke="gray";b.ub=.5;b.interval=5;a.ud.add(b);b=new X;b.Hb="LineH";b.stroke="gray";b.ub=1;b.interval=10;a.ud.add(b);b=new X;b.Hb="LineV";b.stroke="lightgray";b.ub=.5;b.interval=1;a.ud.add(b);b=new X;b.Hb="LineV";b.stroke="gray";b.ub=.5;b.interval=5;a.ud.add(b);b=new X;b.Hb="LineV";b.stroke="gray";b.ub=1;b.interval=10;a.ud.add(b);b=new D;b.add(a.ud);
b.If="Grid";b.Dn=0;b.lx=!1;b.HE=!1;b.jg=!1;b.ux="GRID";a.add(b);a.mb.remove(b);a.ud.visible=!1}B.prototype.wG=function(){this.Z.isEnabled?this.Z.rH(this):Ik(this.Z)};B.prototype.JC=function(a){this.Z.isEnabled?(this.Z.kz=!0,this.Z.mz=a.target.scrollTop,this.Z.lz=a.target.scrollLeft):Ik(this.Z)};
B.prototype.diagramScroll=B.prototype.rH=function(a){if(this.kz&&null!==this.Fb){this.hw=!0;var b=this.ad,c=this.xb,d=b.width,e=c.width,g=b.height,h=c.height,k=b.right,l=c.right,m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,r=this.scale,s;s=a.scrollLeft;if(this.mr)switch(this.jz){case "negative":s=s+a.scrollWidth-a.clientWidth;break;case "reverse":s=a.scrollWidth-s-a.clientWidth}var t=s;e<d||h<g?(s=z.Tb(this.position.x,this.position.y),this.ye&&this.lz!==t&&(s.x=t/r+p,this.lz=t),this.ze&&this.mz!==
a.scrollTop&&(s.y=a.scrollTop/r+b,this.mz=a.scrollTop),this.position=s,z.A(s),this.hm=this.hw=!1):(s=z.O(),a.zG&&this.ye&&(p<q&&(this.position=s.n(t+p,this.position.y)),k>l&&(this.position=s.n(-(this.lw.scrollWidth-this.Jb)+t-this.Jb/r+k,this.position.y))),a.AG&&this.ze&&(b<c&&(this.position=s.n(this.position.x,a.scrollTop+b)),m>n&&(this.position=s.n(this.position.x,-(this.lw.scrollHeight-this.Ob)+a.scrollTop-this.Ob/r+m))),z.A(s),Jk(this),this.hm=this.hw=!1,b=this.ad,c=this.xb,k=b.right,l=c.right,
m=b.bottom,n=c.bottom,p=b.x,q=c.x,b=b.y,c=c.y,e>=d&&p>=q&&k<=l&&(this.xs.style.width="1px"),h>=g&&b>=c&&m<=n&&(this.xs.style.height="1px"))}};B.prototype.computeBounds=B.prototype.sh=function(){0<this.rg.count&&Kk(this);return Lk(this)};
function Lk(a){if(a.tE.F()){var b=a.tE.copy();b.Dw(a.padding);return b}for(var c=!0,d=a.Yb.o,e=d.length,g=0;g<e;g++){var h=d[g];if(h.visible&&(!h.Nc||h.IE))for(var h=h.mb.o,k=h.length,l=0;l<k;l++){var m=h[l];m.lx&&m.isVisible()&&(m=m.W,m.F()&&(c?(c=!1,b=m.copy()):b.ri(m)))}}c&&(b=new w(0,0,0,0));b.Dw(a.padding);return b}
B.prototype.computePartsBounds=function(a){var b=null;for(a=a.i;a.next();){var c=a.value;c instanceof G||(c.Bf(),null===b?b=c.W.copy():b.ri(c.W))}return null===b?new w(NaN,NaN,0,0):b};
function Mk(a,b){if((b||a.fh)&&!a.Vc&&null!==a.Fb&&!a.Va.nf&&a.ad.F()){a.Vc=!0;var c=a.cm;b&&a.Yk!==mh&&(c=a.Yk);var d=c!==mh?Nk(a,c):a.scale,c=a.xb.copy(),e=a.Jb/d,g=a.Ob/d,h=null,k=a.Va;k.wc&&(h=a.sb.copy());a.position.Wa();var l=a.On;b&&!l.cd()&&a.mo.cd()&&(l=a.mo);Ok(a,a.sb,a.ad,e,g,l,b);a.position.freeze();null!==h&&gk(k,h,a.sb);a.scale=d;a.Vc=!1;d=a.xb;d.Mc(c)||a.fu(c,d)}}
function Nk(a,b){var c=a.wb.Tw;if(null===a.Fb)return c;a.Jj&&Pk(a,a.sh());var d=a.ad;if(!d.F())return c;var e=d.width,d=d.height,g=a.Jb,h=a.Ob,k=g/e,l=h/d;return b===Qk?(e=Math.min(l,k),e>c&&(e=c),e<a.Ah&&(e=a.Ah),e>a.zh&&(e=a.zh),e):b===Rk?(e=l>k?(h-a.Hd)/d:(g-a.Hd)/e,e>c&&(e=c),e<a.Ah&&(e=a.Ah),e>a.zh&&(e=a.zh),e):a.scale}B.prototype.zoomToFit=B.prototype.zoomToFit=function(){this.scale=Nk(this,Qk)};
B.prototype.zoomToRect=function(a,b){void 0===b&&(b=Qk);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Qk||b===Rk)if(isNaN(c))e=this.xb.height*this.scale/d;else if(isNaN(d))e=this.xb.width*this.scale/c;else var e=this.Jb,g=this.Ob,e=b===Rk?g/d>e/c?(g-(this.Ij?this.Hd:0))/d:(e-(this.Wk?this.Hd:0))/c:Math.min(g/d,e/c);this.scale=e;this.position=new N(a.x,a.y)}};z.defineProperty(B,{gA:null},function(){return this.Vc},function(a){this.Vc=a});
B.prototype.alignDocument=function(a,b){this.Jj&&Pk(this,this.sh());var c=this.ad,d=this.xb;this.position=new N(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY))};
function Ok(a,b,c,d,e,g,h){var k=b.x,l=b.y;if(h||a.MA===rk)g.cd()&&(d>c.width&&(k=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(l=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY))),g=a.AF,h=d-c.width,d<c.width+g.left+g.right?(k=Math.min(k+d/2,c.right+Math.max(h,g.right)-d/2),k=Math.max(k,c.left-Math.max(h,g.left)+d/2),k-=d/2):k>c.left?k=c.left:k<c.right-d&&(k=c.right-d),d=e-c.height,e<c.height+g.top+g.bottom?(l=Math.min(l+e/2,c.bottom+Math.max(d,g.bottom)-e/2),l=Math.max(l,c.top-Math.max(d,
g.top)+e/2),l-=e/2):l>c.top?l=c.top:l<c.bottom-e&&(l=c.bottom-e);b.x=isFinite(k)?k:-a.padding.left;b.y=isFinite(l)?l:-a.padding.top;null!==a.iF&&(a=a.iF(a,b),b.x=a.x,b.y=a.y)}B.prototype.findPartAt=B.prototype.Bt=function(a,b){var c=b?ii(this,a,function(a){return a.ca},function(a){return a.canSelect()}):ii(this,a,function(a){return a.ca});return c instanceof D?c:null};
B.prototype.findObjectAt=B.prototype.pe=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);Kk(this);for(var d=this.Yb.kn;d.next();){var e=d.value;if(e.visible&&(e=e.pe(a,b,c),null!==e))return e}return null};function ii(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=null);Kk(a);for(a=a.Yb.kn;a.next();){var e=a.value;if(e.visible&&!e.Nc&&(e=e.pe(b,c,d),null!==e))return e}return null}
B.prototype.findObjectsAt=B.prototype.lp=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof J||d instanceof K||(d=new K(O));Kk(this);for(var e=this.Yb.kn;e.next();){var g=e.value;g.visible&&g.lp(a,b,c,d)}return d};B.prototype.findObjectsIn=B.prototype.pk=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof J||e instanceof K||(e=new K(O));Kk(this);for(var g=this.Yb.kn;g.next();){var h=g.value;h.visible&&h.pk(a,b,c,d,e)}return e};
B.prototype.Wz=function(a,b,c,d,e,g){var h=new K(O);Kk(this);for(var k=this.Yb.kn;k.next();){var l=k.value;l.visible&&l.Wz(a,b,c,d,h,e,g)}return h};B.prototype.findObjectsNear=B.prototype.cn=function(a,b,c,d,e,g){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof J||e instanceof K)g=e;e=!0}g instanceof J||g instanceof K||(g=new K(O));Kk(this);for(var h=this.Yb.kn;h.next();){var k=h.value;k.visible&&k.cn(a,b,c,d,e,g)}return g};
B.prototype.acceptEvent=function(a){var b=this.Zc;this.Zc=this.Qb;this.Qb=b;Sk(this,this,a,b,a instanceof MouseEvent);return b};
function Sk(a,b,c,d,e){d.h=b;d.event=c;e?Tk(a,c,d):(d.ue=b.Qb.ue,d.ga=b.Qb.ga);a=0;c.ctrlKey&&(a+=1);c.altKey&&(a+=2);c.shiftKey&&(a+=4);c.metaKey&&(a+=8);d.yd=a;d.button=c.button;c.buttons&&(d.buttons=c.buttons);z.sk&&0===c.button&&c.ctrlKey&&(d.button=2);d.Fl=!1;d.up=!1;d.Pe=1;d.Dl=0;d.Gc=!1;d.bubbles=!1;d.timestamp=Date.now();d.Qt=!1;d.Tg=c.target.Z?c.target.Z:null;d.Ge=null}
function Uk(a,b,c,d,e){d.h=a;Tk(a,c,d);d.yd=0;d.button=0;d.buttons=1;d.Fl=!0;d.up=!1;d.Pe=1;d.Dl=0;d.Gc=!1;d.bubbles=!0;d.event=b;d.timestamp=Date.now();d.Qt=e;d.Tg=b.target.Z?b.target.Z:null;d.Ge=null;a.Fi=d.copy();Lh=null}
function Vk(a,b,c,d,e){var g=null;d.h=a;null!==c?((g=window.document.elementFromPoint(c.clientX,c.clientY))&&g.Z?g=g.Z:(c=b.changedTouches[0],g=a),d.Tg=g,Tk(a,c,d)):null!==a.Zc?(d.ga=a.Zc.ga,d.ue=a.Zc.ue,d.Tg=a.Zc.Tg):null!==a.Fi&&(d.ga=a.Fi.ga,d.ue=a.Fi.ue,d.Tg=a.Fi.Tg);d.yd=0;d.button=0;d.buttons=1;d.Fl=!1;d.up=!1;d.Pe=1;d.Dl=0;d.Gc=!1;d.bubbles=!1;d.event=b;d.timestamp=Date.now();d.Qt=e;d.Ge=null}
function ha(a,b,c){if(b.bubbles)return u&&u.DE&&z.trace("NOT handled "+c.type+" "+b.toString()),!0;u&&u.DE&&z.trace("handled "+c.type+" "+a.cb.name+" "+b.toString());void 0!==c.stopPropagation&&c.stopPropagation();(void 0===c.touches||2>c.touches.length)&&c.preventDefault();c.cancelBubble=!0;return!1}
B.prototype.nI=function(a){if(!this.Z.isEnabled)return!1;var b=this.Z.Qb;Sk(this.Z,this.Z,a,b,!1);b.key=String.fromCharCode(a.which);b.Fl=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key=
"Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.Z.doKeyDown();return 187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?ha(this.Z,b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)};
B.prototype.oI=function(a){if(!this.Z.isEnabled)return!1;var b=this.Z.Qb;Sk(this.Z,this.Z,a,b,!1);b.key=String.fromCharCode(a.which);b.up=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 93:a.preventDefault()}this.Z.doKeyUp();
return ha(this.Z,b,a)};B.prototype.ko=function(a){var b=this.Fb;if(null===b)return new N(0,0);var c=this.Jb,d=this.Ob,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left;a=a.clientY-d/b.height*b.top;return null!==this.Jd?(a=new N(c,a),tb(a,this.Jd),a):new N(c,a)};
function Tk(a,b,c){var d=a.Fb,e=a.Jb,g=a.Ob,h=0,k=0;null!==d&&(d=d.getBoundingClientRect(),h=b.clientX-e/d.width*d.left,k=b.clientY-g/d.height*d.top);c.ue.n(h,k);null!==a.Jd?(b=z.Tb(h,k),a.Jd.li(b),c.ga.assign(b),z.A(b)):c.ga.n(h,k)}B.prototype.invalidateDocumentBounds=B.prototype.yc=function(){this.Jj||(this.Jj=!0,this.Ce(!0))};function dk(a){a.Vd||Kk(a);a.Jj&&Pk(a,a.sh())}B.prototype.redraw=B.prototype.Sp=function(){this.Vc||this.Vd||(this.ta(),Wk(this),Jk(this),this.yc(),this.cg())};
B.prototype.isUpdateRequested=function(){return this.Wf};B.prototype.delayInitialization=function(a){void 0===a&&(a=null);var b=this.Va,c=b.isEnabled;b.pi();b.isEnabled=!1;pi(this);this.fh=!1;b.isEnabled=c;null!==a&&z.setTimeout(a,1)};B.prototype.requestUpdate=B.prototype.Ce=function(a){void 0===a&&(a=!1);if(!0!==this.Wf&&!(this.Vc||!1===a&&this.Vd)){this.Wf=!0;var b=this;requestAnimationFrame(function(){b.Wf&&b.cg()})}};
B.prototype.maybeUpdate=B.prototype.cg=function(){if(!this.ho||this.Wf)this.ho&&(this.ho=!1),pi(this)};function Xk(a,b){a.Va.nf||a.Vc||!a.hm||Ik(a)||(b&&Kk(a),Mk(a,!1))}
function pi(a){if(!a.Vd&&(a.Wf=!1,null!==a.Pb)){a.Vd=!0;var b=a.Va,c=a.SC;if(!b.so&&0!==c.length){for(var d=c.o,e=d.length,g=0;g<e;g++){var h=d[g];Yk(h,!1);h.Q()}c.clear()}c=a.jC;0<c.count&&(c.each(function(a){a.dB()}),c.clear());d=c=!1;b.nf&&(d=!0,c=a.Bb,a.Bb=!0);b.wc||Uj(a);Xk(a,!1);null!==a.ud&&(a.ud.visible&&!a.pv&&($k(a),a.pv=!0),!a.ud.visible&&a.pv&&(a.pv=!1));Kk(a);e=!1;if(!a.fh||a.Qu)a.fh?hl(a,!a.hv):(a.Wb("Initial Layout"),!1===b.isEnabled&&b.pi(),hl(a,!1)),e=!0;a.hv=!1;Kk(a);a.nz||b.nf||
dk(a);Xk(a,!0);e&&(a.fh||il(a),a.Ja("LayoutCompleted"));Kk(a);e&&!a.fh&&(a.fh=!0,a.Kd("Initial Layout"),a.Bb||a.pa.clear(),z.setTimeout(function(){a.ni=!1},1));jl(a);Tj(b);a.ff();d&&(a.Bb=c);a.Vd=!1}}z.w(B,{jn:null},function(){return this.fh});
function il(a){var b=a.Yb.o;a.Jf(b,b.length,a);a.Yk!==mh?a.scale=Nk(a,a.Yk):a.cm!==mh?a.scale=Nk(a,a.cm):(b=a.ZH,isFinite(b)&&0<b&&(a.scale=b));b=a.YH;if(b.F())a.position=b;else{b=z.O();b.ru(a.ad,a.XH);var c=a.xb,c=z.zk(0,0,c.width,c.height),d=z.O();d.ru(c,a.$H);d.n(b.x-d.x,b.y-d.y);a.position=d;z.dc(c);z.A(d);z.A(b);Wk(a);Xk(a,!0);Mk(a,!0)}a.Ja("InitialLayoutCompleted");$k(a)}
function Kk(a){if((a.Vd||!a.Va.nf)&&0!==a.rg.count)for(var b=0;23>b;b++){var c=a.rg.i;if(null===c||0===a.rg.count)break;a.rg=new K(O);a.dB(c,a.rg);u&&22===b&&z.trace("failure to validate parts")}}
B.prototype.dB=function(a,b){for(a.reset();a.next();){var c=a.value;!c.be()||c instanceof F||!c.isVisible()||(c.Ql()?(tj(c,Infinity,Infinity),c.Lc()):b.add(c))}for(a.reset();a.next();)c=a.value,c instanceof F&&c.isVisible()&&kl(this,c);for(a.reset();a.next();)c=a.value,c instanceof G&&c.isVisible()&&(c.Ql()?(tj(c,Infinity,Infinity),c.Lc()):b.add(c));for(a.reset();a.next();)c=a.value,c instanceof da&&c.isVisible()&&(c.Ql()?(tj(c,Infinity,Infinity),c.Lc()):b.add(c))};
function kl(a,b){for(var c=z.rb(),d=z.rb(),e=b.Hc;e.next();){var g=e.value;g.isVisible()&&(g instanceof F?(ml(g)||nl(g)||ol(g))&&kl(a,g):g instanceof G?g.Y===b||g.da===b?d.push(g):c.push(g):(tj(g,Infinity,Infinity),g.Lc()))}for(var e=c.length,h=0;h<e;h++)g=c[h],tj(g,Infinity,Infinity),g.Lc();z.xa(c);tj(b,Infinity,Infinity);b.Lc();e=d.length;for(h=0;h<e;h++)g=d[h],tj(g,Infinity,Infinity),g.Lc();z.xa(d)}B.prototype.Jf=function(a,b,c,d){var e=this.Va;if(this.Zk||e.nf)for(e=0;e<b;e++)a[e].Jf(c,d)};
B.prototype.ff=function(a,b){void 0===a&&(a=this.gd);void 0===b&&(b=null);null===this.Pb&&z.k("No div specified");var c=this.Fb;null===c&&z.k("No canvas specified");var d=this.Va;if(!d.wc&&(pl(this),"0"!==this.Pb.style.opacity)){var e=a!==this.gd,g=this.Yb.o,h=g.length,k=this;this.Jf(g,h,k);if(e)ca(a,!0),Jk(this);else if(!this.ve&&null===b&&!d.Kj)return;var h=this.sb,l=this.bc,m=Math.round(h.x*l)/l,n=Math.round(h.y*l)/l,d=this.Jd;d.reset();1!==l&&d.scale(l);0===h.x&&0===h.y||d.translate(-m,-n);l=
this.jd;z.hn?(c.width=c.width,ca(a,!0),a.scale(l,l)):(a.setTransform(1,0,0,1,0,0),a.scale(l,l),a.clearRect(0,0,this.Jb,this.Ob));a.setTransform(1,0,0,1,0,0);a.scale(l,l);a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);u&&u.cj&&u.kE(this,a);c=null!==b?function(c){var d=a,e=b;if(c.visible&&0!==c.Xc){var g=c.mb.o,h=g.length;if(0!==h){1!==c.Xc&&(d.globalAlpha=c.Xc);c=c.Xv;c.length=0;for(var l=k.scale,m=0;m<h;m++){var n=g[m];if(ik(n)&&!e.contains(n)){if(n instanceof G){var A=n;A.rc&&c.push(A);if(!1===A.Dg)continue}A=
n.W;1<A.width*l||1<A.height*l?n.ff(d,k):kk(n,d)}}d.globalAlpha=1}}}:function(b){b.ff(a,k)};ql(this,a);h=g.length;for(m=0;m<h;m++)a.setTransform(1,0,0,1,0,0),a.scale(l,l),a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),c(g[m]);this.Xk?this.Xk.Zl(this)&&this.Fy():this.ko=function(){return new N(0,0)};u&&(u.Sz||u.cj)&&u.Rz(a,this,d);e?(ca(this.gd,!0),Jk(this)):this.ve=this.Zk=!1}};
function rl(a,b,c,d,e){null===a.Pb&&z.k("No div specified");var g=a.Fb;null===g&&z.k("No canvas specified");if(!a.Va.wc){var h=a.gd;if(a.ve){pl(a);var k=a.jd;z.hn?(g.width=g.width,ca(h,!0)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.Jb*k,a.Ob*k));h.Jt=!1;h.drawImage(a.Ey.Ld,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.sb;var g=a.bc,l=Math.round(e.x*g)/g,m=Math.round(e.y*g)/g;d=a.Jd;d.reset();1!==g&&d.scale(g);0===e.x&&0===e.y||d.translate(-l,-m);h.save();h.beginPath();e=c.length;for(g=0;g<e;g++)l=
c[g],0!==l.width&&0!==l.height&&h.rect(Math.floor(l.x),Math.floor(l.y),Math.ceil(l.width),Math.ceil(l.height));h.clip();h.setTransform(1,0,0,1,0,0);h.scale(k,k);h.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);u&&u.cj&&u.kE(a,h);c=a.Yb.o;e=c.length;a.Jf(c,e,a);ql(a,h);for(g=0;g<e;g++)lk(c[g],h,a,b);h.restore();ca(h,!0);u&&(u.Sz||u.cj)&&u.Rz(h,a,d);a.Xk?a.Xk.Zl(a)&&a.Fy():a.ko=function(){return new N(0,0)};a.Zk=!1;a.ve=!1;a.HA()}}}
function sl(a,b,c,d,e,g,h,k,l,m){null===a.Pb&&z.k("No div specified");null===a.Fb&&z.k("No canvas specified");void 0===h&&(h=null);void 0===k&&(k=null);void 0===l&&(l=!1);void 0===m&&(m=!1);pl(a);ca(a.gd,!0);Jk(a);a.Uy=!0;var n=new w(g.x,g.y,d.width/e,d.height/e),p=n.copy();p.Dw(c);$k(a,p);Kk(a);var p=a.Yb.o,q=p.length;a.Jf(p,q,a,n);n=a.jd;b.setTransform(1,0,0,1,0,0);b.scale(n,n);b.clearRect(0,0,d.width,d.height);null!==k&&""!==k&&(b.fillStyle=k,b.fillRect(0,0,d.width,d.height));d=z.Hh();d.reset();
d.translate(c.left,c.top);d.scale(e);0===g.x&&0===g.y||d.translate(-g.x,-g.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);z.jf(d);ql(a,b);if(null!==h){var r=new K(O);c=h.i;for(c.reset();c.next();)e=c.value,!1===m&&"Grid"===e.layer.name||null===e||r.add(e);c=function(c){var d=l;if(c.visible&&0!==c.Xc&&(void 0===d&&(d=!0),d||!c.Nc)){var d=c.mb.o,e=d.length;if(0!==e){1!==c.Xc&&(b.globalAlpha=c.Xc);c=c.Xv;c.length=0;for(var g=a.scale,h=0;h<e;h++){var k=d[h];if(ik(k)&&r.contains(k)){if(k instanceof
G){var m=k;m.rc&&c.push(m);if(!1===m.Dg)continue}m=k.W;1<m.width*g||1<m.height*g?k.ff(b,a):kk(k,b)}}b.globalAlpha=1}}}}else if(!l&&m){var s=a.tp.ca,t=s.layer;c=function(c){c===t?s.ff(b,a):c.ff(b,a,l,m)}}else c=function(c){c.ff(b,a,l,m)};for(e=0;e<q;e++)c(p[e]);a.Uy=!1;a.Xk?a.Xk.Zl(a)&&a.Fy():a.ko=function(){return new N(0,0)};ca(a.gd,!0);Jk(a);a.Jf(p,q,a);$k(a)}B.prototype.getRenderingHint=B.prototype.ij=function(a){return this.Yj[a]};
B.prototype.setRenderingHint=B.prototype.jJ=function(a,b){this.Yj[a]=b;this.Sp()};B.prototype.resetRenderingHints=B.prototype.qF=function(){this.Yj=new ma;this.Yj.drawShadows=!0;this.Yj.textGreeking=!0;this.Yj.viewportOptimizations=z.OE?!1:!0;this.Yj.temporaryPixelRatio=!0;this.Yj.pictureRatioOptimization=!0};function ql(a,b){var c=a.Yj;if(null!==c){if(void 0!==c.imageSmoothingEnabled){var d=!!c.imageSmoothingEnabled;b.Jt=d;b.YK=d}c=c.defaultFont;void 0!==c&&null!==c&&(b.font=c)}}
B.prototype.getInputOption=B.prototype.rp=function(a){return this.po[a]};B.prototype.setInputOption=function(a,b){this.po[a]=b};B.prototype.resetInputOptions=B.prototype.pF=function(){this.po=new ma;this.po.extraTouchArea=10;this.po.extraTouchThreshold=10;this.po.hasGestureZoom=!0};B.prototype.setProperties=function(a){z.qu(this,a)};function jl(a){if(0===a.pa.Ih&&0!==a.Sk.count){for(;0<a.Sk.count;){var b=a.Sk;a.Sk=new na(G,w);for(b=b.i;b.next();){var c=b.key;Ri(c,b.value);c.qe()}}a.ta()}}
B.prototype.ta=function(a){void 0===a&&(a=null);if(null===a)this.ve=!0,this.Ce();else{var b=this.xb;null!==a&&a.F()&&b.Jg(a)&&(this.ve=!0,this.Ce())}for(b=this.Yv.i;b.next();)b.value.ta(a)};
B.prototype.GE=function(a,b){if(!0!==this.ve){this.ve=!0;var c=!0===this.ij("temporaryPixelRatio");if(!0===this.ij("viewportOptimizations")&&this.MA!==tl&&this.AF.Xw(0,0,0,0)&&b.width===a.width&&b.height===a.height){var d=this.scale,e=z.lg(),g=Math.max(a.x,b.x),h=Math.max(a.y,b.y),k=Math.min(a.x+a.width,b.x+b.width),l=Math.min(a.y+a.height,b.y+b.height);e.x=g;e.y=h;e.width=Math.max(0,k-g)*d;e.height=Math.max(0,l-h)*d;if(0<e.width&&0<e.height){if(!this.Vd&&(this.Wf=!1,null!==this.Pb)){this.Vd=!0;jl(this);
this.ad.F()||Pk(this,this.sh());var m=this.Fb;if(null!==m){var n=this.jd,h=this.Jb*n,k=this.Ob*n,g=this.scale*n,d=Math.round(Math.round(b.x*g)-Math.round(a.x*g)),g=Math.round(Math.round(b.y*g)-Math.round(a.y*g)),l=this.Ey,p=this.aC;l.width!==h&&(l.width=h);l.height!==k&&(l.height=k);p.clearRect(0,0,h,k);var l=190*this.jd,q=70*this.jd,r=Math.max(d,0),s=Math.max(g,0),t=Math.floor(h-r),v=Math.floor(k-s);p.Jt=!1;p.drawImage(m.Ld,r,s,t,v,0,0,t,v);this.Xk.Zl(this)&&p.clearRect(0,0,l,q);var m=z.rb(),p=z.rb(),
v=Math.abs(d),t=Math.abs(g),x=0===r?0:h-v,r=z.Tb(x,0),v=z.Tb(v+x,k);p.push(new w(Math.min(r.x,v.x),Math.min(r.y,v.y),Math.abs(r.x-v.x),Math.abs(r.y-v.y)));var y=this.Jd;y.reset();y.scale(n,n);1!==this.bc&&y.scale(this.bc);n=this.sb;(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&y.translate(-n.x,-n.y);tb(r,y);tb(v,y);m.push(new w(Math.min(r.x,v.x),Math.min(r.y,v.y),Math.abs(r.x-v.x),Math.abs(r.y-v.y)));x=0===s?0:k-t;r.n(0,x);v.n(h,t+x);p.push(new w(Math.min(r.x,v.x),Math.min(r.y,v.y),Math.abs(r.x-
v.x),Math.abs(r.y-v.y)));tb(r,y);tb(v,y);m.push(new w(Math.min(r.x,v.x),Math.min(r.y,v.y),Math.abs(r.x-v.x),Math.abs(r.y-v.y)));this.Xk.Zl(this)&&(h=0<d?0:-d,k=0<g?0:-g,r.n(h,k),v.n(l+h,q+k),p.push(new w(Math.min(r.x,v.x),Math.min(r.y,v.y),Math.abs(r.x-v.x),Math.abs(r.y-v.y))),tb(r,y),tb(v,y),m.push(new w(Math.min(r.x,v.x),Math.min(r.y,v.y),Math.abs(r.x-v.x),Math.abs(r.y-v.y))));z.A(r);z.A(v);Xk(this,!1);rl(this,m,p,d,g);z.xa(m);z.xa(p);this.Vd=!1}}}else this.cg();z.dc(e);c&&(this.dk=1,this.cg(),
this.dk=null,this.HA())}else c?(this.dk=1,this.cg(),this.dk=null,this.HA()):this.cg()}};function Wk(a){!1===a.hm&&(a.hm=!0)}function Jk(a){!1===a.Zk&&(a.Zk=!0)}function pl(a){!1!==a.gr&&(a.gr=!1,ul(a,a.Jb,a.Ob))}function ul(a,b,c){var d=a.Fb,e=a.jd,g=b*e,e=c*e;if(d.width!==g||d.height!==e)d.width=g,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.ve=!0,ca(a.gd,!0)}function ph(a){var b=a.Jb,c=a.Ob;a=a.Fb.getBoundingClientRect();return z.Tb(b/a.width*a.left,c/a.height*a.top)}
function Ik(a){var b=a.Fb;if(null===b)return!0;var c=a.Pb,d=a.Jb,e=a.Ob,g=a.wD.copy();if(!g.F())return!0;var h=!1,k=a.Wk?a.Hd:0,l=a.Ij?a.Hd:0,m=c.clientWidth||d+k,c=c.clientHeight||e+l;if(m!==d+k||c!==e+l)a.Wk=!1,a.Ij=!1,l=k=0,a.Jb=m,a.Ob=c,h=a.gr=!0;a.hm=!1;var n=a.xb,p=a.ad,m=p.width,c=p.height,q=n.width,r=n.height,s=p.x,t=n.x,v=p.right,x=n.right+k,y=p.y,A=n.y,p=p.bottom,n=n.bottom+l,C="1px",L="1px",H=a.scale;a.MA===rk&&m<q+k&&c<r+l||(a.cA&&a.ye&&(C=1,s+1<t&&(C=Math.max((t-s)*H+a.Jb,C)),v>x+1&&
(C=Math.max((v-x)*H+a.Jb,C)),q+k+1<m&&(C=Math.max((m-q+k)*H+a.Jb,C)),C+="px"),a.dA&&a.ze&&(L=1,y+1<A&&(L=Math.max((A-y)*H+a.Ob,L)),p>n+1&&(L=Math.max((p-n)*H+a.Ob,L)),r+l+1<c&&(L=Math.max((c-r+l)*H+a.Ob,L)),L+="px"));k="1px"!==C;l="1px"!==L;k&&l||!k&&!l||(l&&(x-=a.Hd),k&&(n-=a.Hd),a.cA&&a.ye&&(C=1,s+1<t&&(C=Math.max((t-s)*H+a.Jb,C)),v>x+1&&(C=Math.max((v-x)*H+a.Jb,C)),q+1<m&&(C=Math.max((m-q)*H+a.Jb,C)),C+="px"),k="1px"!==C,l=k!==a.Ij?a.Ob-a.Hd:a.Ob,a.dA&&a.ze&&(L=1,y+1<A&&(L=Math.max((A-y)*H+l,L)),
p>n+1&&(L=Math.max((p-n)*H+l,L)),r+1<c&&(L=Math.max((c-r)*H+l,L)),L+="px"),l="1px"!==L);if(a.hw&&k===a.Ij&&l===a.Wk)return d===a.Jb&&e===a.Ob||a.cg(),!1;k!==a.Ij&&(a.Ob="1px"===C?a.Ob+a.Hd:Math.max(a.Ob-a.Hd,1),h=!0);a.Ij=k;a.xs.style.width=C;l!==a.Wk&&(a.Jb="1px"===L?a.Jb+a.Hd:Math.max(a.Jb-a.Hd,1),h=!0,a.mr&&(k=z.O(),l?(b.style.left=a.Hd+"px",a.position=k.n(a.sb.x+a.Hd/a.scale,a.sb.y)):(b.style.left="0px",a.position=k.n(a.sb.x-a.Hd/a.scale,a.sb.y)),z.A(k)));a.Wk=l;a.xs.style.height=L;b=a.lw;k=b.scrollLeft;
a.cA&&a.ye&&(q+1<m?k=(a.position.x-s)*H:s+1<t?k=b.scrollWidth-b.clientWidth:v>x+1&&(k=a.position.x*H));if(a.mr)switch(a.jz){case "negative":k=-(b.scrollWidth-k-b.clientWidth);break;case "reverse":k=b.scrollWidth-k-b.clientWidth}b.scrollLeft=k;a.dA&&a.ze&&(r+1<c?b.scrollTop=(a.position.y-y)*H:y+1<A?b.scrollTop=b.scrollHeight-b.clientHeight:p>n+1&&(b.scrollTop=a.position.y*H));h&&(a.gr=!0);m=a.Jb;c=a.Ob;b.style.width=m+(a.Wk?a.Hd:0)+"px";b.style.height=c+(a.Ij?a.Hd:0)+"px";a.kz=!1;return d!==m||e!==
c||a.Va.wc?(n=a.xb,a.fu(g,n,h),!1):!0}
B.prototype.add=B.prototype.add=function(a){z.l(a,D,B,"add:part");var b=a.h;if(b!==this){null!==b&&z.k("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());this.lq&&(a.dl="Tool");var c=a.If,b=this.Gl(c);null===b&&(b=this.Gl(""));null===b&&z.k('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=b.xp(99999999,a,a.h===this),0<=c&&this.Rc(Wf,"parts",b,null,a,null,c),b.Nc||this.yc(),a.I(vl),c=a.Ut,null!==
c&&c(a,null,b))}};
B.prototype.xp=function(a){if(a instanceof E){if(this.Eo.add(a),a instanceof F){var b=a.Qa;null===b?this.pl.add(a):b.vm.add(a);b=a.Sb;null!==b&&(b.h=this)}}else a instanceof G?this.yo.add(a):a instanceof da||this.mb.add(a);var c=this;wl(a,function(a){xl(c,a)});a.Lb&&a.Q();b=a.data;null!==b&&(a instanceof da||(a instanceof G?this.Rk.add(b,a):this.Ai.add(b,a)),wl(a,function(a){yl(c,a)}));!0!==nl(a)&&!0!==ol(a)||this.rg.add(a);zl(a,!0,this);Al(a)?(a.W.F()&&this.ta(mk(a,a.W)),this.yc()):a.isVisible()&&
a.W.F()&&this.ta(mk(a,a.W));this.Ce()};
B.prototype.Ve=function(a){a.pt();if(a instanceof E){if(this.Eo.remove(a),a instanceof F){var b=a.Qa;null===b?this.pl.remove(a):b.vm.remove(a);b=a.Sb;null!==b&&(b.h=null)}}else a instanceof G?this.yo.remove(a):a instanceof da||this.mb.remove(a);var c=this;wl(a,function(a){Bl(c,a)});b=a.data;null!==b&&(a instanceof da||(a instanceof G?this.Rk.remove(b):this.Ai.remove(b)),wl(a,function(a){Cl(c,a)}));this.rg.remove(a);Al(a)?(a.W.F()&&this.ta(mk(a,a.W)),this.yc()):a.isVisible()&&a.W.F()&&this.ta(mk(a,
a.W));this.Ce()};B.prototype.remove=B.prototype.remove=function(a){z.l(a,D,B,"remove:part");a.jb=!1;a.yh=!1;var b=a.layer;if(null!==b&&b.h===this){a.I(Dl);a.bn();var c=b.Ve(-1,a,!1);0<=c&&this.Rc(Xf,"parts",b,a,null,c,null);c=a.Ut;null!==c&&c(a,b,null)}};B.prototype.removeParts=B.prototype.JA=function(a,b){if(z.isArray(a))for(var c=z.ab(a),d=0;d<c;d++){var e=z.Ya(a,d);b&&!e.canDelete()||this.remove(e)}else for(e=new K(D),e.$c(a),c=e.i;c.next();)e=c.value,b&&!e.canDelete()||this.remove(e)};
B.prototype.copyParts=B.prototype.gp=function(a,b,c){return this.wb.gp(a,b,c)};B.prototype.moveParts=B.prototype.moveParts=function(a,b,c){z.l(b,N,B,"moveParts:offset");var d=this.gb;if(null!==d){d=d.me;null===d&&(d=new lh,d.Sc(this));var e=new na(D,Object);if(null!==a)a=a.i;else{for(a=this.oi;a.next();)Oh(d,e,a.value,c);for(a=this.Mg;a.next();)Oh(d,e,a.value,c);a=this.links}for(;a.next();)Oh(d,e,a.value,c);d.moveParts(e,b,c)}};
function El(a,b,c){z.l(b,wg,B,"addLayer:layer");null!==b.h&&b.h!==a&&z.k("Cannot share a Layer with another Diagram: "+b+" of "+b.h);null===c?null!==b.h&&z.k("Cannot add an existing Layer to this Diagram again: "+b):(z.l(c,wg,B,"addLayer:existingLayer"),c.h!==a&&z.k("Existing Layer must be in this Diagram: "+c+" not in "+c.h),b===c&&z.k("Cannot move a Layer before or after itself: "+b));if(b.h!==a){b=b.name;a=a.Yb;c=a.count;for(var d=0;d<c;d++)a.ea(d).name===b&&z.k("Cannot add Layer with the name '"+
b+"'; a Layer with the same name is already present in this Diagram.")}}B.prototype.addLayer=B.prototype.ft=function(a){El(this,a,null);a.Sc(this);var b=this.Yb,c=b.count-1;if(!a.Nc)for(;0<=c&&b.ea(c).Nc;)c--;b.Md(c+1,a);null!==this.ie&&this.Rc(Wf,"layers",this,null,a,null,c+1);this.ta();this.yc()};
B.prototype.addLayerBefore=B.prototype.NG=function(a,b){El(this,a,b);a.Sc(this);var c=this.Yb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.ie&&this.Rc(Xf,"layers",this,a,null,d,null));for(var e=c.count,g=0;g<e;g++)if(c.ea(g)===b){c.Md(g,a);break}null!==this.ie&&this.Rc(Wf,"layers",this,null,a,null,g);this.ta();0>d&&this.yc()};
B.prototype.addLayerAfter=function(a,b){El(this,a,b);a.Sc(this);var c=this.Yb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.ie&&this.Rc(Xf,"layers",this,a,null,d,null));for(var e=c.count,g=0;g<e;g++)if(c.ea(g)===b){c.Md(g+1,a);break}null!==this.ie&&this.Rc(Wf,"layers",this,null,a,null,g+1);this.ta();0>d&&this.yc()};
B.prototype.removeLayer=function(a){z.l(a,wg,B,"removeLayer:layer");a.h!==this&&z.k("Cannot remove a Layer from another Diagram: "+a+" of "+a.h);if(""!==a.name){var b=this.Yb,c=b.indexOf(a);if(b.remove(a)){for(b=a.mb.copy().i;b.next();){var d=b.value,e=d.If;d.If=e!==a.name?e:""}null!==this.ie&&this.Rc(Xf,"layers",this,a,null,c,null);this.ta();this.yc()}}};B.prototype.findLayer=B.prototype.Gl=function(a){for(var b=this.ln;b.next();){var c=b.value;if(c.name===a)return c}return null};
B.prototype.addModelChangedListener=B.prototype.PG=function(a){z.g(a,"function",B,"addModelChangedListener:listener");null===this.hh&&(this.hh=new J("function"));this.hh.add(a);this.ha.Qm(a)};B.prototype.removeModelChangedListener=function(a){z.g(a,"function",B,"removeModelChangedListener:listener");null!==this.hh&&(this.hh.remove(a),0===this.hh.count&&(this.hh=null));this.ha.iu(a)};
B.prototype.addChangedListener=B.prototype.Qm=function(a){z.g(a,"function",B,"addChangedListener:listener");null===this.ui&&(this.ui=new J("function"));this.ui.add(a)};B.prototype.removeChangedListener=B.prototype.iu=function(a){z.g(a,"function",B,"removeChangedListener:listener");null!==this.ui&&(this.ui.remove(a),0===this.ui.count&&(this.ui=null))};
B.prototype.Lw=function(a){this.Bb||this.pa.CE(a);a.Dc!==Vf&&(this.ni=!0);if(null!==this.ui){var b=this.ui,c=b.length;if(1===c)b=b.ea(0),b(a);else if(0!==c)for(var d=b.jc(),e=0;e<c;e++)b=d[e],b(a)}};B.prototype.raiseChangedEvent=B.prototype.Rc=function(a,b,c,d,e,g,h){void 0===g&&(g=null);void 0===h&&(h=null);var k=new Tf;k.h=this;k.Dc=a;k.propertyName=b;k.object=c;k.oldValue=d;k.Ng=g;k.newValue=e;k.Lg=h;this.Lw(k)};
B.prototype.raiseChanged=B.prototype.j=function(a,b,c,d,e){this.Rc(Uf,a,this,b,c,d,e)};z.w(B,{Va:"animationManager"},function(){return this.sB});z.w(B,{pa:"undoManager"},function(){return this.ie.pa});z.defineProperty(B,{Bb:"skipsUndoManager"},function(){return this.Wi},function(a){z.g(a,"boolean",B,"skipsUndoManager");this.Wi=a;this.ie.Wi=a});z.defineProperty(B,{Pz:"delaysLayout"},function(){return this.Ay},function(a){this.Ay=a});
B.prototype.Um=function(a,b){if(null!==a&&a.h===this){var c=this.Ee;try{this.Ee=!0;var d=a.Dc,e;if(d===Uf){var g=a.object,h=a.propertyName,k=a.na(b);z.Sa(g,h,k);if(g instanceof O){var l,m=g.ca;null!==m&&m.ae()}this.ni=!0}else if(d===Wf){var n=a.object,p=a.Lg,g=a.newValue;if(n instanceof I)if("number"===typeof p&&g instanceof O){l=g;var q=n;b?q.Ve(p):q.Md(p,l);m=n.ca;null!==m&&m.ae()}else{if("number"===typeof p&&g instanceof Ig){var r=g,q=n;b?r.re?q.oF(p):q.kF(p):(e=r.re?q.$d(r.index):q.Zd(r.index),
e.tt(r))}}else if(n instanceof wg){var s=!0===a.Ng;if("number"===typeof p&&g instanceof D){var m=g,t=n;b?(m.ae(),t.Ve(s?p:-1,m,s)):t.xp(p,m,s)}}else if(n instanceof B){if("number"===typeof p&&g instanceof wg){var v=g;b?this.Yb.dd(p):(d=v,d.Sc(this),this.Yb.Md(p,d))}}else z.k("unknown ChangedEvent.Insert object: "+a.toString());this.ni=!0}else d===Xf?(n=a.object,p=a.Ng,g=a.oldValue,n instanceof I?"number"===typeof p&&g instanceof O?(q=n,b?q.Md(p,g):q.Ve(p)):"number"===typeof p&&g instanceof Ig&&(r=
g,q=n,b?(e=r.re?q.$d(r.index):q.Zd(r.index),e.tt(r)):r.re?q.oF(p):q.kF(p)):n instanceof wg?(s=!0===a.Lg,"number"===typeof p&&g instanceof D&&(m=g,t=n,b?t.xp(p,m,s):(m.ae(),t.Ve(s?p:-1,m,s)))):n instanceof B?"number"===typeof p&&g instanceof wg&&(v=g,b?(d=v,d.Sc(this),this.Yb.Md(p,d)):this.Yb.dd(p)):z.k("unknown ChangedEvent.Remove object: "+a.toString()),this.ni=!0):d!==Vf&&z.k("unknown ChangedEvent: "+a.toString())}finally{this.Ee=c}}};B.prototype.startTransaction=B.prototype.Wb=function(a){return this.pa.Wb(a)};
B.prototype.commitTransaction=B.prototype.Kd=function(a){return this.pa.Kd(a)};B.prototype.rollbackTransaction=B.prototype.Vp=function(){return this.pa.Vp()};B.prototype.updateAllTargetBindings=B.prototype.dG=function(a){void 0===a&&(a="");for(var b=this.oi;b.next();)b.value.Mb(a);for(b=this.Mg;b.next();)b.value.Mb(a);for(b=this.links;b.next();)b.value.Mb(a)};
B.prototype.updateAllRelationshipsFromData=B.prototype.AJ=function(){if(0<arguments.length){for(var a=this.ha,b=new K,c=a.hg,d=0;d<c.length;d++){var e=c[d];b.add(e)}var g=[];this.Mg.each(function(a){null===a.data||b.contains(a.data)||g.push(a.data)});this.oi.each(function(a){null===a.data||b.contains(a.data)||g.push(a.data)});g.forEach(function(b){Dg(a,b,!1)});for(d=0;d<c.length;d++){var e=c[d],h=this.vh(e);null===h&&Cg(a,e,!1)}if(a instanceof V){for(var k=new K,c=a.Kg,d=0;d<c.length;d++)e=c[d],k.add(e);
var l=[];this.links.each(function(a){null===a.data||k.contains(a.data)||l.push(a.data)});l.forEach(function(b){Zg(a,b,!1)});for(d=0;d<c.length;d++)e=c[d],h=this.$f(e),null===h&&Mg(a,e,!1)}}for(d=this.oi;d.next();)h=d.value,h.updateRelationshipsFromData();for(d=this.Mg;d.next();)d.value.updateRelationshipsFromData();for(d=this.links;d.next();)h=d.value,h.updateRelationshipsFromData()};
function Fl(a,b,c){if(a.Vc||a.Vd)a.bc=c,c=a.Va,c.wc&&hk(c,b,a.bc);else if(a.Vc=!0,null===a.Fb)a.bc=c;else{var d=a.xb.copy(),e=a.Jb,g=a.Ob;d.width=a.Jb/b;d.height=a.Ob/b;var h=a.$l.x,k=a.$l.y,l=a.WD;isNaN(h)&&(l.lj()?l.vp(qc)?h=0:l.vp(sc)&&(h=e-1):h=l.cd()?l.x*(e-1):e/2);isNaN(k)&&(l.lj()?l.vp(pc)?k=0:l.vp(tc)&&(k=g-1):k=l.cd()?l.y*(g-1):g/2);null!==a.zF&&(c=a.zF(a,c));c<a.Ah&&(c=a.Ah);c>a.zh&&(c=a.zh);e=z.Tb(a.sb.x+h/b-h/c,a.sb.y+k/b-k/c);a.position=e;z.A(e);a.bc=c;a.fu(d,a.xb);a.Vc=!1;Mk(a,!1);c=
a.Va;c.wc&&hk(c,b,a.bc);a.ta();Wk(a)}}B.prototype.fu=function(a,b,c){if(!a.N(b)){void 0===c&&(c=!1);c||Wk(this);Jk(this);var d=this.Sb;null===d||!d.ox||this.xl!==mh||c||a.width===b.width&&a.height===b.height||d.I();d=this.cb;!0===this.jm&&d instanceof gh&&(this.R.ga=this.bG(this.R.ue),Pj(d,this));this.Vc||this.GE(a,b);$k(this);this.Ja("ViewportBoundsChanged",c?z.yj:null,a)}};
function $k(a,b){void 0===b&&(b=null);var c=a.ud;if(null!==c&&c.visible){for(var d=z.Xl(),e=1,g=1,h=c.va.o,k=h.length,l=0;l<k;l++){var m=h[l],n=m.interval;2>n||(Gl(m.Hb)?g=g*n/ff(g,n):e=e*n/ff(e,n))}h=c.gx;d.n(g*h.width,e*h.height);h=g=l=k=0;if(null!==b)k=b.width,l=b.height,g=b.x,h=b.y;else{e=z.lg();g=a.xb;e.n(g.x,g.y,g.width,g.height);for(h=a.Yv.i;h.next();)g=h.value.xb,g.F()&&Hb(e,g.x,g.y,g.width,g.height);if(!e.F()){z.dc(e);return}k=e.width;l=e.height;g=e.x;h=e.y;z.dc(e)}c.width=k+2*d.width;c.height=
l+2*d.height;e=z.O();jb(g,h,0,0,d.width,d.height,e);e.offset(-d.width,-d.height);z.qk(d);c.ca.location=e;z.A(e)}}B.prototype.clearSelection=B.prototype.Nw=function(){var a=0<this.selection.count;a&&this.Ja("ChangingSelection");kh(this);a&&this.Ja("ChangedSelection")};function kh(a){a=a.selection;if(0<a.count){for(var b=a.jc(),c=b.length,d=0;d<c;d++)b[d].jb=!1;a.Wa();a.clear();a.freeze()}}
B.prototype.select=B.prototype.select=function(a){null!==a&&(z.l(a,D,B,"select:part"),a.layer.h===this&&(!a.jb||1<this.selection.count)&&(this.Ja("ChangingSelection"),kh(this),a.jb=!0,this.Ja("ChangedSelection")))};
B.prototype.selectCollection=B.prototype.EF=function(a){this.Ja("ChangingSelection");kh(this);if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++){var d=z.Ya(a,c);d instanceof D||z.k("Diagram.selectCollection given something that is not a Part: "+d);d.jb=!0}else for(a=a.i;a.next();)d=a.value,d instanceof D||z.k("Diagram.selectCollection given something that is not a Part: "+d),d.jb=!0;this.Ja("ChangedSelection")};
B.prototype.clearHighlighteds=B.prototype.PD=function(){var a=this.gn;if(0<a.count){for(var b=a.jc(),c=b.length,d=0;d<c;d++)b[d].yh=!1;a.Wa();a.clear();a.freeze()}};B.prototype.highlight=function(a){null!==a&&a.layer.h===this&&(z.l(a,D,B,"highlight:part"),!a.yh||1<this.gn.count)&&(this.PD(),a.yh=!0)};
B.prototype.highlightCollection=function(a){this.PD();if(z.isArray(a))for(var b=z.ab(a),c=0;c<b;c++){var d=z.Ya(a,c);d instanceof D||z.k("Diagram.highlightCollection given something that is not a Part: "+d);d.yh=!0}else for(a=a.i;a.next();)d=a.value,d instanceof D||z.k("Diagram.highlightCollection given something that is not a Part: "+d),d.yh=!0};
B.prototype.scroll=B.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var d="up"===b||"down"===b,e=0;if("pixel"===a)e=c;else if("line"===a)e=c*(d?this.ou:this.nu);else if("page"===a)a=d?this.xb.height:this.xb.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.ou:this.nu),0),e*=c);else{if("document"===a){e=this.ad;d=this.xb;c=z.O();"up"===b?this.position=c.n(d.x,e.y):"left"===b?this.position=c.n(e.x,d.y):"down"===b?this.position=c.n(d.x,e.bottom-d.height):"right"===b&&(this.position=c.n(e.right-d.width,
d.y));z.A(c);return}z.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+a)}e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:z.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+b);this.position=c};B.prototype.scrollToRect=B.prototype.eJ=function(a){var b=this.xb;b.nk(a)||(a=a.yl,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};
B.prototype.centerRect=B.prototype.XG=function(a){var b=this.xb;a=a.yl;a.x-=b.width/2;a.y-=b.height/2;this.position=a};B.prototype.transformDocToView=B.prototype.aB=function(a){var b=this.Jd;b.reset();1!==this.bc&&b.scale(this.bc);var c=this.sb;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return a.copy().transform(this.Jd)};
B.prototype.transformViewToDoc=B.prototype.bG=function(a){var b=this.Jd;b.reset();1!==this.bc&&b.scale(this.bc);var c=this.sb;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return tb(a.copy(),this.Jd)};var mh;B.None=mh=z.s(B,"None",0);var Qk;B.Uniform=Qk=z.s(B,"Uniform",1);var Rk;B.UniformToFill=Rk=z.s(B,"UniformToFill",2);var Bi;B.CycleAll=Bi=z.s(B,"CycleAll",10);var Fi;B.CycleNotDirected=Fi=z.s(B,"CycleNotDirected",11);var Hi;
B.CycleNotDirectedFast=Hi=z.s(B,"CycleNotDirectedFast",12);var Ii;B.CycleNotUndirected=Ii=z.s(B,"CycleNotUndirected",13);var Ci;B.CycleDestinationTree=Ci=z.s(B,"CycleDestinationTree",14);var Ei;B.CycleSourceTree=Ei=z.s(B,"CycleSourceTree",15);var rk;B.DocumentScroll=rk=z.s(B,"DocumentScroll",1);var tl;B.InfiniteScroll=tl=z.s(B,"InfiniteScroll",2);var tk;B.TreeParentCollapsed=tk=z.s(B,"TreeParentCollapsed",1);B.AllParentsCollapsed=z.s(B,"AllParentsCollapsed",2);
z.defineProperty(B,{BJ:"validCycle"},function(){return this.zw},function(a){var b=this.zw;b!==a&&(z.Ba(a,B,B,"validCycle"),this.zw=a,this.j("validCycle",b,a))});z.w(B,{ln:"layers"},function(){return this.Yb.i});z.defineProperty(B,{Ef:"isModelReadOnly"},function(){var a=this.ie;return null===a?!1:a.ib},function(a){var b=this.ie;null!==b&&(b.ib=a)});
z.defineProperty(B,{ib:"isReadOnly"},function(){return this.Hi},function(a){var b=this.Hi;b!==a&&(z.g(a,"boolean",B,"isReadOnly"),this.Hi=a,this.j("isReadOnly",b,a))});z.defineProperty(B,{isEnabled:"isEnabled"},function(){return this.af},function(a){var b=this.af;b!==a&&(z.g(a,"boolean",B,"isEnabled"),this.af=a,this.j("isEnabled",b,a))});
z.defineProperty(B,{Cz:"allowClipboard"},function(){return this.Hu},function(a){var b=this.Hu;b!==a&&(z.g(a,"boolean",B,"allowClipboard"),this.Hu=a,this.j("allowClipboard",b,a))});z.defineProperty(B,{lk:"allowCopy"},function(){return this.Bk},function(a){var b=this.Bk;b!==a&&(z.g(a,"boolean",B,"allowCopy"),this.Bk=a,this.j("allowCopy",b,a))});
z.defineProperty(B,{Rm:"allowDelete"},function(){return this.Ck},function(a){var b=this.Ck;b!==a&&(z.g(a,"boolean",B,"allowDelete"),this.Ck=a,this.j("allowDelete",b,a))});z.defineProperty(B,{kt:"allowDragOut"},function(){return this.Iu},function(a){var b=this.Iu;b!==a&&(z.g(a,"boolean",B,"allowDragOut"),this.Iu=a,this.j("allowDragOut",b,a))});
z.defineProperty(B,{FD:"allowDrop"},function(){return this.Ju},function(a){var b=this.Ju;b!==a&&(z.g(a,"boolean",B,"allowDrop"),this.Ju=a,this.j("allowDrop",b,a))});z.defineProperty(B,{Iw:"allowTextEdit"},function(){return this.Lk},function(a){var b=this.Lk;b!==a&&(z.g(a,"boolean",B,"allowTextEdit"),this.Lk=a,this.j("allowTextEdit",b,a))});
z.defineProperty(B,{Fw:"allowGroup"},function(){return this.Dk},function(a){var b=this.Dk;b!==a&&(z.g(a,"boolean",B,"allowGroup"),this.Dk=a,this.j("allowGroup",b,a))});z.defineProperty(B,{Jw:"allowUngroup"},function(){return this.Mk},function(a){var b=this.Mk;b!==a&&(z.g(a,"boolean",B,"allowUngroup"),this.Mk=a,this.j("allowUngroup",b,a))});
z.defineProperty(B,{$o:"allowInsert"},function(){return this.Lu},function(a){var b=this.Lu;b!==a&&(z.g(a,"boolean",B,"allowInsert"),this.Lu=a,this.j("allowInsert",b,a))});z.defineProperty(B,{lt:"allowLink"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(z.g(a,"boolean",B,"allowLink"),this.Ek=a,this.j("allowLink",b,a))});
z.defineProperty(B,{Sm:"allowRelink"},function(){return this.Gk},function(a){var b=this.Gk;b!==a&&(z.g(a,"boolean",B,"allowRelink"),this.Gk=a,this.j("allowRelink",b,a))});z.defineProperty(B,{vl:"allowMove"},function(){return this.Fk},function(a){var b=this.Fk;b!==a&&(z.g(a,"boolean",B,"allowMove"),this.Fk=a,this.j("allowMove",b,a))});
z.defineProperty(B,{Gw:"allowReshape"},function(){return this.Hk},function(a){var b=this.Hk;b!==a&&(z.g(a,"boolean",B,"allowReshape"),this.Hk=a,this.j("allowReshape",b,a))});z.defineProperty(B,{mt:"allowResize"},function(){return this.Ik},function(a){var b=this.Ik;b!==a&&(z.g(a,"boolean",B,"allowResize"),this.Ik=a,this.j("allowResize",b,a))});
z.defineProperty(B,{Hw:"allowRotate"},function(){return this.Jk},function(a){var b=this.Jk;b!==a&&(z.g(a,"boolean",B,"allowRotate"),this.Jk=a,this.j("allowRotate",b,a))});z.defineProperty(B,{xf:"allowSelect"},function(){return this.Kk},function(a){var b=this.Kk;b!==a&&(z.g(a,"boolean",B,"allowSelect"),this.Kk=a,this.j("allowSelect",b,a))});
z.defineProperty(B,{GD:"allowUndo"},function(){return this.Mu},function(a){var b=this.Mu;b!==a&&(z.g(a,"boolean",B,"allowUndo"),this.Mu=a,this.j("allowUndo",b,a))});z.defineProperty(B,{Kw:"allowZoom"},function(){return this.Ou},function(a){var b=this.Ou;b!==a&&(z.g(a,"boolean",B,"allowZoom"),this.Ou=a,this.j("allowZoom",b,a))});
z.defineProperty(B,{dA:"hasVerticalScrollbar"},function(){return this.uv},function(a){var b=this.uv;b!==a&&(z.g(a,"boolean",B,"hasVerticalScrollbar"),this.uv=a,Wk(this),this.ta(),this.j("hasVerticalScrollbar",b,a),Mk(this,!1))});z.defineProperty(B,{cA:"hasHorizontalScrollbar"},function(){return this.tv},function(a){var b=this.tv;b!==a&&(z.g(a,"boolean",B,"hasHorizontalScrollbar"),this.tv=a,Wk(this),this.ta(),this.j("hasHorizontalScrollbar",b,a),Mk(this,!1))});
z.defineProperty(B,{ye:"allowHorizontalScroll"},function(){return this.Ku},function(a){var b=this.Ku;b!==a&&(z.g(a,"boolean",B,"allowHorizontalScroll"),this.Ku=a,this.j("allowHorizontalScroll",b,a),Mk(this,!1))});z.defineProperty(B,{ze:"allowVerticalScroll"},function(){return this.Nu},function(a){var b=this.Nu;b!==a&&(z.g(a,"boolean",B,"allowVerticalScroll"),this.Nu=a,this.j("allowVerticalScroll",b,a),Mk(this,!1))});
z.defineProperty(B,{nu:"scrollHorizontalLineChange"},function(){return this.iw},function(a){var b=this.iw;b!==a&&(z.g(a,"number",B,"scrollHorizontalLineChange"),0>a&&z.ka(a,">= 0",B,"scrollHorizontalLineChange"),this.iw=a,this.j("scrollHorizontalLineChange",b,a))});
z.defineProperty(B,{ou:"scrollVerticalLineChange"},function(){return this.mw},function(a){var b=this.mw;b!==a&&(z.g(a,"number",B,"scrollVerticalLineChange"),0>a&&z.ka(a,">= 0",B,"scrollVerticalLineChange"),this.mw=a,this.j("scrollVerticalLineChange",b,a))});z.defineProperty(B,{R:"lastInput"},function(){return this.Qb},function(a){u&&z.l(a,Rf,B,"lastInput");this.Qb=a});z.defineProperty(B,{Fc:"firstInput"},function(){return this.Fi},function(a){u&&z.l(a,Rf,B,"firstInput");this.Fi=a});
z.defineProperty(B,{gc:"currentCursor"},function(){return this.av},function(a){""===a&&(a=this.Oq);this.av!==a&&(z.g(a,"string",B,"currentCursor"),null!==this.Fb&&(this.av=a,this.Fb.style.cursor=a,this.Pb.style.cursor=a))});z.defineProperty(B,{kK:"defaultCursor"},function(){return this.Oq},function(a){""===a&&(a="auto");var b=this.Oq;b!==a&&(z.g(a,"string",B,"defaultCursor"),this.Oq=a,this.j("defaultCursor",b,a))});
z.defineProperty(B,{click:"click"},function(){return this.vi},function(a){var b=this.vi;b!==a&&(null!==a&&z.g(a,"function",B,"click"),this.vi=a,this.j("click",b,a))});z.defineProperty(B,{wt:"doubleClick"},function(){return this.Di},function(a){var b=this.Di;b!==a&&(null!==a&&z.g(a,"function",B,"doubleClick"),this.Di=a,this.j("doubleClick",b,a))});
z.defineProperty(B,{Iz:"contextClick"},function(){return this.yi},function(a){var b=this.yi;b!==a&&(null!==a&&z.g(a,"function",B,"contextClick"),this.yi=a,this.j("contextClick",b,a))});z.defineProperty(B,{uA:"mouseOver"},function(){return this.Qi},function(a){var b=this.Qi;b!==a&&(null!==a&&z.g(a,"function",B,"mouseOver"),this.Qi=a,this.j("mouseOver",b,a))});
z.defineProperty(B,{tA:"mouseHover"},function(){return this.Pi},function(a){var b=this.Pi;b!==a&&(null!==a&&z.g(a,"function",B,"mouseHover"),this.Pi=a,this.j("mouseHover",b,a))});z.defineProperty(B,{sA:"mouseHold"},function(){return this.Oi},function(a){var b=this.Oi;b!==a&&(null!==a&&z.g(a,"function",B,"mouseHold"),this.Oi=a,this.j("mouseHold",b,a))});
z.defineProperty(B,{JI:"mouseDragOver"},function(){return this.Rv},function(a){var b=this.Rv;b!==a&&(null!==a&&z.g(a,"function",B,"mouseDragOver"),this.Rv=a,this.j("mouseDragOver",b,a))});z.defineProperty(B,{rA:"mouseDrop"},function(){return this.Ni},function(a){var b=this.Ni;b!==a&&(null!==a&&z.g(a,"function",B,"mouseDrop"),this.Ni=a,this.j("mouseDrop",b,a))});
z.defineProperty(B,{$A:"toolTip"},function(){return this.Xi},function(a){var b=this.Xi;b!==a&&(null!==a&&z.l(a,da,B,"toolTip"),this.Xi=a,this.j("toolTip",b,a))});z.defineProperty(B,{contextMenu:"contextMenu"},function(){return this.zi},function(a){var b=this.zi;b!==a&&(null!==a&&z.l(a,da,B,"contextMenu"),this.zi=a,this.j("contextMenu",b,a))});
z.defineProperty(B,{wb:"commandHandler"},function(){return this.ty},function(a){var b=this.ty;b!==a&&(z.l(a,ra,B,"commandHandler"),null!==a.h&&z.k("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.Sc(null),this.ty=a,a.Sc(this))});z.defineProperty(B,{gb:"toolManager"},function(){return this.uz},function(a){var b=this.uz;b!==a&&(z.l(a,gh,B,"toolManager"),null!==a.h&&z.k("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.Sc(null),this.uz=a,a.Sc(this))});
z.defineProperty(B,{vt:"defaultTool"},function(){return this.zy},function(a){var b=this.zy;b!==a&&(z.l(a,xg,B,"defaultTool"),this.zy=a,this.cb===b&&(this.cb=a))});z.defineProperty(B,{cb:"currentTool"},function(){return this.xy},function(a){var b=this.xy;null!==b&&(b.ua&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());null===a&&(a=this.vt);null!==a&&(z.l(a,xg,B,"currentTool"),this.xy=a,a.Sc(this),a.doStart())});z.w(B,{selection:"selection"},function(){return this.pw});
z.defineProperty(B,{BI:"maxSelectionCount"},function(){return this.Mv},function(a){var b=this.Mv;if(b!==a)if(z.g(a,"number",B,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.Mv=a,this.j("maxSelectionCount",b,a),!this.pa.qb&&(a=this.selection.count-a,0<a)){this.Ja("ChangingSelection");for(var b=this.selection.jc(),c=0;c<a;c++)b[c].jb=!1;this.Ja("ChangedSelection")}}else z.ka(a,">= 0",B,"maxSelectionCount")});
z.defineProperty(B,{LI:"nodeSelectionAdornmentTemplate"},function(){return this.Sv},function(a){var b=this.Sv;b!==a&&(z.l(a,da,B,"nodeSelectionAdornmentTemplate"),this.Sv=a,this.j("nodeSelectionAdornmentTemplate",b,a))});z.defineProperty(B,{SH:"groupSelectionAdornmentTemplate"},function(){return this.qv},function(a){var b=this.qv;b!==a&&(z.l(a,da,B,"groupSelectionAdornmentTemplate"),this.qv=a,this.j("groupSelectionAdornmentTemplate",b,a))});
z.defineProperty(B,{vI:"linkSelectionAdornmentTemplate"},function(){return this.Iv},function(a){var b=this.Iv;b!==a&&(z.l(a,da,B,"linkSelectionAdornmentTemplate"),this.Iv=a,this.j("linkSelectionAdornmentTemplate",b,a))});z.w(B,{gn:"highlighteds"},function(){return this.vv});
z.defineProperty(B,{ni:"isModified"},function(){var a=this.pa;return a.isEnabled?null!==a.ej?!0:this.Wy&&this.dh!==a.jj:this.Wy},function(a){if(this.Wy!==a){z.g(a,"boolean",B,"isModified");this.Wy=a;var b=this.pa;!a&&b.isEnabled&&(this.dh=b.jj);a||Hl(this)}});function Hl(a){var b=a.ni;a.xD!==b&&(a.xD=b,a.Ja("Modified"))}
z.defineProperty(B,{ha:"model"},function(){return this.ie},function(a){var b=this.ie;if(b!==a){z.l(a,M,B,"model");this.cb.doCancel();null!==b&&b.pa!==a.pa&&b.pa.PE&&z.k("Do not replace a Diagram.model while a transaction is in progress.");this.Va.pi();this.Nw();this.fh=!1;this.ho=!0;this.dh=-2;this.Wf=!1;var c=this.Vd;this.Vd=!0;this.Va.rn("Model");null!==b&&(null!==this.hh&&this.hh.each(function(a){b.iu(a)}),b.iu(this.FC),b instanceof V&&Il(this,b.Kg),Il(this,b.hg));this.ie=a;a.Qm(this.EC);Jl(this,
a.hg);a instanceof V&&Kl(this,a.Kg);a.iu(this.EC);a.Qm(this.FC);null!==this.hh&&this.hh.each(function(b){a.Qm(b)});this.Vd=c;this.Vc||this.ta();null!==b&&(a.pa.isEnabled=b.pa.isEnabled)}});z.defineProperty(B,{$a:null},function(){return this.xC},function(a){this.xC=a});z.w(B,{tx:null},function(){return this.qG});
function vk(a,b){if(b.ha===a.ha){var c=b.Dc,d=b.propertyName;if(c===Vf&&"S"===d[0])if("StartingFirstTransaction"===d)c=a.gb,c.Ye.each(function(b){b.Sc(a)}),c.eg.each(function(b){b.Sc(a)}),c.fg.each(function(b){b.Sc(a)}),a.Vd||a.fh||(a.hv=!0,a.ho&&(a.Wf=!0));else if("StartingUndo"===d||"StartingRedo"===d){var e=a.Va;e.nf&&!a.Bb&&e.pi();a.Ja("ChangingSelection")}else"StartedTransaction"===d&&(e=a.Va,e.nf&&!a.Bb&&e.pi());else if(a.$a){a.$a=!1;try{var g=b.rf;if(""!==g)if(c===Uf){if("linkFromKey"===g){var h=
b.object,k=a.$f(h);if(null!==k){var l=b.newValue,m=a.hf(l);k.Y=m}}else if("linkToKey"===g)h=b.object,k=a.$f(h),null!==k&&(l=b.newValue,m=a.hf(l),k.da=m);else if("linkFromPortId"===g){if(h=b.object,k=a.$f(h),null!==k){var n=b.newValue;"string"===typeof n&&(k.ag=n)}}else if("linkToPortId"===g)h=b.object,k=a.$f(h),null!==k&&(n=b.newValue,"string"===typeof n&&(k.Vg=n));else if("nodeGroupKey"===g){var h=b.object,p=a.vh(h);if(null!==p){var q=b.newValue;if(void 0!==q){var r=a.hf(q);p.Qa=r instanceof F?r:
null}else p.Qa=null}}else if("linkLabelKeys"===g){if(h=b.object,k=a.$f(h),null!==k){var s=b.oldValue,t=b.newValue;if(z.isArray(s))for(var v=z.ab(s),x=0;x<v;x++){var y=z.Ya(s,x),m=a.hf(y);null!==m&&(m.od=null)}if(z.isArray(t))for(v=z.ab(t),x=0;x<v;x++)y=z.Ya(t,x),m=a.hf(y),null!==m&&(m.od=k)}}else if("nodeParentKey"===g){var A=b.object,C=a.hf(b.newValue),L=a.ax(A);if(null!==L){var H=L.op();null!==H?null===C?a.remove(H):a.ce?H.Y=C:H.da=C:Ll(a,C,L)}}else if("parentLinkCategory"===g){var A=b.object,L=
a.ax(A),U=b.newValue;null!==L&&"string"===typeof U&&(H=L.op(),null!==H&&(H.nc=U))}else if("nodeCategory"===g){var h=b.object,ea=a.vh(h),U=b.newValue;null!==ea&&"string"===typeof U&&(ea.nc=U)}else if("linkCategory"===g){var h=b.object,W=a.$f(h),U=b.newValue;null!==W&&"string"===typeof U&&(W.nc=U)}else if("nodeDataArray"===g){var P=b.oldValue;Il(a,P);var ba=b.newValue;Jl(a,ba)}else"linkDataArray"===g&&(P=b.oldValue,Il(a,P),ba=b.newValue,Kl(a,ba));a.ni=!0}else c===Wf?(ba=b.newValue,"nodeDataArray"===
g&&z.Za(ba)?Ml(a,ba):"linkDataArray"===g&&z.Za(ba)?Nl(a,ba):"linkLabelKeys"===g&&Bg(ba)&&(k=a.$f(b.object),m=a.hf(ba),null!==k&&null!==m&&(m.od=k)),a.ni=!0):c===Xf?(P=b.oldValue,"nodeDataArray"===g&&z.Za(P)?Ol(a,P):"linkDataArray"===g&&z.Za(P)?Ol(a,P):"linkLabelKeys"===g&&Bg(P)&&(m=a.hf(P),null!==m&&(m.od=null)),a.ni=!0):c===Vf&&("SourceChanged"===g?null!==b.object?uk(a,b.object,b.propertyName):(a.AJ(),a.dG()):"ModelDisplaced"===g&&a.Sl());else if(c===Uf){var Oa=b.propertyName,h=b.object;if(h===a.ha){if("nodeKeyProperty"===
Oa||"nodeCategoryProperty"===Oa||"linkFromKeyProperty"===Oa||"linkToKeyProperty"===Oa||"linkFromPortIdProperty"===Oa||"linkToPortIdProperty"===Oa||"linkLabelKeysProperty"===Oa||"nodeIsGroupProperty"===Oa||"nodeGroupKeyProperty"===Oa||"nodeParentKeyProperty"===Oa||"linkCategoryProperty"===Oa)a.pa.qb||a.Sl()}else uk(a,h,Oa);a.ni=!0}else if(c===Wf||c===Xf)Pl(a,b),a.ni=!0;else if(c===Vf){if("FinishedUndo"===d||"FinishedRedo"===d)a.pa.Ii=!0,a.Ja("ChangedSelection"),Kk(a),a.pa.Ii=!1;e=a.Va;"RolledBackTransaction"===
d&&e.pi();a.hv=!0;a.cg();0===a.pa.Ih&&Tj(e);"CommittedTransaction"===d&&a.pa.Yy&&(a.dh=Math.min(a.dh,a.pa.jj-1));var sa=b.SE;sa&&(Hl(a),a.tx.clear());!a.ez&&sa&&(a.ez=!0,z.setTimeout(function(){a.cb.standardMouseOver();a.ez=!1},10))}}finally{a.$a=!0}}}}
function uk(a,b,c){if("string"===typeof c){var d=a.vh(b);if(null!==d)d.Mb(c),a.ha instanceof qg&&(d=a.$f(b),null!==d&&d.Mb(c));else{for(var d=null,e=a.mm.i;e.next();){for(var g=e.value,h=0;h<g.length;h++){var k=g[h].DH(b);null!==k&&(null===d&&(d=z.rb()),d.push(k))}if(null!==d)break}if(null!==d){for(e=0;e<d.length;e++)d[e].Mb(c);z.xa(d)}}b===a.ha.uk&&a.dG(c)}}z.defineProperty(B,{Ee:"skipsModelSourceBindings"},function(){return this.$C},function(a){this.$C=a});
z.defineProperty(B,{vu:null},function(){return this.nz},function(a){this.nz=a});function Pl(a,b){var c=b.Dc===Wf,d=c?b.Lg:b.Ng,e=c?b.newValue:b.oldValue,g=a.mm.na(b.object);if(Array.isArray(g))for(var h=0;h<g.length;h++){var k=g[h];if(c)Ql(k,e,d);else{var l=d;if(!(0>l)){var m=l;Rl(k)&&m++;k.Ve(m);Sl(k,m,l)}}}}function yl(a,b){var c=b.Ji;if(z.isArray(c)){var d=a.mm.na(c);if(null===d)d=[],d.push(b),a.mm.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Cl(a,b){var c=b.Ji;if(z.isArray(c)){var d=a.mm.na(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.mm.remove(c);break}}}function xl(a,b){for(var c=b.va.o,d=c.length,e=0;e<d;e++){var g=c[e];g instanceof wk&&Tl(a,g)}}function Tl(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var c=c.src,d=a.Fo.na(c);if(null===d)d=[],d.push(b),a.Fo.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Bl(a,b){for(var c=b.va.o,d=c.length,e=0;e<d;e++){var g=c[e];g instanceof wk&&Ul(a,g)}}function Ul(a,b){var c=b.element;if(null!==c&&c instanceof HTMLImageElement){var c=c.src,d=a.Fo.na(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Fo.remove(c);break}}}
B.prototype.clear=B.prototype.clear=function(){var a=null;null!==this.ud&&(a=this.ud.ca);this.ha.clear();for(var b=this.Yb.length,c=0;c<b;c++)this.Yb.o[c].clear();this.rg.clear();this.Sk.clear();this.Eo.clear();this.pl.clear();this.yo.clear();this.mb.clear();this.Ai.clear();this.Rk.clear();this.mm.clear();this.pw.Wa();this.pw.clear();this.pw.freeze();this.vv.Wa();this.vv.clear();this.vv.freeze();eh=this.Rn=null;fh="";this.iv=(new w(NaN,NaN,NaN,NaN)).freeze();null!==a&&(this.add(a),this.mb.remove(a));
this.ta()};
B.prototype.reset=B.prototype.reset=function(){this.Vc=!0;this.clear();this.Yb=new J(wg);this.qF();this.pF();this.sb=(new N(NaN,NaN)).freeze();this.bc=1;this.xv=(new N(NaN,NaN)).freeze();this.yv=NaN;this.Ov=1E-4;this.Lv=100;this.Cw=(new N(NaN,NaN)).freeze();this.ov=(new w(NaN,NaN,NaN,NaN)).freeze();this.jw=(new Db(0,0,0,0)).freeze();this.kw=rk;this.gw=this.cw=null;this.cm=mh;this.On=Pc;this.Yk=mh;this.mo=Pc;this.zv=this.wv=Zb;this.uB=250;this.Su=(new Db(16,16,16,16)).freeze();this.Dv=!0;this.xw=tk;
this.zw=Bi;this.Oq="auto";this.zi=this.Xi=this.Ni=this.Rv=this.Oi=this.Pi=this.Qi=this.yi=this.Di=this.vi=null;this.Hi=!1;this.Ck=this.Bk=this.Hu=this.af=!0;this.Ju=this.Iu=!1;this.Nu=this.Ku=this.uv=this.tv=this.Ou=this.Mu=this.Kk=this.Jk=this.Ik=this.Hk=this.Fk=this.Gk=this.Ek=this.Lu=this.Mk=this.Dk=this.Lk=!0;this.mw=this.iw=16;this.df=(new Db(5)).freeze();this.Mv=999999999;this.he=null;Ak(this);this.ud=null;this.gb=new gh;this.gb.initializeStandardTools();this.cb=this.vt=this.gb;this.wb=new ra;
this.Wi=!0;zk(this);this.Sb=new yg;this.Wi=!1;this.ha=new V;this.fh=!1;this.ho=!0;this.Vc=this.Wf=!1;this.ta();this.hh=this.ui=null;sk(this);this.av=""};
B.prototype.rebuildParts=B.prototype.Sl=function(){for(var a=this.zA.i;a.next();){var b=a.value,c=a.key;(!b.be()||b instanceof F)&&z.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+c+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.bA.i;a.next();)b=a.value,c=a.key,b instanceof F||z.k('Invalid group template in Diagram.groupTemplateMap: template for "'+c+'" must be a Group, not a normal Node or Link: '+b);for(a=this.lA.i;a.next();)b=a.value,c=a.key,b instanceof
G||z.k('Invalid link template in Diagram.linkTemplateMap: template for "'+c+'" must be a Link, not a normal Node or simple Part: '+b);a=z.rb();for(b=this.selection.i;b.next();)(c=b.value.data)&&a.push(c);for(var b=z.rb(),d=this.gn.i;d.next();)(c=d.value.data)&&b.push(c);c=z.rb();for(d=this.Mg.i;d.next();){var e=d.value;null!==e.data&&(c.push(e.data),c.push(e.location))}for(d=this.links.i;d.next();)e=d.value,null!==e.data&&(c.push(e.data),c.push(e.location));for(d=this.oi.i;d.next();)e=d.value,null!==
e.data&&(c.push(e.data),c.push(e.location));d=this.ha;d instanceof V&&Il(this,d.Kg);Il(this,d.hg);Jl(this,d.hg);d instanceof V&&Kl(this,d.Kg);for(d=0;d<a.length;d++)e=this.vh(a[d]),null!==e&&(e.jb=!0);for(d=0;d<b.length;d++)e=this.vh(b[d]),null!==e&&(e.yh=!0);for(d=0;d<c.length;d+=2)e=this.vh(c[d]),null!==e&&(e.location=c[d+1]);z.xa(a);z.xa(b);z.xa(c)};
function Jl(a,b){if(null!==b){for(var c=a.ha,d=z.ab(b),e=0;e<d;e++){var g=z.Ya(b,e);c.le(g)?Ml(a,g,!1):c instanceof V&&Nl(a,g)}if(c instanceof V||c instanceof qg){for(e=0;e<d;e++)g=z.Ya(b,e),c.le(g)&&Vl(a,g);if(c instanceof V)for(c=a.links;c.next();)Wl(c.value)}Xl(a,!1)}}
function Ml(a,b,c){if(void 0!==b&&null!==b&&!a.pa.qb&&!a.Ai.contains(b)){void 0===c&&(c=!0);var d=a.$z(b),e=Yl(a,b,d);if(null!==e&&(jh(e),e=e.copy(),null!==e)){var g=a.Ee;a.Ee=!0;e.ti=d;e.fe=b;a.add(e);e.fe=null;e.data=b;c&&Vl(a,b);a.Ee=g}}}B.prototype.$z=function(a){return this.ha.$z(a)};var Zl=!1,$l=!1;
function Yl(a,b,c){var d=!1,e=a.ha;e instanceof V&&(d=e.hA(b));d?(b=a.bA.na(c),null===b&&(b=a.bA.na(""),null===b&&($l||($l=!0,z.trace('No Group template found for category "'+c+'"'),z.trace("  Using default group template")),b=a.OB))):(b=a.zA.na(c),null===b&&(b=a.zA.na(""),null===b&&(Zl||(Zl=!0,z.trace('No Node template found for category "'+c+'"'),z.trace("  Using default node template")),b=a.QB)));return b}
function Vl(a,b){var c=a.ha;if(c instanceof V||c instanceof qg){var d=c.pb(b);if(void 0!==d){var e=Eg(c,d),g=a.vh(b);if(null!==e&&null!==g){for(e=e.i;e.next();){var h=e.value;if(c instanceof V){var k=c;if(k.le(h)){if(g instanceof F&&k.en(h)===d){var l=g,h=a.vh(h);null!==h&&(h.Qa=l)}}else{var m=a.$f(h);if(null!==m&&g instanceof E&&(l=g,k.Ll(h)===d&&(m.Y=l),k.Ml(h)===d&&(m.da=l),h=k.rk(h),z.isArray(h)))for(k=0;k<z.ab(h);k++)if(z.Ya(h,k)===d){l.od=m;break}}}else c instanceof qg&&(m=c,m.le(h)&&g instanceof
E&&(l=g,m.fn(h)===d&&(h=a.ax(h),Ll(a,l,h))))}Gg(c,d)}c instanceof V?(c=c.en(b),void 0!==c&&(c=a.hf(c),c instanceof F&&(g.Qa=c))):c instanceof qg&&(c=c.fn(b),void 0!==c&&g instanceof E&&(l=g,g=a.hf(c),Ll(a,g,l)))}}}
function Ll(a,b,c){if(null!==b&&null!==c){var d=a.gb.YE,e=b,g=c;if(a.ce)for(b=g.ee;b.next();){if(b.value.da===g)return}else for(e=c,g=b,b=e.ee;b.next();)if(b.value.Y===e)return;if(null===d||!Di(d,e,g,null,!0))if(d=a.ex(c.data),b=am(a,d),null!==b&&(jh(b),b=b.copy(),null!==b)){var h=a.Ee;a.Ee=!0;b.ti=d;b.fe=c.data;b.Y=e;b.da=g;a.add(b);b.fe=null;b.data=c.data;a.Ee=h}}}function Kl(a,b){if(null!==b){for(var c=z.ab(b),d=0;d<c;d++){var e=z.Ya(b,d);Nl(a,e)}Xl(a,!1)}}
function Nl(a,b){if(void 0!==b&&null!==b&&!a.pa.qb&&!a.Rk.contains(b)){var c=a.ex(b),d=am(a,c);if(null!==d&&(jh(d),d=d.copy(),null!==d)){var e=a.Ee;a.Ee=!0;d.ti=c;d.fe=b;var c=a.ha,g=c.LH(b);""!==g&&(d.ag=g);g=c.Ll(b);void 0!==g&&(g=a.hf(g),g instanceof E&&(d.Y=g));g=c.OH(b);""!==g&&(d.Vg=g);g=c.Ml(b);void 0!==g&&(g=a.hf(g),g instanceof E&&(d.da=g));c=c.rk(b);if(z.isArray(c))for(var g=z.ab(c),h=0;h<g;h++){var k=z.Ya(c,h),k=a.hf(k);null!==k&&(k.od=d)}a.add(d);d.fe=null;d.data=b;a.Ee=e}}}
B.prototype.ex=function(a){var b=this.ha,c="";b instanceof V?c=b.ex(a):b instanceof qg&&(c=b.NH(a));return c};var bm=!1;function am(a,b){var c=a.lA.na(b);null===c&&(c=a.lA.na(""),null===c&&(bm||(bm=!0,z.trace('No Link template found for category "'+b+'"'),z.trace("  Using default link template")),c=a.PB));return c}function Il(a,b){for(var c=z.ab(b),d=0;d<c;d++){var e=z.Ya(b,d);Ol(a,e)}}
function Ol(a,b){if(void 0!==b&&null!==b){var c=a.vh(b);if(null!==c){c.jb=!1;c.yh=!1;var d=c.layer;if(null!==d&&d.h===a){var e=a.ha;if(e instanceof V&&c instanceof E){var g=c,h=e.pb(g.data);if(void 0!==h){for(var k=g.ee;k.next();)Fg(e,h,k.value.data);g.Df&&(k=g.od,null!==k&&Fg(e,h,k.data));if(g instanceof F)for(g=g.Hc;g.next();)k=g.value.data,e.le(k)&&Fg(e,h,k)}}else if(e instanceof qg&&c instanceof E){g=c;k=a.$f(g.data);if(null!==k){k.jb=!1;k.yh=!1;var l=k.layer;if(null!==l){var m=l.Ve(-1,k,!1);
0<=m&&a.Rc(Xf,"parts",l,k,null,m,null);m=k.Ut;null!==m&&m(k,l,null)}}k=a.ce;for(g=g.ee;g.next();)l=g.value,l=(k?l.da:l.Y).data,e.le(l)&&Fg(e,h,l)}e=d.Ve(-1,c,!1);0<=e&&a.Rc(Xf,"parts",d,c,null,e,null);e=c.Ut;null!==e&&e(c,d,null)}}}}B.prototype.findPartForKey=B.prototype.GH=function(a){if(null===a||void 0===a)return null;a=this.ha.ne(a);return null===a?null:this.Ai.na(a)};
B.prototype.findNodeForKey=B.prototype.hf=function(a){if(null===a||void 0===a)return null;a=this.ha.ne(a);if(null===a)return null;a=this.Ai.na(a);return a instanceof E?a:null};B.prototype.findPartForData=B.prototype.vh=function(a){if(null===a)return null;var b=this.Ai.na(a);return null!==b?b:b=this.Rk.na(a)};B.prototype.findNodeForData=B.prototype.ax=function(a){if(null===a)return null;a=this.Ai.na(a);return a instanceof E?a:null};
B.prototype.findLinkForData=B.prototype.$f=function(a){return null===a?null:this.Rk.na(a)};B.prototype.findNodesByExample=function(a){for(var b=new K,c=this.Eo.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var g=0;g<arguments.length;g++){var h=arguments[g];if(z.Za(h)&&cm(this,e,h)){b.add(d);break}}}return b.i};
B.prototype.findLinksByExample=function(a){for(var b=new K,c=this.yo.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var g=0;g<arguments.length;g++){var h=arguments[g];if(z.Za(h)&&cm(this,e,h)){b.add(d);break}}}return b.i};function cm(a,b,c){for(var d in c){var e=b[d],g=c[d];if(z.isArray(g)){if(!z.isArray(e)||e.length<g.length)return!1;for(var h=0;h<e.length;h++){var k=e[h],l=g[h];if(void 0!==l&&!dm(a,k,l))return!1}}else if(!dm(a,e,g))return!1}return!0}
function dm(a,b,c){if("function"===typeof c){if(!c(b))return!1}else if(c instanceof RegExp){if(!b||!c.test(b.toString()))return!1}else if(z.Za(b)&&z.Za(c)){if(!cm(a,b,c))return!1}else if(b!==c)return!1;return!0}z.defineProperty(B,{ZK:"nodeTemplate"},function(){return this.Ri.na("")},function(a){var b=this.Ri.na("");b!==a&&(z.l(a,D,B,"nodeTemplate"),this.Ri.add("",a),this.j("nodeTemplate",b,a),this.pa.qb||this.Sl())});
z.defineProperty(B,{zA:"nodeTemplateMap"},function(){return this.Ri},function(a){var b=this.Ri;b!==a&&(z.l(a,na,B,"nodeTemplateMap"),this.Ri=a,this.j("nodeTemplateMap",b,a),this.pa.qb||this.Sl())});z.defineProperty(B,{BK:"groupTemplate"},function(){return this.Uk.na("")},function(a){var b=this.Uk.na("");b!==a&&(z.l(a,F,B,"groupTemplate"),this.Uk.add("",a),this.j("groupTemplate",b,a),this.pa.qb||this.Sl())});
z.defineProperty(B,{bA:"groupTemplateMap"},function(){return this.Uk},function(a){var b=this.Uk;b!==a&&(z.l(a,na,B,"groupTemplateMap"),this.Uk=a,this.j("groupTemplateMap",b,a),this.pa.qb||this.Sl())});z.defineProperty(B,{NK:"linkTemplate"},function(){return this.Pj.na("")},function(a){var b=this.Pj.na("");b!==a&&(z.l(a,G,B,"linkTemplate"),this.Pj.add("",a),this.j("linkTemplate",b,a),this.pa.qb||this.Sl())});
z.defineProperty(B,{lA:"linkTemplateMap"},function(){return this.Pj},function(a){var b=this.Pj;b!==a&&(z.l(a,na,B,"linkTemplateMap"),this.Pj=a,this.j("linkTemplateMap",b,a),this.pa.qb||this.Sl())});z.defineProperty(B,{gI:null},function(){return this.jm},function(a){this.jm=a});
z.defineProperty(B,{We:"isMouseCaptured"},function(){return this.uC},function(a){var b=this.Fb;null!==b&&(a?(this.R.bubbles=!1,b.removeEventListener("mousemove",this.Kp,!1),b.removeEventListener("mousedown",this.Jp,!1),b.removeEventListener("mouseup",this.Mp,!1),b.removeEventListener("mousewheel",this.Bh,!1),b.removeEventListener("DOMMouseScroll",this.Bh,!1),b.removeEventListener("mouseout",this.Lp,!1),window.addEventListener("mousemove",this.Kp,!0),window.addEventListener("mousedown",this.Jp,!0),
window.addEventListener("mouseup",this.Mp,!0),window.addEventListener("mousewheel",this.Bh,!0),window.addEventListener("DOMMouseScroll",this.Bh,!0),window.addEventListener("mouseout",this.Lp,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.Kp,!0),window.removeEventListener("mousedown",this.Jp,!0),window.removeEventListener("mouseup",this.Mp,!0),window.removeEventListener("mousewheel",this.Bh,!0),window.removeEventListener("DOMMouseScroll",
this.Bh,!0),window.removeEventListener("mouseout",this.Lp,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.Kp,!1),b.addEventListener("mousedown",this.Jp,!1),b.addEventListener("mouseup",this.Mp,!1),b.addEventListener("mousewheel",this.Bh,!1),b.addEventListener("DOMMouseScroll",this.Bh,!1),b.addEventListener("mouseout",this.Lp,!1)),this.uC=a)});
z.defineProperty(B,{position:"position"},function(){return this.sb},function(a){var b=this.sb;if(!b.N(a)){z.l(a,N,B,"position");var c=this.xb.copy();a=a.copy();if(!this.Vc&&null!==this.Fb){this.Vc=!0;var d=this.scale;Ok(this,a,this.ad,this.Jb/d,this.Ob/d,this.On,!1);this.Vc=!1}this.sb=a.V();a=this.Va;a.wc&&gk(a,b,this.sb);this.Vc||this.fu(c,this.xb)}});z.defineProperty(B,{YH:"initialPosition"},function(){return this.xv},function(a){this.xv.N(a)||(z.l(a,N,B,"initialPosition"),this.xv=a.V())});
z.defineProperty(B,{ZH:"initialScale"},function(){return this.yv},function(a){this.yv!==a&&(z.g(a,"number",B,"initialScale"),this.yv=a)});z.defineProperty(B,{tp:"grid"},function(){null===this.ud&&Gk(this);return this.ud},function(a){var b=this.ud;if(b!==a){null===b&&(Gk(this),b=this.ud);z.l(a,I,B,"grid");a.type!==Hk&&z.k("Diagram.grid must be a Panel of type Panel.Grid");var c=b.T;null!==c&&c.remove(b);this.ud=a;a.name="GRID";null!==c&&c.add(a);$k(this);this.ta();this.j("grid",b,a)}});
z.w(B,{xb:"viewportBounds"},function(){var a=this.wD;if(null===this.Fb)return a;var b=this.sb,c=this.bc;a.n(b.x,b.y,Math.max(this.Jb,0)/c,Math.max(this.Ob,0)/c);return a});z.defineProperty(B,{tE:"fixedBounds"},function(){return this.ov},function(a){var b=this.ov;b.N(a)||(z.l(a,w,B,"fixedBounds"),(u&&Infinity===a.width||-Infinity===a.width||Infinity===a.height||-Infinity===a.height)&&z.k("fixedBounds width/height must not be Infinity"),this.ov=a=a.V(),this.yc(),this.j("fixedBounds",b,a))});
z.defineProperty(B,{AF:"scrollMargin"},function(){return this.jw},function(a){"number"===typeof a?a=new Db(a):z.l(a,Db,B,"scrollMargin");var b=this.jw;b.N(a)||(this.jw=a=a.V(),this.yc(),this.j("scrollMargin",b,a))});z.defineProperty(B,{MA:"scrollMode"},function(){return this.kw},function(a){var b=this.kw;b!==a&&(z.Ba(a,B,B,"scrollMode"),this.kw=a,a===rk&&Mk(this,!1),this.j("scrollMode",b,a))});
z.defineProperty(B,{iF:"positionComputation"},function(){return this.cw},function(a){var b=this.cw;b!==a&&(null!==a&&z.g(a,"function",B,"positionComputation"),this.cw=a,Mk(this,!1),this.j("positionComputation",b,a))});z.defineProperty(B,{zF:"scaleComputation"},function(){return this.gw},function(a){var b=this.gw;b!==a&&(null!==a&&z.g(a,"function",B,"scaleComputation"),this.gw=a,Fl(this,this.scale,this.scale),this.j("scaleComputation",b,a))});z.w(B,{ad:"documentBounds"},function(){return this.iv});
function Pk(a,b){a.Jj=!1;var c=a.iv;c.N(b)||(b=b.V(),a.iv=b,Mk(a,!1),a.Ja("DocumentBoundsChanged",null,c.copy()),Wk(a))}z.defineProperty(B,{scale:"scale"},function(){return this.bc},function(a){var b=this.bc;z.p(a,B,"scale");b!==a&&Fl(this,b,a)});z.defineProperty(B,{xl:"autoScale"},function(){return this.cm},function(a){var b=this.cm;b!==a&&(z.Ba(a,B,B,"autoScale"),this.cm=a,this.j("autoScale",b,a),a!==mh&&Mk(this,!1))});
z.defineProperty(B,{DK:"initialAutoScale"},function(){return this.Yk},function(a){var b=this.Yk;b!==a&&(z.Ba(a,B,B,"initialAutoScale"),this.Yk=a,this.j("initialAutoScale",b,a))});z.defineProperty(B,{$H:"initialViewportSpot"},function(){return this.zv},function(a){var b=this.zv;b!==a&&(z.l(a,Q,B,"initialViewportSpot"),a.cd()||z.k("initialViewportSpot must be a specific Spot: "+a),this.zv=a,this.j("initialViewportSpot",b,a))});
z.defineProperty(B,{XH:"initialDocumentSpot"},function(){return this.wv},function(a){var b=this.wv;b!==a&&(z.l(a,Q,B,"initialDocumentSpot"),a.cd()||z.k("initialViewportSpot must be a specific Spot: "+a),this.wv=a,this.j("initialDocumentSpot",b,a))});z.defineProperty(B,{Ah:"minScale"},function(){return this.Ov},function(a){z.p(a,B,"minScale");var b=this.Ov;b!==a&&(0<a?(this.Ov=a,this.j("minScale",b,a),a>this.scale&&(this.scale=a)):z.ka(a,"> 0",B,"minScale"))});
z.defineProperty(B,{zh:"maxScale"},function(){return this.Lv},function(a){z.p(a,B,"maxScale");var b=this.Lv;b!==a&&(0<a?(this.Lv=a,this.j("maxScale",b,a),a<this.scale&&(this.scale=a)):z.ka(a,"> 0",B,"maxScale"))});z.defineProperty(B,{$l:"zoomPoint"},function(){return this.Cw},function(a){this.Cw.N(a)||(z.l(a,N,B,"zoomPoint"),this.Cw=a=a.V())});
z.defineProperty(B,{WD:"contentAlignment"},function(){return this.On},function(a){var b=this.On;b.N(a)||(z.l(a,Q,B,"contentAlignment"),this.On=a=a.V(),this.j("contentAlignment",b,a),Mk(this,!1))});z.defineProperty(B,{EK:"initialContentAlignment"},function(){return this.mo},function(a){var b=this.mo;b.N(a)||(z.l(a,Q,B,"initialContentAlignment"),this.mo=a=a.V(),this.j("initialContentAlignment",b,a))});
z.defineProperty(B,{padding:"padding"},function(){return this.df},function(a){"number"===typeof a?a=new Db(a):z.l(a,Db,B,"padding");var b=this.df;b.N(a)||(this.df=a=a.V(),this.yc(),this.j("padding",b,a))});z.w(B,{Mg:"nodes"},function(){return this.Eo.i});z.w(B,{links:"links"},function(){return this.yo.i});z.w(B,{oi:"parts"},function(){return this.mb.i});
B.prototype.findTopLevelNodesAndLinks=function(){for(var a=new K(D),b=this.Eo.i;b.next();){var c=b.value;c.Bp&&a.add(c)}for(b=this.yo.i;b.next();)c=b.value,c.Bp&&a.add(c);return a.i};B.prototype.findTopLevelGroups=function(){return this.pl.i};z.defineProperty(B,{Sb:"layout"},function(){return this.he},function(a){var b=this.he;b!==a&&(z.l(a,yg,B,"layout"),null!==b&&(b.h=null,b.group=null),this.he=a,a.h=this,a.group=null,this.Qu=!0,this.j("layout",b,a),this.Ce())});
B.prototype.layoutDiagram=function(a){Kk(this);a&&Xl(this,!0);hl(this,!1)};function Xl(a,b){for(var c=a.pl.i;c.next();)em(a,c.value,b);null!==a.Sb&&(b?a.Sb.Gf=!1:a.Sb.I())}function em(a,b,c){if(null!==b){for(var d=b.vm.i;d.next();)em(a,d.value,c);null!==b.Sb&&(c?b.Sb.Gf=!1:b.Sb.I())}}
function hl(a,b){if(!a.Ay){var c=a.Sb,d=a.$a;a.$a=!0;try{a.Wb("Layout");var e=a.Va;1!==a.pa.Ih||e.nf||e.wc||e.rn("Layout");for(var g=a.pl.i;g.next();)fm(a,g.value,b);c.Gf||b&&!c.RE&&1!==a.pa.Ih||(c.doLayout(a),Kk(a),c.Gf=!0)}finally{a.Kd("Layout"),a.Qu=!c.Gf,a.$a=d}}}function fm(a,b,c){if(null!==b){for(var d=b.vm.i;d.next();)fm(a,d.value,c);d=b.Sb;null===d||d.Gf||c&&!d.RE||(b.fz=!b.location.F(),d.doLayout(b),b.I(gm),d.Gf=!0,kl(a,b))}}
z.defineProperty(B,{ce:"isTreePathToChildren"},function(){return this.Dv},function(a){var b=this.Dv;if(b!==a&&(z.g(a,"boolean",B,"isTreePathToChildren"),this.Dv=a,this.j("isTreePathToChildren",b,a),!this.pa.qb))for(a=this.Mg;a.next();)hm(a.value)});B.prototype.findTreeRoots=function(){for(var a=new J(E),b=this.Mg;b.next();){var c=b.value;c.Bp&&null===c.op()&&a.add(c)}return a.i};
z.defineProperty(B,{bB:"treeCollapsePolicy"},function(){return this.xw},function(a){var b=this.xw;b!==a&&(z.Ba(a,B,B,"treeCollapsePolicy"),this.xw=a,this.j("treeCollapsePolicy",b,a))});z.defineProperty(B,{xh:null},function(){return this.lC},function(a){this.lC=a});
function sk(a){function b(a){var b=a.toLowerCase(),h=new J("function");c.add(a,h);c.add(b,h);d.add(a,a);d.add(b,a)}var c=new na("string",J),d=new na("string","string");b("AnimationStarting");b("AnimationFinished");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("Modified");
b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.Cy=c;a.By=d}
function Ia(a,b){var c=a.By.na(b);return null!==c?c:a.By.na(b.toLowerCase())}function im(a,b){var c=a.Cy.na(b);if(null!==c)return c;c=a.Cy.na(b.toLowerCase());if(null!==c)return c;z.k("Unknown DiagramEvent name: "+b);return null}B.prototype.addDiagramListener=B.prototype.Az=function(a,b){z.g(a,"string",B,"addDiagramListener:name");z.g(b,"function",B,"addDiagramListener:listener");var c=im(this,a);null!==c&&c.add(b)};
B.prototype.removeDiagramListener=B.prototype.lF=function(a,b){z.g(a,"string",B,"removeDiagramListener:name");z.g(b,"function",B,"addDiagramListener:listener");var c=im(this,a);null!==c&&c.remove(b)};B.prototype.raiseDiagramEvent=B.prototype.Ja=function(a,b,c){u&&z.g(a,"string",B,"raiseDiagramEvent:name");var d=im(this,a),e=new Sf;e.h=this;e.name=Ia(this,a);void 0!==b&&(e.WA=b);void 0!==c&&(e.CA=c);a=d.length;if(1===a)d=d.ea(0),d(e);else if(0!==a)for(b=d.jc(),c=0;c<a;c++)d=b[c],d(e);return e.cancel};
function oi(a,b){var c=!1;a.xb.nk(b)&&(c=!0);c=a.Wz(b,function(a){return a.ca},function(a){return a instanceof G},!0,function(a){return a instanceof G},c);if(0!==c.count)for(c=c.i;c.next();){var d=c.value;d.kj&&d.qc()}}B.prototype.isUnoccupied=B.prototype.Dp=function(a,b){void 0===b&&(b=null);return ja(this,!1,null,b).Dp(a.x,a.y,a.width,a.height)};
function ja(a,b,c,d){null===a.Fd&&(a.Fd=new jm);if(a.Fd.yp||a.Fd.group!==c||a.Fd.UA!==d){if(null===c){b=a.Jj?Lk(a):a.ad.copy();b.bg(100,100);a.Fd.initialize(b);b=z.lg();for(var e=a.Mg;e.next();){var g=e.value,h=g.layer;null!==h&&h.visible&&!h.Nc&&km(a,g,d,b)}}else for(c.W.F()||c.Bf(),b=c.W.copy(),b.bg(20,20),a.Fd.initialize(b),b=z.lg(),e=c.Hc;e.next();)g=e.value,g instanceof E&&km(a,g,d,b);z.dc(b);a.Fd.group=c;a.Fd.UA=d;a.Fd.yp=!1}else b&&lm(a.Fd);return a.Fd}
function km(a,b,c,d){if(b!==c)if(b.isVisible()&&b.canAvoid()){c=b.getAvoidableRect(d);d=a.Fd.dp;b=a.Fd.bp;for(var e=c.x+c.width,g=c.y+c.height,h=c.x;h<e;h+=d){for(var k=c.y;k<g;k+=b)mm(a.Fd,h,k);mm(a.Fd,h,g)}for(k=c.y;k<g;k+=b)mm(a.Fd,e,k);mm(a.Fd,e,g)}else if(b instanceof F)for(b=b.Hc;b.next();)e=b.value,e instanceof E&&km(a,e,c,d)}function nm(a,b){null===a.Fd||a.Fd.yp||null!==b&&!b.canAvoid()||(a.Fd.yp=!0)}
B.prototype.simulatedMouseMove=B.prototype.Rx=function(a,b,c){if(null!==Lh){var d=Lh.h;c instanceof B||(c=null);var e=Mh;c!==e&&(null!==e&&e!==d&&null!==e.gb.me&&(Rh(e),Lh.jx=!1,e.gb.me.doSimulatedDragLeave()),Mh=c,null!==c&&c!==d&&null!==c.gb.me&&(Yh(),e=c.gb.me,Uh.contains(e)||Uh.add(e),c.gb.me.doSimulatedDragEnter()));if(null===c||c===d||!c.FD||c.ib||!c.$o)return!1;d=c.gb.me;null!==d&&(null!==a?b=c.ko(a):null===b&&(b=new N),c.Qb.ga=b,c.Qb.Fl=!1,c.Qb.up=!1,d.doSimulatedDragOver());return!0}return!1};
B.prototype.simulatedMouseUp=B.prototype.LF=function(a,b,c,d){if(null!==Lh){null===d&&(d=b);b=Mh;var e=Lh.h;if(d!==b){if(null!==b&&b!==e&&null!==b.gb.me)return Rh(b),Lh.jx=!1,b.gb.me.doSimulatedDragLeave(),!1;Mh=d;null!==d&&null!==d.gb.me&&(Yh(),b=d.gb.me,Uh.contains(b)||Uh.add(b),d.gb.me.doSimulatedDragEnter())}if(null===d)return Lh.doCancel(),!0;if(d!==this)return null!==a&&(c=d.ko(a)),d.Qb.ga=c,d.Qb.Fl=!1,d.Qb.up=!0,a=d.gb.me,null!==a&&a.doSimulatedDrop(),a=Lh,null!==a&&(d=a.mayCopy(),a.Mf=d?"Copy":
"Move",a.stopTool()),!0}return!1};z.defineProperty(B,{MD:"autoScrollRegion"},function(){return this.Su},function(a){"number"===typeof a?a=new Db(a):z.l(a,Db,B,"autoScrollRegion");var b=this.Su;b.N(a)||(this.Su=a=a.V(),this.yc(),this.j("autoScrollRegion",b,a))});function ji(a,b){a.Ru.assign(b);om(a,a.Ru).Mc(a.position)?Rh(a):pm(a)}
function pm(a){-1===a.In&&(a.In=z.setTimeout(function(){if(-1!==a.In){Rh(a);var b=a.R.event;if(null!==b){var c=om(a,a.Ru);c.Mc(a.position)||(a.position=c,a.R.ga=a.bG(a.Ru),a.Rx(b,null,b.target.Z)||a.doMouseMove(),a.Jj=!0,Pk(a,a.sh()),a.ve=!0,a.cg(),pm(a))}}},a.uB))}function Rh(a){-1!==a.In&&(z.clearTimeout(a.In),a.In=-1)}
function om(a,b){var c=a.position,d=a.MD;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.xb,g=a.scale,e=z.zk(0,0,e.width*g,e.height*g),h=z.Tb(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var k=Math.max(a.nu,1),k=k|0;h.x-=k;b.x<e.x+d.left/2&&(h.x-=k);b.x<e.x+d.left/4&&(h.x-=4*k)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(k=Math.max(a.nu,1),k|=0,h.x+=k,b.x>e.x+e.width-d.right/2&&(h.x+=k),b.x>e.x+e.width-d.right/4&&(h.x+=4*k));b.y>=e.y&&b.y<e.y+d.top?(k=Math.max(a.ou,1),k|=0,h.y-=k,b.y<e.y+
d.top/2&&(h.y-=k),b.y<e.y+d.top/4&&(h.y-=4*k)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(k=Math.max(a.ou,1),k|=0,h.y+=k,b.y>e.y+e.height-d.bottom/2&&(h.y+=k),b.y>e.y+e.height-d.bottom/4&&(h.y+=4*k));h.Mc(Id)||(c=new N(c.x+h.x/g,c.y+h.y/g));z.dc(e);z.A(h);return c}B.prototype.makeSVG=B.prototype.makeSvg=function(a){void 0===a&&(a=new ma);a.context="svg";a=qm(this,a);return null!==a?a.Vl:null};
B.prototype.makeImage=function(a){void 0===a&&(a=new ma);var b=(a.document||document).createElement("img");b.src=this.wI(a);return b};B.prototype.makeImageData=B.prototype.wI=function(a){void 0===a&&(a=new ma);var b=qm(this,a);return null!==b?b.toDataURL(a.type,a.details):""};var rm=!1;
function qm(a,b){a.Va.pi();a.cg();if(null===a.Fb)return null;"object"!==typeof b&&z.k("properties argument must be an Object.");var c=!1,d=b.size||null,e=b.scale||null;void 0!==b.scale&&isNaN(b.scale)&&(e="NaN");var g=b.maxSize;void 0===b.maxSize&&(c=!0,g="svg"===b.context?new Ea(Infinity,Infinity):new Ea(2E3,2E3));var h=b.position||null,k=b.parts||null,l=void 0===b.padding?1:b.padding,m=b.background||null,n=b.omitTemporary;void 0===n&&(n=!0);var p=b.document||document,q=b.elementFinished||null,r=
b.showTemporary;void 0===r&&(r=!n);n=b.showGrid;void 0===n&&(n=r);null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null);"number"===typeof l?l=new Db(l):l instanceof Db||(l=new Db(0));l.left=Math.max(l.left,0);l.right=Math.max(l.right,0);l.top=Math.max(l.top,0);l.bottom=Math.max(l.bottom,0);a.ao=!1;ca(a.gd,!0);var s=new la(null,p),t=s.zl,v=s;if(!(d||e||k||h))return s.width=a.Jb+Math.ceil(l.left+l.right),s.height=a.Ob+Math.ceil(l.top+l.bottom),"svg"===b.context&&(t=v=new ed(s.Ld,p,q),t instanceof ed&&
(a.ao=!0)),sl(a,t,l,new Ea(s.width,s.height),a.bc,a.sb,k,m,r,n),a.ao=!0,v;var x=a.wb.Tw,y=new N(0,0),A=a.ad.copy();A.qJ(a.padding);if(r)for(var C=!0,C=a.Yb.o,L=C.length,H=0;H<L;H++){var U=C[H];if(U.visible&&U.Nc)for(var ea=U.mb.o,U=ea.length,W=0;W<U;W++){var P=ea[W];P.lx&&P.isVisible()&&(P=P.W,P.F()&&A.ri(P))}}y.x=A.x;y.y=A.y;if(null!==k){var ba,C=!0,ea=k.i;for(ea.reset();ea.next();)L=ea.value,L instanceof D&&(P=L,U=P.layer,null!==U&&!U.visible||null!==U&&!r&&U.Nc||!P.isVisible()||(P=P.W,P.F()&&(C?
(C=!1,ba=P.copy()):ba.ri(P))));C&&(ba=new w(0,0,0,0));A.width=ba.width;A.height=ba.height;y.x=ba.x;y.y=ba.y}null!==h&&h.F()&&(y=h,e||(e=x));C=ea=0;null!==l&&(ea=l.left+l.right,C=l.top+l.bottom);H=L=0;null!==d&&(L=d.width,H=d.height,isFinite(L)&&(L=Math.max(0,L-ea)),isFinite(H)&&(H=Math.max(0,H-C)));ba=h=0;null!==d&&null!==e?("NaN"===e&&(e=x),d.F()?(h=L,ba=H):isNaN(H)?(h=L,ba=A.height*e):(h=A.width*e,ba=H)):null!==d?d.F()?(e=Math.min(L/A.width,H/A.height),h=L,ba=H):isNaN(H)?(e=L/A.width,h=L,ba=A.height*
e):(e=H/A.height,h=A.width*e,ba=H):null!==e?"NaN"===e&&g.F()?(e=Math.min((g.width-ea)/A.width,(g.height-C)/A.height),e>x?(e=x,h=A.width,ba=A.height):(h=g.width,ba=g.height)):(h=A.width*e,ba=A.height*e):(e=x,h=A.width,ba=A.height);null!==l?(h+=ea,ba+=C):l=new Db(0);null!==g&&(d=g.width,g=g.height,"svg"!==b.context&&c&&!rm&&(h>d||ba>g)&&(z.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(h)+"x"+Math.ceil(ba)+" vs 2000x2000) Consider increasing the max size."),
rm=!0),isNaN(d)&&(d=2E3),isNaN(g)&&(g=2E3),isFinite(d)&&(h=Math.min(h,d)),isFinite(g)&&(ba=Math.min(ba,g)));s.width=Math.ceil(h);s.height=Math.ceil(ba);"svg"===b.context&&(t=v=new ed(s.Ld,p,q),t instanceof ed&&(a.ao=!0));sl(a,t,l,new Ea(Math.ceil(h),Math.ceil(ba)),e,y,k,m,r,n);a.ao=!0;return v}B.inherit=function(a,b){z.g(a,"function",B,"inherit");z.g(b,"function",B,"inherit");b.BG&&z.k("Cannot inherit from "+z.kf(b));z.Ra(a,b)};
function Bk(){this.EG="63ad05bbe23a1786468a4c741b6d2";this.pg=this.EG===this._tk?!0:null}
Bk.prototype.Zl=function(a){a.gd.setTransform(a.jd,0,0,a.jd,0,0);if(null===this.pg)a:{var b="f",c=window[z.Gg("76a715b2f73f148a")][z.Gg("72ba13b5")];a=z.Gg;if(window[a("7da7")]&&window[a("7da7")][a("76a115b6ed251eaf4692")]){this.pg=!0;var d=window[a("7da7")][a("76a115b6ed251eaf4692")],d=a(d).split(a("39e9")),e=a(d[1]).split("."),g=z[a("6cae19")].split(".");if(e[0]>g[0]||e[0]===g[0]&&e[1]>=g[1]){e=c[a("76ad18b4f73e")];for(g=c[a("73a612b6fb191d")](a("35e7"))+2;g<e;g++)b+=c[g];c=b[a("73a612b6fb191d")](a(d[2]));
0>c&&a(d[2])!==a("7da71ca0ad381e90")&&(c=b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));0>c&&(c=b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));this.pg=!(0<=c&&c<b[a("73a612b6fb191d")](a("35")))}}else{if(a("77bb5bb2f32603de")===window[a("76a715b2f73f148a")][a("6aba19a7ec351488")])try{this.pg=!window[a("4da118b7ec2108")]([a("5bb806bfea351a904a84515e1b6d38b6")])([a("49bc19a1e6")])([a("59bd04a1e6380fa5539b")])([a("7bb8069ae7")]===a(z.adym));if(!1===this.pg)break a;this.pg=!window[a("4da118b7ec2108")]([a("5bb806bfea351a904a84515e1b6d38b6")])([a("49bc19a1e6")])([a("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([a("7bb8069ae7")]===
a(z.adym));if(!1===this.pg)break a}catch(h){}e=c[a("76ad18b4f73e")];for(g=c[a("73a612b6fb191d")](a("35e7"))+2;g<e;g++)b+=c[g];c=b[a("73a612b6fb191d")](a(z.adym));0>c&&a(z.adym)!==a("7da71ca0ad381e90")&&(c=b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));if(this.pg=!(0<=c&&c<b[a("73a612b6fb191d")](a("35"))))b=window.document[a("79ba13b2f7333e8846865a7d00")]("div"),c=a("02cncncn"),"."===c[0]&&(c=c[a("69bd14a0f724128a44")](1)),b[a("79a417a0f0181a8946")]=c,window.document[a("78a712aa")]?(window.document[a("78a712aa")][a("7bb806b6ed32388c4a875b")](b),
c=window[a("7dad0290ec3b0b91578e5b40007031bf")](b)[a("7dad0283f1390b81519f4645156528bf")](a("78a704b7e62456904c9b12701b6532a8")),window.document[a("78a712aa")][a("68ad1bbcf533388c4a875b")](b),c&&-1!==c.indexOf(a(z.aH))&&-1!==c.indexOf(a(z.bH))&&(this.pg=!1)):(this.pg=null,this.pg=!1)}}return 0<this.pg&&this!==this.CG?!0:!1};Bk.prototype.t=function(){this.CG=null};
function Ck(a,b){void 0!==b&&null!==b||z.k("Diagram setup requires an argument DIV.");null!==a.Pb&&z.k("Diagram has already completed setup.");"string"===typeof b?a.Pb=window.document.getElementById(b):b instanceof HTMLDivElement?a.Pb=b:z.k("No DIV or DIV id supplied: "+b);null===a.Pb&&z.k("Invalid DIV id; could not get element with id: "+b);void 0!==a.Pb.Z&&z.k("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Pb,null).position&&(a.Pb.style.position=
"relative");a.Pb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)";a.Pb.style["-ms-touch-action"]="none";a.Pb.innerHTML="";a.Pb.Z=a;var c=new la(a);c.Ld.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px","rtl"===window.getComputedStyle(a.Pb,null).getPropertyValue("direction")&&(a.mr=!0),c.style.zIndex="2",c.style.DL="none",c.style.webkitUserSelect="none",c.style.MozUserSelect=
"none");a.Jb=a.Pb.clientWidth||1;a.Ob=a.Pb.clientHeight||1;a.Fb=c;a.gd=c.zl;var d=a.gd;a.uG=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1);a.jd=a.computePixelRatio();ul(a,a.Jb,a.Ob);a.Fy=d[z.Gg("7eba17a4ca3b1a8346")][z.Gg("78a118b7")](d,z.Zl,4,4);a.Pb.insertBefore(c.Ld,a.Pb.firstChild);c=new la(null);c.width=1;c.height=1;a.Ey=c;a.aC=c.zl;var c=z.createElement("div"),e=z.createElement("div");
c.style.position="absolute";c.style.overflow="auto";c.style.width=a.Jb+"px";c.style.height=a.Ob+"px";c.style.zIndex="1";e.style.position="absolute";e.style.width="1px";e.style.height="1px";a.Pb.appendChild(c);c.appendChild(e);c.onscroll=a.wG;c.onmousedown=a.JC;c.ontouchstart=a.JC;c.Z=a;c.zG=!0;c.AG=!0;a.lw=c;a.xs=e;a.HA=z.$D(function(){a.dk=null;a.ta()},300,!1);a.gG=z.$D(function(){Uj(a)},250,!1);a.preventDefault=function(a){a.preventDefault();return!1};a.Kp=function(b){if(a.isEnabled){a.jm=!0;var c=
a.Zc;z.hn&&c.mj?(b.preventDefault(),b.simulated=!0,a.Ks=b):(a.Zc=a.Qb,a.Qb=c,Sk(a,a,b,c,!0),a.Rx(b,null,b.target.Z)||(a.doMouseMove(),a.cb.isBeyondDragSize()&&(a.cl=0),ha(a,c,b)))}};a.Jp=function(b){if(a.isEnabled){a.jm=!0;var c=a.Zc;if(z.hn&&null!==a.Ks)a.Ks=b,b.preventDefault();else if(z.hn&&400>b.timeStamp-a.om)b.preventDefault();else if(a.$k)b.preventDefault();else{a.Zc=a.Qb;a.Qb=c;Sk(a,a,b,c,!0);c.Fl=!0;c.Pe=b.detail;if(z.ME||z.NE)b.timeStamp-a.om<a.tD&&!a.cb.isBeyondDragSize()?a.cl++:a.cl=1,
a.om=b.timeStamp,c.Pe=a.cl;a.Fi=c;!0===c.Yq.simulated?(b.preventDefault(),b.simulated=!0):(u&&u.eF&&(window.eF=a.lp(c.ga)),Lh=null,a.doMouseDown(),a.Fi=a.Fi.copy(),1===b.button?b.preventDefault():ha(a,c,b))}}};a.Mp=function(b){if(a.isEnabled)if(a.$k&&2===b.button)b.preventDefault();else if(a.$k&&0===b.button&&(a.$k=!1),a.Ss)b.preventDefault();else{a.jm=!0;var c=a.Zc;if(z.hn){if(400>b.timeStamp-a.om){b.preventDefault();return}a.om=b.timeStamp}if(z.hn&&null!==a.Ks)a.Ks=null,b.preventDefault();else{a.Zc=
a.Qb;a.Qb=c;Sk(a,a,b,c,!0);c.up=!0;c.Pe=b.detail;if(z.ME||z.NE)c.Pe=a.cl;c.bubbles=b.bubbles;b.target.Z&&(c.Tg=b.target.Z);a.LF(b,null,new N,c.Tg)||(a.doMouseUp(),Rh(a),ha(a,c,b))}}};a.Bh=function(b){if(a.isEnabled){var c=a.Zc;a.Zc=a.Qb;a.Qb=c;Sk(a,a,b,c,!0);c.bubbles=!0;c.Dl=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail;a.doMouseWheel();ha(a,c,b)}};a.Lp=function(){if(a.isEnabled){a.jm=!1;var b=a.cb;b.cancelWaitAfter();b instanceof gh&&b.hideToolTip()}};a.YF=function(b){if(a.isEnabled){a.Ss=!1;
a.$k=!0;var c=a.Zc;a.Zc=a.Qb;a.Qb=c;Uk(a,b,b.targetTouches[0],c,1<b.touches.length);a.doMouseDown();ha(a,c,b)}};a.XF=function(b){if(a.isEnabled){var c=a.Zc;a.Zc=a.Qb;a.Qb=c;var d=null;0<b.changedTouches.length?d=b.changedTouches[0]:0<b.targetTouches.length&&(d=b.targetTouches[0]);Vk(a,b,d,c,1<b.touches.length);a.Rx(d?d:b,null,c.Tg)||a.doMouseMove();ha(a,c,b)}};a.WF=function(b){if(a.isEnabled)if(a.Ss)b.preventDefault();else{var c=a.Zc;a.Zc=a.Qb;a.Qb=c;if(1<b.touches.length)a.rp("hasGestureZoom")&&
(a.Ny=!1);else{var d=null,e=null;0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);c.h=a;c.Pe=1;if(null!==e){d=window.document.elementFromPoint(e.clientX,e.clientY);null!==d&&d.Z instanceof B&&d.Z!==a&&Tk(d.Z,e,c);Tk(a,b.changedTouches[0],c);var m=e.screenX,n=e.screenY,p=a.zC;b.timeStamp-a.om<a.tD&&!(25<Math.abs(p.x-m)||25<Math.abs(p.y-n))?a.cl++:a.cl=1;c.Pe=a.cl;a.om=b.timeStamp;a.zC.n(m,n)}c.yd=0;c.button=0;c.buttons=1;c.Fl=!1;c.up=!0;c.Dl=0;c.Gc=!1;
c.bubbles=!1;c.event=b;c.timestamp=Date.now();c.Tg=null===d?b.target.Z:d.Z?d.Z:null;c.Ge=null;a.LF(e?e:b,null,new N,c.Tg)||a.doMouseUp();ha(a,c,b);a.$k=!1}}};a.OI=function(b){if("touch"===b.pointerType){var c=a.TC;void 0===c[b.pointerId]&&(a.bw++,c[b.pointerId]=b);a.Uf[0]=null;a.Uf[1]=null;for(var d in c)if(null===a.Uf[0])a.Uf[0]=c[d];else if(null===a.Uf[1]){a.Uf[1]=c[d];break}a.isEnabled&&(a.Ss=!1,a.$k=!0,c=a.Zc,a.Zc=a.Qb,a.Qb=c,Uk(a,b,b,c,1<a.bw),a.doMouseDown(),ha(a,c,b))}};a.RI=function(b){if("touch"===
b.pointerType&&!(2>a.bw)){var c=a.Uf;c[0].pointerId===b.pointerId&&(c[0]=b);c[1].pointerId===b.pointerId&&(c[1]=b);a.isEnabled&&(c=a.Zc,a.Zc=a.Qb,a.Qb=c,Vk(a,b,b,c,!0),a.Rx(b,null,c.Tg)||(a.doMouseMove(),ha(a,c,b)))}};a.QI=function(b){if("touch"===b.pointerType){var c=a.TC;void 0!==c[b.pointerId]&&(a.bw--,delete c[b.pointerId],c=a.Uf,null!==c[0]&&c[0].pointerId===b.pointerId&&(c[0]=null),null!==c[1]&&c[1].pointerId===b.pointerId&&(c[1]=null))}};ca(d,!0);Fk(a)}
function sm(a){1<arguments.length&&z.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");B.call(this,a);this.kt=!0;this.vl=!1;this.ib=!0;this.WD=$b;this.Sb=new tm}z.Ra(sm,B);z.ia("Palette",sm);
function yk(a){1<arguments.length&&z.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");B.call(this,a);this.Va.isEnabled=!1;this.Vc=!0;this.Xj=null;this.lv=!0;this.jJ("drawShadows",!1);var b=new D,c=new X;c.stroke="magenta";c.ub=2;c.fill="transparent";c.name="BOXSHAPE";b.wk=!0;b.Kx="BOXSHAPE";b.ux="BOXSHAPE";b.vF="BOXSHAPE";b.cursor="move";b.add(c);this.dm=b;c=new da;c.type=$i;c.of=ec;var d=new aj;d.Ff=!0;c.add(d);d=new X;d.kk=ec;d.Hb="Rectangle";d.Aa=new Ea(64,
64);d.cursor="se-resize";d.alignment=ic;c.add(d);b.tF=c;this.Rm=this.lk=!1;this.xf=this.mt=!0;this.MD=0;this.qz=new la(null);this.DG=this.qz.zl;this.gb.me=new um;this.gb.wF=new vm;var e=this;this.click=function(){var a=e.Xj;if(null!==a){var b=a.xb,c=e.R.ga;a.position=new N(c.x-b.width/2,c.y-b.height/2)}};this.gF=function(){wm(e)};this.fF=function(){null!==e.Xj&&(e.yc(),e.ta())};this.xl=Qk;this.Vc=!1}z.Ra(yk,B);z.ia("Overview",yk);
function xm(a){a.Vc||a.Vd||!1!==a.Wf||(a.Wf=!0,requestAnimationFrame(function(){if(a.Wf&&!a.Vd&&(a.Wf=!1,null!==a.Pb)){a.Vd=!0;Kk(a);a.ad.F()||Pk(a,a.sh());null===a.Pb&&z.k("No div specified");null===a.Fb&&z.k("No canvas specified");if(a.ve){var b=a.Xj;if(null!==b&&!b.Va.nf&&!b.Va.wc){var b=a.gd,c=a.qz;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Fb.width,a.Fb.height);b.drawImage(c.Ld,0,0);c=a.Jd;c.reset();1!==a.scale&&c.scale(a.scale);0===a.position.x&&0===a.position.y||c.translate(-a.position.x,
-a.position.y);b.scale(a.jd,a.jd);b.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.Yb.o,d=c.length,e=0;e<d;e++)c[e].ff(b,a);a.Zk=!1;a.ve=!1}}a.Vd=!1}}))}yk.prototype.computePixelRatio=function(){return 1};
yk.prototype.ff=function(){null===this.Pb&&z.k("No div specified");null===this.Fb&&z.k("No canvas specified");if(this.ve){var a=this.Xj;if(null!==a&&!a.Va.nf){pl(this);var b=a.tp;(null!==b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&$k(a);var c=this.Fb,b=this.gd,d=this.qz,e=this.DG;d.width=c.width;d.height=c.height;ca(b,!0);b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,c.width,c.height);var g=this.Jd;g.reset();1!==this.scale&&g.scale(this.scale);0===this.position.x&&0===this.position.y||g.translate(-this.position.x,
-this.position.y);b.scale(this.jd,this.jd);b.transform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var h=this.lv,k=this.xb,l=a.Yb.o,m=l.length,a=0;a<m;a++){var n=l[a],p=b,q=k,r=h;if(n.visible&&0!==n.Xc&&(void 0===r&&(r=!0),r||!n.Nc)){1!==n.Xc&&(p.globalAlpha=n.Xc);for(var r=this.scale,n=n.mb.o,s=n.length,t=0;t<s;t++){var v=n[t],x=v.W;x.Jg(q)&&(1<x.width*r||1<x.height*r?v.ff(p,this):kk(v,p))}p.globalAlpha=1}}e.drawImage(c.Ld,0,0);u&&u.cj&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4));c=this.Yb.o;
d=c.length;for(a=0;a<d;a++)c[a].ff(b,this);u&&(u.Sz||u.cj)&&u.Rz(b,this,g);this.ve=this.Zk=!1}}};
z.defineProperty(yk,{BA:"observed"},function(){return this.Xj},function(a){var b=this.Xj;null!==a&&z.l(a,B,yk,"observed");a instanceof yk&&z.k("Overview.observed Diagram may not be an Overview itself: "+a);b!==a&&(null!==b&&(this.remove(this.rh),b.lF("ViewportBoundsChanged",this.gF),b.lF("DocumentBoundsChanged",this.fF),b.Yv.remove(this)),this.Xj=a,null!==a&&(a.Az("ViewportBoundsChanged",this.gF),a.Az("DocumentBoundsChanged",this.fF),a.Yv.add(this),this.add(this.rh),wm(this)),this.yc(),this.j("observed",
b,a))});z.defineProperty(yk,{rh:"box"},function(){return this.dm},function(a){var b=this.dm;b!==a&&(this.dm=a,this.remove(b),this.add(this.dm),wm(this),this.j("box",b,a))});z.defineProperty(yk,{yK:"drawsTemporaryLayers"},function(){return this.lv},function(a){this.lv!==a&&(this.lv=a,this.Sp())});
function wm(a){var b=a.rh;if(null!==b){var c=a.Xj;if(null!==c){a.ve=!0;var c=c.xb,d=b.un,e=z.Xl();e.n(c.width,c.height);d.Aa=e;z.qk(e);a=2/a.scale;d instanceof X&&(d.ub=a);b.location=new N(c.x-a/2,c.y-a/2)}}}yk.prototype.sh=function(){var a=this.Xj;return null===a?Jd:a.ad};yk.prototype.GE=function(){!0!==this.ve&&(this.ve=!0,xm(this))};yk.prototype.fu=function(a){this.Vc||(Jk(this),this.ta(),Wk(this),this.yc(),wm(this),this.Ja("ViewportBoundsChanged",null,a))};
function um(){lh.call(this);this.kl=null}z.Ra(um,lh);um.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||!a.vl||!a.xf)return!1;var b=a.BA;if(null===b)return!1;if(null===this.findDraggablePart()){var c=b.xb;this.kl=new N(c.width/2,c.height/2);a=a.Fc.ga;b.position=new N(a.x-this.kl.x,a.y-this.kl.y)}return!0};um.prototype.doActivate=function(){this.kl=null;lh.prototype.doActivate.call(this)};
um.prototype.moveParts=function(){var a=this.h,b=a.BA;if(null!==b){var c=a.rh;if(null!==c){if(null===this.kl){var d=a.Fc.ga,c=c.location;this.kl=new N(d.x-c.x,d.y-c.y)}a=a.R.ga;b.position=new N(a.x-this.kl.x,a.y-this.kl.y)}}};function vm(){Zi.call(this)}z.Ra(vm,Zi);vm.prototype.resize=function(a){var b=this.h.BA;if(null!==b){var c=b.xb.copy();b.position=a.position;(c.width!==a.width||c.height!==a.height)&&0<a.width&&0<a.height&&(b.scale=Math.min(c.width/a.width,c.height/a.height))}};
function Da(a){1<arguments.length&&z.k("Brush constructor can take at most one optional argument, the Brush type.");z.kc(this);this.G=!1;void 0===a?(this.ba=ug,this.Mn="black"):"string"===typeof a?(this.ba=ug,u&&!Ca(a)&&z.k('Color "'+a+'" is not a valid color string for Brush constructor'),this.Mn=a):(u&&z.Ba(a,Da,Da,"constructor:type"),this.ba=a,this.Mn="black");var b=this.ba;b===vg?(this.Oo=$b,this.co=hc):this.co=b===yd?this.Oo=ec:this.Oo=Yb;this.sw=0;this.mv=NaN;this.bh=this.aw=this.ah=null;this.vy=
this.Nn=0}z.ia("Brush",Da);var ug;Da.Solid=ug=z.s(Da,"Solid",0);var vg;Da.Linear=vg=z.s(Da,"Linear",1);var yd;Da.Radial=yd=z.s(Da,"Radial",2);var ym;Da.Pattern=ym=z.s(Da,"Pattern",4);Da.prototype.copy=function(){var a=new Da;a.ba=this.ba;a.Mn=this.Mn;a.Oo=this.Oo.V();a.co=this.co.V();a.sw=this.sw;a.mv=this.mv;null!==this.ah&&(a.ah=this.ah.copy());a.aw=this.aw;return a};Da.prototype.La=function(){this.freeze();Object.freeze(this);return this};
Da.prototype.freeze=function(){this.G=!0;null!==this.ah&&this.ah.freeze();return this};Da.prototype.Wa=function(){Object.isFrozen(this)&&z.k("cannot thaw constant: "+this);this.G=!1;null!==this.ah&&this.ah.Wa();return this};
Da.prototype.toString=function(){var a="Brush(";if(this.type===ug)a+=this.color;else if(a=this.type===vg?a+"Linear ":this.type===yd?a+"Radial ":this.type===ym?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.st)for(var b=this.st.i;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Da.prototype.addColorStop=Da.prototype.addColorStop=function(a,b){this.G&&z.oa(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&z.ka(a,"0 <= loc <= 1",Da,"addColorStop:loc");z.g(b,"string",Da,"addColorStop:color");u&&!Ca(b)&&z.k('Color "'+b+'" is not a valid color string for Brush.addColorStop');null===this.ah&&(this.ah=new na("number","string"));this.ah.add(a,b);this.ba===ug&&(this.type=vg);this.bh=null};
z.defineProperty(Da,{type:"type"},function(){return this.ba},function(a){this.G&&z.oa(this,a);z.Ba(a,Da,Da,"type");this.ba=a;this.start.Be()&&(a===vg?this.start=$b:a===yd&&(this.start=ec));this.end.Be()&&(a===vg?this.end=hc:a===yd&&(this.end=ec));this.bh=null});z.defineProperty(Da,{color:"color"},function(){return this.Mn},function(a){this.G&&z.oa(this,a);u&&!Ca(a)&&z.k('Color "'+a+'" is not a valid color string for Brush.color');this.Mn=a;this.bh=null});
z.defineProperty(Da,{start:"start"},function(){return this.Oo},function(a){this.G&&z.oa(this,a);z.l(a,Q,Da,"start");this.Oo=a.V();this.bh=null});z.defineProperty(Da,{end:"end"},function(){return this.co},function(a){this.G&&z.oa(this,a);z.l(a,Q,Da,"end");this.co=a.V();this.bh=null});z.defineProperty(Da,{wu:"startRadius"},function(){return this.sw},function(a){this.G&&z.oa(this,a);z.p(a,Da,"startRadius");0>a&&z.ka(a,">= zero",Da,"startRadius");this.sw=a;this.bh=null});
z.defineProperty(Da,{xt:"endRadius"},function(){return this.mv},function(a){this.G&&z.oa(this,a);z.p(a,Da,"endRadius");0>a&&z.ka(a,">= zero",Da,"endRadius");this.mv=a;this.bh=null});z.defineProperty(Da,{st:"colorStops"},function(){return this.ah},function(a){this.G&&z.oa(this,a);u&&z.l(a,na,Da,"colorStops");this.ah=a;this.bh=null});z.defineProperty(Da,{pattern:"pattern"},function(){return this.aw},function(a){this.G&&z.oa(this,a);this.aw=a;this.bh=null});
Da.randomColor=function(a,b){void 0===a&&(a=128);u&&(z.p(a,Da,"randomColor:min"),(0>a||255<a)&&z.ka(a,"0 <= min <= 255",Da,"randomColor:min"));void 0===b&&(b=Math.max(a,255));u&&(z.p(b,Da,"randomColor:max"),(b<a||255<b)&&z.ka(b,"min <= max <= 255",Da,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+
d+e+c};var zm=(new la(null)).zl,Ca;Da.isValidColor=Ca=function(a){if("black"===a)return!0;if(""===a)return!1;u&&z.g(a,"string",Da,"isValidColor");zm.fillStyle="#000000";var b=zm.fillStyle;zm.fillStyle=a;if(zm.fillStyle!==b)return!0;zm.fillStyle="#FFFFFF";b=zm.fillStyle;zm.fillStyle=a;return zm.fillStyle!==b};
function O(){z.kc(this);this.ja=30723;this.Xc=1;this.mh=null;this.Ub="";this.uc=this.Nb=null;this.sb=(new N(NaN,NaN)).freeze();this.tf=fe;this.Uj=Pd;this.Sj=de;this.Jd=new Fa;this.Ak=new Fa;this.gl=new Fa;this.bc=this.jv=1;this.bm=0;this.ei=Am;this.Er=Kd;this.vd=(new w(NaN,NaN,NaN,NaN)).freeze();this.Xb=(new w(NaN,NaN,NaN,NaN)).freeze();this.Wc=(new w(0,0,NaN,NaN)).freeze();this.Vs=this.Zq=this.la=this.fs=this.gs=null;this.Ws=this.$q=Infinity;this.oq=this.Ie=Pc;this.us=0;this.Ui=1;this.wq=0;this.xi=
1;this.Os=null;this.zs=-Infinity;this.ys=0;this.As=Id;this.Bs=Qi;this.Hq="";this.Ac=this.ma=null;this.Jn=-1;this.Am=this.Js=this.wi=this.Qk=this.No=null}z.ji(O);z.ia("GraphObject",O);
O.prototype.cloneProtected=function(a){a.ja=this.ja|6144;a.Xc=this.Xc;a.Ub=this.Ub;a.Nb=this.Nb;a.uc=this.uc;a.sb.assign(this.sb);a.tf=this.tf.V();a.Uj=this.Uj.V();a.Sj=this.Sj.V();a.gl=this.gl.copy();a.bc=this.bc;a.bm=this.bm;a.ei=this.ei;a.Er=this.Er.V();a.vd.assign(this.vd);a.Xb.assign(this.Xb);a.Wc.assign(this.Wc);a.fs=this.fs;null!==this.la&&(a.la=this.la.copy());a.Zq=this.Zq;a.Vs=this.Vs;a.$q=this.$q;a.Ws=this.Ws;a.Ie=this.Ie.V();a.oq=this.oq.V();a.us=this.us;a.Ui=this.Ui;a.wq=this.wq;a.xi=
this.xi;a.Os=this.Os;a.zs=this.zs;a.ys=this.ys;a.As=this.As.V();a.Bs=this.Bs;a.Hq=this.Hq;null!==this.ma&&(a.ma=this.ma.copy());a.Ac=this.Ac;a.Jn=this.Jn;null!==this.Qk&&(a.Qk=z.Al(this.Qk));null!==this.wi&&(a.wi=this.wi.copy());a.Js=this.Js};O.prototype.addCopyProperty=O.prototype.MG=function(a){var b=this.Qk;if(z.isArray(b))for(var c=0;c<b.length;c++){if(b[c]===a)return}else this.Qk=b=[];b.push(a)};O.prototype.ki=function(a){a.gs=null;a.Am=null;a.Q()};
O.prototype.clone=function(){var a=new this.constructor;this.cloneProtected(a);if(null!==this.Qk)for(var b=0;b<this.Qk.length;b++){var c=this.Qk[b];a[c]=this[c]}return a};O.prototype.copy=function(){return this.clone()};O.prototype.toString=function(){return z.kf(Object.getPrototypeOf(this))+"#"+z.nd(this)};var bj;O.None=bj=z.s(O,"None",0);var Am;O.Default=Am=z.s(O,"Default",0);var Bm;O.Vertical=Bm=z.s(O,"Vertical",4);var Cm;O.Horizontal=Cm=z.s(O,"Horizontal",5);var lf;O.Fill=lf=z.s(O,"Fill",3);var dj;
O.Uniform=dj=z.s(O,"Uniform",1);var ej;O.UniformToFill=ej=z.s(O,"UniformToFill",2);function Dm(a){null===a.ma&&(a.ma=new Em)}O.prototype.Ue=function(){if(null===this.la){var a=new Fm;a.Hj=Yb;a.hk=Yb;a.Fj=10;a.fk=10;a.Ej=Gm;a.ek=Gm;a.Gj=0;a.gk=0;this.la=a}};
function Hm(a,b,c,d,e,g,h){var k=.001,l=g.length;a.moveTo(b,c);d-=b;k=e-c;0===d&&(d=.001);e=k/d;for(var m=Math.sqrt(d*d+k*k),n=0,p=!0,q=0===h?!1:!0;.1<=m;){if(q){k=g[n++%l];for(k-=h;0>k;)k+=g[n++%l],p=!p;q=!1}else k=g[n++%l];k>m&&(k=m);var r=Math.sqrt(k*k/(1+e*e));0>d&&(r=-r);b+=r;c+=e*r;p?a.lineTo(b,c):a.moveTo(b,c);m-=k;p=!p}}O.prototype.raiseChangedEvent=O.prototype.Rc=function(a,b,c,d,e,g,h){var k=this.ca;null!==k&&(k.sn(a,b,c,d,e,g,h),0!==(this.ja&1024)&&c===this&&a===Uf&&Im(this,k,b))};
function Im(a,b,c){var d=a.np();if(null!==d)for(var e=a.Ac.i;e.next();){var g=e.value,h=null;if(null!==g.xn){h=ch(g,d,a);if(null===h)continue;g.Tx(a,h,c,null)}else if(g.St){var k=b.h;null===k||k.Ee||g.Tx(a,k.ha.uk,c,k)}else{var l=d.data;if(null===l)continue;k=b.h;null===k||k.Ee||g.Tx(a,l,c,k)}null!==h&&(k=d.Zw(g.Wl),null!==k&&g.eG(k,h,c))}}O.prototype.Zw=function(a){return this.Jn===a?this:null};O.prototype.raiseChanged=O.prototype.j=function(a,b,c){this.Rc(Uf,a,this,b,c)};
function Jm(a,b,c,d,e){var g=a.vd,h=a.gl;h.reset();Km(a,h,b,c,d,e);a.gl=h;g.x=b;g.y=c;g.width=d;g.height=e;h.Pt()||h.aG(g)}function Lm(a,b,c,d){if(!1===a.jg)return!1;d.multiply(a.transform);return c?a.Jg(b,d):a.Xm(b,d)}
O.prototype.rE=function(a,b,c){if(!1===this.jg)return!1;var d=this.Ga;b=a.Af(b);var e=!1;c&&(e=ub(a.x,a.y,0,0,0,d.height)<b||ub(a.x,a.y,0,d.height,d.width,d.height)<b||ub(a.x,a.y,d.width,d.height,d.width,0)<b||ub(a.x,a.y,d.width,0,0,0)<b);c||(e=ub(a.x,a.y,0,0,0,d.height)<b&&ub(a.x,a.y,0,d.height,d.width,d.height)<b&&ub(a.x,a.y,d.width,d.height,d.width,0)<b&&ub(a.x,a.y,d.width,0,0,0)<b);return e};O.prototype.Wg=function(){return!0};
O.prototype.containsPoint=O.prototype.Ma=function(a){u&&z.l(a,N,O,"containsPoint:p");var b=z.O();b.assign(a);this.transform.Cb(b);var c=this.W;if(!c.F())return z.A(b),!1;var d=this.h;if(null!==d&&d.$k){var e=d.rp("extraTouchThreshold"),g=d.rp("extraTouchArea"),h=g/2,k=this.Ga,d=this.hj()*d.scale,l=1/d;if(k.width*d<e&&k.height*d<e)return a=Ib(c.x-h*l,c.y-h*l,c.width+g*l,c.height+g*l,b.x,b.y),z.A(b),a}if(this instanceof da||this instanceof X?Ib(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Ma(b))return e=
!1,e=this.wi&&!this.wi.Ma(b)?!1:null!==this.uc&&c.Ma(b)?!0:null!==this.Nb&&this.Wc.Ma(a)?!0:this.mk(a),z.A(b),e;z.A(b);return!1};O.prototype.mk=function(a){var b=this.Ga;return Ib(0,0,b.width,b.height,a.x,a.y)};
O.prototype.containsRect=O.prototype.nk=function(a){u&&z.l(a,w,O,"containsRect:r");if(0===this.angle)return this.W.nk(a);var b=this.Ga,b=z.zk(0,0,b.width,b.height),c=this.transform,d=!1,e=z.Tb(a.x,a.y);b.Ma(c.li(e))&&(e.n(a.x,a.bottom),b.Ma(c.li(e))&&(e.n(a.right,a.bottom),b.Ma(c.li(e))&&(e.n(a.right,a.y),b.Ma(c.li(e))&&(d=!0))));z.A(e);z.dc(b);return d};
O.prototype.containedInRect=O.prototype.Xm=function(a,b){u&&z.l(a,w,O,"containedInRect:r");if(void 0===b)return a.nk(this.W);var c=this.Ga,d=!1,e=z.Tb(0,0);a.Ma(b.Cb(e))&&(e.n(0,c.height),a.Ma(b.Cb(e))&&(e.n(c.width,c.height),a.Ma(b.Cb(e))&&(e.n(c.width,0),a.Ma(b.Cb(e))&&(d=!0))));z.A(e);return d};
O.prototype.intersectsRect=O.prototype.Jg=function(a,b){u&&z.l(a,w,O,"intersectsRect:r");if(void 0===b&&(b=this.transform,0===this.angle))return a.Jg(this.W);var c=this.Ga,d=b,e=z.Tb(0,0),g=z.Tb(0,c.height),h=z.Tb(c.width,c.height),k=z.Tb(c.width,0),l=!1;if(a.Ma(d.Cb(e))||a.Ma(d.Cb(g))||a.Ma(d.Cb(h))||a.Ma(d.Cb(k)))l=!0;else{var c=z.zk(0,0,c.width,c.height),m=z.Tb(a.x,a.y);c.Ma(d.li(m))?l=!0:(m.n(a.x,a.bottom),c.Ma(d.li(m))?l=!0:(m.n(a.right,a.bottom),c.Ma(d.li(m))?l=!0:(m.n(a.right,a.y),c.Ma(d.li(m))&&
(l=!0))));z.A(m);z.dc(c);!l&&(Pe(a,e,g)||Pe(a,g,h)||Pe(a,h,k)||Pe(a,k,e))&&(l=!0)}z.A(e);z.A(g);z.A(h);z.A(k);return l};O.prototype.getDocumentPoint=O.prototype.eb=function(a,b){void 0===b&&(b=new N);a.Be()&&z.k("getDocumentPoint:s Spot must be specific: "+a.toString());var c=this.Ga;b.n(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY);this.qh.Cb(b);return b};
O.prototype.getDocumentAngle=O.prototype.Kl=function(){var a;a=this.qh;1===a.m11&&0===a.m12?a=0:(a=180*Math.atan2(a.m12,a.m11)/Math.PI,0>a&&(a+=360));return a};O.prototype.getDocumentScale=O.prototype.hj=function(){if(0!==(this.ja&4096)===!1)return this.jv;var a=this.bc;return null!==this.T?a*this.T.hj():a};O.prototype.getLocalPoint=O.prototype.wE=function(a,b){void 0===b&&(b=new N);b.assign(a);this.qh.li(b);return b};
O.prototype.getNearestIntersectionPoint=O.prototype.xE=function(a,b,c){return this.sp(a.x,a.y,b.x,b.y,c)};f=O.prototype;f.sp=function(a,b,c,d,e){var g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),k=g.m22*h,l=-g.m12*h,m=-g.m21*h,n=g.m11*h,p=h*(g.m21*g.dy-g.m22*g.dx),q=h*(g.m12*g.dx-g.m11*g.dy);if(null!==this.wl)return g=this.W,Ne(g.left,g.top,g.right,g.bottom,a,b,c,d,e);h=a*k+b*m+p;a=a*l+b*n+q;b=c*k+d*m+p;c=c*l+d*n+q;e.n(0,0);d=this.Ga;c=Ne(0,0,d.width,d.height,h,a,b,c,e);e.transform(g);return c};
function tj(a,b,c,d,e){if(!1!==ml(a)){var g=a.margin,h=g.right+g.left,g=g.top+g.bottom;b=Math.max(b-h,0);c=Math.max(c-g,0);e=e||0;d=Math.max((d||0)-h,0);e=Math.max(e-g,0);var h=a.angle,g=0,g=a.Aa,k=0;a.ub&&(k=a.ub);90===h||270===h?(b=isFinite(g.height)?g.height+k:b,c=isFinite(g.width)?g.width+k:c):(b=isFinite(g.width)?g.width+k:b,c=isFinite(g.height)?g.height+k:c);var g=d||0,k=e||0,l=a instanceof I;switch(Mm(a,!0)){case bj:k=g=0;l&&(c=b=Infinity);break;case lf:isFinite(b)&&b>d&&(g=b);isFinite(c)&&
c>e&&(k=c);break;case Cm:isFinite(b)&&b>d&&(g=b);k=0;l&&(c=Infinity);break;case Bm:isFinite(c)&&c>e&&(k=c),g=0,l&&(b=Infinity)}var l=a.Xe,m=a.dg;g>l.width&&m.width<l.width&&(g=l.width);k>l.height&&m.height<l.height&&(k=l.height);d=Math.max(g/a.scale,m.width);e=Math.max(k/a.scale,m.height);l.width<d&&(d=Math.min(m.width,d));l.height<e&&(e=Math.min(m.height,e));b=Math.min(l.width,b);c=Math.min(l.height,c);b=Math.max(d,b);c=Math.max(e,c);if(90===h||270===h)g=b,b=c,c=g,g=d,d=e,e=g;a.vd.Wa();a.Ip(b,c,
d,e);a.vd.freeze();a.vd.F()||z.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.vd.toString());Yk(a,!1)}}
f.Lc=function(a,b,c,d,e){this.Gi();var g=z.lg();g.assign(this.Xb);this.Xb.Wa();if(!1===nl(this)){var h=this.Xb;h.x=a;h.y=b;h.width=c;h.height=d}else this.aj(a,b,c,d);this.Xb.freeze();this.wi=void 0===e?null:e;c=!1;void 0!==e?c=!0:null!==this.T&&(e=this.T.Wc,d=this.Ia,null!==this.wl&&(d=this.Xb),c=b+d.height,d=a+d.width,c=!(0<=a+.05&&d<=e.width+.05&&0<=b+.05&&c<=e.height+.05),this instanceof qa&&(a=this.Wc,this.Kv>a.height||this.Oj.cf>a.width))&&(c=!0);this.ja=c?this.ja|256:this.ja&-257;this.Xb.F()||
z.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Xb.toString());this.xx(g,this.Xb);z.dc(g)};f.aj=function(){};
function Nm(a,b,c,d,e){var g=a.W;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.Aa.F()){g=a.vd;c=a.margin;b=c.right+c.left;var h=c.top+c.bottom;c=g.width+b;g=g.height+h;d+=b;e+=h;b=Mm(a,!0);c===d&&g===e&&(b=bj);switch(b){case bj:if(c>d||g>e)Yk(a,!0),tj(a,c>d?d:c,g>e?e:g);break;case lf:Yk(a,!0);tj(a,d,e,0,0);break;case Cm:Yk(a,!0);tj(a,d,g,0,0);break;case Bm:Yk(a,!0),tj(a,c,e,0,0)}}}
f.xx=function(a,b){Om(this,!1);var c=this.ca;if(null!==c&&null!==c.h){var d=this.ca;null!==d&&(d.un!==this&&d.uF!==this&&d.yF!==this||Pm(d,!0));this.ta();a.N(b)||(c.Nl(),this.Tv(c))}};f.Tv=function(a){null!==this.zd&&Pm(a,!0)};z.defineProperty(O,{bq:"shadowVisible"},function(){return this.Js},function(a){var b=this.Js;b!==a&&(u&&null!==a&&z.g(a,"boolean",O,"shadowVisible"),this.Js=a,this.j("shadowVisible",b,a))});
O.prototype.ff=function(a,b){if(this.visible){var c=this.Xb;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)){var d=this.opacity,e=1;if(1!==d){if(0===d)return;e=a.globalAlpha;a.globalAlpha=e*d}if(a instanceof ed)a:{if(this.visible){var g=null,h=a.px;if(this instanceof I&&(this.type===Qm||this.type===Rm))Sm(this,a,b);else{var k=this.Xb;if(0!==k.width&&0!==k.height&&!isNaN(k.x)&&!isNaN(k.y)){var l=this.transform,m=this.T;0!==(this.ja&4096)===!0&&Tm(this);var c=0!==(this.ja&256),n=!1;this instanceof
qa&&(a.font=this.font);if(c){n=m.Wg()?m.Ga:m.W;if(null!==this.wi)var p=this.wi,q=p.x,r=p.y,s=p.width,p=p.height;else q=Math.max(k.x,n.x),r=Math.max(k.y,n.y),s=Math.min(k.right,n.right)-q,p=Math.min(k.bottom,n.bottom)-r;if(q>k.width+k.x||k.x>n.width+n.x||r>k.height+k.y||k.y>n.height+n.y)break a;n=!0;qd(a,1,0,0,1,0,0);a.save();a.beginPath();a.rect(q,r,s,p);a.clip()}q=!1;if(this instanceof D){var t=this,q=!0;if(!t.isVisible())break a}a.fj.pf=[1,0,0,1,0,0];r=!1;q&&this.tk&&b.ij("drawShadows")&&(s=this.Im,
a.TA(s.x*b.scale*b.jd,s.y*b.scale*b.jd,t.Ag),a.wn(),a.shadowColor=t.Hm);t=!1;this.ca&&b.ij("drawShadows")&&(t=this.ca.tk);!0===this.bq?(a.wn(),!1===r&&t&&(qd(a,1,0,0,1,0,0),a.fb(),r=!0)):!1===this.bq&&a.vn();null!==this.uc&&(Um(this,a,this.uc,!0,!0),!1===r&&t&&(qd(a,1,0,0,1,0,0),a.fb(),r=!0),this.uc instanceof Da&&this.uc.type===yd?(a.beginPath(),a.rect(k.x,k.y,k.width,k.height),a.Hg(this.uc)):a.fillRect(k.x,k.y,k.width,k.height));this instanceof I?qd(a,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy):a.fj.pf=
[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy];if(null!==this.Nb){!1===r&&t&&(qd(a,1,0,0,1,0,0),a.fb(),r=!0);var p=this.Ga,l=k=0,s=p.width,p=p.height,v=0;this instanceof X&&(p=this.kb.vb,k=p.x,l=p.y,s=p.width,p=p.height,v=this.Oe);Um(this,a,this.Nb,!0,!1);this.Nb instanceof Da&&this.Nb.type===yd?(a.beginPath(),a.rect(k-v/2,l-v/2,s+v,p+v),a.Hg(this.Nb)):a.fillRect(k-v/2,l-v/2,s+v,p+v)}t&&(null!==this.Nb||null!==this.uc||null!==m&&0!==(m.ja&512)||null!==m&&(m.type===Ek||m.type===$i)&&m.gf()!==this)?(Vm(this,!0),
null===this.bq&&a.vn()):Vm(this,!1);this.ok(a,b);t&&0!==(this.ja&512)===!0&&a.wn();q&&t&&a.vn();c&&(a.restore(),n&&a.Cf.pop());this instanceof I&&(g=a.Cf.pop());!0===r&&a.Cf.pop();null!==a.mE&&(null===g&&(h===a.px?(qd(a,1,0,0,1,0,0),g=a.Cf.pop()):g=a.px),a.mE(this,g))}}}}else{if(this instanceof I&&(this.type===Qm||this.type===Rm)){Sm(this,a,b);1!==d&&(a.globalAlpha=e);return}this instanceof G&&this.nn(!1);u&&u.cj&&u.wH(a,this);g=this.transform;h=this.T;0!==(this.ja&4096)===!0&&Tm(this);m=0!==(this.ja&
256);this instanceof qa&&(a.font=this.font);if(m){u&&u.lE&&z.trace("clip"+this.toString());n=h.Wg()?h.Ga:h.W;null!==this.wi?(t=this.wi,k=t.x,l=t.y,q=t.width,t=t.height):(k=Math.max(c.x,n.x),l=Math.max(c.y,n.y),q=Math.min(c.right,n.right)-k,t=Math.min(c.bottom,n.bottom)-l);if(k>c.width+c.x||c.x>n.width+n.x||l>c.height+c.y||c.y>n.height+n.y){1!==d&&(a.globalAlpha=e);return}u&&u.lE&&u.yH(a,k,l,q,t);a.save();a.beginPath();a.rect(k,l,q,t);a.clip()}n=!1;if(this instanceof D){n=!0;if(!this.isVisible()){1!==
d&&(a.globalAlpha=e);return}this.tk&&b.ij("drawShadows")&&(k=this.Im,a.TA(k.x*b.scale*b.jd,k.y*b.scale*b.jd,this.Ag),a.wn(),a.shadowColor=this.Hm)}k=!1;this.ca&&b.ij("drawShadows")&&(k=this.ca.tk);!0===this.bq?a.wn():!1===this.bq&&a.vn();null!==this.uc&&(Um(this,a,this.uc,!0,!0),this.uc instanceof Da&&this.uc.type===yd?(a.beginPath(),a.rect(c.x,c.y,c.width,c.height),a.Hg(this.uc)):a.fillRect(c.x,c.y,c.width,c.height));g.Pt()||a.transform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);null!==this.Nb&&(t=this.Ga,
l=c=0,q=t.width,t=t.height,r=0,this instanceof X&&(t=this.kb.vb,c=t.x,l=t.y,q=t.width,t=t.height,r=this.Oe),Um(this,a,this.Nb,!0,!1),this.Nb instanceof Da&&this.Nb.type===yd?(a.beginPath(),a.rect(c-r/2,l-r/2,q+r,t+r),a.Hg(this.Nb)):a.fillRect(c-r/2,l-r/2,q+r,t+r));u&&u.cj&&u.xH(a,this);k&&(null!==this.Nb||null!==this.uc||null!==h&&0!==(h.ja&512)||null!==h&&(h.type===Ek||h.type===$i)&&h.gf()!==this)?(Vm(this,!0),null===this.bq&&a.vn()):Vm(this,!1);this.ok(a,b);k&&0!==(this.ja&512)===!0&&a.wn();n&&
k&&a.vn();m?(a.restore(),this instanceof I?ca(a,!0):ca(a,!1)):g.Pt()||(h=1/(g.m11*g.m22-g.m12*g.m21),a.transform(g.m22*h,-g.m12*h,-g.m21*h,g.m11*h,h*(g.m21*g.dy-g.m22*g.dx),h*(g.m12*g.dx-g.m11*g.dy)))}1!==d&&(a.globalAlpha=e)}}};
function Sm(a,b,c){var d=a.Xb;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.uc&&(Um(a,b,a.uc,!0,!0),a.uc instanceof Da&&a.uc.type===yd?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),b.Hg(a.uc)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.Nb&&(Um(a,b,a.Nb,!0,!1),a.Nb instanceof Da&&a.Nb.type===yd?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),b.Hg(a.Nb)):b.fillRect(d.x,d.y,d.width,d.height)),a.ok(b,c))}O.prototype.ok=function(){};
function Um(a,b,c,d,e){if(null!==c){var g=1,h=1;if("string"===typeof c)d?b.fillStyle=c:b.strokeStyle=c;else if(c.type===ug)d?b.fillStyle=c.color:b.strokeStyle=c.color;else{var k,h=a.Ga,g=h.width,h=h.height;if(e)var l=a.W,g=l.width,h=l.height;var m=b instanceof xd;if(m&&c.bh&&(c.type===ym||c.Nn===g&&c.vy===h))k=c.bh;else{var n=l=0,p=0,q=0,r=0,s=0,s=r=0;e&&(l=a.W,g=l.width,h=l.height,r=l.x,s=l.y);l=c.start.x*g+c.start.offsetX;n=c.start.y*h+c.start.offsetY;p=c.end.x*g+c.end.offsetX;q=c.end.y*h+c.end.offsetY;
l+=r;p+=r;n+=s;q+=s;if(c.type===vg)k=b.createLinearGradient(l,n,p,q);else if(c.type===yd)s=isNaN(c.xt)?Math.max(g,h)/2:c.xt,isNaN(c.wu)?(r=0,s=Math.max(g,h)/2):r=c.wu,k=b.createRadialGradient(l,n,r,p,q,s);else if(c.type===ym)try{k=b.createPattern(c.pattern,"repeat")}catch(t){k=null}else z.ic(c.type,"Brush type");if(c.type!==ym&&(e=c.st,null!==e))for(e=e.i;e.next();)k.addColorStop(e.key,e.value);if(m&&(c.bh=k,null!==k&&(c.Nn=g,c.vy=h),null===k&&c.type===ym&&-1!==c.Nn)){c.Nn=-1;var v=a.h;null!==v&&
-1===c.Nn&&z.setTimeout(function(){v.Sp()},600)}}d?b.fillStyle=k:b.strokeStyle=k}}}O.prototype.isContainedBy=O.prototype.Pl=function(a){if(a instanceof I)a:{if(this!==a&&null!==a)for(var b=this.T;null!==b;){if(b===a){a=!0;break a}b=b.T}a=!1}else a=!1;return a};O.prototype.isVisibleObject=O.prototype.oj=function(){if(!this.visible)return!1;var a=this.T;return null!==a?a.oj():!0};
function Tm(a){if(0!==(a.ja&2048)===!0){var b=a.Jd;b.reset();if(!a.Xb.F()||!a.vd.F()){Wm(a,!1);return}b.translate(a.Xb.x,a.Xb.y);b.translate(-a.Ia.x,-a.Ia.y);var c=a.Ga;Km(a,b,c.x,c.y,c.width,c.height);Wm(a,!1);Xm(a,!0)}0!==(a.ja&4096)===!0&&(b=a.T,null===b?(a.Ak.set(a.Jd),a.jv=a.scale,Xm(a,!1)):null!==b.qh&&(c=a.Ak,c.reset(),b.Wg()?c.multiply(b.Ak):null!==b.T&&c.multiply(b.T.Ak),c.multiply(a.Jd),a.jv=a.scale*b.jv,Xm(a,!1)))}
function Km(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var h=ec;a.of&&a.of.cd()&&(h=a.of);var k=z.O();if(a instanceof D&&a.Zb!==a)for(c=a.Zb,d=c.Ga,k.tu(d.x,d.y,d.width,d.height,h),c.gl.Cb(k),k.offset(-c.Ia.x,-c.Ia.y),h=c.T;null!==h&&h!==a;)h.gl.Cb(k),k.offset(-h.Ia.x,-h.Ia.y),h=h.T;else k.tu(c,d,e,g,h);b.rotate(a.angle,k.x,k.y);z.A(k)}}f=O.prototype;
f.Q=function(a){void 0===a&&(a=!1);if(!0!==ml(this)){Yk(this,!0);Om(this,!0);var b=this.T;null!==b?a||b.Q():(a=this.h,null!==a&&(a.rg.add(this),this instanceof E&&(a.pa.qb||this.mf(),null!==this.od&&Ym(this.od)),a.Ce(!0)));if(this instanceof I){if(this.ba===Ek||this.ba===Ni)a=this.gf(),null!==a&&a.Q(!0);a=this.va.o;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==ml(d)&&(d.Aa.F()||(d instanceof aj||d instanceof I||d instanceof qa||Mm(d,!1)!==bj)&&d.Q(!0))}}}};
f.Ap=function(){!1===ml(this)&&(Yk(this,!0),Om(this,!0))};function Ym(a){if(!1===nl(a)){if(null!==a.T)a.T.Q();else{var b=a.h;null!==b&&(b.rg.add(a),a instanceof E&&a.mf(),b.Ce())}Om(a,!0)}}f.Gi=function(){0!==(this.ja&2048)===!1&&(Wm(this,!0),Xm(this,!0))};f.eA=function(){Xm(this,!0)};f.ta=function(){var a=this.ca;null!==a&&a.ta()};
function Mm(a,b){var c=a.stretch,d=a.T;if(null!==d&&d.ba===ga)return Zm(a,d.$d(a.Vb),d.Zd(a.column),b);if(null!==d&&d.ba===Ek&&d.gf()===a)return $m(a,lf,b);if(c===Am){if(null!==d){if(d.ba===$i&&d.gf()===a)return $m(a,lf,b);c=d.Xd;return c===Am?$m(a,bj,b):$m(a,c,b)}return $m(a,bj,b)}return $m(a,c,b)}
function Zm(a,b,c,d){var e=a.stretch;if(e!==Am)return $m(a,e,d);var g=e=null;switch(b.stretch){case Bm:g=!0;break;case lf:g=!0}switch(c.stretch){case Cm:e=!0;break;case lf:e=!0}b=a.T.Xd;null===e&&(e=b===Cm||b===lf);null===g&&(g=b===Bm||b===lf);return!0===e&&!0===g?$m(a,lf,d):!0===e?$m(a,Cm,d):!0===g?$m(a,Bm,d):$m(a,bj,d)}
function $m(a,b,c){if(c)return b;if(b===bj)return bj;c=a.Aa;if(c.F())return bj;a=a.angle;if(!isNaN(c.width))if(90!==a&&270!==a){if(b===Cm)return bj;if(b===lf)return Bm}else{if(b===Bm)return bj;if(b===lf)return Cm}if(!isNaN(c.height))if(90!==a&&270!==a){if(b===Bm)return bj;if(b===lf)return Cm}else{if(b===Cm)return bj;if(b===lf)return Bm}return b}
z.defineProperty(O,{pu:"segmentOrientation"},function(){return this.Bs},function(a){var b=this.Bs;b!==a&&(u&&z.Ba(a,G,O,"segmentOrientation"),this.Bs=a,this.Q(),this.j("segmentOrientation",b,a),a===Qi&&(this.angle=0))});z.defineProperty(O,{De:"segmentIndex"},function(){return this.zs},function(a){u&&z.g(a,"number",O,"segmentIndex");a=Math.round(a);var b=this.zs;b!==a&&(this.zs=a,this.Q(),this.j("segmentIndex",b,a))});
z.defineProperty(O,{NA:"segmentFraction"},function(){return this.ys},function(a){u&&z.g(a,"number",O,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.ys;b!==a&&(this.ys=a,this.Q(),this.j("segmentFraction",b,a))});z.defineProperty(O,{DF:"segmentOffset"},function(){return this.As},function(a){var b=this.As;b.N(a)||(u&&z.l(a,N,O,"segmentOffset"),this.As=a=a.V(),this.Q(),this.j("segmentOffset",b,a))});
z.defineProperty(O,{stretch:"stretch"},function(){return this.ei},function(a){var b=this.ei;b!==a&&(u&&z.Ba(a,O,O,"stretch"),this.ei=a,this.Q(),this.j("stretch",b,a))});z.defineProperty(O,{name:"name"},function(){return this.Ub},function(a){var b=this.Ub;b!==a&&(u&&z.g(a,"string",O,"name"),this.Ub=a,null!==this.ca&&(this.ca.jl=null),this.j("name",b,a))});
z.defineProperty(O,{opacity:"opacity"},function(){return this.Xc},function(a){var b=this.Xc;b!==a&&(z.g(a,"number",O,"opacity"),(0>a||1<a)&&z.ka(a,"0 <= value <= 1",O,"opacity"),this.Xc=a,this.j("opacity",b,a),a=this.h,b=this.ca,null!==a&&null!==b&&a.ta(mk(b,b.W)))});
z.defineProperty(O,{visible:"visible"},function(){return 0!==(this.ja&1)},function(a){var b=0!==(this.ja&1);b!==a&&(u&&z.g(a,"boolean",O,"visible"),this.ja^=1,this.j("visible",b,a),b=this.T,null!==b?b.Q():this instanceof D&&this.xd(a),this.ta(),an(this))});z.defineProperty(O,{jg:"pickable"},function(){return 0!==(this.ja&2)},function(a){var b=0!==(this.ja&2);b!==a&&(u&&z.g(a,"boolean",O,"pickable"),this.ja^=2,this.j("pickable",b,a))});
z.defineProperty(O,{IH:"fromLinkableDuplicates"},function(){return 0!==(this.ja&4)},function(a){var b=0!==(this.ja&4);b!==a&&(u&&z.g(a,"boolean",O,"fromLinkableDuplicates"),this.ja^=4,this.j("fromLinkableDuplicates",b,a))});z.defineProperty(O,{JH:"fromLinkableSelfNode"},function(){return 0!==(this.ja&8)},function(a){var b=0!==(this.ja&8);b!==a&&(u&&z.g(a,"boolean",O,"fromLinkableSelfNode"),this.ja^=8,this.j("fromLinkableSelfNode",b,a))});
z.defineProperty(O,{tJ:"toLinkableDuplicates"},function(){return 0!==(this.ja&16)},function(a){var b=0!==(this.ja&16);b!==a&&(u&&z.g(a,"boolean",O,"toLinkableDuplicates"),this.ja^=16,this.j("toLinkableDuplicates",b,a))});z.defineProperty(O,{uJ:"toLinkableSelfNode"},function(){return 0!==(this.ja&32)},function(a){var b=0!==(this.ja&32);b!==a&&(u&&z.g(a,"boolean",O,"toLinkableSelfNode"),this.ja^=32,this.j("toLinkableSelfNode",b,a))});
z.defineProperty(O,{Ff:"isPanelMain"},function(){return 0!==(this.ja&64)},function(a){var b=0!==(this.ja&64);b!==a&&(u&&z.g(a,"boolean",O,"isPanelMain"),this.ja^=64,this.Q(),this.j("isPanelMain",b,a))});z.defineProperty(O,{Mt:"isActionable"},function(){return 0!==(this.ja&128)},function(a){var b=0!==(this.ja&128);b!==a&&(u&&z.g(a,"boolean",O,"isActionable"),this.ja^=128,this.j("isActionable",b,a))});
z.defineProperty(O,{wl:"areaBackground"},function(){return this.uc},function(a){var b=this.uc;b!==a&&(u&&null!==a&&z.ot(a,"GraphObject.areaBackground"),a instanceof Da&&a.freeze(),this.uc=a,this.ta(),this.j("areaBackground",b,a))});z.defineProperty(O,{background:"background"},function(){return this.Nb},function(a){var b=this.Nb;b!==a&&(u&&null!==a&&z.ot(a,"GraphObject.background"),a instanceof Da&&a.freeze(),this.Nb=a,this.ta(),this.j("background",b,a))});
function Vm(a,b){a.ja=b?a.ja|512:a.ja&-513}function bn(a,b){a.ja=b?a.ja|1024:a.ja&-1025}function Wm(a,b){a.ja=b?a.ja|2048:a.ja&-2049}function Xm(a,b){a.ja=b?a.ja|4096:a.ja&-4097}function ml(a){return 0!==(a.ja&8192)}function Yk(a,b){a.ja=b?a.ja|8192:a.ja&-8193}function nl(a){return 0!==(a.ja&16384)}function Om(a,b){a.ja=b?a.ja|16384:a.ja&-16385}
z.w(O,{ca:"part"},function(){if(this instanceof D)return this;if(null!==this.Am)return this.Am;var a;for(a=this.T;a;){if(a instanceof D)return this.Am=a;a=a.T}return null});z.w(O,{T:"panel"},function(){return this.mh});O.prototype.Tl=function(a){this.mh=a};z.w(O,{layer:"layer"},function(){var a=this.ca;return null!==a?a.layer:null},{configurable:!0});z.w(O,{h:"diagram"},function(){var a=this.ca;return null!==a?a.h:null},{configurable:!0});
z.defineProperty(O,{position:"position"},function(){return this.sb},function(a){var b=this.sb;b.N(a)||(u&&z.l(a,N,O,"position"),a=a.V(),this.RA(a,b)&&this.j("position",b,a))});O.prototype.RA=function(a){this.sb=a;Ym(this);this.Gi();return!0};O.prototype.Px=function(a,b){this.sb.n(a,b);cn(this);this.Gi()};z.w(O,{W:"actualBounds"},function(){return this.Xb});
z.defineProperty(O,{scale:"scale"},function(){return this.bc},function(a){var b=this.bc;b!==a&&(u&&z.p(a,O,"scale"),0>=a&&z.k("GraphObject.scale for "+this+" must be greater than zero, not: "+a),this.bc=a,this.Gi(),this.Q(),this.j("scale",b,a))});z.defineProperty(O,{angle:"angle"},function(){return this.bm},function(a){var b=this.bm;b!==a&&(u&&z.p(a,O,"angle"),a%=360,0>a&&(a+=360),b!==a&&(this.bm=a,this.Q(),this.Gi(),this.j("angle",b,a)))});
z.defineProperty(O,{Aa:"desiredSize"},function(){return this.tf},function(a){u&&z.l(a,Ea,O,"desiredSize");var b=a.width,c=a.height,d=this.tf,e=d.width,g=d.height;(e===b||isNaN(e)&&isNaN(b))&&(g===c||isNaN(g)&&isNaN(c))||(this.tf=a=a.V(),this.Q(),this instanceof X&&this.qe(),this.j("desiredSize",d,a),0!==(this.ja&1024)&&(a=this.ca,null!==a&&(Im(this,a,"width"),Im(this,a,"height"))))});
z.defineProperty(O,{width:"width"},function(){return this.tf.width},function(a){if(this.tf.width!==a){u&&z.g(a,"number",O,"width");var b=this.tf;this.tf=a=(new Ea(a,this.tf.height)).freeze();this.Q();this instanceof X&&this.qe();this.j("desiredSize",b,a);b=this.ca;null!==b&&0!==(this.ja&1024)&&Im(this,b,"width")}});
z.defineProperty(O,{height:"height"},function(){return this.tf.height},function(a){if(this.tf.height!==a){u&&z.g(a,"number",O,"height");var b=this.tf;this.tf=a=(new Ea(this.tf.width,a)).freeze();this.Q();this instanceof X&&this.qe();this.j("desiredSize",b,a);b=this.ca;null!==b&&0!==(this.ja&1024)&&Im(this,b,"height")}});
z.defineProperty(O,{dg:"minSize"},function(){return this.Uj},function(a){var b=this.Uj;b.N(a)||(u&&z.l(a,Ea,O,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Uj=a,this.Q(),this.j("minSize",b,a))});z.defineProperty(O,{Xe:"maxSize"},function(){return this.Sj},function(a){var b=this.Sj;b.N(a)||(u&&z.l(a,Ea,O,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.Sj=a,this.Q(),this.j("maxSize",b,a))});
z.w(O,{Ia:"measuredBounds"},function(){return this.vd});z.w(O,{Ga:"naturalBounds"},function(){return this.Wc},{configurable:!0});z.defineProperty(O,{margin:"margin"},function(){return this.Er},function(a){"number"===typeof a?a=new Db(a):u&&z.l(a,Db,O,"margin");var b=this.Er;b.N(a)||(this.Er=a=a.V(),this.Q(),this.j("margin",b,a))});z.w(O,{transform:null},function(){0!==(this.ja&2048)===!0&&Tm(this);return this.Jd});z.w(O,{qh:null},function(){0!==(this.ja&4096)===!0&&Tm(this);return this.Ak});
z.defineProperty(O,{alignment:"alignment"},function(){return this.Ie},function(a){var b=this.Ie;b.N(a)||(u&&z.l(a,Q,O,"alignment"),a.Be()&&!a.bd()&&z.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+a),this.Ie=a=a.V(),Ym(this),this.j("alignment",b,a))});z.defineProperty(O,{column:"column"},function(){return this.wq},function(a){u&&z.p(a,O,"column");a=Math.round(a);var b=this.wq;b!==a&&(0>a&&z.ka(a,">= 0",O,"column"),this.wq=a,this.Q(),this.j("column",b,a))});
z.defineProperty(O,{dH:"columnSpan"},function(){return this.xi},function(a){u&&z.g(a,"number",O,"columnSpan");a=Math.round(a);var b=this.xi;b!==a&&(1>a&&z.ka(a,">= 1",O,"columnSpan"),this.xi=a,this.Q(),this.j("columnSpan",b,a))});z.defineProperty(O,{Vb:"row"},function(){return this.us},function(a){u&&z.p(a,O,"row");a=Math.round(a);var b=this.us;b!==a&&(0>a&&z.ka(a,">= 0",O,"row"),this.us=a,this.Q(),this.j("row",b,a))});
z.defineProperty(O,{rowSpan:"rowSpan"},function(){return this.Ui},function(a){u&&z.g(a,"number",O,"rowSpan");a=Math.round(a);var b=this.Ui;b!==a&&(1>a&&z.ka(a,">= 1",O,"rowSpan"),this.Ui=a,this.Q(),this.j("rowSpan",b,a))});z.defineProperty(O,{Sx:"spanAllocation"},function(){return this.Os},function(a){var b=this.Os;b!==a&&(null!==a&&z.g(a,"function",O,"spanAllocation"),this.Os=a,this.j("spanAllocation",b,a))});
z.defineProperty(O,{kk:"alignmentFocus"},function(){return this.oq},function(a){var b=this.oq;b.N(a)||(u&&z.l(a,Q,O,"alignmentFocus"),!a.Be()||a.bd()||a.N(Yb)&&this instanceof E||z.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+a),this.oq=a=a.V(),this.Q(),this.j("alignmentFocus",b,a))});
z.defineProperty(O,{zd:"portId"},function(){return this.fs},function(a){var b=this.fs;if(b!==a){u&&null!==a&&z.g(a,"string",O,"portId");var c=this.ca;null===c||c instanceof E||(z.k("Cannot set portID on a Link: "+a),c=null);null!==b&&null!==c&&dn(c,this);this.fs=a;if(null!==a&&c){c.Rh=!0;null===c.Ed&&en(c);var d=this.zd;null!==d&&c.Ed.add(d,this)}this.j("portId",b,a)}});function an(a){var b=a.ca;b instanceof E&&(a=a.h,null===a||a.pa.qb||b.mf())}
z.defineProperty(O,{Eb:"toSpot"},function(){return null!==this.la?this.la.hk:Yb},function(a){this.Ue();var b=this.la.hk;b.N(a)||(u&&z.l(a,Q,O,"toSpot"),a=a.V(),this.la.hk=a,this.j("toSpot",b,a),an(this))});z.defineProperty(O,{Yl:"toEndSegmentLength"},function(){return null!==this.la?this.la.fk:10},function(a){this.Ue();var b=this.la.fk;b!==a&&(u&&z.g(a,"number",O,"toEndSegmentLength"),0>a&&z.ka(a,">= 0",O,"toEndSegmentLength"),this.la.fk=a,this.j("toEndSegmentLength",b,a),an(this))});
z.defineProperty(O,{zu:"toEndSegmentDirection"},function(){return null!==this.la?this.la.ek:Gm},function(a){this.Ue();var b=this.la.ek;b!==a&&(u&&z.Ba(a,E,O,"toEndSegmentDirection"),this.la.ek=a,this.j("toEndSegmentDirection",b,a),an(this))});z.defineProperty(O,{Au:"toShortLength"},function(){return null!==this.la?this.la.gk:0},function(a){this.Ue();var b=this.la.gk;b!==a&&(u&&z.g(a,"number",O,"toShortLength"),this.la.gk=a,this.j("toShortLength",b,a),an(this))});
z.defineProperty(O,{SF:"toLinkable"},function(){return this.Vs},function(a){var b=this.Vs;b!==a&&(u&&null!==a&&z.g(a,"boolean",O,"toLinkable"),this.Vs=a,this.j("toLinkable",b,a))});z.defineProperty(O,{vJ:"toMaxLinks"},function(){return this.Ws},function(a){var b=this.Ws;b!==a&&(u&&z.g(a,"number",O,"toMaxLinks"),0>a&&z.ka(a,">= 0",O,"toMaxLinks"),this.Ws=a,this.j("toMaxLinks",b,a))});
z.defineProperty(O,{Db:"fromSpot"},function(){return null!==this.la?this.la.Hj:Yb},function(a){this.Ue();var b=this.la.Hj;b.N(a)||(u&&z.l(a,Q,O,"fromSpot"),a=a.V(),this.la.Hj=a,this.j("fromSpot",b,a),an(this))});z.defineProperty(O,{Jl:"fromEndSegmentLength"},function(){return null!==this.la?this.la.Fj:10},function(a){this.Ue();var b=this.la.Fj;b!==a&&(u&&z.g(a,"number",O,"fromEndSegmentLength"),0>a&&z.ka(a,">= 0",O,"fromEndSegmentLength"),this.la.Fj=a,this.j("fromEndSegmentLength",b,a),an(this))});
z.defineProperty(O,{Ft:"fromEndSegmentDirection"},function(){return null!==this.la?this.la.Ej:Gm},function(a){this.Ue();var b=this.la.Ej;b!==a&&(u&&z.Ba(a,E,O,"fromEndSegmentDirection"),this.la.Ej=a,this.j("fromEndSegmentDirection",b,a),an(this))});z.defineProperty(O,{Gt:"fromShortLength"},function(){return null!==this.la?this.la.Gj:0},function(a){this.Ue();var b=this.la.Gj;b!==a&&(u&&z.g(a,"number",O,"fromShortLength"),this.la.Gj=a,this.j("fromShortLength",b,a),an(this))});
z.defineProperty(O,{uE:"fromLinkable"},function(){return this.Zq},function(a){var b=this.Zq;b!==a&&(u&&null!==a&&z.g(a,"boolean",O,"fromLinkable"),this.Zq=a,this.j("fromLinkable",b,a))});z.defineProperty(O,{Yz:"fromMaxLinks"},function(){return this.$q},function(a){var b=this.$q;b!==a&&(u&&z.g(a,"number",O,"fromMaxLinks"),0>a&&z.ka(a,">= 0",O,"fromMaxLinks"),this.$q=a,this.j("fromMaxLinks",b,a))});
z.defineProperty(O,{cursor:"cursor"},function(){return this.Hq},function(a){var b=this.Hq;b!==a&&(z.g(a,"string",O,"cursor"),this.Hq=a,this.j("cursor",b,a))});z.defineProperty(O,{click:"click"},function(){return null!==this.ma?this.ma.vi:null},function(a){Dm(this);var b=this.ma.vi;b!==a&&(null!==a&&z.g(a,"function",O,"click"),this.ma.vi=a,this.j("click",b,a))});
z.defineProperty(O,{wt:"doubleClick"},function(){return null!==this.ma?this.ma.Di:null},function(a){Dm(this);var b=this.ma.Di;b!==a&&(null!==a&&z.g(a,"function",O,"doubleClick"),this.ma.Di=a,this.j("doubleClick",b,a))});z.defineProperty(O,{Iz:"contextClick"},function(){return null!==this.ma?this.ma.yi:null},function(a){Dm(this);var b=this.ma.yi;b!==a&&(null!==a&&z.g(a,"function",O,"contextClick"),this.ma.yi=a,this.j("contextClick",b,a))});
z.defineProperty(O,{au:"mouseEnter"},function(){return null!==this.ma?this.ma.Rr:null},function(a){Dm(this);var b=this.ma.Rr;b!==a&&(null!==a&&z.g(a,"function",O,"mouseEnter"),this.ma.Rr=a,this.j("mouseEnter",b,a))});z.defineProperty(O,{bu:"mouseLeave"},function(){return null!==this.ma?this.ma.Sr:null},function(a){Dm(this);var b=this.ma.Sr;b!==a&&(null!==a&&z.g(a,"function",O,"mouseLeave"),this.ma.Sr=a,this.j("mouseLeave",b,a))});
z.defineProperty(O,{uA:"mouseOver"},function(){return null!==this.ma?this.ma.Qi:null},function(a){Dm(this);var b=this.ma.Qi;b!==a&&(null!==a&&z.g(a,"function",O,"mouseOver"),this.ma.Qi=a,this.j("mouseOver",b,a))});z.defineProperty(O,{tA:"mouseHover"},function(){return null!==this.ma?this.ma.Pi:null},function(a){Dm(this);var b=this.ma.Pi;b!==a&&(null!==a&&z.g(a,"function",O,"mouseHover"),this.ma.Pi=a,this.j("mouseHover",b,a))});
z.defineProperty(O,{sA:"mouseHold"},function(){return null!==this.ma?this.ma.Oi:null},function(a){Dm(this);var b=this.ma.Oi;b!==a&&(null!==a&&z.g(a,"function",O,"mouseHold"),this.ma.Oi=a,this.j("mouseHold",b,a))});z.defineProperty(O,{HI:"mouseDragEnter"},function(){return null!==this.ma?this.ma.Pr:null},function(a){Dm(this);var b=this.ma.Pr;b!==a&&(null!==a&&z.g(a,"function",O,"mouseDragEnter"),this.ma.Pr=a,this.j("mouseDragEnter",b,a))});
z.defineProperty(O,{II:"mouseDragLeave"},function(){return null!==this.ma?this.ma.Qr:null},function(a){Dm(this);var b=this.ma.Qr;b!==a&&(null!==a&&z.g(a,"function",O,"mouseDragLeave"),this.ma.Qr=a,this.j("mouseDragLeave",b,a))});z.defineProperty(O,{rA:"mouseDrop"},function(){return null!==this.ma?this.ma.Ni:null},function(a){Dm(this);var b=this.ma.Ni;b!==a&&(null!==a&&z.g(a,"function",O,"mouseDrop"),this.ma.Ni=a,this.j("mouseDrop",b,a))});
z.defineProperty(O,{AD:"actionDown"},function(){return null!==this.ma?this.ma.iq:null},function(a){Dm(this);var b=this.ma.iq;b!==a&&(null!==a&&z.g(a,"function",O,"actionDown"),this.ma.iq=a,this.j("actionDown",b,a))});z.defineProperty(O,{BD:"actionMove"},function(){return null!==this.ma?this.ma.jq:null},function(a){Dm(this);var b=this.ma.jq;b!==a&&(null!==a&&z.g(a,"function",O,"actionMove"),this.ma.jq=a,this.j("actionMove",b,a))});
z.defineProperty(O,{CD:"actionUp"},function(){return null!==this.ma?this.ma.kq:null},function(a){Dm(this);var b=this.ma.kq;b!==a&&(null!==a&&z.g(a,"function",O,"actionUp"),this.ma.kq=a,this.j("actionUp",b,a))});z.defineProperty(O,{zD:"actionCancel"},function(){return null!==this.ma?this.ma.hq:null},function(a){Dm(this);var b=this.ma.hq;b!==a&&(null!==a&&z.g(a,"function",O,"actionCancel"),this.ma.hq=a,this.j("actionCancel",b,a))});
z.defineProperty(O,{$A:"toolTip"},function(){return null!==this.ma?this.ma.Xi:null},function(a){Dm(this);var b=this.ma.Xi;b!==a&&(null!==a&&z.l(a,da,O,"toolTip"),this.ma.Xi=a,this.j("toolTip",b,a))});z.defineProperty(O,{contextMenu:"contextMenu"},function(){return null!==this.ma?this.ma.zi:null},function(a){Dm(this);var b=this.ma.zi;b!==a&&(null!==a&&z.l(a,da,O,"contextMenu"),this.ma.zi=a,this.j("contextMenu",b,a))});
O.prototype.bind=O.prototype.bind=function(a){a.Bg=this;var b=this.np();null!==b&&fn(b)&&z.k("Cannot add a Binding to a template that has already been copied: "+a);null===this.Ac&&(this.Ac=new J($g));this.Ac.add(a)};O.prototype.findTemplateBinder=O.prototype.np=function(){for(var a=this instanceof I?this:this.T;null!==a;){if(null!==a.Ok)return a;a=a.T}return null};O.prototype.setProperties=function(a){z.qu(this,a)};var gn;
O.make=gn=function(a,b){var c=arguments,d=null,e=null;if("function"===typeof a)e=a;else if("string"===typeof a){var g=hn.na(a);"function"===typeof g?(c=z.Al(arguments),d=g(c)):e=aa[a]}null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&z.k("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),z.k("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||z.k("GraphObject.make requires a class function or class name, not: "+
a),d=new e);g=1;if(d instanceof B&&1<c.length){var h=d,e=c[1];if("string"===typeof e||e instanceof HTMLDivElement)Ck(h,e),g++}for(;g<c.length;g++)e=c[g],void 0===e?z.k("Undefined value at argument "+g+" for object being constructed by GraphObject.make: "+d):jn(d,e);return d};
function jn(a,b){if("string"===typeof b)if(a instanceof qa)a.text=b;else if(a instanceof X)a.Hb=b;else if(a instanceof wk)a.source=b;else if(a instanceof I){var c=Ja(I,b);null!==c?a.type=c:z.k("Unknown Panel type as an argument to GraphObject.make: "+b)}else a instanceof Da?(c=Ja(Da,b),null!==c?a.type=c:z.k("Unknown Brush type as an argument to GraphObject.make: "+b)):a instanceof hf?(c=Ja(hf,b),null!==c?a.type=c:z.k("Unknown Geometry type as an argument to GraphObject.make: "+b)):a instanceof Qf?
(c=Ja(Qf,b),null!==c?a.type=c:z.k("Unknown PathSegment type as an argument to GraphObject.make: "+b)):z.k("Unable to use a string as an argument to GraphObject.make: "+b);else if(b instanceof O)c=b,a instanceof I||z.k("A GraphObject can only be added to a Panel, not to: "+a),a.add(c);else if(b instanceof Ig){var d=b,c=a,e;d.re&&c.getRowDefinition?e=c.getRowDefinition(d.index):!d.re&&c.getColumnDefinition?e=c.getColumnDefinition(d.index):z.k("A RowColumnDefinition can only be added to a Panel, not to: "+
a);e.tt(d)}else if(b instanceof Ba)a instanceof G&&b.Ae===G?2===(b.value&2)?a.Ix=b:b===Xi||b===Pi||b===Oi?a.Se=b:b===kn||b===ln||b===mn?a.it=b:b!==nn&&b!==Qi&&z.k("Unknown Link enum value for a Link property: "+b):a instanceof I&&b.Ae===I?a.type=b:a instanceof qa&&b.Ae===qa?a.hG=b:a instanceof X&&(b===bj||b===dj||b===ej||b===Am)?a.Zz=b:a instanceof wk&&(b===bj||b===dj||b===ej)?a.WH=b:a instanceof O&&b.Ae===G?(c=a,0===b.name.indexOf("Orient")?c.pu=b:z.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+
b)):a instanceof O&&b.Ae===O?a.stretch=b:a instanceof Ig&&b.Ae===Ig?a.uu=b:a instanceof B&&b.Ae===B?a.xl=b:a instanceof Da&&b.Ae===Da?a.type=b:a instanceof hf&&b.Ae===hf?a.type=b:a instanceof Qf&&b.Ae===Qf?a.type=b:a instanceof $g&&b.Ae===$g?a.mode=b:a instanceof Tf&&b.Ae===Tf?a.Dc=b:a instanceof Y&&b.Ae===Y?0===b.name.indexOf("Alignment")?a.alignment=b:0===b.name.indexOf("Arrangement")?a.Yf=b:0===b.name.indexOf("Compaction")?a.compaction=b:0===b.name.indexOf("Path")?a.path=b:0===b.name.indexOf("Sorting")?
a.sorting=b:0===b.name.indexOf("Style")?a.yJ=b:z.k("Unknown enum value: "+b):a instanceof on&&b.Ae===on?0===b.name.indexOf("Aggressive")?a.RG=b:0===b.name.indexOf("Cycle")?a.lH=b:0===b.name.indexOf("Init")?a.aI=b:0===b.name.indexOf("Layer")?a.pI=b:z.k("Unknown enum value: "+b):a instanceof tm&&b.Ae===tm?b===pn||b===qn||b===rn||b===sn?a.sorting=b:b===tn||b===un?a.Yf=b:b===vn||b===wn?a.alignment=b:z.k("Unknown enum value: "+b):a instanceof xn&&b.Ae===xn?b===yn||b===Cn||b===En||b===Fn||b===Gn?a.sorting=
b:b===Hn||b===In||b===Jn||b===Kn?a.direction=b:b===Ln||b===Mn||b===Nn||b===On?a.Yf=b:b===Pn||b===Qn?a.vx=b:z.k("Unknown enum value: "+b):z.k("No property to set for this enum value: "+b);else if(b instanceof $g)a instanceof O?a.bind(b):a instanceof Ig?a.bind(b):z.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof kf)a instanceof hf?a.cc.add(b):z.k("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof Qf)a instanceof
kf?a.Ab.add(b):z.k("A PathSegment can only be added to a PathFigure, not to: "+a);else if(b instanceof yg)a instanceof B?a.Sb=b:a instanceof F?a.Sb=b:z.k("A Layout can only be assigned to a Diagram or a Group, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)jn(a,b[c]);else if("object"===typeof b&&null!==b)if(a instanceof Da){e=new ma;for(c in b)d=parseFloat(c),isNaN(d)?e[c]=b[c]:a.addColorStop(d,b[c]);z.qu(a,e)}else if(a instanceof Ig){void 0!==b.row?(e=b.row,(void 0===e||null===e||Infinity===
e||isNaN(e)||0>e)&&z.k("Must specify non-negative integer row for RowColumnDefinition "+b+", not: "+e),a.re=!0,a.index=e):void 0!==b.column&&(e=b.column,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&z.k("Must specify non-negative integer column for RowColumnDefinition "+b+", not: "+e),a.re=!1,a.index=e);e=new ma;for(c in b)"row"!==c&&"column"!==c&&(e[c]=b[c]);z.qu(a,e)}else z.qu(a,b);else z.k('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}
var hn=new na("string","function");O.getBuilders=function(){var a=new na("string","function"),b;for(b in hn)if(b!==b.toLowerCase()){var c=hn[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};var Rn;O.defineBuilder=Rn=function(a,b){z.g(a,"string",O,"defineBuilder:name");z.g(b,"function",O,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||z.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);hn.add(a,b)};var Sn;
O.takeBuilderArgument=Sn=function(a,b,c){void 0===c&&(c=null);var d=a[1];if("function"===typeof c?c(d):"string"===typeof d)return a.splice(1,1),d;if(void 0===b)throw Error("no "+("function"===typeof c?"satisfactory":"string")+" argument for GraphObject builder "+a[0]);return b};
Rn("Button",function(){var a=new Da(vg);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Da(vg);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");a=gn(I,Ek,{Mt:!0},{_buttonFillNormal:a,_buttonStrokeNormal:"gray",_buttonFillOver:b,_buttonStrokeOver:"blue"},gn(X,{name:"ButtonBorder",Hb:"Rectangle",C:new Q(0,0,2.761423749153968,2.761423749153968),D:new Q(1,1,-2.761423749153968,-2.761423749153968),fill:a,stroke:"gray"}));a.au=function(a,b){var e=b.oe("ButtonBorder");if(e instanceof
X){var g=b._buttonFillOver;b._buttonFillNormal=e.fill;e.fill=g;g=b._buttonStrokeOver;b._buttonStrokeNormal=e.stroke;e.stroke=g}};a.bu=function(a,b){var e=b.oe("ButtonBorder");e instanceof X&&(e.fill=b._buttonFillNormal,e.stroke=b._buttonStrokeNormal)};return a});
Rn("TreeExpanderButton",function(){var a=gn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},gn(X,{name:"ButtonIcon",Hb:"MinusLine",Aa:ae},(new $g("figure","isTreeExpanded",function(a,c){var d=c.T;return a?d._treeExpandedFigure:d._treeCollapsedFigure})).wx()),{visible:!1},(new $g("visible","isTreeLeaf",function(a){return!a})).wx());a.click=function(a,c){var d=c.ca;d instanceof da&&(d=d.Xf);if(d instanceof E){var e=d.h;if(null!==e){e=e.wb;if(d.wd){if(!e.canCollapseTree(d))return}else if(!e.canExpandTree(d))return;
a.Gc=!0;d.wd?e.collapseTree(d):e.expandTree(d)}}};return a});
Rn("SubGraphExpanderButton",function(){var a=gn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},gn(X,{name:"ButtonIcon",Hb:"MinusLine",Aa:ae},(new $g("figure","isSubGraphExpanded",function(a,c){var d=c.T;return a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure})).wx()));a.click=function(a,c){var d=c.ca;d instanceof da&&(d=d.Xf);if(d instanceof F){var e=d.h;if(null!==e){e=e.wb;if(d.se){if(!e.canCollapseSubGraph(d))return}else if(!e.canExpandSubGraph(d))return;a.Gc=
!0;d.se?e.collapseSubGraph(d):e.expandSubGraph(d)}}};return a});Rn("ContextMenuButton",function(){var a=gn("Button");a.stretch=Cm;var b=a.oe("ButtonBorder");b instanceof X&&(b.Hb="Rectangle",b.C=new Q(0,0,2,3),b.D=new Q(1,1,-2,-2));return a});
Rn("PanelExpanderButton",function(a){var b=Sn(a,"COLLAPSIBLE");a=gn("Button",gn(X,"TriangleUp",{Aa:new Ea(6,4)},(new $g("figure","visible",function(a){return a?"TriangleUp":"TriangleDown"})).wx(b)));var c=a.oe("ButtonBorder");c instanceof X&&(c.stroke=null,c.fill="transparent");a.click=function(a,c){var g=c.h;if(null!==g&&!g.ib){var h=c.ca.oe(b);null!==h&&(g.Wb("Collapse/Expand Panel"),h.visible=!h.visible,g.Kd("Collapse/Expand Panel"))}};return a});
Rn("CheckBoxButton",function(a){var b=Sn(a);a=gn("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},gn(X,{name:"ButtonIcon",KH:"M0 4 L3 9 9 0",ub:2,stretch:lf,Zz:dj,visible:!1},""!==b?(new $g("visible",b)).xI():[]));a.click=function(a,d){if(!(a.h.ib||""!==b&&a.h.ha.ib)){a.Gc=!0;var e=d.oe("ButtonIcon");e.h.Wb("checkbox");e.visible=!e.visible;"function"===typeof d._doClick&&d._doClick(a,d);e.h.Kd("checkbox")}};return a});
Rn("CheckBox",function(a){a=Sn(a);a=gn("CheckBoxButton",a,{name:"Button",margin:new Db(0,1,0,0)});var b=gn(I,"Horizontal",a,{Mt:!0,margin:1,_buttonFillNormal:a._buttonFillNormal,_buttonStrokeNormal:a._buttonStrokeNormal,_buttonFillOver:a._buttonFillOver,_buttonStrokeOver:a._buttonStrokeOver,au:a.au,bu:a.bu,click:a.click,_buttonClick:a.click});a.au=null;a.bu=null;a.click=null;return b});
function Em(){this.zi=this.Xi=this.hq=this.kq=this.jq=this.iq=this.Ni=this.Qr=this.Pr=this.Oi=this.Pi=this.Qi=this.Sr=this.Rr=this.yi=this.Di=this.vi=null}Em.prototype.copy=function(){var a=new Em;a.vi=this.vi;a.Di=this.Di;a.yi=this.yi;a.Rr=this.Rr;a.Sr=this.Sr;a.Qi=this.Qi;a.Pi=this.Pi;a.Oi=this.Oi;a.Pr=this.Pr;a.Qr=this.Qr;a.Ni=this.Ni;a.iq=this.iq;a.jq=this.jq;a.kq=this.kq;a.hq=this.hq;a.Xi=this.Xi;a.zi=this.zi;return a};
function I(a){O.call(this);void 0===a?0===arguments.length?this.ba=gj:z.k("invalid argument to Panel constructor: undefined"):(z.Ba(a,I,I,"type"),this.ba=a);this.va=new J(O);this.df=Kd;this.eh=!1;this.ba===Hk&&(this.eh=!0);this.hr=!1;this.Lq=Pc;this.Ci=Am;this.ba===ga&&Tn(this);this.Yo=dj;this.cr=ce;this.dr=Id;this.Ok=this.fe=null;this.vr=NaN;this.tg=this.Ji=null;this.uo="category";this.sg=null;this.Zi=new w(NaN,NaN,NaN,NaN);this.Km=null;this.Rh=!1;this.vs=null}z.Ra(I,O);z.ji(I);z.ia("Panel",I);
function Tn(a){a.Bj=Kd;a.Oh=1;a.Bi=null;a.gm=null;a.Nh=1;a.Mh=null;a.fm=null;a.Wd=[];a.Sd=[];a.Fm=Un;a.em=Un;a.Yi=0;a.Ki=0}
I.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.ba=this.ba;a.df=this.df.V();a.eh=this.eh;a.hr=this.hr;a.Lq=this.Lq.V();a.Ci=this.Ci;if(a.ba===ga){a.Bj=this.Bj.V();a.Oh=this.Oh;a.Bi=this.Bi;a.gm=this.gm;a.Nh=this.Nh;a.Mh=this.Mh;a.fm=this.fm;var b=[];if(0<this.Wd.length)for(var c=this.Wd,d=c.length,e=0;e<d;e++)if(void 0!==c[e]){var g=c[e].copy();g.Tl(a);b[e]=g}a.Wd=b;b=[];if(0<this.Sd.length)for(c=this.Sd,d=c.length,e=0;e<d;e++)void 0!==c[e]&&(g=c[e].copy(),g.Tl(a),
b[e]=g);a.Sd=b;a.Fm=this.Fm;a.em=this.em;a.Yi=this.Yi;a.Ki=this.Ki}a.Yo=this.Yo;a.cr=this.cr.V();a.dr=this.dr.V();a.fe=this.fe;a.Ok=this.Ok;a.vr=this.vr;a.Ji=this.Ji;a.tg=this.tg;a.uo=this.uo;a.Zi.assign(this.Zi);a.Rh=this.Rh;null!==this.vs&&(a.vs=this.vs)};I.prototype.ki=function(a){O.prototype.ki.call(this,a);a.va=this.va;for(var b=a.va.o,c=b.length,d=0;d<c;d++)b[d].mh=a;a.Km=null};
I.prototype.copy=function(){var a=O.prototype.copy.call(this);if(null!==a){for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d].copy(),g=a;e.Tl(g);e.Am=null;var h=g.va,k=h.count;h.Md(k,e);h=g.ca;if(null!==h){h.jl=null;null!==e.zd&&h instanceof E&&(h.Rh=!0);var l=g.h;null!==l&&l.pa.qb||h.Rc(Wf,"elements",g,null,e,null,k)}}return a}return null};I.prototype.toString=function(){return"Panel("+this.type+")#"+z.nd(this)};var gj;I.Position=gj=z.s(I,"Position",0);I.Horizontal=z.s(I,"Horizontal",1);var Dk;
I.Vertical=Dk=z.s(I,"Vertical",2);var $i;I.Spot=$i=z.s(I,"Spot",3);var Ek;I.Auto=Ek=z.s(I,"Auto",4);var ga;I.Table=ga=z.s(I,"Table",5);I.Viewbox=z.s(I,"Viewbox",6);var Qm;I.TableRow=Qm=z.s(I,"TableRow",7);var Rm;I.TableColumn=Rm=z.s(I,"TableColumn",8);var Ni;I.Link=Ni=z.s(I,"Link",9);var Hk;I.Grid=Hk=z.s(I,"Grid",10);
z.defineProperty(I,{type:"type"},function(){return this.ba},function(a){var b=this.ba;b!==a&&(u&&z.Ba(a,I,I,"type"),b!==Qm&&b!==Rm||z.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.ba=a,this.ba===Hk?this.eh=!0:this.ba===ga&&Tn(this),this.Q(),this.j("type",b,a))});z.w(I,{elements:"elements"},function(){return this.va.i});z.w(I,{Ga:"naturalBounds"},function(){return this.Wc});
z.defineProperty(I,{padding:"padding"},function(){return this.df},function(a){"number"===typeof a?(0>a&&z.ka(a,">= 0",I,"padding"),a=new Db(a)):(z.l(a,Db,I,"padding"),0>a.left&&z.ka(a.left,">= 0",I,"padding:value.left"),0>a.right&&z.ka(a.right,">= 0",I,"padding:value.right"),0>a.top&&z.ka(a.top,">= 0",I,"padding:value.top"),0>a.bottom&&z.ka(a.bottom,">= 0",I,"padding:value.bottom"));var b=this.df;b.N(a)||(this.df=a=a.V(),this.Q(),this.j("padding",b,a))});
z.defineProperty(I,{Cl:"defaultAlignment"},function(){return this.Lq},function(a){var b=this.Lq;b.N(a)||(u&&z.l(a,Q,I,"defaultAlignment"),this.Lq=a=a.V(),this.Q(),this.j("defaultAlignment",b,a))});z.defineProperty(I,{Xd:"defaultStretch"},function(){return this.Ci},function(a){var b=this.Ci;b!==a&&(z.Ba(a,O,I,"defaultStretch"),this.Ci=a,this.Q(),this.j("defaultStretch",b,a))});
z.defineProperty(I,{qK:"defaultSeparatorPadding"},function(){return void 0===this.Bj?Kd:this.Bj},function(a){if(void 0!==this.Bj){"number"===typeof a?a=new Db(a):u&&z.l(a,Db,I,"defaultSeparatorPadding");var b=this.Bj;b.N(a)||(this.Bj=a=a.V(),this.j("defaultSeparatorPadding",b,a))}});
z.defineProperty(I,{oK:"defaultRowSeparatorStroke"},function(){return void 0===this.Bi?null:this.Bi},function(a){var b=this.Bi;b!==a&&(null===a||"string"===typeof a||a instanceof Da)&&(a instanceof Da&&a.freeze(),this.Bi=a,this.j("defaultRowSeparatorStroke",b,a))});z.defineProperty(I,{pK:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Oh?1:this.Oh},function(a){if(void 0!==this.Oh){var b=this.Oh;b!==a&&isFinite(a)&&0<=a&&(this.Oh=a,this.j("defaultRowSeparatorStrokeWidth",b,a))}});
z.defineProperty(I,{nK:"defaultRowSeparatorDashArray"},function(){return void 0===this.gm?null:this.gm},function(a){if(void 0!==this.gm){var b=this.gm;if(b!==a){null===a||Array.isArray(a)||z.ic(a,"Array",I,"defaultRowSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("defaultRowSeparatorDashArray value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.gm=a;this.ta();
this.j("defaultRowSeparatorDashArray",b,a)}}});z.defineProperty(I,{iK:"defaultColumnSeparatorStroke"},function(){return void 0===this.Mh?null:this.Mh},function(a){if(void 0!==this.Mh){var b=this.Mh;b!==a&&(null===a||"string"===typeof a||a instanceof Da)&&(a instanceof Da&&a.freeze(),this.Mh=a,this.j("defaultColumnSeparatorStroke",b,a))}});
z.defineProperty(I,{jK:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Nh?1:this.Nh},function(a){if(void 0!==this.Nh){var b=this.Nh;b!==a&&isFinite(a)&&0<=a&&(this.Nh=a,this.j("defaultColumnSeparatorStrokeWidth",b,a))}});
z.defineProperty(I,{hK:"defaultColumnSeparatorDashArray"},function(){return void 0===this.fm?null:this.fm},function(a){if(void 0!==this.fm){var b=this.fm;if(b!==a){null===a||Array.isArray(a)||z.ic(a,"Array",I,"defaultColumnSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("defaultColumnSeparatorDashArray value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.fm=
a;this.ta();this.j("defaultColumnSeparatorDashArray",b,a)}}});z.defineProperty(I,{FL:"viewboxStretch"},function(){return this.Yo},function(a){var b=this.Yo;b!==a&&(z.Ba(a,O,I,"viewboxStretch"),this.Yo=a,this.j("viewboxStretch",b,a))});
z.defineProperty(I,{gx:"gridCellSize"},function(){return this.cr},function(a){var b=this.cr;b.N(a)||(z.l(a,Ea,I,"gridCellSize"),a.F()&&0!==a.width&&0!==a.height||z.k("Invalid Panel.gridCellSize: "+a),this.cr=a.V(),null!==this.h&&this===this.h.tp&&$k(this.h),this.ta(),this.j("gridCellSize",b,a))});
z.defineProperty(I,{zE:"gridOrigin"},function(){return this.dr},function(a){var b=this.dr;b.N(a)||(z.l(a,N,I,"gridOrigin"),a.F()||z.k("Invalid Panel.gridOrigin: "+a),this.dr=a.V(),null!==this.h&&$k(this.h),this.ta(),this.j("gridOrigin",b,a))});f=I.prototype;f.Tv=function(a){O.prototype.Tv.call(this,a);for(var b=this.va.o,c=b.length,d=0;d<c;d++)b[d].Tv(a)};
f.ok=function(a,b){if(this.ba===Hk){var c=this.hj()*b.scale;0>=c&&(c=1);var d=this.gx,e=d.width,d=d.height,g=this.Ga,h=g.width,g=g.height,k=Math.ceil(h/e),l=Math.ceil(g/d),m=this.zE;a.save();a.beginPath();a.rect(0,0,h,g);a.clip();for(var n=[],p=this.va.o,q=p.length,r=0;r<q;r++){var s=p[r],t=[];n.push(t);if(s.visible)for(var s=Gl(s.Hb),v=r+1;v<q;v++){var x=p[v];x.visible&&Gl(x.Hb)===s&&(x=x.interval,2<=x&&t.push(x))}}p=this.va.o;q=p.length;for(r=0;r<q;r++){var y=p[r];if(y.visible&&(t=y.interval,!(2>
e*t*c))){var s=n[r],v=!1,A=!0,C=y.PF;null!==C&&(v=!0,A=a.Uz(C,y.we));if("LineV"===y.Hb){a.lineWidth=y.ub;Um(this,a,y.stroke,!1,!1);a.beginPath();for(var L=x=Math.floor(-m.x/e);L<=x+k;L++){var H=L*e+m.x;0<=H&&H<h&&Vn(L,t,s)&&(v&&!A?Hm(a,H,0,H,g,C,y.we):(a.moveTo(H,0),a.lineTo(H,g)))}a.stroke()}else if("LineH"===y.Hb){a.lineWidth=y.ub;Um(this,a,y.stroke,!1,!1);a.beginPath();for(L=x=Math.floor(-m.y/d);L<=x+l;L++)H=L*d+m.y,0<=H&&H<=g&&Vn(L,t,s)&&(v&&!A?Hm(a,0,H,h,H,C,y.we):(a.moveTo(0,H),a.lineTo(h,H)));
a.stroke()}else if("BarV"===y.Hb)for(Um(this,a,y.fill,!0,!1),y=y.width,isNaN(y)&&(y=e),L=x=Math.floor(-m.x/e);L<=x+k;L++)H=L*e+m.x,0<=H&&H<h&&Vn(L,t,s)&&a.fillRect(H,0,y,g);else if("BarH"===y.Hb)for(Um(this,a,y.fill,!0,!1),y=y.height,isNaN(y)&&(y=d),L=x=Math.floor(-m.y/d);L<=x+l;L++)H=L*d+m.y,0<=H&&H<=g&&Vn(L,t,s)&&a.fillRect(0,H,h,y);v&&a.Qz()}}a.restore();ca(a,!1)}else{this.ba===ga&&(a.lineCap="butt",Wn(this,a,!0,this.Wd,!0),Wn(this,a,!1,this.Sd,!0),Xn(this,a,!0,this.Wd),Xn(this,a,!1,this.Sd),Wn(this,
a,!0,this.Wd,!1),Wn(this,a,!1,this.Sd,!1));(c=this.JE)&&a.save();e=this.gf();d=this.va.o;h=d.length;for(g=0;g<h;g++)k=d[g],c&&k===e&&(a.Ow=!0),k.ff(a,b),c&&k===e&&(a.Ow=!1);c&&(a.restore(),ca(a,!0));u&&u.AH&&this instanceof G&&u.zH(a,b,this)}};
function Xn(a,b,c,d){for(var e=d.length,g=a.W,h=c?a.$d(0):a.Zd(0),k=0;k<e;k++){var l=d[k];if(void 0!==l&&l!==h&&0!==l.Oa){if(c){if(l.position>g.height)continue}else if(l.position>g.width)continue;var m=l.$p;isNaN(m)&&(m=c?a.Oh:a.Nh);var n=l.Zp;null===n&&(n=c?a.Bi:a.Mh);if(0!==m&&null!==n){Um(a,b,n,!1,!1);var n=!1,p=!0,q=l.hJ;null!==q&&(n=!0,void 0!==b.setLineDash?(b.setLineDash(q),b.lineDashOffset=a.we):void 0!==b.webkitLineDash?(b.webkitLineDash=q,b.webkitLineDashOffset=a.we):void 0!==b.mozDash?
(b.mozDash=q,b.mozDashOffset=a.we):p=!1);b.beginPath();var r=l.position+m;c?r>g.height&&(m-=r-g.height):r>g.width&&(m-=r-g.width);l=l.position+m/2;b.lineWidth=m;r=a.padding;c?(l+=r.top,m=r.left,r=g.width-r.right,n&&!p?Hm(b,m,l,r,l,q,0):(b.moveTo(m,l),b.lineTo(r,l))):(l+=r.left,m=r.top,r=g.height-r.bottom,n&&!p?Hm(b,l,m,l,r,q,0):(b.moveTo(l,m),b.lineTo(l,r)));b.stroke();n&&(void 0!==b.setLineDash?(b.setLineDash(z.yj),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=z.yj,b.webkitLineDashOffset=
0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))}}}}
function Wn(a,b,c,d,e){for(var g=d.length,h=a.W,k=0;k<g;k++){var l=d[k];if(void 0!==l&&null!==l.background&&l.Nz!==e&&0!==l.Oa){var m=c?h.height:h.width;if(!(l.position>m)){var n=l.Re(),p=l.$p;isNaN(p)&&(p=c?a.Oh:a.Nh);var q=l.Zp;null===q&&(q=c?a.Bi:a.Mh);null===q&&(p=0);n-=p;p=l.position+p;n+=l.Oa;p+n>m&&(n=m-p);0>=n||(m=a.padding,Um(a,b,l.background,!0,!1),c?b.fillRect(m.left,p+m.top,h.width-(m.left+m.right),n):b.fillRect(p+m.left,m.top,n,h.height-(m.top+m.bottom)))}}}}
function Vn(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return!1;return!0}function Gl(a){return"LineV"===a||"BarV"===a}
f.sp=function(a,b,c,d,e){var g=this.Wg(),h=this.transform,k=1/(h.m11*h.m22-h.m12*h.m21),l=h.m22*k,m=-h.m12*k,n=-h.m21*k,p=h.m11*k,q=k*(h.m21*h.dy-h.m22*h.dx),r=k*(h.m12*h.dx-h.m11*h.dy);if(null!==this.wl)return h=this.W,Ne(h.left,h.top,h.right,h.bottom,a,b,c,d,e);if(null!==this.background)g=a*l+b*n+q,k=a*m+b*p+r,a=c*l+d*n+q,c=c*m+d*p+r,e.n(0,0),d=this.Ga,c=Ne(0,0,d.width,d.height,g,k,a,c,e),e.transform(h);else{g||(l=1,n=m=0,p=1,r=q=0);k=a*l+b*n+q;a=a*m+b*p+r;l=c*l+d*n+q;d=c*m+d*p+r;e.n(l,d);m=(l-
k)*(l-k)+(d-a)*(d-a);c=!1;p=this.va.o;r=p.length;n=z.O();for(q=0;q<r;q++)b=p[q],b.visible&&b.sp(k,a,l,d,n)&&(c=!0,b=(k-n.x)*(k-n.x)+(a-n.y)*(a-n.y),b<m&&(m=b,e.set(n)));z.A(n);g&&e.transform(h)}return c};f.Q=function(a){O.prototype.Q.call(this,a);this.ba===Ek&&(a=this.gf(),null!==a&&a.Q(!0));a=this.va.o;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==ml(d)&&(d.Aa.F()||(d instanceof aj||d instanceof I||d instanceof qa||Mm(d,!1)!==bj)&&d.Q(!0))}};
f.Ap=function(){if(!1===ml(this)){Yk(this,!0);Om(this,!0);for(var a=this.va.o,b=a.length,c=0;c<b;c++)a[c].Ap()}};f.Gi=function(){if(0!==(this.ja&2048)===!1){Wm(this,!0);Xm(this,!0);for(var a=this.va.o,b=a.length,c=0;c<b;c++)a[c].eA()}};f.eA=function(){Xm(this,!0);for(var a=this.va.o,b=a.length,c=0;c<b;c++)a[c].eA()};
f.Ip=function(a,b,c,d){var e=this.Zi;e.width=0;e.height=0;var g=this.Aa,h=this.dg;void 0===c&&(c=h.width,d=h.height);c=Math.max(c,h.width);d=Math.max(d,h.height);var k=this.Xe;isNaN(g.width)||(a=Math.min(g.width,k.width));isNaN(g.height)||(b=Math.min(g.height,k.height));a=Math.max(c,a);b=Math.max(d,b);var l=this.padding;a=Math.max(a-l.left-l.right,0);b=Math.max(b-l.top-l.bottom,0);var m=this.va.o;if(0!==m.length){var n=this.ba.Ub;switch(n){case "Position":var p=a,q=b,r=c,s=d,t=m.length;e.x=0;e.y=
0;e.width=0;for(var v=e.height=0;v<t;v++){var x=m[v];if(x.visible||x===this.Zb){var y=x.margin,A=y.right+y.left,C=y.top+y.bottom;tj(x,p,q,r,s);var L=x.Ia,H=Math.max(L.width+A,0),U=Math.max(L.height+C,0),ea=x.position.x,W=x.position.y;isFinite(ea)||(ea=0);isFinite(W)||(W=0);if(x instanceof X){var P=x;if(P.LE)var ba=P.ub/2,ea=ea-ba,W=W-ba}Hb(e,ea,W,H,U)}}break;case "Vertical":for(var Oa=a,sa=c,Na=m.length,ua=z.rb(),Ha=0;Ha<Na;Ha++){var Aa=m[Ha];if(Aa.visible||Aa===this.Zb){var jc=Mm(Aa,!1);if(jc!==
bj&&jc!==Bm)ua.push(Aa);else{var zd=Aa.margin,Ad=zd.right+zd.left,Qe=zd.top+zd.bottom;tj(Aa,Oa,Infinity,sa,0);var ac=Aa.Ia,Ng=Math.max(ac.width+Ad,0),Bd=Math.max(ac.height+Qe,0);e.width=Math.max(e.width,Ng);e.height+=Bd}}}var rb=ua.length;if(0!==rb){this.Aa.width?Oa=Math.min(this.Aa.width,this.Xe.width):0!==e.width&&(Oa=Math.min(e.width,this.Xe.width));for(Ha=0;Ha<rb;Ha++)if(Aa=ua[Ha],Aa.visible||Aa===this.Zb)zd=Aa.margin,Ad=zd.right+zd.left,Qe=zd.top+zd.bottom,tj(Aa,Oa,Infinity,sa,0),ac=Aa.Ia,Ng=
Math.max(ac.width+Ad,0),Bd=Math.max(ac.height+Qe,0),e.width=Math.max(e.width,Ng),e.height+=Bd;z.xa(ua)}break;case "Horizontal":for(var gb=b,oa=d,pa=m.length,sb=z.rb(),Xa=0;Xa<pa;Xa++){var Va=m[Xa];if(Va.visible||Va===this.Zb){var Ae=Mm(Va,!1);if(Ae!==bj&&Ae!==Cm)sb.push(Va);else{var Cd=Va.margin,me=Cd.right+Cd.left,Rd=Cd.top+Cd.bottom;tj(Va,Infinity,gb,0,oa);var ne=Va.Ia,Og=Math.max(ne.width+me,0),fd=Math.max(ne.height+Rd,0);e.width+=Og;e.height=Math.max(e.height,fd)}}}var ti=sb.length;if(0!==ti){this.Aa.height?
gb=Math.min(this.Aa.height,this.Xe.height):0!==e.height&&(gb=Math.min(e.height,this.Xe.height));for(Xa=0;Xa<ti;Xa++)if(Va=sb[Xa],Va.visible||Va===this.Zb)Cd=Va.margin,me=Cd.right+Cd.left,Rd=Cd.top+Cd.bottom,tj(Va,Infinity,gb,0,oa),ne=Va.Ia,Og=Math.max(ne.width+me,0),fd=Math.max(ne.height+Rd,0),e.width+=Og,e.height=Math.max(e.height,fd);z.xa(sb)}break;case "Spot":a:{var Ab=a,Qb=b,gd=c,qh=d,Lb=m.length,kb=this.gf(),db=kb.margin,Re=0,Sd=0,Pg=db.right+db.left,Qg=db.top+db.bottom;tj(kb,Ab,Qb,gd,qh);var kc=
kb.Ia,lc=kc.width,oe=kc.height,hd=Math.max(lc+Pg,0),mb=Math.max(oe+Qg,0);e.x=-db.left;e.y=-db.top;e.width=hd;e.height=mb;for(var Uc=0;Uc<Lb;Uc++){var Qa=m[Uc];if(Qa!==kb&&(Qa.visible||Qa===this.Zb)){db=Qa.margin;Re=db.right+db.left;Sd=db.top+db.bottom;tj(Qa,Ab,Qb,0,0);var kc=Qa.Ia,hd=Math.max(kc.width+Re,0),mb=Math.max(kc.height+Sd,0),nb=Qa.alignment;nb.bd()&&(nb=this.Cl);nb.cd()||(nb=ec);var yc=Qa.kk;yc.bd()&&(yc=ec);Hb(e,nb.x*lc+nb.offsetX-(yc.x*kc.width-yc.offsetX)-db.left,nb.y*oe+nb.offsetY-(yc.y*
kc.height-yc.offsetY)-db.top,hd,mb)}}var Dd=kb.stretch;Dd===Am&&(Dd=Mm(kb,!1));switch(Dd){case bj:break a;case lf:if(!isFinite(Ab)&&!isFinite(Qb))break a;break;case Cm:if(!isFinite(Ab))break a;break;case Bm:if(!isFinite(Qb))break a}kc=kb.Ia;lc=kc.width;oe=kc.height;hd=Math.max(lc+Pg,0);mb=Math.max(oe+Qg,0);db=kb.margin;e.x=-db.left;e.y=-db.top;e.width=hd;e.height=mb;for(Uc=0;Uc<Lb;Uc++)Qa=m[Uc],Qa===kb||!Qa.visible&&Qa!==this.Zb||(db=Qa.margin,Re=db.right+db.left,Sd=db.top+db.bottom,kc=Qa.Ia,hd=Math.max(kc.width+
Re,0),mb=Math.max(kc.height+Sd,0),nb=Qa.alignment,nb.bd()&&(nb=this.Cl),nb.cd()||(nb=ec),yc=Qa.kk,yc.bd()&&(yc=ec),Hb(e,nb.x*lc+nb.offsetX-(yc.x*kc.width-yc.offsetX)-db.left,nb.y*oe+nb.offsetY-(yc.y*kc.height-yc.offsetY)-db.top,hd,mb))}break;case "Auto":var Mb=a,pe=b,tf=c,Se=d,Mf=m.length,Jb=this.gf(),Be=Jb.margin,Rb=Be.right+Be.left,Vb=Be.top+Be.bottom;tj(Jb,Mb,pe,tf,Se);var Nb=Jb.Ia,Jc=0;if(Jb instanceof X)var xb=Jb,Jc=xb.ub*xb.scale;var Fb=Math.max(Nb.width+Rb,0),Ob=Math.max(Nb.height+Vb,0),Td=
Yn(Jb),Rg=Td.x*Fb+Td.offsetX,rh=Td.y*Ob+Td.offsetY,Td=Zn(Jb),sh=Td.x*Fb+Td.offsetX,Ce=Td.y*Ob+Td.offsetY,Kc=Mb,De=pe;isFinite(Mb)&&(Kc=Math.max(Math.abs(Rg-sh)-Jc,0));isFinite(pe)&&(De=Math.max(Math.abs(rh-Ce)-Jc,0));var mc=z.Xl();mc.n(0,0);for(var Bb=0;Bb<Mf;Bb++){var Cb=m[Bb];if(Cb!==Jb&&(Cb.visible||Cb===this.Zb)){var Be=Cb.margin,Lc=Be.right+Be.left,Sg=Be.top+Be.bottom;tj(Cb,Kc,De,0,0);Nb=Cb.Ia;Fb=Math.max(Nb.width+Lc,0);Ob=Math.max(Nb.height+Sg,0);mc.n(Math.max(Fb,mc.width),Math.max(Ob,mc.height))}}if(1===
Mf)e.width=Fb,e.height=Ob,z.qk(mc);else{var Vc=Yn(Jb),Wc=Zn(Jb),lb=0,Mc=0;Wc.x!==Vc.x&&Wc.y!==Vc.y&&(lb=mc.width/Math.abs(Wc.x-Vc.x),Mc=mc.height/Math.abs(Wc.y-Vc.y));z.qk(mc);Jc=0;Jb instanceof X&&(xb=Jb,Jc=xb.ub*xb.scale,cj(xb)===dj&&(lb=Mc=Math.max(lb,Mc)));var lb=lb+(Math.abs(Vc.offsetX)+Math.abs(Wc.offsetX)+Jc),Mc=Mc+(Math.abs(Vc.offsetY)+Math.abs(Wc.offsetY)+Jc),Ud=Jb.stretch;Ud===Am&&(Ud=Mm(Jb,!1));switch(Ud){case bj:Se=tf=0;break;case lf:isFinite(Mb)&&(lb=Mb);isFinite(pe)&&(Mc=pe);break;case Cm:isFinite(Mb)&&
(lb=Mb);Se=0;break;case Bm:tf=0,isFinite(pe)&&(Mc=pe)}Jb instanceof X&&!Jb.Aa.F()&&xb.qe();Jb.Ap();tj(Jb,lb,Mc,tf,Se);e.width=Jb.Ia.width+Rb;e.height=Jb.Ia.height+Vb}break;case "Table":for(var Vd=a,uf=b,Tg=c,yj=d,La=m.length,Te=z.rb(),qe=z.rb(),ia=0;ia<La;ia++){var fa=m[ia],id=fa instanceof I?fa:null;if(null===id||id.type!==Qm&&id.type!==Rm||!fa.visible)Te.push(fa);else{u&&(id.Aa.F()&&z.k(id.toString()+" TableRow/TableColumn Panels cannot set a desiredSize: "+id.Aa.toString()),id.dg.N(Pd)||z.k(id.toString()+
" TableRow/TableColumn Panels cannot set a minSize: "+id.dg.toString()),id.Xe.N(de)||z.k(id.toString()+" TableRow/TableColumn Panels cannot set a maxSize: "+id.Xe.toString()));qe.push(fa);for(var th=id.va.o,ui=th.length,zc=0;zc<ui;zc++){var vi=th[zc];id.type===Qm?vi.Vb=fa.Vb:id.type===Rm&&(vi.column=fa.column);Te.push(vi)}}}La=Te.length;0===La&&(this.$d(0),this.Zd(0));for(var bc=[],ia=0;ia<La;ia++)fa=Te[ia],Yk(fa,!0),Om(fa,!0),bc[fa.Vb]||(bc[fa.Vb]=[]),bc[fa.Vb][fa.column]||(bc[fa.Vb][fa.column]=
[]),bc[fa.Vb][fa.column].push(fa);z.xa(Te);for(var uh=z.rb(),jd=z.rb(),Ee=z.rb(),Nc={count:0},kd={count:0},Ac=Vd,ld=uf,eg=this.Wd,La=eg.length,ia=0;ia<La;ia++){var Z=eg[ia];void 0!==Z&&(Z.Oa=0)}eg=this.Sd;La=eg.length;for(ia=0;ia<La;ia++)Z=eg[ia],void 0!==Z&&(Z.Oa=0);for(var Fe=bc.length,Ue=0,ia=0;ia<Fe;ia++)bc[ia]&&(Ue=Math.max(Ue,bc[ia].length));for(var wi=Math.min(this.Yi,Fe-1),xi=Math.min(this.Ki,Ue-1),Oc=0,Fe=bc.length,ia=0;ia<Fe;ia++)if(bc[ia])for(var Ue=bc[ia].length,ob=this.$d(ia),zc=ob.Oa=
0;zc<Ue;zc++)if(bc[ia][zc]){var pb=this.Zd(zc);void 0===uh[zc]&&(pb.Oa=0,uh[zc]=!0);for(var Zk=bc[ia][zc],fg=Zk.length,Ug=0;Ug<fg;Ug++)if(fa=Zk[Ug],fa.visible||fa===this.Zb){var Vg=1<fa.Ui||1<fa.xi;Vg&&(ia<wi||zc<xi||jd.push(fa));var Wb=fa.margin,gg=Wb.right+Wb.left,hg=Wb.top+Wb.bottom,Xc=Zm(fa,ob,pb,!1),Ge=fa.Aa,zn=!isNaN(Ge.height),yi=!isNaN(Ge.width)&&zn;Vg||Xc===bj||yi||ia<wi||zc<xi||(void 0!==Nc[zc]||Xc!==lf&&Xc!==Cm||(Nc[zc]=-1,Nc.count++),void 0!==kd[ia]||Xc!==lf&&Xc!==Bm||(kd[ia]=-1,kd.count++),
Ee.push(fa));tj(fa,Infinity,Infinity,0,0);if(!(ia<wi||zc<xi)){var Ve=fa.Ia,We=Math.max(Ve.width+gg,0),Ed=Math.max(Ve.height+hg,0);if(1===fa.Ui&&(Xc===bj||Xc===Cm)){var Z=this.$d(ia),md=Z.Re(),Oc=Math.max(Ed-Z.Oa,0);Oc+md>ld&&(Oc=Math.max(ld-md,0));var vh=0===Z.Oa;Z.Oa+=Oc;ld=Math.max(ld-(Oc+(vh?md:0)),0)}1!==fa.xi||Xc!==bj&&Xc!==Bm||(Z=this.Zd(zc),md=Z.Re(),Oc=Math.max(We-Z.Oa,0),Oc+md>Ac&&(Oc=Math.max(Ac-md,0)),vh=0===Z.Oa,Z.Oa+=Oc,Ac=Math.max(Ac-(Oc+(vh?md:0)),0));Vg&&fa.Ap()}}}z.xa(uh);for(var Wd=
0,Xd=0,La=this.fp,ia=0;ia<La;ia++){var wh=this.Sd[ia];void 0!==wh&&(Wd+=wh.Xa,0!==wh.Xa&&(Wd+=wh.Re()))}La=this.Yp;for(ia=0;ia<La;ia++){var xh=this.Wd[ia];void 0!==xh&&(Xd+=xh.Xa,0!==xh.Xa&&(Xd+=xh.Re()))}for(var Ac=Math.max(Vd-Wd,0),nd=ld=Math.max(uf-Xd,0),Wg=Ac,La=Ee.length,ia=0;ia<La;ia++){var fa=Ee[ia],ob=this.$d(fa.Vb),pb=this.Zd(fa.column),vf=fa.Ia,Wb=fa.margin,gg=Wb.right+Wb.left,hg=Wb.top+Wb.bottom;Nc[fa.column]=0===pb.Oa&&void 0!==Nc[fa.column]?Math.max(vf.width+gg,Nc[fa.column]):null;kd[fa.Vb]=
0===ob.Oa&&void 0!==kd[fa.Vb]?Math.max(vf.height+hg,kd[fa.Vb]):null}var nc=0,yh=0;for(ia in kd)"count"!==ia&&(nc+=kd[ia]);for(ia in Nc)"count"!==ia&&(yh+=Nc[ia]);for(var qb=z.Xl(),ia=0;ia<La;ia++)if(fa=Ee[ia],fa.visible||fa===this.Zb){var ob=this.$d(fa.Vb),pb=this.Zd(fa.column),He=0;isFinite(pb.width)?He=pb.width:(He=isFinite(Ac)&&null!==Nc[fa.column]?0===yh?pb.Oa+Ac:Nc[fa.column]/yh*Wg:null!==Nc[fa.column]?Ac:pb.Oa||Ac,He=Math.max(0,He-pb.Re()));var Nf=0;isFinite(ob.height)?Nf=ob.height:(Nf=isFinite(ld)&&
null!==kd[fa.Vb]?0===nc?ob.Oa+ld:kd[fa.Vb]/nc*nd:null!==kd[fa.Vb]?ld:ob.Oa||ld,Nf=Math.max(0,Nf-ob.Re()));qb.n(Math.max(pb.qj,Math.min(He,pb.qf)),Math.max(ob.qj,Math.min(Nf,ob.qf)));Xc=Zm(fa,ob,pb,!1);switch(Xc){case Cm:qb.height=Math.max(qb.height,ob.Oa+ld);break;case Bm:qb.width=Math.max(qb.width,pb.Oa+Ac)}Wb=fa.margin;gg=Wb.right+Wb.left;hg=Wb.top+Wb.bottom;fa.Ap();tj(fa,qb.width,qb.height,pb.qj,ob.qj);Ve=fa.Ia;We=Math.max(Ve.width+gg,0);Ed=Math.max(Ve.height+hg,0);isFinite(Ac)&&(We=Math.min(We,
qb.width));isFinite(ld)&&(Ed=Math.min(Ed,qb.height));var wf=0,wf=ob.Oa;ob.Oa=Math.max(ob.Oa,Ed);Oc=ob.Oa-wf;ld=Math.max(ld-Oc,0);wf=pb.Oa;pb.Oa=Math.max(pb.Oa,We);Oc=pb.Oa-wf;Ac=Math.max(Ac-Oc,0)}z.xa(Ee);for(var Yd=z.Xl(),La=jd.length,ia=0;ia<La;ia++)if(fa=jd[ia],fa.visible||fa===this.Zb){ob=this.$d(fa.Vb);pb=this.Zd(fa.column);qb.n(Math.max(pb.qj,Math.min(Vd,pb.qf)),Math.max(ob.qj,Math.min(uf,ob.qf)));Xc=Zm(fa,ob,pb,!1);switch(Xc){case lf:0!==pb.Oa&&(qb.width=Math.min(qb.width,pb.Oa));0!==ob.Oa&&
(qb.height=Math.min(qb.height,ob.Oa));break;case Cm:0!==pb.Oa&&(qb.width=Math.min(qb.width,pb.Oa));break;case Bm:0!==ob.Oa&&(qb.height=Math.min(qb.height,ob.Oa))}isFinite(pb.width)&&(qb.width=pb.width);isFinite(ob.height)&&(qb.height=ob.height);Yd.n(0,0);for(var hb=1;hb<fa.Ui&&!(fa.Vb+hb>=this.Yp);hb++)Z=this.$d(fa.Vb+hb),Yd.height+=Math.max(Z.qj,isNaN(Z.ef)?Z.qf:Math.min(Z.ef,Z.qf));for(hb=1;hb<fa.xi&&!(fa.column+hb>=this.fp);hb++)Z=this.Zd(fa.column+hb),Yd.width+=Math.max(Z.qj,isNaN(Z.ef)?Z.qf:
Math.min(Z.ef,Z.qf));qb.width+=Yd.width;qb.height+=Yd.height;Wb=fa.margin;gg=Wb.right+Wb.left;hg=Wb.top+Wb.bottom;tj(fa,qb.width,qb.height,Tg,yj);for(var Ve=fa.Ia,We=Math.max(Ve.width+gg,0),Ed=Math.max(Ve.height+hg,0),Xg=0,hb=0;hb<fa.Ui&&!(fa.Vb+hb>=this.Yp);hb++)Z=this.$d(fa.Vb+hb),Xg+=Z.total||0;if(Xg<Ed){var rc=Ed-Xg,Bc=Ed-Xg;if(null!==fa.Sx)for(var Fd=fa.Sx,hb=0;hb<fa.Ui&&!(0>=rc)&&!(fa.Vb+hb>=this.Yp);hb++){var Z=this.$d(fa.Vb+hb),Sb=Z.Xa||0,Zd=Fd(fa,Z,Bc);u&&"number"!==typeof Zd&&z.k(fa+" spanAllocation does not return a number: "+
Zd);Z.Oa=Math.min(Z.qf,Sb+Zd);Z.Xa!==Sb&&(rc-=Z.Xa-Sb)}for(;0<rc;){Sb=Z.Xa||0;isNaN(Z.height)&&Z.qf>Sb&&(Z.Oa=Math.min(Z.qf,Sb+rc),Z.Xa!==Sb&&(rc-=Z.Xa-Sb));if(0===Z.index)break;Z=this.$d(Z.index-1)}}for(var Ie=0,hb=0;hb<fa.xi&&!(fa.column+hb>=this.fp);hb++)Z=this.Zd(fa.column+hb),Ie+=Z.total||0;if(Ie<We){rc=We-Ie;Bc=We-Ie;if(null!==fa.Sx)for(Fd=fa.Sx,hb=0;hb<fa.xi&&!(0>=rc)&&!(fa.column+hb>=this.fp);hb++)Z=this.Zd(fa.column+hb),Sb=Z.Xa||0,Zd=Fd(fa,Z,Bc),u&&"number"!==typeof Zd&&z.k(fa+" spanAllocation does not return a number: "+
Zd),Z.Oa=Math.min(Z.qf,Sb+Zd),Z.Xa!==Sb&&(rc-=Z.Xa-Sb);for(;0<rc;){Sb=Z.Xa||0;isNaN(Z.width)&&Z.qf>Sb&&(Z.Oa=Math.min(Z.qf,Sb+rc),Z.Xa!==Sb&&(rc-=Z.Xa-Sb));if(0===Z.index)break;Z=this.Zd(Z.index-1)}}}z.xa(jd);z.qk(Yd);z.qk(qb);for(var ig=0,jg=0,Xc=Mm(this,!0),xf=this.Aa,zj=this.Xe,$d=Xd=Wd=0,Yc=0,La=this.fp,ia=0;ia<La;ia++)void 0!==this.Sd[ia]&&(Z=this.Zd(ia),isFinite(Z.width)?($d+=Z.width,$d+=Z.Re()):$n(Z)===ao?($d+=Z.Xa,$d+=Z.Re()):0!==Z.Xa&&(Wd+=Z.Xa,Wd+=Z.Re()));var ig=isFinite(xf.width)?Math.min(xf.width,
zj.width):Xc!==bj&&isFinite(Vd)?Vd:Wd,ig=Math.max(ig,this.dg.width),ig=Math.max(ig-$d,0),Ah=Math.max(ig/Wd,1);isFinite(Ah)||(Ah=1);for(ia=0;ia<La;ia++)void 0!==this.Sd[ia]&&(Z=this.Zd(ia),isFinite(Z.width)||$n(Z)===ao||(Z.Oa=Z.Xa*Ah),Z.position=e.width,0!==Z.Xa&&(e.width+=Z.Xa,e.width+=Z.Re()));La=this.Yp;for(ia=0;ia<La;ia++)void 0!==this.Wd[ia]&&(Z=this.$d(ia),isFinite(Z.height)?(Yc+=Z.height,Yc+=Z.Re()):$n(Z)===ao?(Yc+=Z.Xa,Yc+=Z.Re()):0!==Z.Xa&&(Xd+=Z.Xa,0!==Z.Xa&&(Xd+=Z.Re())));var jg=isFinite(xf.height)?
Math.min(xf.height,zj.height):Xc!==bj&&isFinite(uf)?uf:Xd,jg=Math.max(jg,this.dg.height),jg=Math.max(jg-Yc,0),Bh=Math.max(jg/Xd,1);isFinite(Bh)||(Bh=1);for(ia=0;ia<La;ia++)void 0!==this.Wd[ia]&&(Z=this.$d(ia),isFinite(Z.height)||$n(Z)===ao||(Z.Oa=Z.Xa*Bh),Z.position=e.height,0!==Z.Xa&&(e.height+=Z.Xa,0!==Z.Xa&&(e.height+=Z.Re())));La=qe.length;for(ia=0;ia<La;ia++){var oc=qe[ia];oc.type===Qm?(He=e.width,Z=this.$d(oc.Vb),Nf=Z.Oa):(Z=this.Zd(oc.column),He=Z.Oa,Nf=e.height);oc.vd.n(0,0,He,Nf);Yk(oc,!1);
bc[oc.Vb]||(bc[oc.Vb]=[]);bc[oc.Vb][oc.column]||(bc[oc.Vb][oc.column]=[]);bc[oc.Vb][oc.column].push(oc)}z.xa(qe);this.vs=bc;break;case "Viewbox":var Ch=a,al=b,Xq=c,Yq=d;1<m.length&&z.k("Viewbox Panel cannot contain more than one GraphObject.");var Xe=m[0];Xe.bc=1;Xe.Ap();tj(Xe,Infinity,Infinity,Xq,Yq);var Aj=Xe.Ia,bl=Xe.margin,Zq=bl.right+bl.left,$q=bl.top+bl.bottom;if(isFinite(Ch)||isFinite(al)){var jt=Xe.scale,cl=Aj.width,dl=Aj.height,ar=Math.max(Ch-Zq,0),br=Math.max(al-$q,0),Bj=1;this.Yo===dj?
0!==cl&&0!==dl&&(Bj=Math.min(ar/cl,br/dl)):0!==cl&&0!==dl&&(Bj=Math.max(ar/cl,br/dl));0===Bj&&(Bj=1E-4);Xe.bc*=Bj;jt!==Xe.scale&&(Yk(Xe,!0),tj(Xe,Infinity,Infinity,Xq,Yq))}Aj=Xe.Ia;e.width=isFinite(Ch)?Ch:Math.max(Aj.width+Zq,0);e.height=isFinite(al)?al:Math.max(Aj.height+$q,0);break;case "Link":var cr=m.length,kg=this instanceof da?this.Xf:this;if(kg instanceof G)if(0===cr){var el=this.Wc;yb(el,0,0);var re=this.Ia;re.n(0,0,0,0)}else{var fl=this instanceof da?null:kg.path,lg=kg.tn,Ye=this.Zi;Ye.assign(lg);
Ye.x=0;var Yg=Ye.y=0,mg=kg.points,Yg=void 0!==this.sa?this.sa:mg.count;this instanceof da?this.nn(!1):kg.nn(!1);var dr=lg.width,er=lg.height;this.Li.n(lg.x,lg.y);null===this.$g&&(this.$g=new J(w));this.$g.clear();null!==fl&&(bo(fl,dr,er,this),re=fl.Ia,Ye.ri(re),this.$g.add(re));for(var ng=z.Hh(),Cj=z.O(),og=z.O(),An=0;An<cr;An++){var Xb=m[An];if(Xb!==fl)if(Xb.Ff&&Xb instanceof X)bo(Xb,dr,er,this),re=Xb.Ia,Ye.ri(re),this.$g.add(re);else if(2>Yg)tj(Xb,Infinity,Infinity),re=Xb.Ia,Ye.ri(re),this.$g.add(re);
else{var od=Xb.De,gr=Xb.NA,Bn=Xb.kk;Bn.Be()&&(Bn=ec);var Of=Xb.pu,kt=Xb.DF,Dj=0,Ej=0,gl=0;if(od<-Yg||od>=Yg){var hr=kg.aF,yf=kg.$E;Of!==Qi&&(gl=kg.computeAngle(Xb,Of,yf),Xb.bm=gl);Dj=hr.x-lg.x;Ej=hr.y-lg.y}else{var Gd,Ze;if(0<=od)Gd=mg.ea(od),Ze=od<Yg-1?mg.ea(od+1):Gd;else{var Dh=Yg+od;Gd=mg.ea(Dh);Ze=0<Dh?mg.ea(Dh-1):Gd}if(Gd.Mc(Ze)){var Eh,Fh;0<=od?(Eh=0<od?mg.ea(od-1):Gd,Fh=od<Yg-2?mg.ea(od+2):Ze):(Eh=Dh<Yg-1?mg.ea(Dh+1):Gd,Fh=1<Dh?mg.ea(Dh-2):Ze);var ir=Eh.Af(Gd),jr=Ze.Af(Fh),yf=ir>jr+10?0<=od?
Eh.Ec(Gd):Gd.Ec(Eh):jr>ir+10?0<=od?Ze.Ec(Fh):Fh.Ec(Ze):0<=od?Eh.Ec(Fh):Fh.Ec(Eh)}else yf=0<=od?Gd.Ec(Ze):Ze.Ec(Gd);Of!==Qi&&(gl=kg.computeAngle(Xb,Of,yf),Xb.bm=gl);Dj=Gd.x+(Ze.x-Gd.x)*gr-lg.x;Ej=Gd.y+(Ze.y-Gd.y)*gr-lg.y}tj(Xb,Infinity,Infinity);var re=Xb.Ia,el=Xb.Ga,Fj=0;Xb instanceof X&&(Fj=Xb.ub);var Gh=el.width+Fj,zi=el.height+Fj;ng.reset();ng.translate(-re.x,-re.y);ng.scale(Xb.scale,Xb.scale);ng.rotate(Of===Qi?Xb.angle:yf,Gh/2,zi/2);Of!==co&&Of!==eo||ng.rotate(90,Gh/2,zi/2);Of!==fo&&Of!==ho||
ng.rotate(-90,Gh/2,zi/2);Of===io&&(45<yf&&135>yf||225<yf&&315>yf)&&ng.rotate(-yf,Gh/2,zi/2);var Ai=new w(0,0,Gh,zi);Cj.ru(Ai,Bn);ng.Cb(Cj);var lt=-Cj.x+Fj/2,mt=-Cj.y+Fj/2;og.assign(kt);isNaN(og.x)&&(og.x=0<=od?Gh/2+3:-(Gh/2+3));isNaN(og.y)&&(og.y=-(zi/2+3));og.rotate(yf);Dj+=og.x;Ej+=og.y;Ai.set(re);Ai.x=Dj+lt;Ai.y=Ej+mt;this.$g.add(Ai);Ye.ri(Ai)}}if(this.Ke)for(var kr=this.Hf;kr.next();)tj(kr.value,Infinity,Infinity);this.Zi=Ye;var Dn=this.Li;Dn.n(Dn.x+Ye.x,Dn.y+Ye.y);yb(e,Ye.width||0,Ye.height||
0);z.jf(ng);z.A(Cj);z.A(og)}break;case "Grid":break;case "TableRow":case "TableColumn":z.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:z.k("Unknown panel type: "+n)}}var $e=e.width,af=e.height,ll=this.padding,nt=ll.top+ll.bottom,$e=$e+(ll.left+ll.right),af=af+nt;isFinite(g.width)&&($e=g.width);isFinite(g.height)&&(af=g.height);$e=Math.min(k.width,$e);af=Math.min(k.height,af);$e=Math.max(h.width,$e);af=
Math.max(h.height,af);$e=Math.max(c,$e);af=Math.max(d,af);e.width=$e;e.height=af;yb(this.Wc,$e,af);Jm(this,0,0,$e,af)};I.prototype.findMainElement=I.prototype.gf=function(){if(null===this.Km){var a=this.va.o,b=a.length;if(0===b)return null;for(var c=0;c<b;c++){var d=a[c];if(!0===d.Ff)return this.Km=d}this.Km=a[0]}return this.Km};
I.prototype.aj=function(a,b,c,d){var e=this.Zi,g=this.va.o,h=z.zk(0,0,0,0);if(0===g.length){var k=this.W;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.Aa.F()){var l=Mm(this,!0),m=this.vd,n=m.width,p=m.height,q=this.margin,r=q.left+q.right,s=q.top+q.bottom;n===c&&p===d&&(l=bj);switch(l){case bj:if(n>c||p>d)this.Q(),tj(this,n>c?c:n,p>d?d:p);break;case lf:this.Q(!0);tj(this,c+r,d+s,0,0);break;case Cm:this.Q(!0);tj(this,c+r,p+s,0,0);break;case Bm:this.Q(!0),tj(this,n+r,d+s,0,0)}}k=this.W;k.x=a;k.y=b;
k.width=c;k.height=d;var t=this.ba.Ub;switch(t){case "Position":for(var v=g.length,x=e.x-this.padding.left,y=e.y-this.padding.top,A=0;A<v;A++){var C=g[A],L=C.Ia,H=C.margin,U=C.position.x,ea=C.position.y;h.x=isNaN(U)?-x:U-x;h.y=isNaN(ea)?-y:ea-y;if(C instanceof X){var W=C;if(W.LE){var P=W.ub/2;h.x-=P;h.y-=P}}h.x+=H.left;h.y+=H.top;h.width=L.width;h.height=L.height;C.visible&&C.Lc(h.x,h.y,h.width,h.height)}break;case "Vertical":for(var ba=g.length,Oa=this.padding.left,sa=this.padding.top,Na=0;Na<ba;Na++){var ua=
Oa,Ha=g[Na];if(Ha.visible){var Aa=Ha.Ia,jc=Ha.margin,zd=jc.left+jc.right,Ad=Oa+this.padding.right,Qe=Aa.width,ac=Mm(Ha,!1);if(isNaN(Ha.Aa.width)&&ac===lf||ac===Cm)Qe=Math.max(e.width-zd-Ad,0);var Ng=Qe+zd+Ad,Bd=Ha.alignment;Bd.bd()&&(Bd=this.Cl);Bd.cd()||(Bd=ec);Ha.Lc(ua+Bd.offsetX+jc.left+(e.width*Bd.x-Ng*Bd.x),sa+Bd.offsetY+jc.top,Qe,Aa.height);sa+=Aa.height+jc.bottom+jc.top}}break;case "Horizontal":for(var rb=g.length,gb=this.padding.top,oa=this.padding.left,pa=0;pa<rb;pa++){var sb=gb,Xa=g[pa];
if(Xa.visible){var Va=Xa.Ia,Ae=Xa.margin,Cd=Ae.top+Ae.bottom,me=gb+this.padding.bottom,Rd=Va.height,ne=Mm(Xa,!1);if(isNaN(Xa.Aa.height)&&ne===lf||ne===Bm)Rd=Math.max(e.height-Cd-me,0);var Og=Rd+Cd+me,fd=Xa.alignment;fd.bd()&&(fd=this.Cl);fd.cd()||(fd=ec);Xa.Lc(oa+fd.offsetX+Ae.left,sb+fd.offsetY+Ae.top+(e.height*fd.y-Og*fd.y),Va.width,Rd);oa+=Va.width+Ae.left+Ae.right}}break;case "Spot":var ti=g.length,Ab=this.gf(),Qb=Ab.Ia,gd=Qb.width,qh=Qb.height,Lb=this.padding,kb=Lb.left,db=Lb.top;h.x=kb-e.x;
h.y=db-e.y;Ab.Lc(h.x,h.y,gd,qh);for(var Re=0;Re<ti;Re++){var Sd=g[Re];if(Sd!==Ab){var Pg=Sd.Ia,Qg=Pg.width,kc=Pg.height,lc=Sd.alignment;lc.bd()&&(lc=this.Cl);lc.cd()||(lc=ec);var oe=Sd.kk;oe.bd()&&(oe=ec);h.x=lc.x*gd+lc.offsetX-(oe.x*Qg-oe.offsetX);h.y=lc.y*qh+lc.offsetY-(oe.y*kc-oe.offsetY);h.x-=e.x;h.y-=e.y;Sd.visible&&Sd.Lc(kb+h.x,db+h.y,Qg,kc)}}break;case "Auto":var hd=g.length,mb=this.gf(),Uc=mb.Ia,Qa=z.lg();Qa.n(0,0,1,1);var nb=mb.margin,yc=nb.left,Dd=nb.top,Mb=this.padding,pe=Mb.left,tf=Mb.top;
h.x=yc;h.y=Dd;h.width=Uc.width;h.height=Uc.height;mb.Lc(pe+h.x,tf+h.y,h.width,h.height);var Se=Yn(mb),Mf=Zn(mb),Jb=0+Se.y*Uc.height+Se.offsetY,Be=0+Mf.x*Uc.width+Mf.offsetX,Rb=0+Mf.y*Uc.height+Mf.offsetY;Qa.x=0+Se.x*Uc.width+Se.offsetX;Qa.y=Jb;Hb(Qa,Be,Rb,0,0);Qa.x+=yc+pe;Qa.y+=Dd+tf;for(var Vb=0;Vb<hd;Vb++){var Nb=g[Vb];if(Nb!==mb){var Jc=Nb.Ia,nb=Nb.margin,xb=Math.max(Jc.width+nb.right+nb.left,0),Fb=Math.max(Jc.height+nb.top+nb.bottom,0),Ob=Nb.alignment;Ob.bd()&&(Ob=this.Cl);Ob.cd()||(Ob=ec);h.x=
Qa.width*Ob.x+Ob.offsetX-xb*Ob.x+nb.left+Qa.x;h.y=Qa.height*Ob.y+Ob.offsetY-Fb*Ob.y+nb.top+Qa.y;h.width=Qa.width;h.height=Qa.height;Nb.visible&&(Ib(Qa.x,Qa.y,Qa.width,Qa.height,h.x,h.y,Jc.width,Jc.height)?Nb.Lc(h.x,h.y,Jc.width,Jc.height):Nb.Lc(h.x,h.y,Jc.width,Jc.height,new w(Qa.x,Qa.y,Qa.width,Qa.height)))}}z.dc(Qa);break;case "Table":for(var Td=g.length,Rg=this.padding,rh=Rg.left,sh=Rg.top,Ce=this.vs,Kc=0,De=0,mc=Ce.length,Bb=0,Cb=0;Cb<mc;Cb++)Ce[Cb]&&(Bb=Math.max(Bb,Ce[Cb].length));for(var Lc=
Math.min(this.Yi,mc-1);Lc!==mc&&(void 0===this.Wd[Lc]||0===this.Wd[Lc].Xa);)Lc++;for(var Lc=Math.min(Lc,mc-1),Sg=-this.Wd[Lc].sb,Vc=Math.min(this.Ki,Bb-1);Vc!==Bb&&(void 0===this.Sd[Vc]||0===this.Sd[Vc].Xa);)Vc++;for(var Vc=Math.min(Vc,Bb-1),Wc=-this.Sd[Vc].sb,lb=z.Xl(),Cb=0;Cb<mc;Cb++)if(Ce[Cb]){var Bb=Ce[Cb].length,Mc=this.$d(Cb),De=Mc.sb+Sg+sh;0!==Mc.Xa&&(De+=Mc.TD());for(var Ud=0;Ud<Bb;Ud++)if(Ce[Cb][Ud]){var Vd=this.Zd(Ud),Kc=Vd.sb+Wc+rh;0!==Vd.Xa&&(Kc+=Vd.TD());for(var uf=Ce[Cb][Ud],Tg=uf.length,
yj=0;yj<Tg;yj++){var La=uf[yj],Te=La.Ia,qe=La instanceof I?La:null;if(null===qe||qe.type!==Qm&&qe.type!==Rm){lb.n(0,0);for(var ia=1;ia<La.rowSpan&&!(Cb+ia>=this.Yp);ia++){var fa=this.$d(Cb+ia);lb.height+=fa.total}for(ia=1;ia<La.dH&&!(Ud+ia>=this.fp);ia++){var id=this.Zd(Ud+ia);lb.width+=id.total}var th=Vd.Xa+lb.width,ui=Mc.Xa+lb.height;h.x=Kc;h.y=De;h.width=th;h.height=ui;var zc=Kc,vi=De,bc=th,uh=ui;Kc+th>e.width&&(bc=Math.max(e.width-Kc,0));De+ui>e.height&&(uh=Math.max(e.height-De,0));var jd=La.alignment,
Ee=0,Nc=0,kd=0,Ac=0;if(jd.bd()){jd=this.Cl;jd.cd()||(jd=ec);var Ee=jd.x,Nc=jd.y,kd=jd.offsetX,Ac=jd.offsetY,ld=Vd.alignment,eg=Mc.alignment;ld.cd()&&(Ee=ld.x,kd=ld.offsetX);eg.cd()&&(Nc=eg.y,Ac=eg.offsetY)}else Ee=jd.x,Nc=jd.y,kd=jd.offsetX,Ac=jd.offsetY;if(isNaN(Ee)||isNaN(Nc))Nc=Ee=.5,Ac=kd=0;var Z=Te.width,Fe=Te.height,Ue=La.margin,wi=Ue.left+Ue.right,xi=Ue.top+Ue.bottom,Oc=Zm(La,Mc,Vd,!1);!isNaN(La.Aa.width)||Oc!==lf&&Oc!==Cm||(Z=Math.max(th-wi,0));!isNaN(La.Aa.height)||Oc!==lf&&Oc!==Bm||(Fe=
Math.max(ui-xi,0));var ob=La.Xe,pb=La.dg,Z=Math.min(ob.width,Z),Fe=Math.min(ob.height,Fe),Z=Math.max(pb.width,Z),Fe=Math.max(pb.height,Fe),Zk=Fe+xi;h.x+=h.width*Ee-(Z+wi)*Ee+kd+Ue.left;h.y+=h.height*Nc-Zk*Nc+Ac+Ue.top;La.visible&&(Ib(zc,vi,bc,uh,h.x,h.y,Te.width,Te.height)?La.Lc(h.x,h.y,Z,Fe):La.Lc(h.x,h.y,Z,Fe,new w(zc,vi,bc,uh)))}else{La.Gi();La.Xb.Wa();var fg=La.Xb;fg.x=qe.type===Qm?rh:Kc;fg.y=qe.type===Rm?sh:De;fg.width=Te.width;fg.height=Te.height;La.Xb.freeze();Om(La,!1)}}}}z.qk(lb);for(Cb=
0;Cb<Td;Cb++)La=g[Cb],qe=La instanceof I?La:null,null===qe||qe.type!==Qm&&qe.type!==Rm||(fg=La.Xb,La.Wc.Wa(),La.Wc.n(0,0,fg.width,fg.height),La.Wc.freeze());break;case "Viewbox":var Ug=g[0],Vg=Ug.Ia,Wb=Ug.margin,gg=Wb.top+Wb.bottom,hg=Math.max(Vg.width+(Wb.right+Wb.left),0),Xc=Math.max(Vg.height+gg,0),Ge=Ug.alignment;Ge.bd()&&(Ge=this.Cl);Ge.cd()||(Ge=ec);h.x=e.width*Ge.x-hg*Ge.x+Ge.offsetX;h.y=e.height*Ge.y-Xc*Ge.y+Ge.offsetY;h.width=Vg.width;h.height=Vg.height;Ug.Lc(h.x,h.y,h.width,h.height);break;
case "Link":var zn=g.length,yi=this instanceof da?this.Xf:this;if(yi instanceof G){var Ve=this instanceof da?null:yi.path;if(null!==this.$g){var We=this.$g.o,Ed=0;if(null!==Ve&&Ed<this.$g.count){var md=We[Ed];Ed++;Ve.Lc(md.x-this.Zi.x,md.y-this.Zi.y,md.width,md.height)}for(var vh=0;vh<zn;vh++){var Wd=g[vh];Wd!==Ve&&Ed<this.$g.count&&(md=We[Ed],Ed++,Wd.Lc(md.x-this.Zi.x,md.y-this.Zi.y,md.width,md.height))}}var Xd=yi.points,wh=Xd.count;if(2<=wh&&this.Ke)for(var xh=this.Hf;xh.next();){var nd=xh.value,
Wg=wh,vf=Xd,nc=nd.De,yh=nd.NA,qb=nd.kk,He=nd.pu,Nf=nd.DF,wf=0,Yd=0,hb=0;if(nc<-Wg||nc>=Wg){var Xg=this.aF,rc=this.$E;He!==Qi&&(hb=this.computeAngle(nd,He,rc),nd.angle=hb);wf=Xg.x;Yd=Xg.y}else{var Bc=void 0,Fd=void 0;if(0<=nc)Bc=vf.o[nc],Fd=nc<Wg-1?vf.o[nc+1]:Bc;else var Sb=Wg+nc,Bc=vf.o[Sb],Fd=0<Sb?vf.o[Sb-1]:Bc;if(Bc.Mc(Fd)){var Zd=void 0,Ie=void 0;0<=nc?(Zd=0<nc?vf.o[nc-1]:Bc,Ie=nc<Wg-2?vf.o[nc+2]:Fd):(Zd=Sb<Wg-1?vf.o[Sb+1]:Bc,Ie=1<Sb?vf.o[Sb-2]:Fd);var ig=Zd.Af(Bc),jg=Fd.Af(Ie),rc=ig>jg+10?0<=
nc?Zd.Ec(Bc):Bc.Ec(Zd):jg>ig+10?0<=nc?Fd.Ec(Ie):Ie.Ec(Fd):0<=nc?Zd.Ec(Ie):Ie.Ec(Zd)}else rc=0<=nc?Bc.Ec(Fd):Fd.Ec(Bc);He!==Qi&&(hb=this.computeAngle(nd,He,rc),nd.angle=hb);wf=Bc.x+(Fd.x-Bc.x)*yh;Yd=Bc.y+(Fd.y-Bc.y)*yh}if(qb.N(Yb))nd.location=new N(wf,Yd);else{qb.Be()&&(qb=ec);var xf=z.Hh();xf.reset();xf.scale(nd.scale,nd.scale);xf.rotate(nd.angle,0,0);var zj=nd.Ga,$d=z.zk(0,0,zj.width,zj.height),Yc=z.O();Yc.ru($d,qb);xf.Cb(Yc);var Ah=-Yc.x,Bh=-Yc.y,oc=Nf.copy();isNaN(oc.x)&&(oc.x=0<=nc?Yc.x+3:-(Yc.x+
3));isNaN(oc.y)&&(oc.y=-(Yc.y+3));oc.rotate(rc);wf+=oc.x;Yd+=oc.y;xf.aG($d);var Ah=Ah+$d.x,Bh=Bh+$d.y,Ch=z.Tb(wf+Ah,Yd+Bh);nd.move(Ch);z.A(Ch);z.A(Yc);z.dc($d);z.jf(xf)}}this instanceof da?this.nn(!1):yi.nn(!1)}break;case "Grid":break;case "TableRow":case "TableColumn":z.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:z.k("Unknown panel type: "+t)}z.dc(h)}};
I.prototype.mk=function(a){var b=this.Ga;if(Ib(0,0,b.width,b.height,a.x,a.y)){for(var b=this.va.o,c=b.length,d=z.Tb(0,0);c--;){var e=b[c];if(e.visible||e===this.Zb)if(tb(d.set(a),e.transform),e.Ma(d))return z.A(d),!0}z.A(d);return null===this.Nb&&null===this.uc?!1:!0}return!1};I.prototype.Zw=function(a){if(this.Jn===a)return this;for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d].Zw(a);if(null!==e)return e}return null};
function jo(a,b,c){c(a,b);if(b instanceof I){b=b.va.o;for(var d=b.length,e=0;e<d;e++)jo(a,b[e],c)}}function wl(a,b){ko(a,a,b)}function ko(a,b,c){c(b);b=b.va.o;for(var d=b.length,e=0;e<d;e++){var g=b[e];g instanceof I&&ko(a,g,c)}}I.prototype.walkVisualTree=I.prototype.CJ=function(a){lo(this,this,a)};function lo(a,b,c){c(b);if(b instanceof I){b=b.va.o;for(var d=b.length,e=0;e<d;e++)lo(a,b[e],c)}}I.prototype.findInVisualTree=I.prototype.zt=function(a){return mo(this,this,a)};
function mo(a,b,c){if(c(b))return b;if(b instanceof I){b=b.va.o;for(var d=b.length,e=0;e<d;e++){var g=mo(a,b[e],c);if(null!==g)return g}}return null}I.prototype.findObject=I.prototype.oe=function(a){if(this.name===a)return this;for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof I)if(null===e.Ji&&null===e.tg){if(e=e.oe(a),null!==e)return e}else if(Rl(e)&&(e=e.va.first(),null!==e&&(e=e.oe(a),null!==e)))return e}return null};
function no(a){a=a.va.o;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof I)c=Math.max(c,no(e));else if(e instanceof X){a:{if(null!==!e.Vf)switch(e.eo){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=
0;break a}e=e.Oe/2*e.Jm*e.hj()}c=Math.max(c,e)}}return c}f=I.prototype;f.Wg=function(){return!(this.type===Qm||this.type===Rm)};
f.pe=function(a,b,c){if(!1===this.jg)return null;void 0===b&&(b=null);void 0===c&&(c=null);if(nl(this))return null;var d=this.Ga,e=1/this.hj(),g=this.Wg(),h=g?a:tb(z.Tb(a.x,a.y),this.transform),k=this.h,l=10,m=5;null!==k&&(l=k.rp("extraTouchArea"),m=l/2);if(Ib(-(m*e),-(m*e),d.width+l*e,d.height+l*e,h.x,h.y)){if(!this.eh){var e=this.va.o,n=e.length,k=z.O(),m=(l=this.JE)?this.gf():null;if(l&&(m.Wg()?tb(k.set(a),m.transform):k.set(a),!m.Ma(k)))return z.A(k),g||z.A(h),null;for(;n--;){var p=e[n];if(p.visible||
p===this.Zb)if(p.Wg()?tb(k.set(a),p.transform):k.set(a),!l||p!==m){var q=null;p instanceof I?q=p.pe(k,b,c):!0===p.jg&&p.Ma(k)&&(q=p);if(null!==q&&(null!==b&&(q=b(q)),null!==q&&(null===c||c(q))))return z.A(k),g||z.A(h),q}}z.A(k)}if(null===this.background&&null===this.wl)return g||z.A(h),null;a=Ib(0,0,d.width,d.height,h.x,h.y)?this:null;g||z.A(h);return a}g||z.A(h);return null};
f.lp=function(a,b,c,d){if(!1===this.jg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);d instanceof J||d instanceof K||(d=new J(O));var e=this.Ga,g=this.Wg(),h=g?a:tb(z.Tb(a.x,a.y),this.transform);if(Ib(0,0,e.width,e.height,h.x,h.y)){if(!this.eh){for(var e=this.va.o,k=e.length,l=z.O();k--;){var m=e[k];if(m.visible||m===this.Zb){m.Wg()?tb(l.set(a),m.transform):l.set(a);var n=m,m=m instanceof I?m:null;(null!==m?m.lp(l,b,c,d):n.Ma(l))&&!1!==n.jg&&(null!==b&&(n=b(n)),null===n||null!==c&&!c(n)||d.add(n))}}z.A(l)}g||
z.A(h);return null!==this.background||null!==this.wl}g||z.A(h);return!1};
f.pk=function(a,b,c,d,e,g){if(!1===this.jg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=g;void 0===g&&(h=z.Hh(),h.reset());h.multiply(this.transform);if(this.Xm(a,h))return oo(this,b,c,e),void 0===g&&z.jf(h),!0;if(this.Jg(a,h)){if(!this.eh)for(var k=this.va.o,l=k.length;l--;){var m=k[l];if(m.visible||m===this.Zb){var n=m.W,p=this.Ga;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=m;m=m instanceof I?m:null;p=z.Hh();p.set(h);if(null!==m?m.pk(a,b,c,d,e,p):Lm(n,a,d,p))null!==
b&&(n=b(n)),null===n||null!==c&&!c(n)||e.add(n);z.jf(p)}}}void 0===g&&z.jf(h);return d}void 0===g&&z.jf(h);return!1};function oo(a,b,c,d){for(var e=a.va.o,g=e.length;g--;){var h=e[g];if(h.visible){var k=h.W,l=a.Ga;k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height||(h instanceof I&&oo(h,b,c,d),null!==b&&(h=b(h)),null===h||null!==c&&!c(h)||d.add(h))}}}
f.cn=function(a,b,c,d,e,g){if(!1===this.jg)return!1;void 0===c&&(c=null);void 0===d&&(d=null);var h=this.Ga,k=this.Wg(),l=k?a:tb(z.Tb(a.x,a.y),this.transform),m=k?b:tb(z.Tb(b.x,b.y),this.transform),n=l.Af(m),p=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height||ub(l.x,l.y,0,0,0,h.height)<n||ub(l.x,l.y,0,h.height,h.width,h.height)<n||ub(l.x,l.y,h.width,h.height,h.width,0)<n||ub(l.x,l.y,h.width,0,0,0)<n,h=0<l.x&&l.x<h.width&&0<l.y&&l.y<h.height&&ub(l.x,l.y,0,0,0,h.height)<n&&ub(l.x,l.y,0,h.height,h.width,h.height)<
n&&ub(l.x,l.y,h.width,h.height,h.width,0)<n&&ub(l.x,l.y,h.width,0,0,0)<n;k||(z.A(l),z.A(m));if(p){if(!this.eh){k=z.O();l=z.O();m=this.va.o;for(n=m.length;n--;){var q=m[n];if(q.visible||q===this.Zb){var r=q.W,s=this.Ga;r.x>s.width||r.y>s.height||0>r.x+r.width||0>r.y+r.height||(q.Wg()?(r=q.transform,tb(k.set(a),r),tb(l.set(b),r)):(k.set(a),l.set(b)),r=q,q=q instanceof I?q:null,null!==q?!q.cn(k,l,c,d,e,g):!r.rE(k,l,e))||(null!==c&&(r=c(r)),null===r||null!==d&&!d(r)||g.add(r))}}z.A(k);z.A(l)}return e?
p:h}return!1};function Yn(a){var b=a.C;if(void 0===b||b===Pc)b=null;null===b&&a instanceof X&&(a=a.wh,null!==a&&(b=a.C));null===b&&(b=Zb);return b}function Zn(a){var b=a.D;if(void 0===b||b===Pc)b=null;null===b&&a instanceof X&&(a=a.wh,null!==a&&(b=a.D));null===b&&(b=ic);return b}I.prototype.add=I.prototype.add=function(a){z.l(a,O,I,"add:element");this.Md(this.va.count,a)};I.prototype.elt=I.prototype.ea=function(a){return this.va.ea(a)};
I.prototype.insertAt=I.prototype.Md=function(a,b){b instanceof D&&z.k("Cannot add a Part to a Panel: "+b);if(this===b||this.Pl(b))this===b&&z.k("Cannot make a Panel contain itself: "+this.toString()),z.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.T;null!==c&&c!==this&&z.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.ba!==Hk||b instanceof X||z.k("Can only add Shapes to a Grid Panel, not: "+b);b.Tl(this);b.Am=null;if(null!==this.Tt){var d=b.data;null!==d&&"object"===typeof d&&(null===this.sg&&(this.sg=new na(Object,I)),this.sg.add(d,b))}var e=this.va,d=-1;if(c===this){for(var g=-1,h=this.va.o,k=h.length,l=0;l<k;l++)if(h[l]===b){g=l;break}if(-1!==g){if(g===a||g+1>=e.count&&a>=e.count)return;e.dd(g);d=g}else z.k("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>
a||a>e.count)a=e.count;e.Md(a,b);this.Q();b.Q();null!==b.zd?this.Rh=!0:b instanceof I&&!0===b.Rh&&(this.Rh=!0);c=this.ca;null!==c&&(c.jl=null,c.Rj=NaN,this.Rh&&c instanceof E&&(c.Rh=!0),c.Rh&&(c.Ed=null),e=this.h,null!==e&&e.pa.qb||(-1!==d&&c.Rc(Xf,"elements",this,b,null,d,null),c.Rc(Wf,"elements",this,null,b,null,a)))};I.prototype.remove=I.prototype.remove=function(a){z.l(a,O,I,"remove:element");for(var b=this.va.o,c=b.length,d=-1,e=0;e<c;e++)if(b[e]===a){d=e;break}-1!==d&&this.Ve(d)};
I.prototype.removeAt=I.prototype.dd=function(a){u&&z.p(a,I,"removeAt:idx");0<=a&&this.Ve(a)};I.prototype.Ve=function(a){var b=this.va,c=b.ea(a);c.Am=null;c.Tl(null);if(null!==this.sg){var d=c.data;"object"===typeof d&&this.sg.remove(d)}b.dd(a);Yk(this,!1);this.Q();this.Km===c&&(this.Km=null);b=this.ca;null!==b&&(b.jl=null,b.Rj=NaN,b.ae(),d=this.h,null!==d&&d.pa.qb||b.Rc(Xf,"elements",this,c,null,a,null))};z.w(I,{Yp:"rowCount"},function(){return void 0===this.Wd?0:this.Wd.length});
I.prototype.getRowDefinition=I.prototype.$d=function(a){u&&z.p(a,I,"getRowDefinition:idx");0>a&&z.ka(a,">= 0",I,"getRowDefinition:idx");a=Math.round(a);var b=this.Wd;if(void 0===b[a]){var c=new Ig;c.Tl(this);c.re=!0;c.index=a;b[a]=c}return b[a]};I.prototype.removeRowDefinition=I.prototype.oF=function(a){u&&z.p(a,I,"removeRowDefinition:idx");0>a&&z.ka(a,">= 0",I,"removeRowDefinition:idx");a=Math.round(a);var b=this.Wd;this.Rc(Xf,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.Q()};
z.w(I,{fp:"columnCount"},function(){return void 0===this.Sd?0:this.Sd.length});I.prototype.getColumnDefinition=I.prototype.Zd=function(a){u&&z.p(a,I,"getColumnDefinition:idx");0>a&&z.ka(a,">= 0",I,"getColumnDefinition:idx");a=Math.round(a);var b=this.Sd;if(void 0===b[a]){var c=new Ig;c.Tl(this);c.re=!1;c.index=a;b[a]=c}return b[a]};
I.prototype.removeColumnDefinition=I.prototype.kF=function(a){u&&z.p(a,I,"removeColumnDefinition:idx");0>a&&z.ka(a,">= 0",I,"removeColumnDefinition:idx");a=Math.round(a);var b=this.Sd;this.Rc(Xf,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.Q()};
z.defineProperty(I,{dJ:"rowSizing"},function(){return void 0===this.Fm?Un:this.Fm},function(a){if(void 0!==this.Fm){var b=this.Fm;b!==a&&(a!==Un&&a!==ao&&z.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.Fm=a,this.Q(),this.j("rowSizing",b,a))}});
z.defineProperty(I,{cH:"columnSizing"},function(){return void 0===this.em?Un:this.em},function(a){if(void 0!==this.em){var b=this.em;b!==a&&(a!==Un&&a!==ao&&z.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+a),this.em=a,this.Q(),this.j("columnSizing",b,a))}});
z.defineProperty(I,{VF:"topIndex"},function(){return void 0===this.Yi?0:this.Yi},function(a){if(void 0!==this.Yi){var b=this.Yi;b!==a&&((!isFinite(a)||0>a)&&z.k("Panel.topIndex must be greater than zero and a real number, not: "+a),this.Yi=a,this.Q(),this.j("topIndex",b,a))}});
z.defineProperty(I,{WE:"leftIndex"},function(){return void 0===this.Ki?0:this.Ki},function(a){if(void 0!==this.Ki){var b=this.Ki;b!==a&&((!isFinite(a)||0>a)&&z.k("Panel.leftIndex must be greater than zero and a real number, not: "+a),this.Ki=a,this.Q(),this.j("leftIndex",b,a))}});I.prototype.findRowForLocalY=function(a){if(0>a)return-1;if(this.type!==ga)return NaN;for(var b=0,c=this.Wd,d=c.length,e=this.Yi;e<d;e++){var g=c[e];if(void 0!==g&&(b+=g.total,a<b))return e}return-1};
I.prototype.findColumnForLocalX=function(a){if(0>a)return-1;if(this.type!==ga)return NaN;for(var b=0,c=this.Sd,d=c.length,e=this.Ki;e<d;e++){var g=c[e];if(void 0!==g&&(b+=g.total,a<b))return e}return-1};
z.defineProperty(I,{data:"data"},function(){return this.fe},function(a){var b=this.fe;if(b!==a){var c=this instanceof D&&!(this instanceof da);c&&z.g(a,"object",I,"data");jh(this);this.fe=a;var d=this.h;null!==d&&(c?this instanceof G?(null!==b&&d.Rk.remove(b),null!==a&&d.Rk.add(a,this)):this instanceof D&&(null!==b&&d.Ai.remove(b),null!==a&&d.Ai.add(a,this)):(c=this.T,null!==c&&null!==c.sg&&(null!==b&&c.sg.remove(b),null!==a&&c.sg.add(a,this))));this.j("data",b,a);null!==d&&d.pa.qb||null!==a&&this.Mb()}});
z.defineProperty(I,{lI:"itemIndex"},function(){return this.vr},function(a){var b=this.vr;b!==a&&(this.vr=a,this.j("itemIndex",b,a))});function fn(a){a=a.Ok;return null!==a&&a.G}
function jh(a){var b=a.Ok;if(null===b)null!==a.data&&z.k("Template cannot have .data be non-null: "+a),a.Ok=b=new J($g);else if(b.G)return;var c=new J(O);jo(a,a,function(a,d){var e=d.Ac;if(null!==e)for(bn(d,!1),e=e.i;e.next();){var g=e.value;g.mode===bh&&bn(d,!0);if(null!==g.xn){var h=ch(g,a,d);null!==h&&(c.add(h),null===h.No&&(h.No=new J($g)),h.No.add(g))}b.add(g)}if(d instanceof I&&d.type===ga){if(0<d.Wd.length)for(e=d.Wd,g=e.length,h=0;h<g;h++){var k=e[h];if(void 0!==k&&null!==k.Ac)for(var l=k.Ac.i;l.next();){var v=
l.value;v.Bg=k;v.Ts=2;v.Vo=k.index;b.add(v)}}if(0<d.Sd.length)for(e=d.Sd,g=e.length,h=0;h<g;h++)if(k=e[h],void 0!==k&&null!==k.Ac)for(l=k.Ac.i;l.next();)v=l.value,v.Bg=k,v.Ts=1,v.Vo=k.index,b.add(v)}});for(var d=c.i;d.next();){var e=d.value;if(null!==e.No){bn(e,!0);for(var g=e.No.i;g.next();){var h=g.value;null===e.Ac&&(e.Ac=new J($g));e.Ac.add(h)}}e.No=null}for(d=b.i;d.next();)if(e=d.value,g=e.Bg,null!==g){e.Bg=null;var k=e.yu,l=k.indexOf(".");0<l&&g instanceof I&&(h=k.substring(0,l),k=k.substr(l+
1),l=g.oe(h),null!==l?(g=l,e.yu=k):z.trace('Warning: unable to find GraphObject named "'+h+'" for Binding: '+e.toString()));g instanceof Ig?(e.Wl=z.nd(g.T),g.T.Jn=e.Wl):(e.Wl=z.nd(g),g.Jn=e.Wl)}b.freeze();a instanceof D&&(a.be()&&(tj(a,Infinity,Infinity),a.Lc()),u&&!po&&jo(a,a,function(a,c){if(c instanceof I&&(c.type===Ek||c.type===$i)&&1>=c.elements.count&&!(c instanceof D)){if(1===c.elements.count){var d=null!==c.Tt;if(!d)for(var e=b.i;e.next();)if("itemArray"===e.value.yu){d=!0;break}}d||(z.trace("Auto or Spot Panel should not have zero or one elements: "+
c.toString()+" in "+a.toString()),po=!0)}}))}var po=!1;I.prototype.copyTemplate=function(){var a=this.copy();a.CJ(function(a){a instanceof I&&(a.Ok=null,a.fe=null);var c=a.Ac;null!==c&&(a.Ac=null,c.each(function(c){a.bind(c.copy())}))});return a};
I.prototype.updateTargetBindings=I.prototype.Mb=function(a){var b=this.Ok;if(null!==b)for(void 0===a&&(a=""),b=b.i;b.next();){var c=b.value,d=c.NF;if(""===a||""===d||d===a)if(d=c.yu,null!==c.gH||""!==d){var d=this.data,e=c.xn;if(null!==e)d=""===e?this:"."===e?this:".."===e?this:this.oe(e);else{var g=this.h;null!==g&&c.St&&(d=g.ha.uk)}if(null===d)u&&z.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var g=this,h=c.Wl;if(-1!==h){if(g=this.Zw(h),null===g)continue}else null!==
c.Bg&&(g=c.Bg);"."===e?d=g:".."===e&&(d=g.T);e=c.Ts;if(0!==e){if(!(g instanceof I))continue;h=g;1===e?g=h.Zd(c.Vo):2===e&&(g=h.$d(c.Vo))}void 0!==g&&c.eG(g,d)}}}};z.defineProperty(I,{Tt:"itemArray"},function(){return this.Ji},function(a){var b=this.Ji;if(b!==a){u&&null!==a&&!z.isArray(a)&&z.k("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.h;null!==c&&null!==b&&Cl(c,this);this.Ji=a;null!==c&&null!==a&&yl(c,this);this.j("itemArray",b,a);null!==c&&c.pa.qb||this.GA()}});
function Rl(a){return a.type===$i||a.type===Ek||a.type===Ni||a.type===ga&&0<a.va.length&&(a=a.va.ea(0),a.Ff&&a instanceof I&&(a.type===Qm||a.type===Rm))?!0:!1}I.prototype.rebuildItemElements=I.prototype.GA=function(){var a=0;for(Rl(this)&&(a=1);this.va.length>a;)this.Ve(this.va.length-1);a=this.Tt;if(null!==a)for(var b=z.ab(a),c=0;c<b;c++)Ql(this,z.Ya(a,c),c)};
I.prototype.findItemPanelForData=I.prototype.DH=function(a){if(void 0===a||null===a||null===this.sg)return null;z.g(a,"object",I,"findItemPanelForData");return this.sg.na(a)};
function Ql(a,b,c){if(!(void 0===b||null===b||0>c)){var d;d=qo(a,b);var e=a.mI,g=null;null!==e&&(g=e.na(d));null===g&&(ro||(ro=!0,z.trace('No item template Panel found for category "'+d+'" on '+a),z.trace("  Using default item template."),d=new I,e=new qa,e.bind(new $g("text","",ka)),d.add(e),so=d),g=so);d=g;null!==d&&(jh(d),d=d.copy(),"object"===typeof b&&(null===a.sg&&(a.sg=new na(Object,I)),a.sg.add(b,d)),e=c,Rl(a)&&e++,a.Md(e,d),Sl(a,e,c),d.fe=null,d.data=b)}}
function Sl(a,b,c){for(a=a.va;b<a.length;){var d=a.ea(b);if(d instanceof I){var e=b,g=c;d.type===Qm?d.Vb=e:d.type===Rm&&(d.column=e);d.lI=g}b++;c++}}
z.defineProperty(I,{LK:"itemTemplate"},function(){return null===this.tg?null:this.tg.na("")},function(a){if(null===this.tg){if(null===a)return;this.tg=new na("string",I)}var b=this.tg.na("");b!==a&&(z.l(a,I,I,"itemTemplate"),(a instanceof D||a.Ff)&&z.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+a),this.tg.add("",a),this.j("itemTemplate",b,a),a=this.h,null!==a&&a.pa.qb||this.GA())});
z.defineProperty(I,{mI:"itemTemplateMap"},function(){return this.tg},function(a){var b=this.tg;if(b!==a){z.l(a,na,I,"itemTemplateMap");for(var c=a.i;c.next();){var d=c.value;(d instanceof D||d.Ff)&&z.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+d)}this.tg=a;this.j("itemTemplateMap",b,a);a=this.h;null!==a&&a.pa.qb||this.GA()}});
z.defineProperty(I,{KK:"itemCategoryProperty"},function(){return this.uo},function(a){var b=this.uo;b!==a&&("string"!==typeof a&&"function"!==typeof a&&z.ic(a,"string or function",I,"itemCategoryProperty"),this.uo=a,this.j("itemCategoryProperty",b,a))});
function qo(a,b){if(null===b)return"";var c=a.uo,d="";if("function"===typeof c)d=c(b);else if("string"===typeof c&&"object"===typeof b){if(""===c)return"";d=z.tb(b,c)}else return"";if(void 0===d)return"";if("string"===typeof d)return d;z.k("Panel.getCategoryForItemData found a non-string category for "+b+": "+d);return""}var ro=!1,so=null;z.defineProperty(I,{FK:"isAtomic"},function(){return this.eh},function(a){var b=this.eh;b!==a&&(z.g(a,"boolean",I,"isAtomic"),this.eh=a,this.j("isAtomic",b,a))});
z.defineProperty(I,{JE:"isClipping"},function(){return this.hr},function(a){var b=this.hr;b!==a&&(z.g(a,"boolean",I,"isClipping"),this.hr=a,this.j("isClipping",b,a))});function Ig(){z.kc(this);this.mh=null;this.Cv=!0;this.Uc=0;this.ef=NaN;this.Vj=0;this.Tj=Infinity;this.Ie=Pc;this.sb=this.Xa=0;this.Ac=null;this.Ls=to;this.ei=Am;this.Fs=this.Zj=null;this.Gs=NaN;this.Nb=this.Yh=null;this.Gq=!1}z.ia("RowColumnDefinition",Ig);
Ig.prototype.copy=function(){var a=new Ig;a.Cv=this.Cv;a.Uc=this.Uc;a.ef=this.ef;a.Vj=this.Vj;a.Tj=this.Tj;a.Ie=this.Ie;a.Xa=this.Xa;a.sb=this.sb;a.ei=this.ei;a.Ls=this.Ls;a.Zj=null===this.Zj?null:this.Zj.V();a.Fs=this.Fs;a.Gs=this.Gs;a.Yh=null;null!==this.Yh&&(a.Yh=z.Al(this.Yh));a.Nb=this.Nb;a.Gq=this.Gq;a.Ac=this.Ac;return a};
Ig.prototype.tt=function(a){z.l(a,Ig,Ig,"copyFrom:pd");a.re?this.height=a.height:this.width=a.width;this.qj=a.qj;this.qf=a.qf;this.alignment=a.alignment;this.stretch=a.stretch;this.uu=a.uu;this.Zj=null===a.Zj?null:a.Zj.V();this.Zp=a.Zp;this.$p=a.$p;this.Yh=null;a.Yh&&(this.Yh=z.Al(a.Yh));this.background=a.background;this.Nz=a.Nz;this.Ac=a.Ac};Ig.prototype.toString=function(){return"RowColumnDefinition "+(this.re?"(Row ":"(Column ")+this.index+") #"+z.nd(this)};var to;
Ig.Default=to=z.s(Ig,"Default",0);var ao;Ig.None=ao=z.s(Ig,"None",1);var Un;Ig.ProportionalExtra=Un=z.s(Ig,"ProportionalExtra",2);Ig.prototype.Tl=function(a){this.mh=a};Ig.prototype.computeEffectiveSpacingTop=Ig.prototype.TD=function(){var a=0;if(0!==this.index){var b=this.mh,c=this.Zp;null===c&&null!==b&&(c=this.re?b.Bi:b.Mh);null!==c&&(a=this.$p,isNaN(a)&&(a=null!==b?this.re?b.Oh:b.Nh:0))}b=this.GF;if(null===b)if(b=this.mh,null!==b)b=b.Bj;else return a;return a+(this.re?b.top:b.left)};
Ig.prototype.computeEffectiveSpacing=Ig.prototype.Re=function(){var a=0;if(0!==this.index){var b=this.mh,c=this.Zp;null===c&&null!==b&&(c=this.re?b.Bi:b.Mh);null!==c&&(a=this.$p,isNaN(a)&&(a=null!==b?this.re?b.Oh:b.Nh:0))}b=this.GF;if(null===b)if(b=this.mh,null!==b)b=b.Bj;else return a;return a+(this.re?b.top+b.bottom:b.left+b.right)};
Ig.prototype.kd=function(a,b,c,d,e){var g=this.mh;if(null!==g&&(g.Rc(Uf,a,this,b,c,d,e),null!==this.Ac&&(b=g.h,null!==b&&!b.Ee&&(g=g.np(),null!==g&&(g=g.data,null!==g)))))for(c=this.Ac.i;c.next();)c.value.Tx(this,g,a,b)};z.w(Ig,{T:"panel"},function(){return this.mh});z.defineProperty(Ig,{re:"isRow"},function(){return this.Cv},function(a){this.Cv=a});z.defineProperty(Ig,{index:"index"},function(){return this.Uc},function(a){this.Uc=a});
z.defineProperty(Ig,{height:"height"},function(){return this.ef},function(a){var b=this.ef;b!==a&&(u&&z.g(a,"number",Ig,"height"),0>a&&z.ka(a,">= 0",Ig,"height"),this.ef=a,this.Oa=this.Xa,null!==this.T&&this.T.Q(),this.kd("height",b,a))});z.defineProperty(Ig,{width:"width"},function(){return this.ef},function(a){var b=this.ef;b!==a&&(u&&z.g(a,"number",Ig,"width"),0>a&&z.ka(a,">= 0",Ig,"width"),this.ef=a,this.Oa=this.Xa,null!==this.T&&this.T.Q(),this.kd("width",b,a))});
z.defineProperty(Ig,{qj:"minimum"},function(){return this.Vj},function(a){var b=this.Vj;b!==a&&(u&&z.g(a,"number",Ig,"minimum"),(0>a||!isFinite(a))&&z.ka(a,">= 0",Ig,"minimum"),this.Vj=a,this.Oa=this.Xa,null!==this.T&&this.T.Q(),this.kd("minimum",b,a))});z.defineProperty(Ig,{qf:"maximum"},function(){return this.Tj},function(a){var b=this.Tj;b!==a&&(u&&z.g(a,"number",Ig,"maximum"),0>a&&z.ka(a,">= 0",Ig,"maximum"),this.Tj=a,this.Oa=this.Xa,null!==this.T&&this.T.Q(),this.kd("maximum",b,a))});
z.defineProperty(Ig,{alignment:"alignment"},function(){return this.Ie},function(a){var b=this.Ie;b.N(a)||(u&&z.l(a,Q,Ig,"alignment"),this.Ie=a.V(),null!==this.T&&this.T.Q(),this.kd("alignment",b,a))});z.defineProperty(Ig,{stretch:"stretch"},function(){return this.ei},function(a){var b=this.ei;b!==a&&(u&&z.Ba(a,O,Ig,"stretch"),this.ei=a,null!==this.T&&this.T.Q(),this.kd("stretch",b,a))});
z.defineProperty(Ig,{GF:"separatorPadding"},function(){return this.Zj},function(a){"number"===typeof a?a=new Db(a):null!==a&&u&&z.l(a,Db,Ig,"separatorPadding");var b=this.Zj;null!==a&&null!==b&&b.N(a)||(null!==a&&(a=a.V()),this.Zj=a,null!==this.T&&this.T.Q(),this.kd("separatorPadding",b,a))});
z.defineProperty(Ig,{Zp:"separatorStroke"},function(){return this.Fs},function(a){var b=this.Fs;b!==a&&(null===a||"string"===typeof a||a instanceof Da)&&(a instanceof Da&&a.freeze(),this.Fs=a,null!==this.T&&this.T.Q(),this.kd("separatorStroke",b,a))});z.defineProperty(Ig,{$p:"separatorStrokeWidth"},function(){return this.Gs},function(a){var b=this.Gs;b!==a&&(this.Gs=a,null!==this.T&&this.T.Q(),this.kd("separatorStrokeWidth",b,a))});
z.defineProperty(Ig,{hJ:"separatorDashArray"},function(){return this.Yh},function(a){var b=this.Yh;if(b!==a){null===a||Array.isArray(a)||z.ic(a,"Array",Ig,"separatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("separatorDashArray value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.Yh=a;null!==this.T&&this.T.ta();this.kd("separatorDashArray",b,a)}});
z.defineProperty(Ig,{background:"background"},function(){return this.Nb},function(a){var b=this.Nb;b!==a&&(null===a||"string"===typeof a||a instanceof Da)&&(a instanceof Da&&a.freeze(),this.Nb=a,null!==this.T&&this.T.ta(),this.kd("background",b,a))});z.defineProperty(Ig,{Nz:"coversSeparators"},function(){return this.Gq},function(a){var b=this.Gq;b!==a&&(z.g(a,"boolean",Ig,"coversSeparators"),this.Gq=a,null!==this.T&&this.T.ta(),this.kd("coversSeparators",b,a))});
z.defineProperty(Ig,{uu:"sizing"},function(){return this.Ls},function(a){var b=this.Ls;b!==a&&(u&&z.Ba(a,Ig,Ig,"sizing"),this.Ls=a,null!==this.T&&this.T.Q(),this.kd("sizing",b,a))});function $n(a){if(a.uu===to){var b=a.mh;return a.re?b.dJ:b.cH}return a.uu}z.defineProperty(Ig,{Oa:"actual"},function(){return this.Xa},function(a){this.Xa=isNaN(this.ef)?Math.max(Math.min(this.Tj,a),this.Vj):Math.max(Math.min(this.Tj,this.ef),this.Vj)});
z.defineProperty(Ig,{total:"total"},function(){return this.Xa+this.Re()},function(a){this.Xa=isNaN(this.ef)?Math.max(Math.min(this.Tj,a),this.Vj):Math.max(Math.min(this.Tj,this.ef),this.Vj);this.Xa=Math.max(0,this.Xa-this.Re())});z.defineProperty(Ig,{position:"position"},function(){return this.sb},function(a){this.sb=a});
Ig.prototype.bind=Ig.prototype.bind=function(a){a.Bg=this;var b=this.T;if(null!==b){var c=b.np();null!==c&&fn(c)&&z.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a+" on "+b)}null===this.Ac&&(this.Ac=new J($g));this.Ac.add(a)};
function X(){O.call(this);this.Vf=this.kb=null;this.eo="None";this.br=Am;this.Kc=this.Bd="black";this.Oe=1;this.Ro="butt";this.To="miter";this.Jm=10;this.So=null;this.we=0;this.di=this.ci=Pc;this.cs=this.bs=NaN;this.ir=!1;this.es=null;this.jo=this.Xo="None";this.fr=1}z.Ra(X,O);z.ia("Shape",X);
X.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.kb=this.kb;a.eo=this.eo;a.br=this.br;a.Vf=this.Vf;a.Bd=this.Bd;a.Kc=this.Kc;a.Oe=this.Oe;a.Ro=this.Ro;a.To=this.To;a.Jm=this.Jm;null!==this.So&&(a.So=z.Al(this.So));a.we=this.we;a.ci=this.ci.V();a.di=this.di.V();a.bs=this.bs;a.cs=this.cs;a.ir=this.ir;a.es=this.es;a.Xo=this.Xo;a.jo=this.jo;a.fr=this.fr};X.prototype.toString=function(){return"Shape("+("None"!==this.Hb?this.Hb:"None"!==this.fq?this.fq:this.Xz)+")#"+z.nd(this)};
function uo(a,b,c,d){var e=c.length;if(!(4>e)){for(var g=d.Ia,h=Math.max(1,g.width),g=g.height,k=c[0],l=c[1],m=0,n=0,p=0,q=0,r=0,s=0,t=q=0,v=z.rb(),x=2;x<e;x+=2)m=c[x],n=c[x+1],p=m-k,q=n-l,0===p&&(p=.001),r=q/p,s=Math.atan2(q,p),q=Math.sqrt(p*p+q*q),v.push([p,s,r,q]),t+=q,k=m,l=n;k=c[0];l=c[1];p=d.Ia.width;d instanceof X&&(p-=d.ub);1>p&&(p=1);for(var e=c=p,m=h/2,n=0===m?!1:!0,x=0,q=v[x],p=q[0],s=q[1],r=q[2],q=q[3],y=0;.1<=t;){0===y&&(n?(e=c,e-=m,t-=m,n=!1):e=c,0===e&&(e=1));if(e>t){z.xa(v);return}e>
q?(y=e-q,e=q):y=0;var A=Math.sqrt(e*e/(1+r*r));0>p&&(A=-A);k+=A;l+=r*A;a.translate(k,l);a.rotate(s);a.translate(-(h/2),-(g/2));0===y&&d.ok(a,b);a.translate(h/2,g/2);a.rotate(-s);a.translate(-k,-l);t-=e;q-=e;if(0!==y){x++;if(x===v.length){z.xa(v);return}q=v[x];p=q[0];s=q[1];r=q[2];q=q[3];e=y}}z.xa(v)}}
X.prototype.ok=function(a,b){if(null!==this.Kc||null!==this.Bd){null!==this.Bd&&Um(this,a,this.Bd,!0,!1);null!==this.Kc&&Um(this,a,this.Kc,!1,!1);var c=this.Oe;if(0===c){var d=this.ca;d instanceof da&&d.type===Ni&&"Selection"===d.nc&&d.fc instanceof X&&d.Xf.gf()===d.fc&&(c=d.fc.ub)}a.lineWidth=c;a.lineJoin=this.To;a.lineCap=this.Ro;a.miterLimit=this.Jm;var e=!1;this.ca&&b.ij("drawShadows")&&(e=this.ca.tk);var g=!0;null!==this.Kc&&null===this.Bd&&(g=!1);var d=!1,h=!0,k=this.PF;null!==k&&(d=!0,h=a.Uz(k,
this.we));var l=this.kb;if(null!==l){if(l.ba===mf)a.beginPath(),d&&!h?Hm(a,l.xc,l.Cc,l.zb,l.Gb,k,this.we):(a.moveTo(l.xc,l.Cc),a.lineTo(l.zb,l.Gb)),null!==this.Bd&&a.Hg(this.Bd),0!==c&&null!==this.Kc&&a.uj();else if(l.ba===nf){var m=l.xc,n=l.Cc,p=l.zb,q=l.Gb,l=Math.min(m,p),r=Math.min(n,q),m=Math.abs(p-m),n=Math.abs(q-n);null!==this.Bd&&(a.beginPath(),a.rect(l,r,m,n),a.Hg(this.Bd));if(null!==this.Kc){var s=p=0,t=0;g&&e&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0);d&&!h?(h=z.rb(),h.push(l),h.push(r),h.push(l+m),h.push(r),h.push(l+m),h.push(r+n),h.push(l),h.push(r+n),h.push(l),h.push(r),a.beginPath(),vo(a,h,k,this.we),a.uj(),z.xa(h)):0!==c&&(a.beginPath(),a.rect(l,r,m,n),a.uj());g&&e&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t)}}else if(l.ba===of)m=l.xc,n=l.Cc,p=l.zb,q=l.Gb,l=Math.abs(p-m)/2,r=Math.abs(q-n)/2,m=Math.min(m,p)+l,n=Math.min(n,q)+r,a.beginPath(),a.moveTo(m,n-r),a.bezierCurveTo(m+Hd*l,n-r,m+l,n-Hd*r,m+l,n),a.bezierCurveTo(m+
l,n+Hd*r,m+Hd*l,n+r,m,n+r),a.bezierCurveTo(m-Hd*l,n+r,m-l,n+Hd*r,m-l,n),a.bezierCurveTo(m-l,n-Hd*r,m-Hd*l,n-r,m,n-r),a.closePath(),null!==this.Bd&&a.Hg(this.Bd),d&&!h&&(h=z.rb(),we(m,n-r,m+Hd*l,n-r,m+l,n-Hd*r,m+l,n,.5,h),we(m+l,n,m+l,n+Hd*r,m+Hd*l,n+r,m,n+r,.5,h),we(m,n+r,m-Hd*l,n+r,m-l,n+Hd*r,m-l,n,.5,h),we(m-l,n,m-l,n-Hd*r,m-Hd*l,n-r,m,n-r,.5,h),a.beginPath(),vo(a,h,k,this.we),z.xa(h)),0!==c&&null!==this.Kc&&(g&&e?(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0,a.uj(),a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t):a.uj());else if(l.ba===jf){r=l.Dj;n=r.length;for(q=0;q<n;q++){m=r.o[q];a.beginPath();a.moveTo(m.Ha,m.Da);for(var p=m.Ab.o,s=p.length,v=null,t=0;t<s;t++){var x=p[t];switch(x.ba){case Ef:a.moveTo(x.L,x.M);break;case qf:a.lineTo(x.L,x.M);break;case Ff:a.bezierCurveTo(x.Dd,x.Ne,x.nh,x.zg,x.zb,x.Gb);break;case Gf:a.quadraticCurveTo(x.Dd,x.Ne,x.zb,x.Gb);break;case Hf:if(x.radiusX===x.radiusY)v=Math.PI/180,a.arc(x.Dd,x.Ne,x.radiusX,
x.Fe*v,(x.Fe+x.Lf)*v,0>x.Lf);else{var v=Jf(x,m),y=v.length;if(0===y){a.lineTo(x.ra,x.za);break}for(var A=0;A<y;A++){var C=v[A];0===A&&a.lineTo(C[0],C[1]);a.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7])}}break;case If:A=y=0;if(null!==v&&v.type===Hf){v=Jf(v,m);C=v.length;if(0===C){a.lineTo(x.ra,x.za);break}v=v[C-1]||null;null!==v&&(y=v[6],A=v[7])}else y=null!==v?v.L:m.Ha,A=null!==v?v.M:m.Da;v=Kf(x,m,y,A);y=v.length;if(0===y){a.lineTo(x.ra,x.za);break}for(A=0;A<y;A++)C=v[A],a.bezierCurveTo(C[2],C[3],
C[4],C[5],C[6],C[7]);break;default:z.k("Segment not of valid type: "+x.ba)}x.Th&&a.closePath();v=x}e?(t=s=p=0,m.ro?(!0===m.im&&null!==this.Bd?(a.Hg(this.Bd),g=!0):g=!1,0!==c&&null!==this.Kc&&(g&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!h||a.uj(),g&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t))):(g&&(p=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),!0===m.im&&null!==this.Bd&&
a.Hg(this.Bd),0!==c&&null!==this.Kc&&(d&&!h||a.uj()),g&&(a.shadowOffsetX=p,a.shadowOffsetY=s,a.shadowBlur=t))):(!0===m.im&&null!==this.Bd&&a.Hg(this.Bd),0===c||null===this.Kc||d&&!h||a.uj())}if(d&&!h)for(c=g,g=l.Dj,h=g.length,l=0;l<h;l++){r=g.o[l];a.beginPath();n=z.rb();n.push(r.Ha);n.push(r.Da);q=r.Ha;m=r.Da;p=q;s=m;t=r.Ab.o;x=t.length;for(v=0;v<x;v++){y=t[v];switch(y.ba){case Ef:vo(a,n,k,this.we);n.length=0;n.push(y.L);n.push(y.M);q=y.L;m=y.M;p=q;s=m;break;case qf:n.push(y.L);n.push(y.M);q=y.L;
m=y.M;break;case Ff:we(q,m,y.Dd,y.Ne,y.nh,y.zg,y.zb,y.Gb,.5,n);q=y.L;m=y.M;break;case Gf:Je(q,m,y.Dd,y.Ne,y.zb,y.Gb,.5,n);q=y.L;m=y.M;break;case Hf:A=Jf(y,r);C=A.length;if(0===C){n.push(y.ra);n.push(y.za);q=y.ra;m=y.za;break}for(var L=0;L<C;L++){var H=A[L];we(q,m,H[2],H[3],H[4],H[5],H[6],H[7],.5,n);q=H[6];m=H[7]}break;case If:A=Kf(y,r,q,m);C=A.length;if(0===C){n.push(y.ra);n.push(y.za);q=y.ra;m=y.za;break}for(L=0;L<C;L++)H=A[L],we(q,m,H[2],H[3],H[4],H[5],H[6],H[7],.5,n),q=H[6],m=H[7];break;default:z.k("Segment not of valid type: "+
y.ba)}y.Th&&(n.push(p),n.push(s),vo(a,n,k,this.we))}vo(a,n,k,this.we);z.xa(n);null!==this.Kc&&(q=n=r=0,c&&e&&(r=a.shadowOffsetX,n=a.shadowOffsetY,q=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.uj(),c&&e&&(a.shadowOffsetX=r,a.shadowOffsetY=n,a.shadowBlur=q))}}d&&a.Qz();if(null!==this.zx){d=this.zx;tj(d,Infinity,Infinity);k=d.Ia;d.Lc(0,0,k.width,k.height);c=this.wh;a.save();a.beginPath();k=z.rb();if(c.type===mf)k.push(c.Ha),k.push(c.Da),k.push(c.L),k.push(c.M),uo(a,b,k,d);else if(c.type===
jf)for(h=c.cc.i;h.next();){l=h.value;k.length=0;k.push(l.Ha);k.push(l.Da);g=l.Ha;r=l.Da;n=g;q=r;m=l.Ab.o;p=m.length;for(s=0;s<p;s++){t=m[s];switch(t.ba){case Ef:uo(a,b,k,d);k.length=0;k.push(t.L);k.push(t.M);g=t.L;r=t.M;n=g;q=r;break;case qf:k.push(t.L);k.push(t.M);g=t.L;r=t.M;break;case Ff:we(g,r,t.Dd,t.Ne,t.nh,t.zg,t.zb,t.Gb,.5,k);g=t.L;r=t.M;break;case Gf:Je(g,r,t.Dd,t.Ne,t.zb,t.Gb,.5,k);g=t.L;r=t.M;break;case Hf:c=Jf(t,l);e=c.length;if(0===e){k.push(t.ra);k.push(t.za);g=t.ra;r=t.za;break}for(x=
0;x<e;x++)v=c[x],we(g,r,v[2],v[3],v[4],v[5],v[6],v[7],.5,k),g=v[6],r=v[7];break;case If:c=Kf(t,l,g,r);e=c.length;if(0===e){k.push(t.ra);k.push(t.za);g=t.ra;r=t.za;break}for(x=0;x<e;x++)v=c[x],we(g,r,v[2],v[3],v[4],v[5],v[6],v[7],.5,k),g=v[6],r=v[7];break;default:z.k("Segment not of valid type: "+t.ba)}t.Th&&(k.push(n),k.push(q),uo(a,b,k,d))}uo(a,b,k,d)}else if(c.type===nf)k.push(c.Ha),k.push(c.Da),k.push(c.L),k.push(c.Da),k.push(c.L),k.push(c.M),k.push(c.Ha),k.push(c.M),k.push(c.Ha),k.push(c.Da),
uo(a,b,k,d);else if(c.type===of){h=new kf;h.Ha=c.L;h.Da=(c.Da+c.M)/2;g=new Qf(Hf);g.Fe=0;g.Lf=360;g.ra=(c.Ha+c.L)/2;g.za=(c.Da+c.M)/2;g.radiusX=Math.abs(c.Ha-c.L)/2;g.radiusY=Math.abs(c.Da-c.M)/2;h.add(g);c=Jf(g,h);e=c.length;if(0===e)k.push(g.ra),k.push(g.za);else for(g=h.Ha,r=h.Da,x=0;x<e;x++)v=c[x],we(g,r,v[2],v[3],v[4],v[5],v[6],v[7],.5,k),g=v[6],r=v[7];uo(a,b,k,d)}z.xa(k);a.restore();ca(a,!1)}}}};
function vo(a,b,c,d){var e=b.length;if(!(4>e)){var g=.001,h=c.length,k=b[0],l=b[1];if(4===e)Hm(a,k,l,b[2],b[3],c,d);else{a.moveTo(k,l);for(var m=g=0,n=0,p=0,q=0,r=p=0,s=z.rb(),t=2;t<e;t+=2)g=b[t],m=b[t+1],n=g-k,p=m-l,0===n&&(n=.001),q=p/n,p=Math.sqrt(n*n+p*p),s.push([n,q,p]),r+=p,k=g,l=m;k=b[0];l=b[1];b=0;for(var e=!0,g=c[b%h],m=0!==d,t=0,p=s[t],n=p[0],q=p[1],p=p[2],v=0;.1<=r;){0===v&&(g=c[b%h],b++,m&&(d%=g,g-=d,m=!1));g>r&&(g=r);g>p?(v=g-p,g=p):v=0;var x=Math.sqrt(g*g/(1+q*q));0>n&&(x=-x);k+=x;l+=
q*x;e?a.lineTo(k,l):a.moveTo(k,l);r-=g;p-=g;if(0!==v){t++;if(t===s.length){z.xa(s);return}p=s[t];n=p[0];q=p[1];p=p[2];g=v}else e=!e}z.xa(s)}}}X.prototype.getDocumentPoint=X.prototype.eb=function(a,b){void 0===b&&(b=new N);a.Be()&&z.k("getDocumentPoint Spot must be a real, specific Spot, not: "+a.toString());var c=this.Ga,d=this.ub;b.n(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY);this.qh.Cb(b);return b};
X.prototype.mk=function(a,b){var c=this.wh;if(null===c||null===this.fill&&null===this.stroke)return!1;var d=c.vb,e=this.ub/2;c.type!==mf||b||(e+=2);var g=z.lg();g.assign(d);g.bg(e+2,e+2);if(!g.Ma(a))return z.dc(g),!1;d=e+1E-4;if(c.type===mf){if(null===this.stroke)return!1;d=(c.L-c.Ha)*(a.x-c.Ha)+(c.M-c.Da)*(a.y-c.Da);if(0>(c.Ha-c.L)*(a.x-c.L)+(c.Da-c.M)*(a.y-c.M)||0>d)return!1;z.dc(g);return te(c.Ha,c.Da,c.L,c.M,e,a.x,a.y)}if(c.type===nf){var h=c.Ha,k=c.Da,l=c.L,m=c.M;g.x=Math.min(h,l);g.y=Math.min(k,
m);g.width=Math.abs(l-h);g.height=Math.abs(m-k);if(null===this.fill){g.bg(-d,-d);if(g.Ma(a))return z.dc(g),!1;g.bg(d,d)}null!==this.stroke&&g.bg(e,e);e=g.Ma(a);z.dc(g);return e}if(c.type===of){var h=c.Ha,k=c.Da,l=c.L,m=c.M,c=Math.min(h,l),n=Math.min(k,m),h=Math.abs(l-h)/2,k=Math.abs(m-k)/2,c=a.x-(c+h),n=a.y-(n+k);if(null===this.fill){h-=d;k-=d;if(0>=h||0>=k||1>=c*c/(h*h)+n*n/(k*k))return z.dc(g),!1;h+=d;k+=d}null!==this.stroke&&(h+=e,k+=e);z.dc(g);return 0>=h||0>=k?!1:1>=c*c/(h*h)+n*n/(k*k)}if(c.type===
jf)return z.dc(g),null===this.fill?Pf(c,a.x,a.y,e):c.Ma(a,e,1<this.ub,b);z.k("Unknown Geometry type: "+c.type);return!1};
X.prototype.Ip=function(a,b,c,d){var e=this.Aa,g=this.Oe;a=Math.max(a,0);b=Math.max(b,0);var h;if(null!==this.Vf)h=this.wh.vb;else{var k=this.Hb,l=je[k];if(void 0===l){var m=wo[k];"string"===typeof m&&(m=wo[m]);"function"===typeof m?(l=m(null,100,100),je[k]=l):z.k("Unsupported Figure: "+k)}h=l.vb}var k=h.width,l=h.height,m=h.width,n=h.height;switch(Mm(this,!0)){case bj:d=c=0;break;case lf:m=Math.max(a-g,0);n=Math.max(b-g,0);break;case Cm:m=Math.max(a-g,0);d=0;break;case Bm:c=0,n=Math.max(b-g,0)}isFinite(e.width)&&
(m=e.width);isFinite(e.height)&&(n=e.height);e=this.Xe;h=this.dg;c=Math.max(c,h.width)-g;d=Math.max(d,h.height)-g;m=Math.min(e.width,m);n=Math.min(e.height,n);m=isFinite(m)?Math.max(c,m):Math.max(k,c);n=isFinite(n)?Math.max(d,n):Math.max(l,d);c=cj(this);switch(c){case bj:break;case lf:k=m;l=n;break;case dj:c=Math.min(m/k,n/l);isFinite(c)||(c=1);k*=c;l*=c;break;default:z.k(c+" is not a valid geometryStretch.")}if(null!==this.Vf)k=Math.max(k,.01),l=Math.max(l,.01),h=null!==this.Vf?this.Vf:this.kb,e=
k,d=l,c=h.copy(),h=h.vb,e/=h.width,d/=h.height,isFinite(e)||(e=1),isFinite(d)||(d=1),1===e&&1===d||c.scale(e,d),u&&c.freeze(),this.kb=c;else if(null===this.kb||this.kb.qo!==a-g||this.kb.oo!==b-g)this.kb=X.makeGeometry(this,k,l);h=this.kb.vb;Infinity===a||Infinity===b?Jm(this,h.x-g/2,h.y-g/2,0===a&&0===k?0:h.width+g,0===b&&0===l?0:h.height+g):Jm(this,-(g/2),-(g/2),m+g,n+g)};
function bo(a,b,c,d){if(!1!==ml(a)){a.vd.Wa();var e=a.Oe;0===e&&d instanceof da&&d.type===Ni&&d.fc instanceof X&&(e=d.fc.ub);e*=a.bc;d instanceof G&&null!==d.kb?(b=d.kb.vb,Jm(a,b.x-e/2,b.y-e/2,b.width+e,b.height+e)):Jm(a,-(e/2),-(e/2),b+e,c+e);a.vd.freeze();a.vd.F()||z.k("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.vd.toString());Yk(a,!1)}}function cj(a){var b=a.Zz;return null!==a.Vf?b===Am?lf:b:b===Am?je[a.Hb].Xd:b}X.prototype.aj=function(a,b,c,d){Nm(this,a,b,c,d)};
X.prototype.getNearestIntersectionPoint=X.prototype.xE=function(a,b,c){return this.sp(a.x,a.y,b.x,b.y,c)};
X.prototype.sp=function(a,b,c,d,e){var g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),k=g.m22*h,l=-g.m12*h,m=-g.m21*h,n=g.m11*h,p=h*(g.m21*g.dy-g.m22*g.dx),q=h*(g.m12*g.dx-g.m11*g.dy),g=a*k+b*m+p,h=a*l+b*n+q,k=c*k+d*m+p,l=c*l+d*n+q,m=this.ub/2,p=this.kb;null===p&&(tj(this,Infinity,Infinity),p=this.kb);q=p.vb;n=!1;if(p.type===mf)if(1.5>=this.ub)n=Me(p.xc,p.Cc,p.zb,p.Gb,g,h,k,l,e);else{var r=0,s=0;p.xc===p.zb?(r=m,s=0):(b=(p.Gb-p.Cc)/(p.zb-p.xc),s=m/Math.sqrt(1+b*b),r=s*b);d=z.rb();b=new N;Me(p.xc+
r,p.Cc+s,p.zb+r,p.Gb+s,g,h,k,l,b)&&d.push(b);b=new N;Me(p.xc-r,p.Cc-s,p.zb-r,p.Gb-s,g,h,k,l,b)&&d.push(b);b=new N;Me(p.xc+r,p.Cc+s,p.xc-r,p.Cc-s,g,h,k,l,b)&&d.push(b);b=new N;Me(p.zb+r,p.Gb+s,p.zb-r,p.Gb-s,g,h,k,l,b)&&d.push(b);b=d.length;if(0===b)return z.xa(d),!1;n=!0;s=Infinity;for(r=0;r<b;r++){var k=d[r],t=(k.x-g)*(k.x-g)+(k.y-h)*(k.y-h);t<s&&(s=t,e.x=k.x,e.y=k.y)}z.xa(d)}else if(p.type===nf)b=q.x-m,n=Ne(b,q.y-m,q.x+q.width+m,q.y+q.height+m,g,h,k,l,e);else if(p.type===of)a:if(b=q.copy().bg(m,
m),0===b.width)n=Me(b.x,b.y,b.x,b.y+b.height,g,h,k,l,e);else if(0===b.height)n=Me(b.x,b.y,b.x+b.width,b.y,g,h,k,l,e);else{a=b.width/2;var v=b.height/2;d=b.x+a;b=b.y+v;c=9999;g!==k&&(c=(h-l)/(g-k));if(9999>Math.abs(c)){n=h-b-c*(g-d);if(0>a*a*c*c+v*v-n*n){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(a*a*c*c+v*v-n*n);k=(-(a*a*c*n)+a*v*m)/(v*v+a*a*c*c)+d;a=(-(a*a*c*n)-a*v*m)/(v*v+a*a*c*c)+d;l=c*(k-d)+n+b;b=c*(a-d)+n+b;d=Math.abs((g-k)*(g-k))+Math.abs((h-l)*(h-l));h=Math.abs((g-a)*(g-a))+Math.abs((h-b)*(h-
b));d<h?(e.x=k,e.y=l):(e.x=a,e.y=b)}else{k=v*v;l=g-d;k-=k/(a*a)*l*l;if(0>k){e.x=NaN;e.y=NaN;n=!1;break a}m=Math.sqrt(k);l=b+m;b-=m;d=Math.abs(l-h);h=Math.abs(b-h);d<h?(e.x=g,e.y=l):(e.x=g,e.y=b)}n=!0}else if(p.type===jf){var x=0,y=0,A=t=0,q=z.O(),r=k-g,s=l-h,s=r*r+s*s;e.x=k;e.y=l;for(r=0;r<p.cc.count;r++)for(var C=p.cc.o[r],L=C.Ab,x=C.Ha,y=C.Da,H=x,U=y,ea=0;ea<L.count;ea++){var W=L.o[ea],P=W.type,t=W.L,A=W.M,ba=!1;switch(P){case Ef:H=t;U=A;break;case qf:ba=xo(x,y,t,A,g,h,k,l,q);break;case Ff:var ba=
W.zc,P=W.Qc,Oa=W.Ch,sa=W.Dh,ba=Ke(x,y,ba,P,Oa,sa,t,A,g,h,k,l,.5,q);break;case Gf:ba=(x+2*W.zc)/3;P=(y+2*W.Qc)/3;Oa=(2*W.zc+t)/3;sa=(2*W.zc+t)/3;ba=Ke(x,y,ba,P,Oa,sa,t,A,g,h,k,l,.5,q);break;case Hf:case If:P=W.type===Hf?Jf(W,C):Kf(W,C,x,y);Oa=P.length;if(0===Oa){ba=xo(x,y,W.ra,W.za,g,h,k,l,q);break}for(A=0;A<Oa;A++)v=P[A],0===A&&xo(x,y,v[0],v[1],g,h,k,l,q)&&(t=yo(g,h,q,s,e),t<s&&(s=t,n=!0)),Ke(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],g,h,k,l,.5,q)&&(t=yo(g,h,q,s,e),t<s&&(s=t,n=!0));t=v[6];A=v[7];break;
default:z.k("Unknown Segment type: "+P)}x=t;y=A;ba&&(t=yo(g,h,q,s,e),t<s&&(s=t,n=!0));W.ix&&(t=H,A=U,xo(x,y,t,A,g,h,k,l,q)&&(t=yo(g,h,q,s,e),t<s&&(s=t,n=!0)))}g=c-a;h=d-b;b=Math.sqrt(g*g+h*h);0!==b&&(g/=b,h/=b);e.x-=g*m;e.y-=h*m;z.A(q)}else z.k("Unknown Geometry type: "+p.type);if(!n)return!1;this.transform.Cb(e);return!0};function yo(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function xo(a,b,c,d,e,g,h,k,l){var m=!1,n=(e-h)*(b-d)-(g-k)*(a-c);if(0===n)return!1;l.x=((e*k-g*h)*(a-c)-(e-h)*(a*d-b*c))/n;l.y=((e*k-g*h)*(b-d)-(g-k)*(a*d-b*c))/n;(a>c?a-c:c-a)<(b>d?b-d:d-b)?(e=b<d?b:d,a=b<d?d:b,(l.y>e||td(l.y,e))&&(l.y<a||td(l.y,a))&&(m=!0)):(e=a<c?a:c,a=a<c?c:a,(l.x>e||td(l.x,e))&&(l.x<a||td(l.x,a))&&(m=!0));return m}
X.prototype.containedInRect=X.prototype.Xm=function(a,b){if(void 0===b)return a.nk(this.W);var c=this.kb;null===c&&(tj(this,Infinity,Infinity),c=this.kb);var c=c.vb,d=this.ub/2,e=!1,g=z.O();g.n(c.x-d,c.y-d);a.Ma(b.Cb(g))&&(g.n(c.x-d,c.bottom+d),a.Ma(b.Cb(g))&&(g.n(c.right+d,c.bottom+d),a.Ma(b.Cb(g))&&(g.n(c.right+d,c.y-d),a.Ma(b.Cb(g))&&(e=!0))));z.A(g);return e};
X.prototype.intersectsRect=X.prototype.Jg=function(a,b){if(this.Xm(a,b)||void 0===b&&(b=this.transform,a.nk(this.W)))return!0;var c=z.Hh();c.set(b);c.fA();var d=a.left,e=a.right,g=a.top,h=a.bottom,k=z.O();k.n(d,g);c.Cb(k);if(this.mk(k,!0))return z.A(k),!0;k.n(e,g);c.Cb(k);if(this.mk(k,!0))return z.A(k),!0;k.n(d,h);c.Cb(k);if(this.mk(k,!0))return z.A(k),!0;k.n(e,h);c.Cb(k);if(this.mk(k,!0))return z.A(k),!0;var l=z.O(),m=z.O();c.set(b);c.vA(this.transform);c.fA();l.x=e;l.y=g;l.transform(c);k.x=d;k.y=
g;k.transform(c);var n=!1;zo(this,k,l,m)?n=!0:(k.x=e,k.y=h,k.transform(c),zo(this,k,l,m)?n=!0:(l.x=d,l.y=h,l.transform(c),zo(this,k,l,m)?n=!0:(k.x=d,k.y=g,k.transform(c),zo(this,k,l,m)&&(n=!0))));z.A(k);z.jf(c);z.A(l);z.A(m);return n};function zo(a,b,c,d){if(!a.xE(b,c,d))return!1;a=b.x;b=b.y;var e=c.x;c=c.y;var g=d.x;d=d.y;if(a===e){var h=0;a=0;b<c?(h=b,a=c):(h=c,a=b);return d>=h&&d<=a}a<e?(h=a,a=e):h=e;return g>=h&&g<=a}
X.prototype.rE=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d+=2)if(b.jp(a[d],a[d+1])>e)return!0;return!1}if(c&&null!==this.fill&&this.mk(a,!0))return!0;var e=a.Af(b);b=e;1.5<this.ub&&(e=this.ub/2+Math.sqrt(e),e*=e);var g=this.kb;if(null===g&&(tj(this,Infinity,Infinity),g=this.kb,null===g))return!1;if(!c){var h=g.vb,k=h.x,l=h.y,m=h.x+h.width,h=h.y+h.height;if(vb(a.x,a.y,k,l)<=e&&vb(a.x,a.y,m,l)<=e&&vb(a.x,a.y,k,h)<=e&&vb(a.x,a.y,m,h)<=e)return!0}k=g.xc;l=g.Cc;m=g.zb;h=g.Gb;if(g.type===
mf){if(c=ub(a.x,a.y,k,l,m,h),g=(k-m)*(a.x-m)+(l-h)*(a.y-h),c<=(0<=(m-k)*(a.x-k)+(h-l)*(a.y-l)&&0<=g?e:b))return!0}else{if(g.type===nf)return b=!1,c&&(b=ub(a.x,a.y,k,l,k,h)<=e||ub(a.x,a.y,k,l,m,l)<=e||ub(a.x,a.y,m,l,m,h)<=e||ub(a.x,a.y,k,h,m,h)<=e),b;if(g.type===of){b=a.x-(k+m)/2;var g=a.y-(l+h)/2,n=Math.abs(m-k)/2,p=Math.abs(h-l)/2;if(0===n||0===p)return c=ub(a.x,a.y,k,l,m,h),c<=e?!0:!1;if(c){if(a=gf(n,p,b,g),a*a<=e)return!0}else return vb(b,g,-n,0)>=e||vb(b,g,0,-p)>=e||vb(b,g,0,p)>=e||vb(b,g,n,0)>=
e?!1:!0}else if(g.type===jf){h=g.vb;k=h.x;l=h.y;m=h.x+h.width;h=h.y+h.height;if(a.x>m&&a.x<k&&a.y>h&&a.y<l&&ub(a.x,a.y,k,l,k,h)>e&&ub(a.x,a.y,k,l,m,l)>e&&ub(a.x,a.y,m,h,k,h)>e&&ub(a.x,a.y,m,h,m,l)>e)return!1;b=Math.sqrt(e);if(c){if(null===this.fill?Pf(g,a.x,a.y,b):g.Ma(a,b,!0))return!0}else{c=g.cc;for(b=0;b<c.count;b++){k=c.o[b];n=k.Ha;p=k.Da;if(a.jp(n,p)>e)return!1;l=k.Ab.o;m=l.length;for(h=0;h<m;h++){var q=l[h];switch(q.type){case Ef:case qf:n=q.L;p=q.M;if(a.jp(n,p)>e)return!1;break;case Ff:g=z.rb();
we(n,p,q.zc,q.Qc,q.Ch,q.Dh,q.L,q.M,.8,g);n=d(g,a);z.xa(g);if(n)return!1;n=q.L;p=q.M;if(a.jp(n,p)>e)return!1;break;case Gf:g=z.rb();Je(n,p,q.zc,q.Qc,q.L,q.M,.8,g);n=d(g,a);z.xa(g);if(n)return!1;n=q.L;p=q.M;if(a.jp(n,p)>e)return!1;break;case Hf:case If:var r=q.type===Hf?Jf(q,k):Kf(q,k,n,p),s=r.length;if(0===s){n=q.ra;p=q.za;if(a.jp(n,p)>e)return!1;break}q=null;g=z.rb();for(b=0;b<s;b++)if(q=r[b],g.length=0,we(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.8,g),d(g,a))return z.xa(g),!1;z.xa(g);null!==q&&(n=
q[6],p=q[7]);break;default:z.k("Unknown Segment type: "+q.type)}}}return!0}}}return!1};z.defineProperty(X,{wh:"geometry"},function(){return null!==this.kb?this.kb:this.Vf},function(a){var b=this.kb;if(b!==a){null!==a?(u&&z.l(a,hf,X,"geometry"),this.Vf=this.kb=a.freeze()):this.Vf=this.kb=null;var c=this.ca;null!==c&&(c.Rj=NaN);this.Q();this.j("geometry",b,a);0!==(this.ja&1024)&&(a=this.ca,null!==a&&Im(this,a,"geometryString"))}});
z.defineProperty(X,{KH:"geometryString"},function(){return null===this.wh?"":this.wh.toString()},function(a){a=sf(a);var b=a.normalize();this.wh=a;this.position=a=z.Tb(-b.x,-b.y);z.A(a)});z.defineProperty(X,{LE:"isGeometryPositioned"},function(){return this.ir},function(a){u&&z.g(a,"boolean",X,"isGeometryPositioned");var b=this.ir;b!==a&&(this.ir=a,this.Q(),this.j("isGeometryPositioned",b,a))});X.prototype.qe=function(){this.kb=null};
z.defineProperty(X,{fill:"fill"},function(){return this.Bd},function(a){var b=this.Bd;b!==a&&(u&&null!==a&&z.ot(a,"Shape.fill"),a instanceof Da&&a.freeze(),this.Bd=a,this.ta(),this.j("fill",b,a))});z.defineProperty(X,{stroke:"stroke"},function(){return this.Kc},function(a){var b=this.Kc;b!==a&&(u&&null!==a&&z.ot(a,"Shape.stroke"),a instanceof Da&&a.freeze(),this.Kc=a,this.ta(),this.j("stroke",b,a))});
z.defineProperty(X,{ub:"strokeWidth"},function(){return this.Oe},function(a){var b=this.Oe;if(b!==a)if(u&&z.p(a,X,"strokeWidth"),0<=a){this.Oe=a;this.Q();var c=this.ca;null!==c&&(c.Rj=NaN);this.j("strokeWidth",b,a)}else z.ka(a,"value >= 0",X,"strokeWidth:value")});
z.defineProperty(X,{wL:"strokeCap"},function(){return this.Ro},function(a){var b=this.Ro;b!==a&&("string"!==typeof a||"butt"!==a&&"round"!==a&&"square"!==a?z.ka(a,'"butt", "round", or "square"',X,"strokeCap"):(this.Ro=a,this.ta(),this.j("strokeCap",b,a)))});
z.defineProperty(X,{yL:"strokeJoin"},function(){return this.To},function(a){var b=this.To;b!==a&&("string"!==typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?z.ka(a,'"miter", "bevel", or "round"',X,"strokeJoin"):(this.To=a,this.ta(),this.j("strokeJoin",b,a)))});
z.defineProperty(X,{zL:"strokeMiterLimit"},function(){return this.Jm},function(a){var b=this.Jm;if(b!==a)if(u&&z.p(a,X,"strokeMiterLimit"),1<=a){this.Jm=a;this.ta();var c=this.ca;null!==c&&(c.Rj=NaN);this.j("strokeMiterLimit",b,a)}else z.ka(a,"value >= 1",X,"strokeWidth:value")});
z.defineProperty(X,{PF:"strokeDashArray"},function(){return this.So},function(a){var b=this.So;if(b!==a){null===a||Array.isArray(a)||z.ic(a,"Array",X,"strokeDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var g=a[e];"number"===typeof g&&0<=g&&isFinite(g)||z.k("strokeDashArray:value "+g+" at index "+e+" must be a positive number or zero.");d+=g}if(0===d){if(null===b)return;a=null}}this.So=a;this.ta();this.j("strokeDashArray",b,a)}});
z.defineProperty(X,{xL:"strokeDashOffset"},function(){return this.we},function(a){var b=this.we;b!==a&&(u&&z.p(a,X,"strokeDashOffset"),0<=a&&(this.we=a,this.ta(),this.j("strokeDashOffset",b,a)))});
z.defineProperty(X,{Hb:"figure"},function(){return this.eo},function(a){var b=this.eo;if(b!==a){u&&z.g(a,"string",X,"figure");var c=wo[a];"function"===typeof c?c=a:(c=wo[a.toLowerCase()])||z.k("Unknown Shape.figure: "+a);b!==c&&(a=this.ca,null!==a&&(a.Rj=NaN),this.eo=c,this.Vf=null,this.qe(),this.Q(),this.j("figure",b,c))}});
z.defineProperty(X,{fq:"toArrow"},function(){return this.Xo},function(a){var b=this.Xo;!0===a?a="Standard":!1===a&&(a="");if(b!==a){u&&z.g(a,"string",X,"toArrow");var c=Ao(a);null===c?z.k("Unknown Shape.toArrow: "+a):b!==c&&(this.Xo=c,this.Vf=null,this.qe(),this.Q(),Bo(this),this.j("toArrow",b,c))}});
z.defineProperty(X,{Xz:"fromArrow"},function(){return this.jo},function(a){var b=this.jo;!0===a?a="Standard":!1===a&&(a="");if(b!==a){u&&z.g(a,"string",X,"fromArrow");var c=Ao(a);null===c?z.k("Unknown Shape.fromArrow: "+a):b!==c&&(this.jo=c,this.Vf=null,this.qe(),this.Q(),Bo(this),this.j("fromArrow",b,c))}});function Bo(a){var b=a.h;null!==b&&b.pa.qb||(a.pu=Co,"None"!==a.Xo?(a.De=-1,a.kk=ad):"None"!==a.jo&&(a.De=0,a.kk=new Q(1-ad.x,ad.y)))}
z.defineProperty(X,{C:"spot1"},function(){return this.ci},function(a){z.l(a,Q,X,"spot1");var b=this.ci;b.N(a)||(this.ci=a=a.V(),this.Q(),this.j("spot1",b,a))});z.defineProperty(X,{D:"spot2"},function(){return this.di},function(a){z.l(a,Q,X,"spot2");var b=this.di;b.N(a)||(this.di=a=a.V(),this.Q(),this.j("spot2",b,a))});z.defineProperty(X,{Ic:"parameter1"},function(){return this.bs},function(a){var b=this.bs;b!==a&&(this.bs=a,this.qe(),this.Q(),this.j("parameter1",b,a))});
z.defineProperty(X,{gu:"parameter2"},function(){return this.cs},function(a){var b=this.cs;b!==a&&(this.cs=a,this.qe(),this.Q(),this.j("parameter2",b,a))});z.w(X,{Ga:"naturalBounds"},function(){if(null!==this.kb)return this.Wc.assign(this.kb.vb),this.Wc;var a=this.Aa;return new w(0,0,a.width,a.height)});z.defineProperty(X,{zx:"pathPattern"},function(){return this.es},function(a){var b=this.es;b!==a&&(u&&z.l(a,O,X,"pathPattern"),this.es=a,this.ta(),this.j("pathPattern",b,a))});
z.defineProperty(X,{mL:"pathObject"},function(){return this.zx},function(a){this.zx=a});z.defineProperty(X,{Zz:"geometryStretch"},function(){return this.br},function(a){var b=this.br;b!==a&&(z.Ba(a,O,X,"geometryStretch"),this.br=a,this.j("geometryStretch",b,a))});z.defineProperty(X,{interval:"interval"},function(){return this.fr},function(a){var b=this.fr;u&&z.p(a,X,"interval");a=Math.floor(a);if(b!==a&&0<=a){this.fr=a;var c=this.h;null!==c&&this.T===c.tp&&$k(c);this.Q();this.j("interval",b,a)}});
X.makeGeometry=function(a,b,c){var d=null;if("None"!==a.fq)d=ke[a.fq];else if("None"!==a.Xz)d=ke[a.Xz];else{var e=wo[a.Hb];"string"===typeof e&&(e=wo[e]);void 0===e&&z.k("Unknown Shape.figure: "+a.Hb);d=e(a,b,c);d.qo=b;d.oo=c}null===d&&(e=wo.Rectangle,"function"===typeof e&&(d=e(a,b,c)));return d};X.getFigureGenerators=function(){var a=new na("string","function"),b;for(b in wo)if(b!==b.toLowerCase()){var c=wo[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};
X.defineFigureGenerator=function(a,b){z.g(a,"string",X,"defineFigureGenerator:name");"string"===typeof b?""!==b&&wo[b]||z.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+b):z.g(b,"function",X,"defineFigureGenerator:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||z.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);wo[a]=b;wo[c]=a};
X.getArrowheadGeometries=function(){var a=new na("string",hf),b;for(b in ke)if(b!==b.toLowerCase()){var c=ke[b];c instanceof hf&&a.add(b,c)}a.freeze();return a};
X.defineArrowheadGeometry=function(a,b){z.g(a,"string",X,"defineArrowheadGeometry:name");var c=null;"string"===typeof b?(z.g(b,"string",X,"defineArrowheadGeometry:pathstr"),c=sf(b,!1)):(z.l(b,hf,X,"defineArrowheadGeometry:pathstr"),c=b);var d=a.toLowerCase();""!==a&&"none"!==d&&a!==d||z.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a);ke[a]=c;ke[d]=a};
function qa(){O.call(this);this.xe="";this.Kc="black";this.Ph="13px sans-serif";this.Lm="start";this.kr=!0;this.km=this.lm=!1;this.ml=Do;this.Pm=Eo;this.Kv=this.Le=0;this.io=this.az=this.bz=null;this.Oj=new Fo;this.Wq=!1;this.uf=this.ol=this.Us=null;this.bk=this.ak=0;this.Mi=Infinity;this.Fv=0}z.Ra(qa,O);z.ia("TextBlock",qa);var Go=new ma,Ho=0,Io=new ma,Jo=0,Ko="...",Lo="",Mo=(new la(null)).zl;qa.getEllipsis=function(){return Ko};qa.setEllipsis=function(a){Ko=a;Io=new ma;Jo=0};
qa.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.xe=this.xe;a.Kc=this.Kc;a.Ph=this.Ph;a.Lm=this.Lm;a.kr=this.kr;a.lm=this.lm;a.km=this.km;a.ml=this.ml;a.Pm=this.Pm;a.Le=this.Le;a.Kv=this.Kv;a.bz=this.bz;a.az=this.az;a.io=this.io;a.Oj.tt(this.Oj);a.Wq=this.Wq;a.Us=this.Us;a.ol=this.ol;a.uf=this.uf;a.ak=this.ak;a.bk=this.bk;a.Mi=this.Mi;a.Fv=this.Fv};
qa.prototype.toString=function(){return 22<this.xe.length?'TextBlock("'+this.xe.substring(0,20)+'"...)':'TextBlock("'+this.xe+'")'};var No;qa.None=No=z.s(qa,"None",0);var Oo;qa.WrapFit=Oo=z.s(qa,"WrapFit",1);var Eo;qa.WrapDesiredSize=Eo=z.s(qa,"WrapDesiredSize",2);var Do;qa.OverflowClip=Do=z.s(qa,"OverflowClip",0);var Po;qa.OverflowEllipsis=Po=z.s(qa,"OverflowEllipsis",1);qa.prototype.Q=function(){O.prototype.Q.call(this);this.az=this.bz=null};
z.defineProperty(qa,{font:"font"},function(){return this.Ph},function(a){var b=this.Ph;b!==a&&(u&&(z.g(a,"string",qa,"font"),Qo(a)||z.k('Not a valid font: "'+a+'"')),this.Ph=a,this.io=null,this.Q(),this.j("font",b,a))});var Qo;qa.isValidFont=Qo=function(a){var b=Mo.font;if(a===b||"10px sans-serif"===a)return!0;Mo.font="10px sans-serif";var c;Mo.font=a;var d=Mo.font;if("10px sans-serif"!==d)return Mo.font=b,!0;Mo.font="19px serif";c=Mo.font;Mo.font=a;d=Mo.font;Mo.font=b;return d!==c};
z.defineProperty(qa,{text:"text"},function(){return this.xe},function(a){var b=this.xe;a=null!==a&&void 0!==a?a.toString():"";b!==a&&(this.xe=a,this.Q(),this.j("text",b,a))});z.defineProperty(qa,{textAlign:"textAlign"},function(){return this.Lm},function(a){var b=this.Lm;b!==a&&(u&&z.g(a,"string",qa,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.Lm=a,this.ta(),this.j("textAlign",b,a)):z.ka(a,'"start", "end", "left", "right", or "center"',qa,"textAlign"))});
z.w(qa,{Ga:"naturalBounds"},function(){if(!this.Wc.F()){var a=Ro(this,this.xe,this.Oj,999999).width,b=So(this,a,this.Oj),c=this.Aa;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);yb(this.Wc,a,b)}return this.Wc});z.defineProperty(qa,{nx:"isMultiline"},function(){return this.kr},function(a){var b=this.kr;b!==a&&(u&&z.g(a,"boolean",qa,"isMultiline"),this.kr=a,this.Q(),this.j("isMultiline",b,a))});
z.defineProperty(qa,{JK:"isUnderline"},function(){return this.lm},function(a){var b=this.lm;b!==a&&(u&&z.g(a,"boolean",qa,"isUnderline"),this.lm=a,this.ta(),this.j("isUnderline",b,a))});z.defineProperty(qa,{IK:"isStrikethrough"},function(){return this.km},function(a){var b=this.km;b!==a&&(u&&z.g(a,"boolean",qa,"isStrikethrough"),this.km=a,this.ta(),this.j("isStrikethrough",b,a))});
z.defineProperty(qa,{hG:"wrap"},function(){return this.Pm},function(a){var b=this.Pm;b!==a&&(u&&z.Ba(a,qa,qa,"wrap"),this.Pm=a,this.Q(),this.j("wrap",b,a))});z.defineProperty(qa,{overflow:"overflow"},function(){return this.ml},function(a){var b=this.ml;b!==a&&(u&&z.Ba(a,qa,qa,"overflow"),this.ml=a,this.Q(),this.j("overflow",b,a))});
z.defineProperty(qa,{stroke:"stroke"},function(){return this.Kc},function(a){var b=this.Kc;b!==a&&(u&&null!==a&&z.ot(a,"TextBlock.stroke"),a instanceof Da&&a.freeze(),this.Kc=a,this.ta(),this.j("stroke",b,a))});z.w(qa,{rI:"lineCount"},function(){return this.Le});z.defineProperty(qa,{Tz:"editable"},function(){return this.Wq},function(a){var b=this.Wq;b!==a&&(u&&z.g(a,"boolean",qa,"editable"),this.Wq=a,this.j("editable",b,a))});
z.defineProperty(qa,{RF:"textEditor"},function(){return this.Us},function(a){var b=this.Us;b!==a&&(a instanceof HTMLElement||z.k("textEditor must be an HTMLElement, not: "+a),this.Us=a,this.j("textEditor",b,a))});z.defineProperty(qa,{Vz:"errorFunction"},function(){return this.uf},function(a){var b=this.uf;b!==a&&(null!==a&&z.g(a,"function",qa,"errorFunction"),this.uf=a,this.j("errorFunction",b,a))});
qa.prototype.ok=function(a,b){if(null!==this.Kc&&0!==this.xe.length&&null!==this.Ph){var c=this.Ga.width,d=To(this);a.textAlign=this.Lm;Um(this,a,this.Kc,!0,!1);(this.lm||this.km)&&Um(this,a,this.Kc,!1,!1);var e=this.Oj,g=0,h=!1,k=z.Tb(0,0);this.qh.Cb(k);var l=z.Tb(0,d);this.qh.Cb(l);var m=k.Af(l);z.A(k);z.A(l);k=b.scale;8>m*k*k&&(h=!0);b.gd!==a&&(h=!1);!1===b.ij("textGreeking")&&(h=!1);for(var m=b.mr,k=this.ak,l=this.bk,n=this.Le,p=0;p<n;p++){var q=e.sf[p],r=e.Je[p];q>c&&(q=c);var g=g+k,s=r,r=a,
t=g,v=c,x=d,y=0,A=this.Lm;"start"===A&&(A=m?"right":"left");"end"===A&&(A=m?"left":"right");h?("left"===A?y=0:"right"===A?y=v-q:"center"===A&&(y=(v-q)/2),r.fillRect(0+y,t+.25*x,q,1)):("left"===A?y=0:"right"===A?y=v:"center"===A&&(y=v/2),r.fillText(s,0+y,t+x-.25*x),s=x/20|0,0===s&&(s=1),"right"===A?y-=q:"center"===A&&(y-=q/2),this.lm&&(r.beginPath(),r.lineWidth=s,r.moveTo(0+y,t+x-.2*x),r.lineTo(0+y+q,t+x-.2*x),r.stroke()),this.km&&(r.beginPath(),r.lineWidth=s,t=t+x-x/2.2|0,0!==s%2&&(t+=.5),r.moveTo(0+
y,t),r.lineTo(0+y+q,t),r.stroke()));g+=d+l}}};
qa.prototype.Ip=function(a,b,c,d){this.Fv=a;var e=this.Oj;e.reset();var g=0,h=0;if(isNaN(this.Aa.width)){g=this.xe.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===g.length)g=0;else if(this.nx){for(var k=h=0,l=!1;!l;){var m=g.indexOf("\n",k);-1===m&&(m=g.length,l=!0);k=Uo(g.substr(k,m-k).replace(/^\s+|\s+$/g,""),this.Ph);k>h&&(h=k);k=m+1}g=h}else h=g.indexOf("\n",0),0<=h&&(g=g.substr(0,h)),g=k=Uo(g,this.Ph);g=Math.min(g,a/this.scale);g=Math.max(8,g)}else g=this.Aa.width;null!==this.T&&(g=Math.min(g,
this.T.Xe.width),g=Math.max(g,this.T.dg.width));h=So(this,g,e);m=h=isNaN(this.Aa.height)?Math.min(h,b/this.scale):this.Aa.height;if(0!==e.cf&&1!==e.Je.length&&this.ml===Po&&(b=this.Ph,l=this.ml===Po?Vo(b):0,k=this.ak+this.bk,k=Math.max(0,To(this)+k),m=Math.min(this.zI-1,Math.max(Math.floor(m/k+.01)-1,0)),!(m+1>=e.Je.length))){k=e.Je[m];for(a=Math.max(1,a-l);Uo(k,b)>a&&1<k.length;)k=k.substr(0,k.length-1);k+=Ko;a=Uo(k,b);e.Je[m]=k;e.Je=e.Je.slice(0,m+1);e.sf[m]=a;e.sf=e.sf.slice(0,m+1);e.$i=e.Je.length;
e.cf=Math.max(e.cf,a);this.Le=e.$i}if(this.hG===Oo||isNaN(this.Aa.width))g=e.cf,isNaN(this.Aa.width)&&(g=Math.max(8,g));g=Math.max(c,g);h=Math.max(d,h);yb(this.Wc,g,h);Jm(this,0,0,g,h)};qa.prototype.aj=function(a,b,c,d){Nm(this,a,b,c,d)};
function Ro(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");var e=0,g=0,h=0,k=a.Ph,g=a.ak+a.bk,l=Math.max(0,To(a)+g),h=a.ml===Po?Vo(k):0;if(a.Le>=a.Mi)return new Ea(0,l);if(a.Pm===No){c.$i=1;g=Uo(b,k);if(0===h||g<=d)return c.cf=g,c.sf.push(c.cf),c.Je.push(b),new Ea(g,l);var m=Wo(b);b=b.substr(m.length);for(var n=Wo(b),g=Uo(m+n,k);0<n.length&&g<=d;)m+=n,b=b.substr(n.length),n=Wo(b),g=Uo((m+n).replace(/^\s+|\s+$/g,""),k);m+=n.replace(/^\s+|\s+$/g,"");for(d=Math.max(1,d-h);Uo(m,k)>d&&1<m.length;)m=m.substr(0,
m.length-1);m+=Ko;h=Uo(m,k);c.sf.push(h);c.cf=h;c.Je.push(m);return new Ea(h,l)}var p=0;0===b.length&&(p=1,c.sf.push(0),c.Je.push(b));for(;0<b.length;){m=Wo(b);for(b=b.substr(m.length);Uo(m,k)>d;){n=1;g=Uo(m.substr(0,n),k);for(h=0;g<=d;)n++,h=g,g=Uo(m.substr(0,n),k);1===n?(c.sf[a.Le+p]=g,e=Math.max(e,g)):(c.sf[a.Le+p]=h,e=Math.max(e,h));n--;1>n&&(n=1);c.Je[a.Le+p]=m.substr(0,n);p++;m=m.substr(n);if(a.Le+p>a.Mi)break}n=Wo(b);for(g=Uo(m+n,k);0<n.length&&g<=d;)m+=n,b=b.substr(n.length),n=Wo(b),g=Uo((m+
n).replace(/^\s+|\s+$/g,""),k);m=m.replace(/^\s+|\s+$/g,"");if(""!==m&&(0===n.length?(c.sf.push(g),e=Math.max(e,g)):(h=Uo(m,k),c.sf.push(h),e=Math.max(e,h)),c.Je.push(m),p++,a.Le+p>a.Mi))break}c.$i=Math.min(a.Mi,p);c.cf=Math.max(c.cf,e);return new Ea(c.cf,l*c.$i)}function Wo(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function Uo(a,b){Lo!==b&&(Lo=Mo.font=b);return Mo.measureText(a).width}
function To(a){if(null!==a.io)return a.io;var b=a.Ph;Lo!==b&&(Lo=Mo.font=b);var c=0;void 0!==Go[b]&&5E3>Ho?c=Go[b]:(c=1.3*Mo.measureText("M").width,Go[b]=c,Ho++);return a.io=c}function Vo(a){Lo!==a&&(Lo=Mo.font=a);var b=0;void 0!==Io[a]&&5E3>Jo?b=Io[a]:(b=Mo.measureText(Ko).width,Io[a]=b,Jo++);return b}
function So(a,b,c){var d=a.xe.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e=a.ak+a.bk,e=Math.max(0,To(a)+e);if(0===d.length)return c.cf=0,a.Le=1,e;if(!a.nx){var g=d.indexOf("\n",0);0<=g&&(d=d.substr(0,g))}for(var g=0,h=a.Le=0,k=-1,l=!1;!l;)k=d.indexOf("\n",h),-1===k&&(k=d.length,l=!0),h<=k&&(h=d.substr(h,k-h),a.Pm!==No?(c.$i=0,h=Ro(a,h,c,b),g+=h.height,a.Le+=c.$i):(Ro(a,h,c,b),g+=e,a.Le++),a.Le===a.Mi&&(l=!0)),h=k+1;return a.Kv=g}
z.defineProperty(qa,{YA:"textValidation"},function(){return this.ol},function(a){var b=this.ol;b!==a&&(null!==a&&z.g(a,"function",qa,"textValidation"),this.ol=a,this.j("textValidation",b,a))});z.defineProperty(qa,{tL:"spacingAbove"},function(){return this.ak},function(a){var b=this.ak;b!==a&&(u&&z.g(a,"number",qa,"spacingAbove"),this.ak=a,this.j("spacingAbove",b,a))});
z.defineProperty(qa,{uL:"spacingBelow"},function(){return this.bk},function(a){var b=this.bk;b!==a&&(u&&z.g(a,"number",qa,"spacingBelow"),this.bk=a,this.j("spacingBelow",b,a))});z.defineProperty(qa,{zI:"maxLines"},function(){return this.Mi},function(a){var b=this.Mi;b!==a&&(u&&z.g(a,"number",qa,"maxLines"),a=Math.floor(a),0>=a&&z.ka(a,"> 0",qa,"maxLines"),this.Mi=a,this.j("maxLines",b,a),this.Q())});z.w(qa,{UK:"metrics"},function(){return this.Oj});
function Fo(){this.cf=this.$i=0;this.sf=[];this.Je=[]}Fo.prototype.reset=function(){this.cf=this.$i=0;this.sf=[];this.Je=[]};Fo.prototype.tt=function(a){this.$i=a.$i;this.cf=a.cf;this.sf=z.Al(a.sf);this.Je=z.Al(a.Je)};z.w(Fo,{bK:"arrSize"},function(){return this.sf});z.w(Fo,{cK:"arrText"},function(){return this.Je});z.w(Fo,{TK:"maxLineWidth"},function(){return this.cf});
function wk(){O.call(this);this.$e=null;this.Ns="";this.$j=ge;this.lo=lf;this.Uo=this.ck=this.uf=null;this.Ty=!1;this.fo=!0;this.Lo=null}z.Ra(wk,O);z.ia("Picture",wk);wk.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.element=this.$e;a.Ns=this.Ns;a.$j=this.$j.V();a.lo=this.lo;a.uf=this.uf;a.ck=this.ck;a.fo=this.fo;a.Lo=this.Lo};var Xo=new ma,Yo=0,qk=[];
function Zo(){var a=qk;if(0===a.length)for(var b=window.document.getElementsByTagName("canvas"),c=b.length,d=0;d<c;d++){var e=b[d];e.parentElement&&e.parentElement.Z&&a.push(e.parentElement.Z)}return a}var $o;wk.clearCache=$o=function(a){void 0===a&&(a="");z.g(a,"string",wk,"clearCache:url");""!==a?Xo[a]&&(delete Xo[a],Yo--):(Xo=new ma,Yo=0)};wk.prototype.toString=function(){return"Picture("+this.source+")#"+z.nd(this)};
z.defineProperty(wk,{element:"element"},function(){return this.$e},function(a){var b=this.$e;if(b!==a){null===a||a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||z.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+a);this.Ty=a instanceof HTMLCanvasElement;this.$e=a;if(null!==a)if(!0===a.complete||void 0===a.complete)a.sv instanceof Event&&null!==this.uf&&this.uf(this,a.sv),!0===a.Vy&&null!==this.ck&&this.ck(this,null),a.Vy=!0,this.Aa.F()||
(Yk(this,!1),this.Q());else{var c=this;a.gC||(a.addEventListener("load",function(b){ap(a,b);c.Aa.F()||(Yk(c,!1),c.Q())}),a.addEventListener("error",function(b){bp(a,b)}),a.gC=!0)}this.j("element",b,a);this.ta()}});
z.defineProperty(wk,{source:"source"},function(){return this.Ns},function(a){var b=this.Ns;if(b!==a){z.g(a,"string",wk,"source");this.Ns=a;var c=Xo,d=this.h;if(void 0!==c[a])var e=c[a].ap[0].source;else{30<Yo&&($o(),c=Xo);var e=z.createElement("img"),g=this;e.addEventListener("load",function(a){ap(e,a);g.Aa.F()||(Yk(g,!1),g.Q())});e.addEventListener("error",function(a){bp(e,a)});e.gC=!0;var h=this.Lo;null!==h&&(e.crossOrigin=h(this));e.src=a;c[a]=new cp(e);Yo++}null!==d&&Ul(d,this);this.element=e;
null!==d&&Tl(d,this);this.Q();this.ta();this.j("source",b,a)}});function ap(a,b){a.Vy=!0;a.sv=!1;for(var c=null,d=Zo(),e=d.length,g=0;g<e;g++){var h=d[g],k=h.Fo.na(a.src);if(null!==k)for(e=k.length,g=0;g<e;g++)c=k[g],h.SC.add(c),h.Ce(),null!==c.ck&&c.ck(c,b)}}function bp(a,b){a.sv=b;for(var c=null,d=Zo(),e=d.length,g=0;g<e;g++)if(c=d[g].Fo.na(a.src),null!==c){for(var e=c.length,h=z.rb(),g=0;g<e;g++)h.push(c[g]);for(g=0;g<e;g++)c=h[g],null!==c.uf&&c.uf(c,b);z.xa(h)}}
z.defineProperty(wk,{sL:"sourceCrossOrigin"},function(){return this.Lo},function(a){if(this.Lo!==a&&(null!==a&&z.g(a,"function",wk,"sourceCrossOrigin"),this.Lo=a,null!==this.element)){var b=this.element.src;null===a&&"string"===typeof b?this.element.crossOrigin=null:null!==a&&(this.element.crossOrigin=a(this));this.element.src=b}});
z.defineProperty(wk,{tj:"sourceRect"},function(){return this.$j},function(a){var b=this.$j;b.N(a)||(z.l(a,w,wk,"sourceRect"),this.$j=a=a.V(),this.ta(),this.j("sourceRect",b,a))});z.defineProperty(wk,{WH:"imageStretch"},function(){return this.lo},function(a){var b=this.lo;b!==a&&(z.Ba(a,O,wk,"imageStretch"),this.lo=a,this.ta(),this.j("imageStretch",b,a))});
z.defineProperty(wk,{Vz:"errorFunction"},function(){return this.uf},function(a){var b=this.uf;b!==a&&(null!==a&&z.g(a,"function",wk,"errorFunction"),this.uf=a,this.j("errorFunction",b,a))});z.defineProperty(wk,{CL:"successFunction"},function(){return this.ck},function(a){var b=this.ck;b!==a&&(null!==a&&z.g(a,"function",wk,"successFunction"),this.ck=a,this.j("successFunction",b,a))});
wk.prototype.ok=function(a,b){var c=this.$e;if(null!==c){var d=c.src;null!==d&&""!==d||z.k('Element has no source ("src") attribute: '+c);if(!(c.sv instanceof Event)&&!0===c.Vy){var d=this.Ga,e=0,g=0,h=this.Ty,k=h?+c.width:c.naturalWidth,h=h?+c.height:c.naturalHeight;void 0===k&&c.videoWidth&&(k=c.videoWidth);void 0===h&&c.videoHeight&&(h=c.videoHeight);k=k||d.width;h=h||d.height;if(0!==k&&0!==h){var l=k,m=h;this.tj.F()&&(e=this.$j.x,g=this.$j.y,k=this.$j.width,h=this.$j.height);var n=k,p=h,q=this.lo;
switch(q){case bj:if(this.tj.F())break;e+=Math.max((n-d.width)/2,0);g+=Math.max((p-d.height)/2,0);k=Math.min(d.width,n);h=Math.min(d.height,p);break;case lf:n=d.width;p=d.height;break;case dj:case ej:var r=0;q===dj?(r=Math.min(d.height/p,d.width/n),n*=r,p*=r):q===ej&&(r=Math.max(d.height/p,d.width/n),n*=r,p*=r,e+=(n-d.width)/2/n*k,g+=(p-d.height)/2/p*h,k*=1/(n/d.width),h*=1/(p/d.height),n=d.width,p=d.height)}var q=this.hj()*b.scale,s=k*h/(n*q*p*q),r=Xo[this.source],q=null;if(void 0!==r&&16<s){2>r.ap.length&&
(dp(r,4,l,m),dp(r,16,l,m));for(var l=r.ap,m=l.length,q=l[0],t=0;t<m;t++)if(l[t].Rp*l[t].Rp<s)q=l[t];else break}if(!b.ao){if(null===this.Uo)if(null===this.$e)this.Uo=!1;else{l=(new la(null)).zl;l.drawImage(this.$e,0,0);try{l.getImageData(0,0,1,1).data[3]&&(this.Uo=!1),this.Uo=!1}catch(v){this.Uo=!0}}if(this.Uo)return}if(b.ij("pictureRatioOptimization")&&!b.Uy&&void 0!==r&&null!==q&&1!==q.Rp){a.save();r=q.Rp;try{a.drawImage(q.source,e/r,g/r,Math.min(q.source.width,k/r),Math.min(q.source.height,h/r),
Math.max((d.width-n)/2,0),Math.max((d.height-p)/2,0),Math.min(d.width,n),Math.min(d.height,p))}catch(x){u&&this.fo&&z.trace(x.toString()),this.fo=!1}a.restore()}else try{a.drawImage(c,e,g,k,h,Math.max((d.width-n)/2,0),Math.max((d.height-p)/2,0),Math.min(d.width,n),Math.min(d.height,p))}catch(y){u&&this.fo&&z.trace(y.toString()),this.fo=!1}}}}};z.w(wk,{Ga:"naturalBounds"},function(){return this.Wc});
wk.prototype.Ip=function(a,b,c,d){var e=this.Aa,g=Mm(this,!0),h=this.$e,k=this.Ty;if(k||!this.$y&&h&&h.complete)this.$y=!0;null===h&&(isFinite(a)||(a=0),isFinite(b)||(b=0));isFinite(e.width)||g===lf||g===Cm?(isFinite(a)||(a=this.tj.F()?this.tj.width:k?+h.width:h.naturalWidth),c=0):null!==h&&!1!==this.$y&&(a=this.tj.F()?this.tj.width:k?+h.width:h.naturalWidth);isFinite(e.height)||g===lf||g===Bm?(isFinite(b)||(b=this.tj.F()?this.tj.height:k?+h.height:h.naturalHeight),d=0):null!==h&&!1!==this.$y&&(b=
this.tj.F()?this.tj.height:k?+h.height:h.naturalHeight);isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);e=this.Xe;g=this.dg;c=Math.max(c,g.width);d=Math.max(d,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);null===h||h.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0));yb(this.Wc,a,b);Jm(this,0,0,a,b)};wk.prototype.aj=function(a,b,c,d){Nm(this,a,b,c,d)};function cp(a){this.ap=[new ep(a,1)]}
function dp(a,b,c,d){var e=new la(null),g=e.zl,h=1/b;e.width=c/b;e.height=d/b;b=new ep(e.Ld,b);c=a.ap[a.ap.length-1];g.setTransform(h*c.Rp,0,0,h*c.Rp,0,0);g.drawImage(c.source,0,0);a.ap.push(b)}function ep(a,b){this.source=a;this.Rp=b}function Ga(){this.q=new hf;this.$b=null}f=Ga.prototype;f.reset=function(){this.q=new hf;this.$b=null};
function R(a,b,c,d,e,g){null===a.q&&z.k("StreamGeometryContext has been closed");void 0!==e&&!0===e?(null===a.$b&&z.k("Need to call beginFigure first"),d=new Qf(Ef),d.L=b,d.M=c,a.$b.Ab.add(d)):(a.$b=new kf,a.$b.Ha=b,a.$b.Da=c,a.$b.Ot=d,a.q.cc.add(a.$b));void 0!==g&&(a.$b.ro=g)}function T(a){null===a.q&&z.k("StreamGeometryContext has been closed");null===a.$b&&z.k("Need to call beginFigure first");var b=a.$b.Ab.length;0<b&&a.$b.Ab.ea(b-1).close()}
function Bf(a){null===a.q&&z.k("StreamGeometryContext has been closed");null===a.$b&&z.k("Need to call beginFigure first");0<a.$b.Ab.length&&(a.$b.Ot=!0)}f.fb=function(a){null===this.q&&z.k("StreamGeometryContext has been closed");null===this.$b&&z.k("Need to call beginFigure first");this.$b.tk=a};f.moveTo=function(a,b,c){void 0===c&&(c=!1);null===this.q&&z.k("StreamGeometryContext has been closed");null===this.$b&&z.k("Need to call beginFigure first");var d=new Qf(Ef);d.L=a;d.M=b;c&&d.close();this.$b.Ab.add(d)};
f.lineTo=function(a,b,c){void 0===c&&(c=!1);null===this.q&&z.k("StreamGeometryContext has been closed");null===this.$b&&z.k("Need to call beginFigure first");var d=new Qf(qf);d.L=a;d.M=b;c&&d.close();this.$b.Ab.add(d)};function S(a,b,c,d,e,g,h,k){void 0===k&&(k=!1);null===a.q&&z.k("StreamGeometryContext has been closed");null===a.$b&&z.k("Need to call beginFigure first");var l=new Qf(Ff);l.zc=b;l.Qc=c;l.Ch=d;l.Dh=e;l.L=g;l.M=h;k&&l.close();a.$b.Ab.add(l)}
function zf(a,b,c,d,e){var g;void 0===g&&(g=!1);null===a.q&&z.k("StreamGeometryContext has been closed");null===a.$b&&z.k("Need to call beginFigure first");var h=new Qf(Gf);h.zc=b;h.Qc=c;h.L=d;h.M=e;g&&h.close();a.$b.Ab.add(h)}f.arcTo=function(a,b,c,d,e,g,h){void 0===g&&(g=0);void 0===h&&(h=!1);null===this.q&&z.k("StreamGeometryContext has been closed");null===this.$b&&z.k("Need to call beginFigure first");var k=new Qf(Hf);k.Fe=a;k.Lf=b;k.ra=c;k.za=d;k.radiusX=e;k.radiusY=0!==g?g:e;h&&k.close();this.$b.Ab.add(k)};
function Af(a,b,c,d,e,g,h,k){var l;void 0===l&&(l=!1);null===a.q&&z.k("StreamGeometryContext has been closed");null===a.$b&&z.k("Need to call beginFigure first");b=new Qf(If,h,k,b,c,d,e,g);l&&b.close();a.$b.Ab.add(b)}function fp(a){a=gp(a);var b=z.rb();b[0]=a[0];for(var c=1,d=1;d<a.length;)b[c]=a[d],b[c+1]=a[d],b[c+2]=a[d+1],d+=2,c+=3;z.xa(a);return b}
function gp(a){var b=hp(a),c=z.rb(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var g=0;g<e;g++){var h=b[g],k=b[g+1],l=b[(d+g-1)%e],m=b[(d+g+a)%e];c[2*g]=h;c[2*g+1]=Oe(h.x,h.y,l.x,l.y,k.x,k.y,m.x,m.y,new N)}c[c.length]=c[0];z.xa(b);return c}function hp(a){for(var b=z.rb(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new N(.5+.5*Math.cos(d),.5+.5*Math.sin(d));b.push(b[0]);return b}
var wo={None:"Rectangle",Rectangle:function(a,b,c){a=new hf;a.type=nf;a.Ha=0;a.Da=0;a.L=b;a.M=c;return a},Square:function(a,b,c){a=new hf;a.Xd=dj;a.type=nf;a.Ha=0;a.Da=0;a.L=Math.min(b,c);a.M=Math.min(b,c);return a},Ellipse:function(a,b,c){a=new hf;a.type=of;a.Ha=0;a.Da=0;a.L=b;a.M=c;a.C=he;a.D=ie;return a},Circle:function(a,b,c){a=new hf;a.Xd=dj;a.type=of;a.Ha=0;a.Da=0;a.L=Math.min(b,c);a.M=Math.min(b,c);a.C=he;a.D=ie;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new hf;var d=new kf,
e=new Qf;e.L=b;e.M=.5*c;d.Ab.add(e);b=new Qf;b.L=0;b.M=c;d.Ab.add(b.close());a.cc.add(d);a.C=new Q(0,.25);a.D=new Q(.5,.75);return a},TriangleDown:function(a,b,c){a=new hf;var d=new kf,e=new Qf;e.L=b;e.M=0;d.Ab.add(e);e=new Qf;e.L=.5*b;e.M=c;d.Ab.add(e.close());a.cc.add(d);a.C=new Q(.25,0);a.D=new Q(.75,.5);return a},TriangleLeft:function(a,b,c){a=new hf;var d=new kf;d.Ha=b;d.Da=c;var e=new Qf;e.L=0;e.M=.5*c;d.Ab.add(e);c=new Qf;c.L=b;c.M=0;d.Ab.add(c.close());a.cc.add(d);a.C=new Q(.5,.25);a.D=new Q(1,
.75);return a},TriangleUp:function(a,b,c){a=new hf;var d=new kf;d.Ha=b;d.Da=c;var e=new Qf;e.L=0;e.M=c;d.Ab.add(e);c=new Qf;c.L=.5*b;c.M=0;d.Ab.add(c.close());a.cc.add(d);a.C=new Q(.25,.5);a.D=new Q(.75,1);return a},Line1:function(a,b,c){a=new hf;a.type=mf;a.Ha=0;a.Da=0;a.L=b;a.M=c;return a},Line2:function(a,b,c){a=new hf;a.type=mf;a.Ha=b;a.Da=0;a.L=0;a.M=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new hf;a.type=mf;a.Ha=0;a.Da=c/2;a.L=b;a.M=c/2;return a},LineV:function(a,b,c){a=new hf;a.type=
mf;a.Ha=b/2;a.Da=0;a.L=b/2;a.M=c;return a},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(a,b,c){a=z.v();R(a,0,0,!1);S(a,Hd*b,0,1*b,(1-Hd)*c,b,c);b=a.q;z.u(a);return b},Curve2:function(a,b,c){a=z.v();R(a,0,0,!1);S(a,0,Hd*c,(1-Hd)*b,c,b,c);b=a.q;z.u(a);return b},Curve3:function(a,b,c){a=z.v();R(a,1*b,0,!1);S(a,1*b,Hd*c,Hd*b,1*c,0,1*c);b=a.q;z.u(a);return b},Curve4:function(a,b,c){a=z.v();R(a,1*b,0,!1);S(a,(1-Hd)*b,0,0,(1-Hd)*c,0,1*c);b=a.q;z.u(a);return b},Alternative:"Triangle",Merge:"Triangle",
Triangle:function(a,b,c){a=z.v();R(a,.5*b,0*c,!0);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,!0);b=a.q;b.C=new Q(.25,.5);b.D=new Q(.75,1);z.u(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=z.v();R(a,.5*b,0,!0);a.lineTo(0,.5*c);a.lineTo(.5*b,1*c);a.lineTo(1*b,.5*c,!0);b=a.q;b.C=new Q(.25,.25);b.D=new Q(.75,.75);z.u(a);return b},Pentagon:function(a,b,c){var d=hp(5);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.2,.22);b.D=new Q(.8,
.9);z.u(a);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=hp(6);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.07,.25);b.D=new Q(.93,.75);z.u(a);return b},Heptagon:function(a,b,c){var d=hp(7);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.2,.15);b.D=new Q(.8,.85);z.u(a);return b},Octagon:function(a,b,c){var d=hp(8);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);
for(var e=1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.15,.15);b.D=new Q(.85,.85);z.u(a);return b},Nonagon:function(a,b,c){var d=hp(9);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.17,.13);b.D=new Q(.82,.82);z.u(a);return b},Decagon:function(a,b,c){var d=hp(10);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.16,.16);b.D=new Q(.84,.84);z.u(a);return b},
Dodecagon:function(a,b,c){var d=hp(12);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.16,.16);b.D=new Q(.84,.84);z.u(a);return b},FivePointedStar:function(a,b,c){var d=gp(5);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.312,.383);b.D=new Q(.693,.765);z.u(a);return b},SixPointedStar:function(a,b,c){var d=gp(6);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*
b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.17,.251);b.D=new Q(.833,.755);z.u(a);return b},SevenPointedStar:function(a,b,c){var d=gp(7);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.363,.361);b.D=new Q(.641,.709);z.u(a);return b},EightPointedStar:function(a,b,c){var d=gp(8);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.252,.255);b.D=new Q(.75,.75);z.u(a);return b},NinePointedStar:function(a,
b,c){var d=gp(9);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.355,.361);b.D=new Q(.645,.651);z.u(a);return b},TenPointedStar:function(a,b,c){var d=gp(10);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.281,.261);b.D=new Q(.723,.748);z.u(a);return b},FivePointedBurst:function(a,b,c){var d=fp(5);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)S(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.312,.383);b.D=new Q(.693,.765);z.u(a);return b},SixPointedBurst:function(a,b,c){var d=fp(6);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)S(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.17,.251);b.D=new Q(.833,.755);z.u(a);return b},SevenPointedBurst:function(a,b,c){var d=fp(7);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)S(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.363,.361);b.D=new Q(.641,.709);z.u(a);return b},EightPointedBurst:function(a,b,c){var d=fp(8);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)S(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.252,.255);b.D=new Q(.75,.75);z.u(a);return b},NinePointedBurst:function(a,b,c){var d=fp(9);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)S(a,d[e].x*
b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.355,.361);b.D=new Q(.645,.651);z.u(a);return b},TenPointedBurst:function(a,b,c){var d=fp(10);a=z.v();R(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)S(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);z.xa(d);T(a);b=a.q;b.C=new Q(.281,.261);b.D=new Q(.723,.748);z.u(a);return b},Cloud:function(a,b,c){a=z.v();R(a,.08034461*b,.1944299*c,!0);S(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*
b,.05349299*c);S(a,.2450511*b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c);S(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c);S(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c);S(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c);S(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c);S(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c);S(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*
c);S(a,.7431877*b,1.009325*c,.5624123*b,1.021761*c,.5101666*b,.9310455*c);S(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c);S(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c);S(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c);S(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c);S(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c);T(a);b=a.q;b.C=new Q(.1,.1);b.D=new Q(.9,.9);z.u(a);return b},
Gate:"Crescent",Crescent:function(a,b,c){a=z.v();R(a,0,0,!0);S(a,1*b,0,1*b,1*c,0,1*c);S(a,.5*b,.75*c,.5*b,.25*c,0,0);T(a);b=a.q;b.C=new Q(.511,.19);b.D=new Q(.776,.76);z.u(a);return b},FramedRectangle:function(a,b,c){var d=z.v(),e=a?a.Ic:NaN;a=a?a.gu:NaN;isNaN(e)&&(e=.1);isNaN(a)&&(a=.1);R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,!0);R(d,e*b,a*c,!1,!0);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,!0);b=d.q;b.C=new Q(e,a);b.D=new Q(1-e,1-a);z.u(d);return b},
Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=z.v();R(a,0,0,!0);S(a,Hd*b,0,1*b,(.5-Hd/2)*c,1*b,.5*c);S(a,1*b,(.5+Hd/2)*c,Hd*b,1*c,0,1*c);T(a);b=a.q;b.C=new Q(0,.2);b.D=new Q(.75,.8);z.u(a);return b},Heart:function(a,b,c){a=z.v();R(a,.5*b,1*c,!0);S(a,.1*b,.8*c,0,.5*c,0*b,.3*c);S(a,0*b,0,.45*b,0,.5*b,.3*c);S(a,.55*b,0,1*b,0,1*b,.3*c);S(a,b,.5*c,.9*b,.8*c,.5*b,1*c);T(a);b=a.q;b.C=new Q(.15,.29);b.D=new Q(.86,.68);z.u(a);return b},Spade:function(a,b,c){a=z.v();R(a,.5*b,0,!0);a.lineTo(.51*b,.01*c);
S(a,.6*b,.2*c,b,.25*c,b,.5*c);S(a,b,.8*c,.6*b,.8*c,.55*b,.7*c);S(a,.5*b,.75*c,.55*b,.95*c,.75*b,c);a.lineTo(.25*b,c);S(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c);S(a,.4*b,.8*c,0,.8*c,0,.5*c);S(a,0,.25*c,.4*b,.2*c,.49*b,.01*c);T(a);b=a.q;b.C=new Q(.19,.26);b.D=new Q(.8,.68);z.u(a);return b},Club:function(a,b,c){a=z.v();R(a,.4*b,.6*c,!0);S(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c);a.lineTo(.85*b,c);S(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,g=0,h=4*(Math.SQRT2-1)/3*d;S(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*
b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);S(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);S(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e+.05)*b,(.5-h+g-.02)*c,.65*b,.36771243*c);d=.2;e=0;g=-.3;h=4*(Math.SQRT2-1)/3*d;S(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);S(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);S(a,(.5-d+
e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,.35*b,.36771243*c);d=.2;e=-.3;g=0;h=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e-.05)*b,(.5-h+g-.02)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);S(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);S(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,.4*b,.6*c);T(a);b=a.q;b.C=new Q(.06,.39);b.D=new Q(.93,.58);z.u(a);return b},Ring:function(a,b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;R(a,b,.5*
c,!0);S(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);S(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);S(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);S(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;R(a,.5*b,.1*c,!0,!0);S(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);S(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);S(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);S(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);b=a.q;b.C=new Q(.146,.146);b.D=new Q(.853,.853);b.Xd=dj;z.u(a);return b},YinYang:function(a,b,c){var d=.5;a=z.v();d=.5;R(a,.5*b,0,!0);a.arcTo(270,
180,.5*b,.5*b,.5*b);S(a,1*b,d*c,0,d*c,d*b,0,!0);var d=.1,e=.25;R(a,(.5+d)*b,e*c,!0,!0);a.arcTo(0,-360,.5*b,c*e,d*b);T(a);R(a,.5*b,0,!1);a.arcTo(270,-180,.5*b,.5*b,.5*b);a.fb(!1);e=.75;R(a,(.5+d)*b,e*c,!0);a.arcTo(0,360,.5*b,c*e,d*b);T(a);b=a.q;b.Xd=dj;z.u(a);return b},Peace:function(a,b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;R(a,b,.5*c,!0);S(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);S(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);S(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);S(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;
R(a,.5*b,.1*c,!0,!0);S(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);S(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);S(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);S(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);var d=.07,e=0,g=-.707*.11,h=4*(Math.SQRT2-1)/3*d;R(a,(.5+d+e)*b,(.5+g)*c,!0);S(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);S(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);S(a,(.5+h+e)*b,(.5+d+g)*
c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);d=.07;e=-.707*.11;g=.707*.11;h=4*(Math.SQRT2-1)/3*d;R(a,(.5+d+e)*b,(.5+g)*c,!0);S(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);S(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);S(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);d=.07;e=.707*.11;g=.707*.11;h=4*(Math.SQRT2-1)/3*d;R(a,(.5+d+e)*b,(.5+g)*c,!0);S(a,(.5+d+e)*b,(.5-h+
g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);S(a,(.5-d+e)*b,(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);S(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);b=a.q;b.C=new Q(.146,.146);b.D=new Q(.853,.853);b.Xd=dj;z.u(a);return b},NotAllowed:function(a,b,c){var d=.5*Hd,e=.5;a=z.v();R(a,.5*b,(.5-e)*c,!0);S(a,(.5-d)*b,(.5-e)*c,(.5-e)*b,(.5-d)*c,(.5-e)*b,.5*c);S(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,
(.5+e)*c);S(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+e)*b,.5*c);S(a,(.5+e)*b,(.5-d)*c,(.5+d)*b,(.5-e)*c,.5*b,(.5-e)*c);var e=.4,d=.4*Hd,g=z.O(),h=z.O(),k=z.O(),l=z.O();xe(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.42,g,h,k,l,l);var m=z.O(),n=z.O(),p=z.O();xe(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.58,l,l,p,m,n);var q=z.O(),r=z.O(),s=z.O();xe(.5,.5+e,.5-d,.5+e,.5-e,.5+d,.5-e,.5,.42,q,r,s,l,l);var t=z.O(),v=z.O(),x=z.O();xe(.5,.5+e,.5-d,.5+e,.5-e,.5+d,.5-e,.5,.58,l,l,x,t,v);R(a,x.x*b,x.y*c,!0,!0);S(a,t.x*b,
t.y*c,v.x*b,v.y*c,(.5-e)*b,.5*c);S(a,(.5-e)*b,(.5-d)*c,(.5-d)*b,(.5-e)*c,.5*b,(.5-e)*c);S(a,g.x*b,g.y*c,h.x*b,h.y*c,k.x*b,k.y*c);a.lineTo(x.x*b,x.y*c);T(a);R(a,s.x*b,s.y*c,!0,!0);a.lineTo(p.x*b,p.y*c);S(a,m.x*b,m.y*c,n.x*b,n.y*c,(.5+e)*b,.5*c);S(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);S(a,q.x*b,q.y*c,r.x*b,r.y*c,s.x*b,s.y*c);T(a);z.A(g);z.A(h);z.A(k);z.A(l);z.A(m);z.A(n);z.A(p);z.A(q);z.A(r);z.A(s);z.A(t);z.A(v);z.A(x);b=a.q;z.u(a);b.Xd=dj;return b},Fragile:function(a,b,c){a=z.v();R(a,
0,0,!0);a.lineTo(.25*b,0);a.lineTo(.2*b,.15*c);a.lineTo(.3*b,.25*c);a.lineTo(.29*b,.33*c);a.lineTo(.35*b,.25*c);a.lineTo(.3*b,.15*c);a.lineTo(.4*b,0);a.lineTo(1*b,0);S(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c);a.lineTo(.55*b,.9*c);a.lineTo(.7*b,.9*c);a.lineTo(.7*b,1*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.9*c);a.lineTo(.45*b,.9*c);a.lineTo(.45*b,.5*c);S(a,.25*b,.5*c,0,.25*c,0,0);T(a);b=a.q;b.C=new Q(.25,0);b.D=new Q(.75,.4);z.u(a);return b},HourGlass:function(a,b,c){a=z.v();R(a,.65*b,.5*c,!0);a.lineTo(1*b,
1*c);a.lineTo(0,1*c);a.lineTo(.35*b,.5*c);a.lineTo(0,0);a.lineTo(1*b,0);T(a);b=a.q;z.u(a);return b},Lightning:function(a,b,c){a=z.v();R(a,0*b,.55*c,!0);a.lineTo(.75*b,0);a.lineTo(.25*b,.45*c);a.lineTo(.9*b,.48*c);a.lineTo(.4*b,1*c);a.lineTo(.65*b,.55*c);T(a);b=a.q;z.u(a);return b},Parallelogram1:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.1);var d=z.v();R(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);T(d);b=d.q;b.C=new Q(a,0);b.D=new Q(1-a,1);z.u(d);return b},Input:"Output",Output:function(a,
b,c){a=z.v();R(a,0,1*c,!0);a.lineTo(.1*b,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);T(a);b=a.q;b.C=new Q(.1,0);b.D=new Q(.9,1);z.u(a);return b},Parallelogram2:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.25);var d=z.v();R(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);T(d);b=d.q;b.C=new Q(a,0);b.D=new Q(1-a,1);z.u(d);return b},ThickCross:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.25);var d=z.v();R(d,(.5-a/2)*b,0,!0);d.lineTo((.5+a/2)*b,0);d.lineTo((.5+a/2)*b,(.5-a/2)*c);d.lineTo(1*b,(.5-
a/2)*c);d.lineTo(1*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,1*c);d.lineTo((.5-a/2)*b,1*c);d.lineTo((.5-a/2)*b,(.5+a/2)*c);d.lineTo(0,(.5+a/2)*c);d.lineTo(0,(.5-a/2)*c);d.lineTo((.5-a/2)*b,(.5-a/2)*c);T(d);b=d.q;b.C=new Q(.5-a/2,.5-a/2);b.D=new Q(.5+a/2,.5+a/2);z.u(d);return b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=z.v();R(d,.3*b,0,!0);d.lineTo(.5*b,.2*c);d.lineTo(.7*b,0);d.lineTo(1*b,.3*c);d.lineTo(.8*b,.5*c);d.lineTo(1*b,.7*c);d.lineTo(.7*b,1*c);d.lineTo(.5*b,.8*
c);d.lineTo(.3*b,1*c);d.lineTo(0,.7*c);d.lineTo(.2*b,.5*c);d.lineTo(0,.3*c);T(d);b=d.q;b.C=new Q(.5-a,.5-a);b.D=new Q(.5+a,.5+a);z.u(d);return b},ThinCross:function(a,b,c){var d=a?a.Ic:NaN;isNaN(d)&&(d=.1);a=z.v();R(a,(.5-d/2)*b,0,!0);a.lineTo((.5+d/2)*b,0);a.lineTo((.5+d/2)*b,(.5-d/2)*c);a.lineTo(1*b,(.5-d/2)*c);a.lineTo(1*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,1*c);a.lineTo((.5-d/2)*b,1*c);a.lineTo((.5-d/2)*b,(.5+d/2)*c);a.lineTo(0,(.5+d/2)*c);a.lineTo(0,(.5-d/2)*c);a.lineTo((.5-
d/2)*b,(.5-d/2)*c);T(a);b=a.q;z.u(a);return b},ThinX:function(a,b,c){a=z.v();R(a,.1*b,0,!0);a.lineTo(.5*b,.4*c);a.lineTo(.9*b,0);a.lineTo(1*b,.1*c);a.lineTo(.6*b,.5*c);a.lineTo(1*b,.9*c);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.6*c);a.lineTo(.1*b,1*c);a.lineTo(0,.9*c);a.lineTo(.4*b,.5*c);a.lineTo(0,.1*c);T(a);b=a.q;z.u(a);return b},RightTriangle:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);T(a);b=a.q;b.C=new Q(0,.5);b.D=new Q(.5,1);z.u(a);return b},RoundedIBeam:function(a,b,c){a=
z.v();R(a,0,0,!0);a.lineTo(1*b,0);S(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c);a.lineTo(0,1*c);S(a,.5*b,.75*c,.5*b,.25*c,0,0);T(a);b=a.q;z.u(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.Ic:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*Hd;var e=z.v();R(e,d,0,!0);e.lineTo(b-d,0);S(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);S(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);S(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);S(e,0,a,a,0,d,0);T(e);b=e.q;1<a?(b.C=new Q(0,0,a,a),b.D=new Q(1,1,-a,-a)):(b.C=Zb,b.D=ic);z.u(e);return b},
Border:function(a,b,c){var d=a?a.Ic:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=z.v();R(a,d,0,!0);a.lineTo(b-d,0);S(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);S(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);S(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);S(a,0,0,0,0,d,0);T(a);b=a.q;b.C=Zb;b.D=ic;z.u(a);return b},SquareIBeam:function(a,b,c){var d=a?a.Ic:NaN;isNaN(d)&&(d=.2);a=z.v();R(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,d*c);a.lineTo((.5+d/2)*b,d*c);a.lineTo((.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*
c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((.5-d/2)*b,(1-d)*c);a.lineTo((.5-d/2)*b,d*c);a.lineTo(0,d*c);T(a);b=a.q;z.u(a);return b},Trapezoid:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.2);var d=z.v();R(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);T(d);b=d.q;b.C=new Q(a,0);b.D=new Q(1-a,1);z.u(d);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.Ic:NaN;isNaN(d)&&(d=0);a=z.v();R(a,d,0,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*
b,1*c);T(a);b=a.q;b.C=new Q(.1,0);b.D=new Q(.9,1);z.u(a);return b},GenderMale:function(a,b,c){a=z.v();var d=.4*Hd,e=.4,g=z.O(),h=z.O(),k=z.O(),l=z.O();R(a,(.5-e)*b,.5*c,!0);S(a,(.5-e)*b,(.5-d)*c,(.5-d)*b,(.5-e)*c,.5*b,(.5-e)*c);xe(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.44,k,l,h,g,g);S(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);var m=z.Tb(h.x,h.y);xe(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.56,g,g,h,k,l);var n=z.Tb(h.x,h.y);a.lineTo((.1*m.x+.855)*b,.1*m.y*c);a.lineTo(.85*b,.1*m.y*c);a.lineTo(.85*b,0);a.lineTo(1*
b,0);a.lineTo(1*b,.15*c);a.lineTo((.1*n.x+.9)*b,.15*c);a.lineTo((.1*n.x+.9)*b,(.1*n.y+.05*.9)*c);a.lineTo(n.x*b,n.y*c);S(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+e)*b,.5*c);S(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);S(a,(.5-d)*b,(.5+e)*c,(.5-e)*b,(.5+d)*c,(.5-e)*b,.5*c);e=.35;d=.35*Hd;R(a,.5*b,(.5-e)*c,!0,!0);S(a,(.5-d)*b,(.5-e)*c,(.5-e)*b,(.5-d)*c,(.5-e)*b,.5*c);S(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,(.5+e)*c);S(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+e)*b,.5*c);S(a,(.5+e)*b,(.5-d)*c,(.5+
d)*b,(.5-e)*c,.5*b,(.5-e)*c);R(a,(.5-e)*b,.5*c,!0);z.A(g);z.A(h);z.A(k);z.A(l);z.A(m);z.A(n);b=a.q;b.C=new Q(.202,.257);b.D=new Q(.692,.839);b.Xd=dj;z.u(a);return b},GenderFemale:function(a,b,c){a=z.v();var d=.375,e=0,g=-.125,h=4*(Math.SQRT2-1)/3*d;R(a,(.525+e)*b,(.5+d+g)*c,!0);S(a,(.5+h+e)*b,(.5+d+g)*c,(.5+d+e)*b,(.5+h+g)*c,(.5+d+e)*b,(.5+g)*c);S(a,(.5+d+e)*b,(.5-h+g)*c,(.5+h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5-h+e)*b,(.5-d+g)*c,(.5-d+e)*b,(.5-h+g)*c,(.5-d+e)*b,(.5+g)*c);S(a,(.5-d+e)*b,
(.5+h+g)*c,(.5-h+e)*b,(.5+d+g)*c,(.475+e)*b,(.5+d+g)*c);a.lineTo(.475*b,.85*c);a.lineTo(.425*b,.85*c);a.lineTo(.425*b,.9*c);a.lineTo(.475*b,.9*c);a.lineTo(.475*b,1*c);a.lineTo(.525*b,1*c);a.lineTo(.525*b,.9*c);a.lineTo(.575*b,.9*c);a.lineTo(.575*b,.85*c);a.lineTo(.525*b,.85*c);T(a);d=.325;e=0;g=-.125;h=4*(Math.SQRT2-1)/3*d;R(a,(.5+d+e)*b,(.5+g)*c,!0,!0);S(a,(.5+d+e)*b,(.5+h+g)*c,(.5+h+e)*b,(.5+d+g)*c,(.5+e)*b,(.5+d+g)*c);S(a,(.5-h+e)*b,(.5+d+g)*c,(.5-d+e)*b,(.5+h+g)*c,(.5-d+e)*b,(.5+g)*c);S(a,(.5-
d+e)*b,(.5-h+g)*c,(.5-h+e)*b,(.5-d+g)*c,(.5+e)*b,(.5-d+g)*c);S(a,(.5+h+e)*b,(.5-d+g)*c,(.5+d+e)*b,(.5-h+g)*c,(.5+d+e)*b,(.5+g)*c);R(a,(.525+e)*b,(.5+d+g)*c,!0);b=a.q;b.C=new Q(.232,.136);b.D=new Q(.782,.611);b.Xd=dj;z.u(a);return b},PlusLine:function(a,b,c){a=z.v();R(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.q;z.u(a);return b},XLine:function(a,b,c){a=z.v();R(a,0,1*c,!1);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},AsteriskLine:function(a,b,c){a=
z.v();var d=.2/Math.SQRT2;R(a,d*b,(1-d)*c,!1);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,.5*c);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0*c);a.lineTo(.5*b,1*c);b=a.q;z.u(a);return b},CircleLine:function(a,b,c){var d=.5*Hd;a=z.v();R(a,1*b,.5*c,!1);S(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);S(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.q;b.C=new Q(.146,.146);b.D=new Q(.853,.853);b.Xd=dj;z.u(a);return b},Pie:function(a,
b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;R(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0);S(a,.7*b,0*c,.5*b,0*c,.5*b,0*c);S(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);S(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c);S(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);a.lineTo(.5*b,.5*c);T(a);b=a.q;z.u(a);return b},PiePiece:function(a,b,c){var d=Hd/Math.SQRT2*.5,e=Math.SQRT2/2,g=1-Math.SQRT2/2;a=z.v();R(a,b,c,!0);S(a,b,(1-d)*c,(e+d)*b,(g+d)*c,e*b,g*c);a.lineTo(0,c);T(a);b=a.q;z.u(a);return b},StopSign:function(a,
b,c){a=1/(Math.SQRT2+2);var d=z.v();R(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,(1-a)*c);d.lineTo(0,a*c);T(d);b=d.q;b.C=new Q(a/2,a/2);b.D=new Q(1-a/2,1-a/2);z.u(d);return b},LogicImplies:function(a,b,c){var d=a?a.Ic:NaN;isNaN(d)&&(d=.2);a=z.v();R(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);b=a.q;b.C=Zb;b.D=new Q(.8,.5);z.u(a);return b},LogicIff:function(a,b,c){var d=a?a.Ic:
NaN;isNaN(d)&&(d=.2);a=z.v();R(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(d*b,0);a.lineTo(0,.5*c);a.lineTo(d*b,c);b=a.q;b.C=new Q(.2,0);b.D=new Q(.8,.5);z.u(a);return b},LogicNot:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},LogicAnd:function(a,b,c){a=z.v();R(a,0,1*c,!1);a.lineTo(.5*b,0);a.lineTo(1*b,1*c);b=a.q;b.C=new Q(.25,.5);b.D=new Q(.75,1);z.u(a);return b},LogicOr:function(a,b,c){a=z.v();
R(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);b=a.q;b.C=new Q(.219,0);b.D=new Q(.78,.409);z.u(a);return b},LogicXor:function(a,b,c){a=z.v();R(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);var d=.5*Hd;S(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);S(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.q;b.Xd=dj;z.u(a);return b},LogicTruth:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);
b=a.q;z.u(a);return b},LogicFalsity:function(a,b,c){a=z.v();R(a,0,1*c,!1);a.lineTo(1*b,1*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);b=a.q;z.u(a);return b},LogicThereExists:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,.5*c);a.lineTo(0,.5*c);a.moveTo(1*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.q;z.u(a);return b},LogicForAll:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);a.moveTo(.25*b,.5*c);a.lineTo(.75*b,.5*c);b=a.q;b.C=new Q(.25,0);b.D=new Q(.75,.5);z.u(a);
return b},LogicIsDefinedAs:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(b,0);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.q;b.C=new Q(.01,.01);b.D=new Q(.99,.49);z.u(a);return b},LogicIntersect:function(a,b,c){var d=.5*Hd;a=z.v();R(a,0,1*c,!1);a.lineTo(0,.5*c);S(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);a.lineTo(1*b,1*c);b=a.q;b.C=new Q(0,.5);b.D=ic;z.u(a);return b},LogicUnion:function(a,b,c){var d=.5*Hd;a=z.v();R(a,1*b,0,!1);a.lineTo(1*b,.5*c);S(a,
1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);a.lineTo(0,0);b=a.q;b.C=Zb;b.D=new Q(1,.5);z.u(a);return b},Arrow:function(a,b,c){var d=a?a.Ic:NaN,e=a?a.gu:NaN;isNaN(d)&&(d=.3);isNaN(e)&&(e=.3);a=z.v();R(a,0,(.5-e/2)*c,!0);a.lineTo((1-d)*b,(.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(.5+e/2)*c);a.lineTo(0,(.5+e/2)*c);T(a);b=a.q;b.C=new Q(0,.5-e/2);d=Oe(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,z.O());b.D=new Q(d.x,d.y);z.A(d);z.u(a);return b},
ISOProcess:"Chevron",Chevron:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);T(a);b=a.q;z.u(a);return b},DoubleArrow:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(.3*b,.214*c);a.lineTo(.3*b,0);a.lineTo(1*b,.5*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.786*c);a.lineTo(0,1*c);T(a);R(a,.3*b,.214*c,!1);a.lineTo(.3*b,.786*c);a.fb(!1);b=a.q;z.u(a);return b},DoubleEndArrow:function(a,b,c){a=z.v();R(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);
a.lineTo(.7*b,.7*c);a.lineTo(.3*b,.7*c);a.lineTo(.3*b,1*c);a.lineTo(0,.5*c);a.lineTo(.3*b,0);a.lineTo(.3*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);T(a);b=a.q;c=Oe(0,.5,.3,0,0,.3,.3,.3,z.O());b.C=new Q(c.x,c.y);c=Oe(.7,1,1,.5,.7,.7,1,.7,c);b.D=new Q(c.x,c.y);z.A(c);z.u(a);return b},IBeamArrow:function(a,b,c){a=z.v();R(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.2*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.2*b,0);a.lineTo(.2*b,.3*c);a.lineTo(.7*b,.3*c);
a.lineTo(.7*b,0);T(a);b=a.q;b.C=new Q(0,.3);c=Oe(.7,1,1,.5,.7,.7,1,.7,z.O());b.D=new Q(c.x,c.y);z.A(c);z.u(a);return b},Pointer:function(a,b,c){a=z.v();R(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(.2*b,.5*c);a.lineTo(0,0);T(a);b=a.q;b.C=new Q(.2,.35);c=Oe(.2,.65,1,.65,0,1,1,.5,z.O());b.D=new Q(c.x,c.y);z.A(c);z.u(a);return b},RoundedPointer:function(a,b,c){a=z.v();R(a,1*b,.5*c,!0);a.lineTo(0,1*c);S(a,.5*b,.75*c,.5*b,.25*c,0,0);T(a);b=a.q;b.C=new Q(.4,.35);c=Oe(.2,.65,1,.65,0,1,1,.5,z.O());b.D=new Q(c.x,
c.y);z.A(c);z.u(a);return b},SplitEndArrow:function(a,b,c){a=z.v();R(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(0,.7*c);a.lineTo(.2*b,.5*c);a.lineTo(0,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);T(a);b=a.q;b.C=new Q(.2,.3);c=Oe(.7,1,1,.5,.7,.7,1,.7,z.O());b.D=new Q(c.x,c.y);z.A(c);z.u(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=z.v();R(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.7*b,0);T(a);b=a.q;b.C=Zb;b.D=new Q(.7,1);z.u(a);
return b},Cone1:function(a,b,c){var d=.5*Hd,e=.1*Hd;a=z.v();R(a,0,.9*c,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.9*c);S(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);T(a);b=a.q;b.C=new Q(.25,.5);b.D=new Q(.75,.97);z.u(a);return b},Cone2:function(a,b,c){a=z.v();R(a,0,.9*c,!0);S(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c);a.lineTo(.5*b,0);a.lineTo(0,.9*c);T(a);R(a,0,.9*c,!1);S(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c);a.fb(!1);b=a.q;b.C=new Q(.25,.5);b.D=new Q(.75,.82);z.u(a);return b},
Cube1:function(a,b,c){a=z.v();R(a,.5*b,1*c,!0);a.lineTo(1*b,.85*c);a.lineTo(1*b,.15*c);a.lineTo(.5*b,0*c);a.lineTo(0*b,.15*c);a.lineTo(0*b,.85*c);T(a);R(a,.5*b,1*c,!1);a.lineTo(.5*b,.3*c);a.lineTo(0,.15*c);a.moveTo(.5*b,.3*c);a.lineTo(1*b,.15*c);a.fb(!1);b=a.q;b.C=new Q(0,.3);b.D=new Q(.5,.85);z.u(a);return b},Cube2:function(a,b,c){a=z.v();R(a,0,.3*c,!0);a.lineTo(0*b,1*c);a.lineTo(.7*b,c);a.lineTo(1*b,.7*c);a.lineTo(1*b,0*c);a.lineTo(.3*b,0*c);T(a);R(a,0,.3*c,!1);a.lineTo(.7*b,.3*c);a.lineTo(1*b,
0*c);a.moveTo(.7*b,.3*c);a.lineTo(.7*b,1*c);a.fb(!1);b=a.q;b.C=new Q(0,.3);b.D=new Q(.7,1);z.u(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=.5*Hd,e=.1*Hd;a=z.v();R(a,0,.1*c,!0);S(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);a.lineTo(b,.9*c);S(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);R(a,0,.1*c,!1);S(a,0,(.1+e)*c,(.5-d)*b,.2*c,.5*b,.2*c);S(a,(.5+d)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c);a.fb(!1);b=a.q;b.C=new Q(0,
.2);b.D=new Q(1,.9);z.u(a);return b},Cylinder2:function(a,b,c){var d=.5*Hd,e=.1*Hd;a=z.v();R(a,0,.9*c,!0);a.lineTo(0,.1*c);S(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);a.lineTo(1*b,.9*c);S(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);R(a,0,.9*c,!1);S(a,0,(.9-e)*c,(.5-d)*b,.8*c,.5*b,.8*c);S(a,(.5+d)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c);a.fb(!1);b=a.q;b.C=new Q(0,.1);b.D=new Q(1,.8);z.u(a);return b},Cylinder3:function(a,b,c){var d=.1*Hd,e=.5*Hd;a=z.v();
R(a,.1*b,0,!0);a.lineTo(.9*b,0);S(a,(.9+d)*b,0,1*b,(.5-e)*c,1*b,.5*c);S(a,1*b,(.5+e)*c,(.9+d)*b,1*c,.9*b,1*c);a.lineTo(.1*b,1*c);S(a,(.1-d)*b,1*c,0,(.5+e)*c,0,.5*c);S(a,0,(.5-e)*c,(.1-d)*b,0,.1*b,0);R(a,.1*b,0,!1);S(a,(.1+d)*b,0,.2*b,(.5-e)*c,.2*b,.5*c);S(a,.2*b,(.5+e)*c,(.1+d)*b,1*c,.1*b,1*c);a.fb(!1);b=a.q;b.C=new Q(.2,0);b.D=new Q(.9,1);z.u(a);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=.1*Hd,e=.5*Hd;a=z.v();R(a,.9*b,0,!0);S(a,(.9+d)*b,0,1*b,(.5-e)*c,1*b,.5*c);S(a,1*b,(.5+
e)*c,(.9+d)*b,1*c,.9*b,1*c);a.lineTo(.1*b,1*c);S(a,(.1-d)*b,1*c,0,(.5+e)*c,0,.5*c);S(a,0,(.5-e)*c,(.1-d)*b,0,.1*b,0);a.lineTo(.9*b,0);R(a,.9*b,0,!1);S(a,(.9-d)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);S(a,.8*b,(.5+e)*c,(.9-d)*b,1*c,.9*b,1*c);a.fb(!1);b=a.q;b.C=new Q(.1,0);b.D=new Q(.8,1);z.u(a);return b},Prism1:function(a,b,c){a=z.v();R(a,.25*b,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(b,.5*c);a.lineTo(.5*b,c);a.lineTo(0,c);T(a);R(a,.25*b,.25*c,!1);a.lineTo(.5*b,c);a.fb(!1);b=a.q;b.C=new Q(.408,.172);b.D=new Q(.833,
.662);z.u(a);return b},Prism2:function(a,b,c){a=z.v();R(a,0,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);T(a);R(a,0,c,!1);a.lineTo(.25*b,.5*c);a.lineTo(b,.25*c);a.moveTo(0,.25*c);a.lineTo(.25*b,.5*c);a.fb(!1);b=a.q;b.C=new Q(.25,.5);b.D=new Q(.75,.75);z.u(a);return b},Pyramid1:function(a,b,c){a=z.v();R(a,.5*b,0,!0);a.lineTo(b,.75*c);a.lineTo(.5*b,1*c);a.lineTo(0,.75*c);T(a);R(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.fb(!1);b=a.q;b.C=new Q(.25,.367);b.D=new Q(.75,
.875);z.u(a);return b},Pyramid2:function(a,b,c){a=z.v();R(a,.5*b,0,!0);a.lineTo(b,.85*c);a.lineTo(.5*b,1*c);a.lineTo(0,.85*c);T(a);R(a,.5*b,0,!1);a.lineTo(.5*b,.7*c);a.lineTo(0,.85*c);a.moveTo(.5*b,.7*c);a.lineTo(1*b,.85*c);a.fb(!1);b=a.q;b.C=new Q(.25,.367);b.D=new Q(.75,.875);z.u(a);return b},Actor:function(a,b,c){var d=.2*Hd,e=.1*Hd,g=.5,h=.1;a=z.v();R(a,g*b,(h+.1)*c,!0);S(a,(g-d)*b,(h+.1)*c,(g-.2)*b,(h+e)*c,(g-.2)*b,h*c);S(a,(g-.2)*b,(h-e)*c,(g-d)*b,(h-.1)*c,g*b,(h-.1)*c);S(a,(g+d)*b,(h-.1)*c,
(g+.2)*b,(h-e)*c,(g+.2)*b,h*c);S(a,(g+.2)*b,(h+e)*c,(g+d)*b,(h+.1)*c,g*b,(h+.1)*c);d=.05;e=Hd*d;R(a,.5*b,.2*c,!0);a.lineTo(.95*b,.2*c);g=.95;h=.25;S(a,(g+e)*b,(h-d)*c,(g+d)*b,(h-e)*c,(g+d)*b,h*c);a.lineTo(1*b,.6*c);a.lineTo(.85*b,.6*c);a.lineTo(.85*b,.35*c);d=.025;e=Hd*d;g=.825;h=.35;S(a,(g+d)*b,(h-e)*c,(g+e)*b,(h-d)*c,g*b,(h-d)*c);S(a,(g-e)*b,(h-d)*c,(g-d)*b,(h-e)*c,(g-d)*b,h*c);a.lineTo(.8*b,1*c);a.lineTo(.55*b,1*c);a.lineTo(.55*b,.7*c);d=.05;e=Hd*d;g=.5;h=.7;S(a,(g+d)*b,(h-e)*c,(g+e)*b,(h-d)*c,
g*b,(h-d)*c);S(a,(g-e)*b,(h-d)*c,(g-d)*b,(h-e)*c,(g-d)*b,h*c);a.lineTo(.45*b,1*c);a.lineTo(.2*b,1*c);a.lineTo(.2*b,.35*c);d=.025;e=Hd*d;g=.175;h=.35;S(a,(g+d)*b,(h-e)*c,(g+e)*b,(h-d)*c,g*b,(h-d)*c);S(a,(g-e)*b,(h-d)*c,(g-d)*b,(h-e)*c,(g-d)*b,h*c);a.lineTo(.15*b,.6*c);a.lineTo(0*b,.6*c);a.lineTo(0*b,.25*c);d=.05;e=Hd*d;g=.05;h=.25;S(a,(g-d)*b,(h-e)*c,(g-e)*b,(h-d)*c,g*b,(h-d)*c);a.lineTo(.5*b,.2*c);b=a.q;b.C=new Q(.2,.2);b.D=new Q(.8,.65);z.u(a);return b},Card:function(a,b,c){a=z.v();R(a,1*b,0*c,!0);
a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,.2*c);a.lineTo(.2*b,0*c);T(a);b=a.q;b.C=new Q(0,.2);b.D=ic;z.u(a);return b},Collate:function(a,b,c){a=z.v();R(a,.5*b,.5*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);R(a,.5*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);b=a.q;b.C=new Q(.25,0);b.D=new Q(.75,.25);z.u(a);return b},CreateRequest:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.1);var d=z.v();R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);T(d);R(d,0,
a*c,!1);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.fb(!1);b=d.q;b.C=new Q(0,a);b.D=new Q(1,1-a);z.u(d);return b},Database:function(a,b,c){a=z.v();var d=.5*Hd,e=.1*Hd;R(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);S(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);S(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);R(a,1*b,.1*c,!1);S(a,1*b,(.1+e)*c,(.5+d)*b,.2*c,.5*b,.2*c);S(a,(.5-d)*b,.2*c,0,(.1+e)*c,0,.1*c);a.moveTo(1*b,.2*c);
S(a,1*b,(.2+e)*c,(.5+d)*b,.3*c,.5*b,.3*c);S(a,(.5-d)*b,.3*c,0,(.2+e)*c,0,.2*c);a.moveTo(1*b,.3*c);S(a,1*b,(.3+e)*c,(.5+d)*b,.4*c,.5*b,.4*c);S(a,(.5-d)*b,.4*c,0,(.3+e)*c,0,.3*c);a.fb(!1);b=a.q;b.C=new Q(0,.4);b.D=new Q(1,.9);z.u(a);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(.75*b,0);S(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(0,1*c);S(a,.25*b,.9*c,.25*b,.1*c,0,0);T(a);b=a.q;b.C=new Q(.226,0);b.D=new Q(.81,1);z.u(a);return b},DiskStorage:function(a,b,c){a=
z.v();var d=.5*Hd,e=.1*Hd;R(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);S(a,1*b,(.9+e)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.9+e)*c,0,.9*c);a.lineTo(0,.1*c);S(a,0,(.1-e)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.1-e)*c,1*b,.1*c);R(a,1*b,.1*c,!1);S(a,1*b,(.1+e)*c,(.5+d)*b,.2*c,.5*b,.2*c);S(a,(.5-d)*b,.2*c,0,(.1+e)*c,0,.1*c);a.moveTo(1*b,.2*c);S(a,1*b,(.2+e)*c,(.5+d)*b,.3*c,.5*b,.3*c);S(a,(.5-d)*b,.3*c,0,(.2+e)*c,0,.2*c);a.fb(!1);b=a.q;b.C=new Q(0,.3);b.D=new Q(1,.9);z.u(a);return b},Display:function(a,
b,c){a=z.v();R(a,.25*b,0,!0);a.lineTo(.75*b,0);S(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(.25*b,1*c);a.lineTo(0,.5*c);T(a);b=a.q;b.C=new Q(.25,0);b.D=new Q(.75,1);z.u(a);return b},DividedEvent:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)?a=.2:.15>a&&(a=.15);var d=z.v(),e=.2*Hd;R(d,0,.2*c,!0);S(d,0,(.2-e)*c,(.2-e)*b,0,.2*b,0);d.lineTo(.8*b,0);S(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c);d.lineTo(1*b,.8*c);S(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c);d.lineTo(.2*b,1*c);S(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c);d.lineTo(0,.2*c);
R(d,0,a*c,!1);d.lineTo(1*b,a*c);d.fb(!1);b=d.q;b.C=new Q(0,a);b.D=new Q(1,1-a);z.u(d);return b},DividedProcess:function(a,b,c){a=a?a.Ic:NaN;if(isNaN(a)||.1>a)a=.1;var d=z.v();R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);T(d);R(d,0,a*c,!1);d.lineTo(1*b,a*c);d.fb(!1);b=d.q;b.C=new Q(0,a);b.D=ic;z.u(d);return b},Document:function(a,b,c){c/=.8;a=z.v();R(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);S(a,.5*b,.4*c,.5*b,1*c,0,.7*c);T(a);b=a.q;b.C=Zb;b.D=new Q(1,.6);z.u(a);
return b},ExternalOrganization:function(a,b,c){a=a?a.Ic:NaN;if(isNaN(a)||.2>a)a=.2;var d=z.v();R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);T(d);R(d,a*b,0,!1);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);d.fb(!1);b=d.q;b.C=new Q(a/2,a/2);b.D=new Q(1-a/2,1-a/2);z.u(d);return b},ExternalProcess:function(a,b,c){a=z.v();R(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);T(a);
R(a,.1*b,.4*c,!1);a.lineTo(.1*b,.6*c);a.moveTo(.9*b,.6*c);a.lineTo(.9*b,.4*c);a.moveTo(.6*b,.1*c);a.lineTo(.4*b,.1*c);a.moveTo(.4*b,.9*c);a.lineTo(.6*b,.9*c);a.fb(!1);b=a.q;b.C=new Q(.25,.25);b.D=new Q(.75,.75);z.u(a);return b},File:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);T(a);R(a,.75*b,0,!1);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.25*c);a.fb(!1);b=a.q;b.C=new Q(0,.25);b.D=ic;z.u(a);return b},Interrupt:function(a,b,c){a=z.v();R(a,1*b,
.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);R(a,1*b,.5*c,!1);a.lineTo(1*b,1*c);R(a,1*b,.5*c,!1);a.lineTo(1*b,0);b=a.q;b.C=new Q(0,.25);b.D=new Q(.5,.75);z.u(a);return b},InternalStorage:function(a,b,c){var d=a?a.Ic:NaN;a=a?a.gu:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.1);var e=z.v();R(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);T(e);R(e,d*b,0,!1);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);e.fb(!1);b=e.q;b.C=new Q(d,a);b.D=ic;z.u(e);return b},Junction:function(a,b,
c){a=z.v();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=.5*Hd;R(a,1*b,.5*c,!0);S(a,1*b,(.5+g)*c,(.5+g)*b,1*c,.5*b,1*c);S(a,(.5-g)*b,1*c,0,(.5+g)*c,0,.5*c);S(a,0,(.5-g)*c,(.5-g)*b,0,.5*b,0);S(a,(.5+g)*b,0,1*b,(.5-g)*c,1*b,.5*c);R(a,(e+d)*b,(e+d)*c,!1);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);a.fb(!1);b=a.q;b.Xd=dj;z.u(a);return b},LinedDocument:function(a,b,c){c/=.8;a=z.v();R(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);S(a,.5*b,.4*c,.5*b,1*c,0,.7*c);T(a);R(a,.1*
b,0,!1);a.lineTo(.1*b,.75*c);a.fb(!1);b=a.q;b.C=new Q(.1,0);b.D=new Q(1,.6);z.u(a);return b},LoopLimit:function(a,b,c){a=z.v();R(a,0,1*c,!0);a.lineTo(0,.25*c);a.lineTo(.25*b,0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);T(a);b=a.q;b.C=new Q(0,.25);b.D=ic;z.u(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=z.v();var d=.5*Hd;R(a,.5*b,1*c,!0);S(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);S(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,(.5+
d)*c,(.5+d)*b,.9*c,.6*b,.9*c);a.lineTo(1*b,.9*c);a.lineTo(1*b,1*c);a.lineTo(.5*b,1*c);b=a.q;b.C=new Q(.15,.15);b.D=new Q(.85,.8);z.u(a);return b},ManualInput:function(a,b,c){a=z.v();R(a,1*b,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.25*c);T(a);b=a.q;b.C=new Q(0,.25);b.D=ic;z.u(a);return b},MessageFromUser:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.7);var d=z.v();R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(a*b,.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);T(d);b=d.q;b.C=Zb;b.D=new Q(a,1);z.u(d);return b},
MicroformProcessing:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.25);var d=z.v();R(d,0,0,!0);d.lineTo(.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.5*b,(1-a)*c);d.lineTo(0,1*c);T(d);b=d.q;b.C=new Q(0,a);b.D=new Q(1,1-a);z.u(d);return b},MicroformRecording:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.15*c);a.lineTo(1*b,.85*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);T(a);b=a.q;b.C=new Q(0,.25);b.D=new Q(1,.75);z.u(a);return b},MultiDocument:function(a,b,c){c/=.8;a=z.v();
R(a,b,0,!0);a.lineTo(b,.5*c);S(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c);a.lineTo(.9*b,.6*c);S(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c);a.lineTo(.8*b,.7*c);S(a,.4*b,.4*c,.4*b,1*c,0,.7*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);a.lineTo(.1*b,.1*c);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);T(a);R(a,.1*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.54*c);a.moveTo(.2*b,.1*c);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.44*c);a.fb(!1);b=a.q;b.C=new Q(0,.25);b.D=new Q(.8,.77);z.u(a);return b},MultiProcess:function(a,b,c){a=z.v();
R(a,.1*b,.1*c,!0);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.8*c);a.lineTo(.9*b,.8*c);a.lineTo(.9*b,.9*c);a.lineTo(.8*b,.9*c);a.lineTo(.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);T(a);R(a,.2*b,.1*c,!1);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.8*c);a.moveTo(.1*b,.2*c);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.9*c);a.fb(!1);b=a.q;b.C=new Q(0,.2);b.D=new Q(.8,1);z.u(a);return b},OfflineStorage:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.1);var d=1-a,e=z.v();R(e,0,0,!0);e.lineTo(1*
b,0);e.lineTo(.5*b,1*c);T(e);R(e,.5*a*b,a*c,!1);e.lineTo((1-.5*a)*b,a*c);e.fb(!1);b=e.q;b.C=new Q(d/4+.5*a,a);b.D=new Q(3*d/4+.5*a,a+.5*d);z.u(e);return b},OffPageConnector:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.5*c);a.lineTo(.75*b,1*c);a.lineTo(0,1*c);T(a);b=a.q;b.C=Zb;b.D=new Q(.75,1);z.u(a);return b},Or:function(a,b,c){a=z.v();var d=.5*Hd;R(a,1*b,.5*c,!0);S(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);S(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);S(a,
(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);R(a,1*b,.5*c,!1);a.lineTo(0,.5*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);a.fb(!1);b=a.q;b.Xd=dj;z.u(a);return b},PaperTape:function(a,b,c){c/=.8;a=z.v();R(a,0,.7*c,!0);a.lineTo(0,.3*c);S(a,.5*b,.6*c,.5*b,0,1*b,.3*c);a.lineTo(1*b,.7*c);S(a,.5*b,.4*c,.5*b,1*c,0,.7*c);T(a);b=a.q;b.C=new Q(0,.49);b.D=new Q(1,.75);z.u(a);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.Ic:NaN;a=a?a.gu:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=z.v();R(e,0,0,!0);e.lineTo(1*b,0);e.lineTo((1-
a)*b,.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);T(e);b=e.q;b.C=new Q(d,0);b.D=new Q(1-a,1);z.u(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Ic:NaN;a=a?a.gu:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=z.v();R(e,0,0,!0);e.lineTo((1-a)*b,0);e.lineTo(1*b,.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);T(e);b=e.q;b.C=new Q(d,0);b.D=new Q(1-a,1);z.u(e);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.1);var d=z.v();R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,
1*c);T(d);R(d,(1-a)*b,0,!1);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);d.fb(!1);b=d.q;b.C=new Q(a,0);b.D=new Q(1-a,1);z.u(d);return b},Process:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.1);var d=z.v();R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);T(d);R(d,a*b,0,!1);d.lineTo(a*b,1*c);d.fb(!1);b=d.q;b.C=new Q(a,0);b.D=ic;z.u(d);return b},Sort:function(a,b,c){a=z.v();R(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);T(a);R(a,0,.5*c,!1);a.lineTo(1*b,.5*
c);a.fb(!1);b=a.q;b.C=new Q(.25,.25);b.D=new Q(.75,.5);z.u(a);return b},Start:function(a,b,c){a=z.v();R(a,.25*b,0,!0);R(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);R(a,.25*b,0,!1);a.lineTo(.25*b,1*c);a.moveTo(.75*b,0);a.lineTo(.75*b,1*c);a.fb(!1);b=a.q;b.C=new Q(.25,0);b.D=new Q(.75,1);z.u(a);return b},Terminator:function(a,b,c){a=z.v();R(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);b=a.q;b.C=new Q(.23,0);
b.D=new Q(.77,1);z.u(a);return b},TransmittalTape:function(a,b,c){a=a?a.Ic:NaN;isNaN(a)&&(a=.1);var d=z.v();R(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);T(d);b=d.q;b.C=Zb;b.D=new Q(1,1-a);z.u(d);return b},AndGate:function(a,b,c){a=z.v();var d=.5*Hd;R(a,0,0,!0);a.lineTo(.5*b,0);S(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);a.lineTo(0,1*c);T(a);b=a.q;b.C=Zb;b.D=new Q(.55,1);z.u(a);return b},Buffer:function(a,b,c){a=z.v();R(a,
0,0,!0);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);T(a);b=a.q;b.C=new Q(0,.25);b.D=new Q(.5,.75);z.u(a);return b},Clock:function(a,b,c){a=z.v();var d=.5*Hd;R(a,1*b,.5*c,!0);S(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);S(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);R(a,1*b,.5*c,!1);a.lineTo(1*b,.5*c);R(a,.8*b,.75*c,!1);a.lineTo(.8*b,.25*c);a.lineTo(.6*b,.25*c);a.lineTo(.6*b,.75*c);a.lineTo(.4*b,.75*c);a.lineTo(.4*b,.25*c);a.lineTo(.2*b,.25*c);a.lineTo(.2*
b,.75*c);a.fb(!1);b=a.q;b.Xd=dj;z.u(a);return b},Ground:function(a,b,c){a=z.v();R(a,.5*b,0,!1);a.lineTo(.5*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.3*b,.8*c);a.lineTo(.7*b,.8*c);a.moveTo(.4*b,1*c);a.lineTo(.6*b,1*c);b=a.q;z.u(a);return b},Inverter:function(a,b,c){a=z.v();var d=.1*Hd;R(a,.8*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.8*b,.5*c);R(a,1*b,.5*c,!0);S(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c);S(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);S(a,.8*b,(.5-d)*c,(.9-d)*b,.4*
c,.9*b,.4*c);S(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.q;b.C=new Q(0,.25);b.D=new Q(.4,.75);z.u(a);return b},NandGate:function(a,b,c){a=z.v();var d=.5*Hd,e=.4*Hd,g=.1*Hd;R(a,.8*b,.5*c,!0);S(a,.8*b,(.5+e)*c,(.4+d)*b,1*c,.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.4*b,0);S(a,(.4+d)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);R(a,1*b,.5*c,!0);S(a,1*b,(.5+g)*c,(.9+g)*b,.6*c,.9*b,.6*c);S(a,(.9-g)*b,.6*c,.8*b,(.5+g)*c,.8*b,.5*c);S(a,.8*b,(.5-g)*c,(.9-g)*b,.4*c,.9*b,.4*c);S(a,(.9+g)*b,.4*c,1*b,(.5-g)*c,1*b,.5*
c);b=a.q;b.C=new Q(0,.05);b.D=new Q(.55,.95);z.u(a);return b},NorGate:function(a,b,c){a=z.v();var d=.5,e=Hd*d,g=0,h=.5;R(a,.8*b,.5*c,!0);S(a,.7*b,(h+e)*c,(g+e)*b,(h+d)*c,0,1*c);S(a,.25*b,.75*c,.25*b,.25*c,0,0);S(a,(g+e)*b,(h-d)*c,.7*b,(h-e)*c,.8*b,.5*c);d=.1;e=.1*Hd;g=.9;h=.5;R(a,(g-d)*b,h*c,!0);S(a,(g-d)*b,(h-e)*c,(g-e)*b,(h-d)*c,g*b,(h-d)*c);S(a,(g+e)*b,(h-d)*c,(g+d)*b,(h-e)*c,(g+d)*b,h*c);S(a,(g+d)*b,(h+e)*c,(g+e)*b,(h+d)*c,g*b,(h+d)*c);S(a,(g-e)*b,(h+d)*c,(g-d)*b,(h+e)*c,(g-d)*b,h*c);b=a.q;b.C=
new Q(.2,.25);b.D=new Q(.6,.75);z.u(a);return b},OrGate:function(a,b,c){a=z.v();var d=.5*Hd;R(a,0,0,!0);S(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c);S(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c);S(a,.25*b,.75*c,.25*b,.25*c,0,0);T(a);b=a.q;b.C=new Q(.2,.25);b.D=new Q(.75,.75);z.u(a);return b},XnorGate:function(a,b,c){a=z.v();var d=.5,e=Hd*d,g=.2,h=.5;R(a,.1*b,0,!1);S(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);R(a,.8*b,.5*c,!0);S(a,.7*b,(h+e)*c,(g+e)*b,(h+d)*c,.2*b,1*c);S(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);S(a,(g+e)*
b,(h-d)*c,.7*b,(h-e)*c,.8*b,.5*c);d=.1;e=.1*Hd;g=.9;h=.5;R(a,(g-d)*b,h*c,!0);S(a,(g-d)*b,(h-e)*c,(g-e)*b,(h-d)*c,g*b,(h-d)*c);S(a,(g+e)*b,(h-d)*c,(g+d)*b,(h-e)*c,(g+d)*b,h*c);S(a,(g+d)*b,(h+e)*c,(g+e)*b,(h+d)*c,g*b,(h+d)*c);S(a,(g-e)*b,(h+d)*c,(g-d)*b,(h+e)*c,(g-d)*b,h*c);b=a.q;b.C=new Q(.4,.25);b.D=new Q(.65,.75);z.u(a);return b},XorGate:function(a,b,c){a=z.v();var d=.5*Hd;R(a,.1*b,0,!1);S(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);R(a,.2*b,0,!0);S(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c);S(a,.9*b,(.5+d)*
c,(.2+d)*b,1*c,.2*b,1*c);S(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);T(a);b=a.q;b.C=new Q(.4,.25);b.D=new Q(.8,.75);z.u(a);return b},Capacitor:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},Resistor:function(a,b,c){a=z.v();R(a,0,.5*c,!1);a.lineTo(.1*b,0);a.lineTo(.2*b,1*c);a.lineTo(.3*b,0);a.lineTo(.4*b,1*c);a.lineTo(.5*b,0);a.lineTo(.6*b,1*c);a.lineTo(.7*b,.5*c);b=a.q;z.u(a);return b},Inductor:function(a,b,c){a=z.v();var d=.1*Hd,e=.1;R(a,(e-.5*
d)*b,c,!1);S(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.3;S(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);S(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.5;S(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);S(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.7;S(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);S(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.9;S(a,(e+.1)*b,0,(e+d)*b,c,(e+.5*d)*b,c);b=a.q;z.u(a);return b},ACvoltageSource:function(a,b,c){a=z.v();var d=.5*Hd;R(a,0*b,.5*c,!1);S(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);S(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,(.5+d)*
c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);a.moveTo(.1*b,.5*c);S(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c);b=a.q;b.Xd=dj;z.u(a);return b},DCvoltageSource:function(a,b,c){a=z.v();R(a,0,.75*c,!1);a.lineTo(0,.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},Diode:function(a,b,c){a=z.v();R(a,1*b,0,!1);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);a.lineTo(1*b,1*c);b=a.q;b.C=new Q(0,.25);b.D=new Q(.5,.75);z.u(a);return b},Wifi:function(a,b,c){var d=b,e=c;
b*=.38;c*=.6;a=z.v();var g=.8*Hd,h=.8,k=0,l=.5,d=(d-b)/2,e=(e-c)/2;R(a,k*b+d,(l+h)*c+e,!0);S(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);S(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);S(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);S(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a);g=.4*Hd;h=.4;k=.2;l=.5;R(a,k*b+d,(l+h)*c+e,!0);S(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);S(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*
b+d,(l-h)*c+e);S(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);S(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a);g=.2*Hd;h=.2;l=k=.5;R(a,(k-h)*b+d,l*c+e,!0);S(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);S(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);S(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);S(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);g=.4*Hd;h=.4;k=.8;l=.5;R(a,k*b+d,(l-h)*c+e,!0);S(a,(k+g)*b+d,(l-
h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);S(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);S(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+g)*c+e,(k+h-.5*g)*b+d,l*c+e);S(a,(k+h-.5*g)*b+d,(l-g)*c+e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a);g=.8*Hd;h=.8;k=1;l=.5;R(a,k*b+d,(l-h)*c+e,!0);S(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);S(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);S(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+g)*c+e,(k+h-.5*g)*b+d,l*c+e);S(a,(k+h-.5*g)*b+d,(l-g)*c+
e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a);b=a.q;z.u(a);return b},Email:function(a,b,c){a=z.v();R(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);T(a);R(a,0,0,!1);a.lineTo(.5*b,.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(.45*b,.54*c);a.moveTo(1*b,1*c);a.lineTo(.55*b,.54*c);a.fb(!1);b=a.q;z.u(a);return b},Ethernet:function(a,b,c){a=z.v();R(a,.35*b,0,!0);a.lineTo(.65*b,0);a.lineTo(.65*b,.4*c);a.lineTo(.35*b,.4*c);a.lineTo(.35*b,0);T(a);R(a,.1*b,1*c,!0,!0);a.lineTo(.4*b,1*c);
a.lineTo(.4*b,.6*c);a.lineTo(.1*b,.6*c);a.lineTo(.1*b,1*c);T(a);R(a,.6*b,1*c,!0,!0);a.lineTo(.9*b,1*c);a.lineTo(.9*b,.6*c);a.lineTo(.6*b,.6*c);a.lineTo(.6*b,1*c);T(a);R(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.5*b,.4*c);a.moveTo(.75*b,.5*c);a.lineTo(.75*b,.6*c);a.moveTo(.25*b,.5*c);a.lineTo(.25*b,.6*c);a.fb(!1);b=a.q;z.u(a);return b},Power:function(a,b,c){a=z.v();var d=.4*Hd,e=.4,g=z.O(),h=z.O(),k=z.O(),l=z.O();xe(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.5,g,g,h,k,l);var m=z.Tb(h.x,
h.y);R(a,h.x*b,h.y*c,!0);S(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+e)*b,.5*c);S(a,(.5+e)*b,(.5+d)*c,(.5+d)*b,(.5+e)*c,.5*b,(.5+e)*c);S(a,(.5-d)*b,(.5+e)*c,(.5-e)*b,(.5+d)*c,(.5-e)*b,.5*c);xe(.5-e,.5,.5-e,.5-d,.5-d,.5-e,.5,.5-e,.5,k,l,h,g,g);S(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);d=.3*Hd;e=.3;xe(.5-e,.5,.5-e,.5-d,.5-d,.5-e,.5,.5-e,.5,k,l,h,g,g);a.lineTo(h.x*b,h.y*c);S(a,l.x*b,l.y*c,k.x*b,k.y*c,(.5-e)*b,.5*c);S(a,(.5-e)*b,(.5+d)*c,(.5-d)*b,(.5+e)*c,.5*b,(.5+e)*c);S(a,(.5+d)*b,(.5+e)*c,(.5+e)*b,(.5+d)*c,(.5+
e)*b,.5*c);xe(.5,.5-e,.5+d,.5-e,.5+e,.5-d,.5+e,.5,.5,g,g,h,k,l);S(a,l.x*b,l.y*c,k.x*b,k.y*c,h.x*b,h.y*c);T(a);R(a,.45*b,0,!0);a.lineTo(.45*b,.5*c);a.lineTo(.55*b,.5*c);a.lineTo(.55*b,0);T(a);z.A(g);z.A(h);z.A(k);z.A(l);z.A(m);b=a.q;b.C=new Q(.25,.55);b.D=new Q(.75,.8);z.u(a);return b},Fallout:function(a,b,c){a=z.v();var d=.5*Hd;R(a,0*b,.5*c,!0);S(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);S(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,
.5*c);var e=d=0;R(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.4;e=0;T(a);R(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.2;e=-.3;T(a);R(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);T(a);b=a.q;b.Xd=dj;z.u(a);return b},IrritationHazard:function(a,b,c){a=z.v();R(a,.2*b,0*c,!0);a.lineTo(.5*b,.3*c);a.lineTo(.8*
b,0*c);a.lineTo(1*b,.2*c);a.lineTo(.7*b,.5*c);a.lineTo(1*b,.8*c);a.lineTo(.8*b,1*c);a.lineTo(.5*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0*b,.8*c);a.lineTo(.3*b,.5*c);a.lineTo(0*b,.2*c);T(a);b=a.q;b.C=new Q(.3,.3);b.D=new Q(.7,.7);z.u(a);return b},ElectricalHazard:function(a,b,c){a=z.v();R(a,.37*b,0*c,!0);a.lineTo(.5*b,.11*c);a.lineTo(.77*b,.04*c);a.lineTo(.33*b,.49*c);a.lineTo(1*b,.37*c);a.lineTo(.63*b,.86*c);a.lineTo(.77*b,.91*c);a.lineTo(.34*b,1*c);a.lineTo(.34*b,.78*c);a.lineTo(.44*b,.8*c);a.lineTo(.65*
b,.56*c);a.lineTo(0*b,.68*c);T(a);b=a.q;z.u(a);return b},FireHazard:function(a,b,c){a=z.v();R(a,.1*b,1*c,!0);S(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c);S(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c);S(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c);S(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c);S(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c);S(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c);T(a);b=a.q;b.C=new Q(.05,.645);b.D=new Q(.884,.908);z.u(a);return b},BpmnActivityLoop:function(a,b,c){a=z.v();var d=4*(Math.SQRT2-1)/3*.5;R(a,.65*b,1*c,
!1);S(a,(1-d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);S(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c);S(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);S(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c);a.moveTo(.25*b,.8*c);a.lineTo(.35*b,1*c);a.lineTo(.1*b,1*c);b=a.q;z.u(a);return b},BpmnActivityParallel:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},BpmnActivitySequential:function(a,b,c){a=z.v();R(a,0,0,!1);a.lineTo(1*
b,0);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.q;z.u(a);return b},BpmnActivityAdHoc:function(a,b,c){a=z.v();R(a,0,0,!1);R(a,1*b,1*c,!1);R(a,0,.5*c,!1);S(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c);S(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c);b=a.q;z.u(a);return b},BpmnActivityCompensation:function(a,b,c){a=z.v();R(a,0,.5*c,!0);a.lineTo(.5*b,0);a.lineTo(.5*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);a.lineTo(.5*b,1*c);T(a);b=a.q;z.u(a);return b},BpmnTaskMessage:function(a,
b,c){a=z.v();R(a,0,.2*c,!0);a.lineTo(1*b,.2*c);a.lineTo(1*b,.8*c);a.lineTo(0,.8*c);a.lineTo(0,.8*c);T(a);R(a,0,.2*c,!1);a.lineTo(.5*b,.5*c);a.lineTo(1*b,.2*c);a.fb(!1);b=a.q;z.u(a);return b},BpmnTaskScript:function(a,b,c){a=z.v();R(a,.7*b,1*c,!0);a.lineTo(.3*b,1*c);S(a,.6*b,.5*c,0,.5*c,.3*b,0);a.lineTo(.7*b,0);S(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c);T(a);R(a,.45*b,.73*c,!1);a.lineTo(.7*b,.73*c);a.moveTo(.38*b,.5*c);a.lineTo(.63*b,.5*c);a.moveTo(.31*b,.27*c);a.lineTo(.56*b,.27*c);a.fb(!1);b=a.q;z.u(a);return b},
BpmnTaskUser:function(a,b,c){a=z.v();R(a,0,0,!1);R(a,.335*b,(1-.555)*c,!0);a.lineTo(.335*b,.595*c);a.lineTo(.665*b,.595*c);a.lineTo(.665*b,(1-.555)*c);S(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.68*c);S(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c);a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;S(a,(.5-(e+d)/2)*b,(d+(d+g)/2)*c,(.5-d)*b,(d+g)*c,(.5-d)*b,d*c);S(a,(.5-d)*b,(d-g)*c,(.5-e)*b,(d-d)*c,.5*b,(d-d)*c);
S(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-g)*c,(.5+d)*b,d*c);S(a,(.5+d)*b,(d+g)*c,(.5+(e+d)/2)*b,(d+(d+g)/2)*c,.635*b,.405*c);a.lineTo(.635*b,.405*c);a.lineTo(.665*b,(1-.555)*c);a.lineTo(.665*b,.595*c);a.lineTo(.335*b,.595*c);R(a,.2*b,1*c,!1);a.lineTo(.2*b,.8*c);R(a,.8*b,1*c,!1);a.lineTo(.8*b,.8*c);b=a.q;z.u(a);return b},BpmnEventConditional:function(a,b,c){a=z.v();R(a,.1*b,0,!0);a.lineTo(.9*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);T(a);R(a,.2*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.moveTo(.2*b,.4*c);a.lineTo(.8*
b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.2*b,.8*c);a.lineTo(.8*b,.8*c);a.fb(!1);b=a.q;z.u(a);return b},BpmnEventError:function(a,b,c){a=z.v();R(a,0,1*c,!0);a.lineTo(.33*b,0);a.lineTo(.66*b,.5*c);a.lineTo(1*b,0);a.lineTo(.66*b,1*c);a.lineTo(.33*b,.5*c);T(a);b=a.q;z.u(a);return b},BpmnEventEscalation:function(a,b,c){a=z.v();R(a,0,0,!1);R(a,1*b,1*c,!1);R(a,.1*b,1*c,!0);a.lineTo(.5*b,0);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.5*c);T(a);b=a.q;z.u(a);return b},BpmnEventTimer:function(a,b,c){a=
z.v();var d=.5*Hd;R(a,1*b,.5*c,!0);S(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);S(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);S(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);S(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);R(a,.5*b,0,!1);a.lineTo(.5*b,.15*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,.85*c);a.moveTo(0,.5*c);a.lineTo(.15*b,.5*c);a.moveTo(1*b,.5*c);a.lineTo(.85*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.58*b,.1*c);a.moveTo(.5*b,.5*c);a.lineTo(.78*b,.54*c);a.fb(!1);b=a.q;b.Xd=dj;z.u(a);return b}},ip;for(ip in wo)wo[ip.toLowerCase()]=ip;
var jp={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",
BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};
function Ao(a){if(null!==jp){for(var b in jp){var c=sf(jp[b],!1);ke[b]=c;b.toLowerCase()!==b&&(ke[b.toLowerCase()]=b)}jp=null}b=ke[a];if(void 0===b){b=a.toLowerCase();if("none"===b)return"None";b=ke[b]}return"string"===typeof b?b:b instanceof hf?a:null}
function D(a){0===arguments.length?I.call(this):I.call(this,a);this.U=311807;this.dl=this.ti="";this.ss=this.ps=this.Cs=this.xr=null;this.Es="";this.Xg=this.Ds=this.Gm=null;this.rs="";this.Ho=null;this.qs=fe;this.ts="";this.Io=null;this.xe="";this.Gv=this.Aq=this.Pk=null;this.Li=(new N(NaN,NaN)).freeze();this.Cr="";this.hl=null;this.Dr=Zb;this.Mr=Nd;this.Fr=Od;this.Tq=null;this.yr=kp;this.Im=Md;this.Hm="gray";this.Ag=4;this.AC=-1;this.et=NaN;this.nG=new w;this.jl=null;this.Rj=NaN}z.Ra(D,I);
z.ia("Part",D);D.prototype.cloneProtected=function(a){I.prototype.cloneProtected.call(this,a);a.U=this.U&-4097|49152;a.ti=this.ti;a.dl=this.dl;a.xr=this.xr;a.Cs=this.Cs;a.ps=this.ps;a.ss=this.ss;a.Es=this.Es;a.Ds=this.Ds;a.Xg=null;a.rs=this.rs;a.qs=this.qs.V();a.ts=this.ts;a.xe=this.xe;a.Aq=this.Aq;a.Li.assign(this.Li);a.Cr=this.Cr;a.Dr=this.Dr.V();a.Mr=this.Mr.V();a.Fr=this.Fr.V();a.Tq=this.Tq;a.yr=this.yr;a.Im=this.Im.V();a.Hm=this.Hm;a.Ag=this.Ag;a.et=this.et};
D.prototype.ki=function(a){I.prototype.ki.call(this,a);a.Nl();a.Gm=null;a.Ho=null;a.Io=null;a.hl=null;a.jl=null};D.prototype.toString=function(){var a=z.kf(Object.getPrototypeOf(this))+"#"+z.nd(this);null!==this.data&&(a+="("+ka(this.data)+")");return a};D.LayoutNone=0;var vl;D.LayoutAdded=vl=1;var Dl;D.LayoutRemoved=Dl=2;D.LayoutShown=4;D.LayoutHidden=8;D.LayoutNodeSized=16;var gm;D.LayoutGroupLayout=gm=32;D.LayoutNodeReplaced=64;var kp;D.LayoutStandard=kp=vl|Dl|28|gm|64;D.LayoutAll=16777215;
D.prototype.sn=function(a,b,c,d,e,g,h){var k=this.h;null!==k&&(a===Wf&&"elements"===b?e instanceof I?wl(e,function(a){yl(k,a);xl(k,a)}):e instanceof wk&&Tl(k,e):a===Xf&&"elements"===b&&(e instanceof I?wl(e,function(a){Cl(k,a);Bl(k,a)}):e instanceof wk&&Ul(k,e)),k.Rc(a,b,c,d,e,g,h))};D.prototype.updateTargetBindings=D.prototype.Mb=function(a){I.prototype.Mb.call(this,a);if(null!==this.data){a=this.va.o;for(var b=a.length,c=0;c<b;c++){var d=a[c];d instanceof I&&wl(d,function(a){null!==a.data&&a.Mb()})}}};
D.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.h;if(null!==b){var c=b.ha;if(c instanceof V){var d=c.en(a),b=b.GH(d),e=this.Qa;b!==e&&(b=null!==e?c.pb(e.data):void 0,e=c.Pp,"function"===typeof e?e(a,b):a[e]=b,c.Nx(a,d))}}}};z.w(D,{Ew:"adornments"},function(){return null===this.Xg?Pa:this.Xg.UE});D.prototype.findAdornment=D.prototype.kp=function(a){u&&z.g(a,"string",D,"findAdornment:category");var b=this.Xg;return null===b?null:b.na(a)};
D.prototype.addAdornment=D.prototype.rl=function(a,b){if(null!==b){u&&(z.g(a,"string",D,"addAdornment:category"),z.l(b,da,D,"addAdornment:ad"));var c=null,d=this.Xg;null!==d&&(c=d.na(a));if(c!==b){if(null!==c){var e=c.h;null!==e&&e.remove(c)}null===d&&(this.Xg=d=new na("string",da));b.ti!==a&&(b.nc=a);d.add(a,b);c=this.h;null!==c&&(c.add(b),b.data=this.data)}}};
D.prototype.removeAdornment=D.prototype.sj=function(a){u&&z.g(a,"string",D,"removeAdornment:category");var b=this.Xg;if(null!==b){var c=b.na(a);if(null!==c){var d=c.h;null!==d&&d.remove(c)}b.remove(a);0===b.count&&(this.Xg=null)}};D.prototype.clearAdornments=D.prototype.pt=function(){var a=this.Xg;if(null!==a){for(var b=z.rb(),a=a.i;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.sj(b[c]);z.xa(b)}};
D.prototype.updateAdornments=function(){var a=this.h;if(null!==a){a:{if(this.jb&&this.FF){var b=this.un;if(!(null!==b&&this.W.F()&&this.isVisible()&&b.oj()&&b.W.F()))break a;var c=this.kp("Selection");if(null===c){c=this.fJ;null===c&&(c=this instanceof G?a.vI:this instanceof F?a.SH:a.LI);if(!(c instanceof da))break a;jh(c);c=c.copy();null!==c&&(c.nc="Selection",c.fc=b)}if(null!==c){var d=c.placeholder;if(null!==d){var e=b.hj(),g=0;b instanceof X&&(g=b.ub);var h=z.Xl();h.n((b.Ga.width+g)*e,(b.Ga.height+
g)*e);d.Aa=h;z.qk(h)}c.angle=b.Kl();c.type!==Ni&&(d=z.O(),c.location=b.eb(Zb,d),z.A(d));this.rl("Selection",c);break a}}this.sj("Selection")}lp(this,a);for(a=this.Ew;a.next();)b=a.value,b.Mb(),b.Q()}};function lp(a,b){b.gb.Ye.each(function(b){b.isEnabled&&b.updateAdornments(a)});b.gb.updateAdornments(a)}z.w(D,{layer:"layer"},function(){return this.Gv});z.w(D,{h:"diagram"},function(){var a=this.Gv;return null!==a?a.h:null});
z.defineProperty(D,{If:"layerName"},function(){return this.dl},function(a){var b=this.dl;if(b!==a){z.g(a,"string",D,"layerName");var c=this.h;if(null===c||null!==c.Gl(a)&&!c.lq)if(this.dl=a,null!==c&&c.yc(),this.j("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.h,null!==c&&(a=c.Gl(a),null!==a&&a!==b))){var d=b.Ve(-1,this,!0);0<=d&&c.Rc(Xf,"parts",b,this,null,d,!0);b.visible!==a.visible&&this.xd(a.visible);d=a.xp(99999999,this,!0);0<=d&&c.Rc(Wf,"parts",a,null,this,!0,d);d=this.Ut;if(null!==
d){var e=c.$a;c.$a=!0;d(this,b,a);c.$a=e}}}});z.defineProperty(D,{Ut:"layerChanged"},function(){return this.xr},function(a){var b=this.xr;b!==a&&(null!==a&&z.g(a,"function",D,"layerChanged"),this.xr=a,this.j("layerChanged",b,a))});z.defineProperty(D,{Dn:"zOrder"},function(){return this.et},function(a){var b=this.et;if(b!==a){z.g(a,"number",D,"zOrder");this.et=a;var c=this.layer;null!==c&&nk(c,-1,this);this.j("zOrder",b,a);a=this.h;null!==a&&a.ta()}});
D.prototype.invalidateAdornments=D.prototype.ae=function(){var a=this.h;null!==a&&(Jk(a),0!==(this.U&16384)!==!0&&(this.U|=16384,a.Ce()))};function jk(a){0!==(a.U&16384)!==!1&&(a.updateAdornments(),a.U&=-16385)}function cn(a){if(!1===ol(a)){var b=a.h;null!==b&&(b.rg.add(a),a instanceof E&&!b.pa.qb&&a.mf(),b.Ce());mp(a,!0);a.Gi()}}function np(a){if(!1!==ol(a)){var b=a.position,c=a.location;c.F()&&b.F()||op(a,b,c);var c=a.Xb,d=c.copy();c.Wa();c.x=b.x;c.y=b.y;c.freeze();a.xx(d,c);mp(a,!1)}}
z.w(D,{Zb:"locationObject"},function(){if(null===this.hl){var a=this.ux;""!==a?(a=this.oe(a),this.hl=null!==a?a:this):this.hl=this instanceof da?this.type!==Ni&&null!==this.placeholder?this.placeholder:this:this}return this.hl.visible?this.hl:this});z.defineProperty(D,{FI:"minLocation"},function(){return this.Mr},function(a){var b=this.Mr;b.N(a)||(u&&z.l(a,N,D,"minLocation"),this.Mr=a=a.V(),this.j("minLocation",b,a))});
z.defineProperty(D,{AI:"maxLocation"},function(){return this.Fr},function(a){var b=this.Fr;b.N(a)||(u&&z.l(a,N,D,"maxLocation"),this.Fr=a=a.V(),this.j("maxLocation",b,a))});z.defineProperty(D,{ux:"locationObjectName"},function(){return this.Cr},function(a){var b=this.Cr;b!==a&&(u&&z.g(a,"string",D,"locationObjectName"),this.Cr=a,this.hl=null,Ym(this),this.j("locationObjectName",b,a))});
z.defineProperty(D,{of:"locationSpot"},function(){return this.Dr},function(a){var b=this.Dr;b.N(a)||(u&&(z.l(a,Q,D,"locationSpot"),a.cd()||z.k("Part.locationSpot must be a specific Spot value, not: "+a)),this.Dr=a=a.V(),Ym(this),this.j("locationSpot",b,a))});D.prototype.move=function(a){this.position=a};D.prototype.moveTo=D.prototype.moveTo=function(a,b){var c=z.Tb(a,b);this.move(c);z.A(c)};
D.prototype.isVisible=function(){if(!this.visible)return!1;var a=this.layer;if(null!==a&&!a.visible)return!1;a=this.h;if(null!==a&&(a=a.Va,a.nf&&(a=a.xm.na(this),null!==a&&a.Ex)))return!0;a=this.Qa;return null===a||a.se&&a.isVisible()?!0:!1};D.prototype.xd=function(a){var b=this.h;a?(this.I(4),this.ae(),null!==b&&b.rg.add(this)):(this.I(8),this.pt());this.Nl();null!==b&&(b.yc(),b.ta())};
D.prototype.findObject=D.prototype.oe=function(a){if(this.name===a)return this;var b=this.jl;null===b&&(this.jl=b=new ma);if(void 0!==b[a])return b[a];for(var c=this.va.o,d=c.length,e=0;e<d;e++){var g=c[e];if(g.name===a)return b[a]=g;if(g instanceof I)if(null===g.Ji&&null===g.tg){if(g=g.oe(a),null!==g)return b[a]=g}else if(Rl(g)&&(g=g.va.first(),null!==g&&g.name===a))return b[a]=g}return b[a]=null};
function pp(a,b,c,d){void 0===d&&(d=new N);c=c.Be()?ec:c;var e=b.Ga;d.n(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(null===b||b===a)return d;b.transform.Cb(d);for(b=b.T;null!==b&&b!==a;)b.transform.Cb(d),b=b.T;a.gl.Cb(d);d.offset(-a.vd.x,-a.vd.y);return d}D.prototype.ensureBounds=D.prototype.Bf=function(){tj(this,Infinity,Infinity);this.Lc()};
function mk(a,b){var c=a.nG,d;isNaN(a.Rj)&&(a.Rj=no(a));d=a.Rj;var e=2*d;if(!a.tk)return c.n(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,g=b.width,h=b.height,k=a.shadowBlur,l=a.kJ,g=g+k,h=h+k;d-=k/2;e-=k/2;0<l.x?g+=l.x:(d+=l.x,g-=l.x);0<l.y?h+=l.y:(e+=l.y,h-=l.y);c.n(d-1,e-1,g+2,h+2);return c}
D.prototype.Lc=function(){this.Gi();if(!1===nl(this))np(this);else{var a=this.Xb,b=z.lg();b.assign(a);a.Wa();var c=ik(this);this.aj(0,0,this.vd.width,this.vd.height);var d=this.position;op(this,d,this.location);a.x=d.x;a.y=d.y;a.freeze();this.xx(b,a);Om(this,!1);b.N(a)?this.Jf(c):!this.be()||eb(b.width,a.width)&&eb(b.height,a.height)||0<=this.AC&&this.I(16);z.dc(b);mp(this,!1)}};
D.prototype.xx=function(a,b){var c=this.h;if(null!==c){var d=!1;if(!1===c.Jj&&a.F()){var e=c.ad,g=c.padding,h=e.x+g.left,k=e.y+g.top,l=e.width-2*g.right,e=e.height-2*g.bottom;a.x>h&&a.y>k&&a.right<l&&a.bottom<e&&b.x>h&&b.y>k&&b.right<l&&b.bottom<e&&(d=!0)}0!==(this.U&65536)!==!0&&a.N(b)||zl(this,d,c);c.ta();a.N(b)||this.Nl()}};
z.defineProperty(D,{location:"location"},function(){return this.Li},function(a){var b=this.Li;if(!b.N(a)){u&&z.l(a,N,D,"location");a=a.V();var c;c=a;if(this instanceof G)c=!1;else{this.Li=c;if(!1===nl(this)){cn(this);var d=this.sb;if(d.F()){var e=d.copy();d.n(d.x+(c.x-b.x),d.y+(c.y-b.y));qp(this,this.h,d,e);this.j("position",e,d)}}c=!0}c&&this.j("location",b,a)}});
D.prototype.RA=function(a,b){if(this instanceof G||!a.F())return!1;var c=this.h;if(null!==c&&(qp(this,c,a,b),!0===c.pa.qb))return!0;this.sb=a;c=this.Li;if(c.F()){var d=c.copy();c.n(c.x+(a.x-b.x),c.y+(a.y-b.y));this.j("location",d,c)}!1===ol(this)&&!1===nl(this)&&(cn(this),np(this));return!0};function qp(a,b,c,d){null===b||a instanceof da||(b=b.Va,b.wc&&Wj(b,a,"position",d.copy(),c.copy(),!1))}
D.prototype.Px=function(a,b){var c=this.Li,d=this.sb;ol(this)||nl(this)?c.n(NaN,NaN):c.n(c.x+a-d.x,c.y+b-d.y);d.n(a,b);cn(this)};
function op(a,b,c){var d=z.O(),e=a.of,g=a.Zb;e.Be()&&z.k("determineOffset: Part's locationSpot must be real: "+e.toString());var h=g.Ga,k=g instanceof X?g.ub:0;d.tu(0,0,h.width+k,h.height+k,e);if(g!==a)for(d.offset(-k/2,-k/2),g.transform.Cb(d),e=g.T;null!==e&&e!==a;)e.transform.Cb(d),e=e.T;a.gl.Cb(d);d.offset(-a.vd.x,-a.vd.y);e=a.h;c.F()?(g=b.x,h=b.y,b.n(c.x-d.x,c.y-d.y),null!==e&&(c=e.Va,(k=c.Kj)||!c.wc||a instanceof da||Wj(c,a,"position",new N(g,h),b,!1),k||b.x===g&&b.y===h||(k=e.Bb,e.Bb=!0,a.j("position",
new N(g,h),b),e.Bb=k))):b.F()&&(g=c.copy(),c.n(b.x+d.x,b.y+d.y),c.N(g)||null===e||(k=e.Bb,e.Bb=!0,a.j("location",g,c),e.Bb=k));z.A(d);a.Gi()}function zl(a,b,c){Pm(a,!1);a instanceof E&&nm(c,a);a.layer.Nc||b||c.yc();b=a.Xb;var d=c.xb;d.F()?(ik(a)?Gb(b,d)||a.Jf(!1):b.Jg(d)&&a.Jf(!0),a.updateAdornments()):c.Zk=!0}D.prototype.Ql=function(){return!0};
function kk(a,b){var c=a.Xb;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)&&a.isVisible()){var d=a.transform;null!==a.uc&&(Um(a,b,a.uc,!0,!0),b.fillRect(c.x,c.y,c.width,c.height));null===a.uc&&null===a.Nb&&(Um(a,b,"rgba(0,0,0,0.4)",!0,!1),b.fillRect(c.x,c.y,c.width,c.height));null!==a.Nb&&(d.Pt()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),c=a.Ga,Um(a,b,a.Nb,!0,!1),b.fillRect(0,0,c.width,c.height),d.Pt()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*
d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}D.prototype.be=function(){return!0};
z.defineProperty(D,{nc:"category"},function(){return this.ti},function(a){var b=this.ti;if(b!==a){z.g(a,"string",D,"category");var c=this.h,d=this.data,e=null;if(null!==c&&null!==d&&!(this instanceof da)){var g=c.ha.pa;g.isEnabled&&!g.qb&&(e=this.clone(),e.va.$c(this.va))}this.ti=a;this.j("category",b,a);null===c||null===d||this instanceof da?(e=this.Xf,null!==e&&(a=e.Xg,null!==a&&a.remove(b),e.rl(this.nc,this))):(g=c.ha,g.pa.qb||(this instanceof G?(g instanceof V?g.HF(d,a):g instanceof qg&&g.iJ(d,
a),c=am(c,a),null!==c&&(jh(c),c=c.copy(),null!==c&&rp(this,c,b,a))):(null!==g&&g.Lx(d,a),c=Yl(c,d,a),null!==c&&(jh(c),c=c.copy(),null===c||c instanceof G||(c.location=this.location,rp(this,c,b,a)))),null!==e&&(b=this.clone(),b.va.$c(this.va),this.j("self",e,b))))}});z.defineProperty(D,{self:"self"},function(){return this},function(a){rp(this,a,this.nc,a.nc)});var sp=!1;
function rp(a,b,c,d){b.constructor===a.constructor||sp||(sp=!0,z.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),z.trace("  Old class: "+z.kf(a)+", new class: "+z.kf(b)+", part: "+a.toString()));a.pt();var e=a.data;c=a.If;var g=a.jb,h=a.yh,k=!0,l=!0,m=!1;if(a instanceof E)var n=a,k=n.nj,l=n.wd,m=n.Cu;b.ki(a);b.cloneProtected(a);a.ti=d;a.Q();a.ta();b=a.h;d=!0;null!==b&&(d=b.Bb,b.Bb=!0);a.fe=e;null!==e&&a.Mb();null!==b&&(b.Bb=d);e=a.If;e!==c&&(a.dl=c,
a.If=e);a instanceof E&&(n=a,n.nj=k,n.wd=l,n.Cu=m,n.be()&&n.I(64));a.jb=g;a.yh=h}D.prototype.canCopy=function(){if(!this.ZD)return!1;var a=this.layer;if(null===a)return!0;if(!a.lk)return!1;a=a.h;return null===a?!0:a.lk?!0:!1};D.prototype.canDelete=function(){if(!this.cE)return!1;var a=this.layer;if(null===a)return!0;if(!a.Rm)return!1;a=a.h;return null===a?!0:a.Rm?!0:!1};
D.prototype.canEdit=function(){if(!this.QF)return!1;var a=this.layer;if(null===a)return!0;if(!a.Iw)return!1;a=a.h;return null===a?!0:a.Iw?!0:!1};D.prototype.canGroup=function(){if(!this.BE)return!1;var a=this.layer;if(null===a)return!0;if(!a.Fw)return!1;a=a.h;return null===a?!0:a.Fw?!0:!1};D.prototype.canMove=function(){if(!this.cF)return!1;var a=this.layer;if(null===a)return!0;if(!a.vl)return!1;a=a.h;return null===a?!0:a.vl?!0:!1};
D.prototype.canReshape=function(){if(!this.rF)return!1;var a=this.layer;if(null===a)return!0;if(!a.Gw)return!1;a=a.h;return null===a?!0:a.Gw?!0:!1};D.prototype.canResize=function(){if(!this.sF)return!1;var a=this.layer;if(null===a)return!0;if(!a.mt)return!1;a=a.h;return null===a?!0:a.mt?!0:!1};D.prototype.canRotate=function(){if(!this.xF)return!1;var a=this.layer;if(null===a)return!0;if(!a.Hw)return!1;a=a.h;return null===a?!0:a.Hw?!0:!1};
D.prototype.canSelect=function(){if(!this.wk)return!1;var a=this.layer;if(null===a)return!0;if(!a.xf)return!1;a=a.h;return null===a?!0:a.xf?!0:!1};z.defineProperty(D,{ZD:"copyable"},function(){return 0!==(this.U&1)},function(a){var b=0!==(this.U&1);b!==a&&(u&&z.g(a,"boolean",D,"copyable"),this.U^=1,this.j("copyable",b,a))});
z.defineProperty(D,{cE:"deletable"},function(){return 0!==(this.U&2)},function(a){var b=0!==(this.U&2);b!==a&&(u&&z.g(a,"boolean",D,"deletable"),this.U^=2,this.j("deletable",b,a))});z.defineProperty(D,{QF:"textEditable"},function(){return 0!==(this.U&4)},function(a){var b=0!==(this.U&4);b!==a&&(u&&z.g(a,"boolean",D,"textEditable"),this.U^=4,this.j("textEditable",b,a),this.ae())});
z.defineProperty(D,{BE:"groupable"},function(){return 0!==(this.U&8)},function(a){var b=0!==(this.U&8);b!==a&&(u&&z.g(a,"boolean",D,"groupable"),this.U^=8,this.j("groupable",b,a))});z.defineProperty(D,{cF:"movable"},function(){return 0!==(this.U&16)},function(a){var b=0!==(this.U&16);b!==a&&(u&&z.g(a,"boolean",D,"movable"),this.U^=16,this.j("movable",b,a))});
z.defineProperty(D,{FF:"selectionAdorned"},function(){return 0!==(this.U&32)},function(a){var b=0!==(this.U&32);b!==a&&(u&&z.g(a,"boolean",D,"selectionAdorned"),this.U^=32,this.j("selectionAdorned",b,a),this.ae())});z.defineProperty(D,{lx:"isInDocumentBounds"},function(){return 0!==(this.U&64)},function(a){var b=0!==(this.U&64);if(b!==a){u&&z.g(a,"boolean",D,"isInDocumentBounds");this.U^=64;var c=this.h;null!==c&&c.yc();this.j("isInDocumentBounds",b,a)}});
z.defineProperty(D,{jA:"isLayoutPositioned"},function(){return 0!==(this.U&128)},function(a){var b=0!==(this.U&128);b!==a&&(u&&z.g(a,"boolean",D,"isLayoutPositioned"),this.U^=128,this.j("isLayoutPositioned",b,a),this.I(a?4:8))});z.defineProperty(D,{wk:"selectable"},function(){return 0!==(this.U&256)},function(a){var b=0!==(this.U&256);b!==a&&(u&&z.g(a,"boolean",D,"selectable"),this.U^=256,this.j("selectable",b,a),this.ae())});
z.defineProperty(D,{rF:"reshapable"},function(){return 0!==(this.U&512)},function(a){var b=0!==(this.U&512);b!==a&&(u&&z.g(a,"boolean",D,"reshapable"),this.U^=512,this.j("reshapable",b,a),this.ae())});z.defineProperty(D,{sF:"resizable"},function(){return 0!==(this.U&1024)},function(a){var b=0!==(this.U&1024);b!==a&&(u&&z.g(a,"boolean",D,"resizable"),this.U^=1024,this.j("resizable",b,a),this.ae())});
z.defineProperty(D,{xF:"rotatable"},function(){return 0!==(this.U&2048)},function(a){var b=0!==(this.U&2048);b!==a&&(u&&z.g(a,"boolean",D,"rotatable"),this.U^=2048,this.j("rotatable",b,a),this.ae())});
z.defineProperty(D,{jb:"isSelected"},function(){return 0!==(this.U&4096)},function(a){var b=0!==(this.U&4096);if(b!==a){u&&z.g(a,"boolean",D,"isSelected");var c=this.h;if(!a||this.canSelect()&&!(null!==c&&c.selection.count>=c.BI)){this.U^=4096;var d=!1;if(null!==c){d=c.Bb;c.Bb=!0;var e=c.selection;e.Wa();a?e.add(this):e.remove(this);e.freeze()}this.j("isSelected",b,a);this.ae();a=this.gJ;null!==a&&a(this);null!==c&&(c.Ce(),c.Bb=d)}}});
z.defineProperty(D,{yh:"isHighlighted"},function(){return 0!==(this.U&524288)},function(a){var b=0!==(this.U&524288);if(b!==a){u&&z.g(a,"boolean",D,"isHighlighted");this.U^=524288;var c=this.h;null!==c&&(c=c.gn,c.Wa(),a?c.add(this):c.remove(this),c.freeze());this.j("isHighlighted",b,a);this.ta()}});z.defineProperty(D,{tk:"isShadowed"},function(){return 0!==(this.U&8192)},function(a){var b=0!==(this.U&8192);b!==a&&(u&&z.g(a,"boolean",D,"isShadowed"),this.U^=8192,this.j("isShadowed",b,a),this.ta())});
function ol(a){return 0!==(a.U&32768)}function mp(a,b){a.U=b?a.U|32768:a.U&-32769}function Pm(a,b){a.U=b?a.U|65536:a.U&-65537}function ik(a){return 0!==(a.U&131072)}D.prototype.Jf=function(a){this.U=a?this.U|131072:this.U&-131073};function tp(a,b){a.U=b?a.U|1048576:a.U&-1048577}z.defineProperty(D,{HE:"isAnimated"},function(){return 0!==(this.U&262144)},function(a){var b=0!==(this.U&262144);b!==a&&(u&&z.g(a,"boolean",D,"isAnimated"),this.U^=262144,this.j("isAnimated",b,a))});
z.defineProperty(D,{Kx:"selectionObjectName"},function(){return this.Es},function(a){var b=this.Es;b!==a&&(u&&z.g(a,"string",D,"selectionObjectName"),this.Es=a,this.Gm=null,this.j("selectionObjectName",b,a))});z.defineProperty(D,{fJ:"selectionAdornmentTemplate"},function(){return this.Cs},function(a){var b=this.Cs;b!==a&&(u&&z.l(a,da,D,"selectionAdornmentTemplate"),this instanceof G&&(a.type=Ni),this.Cs=a,this.j("selectionAdornmentTemplate",b,a))});
z.w(D,{un:"selectionObject"},function(){if(null===this.Gm){var a=this.Kx;null!==a&&""!==a?(a=this.oe(a),this.Gm=null!==a?a:this):this instanceof G?(a=this.path,this.Gm=null!==a?a:this):this.Gm=this}return this.Gm});z.defineProperty(D,{gJ:"selectionChanged"},function(){return this.Ds},function(a){var b=this.Ds;b!==a&&(null!==a&&z.g(a,"function",D,"selectionChanged"),this.Ds=a,this.j("selectionChanged",b,a))});
z.defineProperty(D,{tF:"resizeAdornmentTemplate"},function(){return this.ps},function(a){var b=this.ps;b!==a&&(u&&z.l(a,da,D,"resizeAdornmentTemplate"),this.ps=a,this.j("resizeAdornmentTemplate",b,a))});z.defineProperty(D,{vF:"resizeObjectName"},function(){return this.rs},function(a){var b=this.rs;b!==a&&(u&&z.g(a,"string",D,"resizeObjectName"),this.rs=a,this.Ho=null,this.j("resizeObjectName",b,a))});
z.w(D,{uF:"resizeObject"},function(){if(null===this.Ho){var a=this.vF;null!==a&&""!==a?(a=this.oe(a),this.Ho=null!==a?a:this):this.Ho=this}return this.Ho});z.defineProperty(D,{YI:"resizeCellSize"},function(){return this.qs},function(a){var b=this.qs;b.N(a)||(u&&z.l(a,Ea,D,"resizeCellSize"),this.qs=a=a.V(),this.j("resizeCellSize",b,a))});
z.defineProperty(D,{$I:"rotateAdornmentTemplate"},function(){return this.ss},function(a){var b=this.ss;b!==a&&(u&&z.l(a,da,D,"rotateAdornmentTemplate"),this.ss=a,this.j("rotateAdornmentTemplate",b,a))});z.defineProperty(D,{aJ:"rotateObjectName"},function(){return this.ts},function(a){var b=this.ts;b!==a&&(u&&z.g(a,"string",D,"rotateObjectName"),this.ts=a,this.Io=null,this.j("rotateObjectName",b,a))});
z.w(D,{yF:"rotateObject"},function(){if(null===this.Io){var a=this.aJ;null!==a&&""!==a?(a=this.oe(a),this.Io=null!==a?a:this):this.Io=this}return this.Io});z.defineProperty(D,{text:"text"},function(){return this.xe},function(a){var b=this.xe;b!==a&&(u&&z.g(a,"string",D,"text"),this.xe=a,this.j("text",b,a))});
z.defineProperty(D,{Qa:"containingGroup"},function(){return this.Pk},function(a){if(this.be()){var b=this.Pk;if(b!==a){u&&null!==a&&z.l(a,F,D,"containingGroup");null===a||this!==a&&!a.mi(this)||(this===a&&z.k("Cannot make a Group a member of itself: "+this.toString()),z.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString()));this.I(Dl);var c=this.h;null!==b?up(b,this):this instanceof F&&null!==c&&c.pl.remove(this);this.Pk=a;null!==a?vp(a,this):this instanceof
F&&null!==c&&c.pl.add(this);this.I(vl);if(null!==c){var d=this.data,e=c.ha;null!==d&&e instanceof V&&e.Nx(d,e.pb(null!==a?a.data:null))}d=this.VD;null!==d&&(e=!0,null!==c&&(e=c.$a,c.$a=!0),d(this,b,a),null!==c&&(c.$a=e));if(this instanceof F)for(c=new K(D),hh(c,this,!0,0,!0),c=c.i;c.next();)if(d=c.value,d instanceof E)for(d=d.ee;d.next();)Wl(d.value);if(this instanceof E)for(d=this.ee;d.next();)Wl(d.value);this.j("containingGroup",b,a);null!==a&&(b=a.layer,null!==b&&nk(b,-1,a))}}else z.k("cannot set the Part.containingGroup of a Link or Adornment")});
f=D.prototype;f.Nl=function(){var a=this.Qa;null!==a&&(a.Q(),null!==a.Lb&&a.Lb.Q(),a.mf())};f.ta=function(){var a=this.h;null!==a&&!nl(this)&&!ol(this)&&this.isVisible()&&this.Xb.F()&&a.ta(mk(this,this.Xb))};f.Kt=function(a){a||(a=this.Pk,null!==a&&vp(a,this))};f.Lt=function(a){a||(a=this.Pk,null!==a&&up(a,this))};f.bn=function(){var a=this.data;if(null!==a){var b=this.h;null!==b&&(b=b.ha,null!==b&&b.Gx(a))}};
z.defineProperty(D,{VD:"containingGroupChanged"},function(){return this.Aq},function(a){var b=this.Aq;b!==a&&(null!==a&&z.g(a,"function",D,"containingGroupChanged"),this.Aq=a,this.j("containingGroupChanged",b,a))});D.prototype.findSubGraphLevel=function(){return wp(this,this)};function wp(a,b){var c=b.Qa;return null!==c?1+wp(a,c):b instanceof E&&(c=b.od,null!==c)?wp(a,c):0}D.prototype.findTopLevelPart=function(){return xp(this,this)};
function xp(a,b){var c=b.Qa;return null!==c?xp(a,c):b instanceof E&&(c=b.od,null!==c)?xp(a,c):b}z.w(D,{Bp:"isTopLevel"},function(){return null!==this.Qa||this instanceof E&&this.Df?!1:!0});D.prototype.isMemberOf=D.prototype.mi=function(a){return a instanceof F?yp(this,this,a):!1};function yp(a,b,c){if(b===c||null===c)return!1;var d=b.Qa;return null===d||d!==c&&!yp(a,d,c)?b instanceof E&&(b=b.od,null!==b)?yp(a,b,c):!1:!0}
D.prototype.findCommonContainingGroup=D.prototype.CH=function(a){if(null===a)return null;u&&z.l(a,D,D,"findCommonContainingGroup:other");if(this===a)return this.Qa;for(var b=this;null!==b;)b instanceof F&&tp(b,!0),b=b.Qa;for(var c=null,b=a;null!==b;){if(0!==(b.U&1048576)){c=b;break}b=b.Qa}for(b=this;null!==b;)b instanceof F&&tp(b,!1),b=b.Qa;return c};
z.defineProperty(D,{qI:"layoutConditions"},function(){return this.yr},function(a){var b=this.yr;b!==a&&(u&&z.g(a,"number",D,"layoutConditions"),this.yr=a,this.j("layoutConditions",b,a))});D.prototype.canLayout=function(){if(!this.jA||!this.isVisible())return!1;var a=this.layer;return null!==a&&a.Nc||this instanceof E&&this.Df?!1:!0};
D.prototype.invalidateLayout=D.prototype.I=function(a){void 0===a&&(a=16777215);var b;this.jA&&0!==(a&this.qI)?(b=this.layer,null!==b&&b.Nc||this instanceof E&&this.Df?b=!1:(b=this.h,b=null!==b&&b.pa.qb?!1:!0)):b=!1;if(b)if(b=this.Pk,null!==b){var c=b.Sb;null!==c?c.I():b.I(a)}else a=this.h,null!==a&&(c=a.Sb,null!==c&&c.I())};function Al(a){if(!a.isVisible())return!1;a=a.layer;return null!==a&&a.Nc?!1:!0}
z.defineProperty(D,{hE:"dragComputation"},function(){return this.Tq},function(a){var b=this.Tq;b!==a&&(null!==a&&z.g(a,"function",D,"dragComputation"),this.Tq=a,this.j("dragComputation",b,a))});z.defineProperty(D,{kJ:"shadowOffset"},function(){return this.Im},function(a){var b=this.Im;b.N(a)||(u&&z.l(a,N,D,"shadowOffset"),this.Im=a=a.V(),this.ta(),this.j("shadowOffset",b,a))});
z.defineProperty(D,{shadowColor:"shadowColor"},function(){return this.Hm},function(a){var b=this.Hm;b!==a&&(u&&z.g(a,"string",D,"shadowColor"),this.Hm=a,this.ta(),this.j("shadowColor",b,a))});z.defineProperty(D,{shadowBlur:"shadowBlur"},function(){return this.Ag},function(a){var b=this.Ag;b!==a&&(u&&z.g(a,"number",D,"shadowBlur"),this.Ag=a,this.ta(),this.j("shadowBlur",b,a))});
function da(a){0===arguments.length?D.call(this,gj):D.call(this,a);this.U&=-257;this.dl="Adornment";this.Lb=this.$g=this.Ib=null}z.Ra(da,D);z.ia("Adornment",da);da.prototype.toString=function(){var a=this.Xf;return"Adornment("+this.nc+")"+(null!==a?a.toString():"")};da.prototype.updateRelationshipsFromData=function(){};
da.prototype.nn=function(a){var b=this.fc.ca,c=this.fc;if(b instanceof G&&c instanceof X){var d=b.path,c=d.wh;b.nn(a);c=d.wh;a=this.va.o;b=a.length;for(d=0;d<b;d++){var e=a[d];e.Ff&&e instanceof X&&(e.kb=c)}}};z.w(da,{placeholder:"placeholder"},function(){return this.Lb});
z.defineProperty(da,{fc:"adornedObject"},function(){return this.Ib},function(a){u&&null!==a&&z.l(a,O,D,"adornedObject:value");var b=this.Xf,c=null;null!==a&&(c=a.ca);null===b||null!==a&&b===c||b.sj(this.nc);this.Ib=a;null!==c&&c.rl(this.nc,this)});z.w(da,{Xf:"adornedPart"},function(){var a=this.Ib;return null!==a?a.ca:null});da.prototype.Ql=function(){var a=this.Ib;if(null===a)return!0;a=a.ca;return null===a||!nl(a)};da.prototype.be=function(){return!1};z.w(da,{Qa:"containingGroup"},function(){return null});
da.prototype.sn=function(a,b,c,d,e,g,h){if(a===Wf&&"elements"===b)if(e instanceof aj){var k=e;null===this.Lb?this.Lb=k:this.Lb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else e instanceof I&&(k=e.zt(function(a){return a instanceof aj}),k instanceof aj&&(null===this.Lb?this.Lb=k:this.Lb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else a===Xf&&"elements"===b&&null!==this.Lb&&(d===this.Lb?this.Lb=null:d instanceof I&&
this.Lb.Pl(d)&&(this.Lb=null));D.prototype.sn.call(this,a,b,c,d,e,g,h)};da.prototype.updateAdornments=function(){};da.prototype.bn=function(){};function E(a){0===arguments.length?D.call(this,gj):D.call(this,a);this.mc=new J(G);this.vo=this.fl=this.Ar=this.zr=null;this.rr=!0;this.bt=!1;this.Ys=null;this.sq=this.sr=!0;this.tq=Ld;this.Ed=this.Jh=null;this.hs=zp;this.ik=!1}z.Ra(E,D);z.ia("Node",E);
E.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a);a.zr=this.zr;a.Ar=this.Ar;a.fl=this.fl;a.rr=this.rr;a.bt=this.bt;a.Ys=this.Ys;a.sr=this.sr;a.sq=this.sq;a.tq=this.tq.V();a.hs=this.hs};E.prototype.ki=function(a){D.prototype.ki.call(this,a);a.mf();a.Jh=this.Jh;a.Ed=null};var Ap;E.DirectionDefault=Ap=z.s(E,"DirectionDefault",0);E.DirectionAbsolute=z.s(E,"DirectionAbsolute",1);var Bp;E.DirectionRotatedNode=Bp=z.s(E,"DirectionRotatedNode",2);var Gm;
E.DirectionRotatedNodeOrthogonal=Gm=z.s(E,"DirectionRotatedNodeOrthogonal",3);E.SpreadingNone=z.s(E,"SpreadingNone",10);var zp;E.SpreadingEvenly=zp=z.s(E,"SpreadingEvenly",11);var Cp;E.SpreadingPacked=Cp=z.s(E,"SpreadingPacked",12);function Dp(a,b){null!==b&&(null===a.Jh&&(a.Jh=new K(xk)),a.Jh.add(b))}
function Ep(a,b,c,d){if(null===b||null===a.Jh)return null;for(var e=a.Jh.i;e.next();){var g=e.value;if(g.Op===a&&g.du===b&&g.Ax===c&&g.Bx===d||g.Op===b&&g.du===a&&g.Ax===d&&g.Bx===c)return g}return null}E.prototype.invalidateLinkBundle=function(a,b,c){if(void 0===b||null===b)b="";if(void 0===c||null===c)c="";a=Ep(this,a,b,c);null!==a&&a.zp()};
E.prototype.sn=function(a,b,c,d,e,g,h){a===Wf&&"elements"===b?this.Ed=null:a===Xf&&"elements"===b&&(null===this.h?this.Ed=null:d instanceof O&&jo(this,d,function(a,b){dn(a,b,!0)}));D.prototype.sn.call(this,a,b,c,d,e,g,h)};E.prototype.invalidateConnectedLinks=E.prototype.mf=function(a){void 0===a&&(a=null);for(var b=this.ee;b.next();){var c=b.value;null!==a&&a.contains(c)||(Fp(this,c.md),Fp(this,c.Qd),c.qc())}};
function Fp(a,b){if(null!==b){var c=b.gs;null!==c&&c.zp();c=a.Qa;null===c||c.se||Fp(c,c.Hl(""))}}E.prototype.Ql=function(){return!0};z.defineProperty(E,{SI:"portSpreading"},function(){return this.hs},function(a){var b=this.hs;b!==a&&(u&&z.Ba(a,E,E,"portSpreading"),this.hs=a,this.j("portSpreading",b,a),a=this.h,null!==a&&a.pa.qb||this.mf())});
z.defineProperty(E,{ND:"avoidable"},function(){return this.sq},function(a){var b=this.sq;if(b!==a){u&&z.g(a,"boolean",E,"avoidable");this.sq=a;var c=this.h;null!==c&&nm(c,this);this.j("avoidable",b,a)}});z.defineProperty(E,{VG:"avoidableMargin"},function(){return this.tq},function(a){"number"===typeof a?a=new Db(a):z.l(a,Db,E,"avoidableMargin");var b=this.tq;if(!b.N(a)){this.tq=a=a.V();var c=this.h;null!==c&&nm(c,this);this.j("avoidableMargin",b,a)}});
E.prototype.canAvoid=function(){return this.ND&&!this.Df};E.prototype.getAvoidableRect=function(a){a.set(this.W);a.Dw(this.VG);return a};E.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.isVisible();)a=a.Qa;return a};
E.prototype.isVisible=function(){if(!D.prototype.isVisible.call(this))return!1;var a=!0,b=!0,c=this.h;if(null!==c){a=c.Va;if(a.nf&&(a=a.xm.na(this),null!==a&&a.Ex))return!0;a=c.ce;b=c.bB===tk}if(b){if(c=this.Il(),null!==c&&!c.wd)return!1}else if(c=a?this.EH():this.FH(),0<c.count&&c.all(function(a){return!a.wd}))return!1;c=this.od;return null!==c?c.isVisible():!0};E.prototype.xd=function(a){D.prototype.xd.call(this,a);for(var b=this.ee;b.next();)b.value.xd(a)};z.w(E,{ee:"linksConnected"},function(){return this.mc.i});
E.prototype.findLinksConnected=E.prototype.pE=function(a){void 0===a&&(a=null);if(null===a)return this.mc.i;u&&z.g(a,"string",E,"findLinksConnected:pid");var b=new Ta(this.mc),c=this;b.qn=function(b){return b.Y===c&&b.ag===a||b.da===c&&b.Vg===a};return b};E.prototype.findLinksOutOf=E.prototype.$w=function(a){void 0===a&&(a=null);u&&null!==a&&z.g(a,"string",E,"findLinksOutOf:pid");var b=new Ta(this.mc),c=this;b.qn=function(b){return b.Y!==c?!1:null===a?!0:b.ag===a};return b};
E.prototype.findLinksInto=E.prototype.Ig=function(a){void 0===a&&(a=null);u&&null!==a&&z.g(a,"string",E,"findLinksInto:pid");var b=new Ta(this.mc),c=this;b.qn=function(b){return b.da!==c?!1:null===a?!0:b.Vg===a};return b};
E.prototype.findNodesConnected=E.prototype.qE=function(a){void 0===a&&(a=null);u&&null!==a&&z.g(a,"string",E,"findNodesConnected:pid");for(var b=null,c=null,d=this.mc.i;d.next();){var e=d.value;if(e.Y===this){if(null===a||e.ag===a)e=e.da,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e}else e.da!==this||null!==a&&e.Vg!==a||(e=e.Y,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Ra(c):Pa};
E.prototype.findNodesOutOf=E.prototype.FH=function(a){void 0===a&&(a=null);u&&null!==a&&z.g(a,"string",E,"findNodesOutOf:pid");for(var b=null,c=null,d=this.mc.i;d.next();){var e=d.value;e.Y!==this||null!==a&&e.ag!==a||(e=e.da,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Ra(c):Pa};
E.prototype.findNodesInto=E.prototype.EH=function(a){void 0===a&&(a=null);u&&null!==a&&z.g(a,"string",E,"findNodesInto:pid");for(var b=null,c=null,d=this.mc.i;d.next();){var e=d.value;e.da!==this||null!==a&&e.Vg!==a||(e=e.Y,null!==b?b.add(e):null!==c&&c!==e?(b=new K(E),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Ra(c):Pa};
E.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);u&&(z.l(a,E,E,"findLinksBetween:othernode"),null!==b&&z.g(b,"string",E,"findLinksBetween:pid"),null!==c&&z.g(c,"string",E,"findLinksBetween:otherpid"));var d=new Ta(this.mc),e=this;d.qn=function(d){return(d.Y!==e||d.da!==a||null!==b&&d.ag!==b||null!==c&&d.Vg!==c)&&(d.Y!==a||d.da!==e||null!==c&&d.ag!==c||null!==b&&d.Vg!==b)?!1:!0};return d};
E.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);u&&(z.l(a,E,E,"findLinksTo:othernode"),null!==b&&z.g(b,"string",E,"findLinksTo:pid"),null!==c&&z.g(c,"string",E,"findLinksTo:otherpid"));var d=new Ta(this.mc),e=this;d.qn=function(d){return d.Y!==e||d.da!==a||null!==b&&d.ag!==b||null!==c&&d.Vg===c?!1:!0};return d};
z.defineProperty(E,{sI:"linkConnected"},function(){return this.zr},function(a){var b=this.zr;b!==a&&(null!==a&&z.g(a,"function",E,"linkConnected"),this.zr=a,this.j("linkConnected",b,a))});z.defineProperty(E,{tI:"linkDisconnected"},function(){return this.Ar},function(a){var b=this.Ar;b!==a&&(null!==a&&z.g(a,"function",E,"linkDisconnected"),this.Ar=a,this.j("linkDisconnected",b,a))});
z.defineProperty(E,{sx:"linkValidation"},function(){return this.fl},function(a){var b=this.fl;b!==a&&(null!==a&&z.g(a,"function",E,"linkValidation"),this.fl=a,this.j("linkValidation",b,a))});
function Gp(a,b,c){Fp(a,c);if(!a.mc.contains(b)){a.mc.add(b);var d=a.sI;if(null!==d){var e=!0,g=a.h;null!==g&&(e=g.$a,g.$a=!0);d(a,b,c);null!==g&&(g.$a=e)}b.Oc&&(c=b.Y,b=b.da,null!==c&&null!==b&&c!==b&&(d=!0,g=a.h,null!==g&&(d=g.ce),a=d?b:c,e=d?c:b,a.ik||(a.ik=e),!e.nj||null!==g&&g.pa.qb||(d?c===e&&(e.nj=!1):b===e&&(e.nj=!1))))}}
function Hp(a,b,c){Fp(a,c);if(a.mc.remove(b)){var d=a.tI,e=a.h;if(null!==d){var g=!0;null!==e&&(g=e.$a,e.$a=!0);d(a,b,c);null!==e&&(e.$a=g)}b.Oc&&(c=!0,null!==e&&(c=e.ce),a=c?b.da:b.Y,b=c?b.Y:b.da,null!==a&&(a.ik=!1),null===b||b.nj||(0===b.mc.count?(b.ik=null,null!==e&&e.pa.qb||(b.nj=!0)):hm(b)))}}
function hm(a){a.ik=!1;if(0!==a.mc.count){var b=!0,c=a.h;if(null===c||!c.pa.qb){null!==c&&(b=c.ce);for(c=a.mc.i;c.next();){var d=c.value;if(d.Oc)if(b){if(d.Y===a){a.nj=!1;return}}else if(d.da===a){a.nj=!1;return}}a.nj=!0}}}
E.prototype.updateRelationshipsFromData=function(){D.prototype.updateRelationshipsFromData.call(this);var a=this.data;if(null!==a){var b=this.h;if(null!==b){var c=b.ha;if(c instanceof qg){var d=c.fn(a),b=b.hf(d),e=this.Il();b!==e&&(b=null!==e?c.pb(e.data):void 0,e=c.Qp,"function"===typeof e?e(a,b):a[e]=b,c.Gh(a,d))}}}};E.prototype.Kt=function(a){D.prototype.Kt.call(this,a);a||(hm(this),a=this.vo,null!==a&&Ip(a,this))};
E.prototype.Lt=function(a){D.prototype.Lt.call(this,a);a||(a=this.vo,null!==a&&null!==a.Ke&&(a.Ke.remove(this),a.Q()))};E.prototype.bn=function(){if(0<this.mc.count){var a=this.h;if(null!==a)for(var b=a.wb.gE,c=this.mc.copy().i;c.next();){var d=c.value;b?a.remove(d):(d.Y===this&&(d.Y=null),d.da===this&&(d.da=null))}}this.od=null;D.prototype.bn.call(this)};z.w(E,{Df:"isLinkLabel"},function(){return null!==this.vo});
z.defineProperty(E,{od:"labeledLink"},function(){return this.vo},function(a){var b=this.vo;if(b!==a){u&&null!==a&&z.l(a,G,E,"labeledLink");var c=this.h,d=this.data;if(null!==b&&(null!==b.Ke&&(b.Ke.remove(this),b.Q()),null!==c&&null!==d&&!c.pa.qb)){var e=b.data,g=c.ha;if(null!==e&&g instanceof V){var h=g.pb(d);void 0!==h&&g.mF(e,h)}}this.vo=a;null!==a&&(Ip(a,this),null===c||null===d||c.pa.qb||(e=a.data,g=c.ha,null!==e&&g instanceof V&&(h=g.pb(d),void 0!==h&&g.Bz(e,h))));Ym(this);this.j("labeledLink",
b,a)}});E.prototype.findPort=E.prototype.Hl=function(a){u&&z.g(a,"string",E,"findPort:pid");if(null===this.Ed){if(""===a&&!1===this.Rh)return this;en(this)}var b=this.Ed.na(a);return null!==b||""!==a&&(b=this.Ed.na(""),null!==b)?b:this};z.w(E,{port:"port"},function(){return this.Hl("")});z.w(E,{ports:"ports"},function(){null===this.Ed&&en(this);return this.Ed.UE});
function en(a){null===a.Ed?a.Ed=new na("string",O):a.Ed.clear();jo(a,a,function(a,c){var d=c.zd;null!==d&&a.Ed.add(d,c)});0===a.Ed.count&&a.Ed.add("",a)}function dn(a,b,c){var d=b.zd;if(null!==d&&(null!==a.Ed&&a.Ed.remove(d),b=a.h,null!==b&&c)){c=null;for(d=a.pE(d);d.next();)a=d.value,null===c&&(c=z.rb()),c.push(a);if(null!==c){for(d=0;d<c.length;d++)a=c[d],b.remove(a);z.xa(c)}}}
E.prototype.isInTreeOf=function(a){if(null===a||a===this)return!1;var b=!0,c=this.h;null!==c&&(b=c.ce);c=this;if(b)for(;c!==a;){for(var b=null,d=c.mc.i;d.next();){var e=d.value;if(e.Oc&&(b=e.Y,b!==c&&b!==this))break}if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){b=null;for(d=c.mc.i;d.next()&&(e=d.value,!e.Oc||(b=e.da,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0};
E.prototype.findTreeRoot=function(){var a=!0,b=this.h;null!==b&&(a=b.ce);b=this;if(a)for(;;){for(var a=null,c=b.mc.i;c.next();){var d=c.value;if(d.Oc&&(a=d.Y,a!==b&&a!==this))break}if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){a=null;for(c=b.mc.i;c.next()&&(d=c.value,!d.Oc||(a=d.da,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}};
E.prototype.findCommonTreeParent=function(a){if(null===a)return null;u&&z.l(a,E,E,"findCommonTreeParent:other");if(this===a)return this;for(var b=this;null!==b;)tp(b,!0),b=b.Il();for(var c=null,b=a;null!==b;){if(0!==(b.U&1048576)){c=b;break}b=b.Il()}for(b=this;null!==b;)tp(b,!1),b=b.Il();return c};
E.prototype.findTreeParentLink=E.prototype.op=function(){var a=!0,b=this.h;null!==b&&(a=b.ce);b=this.mc.i;if(a)for(;b.next();){if(a=b.value,a.Oc&&a.Y!==this)return a}else for(;b.next();)if(a=b.value,a.Oc&&a.da!==this)return a;return null};
E.prototype.findTreeParentNode=E.prototype.Il=function(){var a=this.ik;if(null===a)return null;if(a instanceof E)return a;var b=!0,a=this.h;null!==a&&(b=a.ce);a=this.mc.i;if(b)for(;a.next();){if(b=a.value,b.Oc&&(b=b.Y,b!==this))return this.ik=b}else for(;a.next();)if(b=a.value,b.Oc&&(b=b.da,b!==this))return this.ik=b;return this.ik=null};E.prototype.findTreeParentChain=function(){function a(b,d){if(null!==b){d.add(b);var e=b.op();null!==e&&(d.add(e),a(b.Il(),d))}}var b=new K(D);a(this,b);return b};
E.prototype.findTreeLevel=function(){return Jp(this,this)};function Jp(a,b){var c=b.Il();return null===c?0:1+Jp(a,c)}E.prototype.findTreeChildrenLinks=E.prototype.bx=function(){var a=!0,b=this.h;null!==b&&(a=b.ce);if(a){var a=new Ta(this.mc),c=this;a.qn=function(a){return a.Oc&&a.Y===c?!0:!1}}else a=new Ta(this.mc),c=this,a.qn=function(a){return a.Oc&&a.da===c?!0:!1};return a};
E.prototype.findTreeChildrenNodes=E.prototype.sE=function(){var a=!0,b=this.h;null!==b&&(a=b.ce);var c=b=null,d=this.mc.i;if(a)for(;d.next();)a=d.value,a.Oc&&a.Y===this&&(a=a.da,null!==b?b.add(a):null!==c&&c!==a?(b=new J(E),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.Oc&&a.da===this&&(a=a.Y,null!==b?b.add(a):null!==c&&c!==a?(b=new J(E),b.add(c),b.add(a)):c=a);return null!==b?b.i:null!==c?new Ra(c):Pa};
E.prototype.findTreeParts=function(a){void 0===a&&(a=Infinity);z.g(a,"number",E,"collapseTree:level");var b=new K(D);hh(b,this,!1,a,!0);return b};E.prototype.collapseTree=E.prototype.collapseTree=function(a){void 0===a&&(a=1);z.p(a,E,"collapseTree:level");1>a&&(a=1);var b=this.h;if(null!==b&&!b.xh){b.xh=!0;var c=new K(E);c.add(this);Kp(this,c,b.ce,a,b.Va,this,b.bB===tk);b.xh=!1}};
function Kp(a,b,c,d,e,g,h){if(1<d)for(var k=c?a.$w():a.Ig();k.next();){var l=k.value;l.Oc&&(l=l.aA(a),null===l||l===a||b.contains(l)||(b.add(l),Kp(l,b,c,d-1,e,g,h)))}else Lp(a,b,c,e,g,h)}function Lp(a,b,c,d,e,g){for(var h=e===a?!0:a.wd,k=c?a.$w():a.Ig();k.next();){var l=k.value;l.Oc&&(l=l.aA(a),null===l||l===a||b.contains(l)||(b.add(l),h&&(g&&fk(d,l,e),l.Nl(),l.xd(!1)),l.wd&&(l.Cu=l.wd,Lp(l,b,c,d,e,g))))}a.wd=!1}
E.prototype.expandTree=E.prototype.expandTree=function(a){void 0===a&&(a=2);z.p(a,E,"expandTree:level");2>a&&(a=2);var b=this.h;if(null!==b&&!b.xh){b.xh=!0;var c=new K(E);c.add(this);Mp(this,c,b.ce,a,b.Va,this,b.bB===tk);b.xh=!1}};function Mp(a,b,c,d,e,g,h){for(var k=g===a?!1:a.wd,l=c?a.$w():a.Ig();l.next();){var m=l.value;m.Oc&&(k||m.Dg||m.qc(),m=m.aA(a),null!==m&&m!==a&&!b.contains(m)&&(b.add(m),k||(m.xd(!0),m.Nl(),h&&ek(e,m,g)),2<d||m.Cu))&&(m.Cu=!1,Mp(m,b,c,d-1,e,g,h))}a.wd=!0}
z.defineProperty(E,{wd:"isTreeExpanded"},function(){return this.rr},function(a){var b=this.rr;if(b!==a){u&&z.g(a,"boolean",E,"isTreeExpanded");this.rr=a;var c=this.h;this.j("isTreeExpanded",b,a);b=this.xJ;if(null!==b){var d=!0;null!==c&&(d=c.$a,c.$a=!0);b(this);null!==c&&(c.$a=d)}null!==c&&c.pa.qb?this.xd(a):a?this.expandTree():this.collapseTree()}});
z.defineProperty(E,{Cu:"wasTreeExpanded"},function(){return this.bt},function(a){var b=this.bt;b!==a&&(u&&z.g(a,"boolean",E,"wasTreeExpanded"),this.bt=a,this.j("wasTreeExpanded",b,a))});z.defineProperty(E,{xJ:"treeExpandedChanged"},function(){return this.Ys},function(a){var b=this.Ys;b!==a&&(null!==a&&z.g(a,"function",E,"treeExpandedChanged"),this.Ys=a,this.j("treeExpandedChanged",b,a))});
z.defineProperty(E,{nj:"isTreeLeaf"},function(){return this.sr},function(a){var b=this.sr;b!==a&&(u&&z.g(a,"boolean",E,"isTreeLeaf"),this.sr=a,this.j("isTreeLeaf",b,a))});
function G(){D.call(this,Ni);this.qg=null;this.Qh="";this.Cg=this.ar=null;this.fi="";this.Xs=null;this.os=this.ns=this.ms=!1;this.tr=!0;this.mq=Qi;this.Fq=0;this.Iq=Qi;this.Jq=NaN;this.Cm=nn;this.Ms=.5;this.Ke=null;this.Yc=(new J(N)).freeze();this.Jo=this.Me=null;this.Dg=!1;this.dw=null;this.oz=!1;this.$g=this.Yn=this.Un=this.si=this.Ei=this.kb=null;this.rz=new N;this.jD=this.hD=null;this.uy=!1;this.la=null}z.Ra(G,D);z.ia("Link",G);
G.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a);a.Qh=this.Qh;a.ar=this.ar;a.fi=this.fi;a.Xs=this.Xs;a.ms=this.ms;a.ns=this.ns;a.os=this.os;a.tr=this.tr;a.mq=this.mq;a.Fq=this.Fq;a.Iq=this.Iq;a.Jq=this.Jq;a.Cm=this.Cm;a.Ms=this.Ms;null!==this.la&&(a.la=this.la.copy())};G.prototype.ki=function(a){D.prototype.ki.call(this,a);this.Qh=a.Qh;this.fi=a.fi;a.Me=null;a.qc();a.si=this.si};var nn;G.Normal=nn=z.s(G,"Normal",1);G.Orthogonal=z.s(G,"Orthogonal",2);
G.AvoidsNodes=z.s(G,"AvoidsNodes",6);var Np;G.AvoidsNodesStraight=Np=z.s(G,"AvoidsNodesStraight",7);var Qi;G.None=Qi=z.s(G,"None",0);var Xi;G.Bezier=Xi=z.s(G,"Bezier",9);var Pi;G.JumpGap=Pi=z.s(G,"JumpGap",10);var Oi;G.JumpOver=Oi=z.s(G,"JumpOver",11);var kn;G.End=kn=z.s(G,"End",17);var ln;G.Scale=ln=z.s(G,"Scale",18);var mn;G.Stretch=mn=z.s(G,"Stretch",19);var Co;G.OrientAlong=Co=z.s(G,"OrientAlong",21);var co;G.OrientPlus90=co=z.s(G,"OrientPlus90",22);var fo;
G.OrientMinus90=fo=z.s(G,"OrientMinus90",23);var Op;G.OrientOpposite=Op=z.s(G,"OrientOpposite",24);var Pp;G.OrientUpright=Pp=z.s(G,"OrientUpright",25);var eo;G.OrientPlus90Upright=eo=z.s(G,"OrientPlus90Upright",26);var ho;G.OrientMinus90Upright=ho=z.s(G,"OrientMinus90Upright",27);var io;G.OrientUpright45=io=z.s(G,"OrientUpright45",28);G.prototype.Ue=function(){null===this.la&&(this.la=new Fm)};
G.prototype.Ql=function(){var a=this.Y;if(null!==a){var b=a.findVisibleNode();null!==b&&(a=b);if(nl(a)||ol(a))return!1}a=this.da;return null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),nl(a)||ol(a))?!1:!0};G.prototype.RA=function(){return!1};G.prototype.be=function(){return!1};
G.prototype.computeAngle=function(a,b,c){a=0;switch(b){default:case Qi:a=0;break;case Co:a=c;break;case co:a=c+90;break;case fo:a=c-90;break;case Op:a=c+180;break;case Pp:a=df(c);90<a&&270>a&&(a-=180);break;case eo:a=df(c+90);90<a&&270>a&&(a-=180);break;case ho:a=df(c-90);90<a&&270>a&&(a-=180);break;case io:a=df(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return df(a)};
z.defineProperty(G,{Y:"fromNode"},function(){return this.qg},function(a){var b=this.qg;if(b!==a){u&&null!==a&&z.l(a,E,G,"fromNode");var c=this.md;null!==b&&(this.Cg!==b&&Hp(b,this,c),Qp(this),this.I(Dl));this.qg=a;null!==a&&this.xd(a.isVisible());this.Ei=null;this.qc();var d=this.h;if(null!==d){var e=this.data,g=d.ha;if(null!==e)if(g instanceof V){var h=null!==a?a.data:null;g.Mx(e,g.pb(h))}else g instanceof qg&&(h=null!==a?a.data:null,d.ce?g.Gh(e,g.pb(h)):(null!==b&&g.Gh(b.data,void 0),g.Gh(h,g.pb(null!==
this.Cg?this.Cg.data:null))))}e=this.md;g=this.vE;null!==g&&(h=!0,null!==d&&(h=d.$a,d.$a=!0),g(this,c,e),null!==d&&(d.$a=h));null!==a&&(this.Cg!==a&&Gp(a,this,e),Rp(this),this.I(vl));this.j("fromNode",b,a);Wl(this)}});
z.defineProperty(G,{ag:"fromPortId"},function(){return this.Qh},function(a){var b=this.Qh;if(b!==a){u&&z.g(a,"string",G,"fromPortId");var c=this.md;null!==c&&Fp(this.Y,c);Qp(this);this.Qh=a;var d=this.md;null!==d&&Fp(this.Y,d);var e=this.h;if(null!==e){var g=this.data,h=e.ha;null!==g&&h instanceof V&&h.PA(g,a)}c!==d&&(this.Ei=null,this.qc(),g=this.vE,null!==g&&(h=!0,null!==e&&(h=e.$a,e.$a=!0),g(this,c,d),null!==e&&(e.$a=h)));Rp(this);this.j("fromPortId",b,a)}});
z.w(G,{md:"fromPort"},function(){var a=this.qg;return null===a?null:a.Hl(this.Qh)});z.defineProperty(G,{vE:"fromPortChanged"},function(){return this.ar},function(a){var b=this.ar;b!==a&&(null!==a&&z.g(a,"function",G,"fromPortChanged"),this.ar=a,this.j("fromPortChanged",b,a))});
z.defineProperty(G,{da:"toNode"},function(){return this.Cg},function(a){var b=this.Cg;if(b!==a){u&&null!==a&&z.l(a,E,G,"toNode");var c=this.Qd;null!==b&&(this.qg!==b&&Hp(b,this,c),Qp(this),this.I(Dl));this.Cg=a;null!==a&&this.xd(a.isVisible());this.Ei=null;this.qc();var d=this.h;if(null!==d){var e=this.data,g=d.ha;if(null!==e)if(g instanceof V){var h=null!==a?a.data:null;g.Qx(e,g.pb(h))}else g instanceof qg&&(h=null!==a?a.data:null,d.ce?(null!==b&&g.Gh(b.data,void 0),g.Gh(h,g.pb(null!==this.qg?this.qg.data:
null))):g.Gh(e,g.pb(h)))}e=this.Qd;g=this.TF;null!==g&&(h=!0,null!==d&&(h=d.$a,d.$a=!0),g(this,c,e),null!==d&&(d.$a=h));null!==a&&(this.qg!==a&&Gp(a,this,e),Rp(this),this.I(vl));this.j("toNode",b,a);Wl(this)}});
z.defineProperty(G,{Vg:"toPortId"},function(){return this.fi},function(a){var b=this.fi;if(b!==a){u&&z.g(a,"string",G,"toPortId");var c=this.Qd;null!==c&&Fp(this.da,c);Qp(this);this.fi=a;var d=this.Qd;null!==d&&Fp(this.da,d);var e=this.h;if(null!==e){var g=this.data,h=e.ha;null!==g&&h instanceof V&&h.SA(g,a)}c!==d&&(this.Ei=null,this.qc(),g=this.TF,null!==g&&(h=!0,null!==e&&(h=e.$a,e.$a=!0),g(this,c,d),null!==e&&(e.$a=h)));Rp(this);this.j("toPortId",b,a)}});
z.w(G,{Qd:"toPort"},function(){var a=this.Cg;return null===a?null:a.Hl(this.fi)});z.defineProperty(G,{TF:"toPortChanged"},function(){return this.Xs},function(a){var b=this.Xs;b!==a&&(null!==a&&z.g(a,"function",G,"toPortChanged"),this.Xs=a,this.j("toPortChanged",b,a))});z.defineProperty(G,{Db:"fromSpot"},function(){return null!==this.la?this.la.Hj:Pc},function(a){this.Ue();var b=this.la.Hj;b.N(a)||(u&&z.l(a,Q,G,"fromSpot"),a=a.V(),this.la.Hj=a,this.j("fromSpot",b,a),this.qc())});
z.defineProperty(G,{Jl:"fromEndSegmentLength"},function(){return null!==this.la?this.la.Fj:NaN},function(a){this.Ue();var b=this.la.Fj;b!==a&&(u&&z.g(a,"number",G,"fromEndSegmentLength"),0>a&&z.ka(a,">= 0",G,"fromEndSegmentLength"),this.la.Fj=a,this.j("fromEndSegmentLength",b,a),this.qc())});
z.defineProperty(G,{Ft:"fromEndSegmentDirection"},function(){return null!==this.la?this.la.Ej:Ap},function(a){this.Ue();var b=this.la.Ej;b!==a&&(u&&z.Ba(a,E,G,"fromEndSegmentDirection"),this.la.Ej=a,this.j("fromEndSegmentDirection",b,a),this.qc())});z.defineProperty(G,{Gt:"fromShortLength"},function(){return null!==this.la?this.la.Gj:NaN},function(a){this.Ue();var b=this.la.Gj;b!==a&&(u&&z.g(a,"number",G,"fromShortLength"),this.la.Gj=a,this.j("fromShortLength",b,a),this.qc())});
z.defineProperty(G,{Eb:"toSpot"},function(){return null!==this.la?this.la.hk:Pc},function(a){this.Ue();var b=this.la.hk;b.N(a)||(u&&z.l(a,Q,G,"toSpot"),a=a.V(),this.la.hk=a,this.j("toSpot",b,a),this.qc())});z.defineProperty(G,{Yl:"toEndSegmentLength"},function(){return null!==this.la?this.la.fk:NaN},function(a){this.Ue();var b=this.la.fk;b!==a&&(u&&z.g(a,"number",G,"toEndSegmentLength"),0>a&&z.ka(a,">= 0",G,"toEndSegmentLength"),this.la.fk=a,this.j("toEndSegmentLength",b,a),this.qc())});
z.defineProperty(G,{zu:"toEndSegmentDirection"},function(){return null!==this.la?this.la.ek:Ap},function(a){this.Ue();var b=this.la.ek;b!==a&&(u&&z.Ba(a,E,G,"toEndSegmentDirection"),this.la.ek=a,this.j("toEndSegmentDirection",b,a),this.qc())});z.defineProperty(G,{Au:"toShortLength"},function(){return null!==this.la?this.la.gk:NaN},function(a){this.Ue();var b=this.la.gk;b!==a&&(u&&z.g(a,"number",G,"toShortLength"),this.la.gk=a,this.j("toShortLength",b,a),this.qc())});
function Wl(a){var b=a.Y,c=a.da;null!==b?null!==c?Sp(a,b.CH(c)):Sp(a,null):Sp(a,null)}function Sp(a,b){var c=a.Pk;if(c!==b){null!==c&&up(c,a);a.Pk=b;null!==b&&vp(b,a);var d=a.VD;if(null!==d){var e=!0,g=a.h;null!==g&&(e=g.$a,g.$a=!0);d(a,c,b);null!==g&&(g.$a=e)}!a.Dg||a.hD!==c&&a.jD!==c||a.qc()}}G.prototype.Nl=function(){var a=this.Qa;null!==a&&this.Y!==a&&this.da!==a&&a.Pw&&D.prototype.Nl.call(this)};
G.prototype.getOtherNode=G.prototype.aA=function(a){u&&z.l(a,E,G,"getOtherNode:node");var b=this.Y;return a===b?this.da:b};G.prototype.getOtherPort=function(a){u&&z.l(a,O,G,"getOtherPort:port");var b=this.md;return a===b?this.Qd:b};z.w(G,{HK:"isLabeledLink"},function(){return null===this.Ke?!1:0<this.Ke.count});z.w(G,{Hf:"labelNodes"},function(){return null===this.Ke?Pa:this.Ke.i});function Ip(a,b){null===a.Ke&&(a.Ke=new K(E));a.Ke.add(b);a.Q()}
G.prototype.Kt=function(a){D.prototype.Kt.call(this,a);Tp(this)&&Ri(this,this.W);a||(a=this.qg,null!==a&&Gp(a,this,this.md),a=this.Cg,null!==a&&Gp(a,this,this.Qd),Rp(this))};G.prototype.Lt=function(a){D.prototype.Lt.call(this,a);Tp(this)&&Ri(this,this.W);a||(a=this.qg,null!==a&&Hp(a,this,this.md),a=this.Cg,null!==a&&Hp(a,this,this.Qd),Qp(this))};
G.prototype.bn=function(){this.Dg=!0;if(null!==this.Ke){var a=this.h;if(null!==a)for(var b=this.Ke.copy().i;b.next();)a.remove(b.value)}b=this.data;null!==b&&(a=this.h,null!==a&&(a=a.ha,a instanceof V?a.Fx(b):a instanceof qg&&a.Gh(b,void 0)))};
G.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.h;if(null!==b){var c=b.ha;if(c instanceof V){var d=c.Ll(a),e=b.hf(d),g=this.Y;e!==g&&(e=null!==g?c.pb(g.data):void 0,g=c.Ep,"function"===typeof g?g(a,e):a[g]=e,c.Mx(a,d));d=c.Ml(a);e=b.hf(d);g=this.da;e!==g&&(e=null!==g?c.pb(g.data):void 0,g=c.Gp,"function"===typeof g?g(a,e):a[g]=e,c.Qx(a,d));var h=c.rk(a);if(0<h.length||0<this.Hf.count){if(1===h.length&&1===this.Hf.count&&(b=h[0],d=this.Hf.first(),c.pb(d.data)===
b))return;var d=(new K).$c(h),k=new K;this.Hf.each(function(a){null!==a.data&&(a=c.pb(a.data),void 0!==a&&k.add(a))});b=k.copy();b.IA(d);d=d.copy();d.IA(k);if(0<b.count||0<d.count)h.length=0,k.each(function(a){h.push(a)}),b.each(function(b){c.mF(a,b)}),d.each(function(b){c.Bz(a,b)})}}}}};
G.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;D.prototype.move.call(this,a);this.Rl(c,b);for(a=this.Hf;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};z.defineProperty(G,{VI:"relinkableFrom"},function(){return this.ms},function(a){var b=this.ms;b!==a&&(u&&z.g(a,"boolean",G,"relinkableFrom"),this.ms=a,this.j("relinkableFrom",b,a),this.ae())});
z.defineProperty(G,{WI:"relinkableTo"},function(){return this.ns},function(a){var b=this.ns;b!==a&&(u&&z.g(a,"boolean",G,"relinkableTo"),this.ns=a,this.j("relinkableTo",b,a),this.ae())});G.prototype.canRelinkFrom=function(){if(!this.VI)return!1;var a=this.layer;if(null===a)return!0;if(!a.Sm)return!1;a=a.h;return null===a||a.Sm?!0:!1};G.prototype.canRelinkTo=function(){if(!this.WI)return!1;var a=this.layer;if(null===a)return!0;if(!a.Sm)return!1;a=a.h;return null===a||a.Sm?!0:!1};
z.defineProperty(G,{lu:"resegmentable"},function(){return this.os},function(a){var b=this.os;b!==a&&(u&&z.g(a,"boolean",G,"resegmentable"),this.os=a,this.j("resegmentable",b,a),this.ae())});z.defineProperty(G,{Oc:"isTreeLink"},function(){return this.tr},function(a){var b=this.tr;b!==a&&(u&&z.g(a,"boolean",G,"isTreeLink"),this.tr=a,this.j("isTreeLink",b,a),null!==this.Y&&hm(this.Y),null!==this.da&&hm(this.da))});z.w(G,{path:"path"},function(){var a=this.gf();return a instanceof X?a:null});
z.w(G,{tn:"routeBounds"},function(){this.An();var a=new w;var b=Infinity,c=Infinity,d=this.sa;if(0===d)a.n(NaN,NaN,0,0);else{if(1===d)d=this.m(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.n(d.x,d.y,0,0);else if(2===d){var e=this.m(0),g=this.m(1),b=Math.min(e.x,g.x),c=Math.min(e.y,g.y);a.n(e.x,e.y,0,0);a.wj(g)}else if(this.computeCurve()===Xi&&3<=d&&!this.rc)if(e=this.m(0),b=e.x,c=e.y,a.n(b,c,0,0),3===d)d=this.m(1),b=Math.min(d.x,b),c=Math.min(d.y,c),g=this.m(2),b=Math.min(g.x,b),c=Math.min(g.y,c),ve(e.x,
e.y,d.x,d.y,d.x,d.y,g.x,g.y,.5,a);else for(var h=3;h<d;h+=3){var k=this.m(h-2);h+3>=d&&(h=d-1);var l=this.m(h-1),g=this.m(h);ve(e.x,e.y,k.x,k.y,l.x,l.y,g.x,g.y,.5,a);b=Math.min(g.x,b);c=Math.min(g.y,c);e=g}else for(e=this.m(0),g=this.m(1),b=Math.min(e.x,g.x),c=Math.min(e.y,g.y),a.n(e.x,e.y,0,0),a.wj(g),h=2;h<d;h++)e=this.m(h),b=Math.min(e.x,b),c=Math.min(e.y,c),a.wj(e);this.rz.n(b-a.x,c-a.y)}return this.dw=a});z.w(G,{aF:"midPoint"},function(){this.An();return this.computeMidPoint(new N)});
G.prototype.computeMidPoint=function(a){var b=this.sa;if(0===b)return a.assign(ee),a;if(1===b)return a.assign(this.m(0)),a;if(2===b){var c=this.m(0),d=this.m(1);a.n((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===Xi&&3<=b&&!this.rc){if(3===b)return this.m(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=this.m(e),d=this.m(e+1),g=this.m(e+2),e=this.m(e+3),b=d.x,h=d.y,d=g.x,k=g.y,g=(b+d)/2,l=(h+k)/2,h=((c.y+h)/2+l)/2,k=(l+(k+e.y)/2)/2;a.x=(((c.x+b)/2+g)/2+(g+(d+e.x)/2)/2)/2;a.y=(h+k)/2}else a.assign(this.m(e));
return a}e=0;g=z.rb();for(h=0;h<b-1;h++)c=0,c=this.m(h),d=this.m(h+1),td(c.x,d.x)?(c=d.y-c.y,0>c&&(c=-c)):td(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Af(d)),g.push(c),e+=c;for(d=h=c=0;c<e/2&&h<b;){d=g[h];if(c+d>e/2)break;c+=d;h++}z.xa(g);b=this.m(h);g=this.m(h+1);b.x===g.x?b.y>g.y?a.n(b.x,b.y-(e/2-c)):a.n(b.x,b.y+(e/2-c)):b.y===g.y?b.x>g.x?a.n(b.x-(e/2-c),b.y):a.n(b.x+(e/2-c),b.y):(c=(e/2-c)/d,a.n(b.x+c*(g.x-b.x),b.y+c*(g.y-b.y)));return a};z.w(G,{$E:"midAngle"},function(){this.An();return this.computeMidAngle()});
G.prototype.computeMidAngle=function(){var a=this.sa;if(2>a)return NaN;if(this.computeCurve()===Xi&&4<=a&&!this.rc){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),b=this.m(c),d=this.m(c+1),a=this.m(c+2),c=this.m(c+3),e=d.x,d=d.y,g=a.x,a=a.y,h=(e+g)/2,k=(d+a)/2;return wb(((b.x+e)/2+h)/2,((b.y+d)/2+k)/2,(h+(g+c.x)/2)/2,(k+(a+c.y)/2)/2)}if(0<c&&c+1<a)return b=this.m(c-1),d=this.m(c+1),b.Ec(d)}c=a/2|0;if(0===a%2)return b=this.m(c-1),d=this.m(c),4<=a&&b.Mc(d)&&(b=this.m(c-2),a=this.m(c+1),
c=b.Af(d),e=d.Af(a),!(c>e+10))?e>c+10?d.Ec(a):b.Ec(a):b.Ec(d);b=this.m(c-1);d=this.m(c);a=this.m(c+1);c=b.Af(d);e=d.Af(a);return c>e+10?b.Ec(d):e>c+10?d.Ec(a):b.Ec(a)};
z.defineProperty(G,{points:"points"},function(){return this.Yc},function(a){var b=this.Yc;if(b!==a){var c=null;if(Array.isArray(a)){var d=0===a.length%2;if(d)for(var e=0;e<a.length;e++)if("number"!==typeof a[e]||isNaN(a[e])){d=!1;break}if(d)for(c=new J(N),d=0;d<a.length/2;d++)e=(new N(a[2*d],a[2*d+1])).freeze(),c.add(e);else{for(var g=!0,d=0;d<a.length;d++)if(e=a[d],!z.Za(e)||"number"!==typeof e.x||isNaN(e.x)||"number"!==typeof e.y||isNaN(e.y)){g=!1;break}if(g)for(c=new J(N),d=0;d<a.length;d++)e=
a[d],c.add((new N(e.x,e.y)).freeze());else z.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+a)}}else if(a instanceof J)for(c=a.copy(),a=c.i;a.next();)a.value.freeze();else z.k("Link.points value is not an instance of List or Array: "+a);c.freeze();this.Yc=c;this.qe();this.Q();Up(this);a=this.h;null!==a&&(a.jn||a.pa.qb||a.tx.add(this),a.Va.wc&&(this.Jo=c));this.j("points",b,c)}});z.w(G,{sa:"pointsCount"},function(){return this.Yc.count});
G.prototype.getPoint=G.prototype.m=function(a){return this.Yc.o[a]};G.prototype.setPoint=G.prototype.Kf=function(a,b){u&&(z.l(b,N,G,"setPoint"),b.F()||z.k("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.Sg(a,b)};
G.prototype.setPointAt=G.prototype.aa=function(a,b,c){u&&(z.p(b,G,"setPointAt:x"),z.p(c,G,"setPointAt:y"));null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.Sg(a,new N(b,c))};G.prototype.insertPoint=function(a,b){u&&(z.l(b,N,G,"insertPoint"),b.F()||z.k("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.Md(a,b)};
G.prototype.insertPointAt=G.prototype.B=function(a,b,c){u&&(z.p(b,G,"insertPointAt:x"),z.p(c,G,"insertPointAt:y"));null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.Md(a,new N(b,c))};G.prototype.addPoint=G.prototype.hi=function(a){u&&(z.l(a,N,G,"addPoint"),a.F()||z.k("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.add(a)};
G.prototype.addPointAt=G.prototype.tl=function(a,b){u&&(z.p(a,G,"insertPointAt:x"),z.p(b,G,"insertPointAt:y"));null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.add(new N(a,b))};G.prototype.removePoint=G.prototype.nF=function(a){null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.dd(a)};
G.prototype.clearPoints=G.prototype.ep=function(){null===this.Me&&z.k("Call Link.startRoute before modifying the points of the route.");this.Yc.clear()};G.prototype.movePoints=G.prototype.Rl=function(a,b){for(var c=new J(N),d=this.Yc.i;d.next();){var e=d.value;c.add((new N(e.x+a,e.y+b)).freeze())}c.freeze();d=this.Yc;this.Yc=c;this.Q();Up(this);e=this.h;null!==e&&e.Va.wc&&(this.Jo=c);this.j("points",d,c)};G.prototype.startRoute=G.prototype.Ul=function(){null===this.Me&&(this.Me=this.Yc,this.Yc=this.Yc.copy())};
G.prototype.commitRoute=G.prototype.dj=function(){if(null!==this.Me){for(var a=this.Me,b=this.Yc,c=Infinity,d=Infinity,e=a.o,g=e.length,h=0;h<g;h++)var k=e[h],c=Math.min(k.x,c),d=Math.min(k.y,d);for(var l=Infinity,m=Infinity,n=b.o,p=n.length,h=0;h<p;h++)k=n[h],l=Math.min(k.x,l),m=Math.min(k.y,m),k.freeze();b.freeze();if(p===g)for(h=0;h<p;h++){if(g=e[h],k=n[h],g.x-c!==k.x-l||g.y-d!==k.y-m){this.Q();this.qe();break}}else this.Q(),this.qe();this.Me=null;c=this.h;null!==c&&c.Va.wc&&(this.Jo=b);Up(this);
this.j("points",a,b)}};G.prototype.rollbackRoute=G.prototype.ZI=function(){null!==this.Me&&(this.Yc=this.Me,this.Me=null)};function Up(a){0===a.Yc.count?a.Dg=!1:(a.Dg=!0,a.Un=a.m(0).copy(),a.Yn=a.m(a.sa-1).copy(),Vp(a,!1))}G.prototype.invalidateRoute=G.prototype.qc=function(){if(!this.oz){var a=this.h;a&&(a.tx.contains(this)||a.pa.qb||a.Va.jI&&!a.Va.nf)||(a=this.path,null!==a&&(this.Dg=!1,this.Q(),a.Q()))}};z.defineProperty(G,{eq:"suspendsRouting"},function(){return this.oz},function(a){this.oz=a});
G.prototype.updateRoute=G.prototype.An=function(){if(!this.Dg&&!this.uy){var a=!0;try{this.uy=!0,this.Ul(),a=this.computePoints()}finally{this.uy=!1,a?this.dj():this.ZI()}}};
G.prototype.computePoints=function(){var a=this.h;if(null===a)return!1;var b=this.Y,c=null;null===b?(a.Dm||(a.ew=new X,a.ew.Aa=Pd,a.ew.ub=0,a.Dm=new E,a.Dm.add(a.ew),a.Dm.Bf()),this.Un&&(a.Dm.position=a.Dm.location=this.Un,a.Dm.Bf(),b=a.Dm,c=a.ew)):c=this.md;if(null!==c&&!b.isVisible()){var d=b.findVisibleNode();null!==d&&d!==b?(b=d,c=d.Hl("")):b=d}this.hD=b;if(null===b||!b.location.F())return!1;for(;!(null===c||c.W.F()&&c.oj());)c=c.T;if(null===c)return!1;var d=this.da,e=null;null===d?(a.Em||(a.fw=
new X,a.fw.Aa=Pd,a.fw.ub=0,a.Em=new E,a.Em.add(a.fw),a.Em.Bf()),this.Yn&&(a.Em.position=a.Em.location=this.Yn,a.Em.Bf(),d=a.Em,e=a.fw)):e=this.Qd;null===e||d.isVisible()||(a=d.findVisibleNode(),null!==a&&a!==d?(d=a,e=a.Hl("")):d=a);this.jD=d;if(null===d||!d.location.F())return!1;for(;!(null===e||e.W.F()&&e.oj());)e=e.T;if(null===e)return!1;var a=this.sa,g=Wp(this,c),h=Xp(this,e),k=c===e&&null!==c,l=this.rc,m=this.Se===Xi;this.Ei=k&&!l?m=!0:!1;var n=this.it===Qi||k;if(l||g!==Yb||h!==Yb||k){m=this.kj;
n&&(l&&m||k)&&this.ep();var p=k?this.computeCurviness():0,q=this.getLinkPoint(b,c,g,!0,l,d,e),r=0,s=0,t=0;if(l||g!==Yb||k){var v=this.computeEndSegmentLength(b,c,g,!0),t=this.getLinkDirection(b,c,q,g,!0,l,d,e);k&&(t-=l?90:30,0>p&&(t-=180));0>t?t+=360:360<=t&&(t-=360);k&&(v+=Math.abs(p));0===t?r=v:90===t?s=v:180===t?r=-v:270===t?s=-v:(r=v*Math.cos(t*Math.PI/180),s=v*Math.sin(t*Math.PI/180));if(g.Be()&&k){var x=c.eb(ec,z.O()),y=z.Tb(x.x+1E3*r,x.y+1E3*s);this.getLinkPointFromPoint(b,c,x,y,!0,q);z.A(x);
z.A(y)}}var v=this.getLinkPoint(d,e,h,!1,l,b,c),A=0,C=0,L=0;if(l||h!==Yb||k)x=this.computeEndSegmentLength(d,e,h,!1),L=this.getLinkDirection(d,e,v,h,!1,l,b,c),k&&(L+=l?0:30,0>p&&(L+=180)),0>L?L+=360:360<=L&&(L-=360),k&&(x+=Math.abs(p)),0===L?A=x:90===L?C=x:180===L?A=-x:270===L?C=-x:(A=x*Math.cos(L*Math.PI/180),C=x*Math.sin(L*Math.PI/180)),h.Be()&&k&&(x=e.eb(ec,z.O()),y=z.Tb(x.x+1E3*A,x.y+1E3*C),this.getLinkPointFromPoint(d,e,x,y,!1,v),z.A(x),z.A(y));e=q;if(l||g!==Yb||k)e=new N(q.x+r,q.y+s);c=v;if(l||
h!==Yb||k)c=new N(v.x+A,v.y+C);!n&&!l&&g===Yb&&3<a&&this.adjustPoints(0,q,a-2,c)?this.Kf(a-1,v):!n&&!l&&h===Yb&&3<a&&this.adjustPoints(1,e,a-1,v)?this.Kf(0,q):!n&&!l&&4<a&&this.adjustPoints(1,e,a-2,c)?(this.Kf(0,q),this.Kf(a-1,v)):!n&&l&&6<=a&&!m&&this.adjustPoints(1,e,a-2,c)?(this.Kf(0,q),this.Kf(a-1,v)):(this.ep(),this.hi(q),(l||g!==Yb||k)&&this.hi(e),l&&this.addOrthoPoints(e,t,c,L,b,d),(l||h!==Yb||k)&&this.hi(c),this.hi(v))}else g=!1,!n&&3<=a&&(n=this.getLinkPoint(b,c,Yb,!0,!1,d,e),h=this.getLinkPoint(d,
e,Yb,!1,!1,b,c),g=this.adjustPoints(0,n,a-1,h))&&(n=this.getLinkPoint(b,c,Yb,!0,!1,d,e),h=this.getLinkPoint(d,e,Yb,!1,!1,b,c),this.adjustPoints(0,n,a-1,h)),g||(this.ep(),m?(a=this.getLinkPoint(b,c,Yb,!0,!1,d,e),n=this.getLinkPoint(d,e,Yb,!1,!1,b,c),g=n.x-a.x,h=n.y-a.y,k=this.computeCurviness(),m=l=0,q=a.x+g/3,t=a.y+h/3,r=q,s=t,eb(h,0)?s=0<g?s-k:s+k:(l=-g/h,m=Math.sqrt(k*k/(l*l+1)),0>k&&(m=-m),r=(0>h?-1:1)*m+q,s=l*(r-q)+t),q=a.x+2*g/3,t=a.y+2*h/3,v=q,A=t,eb(h,0)?A=0<g?A-k:A+k:(v=(0>h?-1:1)*m+q,A=l*
(v-q)+t),this.ep(),this.hi(a),this.tl(r,s),this.tl(v,A),this.hi(n),this.Kf(0,this.getLinkPoint(b,c,Yb,!0,!1,d,e)),this.Kf(3,this.getLinkPoint(d,e,Yb,!1,!1,b,c))):(a=d,d=this.getLinkPoint(b,c,Yb,!0,!1,a,e),e=this.getLinkPoint(a,e,Yb,!1,!1,b,c),this.hasCurviness()?(h=e.x-d.x,b=e.y-d.y,c=this.computeCurviness(),a=d.x+h/2,n=d.y+b/2,g=a,k=n,eb(b,0)?k=0<h?k-c:k+c:(h=-h/b,g=Math.sqrt(c*c/(h*h+1)),0>c&&(g=-g),g=(0>b?-1:1)*g+a,k=h*(g-a)+n),this.hi(d),this.tl(g,k)):this.hi(d),this.hi(e)));return!0};
function Yp(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
G.prototype.getLinkPointFromPoint=function(a,b,c,d,e,g){void 0===g&&(g=new N);if(null===a||null===b)return g.assign(c),g;a.isVisible()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port));var h=e=0,k=0,l=0;a=null;e=b.T;null===e||e.Wg()||(e=e.T);if(null===e)e=d.x,h=d.y,k=c.x,l=c.y;else{a=e.qh;e=1/(a.m11*a.m22-a.m12*a.m21);var k=a.m22*e,l=-a.m12*e,m=-a.m21*e,n=a.m11*e,p=e*(a.m21*a.dy-a.m22*a.dx),q=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*k+d.y*m+p;h=d.x*l+d.y*n+q;k=c.x*k+c.y*m+p;l=c.x*l+c.y*n+q}b.sp(e,h,k,l,
g);null!==a&&g.transform(a);return g};function Zp(a,b){var c=b.gs;null===c&&(c=new $p,c.port=b,c.Pc=b.ca,b.gs=c);return aq(c,a)}
G.prototype.getLinkPoint=function(a,b,c,d,e,g,h,k){void 0===k&&(k=new N);if(c.cd())return b.eb(c,k),k;if(c.lj()&&(c=Zp(this,b),null!==c)){k.assign(c.Fp);if(e&&this.Ix===Np){var l=Zp(this,h);if(null!==l&&c.$m<l.$m){c=z.O();var l=z.O(),m=new w(b.eb(Zb,c),b.eb(ic,l)),n=this.computeSpot(!d);a=this.getLinkPoint(g,h,n,!d,e,a,b,l);a.x>=m.x&&a.x<=m.x+m.width?k.x=a.x:a.y>=m.y&&a.y<=m.y+m.height&&(k.y=a.y);z.A(c);z.A(l)}}return k}g=b.eb(ec,z.O());l=c=null;this.sa>(e?6:2)?(l=d?this.m(1):this.m(this.sa-2),e&&
(l=Yp(g,l.copy()))):(c=z.O(),l=h.eb(ec,c),e&&(l=Yp(g,l)),z.A(c));this.getLinkPointFromPoint(a,b,g,l,d,k);z.A(g);return k};
G.prototype.getLinkDirection=function(a,b,c,d,e,g,h,k){a:if(d.cd())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.lj()){var l=Zp(this,b);if(null!==l)switch(l.te){case z.qd:c=270;break a;case z.Tc:c=180;break a;default:case z.fd:c=0;break a;case z.ed:c=90;break a}}var l=b.eb(ec,z.O()),m=null,n=null;this.sa>(g?6:2)?(n=e?this.m(1):this.m(this.sa-2),n=g?Yp(l,n.copy()):c):(m=z.O(),n=k.eb(ec,m),z.A(m));c=0;c=Math.abs(n.x-l.x)>Math.abs(n.y-
l.y)?n.x>=l.x?0:180:n.y>=l.y?90:270;z.A(l)}d.Be()&&h.mi(a)&&(c+=180,360<=c&&(c-=360));a=Ap;a=e?this.Ft:this.zu;a===Ap&&(a=e?b.Ft:b.zu);switch(a){case Bp:b=b.Kl();c+=b;360<=c&&(c-=360);break;case Ap:case Gm:b=b.Kl();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};
G.prototype.computeEndSegmentLength=function(a,b,c,d){if(null!==b&&c.lj()&&(a=Zp(this,b),null!==a))return a.Ww;a=NaN;a=d?this.Jl:this.Yl;null!==b&&isNaN(a)&&(a=d?b.Jl:b.Yl);isNaN(a)&&(a=10);return a};G.prototype.computeSpot=function(a){return a?Wp(this,this.md):Xp(this,this.Qd)};function Wp(a,b){if(null===b)return ec;var c=a.Db;c.bd()&&(void 0===b&&(b=a.md),null!==b&&(c=b.Db));return c===Pc?Yb:c}
function Xp(a,b){if(null===b)return ec;var c=a.Eb;c.bd()&&(void 0===b&&(b=a.Qd),null!==b&&(c=b.Eb));return c===Pc?Yb:c}G.prototype.computeOtherPoint=function(a,b){var c=b.eb(ec),d;d=b.gs;d=null!==d?aq(d,this):null;null!==d&&(c=d.Fp);return c};G.prototype.computeShortLength=function(a){return a?bq(this):cq(this)};function bq(a){var b=a.Gt;isNaN(b)&&(a=a.md,null!==a&&(b=a.Gt));return isNaN(b)?0:b}function cq(a){var b=a.Au;isNaN(b)&&(a=a.Qd,null!==a&&(b=a.Au));return isNaN(b)?0:b}
G.prototype.pk=function(a,b,c,d,e,g){if(!1===this.jg)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var h=g;void 0===g&&(h=z.Hh(),h.reset());h.multiply(this.transform);if(this.Xm(a,h))return oo(this,b,c,e),void 0===g&&z.jf(h),!0;if(this.Jg(a,h)){var k=!1;if(!this.eh)for(var l=this.va.o,m=l.length;m--;){var n=l[m];if(n.visible||n===this.Zb){var p=n.W,q=this.Ga;if(!(p.x>q.width||p.y>q.height||0>p.x+p.width||0>p.y+p.height)){p=z.Hh();p.set(h);if(n instanceof I)k=n.pk(a,b,c,d,e,p);else if(this.path===
n){var k=n,r=a,s=d,q=p;if(!1===k.jg)k=!1;else if(q.multiply(k.transform),s)b:{var t=r,v=q;if(k.Xm(t,v))k=!0;else{if(void 0===v&&(v=k.transform,t.nk(k.W))){k=!0;break b}var q=t.left,r=t.right,s=t.top,t=t.bottom,x=z.O(),y=z.O(),A=z.O(),C=z.Hh();C.set(v);C.vA(k.transform);C.fA();y.x=r;y.y=s;y.transform(C);x.x=q;x.y=s;x.transform(C);v=!1;zo(k,x,y,A)?v=!0:(x.x=r,x.y=t,x.transform(C),zo(k,x,y,A)?v=!0:(y.x=q,y.y=t,y.transform(C),zo(k,x,y,A)?v=!0:(x.x=q,x.y=s,x.transform(C),zo(k,x,y,A)&&(v=!0))));z.jf(C);
z.A(x);z.A(y);z.A(A);k=v}}else k=k.Xm(r,q)}else k=Lm(n,a,d,p);k&&(null!==b&&(n=b(n)),n&&(null===c||c(n))&&e.add(n));z.jf(p)}}}void 0===g&&z.jf(h);return k||null!==this.background||null!==this.wl}void 0===g&&z.jf(h);return!1};z.w(G,{rc:"isOrthogonal"},function(){return 2===(this.Cm.value&2)});z.w(G,{kj:"isAvoiding"},function(){return 4===(this.Cm.value&4)});G.prototype.computeCurve=function(){if(null===this.Ei){var a=this.md,b=this.rc;this.Ei=null!==a&&a===this.Qd&&!b}return this.Ei?Xi:this.Se};
G.prototype.computeCorner=function(){if(this.Se===Xi)return 0;var a=this.Mz;if(isNaN(a)||0>a)a=10;return a};G.prototype.findMidLabel=function(){for(var a=this.path,b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d];if(e!==a&&!e.Ff&&(-Infinity===e.De||isNaN(e.De)))return e}for(a=this.Hf;a.next();)if(b=a.value,-Infinity===b.De||isNaN(b.De))return b;return null};
G.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var a;a=Math.max(14,this.computeThickness());var b=this.md,c=this.Qd;if(null!==b&&null!==c){var d=this.findMidLabel();if(null!==d){var e=d.Ga,g=d.margin,h=isNaN(e.width)?30:e.width*d.scale+g.left+g.right,e=isNaN(e.height)?14:e.height*d.scale+g.top+g.bottom,d=d.pu;d===Co||d===Pp||d===Op?a=Math.max(a,e):d===fo||d===ho||d===co||d===eo?a=Math.max(a,h):(b=b.eb(ec).Ec(c.eb(ec))/180*Math.PI,a=Math.max(a,Math.abs(Math.sin(b)*h)+Math.abs(Math.cos(b)*
e)+1));this.Se===Xi&&(a*=1.333)}}return a};G.prototype.arrangeBundledLinks=function(a,b){if(b)for(var c=0;c<a.length;c++)a[c].qc()};G.prototype.computeCurviness=function(){var a=this.Sw;if(isNaN(a)){var a=16,b=this.si;if(null!==b){for(var c=z.rb(),d=0,e=b.links,g=0;g<e.length;g++){var h=e[g],h=h.computeSpacing();c.push(h);d+=h}d=-d/2;for(g=0;g<e.length;g++){h=e[g];if(h===this){a=d+c[g]/2;break}d+=c[g]}b.Op===this.Y&&(a=-a);z.xa(c)}}return a};
G.prototype.computeThickness=function(){if(!this.isVisible())return 0;var a=this.path;return null!==a?Math.max(a.ub,1):1};G.prototype.hasCurviness=function(){return!isNaN(this.Sw)||null!==this.si};
G.prototype.adjustPoints=function(a,b,c,d){var e=this.it;if(this.rc){if(e===ln)return!1;e===mn&&(e=kn)}switch(e){case ln:var g=this.m(a),h=this.m(c);if(!g.Mc(b)||!h.Mc(d)){var e=g.x,g=g.y,k=h.x-e,l=h.y-g,m=Math.sqrt(k*k+l*l);if(!td(m,0)){var n=0;td(k,0)?n=0>l?-Math.PI/2:Math.PI/2:(n=Math.atan(l/Math.abs(k)),0>k&&(n=Math.PI-n));var h=b.x,p=b.y,l=d.x-h,q=d.y-p,r=Math.sqrt(l*l+q*q),k=0;td(l,0)?k=0>q?-Math.PI/2:Math.PI/2:(k=Math.atan(q/Math.abs(l)),0>l&&(k=Math.PI-k));m=r/m;n=k-n;this.Kf(a,b);for(a+=
1;a<c;a++)b=this.m(a),k=b.x-e,l=b.y-g,b=Math.sqrt(k*k+l*l),td(b,0)||(q=0,td(k,0)?q=0>l?-Math.PI/2:Math.PI/2:(q=Math.atan(l/Math.abs(k)),0>k&&(q=Math.PI-q)),k=q+n,b*=m,this.aa(a,h+b*Math.cos(k),p+b*Math.sin(k)));this.Kf(c,d)}}return!0;case mn:g=this.m(a);p=this.m(c);if(!g.Mc(b)||!p.Mc(d)){var e=g.x,g=g.y,h=p.x,p=p.y,m=(h-e)*(h-e)+(p-g)*(p-g),k=b.x,n=b.y,l=d.x,q=d.y,r=0,s=1;0!==l-k?(r=(q-n)/(l-k),s=Math.sqrt(1+1/(r*r))):r=9E9;this.Kf(a,b);for(a+=1;a<c;a++){b=this.m(a);var t=b.x,v=b.y,x=.5;0!==m&&(x=
((e-t)*(e-h)+(g-v)*(g-p))/m);var y=e+x*(h-e),A=g+x*(p-g);b=Math.sqrt((t-y)*(t-y)+(v-A)*(v-A));v<r*(t-y)+A&&(b=-b);0<r&&(b=-b);t=k+x*(l-k);x=n+x*(q-n);0!==r?(b=t+b/s,this.aa(a,b,x-(b-t)/r)):this.aa(a,t,x+b)}this.Kf(c,d)}return!0;case kn:return this.rc&&(e=this.m(a),g=this.m(a+1),h=this.m(a+2),eb(e.y,g.y)?eb(g.x,h.x)?this.aa(a+1,g.x,b.y):eb(g.y,h.y)&&this.aa(a+1,b.x,g.y):eb(e.x,g.x)&&(eb(g.y,h.y)?this.aa(a+1,b.x,g.y):eb(g.x,h.x)&&this.aa(a+1,g.x,b.y)),e=this.m(c),g=this.m(c-1),h=this.m(c-2),eb(e.y,
g.y)?eb(g.x,h.x)?this.aa(c-1,g.x,d.y):eb(g.y,h.y)&&this.aa(c-1,d.x,g.y):eb(e.x,g.x)&&(eb(g.y,h.y)?this.aa(c-1,d.x,g.y):eb(g.x,h.x)&&this.aa(c-1,g.x,d.y))),this.Kf(a,b),this.Kf(c,d),!0;default:return!1}};
G.prototype.addOrthoPoints=function(a,b,c,d,e,g){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var h=e.W.copy(),k=g.W.copy();if(h.F()&&k.F()){h.bg(8,8);k.bg(8,8);h.wj(a);k.wj(c);var l,m;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&k.right>a.x||90===d&&c.y>a.y&&k.right>a.x)l=new N(c.x,a.y),m=new N(c.x,(a.y+c.y)/2),180===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x<k.left?this.computeMidOrthoPosition(a.x,
k.left,!1):a.x<k.right&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.right,m.x=l.x,m.y=c.y):0===d&&a.x<k.left&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new N(a.x,c.y);m=new N((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)180===d&&(k.Ma(a)||h.Ma(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,
k.bottom),!0):c.y>a.y&&(180===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x>=h.left&&c.x<=a.x||a.x<=k.right&&a.x>=c.x){if(90===d||270===d)l=new N(Math.max((a.x+c.x)/2,a.x),a.y),m=new N(l.x,c.y)}else l.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,0===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&k.left<a.x||
90===d&&c.y>a.y&&k.left<a.x)l=new N(c.x,a.y),m=new N(c.x,(a.y+c.y)/2),0===d?(l.x=this.computeMidOrthoPosition(a.x,c.x,!1),m.x=l.x,m.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(l.x=a.x>k.right?this.computeMidOrthoPosition(a.x,k.right,!1):a.x>k.left&&(270===d&&a.y<k.top||90===d&&a.y>k.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):k.left,m.x=l.x,m.y=c.y):180===d&&a.x>k.right&&a.y>k.top&&a.y<k.bottom&&(l.x=a.x,l.y=a.y<c.y?Math.min(c.y,k.top):Math.max(c.y,k.bottom),m.y=l.y);else{l=new N(a.x,c.y);m=new N((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<h.top||270===d&&c.y>h.bottom)0===d&&(k.Ma(a)||h.Ma(c))?l.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?l.y=this.computeMidOrthoPosition(h.top,Math.max(c.y,k.bottom),!0):c.y>a.y&&(0===d||270===d)&&(l.y=this.computeMidOrthoPosition(h.bottom,Math.min(c.y,k.top),!0)),m.x=c.x,m.y=l.y;if(l.y>h.top&&l.y<h.bottom)if(c.x<=h.right&&c.x>=a.x||a.x>=k.left&&a.x<=c.x){if(90===d||270===d)l=new N(Math.min((a.x+c.x)/2,a.x),a.y),m=new N(l.x,c.y)}else l.y=270===
d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?h.top:Math.min(h.top,k.top)):Math.max(c.y,180===d?h.bottom:Math.max(h.bottom,k.bottom)),m.x=c.x,m.y=l.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&k.bottom>a.y||0===d&&c.x>a.x&&k.bottom>a.y)l=new N(a.x,c.y),m=new N((a.x+c.x)/2,c.y),270===d?(l.y=this.computeMidOrthoPosition(a.y,c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(l.y=a.y<k.top?this.computeMidOrthoPosition(a.y,k.top,!0):a.y<k.bottom&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?
this.computeMidOrthoPosition(a.y,c.y,!0):k.bottom,m.x=c.x,m.y=l.y):90===d&&a.y<k.top&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new N(c.x,a.y);m=new N(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<h.left||180===d&&c.x>h.right)270===d&&(k.Ma(a)||h.Ma(c))?l.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(270===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,
Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y>=h.top&&c.y<=a.y||a.y<=k.bottom&&a.y>=c.y){if(0===d||180===d)l=new N(a.x,Math.max((a.y+c.y)/2,a.y)),m=new N(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,90===d?h.right:Math.max(h.right,k.right)),m.x=l.x,m.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&k.top<a.y||0===d&&c.x>a.x&&k.top<a.y)l=new N(a.x,c.y),m=new N((a.x+c.x)/2,c.y),90===d?(l.y=this.computeMidOrthoPosition(a.y,
c.y,!0),m.x=c.x,m.y=l.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(l.y=a.y>k.bottom?this.computeMidOrthoPosition(a.y,k.bottom,!0):a.y>k.top&&(180===d&&a.x<k.left||0===d&&a.x>k.right)?this.computeMidOrthoPosition(a.y,c.y,!0):k.top,m.x=c.x,m.y=l.y):270===d&&a.y>k.bottom&&a.x>k.left&&a.x<k.right&&(l.x=a.x<c.x?Math.min(c.x,k.left):Math.max(c.x,k.right),l.y=a.y,m.x=l.x);else{l=new N(c.x,a.y);m=new N(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<h.left||180===d&&c.x>h.right)90===d&&(k.Ma(a)||h.Ma(c))?l.x=this.computeMidOrthoPosition(a.x,
c.x,!1):c.x<a.x&&(90===d||0===d)?l.x=this.computeMidOrthoPosition(h.left,Math.max(c.x,k.right),!1):c.x>a.x&&(90===d||180===d)&&(l.x=this.computeMidOrthoPosition(h.right,Math.min(c.x,k.left),!1)),m.x=l.x,m.y=c.y;if(l.x>h.left&&l.x<h.right)if(c.y<=h.bottom&&c.y>=a.y||a.y>=k.top&&a.y<=c.y){if(0===d||180===d)l=new N(a.x,Math.min((a.y+c.y)/2,a.y)),m=new N(c.x,l.y)}else l.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?h.left:Math.min(h.left,k.left)):Math.max(c.x,270===d?h.right:Math.max(h.right,
k.right)),m.x=l.x,m.y=c.y}var n=l,p=m;if(this.kj){var q=this.h,r;(r=null===q)||(q.Va.nf?r=!1:(r=q.cb,r=r instanceof lh?!r.uw||r.cI:!0),r=!r);if(r||h.Ma(c)&&!g.mi(e)||k.Ma(a)&&!e.mi(g)||e===g||this.layer.Nc)a=!1;else if(e=ja(q,!0,this.Qa,null),e.Dp(Math.min(a.x,n.x),Math.min(a.y,n.y),Math.abs(a.x-n.x),Math.abs(a.y-n.y))&&e.Dp(Math.min(n.x,p.x),Math.min(n.y,p.y),Math.abs(n.x-p.x),Math.abs(n.y-p.y))&&e.Dp(Math.min(p.x,c.x),Math.min(p.y,c.y),Math.abs(p.x-c.x),Math.abs(p.y-c.y)))a=!1;else if(h=h.copy().ri(k),
h.bg(2*e.dp,2*e.bp),dq(e,a,b,c,d,h),k=eq(e,c.x,c.y),e.abort||999999!==k||(lm(e),k=e.MF,h.bg(e.dp*k,e.bp*k),dq(e,a,b,c,d,h),k=eq(e,c.x,c.y)),e.abort||999999!==k||(lm(e),k=e.VE,h.bg(e.dp*k,e.bp*k),dq(e,a,b,c,d,h),k=eq(e,c.x,c.y)),!e.abort&&999999===k&&e.fG&&(lm(e),dq(e,a,b,c,d,e.vb),k=eq(e,c.x,c.y)),!e.abort&&999999>k&&0!==eq(e,c.x,c.y)){fq(this,e,c.x,c.y,d,!0);d=this.m(2);if(4>this.sa)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.aa(2,d.x,d.y),this.B(3,d.x,d.y);else if(c=this.m(3),0===b||
180===b)eb(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.aa(2,b,a.y),this.aa(3,b,c.y)):eb(d.y,c.y)?(Math.abs(a.y-d.y)<=e.bp/2&&(this.aa(2,d.x,a.y),this.aa(3,c.x,a.y)),this.B(2,d.x,a.y)):this.aa(2,a.x,d.y);else if(90===b||270===b)eb(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.aa(2,a.x,b),this.aa(3,c.x,b)):eb(d.x,c.x)?(Math.abs(a.x-d.x)<=e.dp/2&&(this.aa(2,a.x,d.y),this.aa(3,a.x,c.y)),this.B(2,a.x,d.y)):this.aa(2,d.x,a.y);a=!0}else a=!1}else a=!1;a||(this.hi(l),this.hi(m))}};
G.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};function $h(a){if(null===a.h||!a.kj)return!1;var b=a.points.o,c=b.length;if(4>c)return!1;a=ja(a.h,!0,a.Qa,null);for(var d=1;d<c-2;d++){var e=b[d],g=b[d+1];if(!a.Dp(Math.min(e.x,g.x),Math.min(e.y,g.y),Math.abs(e.x-g.x),Math.abs(e.y-g.y)))return!0}return!1}
function fq(a,b,c,d,e,g){var h=b.dp,k=b.bp,l=eq(b,c,d),m=c,n=d;for(0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k;1<l&&eq(b,m,n)===l-1;)c=m,d=n,0===e?m+=h:90===e?n+=k:180===e?m-=h:n-=k,l-=1;if(g){if(1<l)if(180===e||0===e)c=Math.floor(c/h)*h+h/2;else if(90===e||270===e)d=Math.floor(d/k)*k+k/2}else c=Math.floor(c/h)*h+h/2,d=Math.floor(d/k)*k+k/2;1<l&&(g=e,m=c,n=d,0===e?(g=90,n+=k):90===e?(g=180,m-=h):180===e?(g=270,n-=k):270===e&&(g=0,m+=h),eq(b,m,n)===l-1?fq(a,b,m,n,g,!1):(m=c,n=d,0===e?(g=270,n-=k):90===
e?(g=0,m+=h):180===e?(g=90,n+=k):270===e&&(g=180,m-=h),eq(b,m,n)===l-1&&fq(a,b,m,n,g,!1)));a.tl(c,d)}G.prototype.findClosestSegment=function(a){u&&z.l(a,N,G,"findClosestSegment:p");var b=a.x;a=a.y;for(var c=this.m(0),d=this.m(1),e=ub(b,a,c.x,c.y,d.x,d.y),g=0,h=1;h<this.sa-1;h++){var c=this.m(h+1),k=ub(b,a,d.x,d.y,c.x,c.y),d=c;k<e&&(g=h,e=k)}return g};G.prototype.invalidateGeometry=G.prototype.qe=function(){this.kb=null};
z.w(G,{wh:"geometry"},function(){null===this.kb&&(this.An(),this.kb=this.makeGeometry());return this.kb});G.prototype.nn=function(a){if(!a){if(!1===this.Dg)return;a=this.gf();if(null!==this.kb&&(null===a||null!==a.wh))return}this.kb=this.makeGeometry();a=this.path;if(null!==a){a.kb=this.kb;for(var b=this.va.o,c=b.length,d=0;d<c;d++){var e=b[d];e!==a&&e.Ff&&e instanceof X&&(e.kb=this.kb)}}};
G.prototype.makeGeometry=function(){var a=this.sa;if(2>a){var b=new hf(jf),c=new kf(0,0);b.cc.add(c);return b}var d=!1,b=this.h;null!==b&&Tp(this)&&b.Sk.contains(this)&&null!==this.dw&&(d=!0);var c=b=0,e=this.m(0).copy(),g=e.copy(),b=this.Yc.o,h=this.computeCurve();if(h===Xi&&3<=a&&!td(this.cq,0))if(3===a)var k=this.m(1),b=Math.min(e.x,k.x),c=Math.min(e.y,k.y),k=this.m(2),b=Math.min(b,k.x),c=Math.min(c,k.y);else{if(this.rc)for(k=0;k<a;k++)c=b[k],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);else for(k=
3;k<a;k+=3)k+3>=a&&(k=a-1),b=this.m(k),g.x=Math.min(b.x,g.x),g.y=Math.min(b.y,g.y);b=g.x;c=g.y}else{for(k=0;k<a;k++)c=b[k],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);b=g.x;c=g.y}b-=this.rz.x;c-=this.rz.y;e.x-=b;e.y-=c;if(2!==a||Tp(this)){var l=z.v();0!==bq(this)&&gq(this,e,!0,g);R(l,e.x,e.y,!1,!1);if(h===Xi&&3<=a&&!td(this.cq,0))if(3===a)k=this.m(1),a=k.x-b,d=k.y-c,k=this.m(2).copy(),k.x-=b,k.y-=c,0!==cq(this)&&gq(this,k,!1,g),S(l,a,d,a,d,k.x,k.y);else if(this.rc){for(var g=new N(b,c),e=this.m(1).copy(),
h=new N(b,c),a=new N(b,c),d=this.m(0),m=null,n=this.cq/3,k=1;k<this.sa-1;k++){var m=this.m(k),p=d,q=m,r=this.m(hq(this,m,k,!1));if(!td(p.x,q.x)||!td(q.x,r.x))if(!td(p.y,q.y)||!td(q.y,r.y)){var s=n,t=h,v=a;isNaN(s)&&(s=this.cq/3);var x=p.x,p=p.y,y=q.x,q=q.y,A=r.x,r=r.y,C=s*iq(x,p,y,q),s=s*iq(y,q,A,r);td(p,q)&&td(y,A)&&(y>x?r>q?(t.x=y-C,t.y=q-C,v.x=y+s,v.y=q+s):(t.x=y-C,t.y=q+C,v.x=y+s,v.y=q-s):r>q?(t.x=y+C,t.y=q-C,v.x=y-s,v.y=q+s):(t.x=y+C,t.y=q+C,v.x=y-s,v.y=q-s));td(x,y)&&td(q,r)&&(q>p?(A>y?(t.x=
y-C,t.y=q-C,v.x=y+s):(t.x=y+C,t.y=q-C,v.x=y-s),v.y=q+s):(A>y?(t.x=y-C,t.y=q+C,v.x=y+s):(t.x=y+C,t.y=q+C,v.x=y-s),v.y=q-s));if(td(x,y)&&td(y,A)||td(p,q)&&td(q,r))x=.5*(x+A),p=.5*(p+r),t.x=x,t.y=p,v.x=x,v.y=p;1===k?(e.x=.5*(d.x+m.x),e.y=.5*(d.y+m.y)):2===k&&td(d.x,this.m(0).x)&&td(d.y,this.m(0).y)&&(e.x=.5*(d.x+m.x),e.y=.5*(d.y+m.y));S(l,e.x-b,e.y-c,h.x-b,h.y-c,m.x-b,m.y-c);g.set(h);e.set(a);d=m}}k=d.x;d=d.y;g=this.m(this.sa-1);k=.5*(k+g.x);d=.5*(d+g.y);S(l,a.x-b,a.y-c,k-b,d-c,g.x-b,g.y-c)}else for(k=
3;k<a;k+=3)d=this.m(k-2),k+3>=a&&(k=a-1),g=this.m(k-1),e=this.m(k),k===a-1&&0!==cq(this)&&(e=e.copy(),gq(this,e,!1,Id)),S(l,d.x-b,d.y-c,g.x-b,g.y-c,e.x-b,e.y-c);else{g=z.O();g.assign(this.m(0));for(k=1;k<a;){k=hq(this,g,k,1<k);t=this.m(k);if(k>=a-1){g!==t&&(0!==cq(this)&&(t=t.copy(),gq(this,t,!1,Id)),jq(this,l,-b,-c,g,t,d));break}k=hq(this,t,k+1,k<a-3);e=l;h=-b;m=-c;n=g;v=this.m(k);x=g;p=d;eb(n.y,t.y)&&eb(t.x,v.x)?(s=this.computeCorner(),s=Math.min(s,Math.abs(t.x-n.x)/2),s=y=Math.min(s,Math.abs(v.y-
t.y)/2),eb(s,0)?(jq(this,e,h,m,n,t,p),x.assign(t)):(q=t.x,A=t.y,r=q,C=A,q=t.x>n.x?t.x-s:t.x+s,C=v.y>t.y?t.y+y:t.y-y,jq(this,e,h,m,n,new N(q,A),p),zf(e,t.x+h,t.y+m,r+h,C+m),x.n(r,C))):eb(n.x,t.x)&&eb(t.y,v.y)?(s=this.computeCorner(),y=Math.min(s,Math.abs(t.y-n.y)/2),y=s=Math.min(y,Math.abs(v.x-t.x)/2),eb(s,0)?(jq(this,e,h,m,n,t,p),x.assign(t)):(q=t.x,C=A=t.y,A=t.y>n.y?t.y-y:t.y+y,r=v.x>t.x?t.x+s:t.x-s,jq(this,e,h,m,n,new N(q,A),p),zf(e,t.x+h,t.y+m,r+h,C+m),x.n(r,C))):(jq(this,e,h,m,n,t,p),x.assign(t))}z.A(g)}b=
l.q;z.u(l)}else l=this.m(1).copy(),l.x-=b,l.y-=c,0!==bq(this)&&gq(this,e,!0,g),0!==cq(this)&&gq(this,l,!1,g),b=new hf(mf),b.Ha=e.x,b.Da=e.y,b.L=l.x,b.M=l.y;return b};function iq(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return td(a,0)?b:td(b,0)?a:Math.sqrt(a*a+b*b)}
function gq(a,b,c,d){var e=a.sa;if(!(2>e))if(c){var g=a.m(1);c=g.x-d.x;d=g.y-d.y;g=iq(b.x,b.y,c,d);0!==g&&(e=2===e?.5*g:g,a=bq(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.m(e-2),c=g.x-d.x,d=g.y-d.y,g=iq(b.x,b.y,c,d),0!==g&&(e=2===e?.5*g:g,a=cq(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function hq(a,b,c,d){for(var e=a.sa,g=b;td(b.x,g.x)&&td(b.y,g.y);){if(c>=e)return e-1;g=a.m(c++)}if(!td(b.x,g.x)&&!td(b.y,g.y))return c-1;for(var h=g;td(b.x,g.x)&&td(g.x,h.x)&&(!d||(b.y>=g.y?g.y>=h.y:g.y<=h.y))||td(b.y,g.y)&&td(g.y,h.y)&&(!d||(b.x>=g.x?g.x>=h.x:g.x<=h.x));){if(c>=e)return e-1;h=a.m(c++)}return c-2}
function jq(a,b,c,d,e,g,h){if(!h&&Tp(a)){h=[];var k=0;a.isVisible()&&(k=kq(a,e,g,h));var l=e.x,l=e.y;if(0<k)if(eb(e.y,g.y))if(e.x<g.x)for(var m=0;m<k;){var n=Math.max(e.x,Math.min(h[m++]-5,g.x-10));b.lineTo(n+c,g.y+d);for(var l=n+c,p=Math.min(n+10,g.x);m<k;){var q=h[m];if(q<p+10)m++,p=Math.min(q+5,g.x);else break}q=(n+p)/2+c;q=g.y-10+d;n=p+c;p=g.y+d;a.Se===Pi?R(b,n,p,!1,!1):S(b,l,q,n,q,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.x,Math.max(h[m--]+5,g.x+10));b.lineTo(n+c,g.y+d);l=n+c;for(p=Math.max(n-
10,g.x);0<=m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,g.x);else break;q=g.y-10+d;n=p+c;p=g.y+d;a.Se===Pi?R(b,n,p,!1,!1):S(b,l,q,n,q,n,p)}else if(eb(e.x,g.x))if(e.y<g.y)for(m=0;m<k;){n=Math.max(e.y,Math.min(h[m++]-5,g.y-10));b.lineTo(g.x+c,n+d);l=n+d;for(p=Math.min(n+10,g.y);m<k;)if(q=h[m],q<p+10)m++,p=Math.min(q+5,g.y);else break;q=g.x-10+c;n=g.x+c;p+=d;a.Se===Pi?R(b,n,p,!1,!1):S(b,q,l,q,p,n,p)}else for(m=k-1;0<=m;){n=Math.min(e.y,Math.max(h[m--]+5,g.y+10));b.lineTo(g.x+c,n+d);l=n+d;for(p=Math.max(n-
10,g.y);0<=m;)if(q=h[m],q>p-10)m--,p=Math.max(q-5,g.y);else break;q=g.x-10+c;n=g.x+c;p+=d;a.Se===Pi?R(b,n,p,!1,!1):S(b,q,l,q,p,n,p)}}b.lineTo(g.x+c,g.y+d)}
function kq(a,b,c,d){var e=a.h;if(null===e||b.N(c))return 0;for(e=e.ln;e.next();){var g=e.value;if(null!==g&&g.visible)for(var g=g.mb.o,h=g.length,k=0;k<h;k++){var l=g[k];if(l instanceof G){if(l===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(l.isVisible()&&Tp(l)){var m=l.tn;m.F()&&a.tn.Jg(m)&&!a.usesSamePort(l)&&(m=l.path,null!==m&&m.oj()&&lq(b,c,d,l))}}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function lq(a,b,c,d){for(var e=eb(a.y,b.y),g=d.sa,h=d.m(0),k=z.O(),l=1;l<g;l++){var m=d.m(l);if(l<g-1){var n=d.m(l+1);if(h.y===m.y&&m.y===n.y){if(m.x>h.x&&n.x>m.x||m.x<h.x&&n.x<m.x)m=n,l++}else h.x===m.x&&m.x===n.x&&(m.y>h.y&&n.y>m.y||m.y<h.y&&n.y<m.y)&&(m=n,l++)}a:{var n=k,p=a.x,q=a.y,r=b.x,s=b.y,t=h.x,h=h.y,v=m.x,x=m.y;if(!eb(p,r)){if(eb(q,s)&&eb(t,v)&&Math.min(p,r)<t&&Math.max(p,r)>t&&Math.min(h,x)<q&&Math.max(h,x)>q&&!eb(h,x)){n.x=t;n.y=q;n=!0;break a}}else if(!eb(q,s)&&eb(h,x)&&Math.min(q,s)<
h&&Math.max(q,s)>h&&Math.min(t,v)<p&&Math.max(t,v)>p&&!eb(t,v)){n.x=p;n.y=h;n=!0;break a}n.x=0;n.y=0;n=!1}n&&(e?c.push(k.x):c.push(k.y));h=m}z.A(k)}z.w(G,{Ct:"firstPickIndex"},function(){return 2>=this.sa?0:this.rc||Wp(this)!==Yb?1:0});z.w(G,{qx:"lastPickIndex"},function(){var a=this.sa;return 0===a?0:2>=a?a-1:this.rc||Xp(this)!==Yb?a-2:a-1});function Tp(a){a=a.Se;return a===Oi||a===Pi}function Vp(a,b){if(b||Tp(a)){var c=a.h;null===c||c.Sk.contains(a)||null===a.dw||c.Sk.add(a,a.dw)}}
function Ri(a,b){var c=a.layer;if(null!==c&&c.visible&&!c.Nc){var d=c.h;if(null!==d)for(var e=!1,d=d.ln;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=!0,h=!1,g=g.mb.o,k=g.length,l=0;l<k;l++){var m=g[l];m instanceof G&&(m===a?h=!0:h&&mq(a,m,b))}else if(e)for(g=g.mb.o,k=g.length,l=0;l<k;l++)m=g[l],m instanceof G&&mq(a,m,b)}}}function mq(a,b,c){if(null!==b&&null!==b.kb&&Tp(b)){var d=b.tn;d.F()&&(a.tn.Jg(d)||c.Jg(d))&&(a.usesSamePort(b)||b.qe())}}
G.prototype.usesSamePort=function(a){var b=this.sa,c=a.sa;if(0<b&&0<c){var d=this.m(0),e=a.m(0);if(d.Mc(e))return!0;b=this.m(b-1);a=a.m(c-1);if(b.Mc(a)||d.Mc(a)||b.Mc(e))return!0}else if(this.Y===a.Y||this.da===a.da||this.Y===a.da||this.da===a.Y)return!0;return!1};
G.prototype.isVisible=function(){if(!D.prototype.isVisible.call(this))return!1;var a=this.Qa,b=!0,c=this.h;null!==c&&(b=c.ce);var d=this.Y;if(null!==d){if(this.Oc&&b&&!d.wd)return!1;if(d===a)return!0;for(c=d;null!==c;){if(c.od===this)return!0;c=c.Qa}c=d.findVisibleNode();if(null===c||c===a)return!1}d=this.da;if(null!==d){if(this.Oc&&!b&&!d.wd)return!1;if(d===a)return!0;for(c=d;null!==c;){if(c.od===this)return!0;c=c.Qa}b=d.findVisibleNode();if(null===b||b===a)return!1}return!0};
G.prototype.xd=function(a){D.prototype.xd.call(this,a);null!==this.si&&this.si.zp();if(null!==this.Ke)for(var b=this.Ke.i;b.next();)b.value.xd(a)};z.defineProperty(G,{it:"adjusting"},function(){return this.mq},function(a){var b=this.mq;b!==a&&(u&&z.Ba(a,G,G,"adjusting"),this.mq=a,this.j("adjusting",b,a))});z.defineProperty(G,{Mz:"corner"},function(){return this.Fq},function(a){var b=this.Fq;b!==a&&(u&&z.g(a,"number",G,"corner"),this.Fq=a,this.qe(),this.j("corner",b,a))});
z.defineProperty(G,{Se:"curve"},function(){return this.Iq},function(a){var b=this.Iq;b!==a&&(u&&z.Ba(a,G,G,"curve"),this.Iq=a,this.qc(),this.qe(),Vp(this,b===Pi||b===Oi||a===Pi||a===Oi),this.j("curve",b,a))});z.defineProperty(G,{Sw:"curviness"},function(){return this.Jq},function(a){var b=this.Jq;b!==a&&(u&&z.g(a,"number",G,"curviness"),this.Jq=a,this.qc(),this.qe(),this.j("curviness",b,a))});
z.defineProperty(G,{Ix:"routing"},function(){return this.Cm},function(a){var b=this.Cm;b!==a&&(u&&z.Ba(a,G,G,"routing"),this.Cm=a,this.Ei=null,this.qc(),Vp(this,2===(b.value&2)||2===(a.value&2)),this.j("routing",b,a))});z.defineProperty(G,{cq:"smoothness"},function(){return this.Ms},function(a){var b=this.Ms;b!==a&&(u&&z.g(a,"number",G,"smoothness"),this.Ms=a,this.qe(),this.j("smoothness",b,a))});
function Rp(a){var b=a.qg;if(null!==b){var c=a.Cg;if(null!==c){var d=a.Qh;a=a.fi;for(var e=null,g=null,h=b.mc.o,k=h.length,l=0;l<k;l++){var m=h[l];if(m.qg===b&&m.Qh===d&&m.Cg===c&&m.fi===a||m.qg===c&&m.Qh===a&&m.Cg===b&&m.fi===d)null===g?g=m:(null===e&&(e=[],e.push(g)),e.push(m))}if(null!==e){g=Ep(b,c,d,a);null===g&&(g=new xk,g.Op=b,g.Ax=d,g.du=c,g.Bx=a,Dp(b,g),Dp(c,g));g.links=e;for(l=0;l<e.length;l++)m=e[l],m.si=g;g.zp()}}}}
function Qp(a){var b=a.si;null!==b&&(a.si=null,a=b.links.indexOf(a),0<=a&&(z.ii(b.links,a),b.zp()))}function xk(){z.kc(this);this.Av=!1;this.Bx=this.du=this.Ax=this.Op=null;this.links=[]}xk.prototype.zp=function(){if(!this.Av){var a=this.links;0<a.length&&(a=a[0].h,null!==a&&a.jC.add(this))}this.Av=!0};
xk.prototype.dB=function(){if(this.Av){this.Av=!1;var a=this.links;if(0<a.length){var b=a[0],c=b.h;b.arrangeBundledLinks(a,null===c||c.jn);1===a.length&&(b.si=null,a.length=0)}0===a.length&&(a=this.Op,null!==this&&null!==a.Jh&&a.Jh.remove(this),a=this.du,null!==this&&null!==a.Jh&&a.Jh.remove(this))}};z.Yd(xk,{Op:!0,Ax:!0,du:!0,Bx:!0,links:!0,spacing:!0});
function jm(){z.kc(this);this.UA=this.group=null;this.yp=!0;this.abort=!1;this.Tf=this.Sf=1;this.Hr=this.Gr=-1;this.Ad=this.Rd=8;this.lc=null;this.fG=!1;this.MF=22;this.VE=111}z.Yd(jm,{group:!0,UA:!0,yp:!0,abort:!0,fG:!0,MF:!0,VE:!0});
jm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.Sf=Math.floor((a.x-this.Rd)/this.Rd)*this.Rd;this.Tf=Math.floor((b-this.Ad)/this.Ad)*this.Ad;this.Gr=Math.ceil((c+2*this.Rd)/this.Rd)*this.Rd;this.Hr=Math.ceil((d+2*this.Ad)/this.Ad)*this.Ad;a=1+(Math.ceil((this.Gr-this.Sf)/this.Rd)|0);b=1+(Math.ceil((this.Hr-this.Tf)/this.Ad)|0);if(null===this.lc||this.Nm<a-1||this.Om<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],g=0;g<=b;g++)e[g]=0;c[d]=e}this.lc=
c;this.Nm=a-1;this.Om=b-1}if(null!==this.lc)for(a=0;a<=this.Nm;a++)for(b=0;b<=this.Om;b++)this.lc[a][b]=999999}};z.w(jm,{vb:null},function(){return new w(this.Sf,this.Tf,this.Gr-this.Sf,this.Hr-this.Tf)});z.defineProperty(jm,{dp:null},function(){return this.Rd},function(a){0<a&&a!==this.Rd&&(this.Rd=a,this.initialize(this.vb))});z.defineProperty(jm,{bp:null},function(){return this.Ad},function(a){0<a&&a!==this.Ad&&(this.Ad=a,this.initialize(this.vb))});
function nq(a,b,c){return a.Sf<=b&&b<=a.Gr&&a.Tf<=c&&c<=a.Hr}function eq(a,b,c){if(!nq(a,b,c))return 0;b-=a.Sf;b/=a.Rd;c-=a.Tf;c/=a.Ad;return a.lc[b|0][c|0]}function mm(a,b,c){nq(a,b,c)&&(b-=a.Sf,b/=a.Rd,c-=a.Tf,c/=a.Ad,a.lc[b|0][c|0]=0)}function lm(a){if(null!==a.lc)for(var b=0;b<=a.Nm;b++)for(var c=0;c<=a.Om;c++)1<=a.lc[b][c]&&(a.lc[b][c]|=999999)}
jm.prototype.Dp=function(a,b,c,d){if(a>this.Gr||a+c<this.Sf||b>this.Hr||b+d<this.Tf)return!0;a=(a-this.Sf)/this.Rd|0;b=(b-this.Tf)/this.Ad|0;c=Math.max(0,c)/this.Rd+1|0;var e=Math.max(0,d)/this.Ad+1|0;0>a&&(c+=a,a=0);0>b&&(e+=b,b=0);if(0>c||0>e)return!0;d=Math.min(a+c-1,this.Nm)|0;for(c=Math.min(b+e-1,this.Om)|0;a<=d;a++)for(e=b;e<=c;e++)if(0===this.lc[a][e])return!1;return!0};
function oq(a,b,c,d,e,g,h,k,l){if(!(b<g||b>h||c<k||c>l)){var m,n;m=b|0;n=c|0;var p=a.lc[m][n];if(1<=p&&999999>p)for(e?n+=d:m+=d,p+=1;g<=m&&m<=h&&k<=n&&n<=l&&!(p>=a.lc[m][n]);)a.lc[m][n]=p,p+=1,e?n+=d:m+=d;m=e?n:m;if(e)if(0<d)for(c+=d;c<m;c+=d)oq(a,b,c,1,!e,g,h,k,l),oq(a,b,c,-1,!e,g,h,k,l);else for(c+=d;c>m;c+=d)oq(a,b,c,1,!e,g,h,k,l),oq(a,b,c,-1,!e,g,h,k,l);else if(0<d)for(b+=d;b<m;b+=d)oq(a,b,c,1,!e,g,h,k,l),oq(a,b,c,-1,!e,g,h,k,l);else for(b+=d;b>m;b+=d)oq(a,b,c,1,!e,g,h,k,l),oq(a,b,c,-1,!e,g,h,
k,l)}}function pq(a,b,c,d,e,g,h,k,l,m,n){for(var p=b|0,q=c|0,r=a.lc[p][q];0===r&&p>k&&p<l&&q>m&&q<n;)if(h?q+=g:p+=g,r=a.lc[p][q],1>=Math.abs(p-d)&&1>=Math.abs(q-e))return a.abort=!0,0;p=b|0;q=c|0;r=a.lc[p][q];b=1;for(a.lc[p][q]=b;0===r&&p>k&&p<l&&q>m&&q<n;)h?q+=g:p+=g,r=a.lc[p][q],a.lc[p][q]=b,b+=1;return h?q:p}
function dq(a,b,c,d,e,g){if(null!==a.lc){a.abort=!1;var h=b.x,k=b.y;if(nq(a,h,k)){var h=h-a.Sf,h=h/a.Rd,k=k-a.Tf,k=k/a.Ad,l=d.x,m=d.y;if(nq(a,l,m))if(l-=a.Sf,l/=a.Rd,m-=a.Tf,m/=a.Ad,1>=Math.abs(h-l)&&1>=Math.abs(k-m))a.abort=!0;else{var n=g.x;b=g.y;d=g.x+g.width;var p=g.y+g.height,n=n-a.Sf,n=n/a.Rd;b-=a.Tf;b/=a.Ad;d-=a.Sf;d/=a.Rd;p-=a.Tf;p/=a.Ad;g=Math.max(0,Math.min(a.Nm,n|0));d=Math.min(a.Nm,Math.max(0,d|0));b=Math.max(0,Math.min(a.Om,b|0));var p=Math.min(a.Om,Math.max(0,p|0)),h=h|0,k=k|0,l=l|0,
m=m|0,n=h,q=k,r=0===c||90===c?1:-1;(c=90===c||270===c)?q=pq(a,h,k,l,m,r,c,g,d,b,p):n=pq(a,h,k,l,m,r,c,g,d,b,p);if(!a.abort){a:{c=0===e||90===e?1:-1;e=90===e||270===e;for(var r=l|0,s=m|0,t=a.lc[r][s];0===t&&r>g&&r<d&&s>b&&s<p;)if(e?s+=c:r+=c,t=a.lc[r][s],1>=Math.abs(r-h)&&1>=Math.abs(s-k)){a.abort=!0;break a}r=l|0;s=m|0;t=a.lc[r][s];for(a.lc[r][s]=999999;0===t&&r>g&&r<d&&s>b&&s<p;)e?s+=c:r+=c,t=a.lc[r][s],a.lc[r][s]=999999}a.abort||(oq(a,n,q,1,!1,g,d,b,p),oq(a,n,q,-1,!1,g,d,b,p),oq(a,n,q,1,!0,g,d,
b,p),oq(a,n,q,-1,!0,g,d,b,p))}}}}}function $p(){z.kc(this);this.port=this.Pc=null;this.gg=[];this.Np=!1}z.Yd($p,{Pc:!0,port:!0,gg:!0,Np:!0});$p.prototype.toString=function(){for(var a=this.gg,b=this.Pc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];null!==d&&(b+="\n  "+d.toString())}return b};
function qq(a,b,c,d){b=b.offsetY;switch(b){case z.ed:return 90;case z.Tc:return 180;case z.qd:return 270;case z.fd:return 0}switch(b){case z.ed|z.qd:return 180<c?270:90;case z.Tc|z.fd:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case z.Tc|z.qd:return c>a&&c<=180+a?180:270;case z.qd|z.fd:return c>180-a&&c<=360-a?270:0;case z.fd|z.ed:return c>a&&c<=180+a?90:0;case z.ed|z.Tc:return c>180-a&&c<=360-a?180:90;case z.Tc|z.qd|z.fd:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case z.qd|z.fd|z.ed:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case z.fd|z.ed|z.Tc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case z.ed|z.Tc|z.qd:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(z.Tc|z.qd|z.fd|z.ed)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}$p.prototype.zp=function(){this.gg.length=0};
function aq(a,b){var c=a.gg;if(0===c.length){a:if(!a.Np){c=a.Np;a.Np=!0;var d,e=null,g=a.Pc,g=g instanceof F?g:null;if(null===g||g.se)d=a.Pc.pE(a.port.zd);else{if(!g.W.F()){a.Np=c;break a}e=g;d=e.oE()}var h=a.gg.length=0,k=a.port.eb(Zb,z.O()),l=a.port.eb(ic,z.O()),g=z.zk(k.x,k.y,0,0);g.wj(l);z.A(k);z.A(l);k=z.Tb(g.x+g.width/2,g.y+g.height/2);for(d=d.i;d.next();)if(l=d.value,l.isVisible()){var m=Yb,n=l.md===a.port||l.Y.mi(e),m=n?Wp(l,a.port):Xp(l,a.port);if(m.lj()&&(n=n?l.Qd:l.md,null!==n)){var p=
n.ca;if(null!==p){var n=l.computeOtherPoint(p,n),p=k.Ec(n),m=qq(g,m,p,l.rc),q=0;0===m?(q=z.fd,180<p&&(p-=360)):q=90===m?z.ed:180===m?z.Tc:z.qd;m=a.gg[h];void 0===m?(m=new rq(l,p,q),a.gg[h]=m):(m.link=l,m.angle=p,m.te=q);m.yx.set(n);h++}}}z.A(k);a.gg.sort($p.prototype.KI);e=a.gg.length;k=-1;for(h=d=0;h<e;h++)m=a.gg[h],void 0!==m&&(m.te!==k&&(k=m.te,d=0),m.wp=d,d++);k=-1;d=0;for(h=e-1;0<=h;h--)m=a.gg[h],void 0!==m&&(m.te!==k&&(k=m.te,d=m.wp+1),m.$m=d);h=a.gg;n=a.port;e=a.Pc.SI;k=z.O();d=z.O();l=z.O();
m=z.O();n.eb(Zb,k);n.eb(cc,d);n.eb(ic,l);n.eb(gc,m);var r=q=p=n=0;if(e===Cp)for(var s=0;s<h.length;s++){var t=h[s];if(null!==t){var v=t.link.computeThickness();switch(t.te){case z.ed:q+=v;break;case z.Tc:r+=v;break;case z.qd:n+=v;break;default:case z.fd:p+=v}}}for(var x=0,y=0,A=1,s=0;s<h.length;s++)if(t=h[s],null!==t){var C,L;if(x!==t.te){x=t.te;switch(x){case z.ed:C=l;L=m;break;case z.Tc:C=m;L=k;break;case z.qd:C=k;L=d;break;default:case z.fd:C=d,L=l}var H=L.x-C.x;L=L.y-C.y;switch(x){case z.ed:q>
Math.abs(H)?(A=Math.abs(H)/q,q=Math.abs(H)):A=1;break;case z.Tc:r>Math.abs(L)?(A=Math.abs(L)/r,r=Math.abs(L)):A=1;break;case z.qd:n>Math.abs(H)?(A=Math.abs(H)/n,n=Math.abs(H)):A=1;break;default:case z.fd:p>Math.abs(L)?(A=Math.abs(L)/p,p=Math.abs(L)):A=1}y=0}var U=t.Fp;if(e===Cp){v=t.link.computeThickness();v*=A;U.set(C);switch(x){case z.ed:U.x=C.x+H/2+q/2-y-v/2;break;case z.Tc:U.y=C.y+L/2+r/2-y-v/2;break;case z.qd:U.x=C.x+H/2-n/2+y+v/2;break;default:case z.fd:U.y=C.y+L/2-p/2+y+v/2}y+=v}else v=.5,
e===zp&&(v=(t.wp+1)/(t.$m+1)),U.x=C.x+H*v,U.y=C.y+L*v}z.A(k);z.A(d);z.A(l);z.A(m);C=a.gg;for(H=0;H<C.length;H++)L=C[H],null!==L&&(L.Ww=a.computeEndSegmentLength(L));a.Np=c;z.dc(g)}c=a.gg}for(g=0;g<c.length;g++)if(C=c[g],null!==C&&C.link===b)return C;return null}$p.prototype.KI=function(a,b){return a===b?0:null===a?-1:null===b?1:a.te<b.te?-1:a.te>b.te?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
$p.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.Pc,this.port,Yb,b.md===this.port),d=a.wp;if(0>d)return c;var e=a.$m;if(1>=e||!b.rc)return c;var b=a.yx,g=a.Fp;if(a.te===z.Tc||a.te===z.ed)d=e-1-d;return((a=a.te===z.Tc||a.te===z.fd)?b.y<g.y:b.x<g.x)?c+8*d:(a?b.y===g.y:b.x===g.x)?c:c+8*(e-1-d)};function rq(a,b,c){this.link=a;this.angle=b;this.te=c;this.yx=new N;this.$m=this.wp=0;this.Fp=new N;this.Ww=0}
z.Yd(rq,{link:!0,angle:!0,te:!0,yx:!0,wp:!0,$m:!0,Fp:!0,Ww:!0});rq.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.te.toString()+":"+this.wp.toString()+"/"+this.$m.toString()+" "+this.Fp.toString()+" "+this.Ww.toString()+" "+this.yx.toString()};function Fm(){this.hk=this.Hj=Pc;this.fk=this.Fj=NaN;this.ek=this.Ej=Ap;this.gk=this.Gj=NaN}
Fm.prototype.copy=function(){var a=new Fm;a.Hj=this.Hj.V();a.hk=this.hk.V();a.Fj=this.Fj;a.fk=this.fk;a.Ej=this.Ej;a.ek=this.ek;a.Gj=this.Gj;a.gk=this.gk;return a};function F(a){0===arguments.length?E.call(this,gj):E.call(this,a);this.Jr=new K(D);this.vm=new K(F);this.il=this.Kr=this.Ir=null;this.$s=!1;this.pr=!0;this.at=!1;this.Lb=this.Qs=null;this.xq=!1;this.yq=!0;this.er=this.zq=!1;this.he=new yg;this.he.group=this;this.fz=!1}z.Ra(F,E);z.ia("Group",F);
F.prototype.cloneProtected=function(a){E.prototype.cloneProtected.call(this,a);a.Ir=this.Ir;a.Kr=this.Kr;a.il=this.il;a.$s=this.$s;a.pr=this.pr;a.at=this.at;a.Qs=this.Qs;var b=a.zt(function(a){return a instanceof aj});a.Lb=b instanceof aj?b:null;a.xq=this.xq;a.yq=this.yq;a.zq=this.zq;a.er=this.er;null!==this.he?(a.he=this.he.copy(),a.he.group=a):(null!==a.he&&(a.he.group=null),a.he=null)};
F.prototype.ki=function(a){E.prototype.ki.call(this,a);var b=a.mp();for(a=a.Hc;a.next();){var c=a.value;c.Q();c.I(8);c.pt();if(c instanceof E)c.mf(b);else if(c instanceof G)for(c=c.Hf;c.next();)c.value.mf(b)}};
F.prototype.sn=function(a,b,c,d,e,g,h){if(a===Wf&&"elements"===b)if(e instanceof aj){var k=e;null===this.Lb?this.Lb=k:this.Lb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else e instanceof I&&(k=e.zt(function(a){return a instanceof aj}),k instanceof aj&&(null===this.Lb?this.Lb=k:this.Lb!==k&&z.k("Cannot insert a second Placeholder into the visual tree of a Group.")));else a===Xf&&"elements"===b&&null!==this.Lb&&(d===this.Lb?this.Lb=null:d instanceof I&&this.Lb.Pl(d)&&
(this.Lb=null));E.prototype.sn.call(this,a,b,c,d,e,g,h)};F.prototype.aj=function(a,b,c,d){this.hl=this.Lb;I.prototype.aj.call(this,a,b,c,d)};F.prototype.Ql=function(){if(!E.prototype.Ql.call(this))return!1;for(var a=this.Hc;a.next();){var b=a.value;if(b instanceof E){if(b.isVisible()&&nl(b))return!1}else if(b instanceof G&&b.isVisible()&&nl(b)&&b.Y!==this&&b.da!==this)return!1}return!0};z.w(F,{placeholder:"placeholder"},function(){return this.Lb});
z.defineProperty(F,{UD:"computesBoundsAfterDrag"},function(){return this.xq},function(a){var b=this.xq;b!==a&&(z.g(a,"boolean",F,"computesBoundsAfterDrag"),this.xq=a,this.j("computesBoundsAfterDrag",b,a))});z.defineProperty(F,{Pw:"computesBoundsIncludingLinks"},function(){return this.yq},function(a){z.g(a,"boolean",F,"computesBoundsIncludingLinks");var b=this.yq;b!==a&&(this.yq=a,this.j("computesBoundsIncludingLinks",b,a))});
z.defineProperty(F,{fH:"computesBoundsIncludingLocation"},function(){return this.zq},function(a){z.g(a,"boolean",F,"computesBoundsIncludingLocation");var b=this.zq;b!==a&&(this.zq=a,this.j("computesBoundsIncludingLocation",b,a))});z.defineProperty(F,{TH:"handlesDragDropForMembers"},function(){return this.er},function(a){z.g(a,"boolean",F,"handlesDragDropForMembers");var b=this.er;b!==a&&(this.er=a,this.j("handlesDragDropForMembers",b,a))});z.w(F,{Hc:"memberParts"},function(){return this.Jr.i});
function vp(a,b){if(a.Jr.add(b)){b instanceof F&&a.vm.add(b);var c=a.CI;if(null!==c){var d=!0,e=a.h;null!==e&&(d=e.$a,e.$a=!0);c(a,b);null!==e&&(e.$a=d)}a.isVisible()&&a.se||b.xd(!1)}b instanceof G&&!a.Pw||(c=a.Lb,null===c&&(c=a),c.Q())}function up(a,b){if(a.Jr.remove(b)){b instanceof F&&a.vm.remove(b);var c=a.DI;if(null!==c){var d=!0,e=a.h;null!==e&&(d=e.$a,e.$a=!0);c(a,b);null!==e&&(e.$a=d)}a.isVisible()&&a.se||b.xd(!0)}b instanceof G&&!a.Pw||(c=a.Lb,null===c&&(c=a),c.Q())}
F.prototype.bn=function(){if(0<this.Jr.count){var a=this.h;if(null!==a)for(var b=this.Jr.copy().i;b.next();)a.remove(b.value)}E.prototype.bn.call(this)};z.defineProperty(F,{Sb:"layout"},function(){return this.he},function(a){var b=this.he;b!==a&&(null!==a&&z.l(a,yg,F,"layout"),null!==b&&(b.h=null,b.group=null),this.he=a,null!==a&&(a.h=this.h,a.group=this),this.j("layout",b,a))});
z.defineProperty(F,{CI:"memberAdded"},function(){return this.Ir},function(a){var b=this.Ir;b!==a&&(null!==a&&z.g(a,"function",F,"memberAdded"),this.Ir=a,this.j("memberAdded",b,a))});z.defineProperty(F,{DI:"memberRemoved"},function(){return this.Kr},function(a){var b=this.Kr;b!==a&&(null!==a&&z.g(a,"function",F,"memberRemoved"),this.Kr=a,this.j("memberRemoved",b,a))});
z.defineProperty(F,{qA:"memberValidation"},function(){return this.il},function(a){var b=this.il;b!==a&&(null!==a&&z.g(a,"function",F,"memberValidation"),this.il=a,this.j("memberValidation",b,a))});F.prototype.canAddMembers=function(a){var b=this.h;if(null===b)return!1;b=b.wb;for(a=nh(a).i;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0};
F.prototype.addMembers=function(a,b){var c=this.h;if(null===c)return!1;for(var c=c.wb,d=!0,e=nh(a).i;e.next();){var g=e.value;!b||c.isValidMember(this,g)?g.Qa=this:d=!1}return d};z.defineProperty(F,{zJ:"ungroupable"},function(){return this.$s},function(a){var b=this.$s;b!==a&&(z.g(a,"boolean",F,"ungroupable"),this.$s=a,this.j("ungroupable",b,a))});F.prototype.canUngroup=function(){if(!this.zJ)return!1;var a=this.layer;if(null!==a&&!a.Jw)return!1;a=a.h;return null===a||a.Jw?!0:!1};
F.prototype.mf=function(a){void 0===a&&(a=null);E.prototype.mf.call(this,a);for(var b=this.oE();b.next();){var c=b.value;if(null===a||!a.contains(c)){var d=c.Y;null!==d&&d!==this&&d.mi(this)&&!d.isVisible()?c.qc():(d=c.da,null!==d&&d!==this&&d.mi(this)&&!d.isVisible()&&c.qc())}}};F.prototype.findExternalLinksConnected=F.prototype.oE=function(){var a=this.mp();a.add(this);for(var b=new K(G),c=a.i;c.next();){var d=c.value;if(d instanceof E)for(d=d.ee;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.i};
F.prototype.findExternalNodesConnected=function(){var a=this.mp();a.add(this);for(var b=new K(E),c=a.i;c.next();){var d=c.value;if(d instanceof E)for(d=d.ee;d.next();){var e=d.value,g=e.Y;a.contains(g)&&g!==this||b.add(g);e=e.da;a.contains(e)&&e!==this||b.add(e)}}return b.i};F.prototype.findContainingGroupChain=function(){function a(b,d){null!==b&&(d.add(b),a(b.Qa,d))}var b=new K(D);a(this,b);return b};
F.prototype.findSubGraphParts=F.prototype.mp=function(){var a=new K(D);hh(a,this,!0,0,!0);a.remove(this);return a};F.prototype.xd=function(a){E.prototype.xd.call(this,a);for(var b=this.Hc;b.next();)b.value.xd(a)};F.prototype.collapseSubGraph=F.prototype.collapseSubGraph=function(){var a=this.h;if(null!==a&&!a.xh){a.xh=!0;var b=this.mp();sq(this,b,a.Va,this);a.xh=!1}};
function sq(a,b,c,d){for(var e=a.Hc;e.next();){var g=e.value;g.xd(!1);if(g instanceof F){var h=g;h.se&&(h.fB=h.se,sq(h,b,c,d))}if(g instanceof E)g.mf(b),fk(c,g,d);else if(g instanceof G)for(g=g.Hf;g.next();)g.value.mf(b)}a.se=!1}F.prototype.expandSubGraph=F.prototype.expandSubGraph=function(){var a=this.h;if(null!==a&&!a.xh){a.xh=!0;var b=this.mp();tq(this,b,a.Va,this);a.xh=!1}};
function tq(a,b,c,d){for(var e=a.Hc;e.next();){var g=e.value;g.xd(!0);if(g instanceof F){var h=g;h.fB&&(h.fB=!1,tq(h,b,c,d))}if(g instanceof E)g.mf(b),ek(c,g,d);else if(g instanceof G)for(g=g.Hf;g.next();)g.value.mf(b)}a.se=!0}
z.defineProperty(F,{se:"isSubGraphExpanded"},function(){return this.pr},function(a){var b=this.pr;if(b!==a){z.g(a,"boolean",F,"isSubGraphExpanded");this.pr=a;var c=this.h;this.j("isSubGraphExpanded",b,a);b=this.pJ;if(null!==b){var d=!0;null!==c&&(d=c.$a,c.$a=!0);b(this);null!==c&&(c.$a=d)}null!==c&&c.pa.qb?null!==this.Lb&&this.Lb.Q():a?this.expandSubGraph():this.collapseSubGraph()}});
z.defineProperty(F,{fB:"wasSubGraphExpanded"},function(){return this.at},function(a){var b=this.at;b!==a&&(z.g(a,"boolean",F,"wasSubGraphExpanded"),this.at=a,this.j("wasSubGraphExpanded",b,a))});z.defineProperty(F,{pJ:"subGraphExpandedChanged"},function(){return this.Qs},function(a){var b=this.Qs;b!==a&&(null!==a&&z.g(a,"function",F,"subGraphExpandedChanged"),this.Qs=a,this.j("subGraphExpandedChanged",b,a))});
F.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);var c=a.x-c,b=a.y-b,d=z.Tb(c,b);E.prototype.move.call(this,a);for(a=this.mp().i;a.next();){var e=a.value;if(!(e instanceof G||e instanceof E&&e.Df)){var g=e.position,h=e.location;g.F()?(d.x=g.x+c,d.y=g.y+b,e.position=d):h.F()&&(d.x=h.x+c,d.y=h.y+b,e.location=d)}}for(a.reset();a.next();)e=a.value,e instanceof G&&(g=e.position,d.x=g.x+c,d.y=g.y+b,e.move(d));z.A(d)};
function aj(){O.call(this);this.df=Kd;this.ws=new w(NaN,NaN,NaN,NaN)}z.Ra(aj,O);z.ia("Placeholder",aj);aj.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.df=this.df.V();a.ws=this.ws.copy()};aj.prototype.mk=function(a){if(null===this.background&&null===this.wl)return!1;var b=this.Ga;return Ib(0,0,b.width,b.height,a.x,a.y)};
aj.prototype.Ip=function(){var a=this.ca;null!==a&&(a instanceof F||a instanceof da)||z.k("Placeholder is not inside a Group or Adornment.");if(a instanceof F){var b=this.computeBorder(this.ws),c=this.Wc;yb(c,b.width||0,b.height||0);Jm(this,0,0,c.width,c.height);for(var c=a.Hc,d=!1;c.next();)if(c.value.isVisible()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new N,c.ru(b,a.of),a.location=new N(c.x,c.y))}else{var b=this.Aa,c=this.Wc,d=this.padding,e=d.left+d.right,g=d.top+d.bottom;if(b.F())yb(c,b.width+
e||0,b.height+g||0),Jm(this,-d.left,-d.top,c.width,c.height);else{var h=a.fc,k=h.eb(Zb,z.O()),b=z.zk(k.x,k.y,0,0);b.wj(h.eb(ic,k));b.wj(h.eb(cc,k));b.wj(h.eb(gc,k));a.Li.n(b.x,b.y);yb(c,b.width+e||0,b.height+g||0);Jm(this,-d.left,-d.top,c.width,c.height);z.A(k);z.dc(b)}}};aj.prototype.aj=function(a,b,c,d){var e=this.W;e.x=a;e.y=b;e.width=c;e.height=d};
aj.prototype.computeBorder=function(a){var b=this.ca;if(b instanceof F){var c=b;if(c.UD&&this.ws.F()){var d=c.h;if(null!==d&&(d=d.cb,d instanceof lh&&!d.Uq&&null!==d.hc&&!d.hc.contains(c)))return a.assign(this.ws),a}}var c=z.lg(),d=this.computeMemberBounds(c),e=this.padding;a.n(d.x-e.left,d.y-e.top,d.width+e.left+e.right,d.height+e.top+e.bottom);z.dc(c);b instanceof F&&(c=b,c.fH&&c.location.F()&&a.wj(c.location));return a};
aj.prototype.computeMemberBounds=function(a){if(!(this.ca instanceof F))return a.n(0,0,0,0),a;for(var b=this.ca,c=Infinity,d=Infinity,e=-Infinity,g=-Infinity,h=b.Hc;h.next();){var k=h.value;if(k.isVisible()){if(k instanceof G){var l=k;if(!b.Pw)continue;if(ml(l))continue;if(l.Y===b||l.da===b)continue}k=k.W;k.left<c&&(c=k.left);k.top<d&&(d=k.top);k.right>e&&(e=k.right);k.bottom>g&&(g=k.bottom)}}isFinite(c)&&isFinite(d)?a.n(c,d,e-c,g-d):(b=b.location,c=this.padding,a.n(b.x+c.left,b.y+c.top,0,0));return a};
z.defineProperty(aj,{padding:"padding"},function(){return this.df},function(a){"number"===typeof a?((isNaN(a)||0>a)&&z.ka(a,">= 0",aj,"padding"),a=new Db(a)):(z.l(a,Db,aj,"padding"),(isNaN(a.left)||0>a.left)&&z.ka(a.left,">= 0",aj,"padding:value.left"),(isNaN(a.right)||0>a.right)&&z.ka(a.right,">= 0",aj,"padding:value.right"),(isNaN(a.top)||0>a.top)&&z.ka(a.top,">= 0",aj,"padding:value.top"),(isNaN(a.bottom)||0>a.bottom)&&z.ka(a.bottom,">= 0",aj,"padding:value.bottom"));var b=this.df;b.N(a)||(this.df=
a=a.V(),this.j("padding",b,a))});function yg(){0<arguments.length&&z.pd(yg);z.kc(this);this.Ry=this.Z=null;this.Lj=this.lr=!0;this.ur=!1;this.pq=(new N(0,0)).freeze();this.nr=this.or=!0;this.VB="";this.to=!1;this.gz=null}z.ia("Layout",yg);yg.prototype.cloneProtected=function(a){a.lr=this.lr;a.Lj=this.Lj;a.ur=this.ur;a.pq.assign(this.pq);a.or=this.or;a.nr=this.nr;a.VB=this.VB;this.Lj||(a.to=!0)};yg.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};
yg.prototype.toString=function(){var a=z.kf(Object.getPrototypeOf(this)),a=a+"(";null!==this.group&&(a+=" in "+this.group);null!==this.h&&(a+=" for "+this.h);return a+")"};z.defineProperty(yg,{h:"diagram"},function(){return this.Z},function(a){null!==a&&z.l(a,B,yg,"diagram");this.Z=a});z.defineProperty(yg,{group:"group"},function(){return this.Ry},function(a){this.Ry!==a&&(null!==a&&z.l(a,F,yg,"group"),this.Ry=a,null!==a&&(this.Z=a.h))});
z.defineProperty(yg,{hI:"isOngoing"},function(){return this.lr},function(a){this.lr!==a&&(z.g(a,"boolean",yg,"isOngoing"),this.lr=a)});z.defineProperty(yg,{QE:"isInitial"},function(){return this.Lj},function(a){z.g(a,"boolean",yg,"isInitial");this.Lj=a;a||(this.to=!0)});z.defineProperty(yg,{ox:"isViewportSized"},function(){return this.ur},function(a){this.ur!==a&&(z.g(a,"boolean",yg,"isViewportSized"),(this.ur=a)&&this.I())});
z.defineProperty(yg,{Rt:"isRouting"},function(){return this.or},function(a){this.or!==a&&(z.g(a,"boolean",yg,"isRouting"),this.or=a)});z.defineProperty(yg,{RE:"isRealtime"},function(){return this.nr},function(a){this.nr!==a&&(z.g(a,"boolean",yg,"isRealtime"),this.nr=a)});z.defineProperty(yg,{Gf:"isValidLayout"},function(){return this.to},function(a){this.to!==a&&(z.g(a,"boolean",yg,"isValidLayout"),this.to=a,a||(a=this.h,null!==a&&(a.Qu=!0)))});
yg.prototype.invalidateLayout=yg.prototype.I=function(){if(this.to){var a=this.h;if(null!==a&&!a.pa.qb){var b=a.Va;!b.so&&(b.nf&&b.pi(),this.hI&&a.jn||this.QE&&!a.jn)&&(this.Gf=!1,a.Ce())}}};z.defineProperty(yg,{network:"network"},function(){return this.gz},function(a){var b=this.gz;b!==a&&(null!==a&&z.l(a,wa,yg,"network"),null!==b&&(b.Sb=null),this.gz=a,null!==a&&(a.Sb=this))});yg.prototype.createNetwork=function(){return new wa};
yg.prototype.makeNetwork=function(a){var b=this.createNetwork();b.Sb=this;a instanceof B?(b.jk(a.Mg,!0),b.jk(a.links,!0)):a instanceof F?b.jk(a.Hc):b.jk(a.i);return b};yg.prototype.updateParts=function(){var a=this.h;if(null===a&&null!==this.network)for(var b=this.network.vertexes.i;b.next();){var c=b.value.Pc;if(null!==c&&(a=c.h,null!==a))break}this.Gf=!0;try{null!==a&&a.Wb("Layout"),this.commitLayout()}finally{null!==a&&a.Kd("Layout")}};
yg.prototype.commitLayout=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();if(this.Rt)for(a=this.network.edges.i;a.next();)a.value.commit()};
yg.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new K(D);a instanceof B?(uq(this,b,a.Mg,!0,this.wA,!0,!1,!0),uq(this,b,a.oi,!0,this.wA,!0,!1,!0)):a instanceof F?uq(this,b,a.Hc,!1,this.wA,!0,!1,!0):b.$c(a.i);var c=b.count;if(0<c){a=this.h;null!==a&&a.Wb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.je.x,e=d,g=this.je.y,h=0,k=0,b=b.i;b.next();){var l=b.value;l.Bf();var m=l.Ia,n=m.width,
m=m.height;l.moveTo(e,g);l.fz=!1;e+=Math.max(n,50)+20;k=Math.max(k,Math.max(m,50));h>=c-1?(h=0,e=d,g+=k+20,k=0):h++}null!==a&&a.Kd("Layout")}this.Gf=!0};yg.prototype.wA=function(a){return!a.location.F()||a instanceof F&&a.fz?!0:!1};
function uq(a,b,c,d,e,g,h,k){for(c=c.i;c.next();){var l=c.value;d&&!l.Bp||null!==e&&!e(l)||!l.canLayout()||(g&&l instanceof E?l.Df||(l instanceof F?null===l.Sb?uq(a,b,l.Hc,!1,e,g,h,k):b.add(l):b.add(l)):h&&l instanceof G?b.add(l):!k||!l.be()||l instanceof E||b.add(l))}}
yg.prototype.collectParts=yg.prototype.$G=function(a){var b=new K(D);a instanceof B?(uq(this,b,a.Mg,!0,null,!0,!0,!0),uq(this,b,a.links,!0,null,!0,!0,!0),uq(this,b,a.oi,!0,null,!0,!0,!0)):a instanceof F?uq(this,b,a.Hc,!1,null,!0,!0,!0):uq(this,b,a.i,!1,null,!0,!0,!0);return b};z.defineProperty(yg,{je:"arrangementOrigin"},function(){return this.pq},function(a){z.l(a,N,yg,"arrangementOrigin");this.pq.N(a)||(this.pq.assign(a),this.I())});
yg.prototype.initialOrigin=function(a){var b=this.group;if(null!==b){var c=b.position.copy();(isNaN(c.x)||isNaN(c.y))&&c.set(a);b=b.placeholder;null!==b&&(c=b.eb(Zb),(isNaN(c.x)||isNaN(c.y))&&c.set(a),c.x+=b.padding.left,c.y+=b.padding.top);return c}return a};function wa(){z.kc(this);this.he=null;this.clear()}z.ia("LayoutNetwork",wa);
wa.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.i;a.next();){var b=a.value;b.clear();b.network=null}if(this.edges)for(a=this.edges.i;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new K(xa);this.edges=new K(ya);this.AA=new na(E,xa);this.mA=new na(G,ya)};
wa.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutNetwork"+(null!==this.Sb?"("+this.Sb.toString()+")":"");if(0>=a)return b;b+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count;if(1<a){for(var c=this.vertexes.i;c.next();)b+="\n    "+c.value.toString(a-1);for(c=this.edges.i;c.next();)b+="\n    "+c.value.toString(a-1)}return b};z.defineProperty(wa,{Sb:"layout"},function(){return this.he},function(a){u&&null!==a&&z.l(a,yg,wa,"layout");this.he=a});wa.prototype.createVertex=function(){return new xa};
wa.prototype.createEdge=function(){return new ya};
wa.prototype.addParts=wa.prototype.jk=function(a,b,c){if(null!==a){void 0===b&&(b=!1);z.g(b,"boolean",wa,"addParts:toplevelonly");void 0===c&&(c=null);null===c&&(c=function(a){if(a instanceof E)return!a.Df;if(a instanceof G){var b=a.Y;if(null===b||b.Df)return!1;a=a.da;return null===a||a.Df?!1:!0}return!1});for(a=a.i;a.next();){var d=a.value;if(d instanceof E&&(!b||d.Bp)&&d.canLayout()&&c(d))if(d instanceof F&&null===d.Sb)this.jk(d.Hc,!1);else if(null===this.dn(d)){var e=this.createVertex();e.Pc=d;
this.ul(e)}}for(a.reset();a.next();)if(d=a.value,d instanceof G&&(!b||d.Bp)&&d.canLayout()&&c(d)&&null===this.Yw(d)){var g=d.Y,e=d.da;null!==g&&null!==e&&g!==e&&(g=this.findGroupVertex(g),e=this.findGroupVertex(e),null!==g&&null!==e&&this.Hp(g,e,d))}}};wa.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;a=this.dn(b);if(null!==a)return a;for(b=b.Qa;null!==b;){a=this.dn(b);if(null!==a)return a;b=b.Qa}return null};
wa.prototype.addVertex=wa.prototype.ul=function(a){if(null!==a){u&&z.l(a,xa,wa,"addVertex:vertex");this.vertexes.add(a);var b=a.Pc;null!==b&&this.AA.add(b,a);a.network=this}};wa.prototype.addNode=wa.prototype.ht=function(a){if(null===a)return null;u&&z.l(a,E,wa,"addNode:node");var b=this.dn(a);null===b&&(b=this.createVertex(),b.Pc=a,this.ul(b));return b};
wa.prototype.deleteVertex=wa.prototype.fE=function(a){if(null!==a&&(u&&z.l(a,xa,wa,"deleteVertex:vertex"),vq(this,a))){for(var b=a.Ze,c=b.count-1;0<=c;c--){var d=b.ea(c);this.hp(d)}b=a.Te;for(c=b.count-1;0<=c;c--)d=b.ea(c),this.hp(d)}};function vq(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);c&&(a.AA.remove(b.Pc),b.network=null);return c}wa.prototype.deleteNode=function(a){null!==a&&(u&&z.l(a,E,wa,"deleteNode:node"),a=this.dn(a),null!==a&&this.fE(a))};
wa.prototype.findVertex=wa.prototype.dn=function(a){if(null===a)return null;u&&z.l(a,E,wa,"findVertex:node");return this.AA.na(a)};wa.prototype.addEdge=wa.prototype.Zo=function(a){if(null!==a){u&&z.l(a,ya,wa,"addEdge:edge");this.edges.add(a);var b=a.link;null!==b&&null===this.Yw(b)&&this.mA.add(b,a);b=a.toVertex;null!==b&&b.ED(a);b=a.fromVertex;null!==b&&b.DD(a);a.network=this}};
wa.prototype.addLink=function(a){if(null===a)return null;u&&z.l(a,G,wa,"addLink:link");var b=a.Y,c=a.da,d=this.Yw(a);null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.ht(b)),null!==c&&(d.toVertex=this.ht(c)),this.Zo(d)):(d.fromVertex=null!==b?this.ht(b):null,d.toVertex=null!==c?this.ht(c):null);return d};wa.prototype.deleteEdge=wa.prototype.hp=function(a){if(null!==a){u&&z.l(a,ya,wa,"deleteEdge:edge");var b=a.toVertex;null!==b&&b.eE(a);b=a.fromVertex;null!==b&&b.dE(a);wq(this,a)}};
function wq(a,b){null!==b&&a.edges.remove(b)&&(a.mA.remove(b.link),b.network=null)}wa.prototype.deleteLink=function(a){null!==a&&(u&&z.l(a,G,wa,"deleteLink:link"),a=this.Yw(a),null!==a&&this.hp(a))};wa.prototype.findEdge=wa.prototype.Yw=function(a){if(null===a)return null;u&&z.l(a,G,wa,"findEdge:link");return this.mA.na(a)};
wa.prototype.linkVertexes=wa.prototype.Hp=function(a,b,c){if(null===a||null===b)return null;u&&(z.l(a,xa,wa,"linkVertexes:fromVertex"),z.l(b,xa,wa,"linkVertexes:toVertex"),null!==c&&z.l(c,G,wa,"linkVertexes:link"));if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.Zo(d);return d}return null};
wa.prototype.reverseEdge=wa.prototype.Hx=function(a){if(null!==a){u&&z.l(a,ya,wa,"reverseEdge:edge");var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.dE(a),c.eE(a),a.Hx(),b.ED(a),c.DD(a))}};wa.prototype.deleteSelfEdges=wa.prototype.Uw=function(){for(var a=z.rb(),b=this.edges.i;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.hp(a[c]);z.xa(a)};
wa.prototype.deleteArtificialVertexes=function(){for(var a=z.rb(),b=this.vertexes.i;b.next();){var c=b.value;null===c.Pc&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.fE(a[b]);c=z.rb();for(b=this.edges.i;b.next();){var d=b.value;null===d.link&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.hp(c[b]);z.xa(a);z.xa(c)};function xq(a){for(var b=z.rb(),c=a.edges.i;c.next();){var d=c.value;null!==d.fromVertex&&null!==d.toVertex||b.push(d)}c=b.length;for(d=0;d<c;d++)a.hp(b[d]);z.xa(b)}
wa.prototype.splitIntoSubNetworks=wa.prototype.oJ=function(){this.deleteArtificialVertexes();xq(this);this.Uw();for(var a=new J(wa),b=!0;b;)for(var b=!1,c=this.vertexes.i;c.next();){var d=c.value;if(0<d.Ze.count||0<d.Te.count){b=this.Sb.createNetwork();a.add(b);yq(this,b,d);b=!0;break}}a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function yq(a,b,c){if(null!==c&&c.network!==b){vq(a,c);b.ul(c);for(var d=c.tc;d.next();){var e=d.value;e.network!==b&&(wq(a,e),b.Zo(e),yq(a,b,e.fromVertex))}for(d=c.pc;d.next();)c=d.value,c.network!==b&&(wq(a,c),b.Zo(c),yq(a,b,c.toVertex))}}wa.prototype.findAllParts=function(){for(var a=new K(D),b=this.vertexes.i;b.next();)a.add(b.value.Pc);for(b=this.edges.i;b.next();)a.add(b.value.link);return a};
function xa(){z.kc(this);this.network=null;this.P=(new w(0,0,10,10)).freeze();this.S=(new N(5,5)).freeze();this.clear()}z.ia("LayoutVertex",xa);xa.prototype.clear=function(){this.Cd=this.fe=null;this.Ze=new J(ya);this.Te=new J(ya)};
xa.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutVertex#"+z.nd(this);if(0<a&&(b+=null!==this.Pc?"("+this.Pc.toString()+")":"",1<a)){a="";for(var c=!0,d=this.Ze.i;d.next();){var e=d.value;c?c=!1:a+=",";a+=e.toString(0)}e="";c=!0;for(d=this.Te.i;d.next();){var g=d.value;c?c=!1:e+=",";e+=g.toString(0)}b+=" sources: "+a+" destinations: "+e}return b};
z.defineProperty(xa,{data:"data"},function(){return this.fe},function(a){this.fe=a;if(null!==a){var b=a.bounds;a=b.x;var c=b.y,d=b.width,b=b.height;this.S.n(d/2,b/2);this.P.n(a,c,d,b)}});
z.defineProperty(xa,{Pc:"node"},function(){return this.Cd},function(a){if(this.Cd!==a){u&&null!==a&&z.l(a,E,xa,"node");this.Cd=a;a.Bf();var b=a.W,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.P.n(c,d,e,b);if(!(a instanceof F)&&(a=a.Zb.eb(ec),a.F())){this.S.n(a.x-c,a.y-d);return}this.S.n(e/2,b/2)}});z.defineProperty(xa,{vb:"bounds"},function(){return this.P},function(a){this.P.N(a)||(u&&z.l(a,w,xa,"bounds"),this.P.assign(a))});
z.defineProperty(xa,{focus:"focus"},function(){return this.S},function(a){this.S.N(a)||(u&&z.l(a,N,xa,"focus"),this.S.assign(a))});z.defineProperty(xa,{ra:"centerX"},function(){return this.P.x+this.S.x},function(a){var b=this.P;b.x+this.S.x!==a&&(u&&z.p(a,xa,"centerX"),b.Wa(),b.x=a-this.S.x,b.freeze())});z.defineProperty(xa,{za:"centerY"},function(){return this.P.y+this.S.y},function(a){var b=this.P;b.y+this.S.y!==a&&(u&&z.p(a,xa,"centerY"),b.Wa(),b.y=a-this.S.y,b.freeze())});
z.defineProperty(xa,{Dt:"focusX"},function(){return this.S.x},function(a){var b=this.S;b.x!==a&&(b.Wa(),b.x=a,b.freeze())});z.defineProperty(xa,{Et:"focusY"},function(){return this.S.y},function(a){var b=this.S;b.y!==a&&(b.Wa(),b.y=a,b.freeze())});z.defineProperty(xa,{x:"x"},function(){return this.P.x},function(a){var b=this.P;b.x!==a&&(b.Wa(),b.x=a,b.freeze())});z.defineProperty(xa,{y:"y"},function(){return this.P.y},function(a){var b=this.P;b.y!==a&&(b.Wa(),b.y=a,b.freeze())});
z.defineProperty(xa,{width:"width"},function(){return this.P.width},function(a){var b=this.P;b.width!==a&&(b.Wa(),b.width=a,b.freeze())});z.defineProperty(xa,{height:"height"},function(){return this.P.height},function(a){var b=this.P;b.height!==a&&(b.Wa(),b.height=a,b.freeze())});
xa.prototype.commit=function(){var a=this.fe;if(null!==a){var b=this.vb,c=a.bounds;z.Za(c)?(c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height):a.bounds=b.copy()}else if(a=this.Pc,null!==a){b=this.vb;if(!(a instanceof F)){var c=a.W,d=a.Zb.eb(ec);if(c.F()&&d.F()){a.moveTo(b.x+this.Dt-(d.x-c.x),b.y+this.Et-(d.y-c.y));return}}a.moveTo(b.x,b.y)}};xa.prototype.addSourceEdge=xa.prototype.ED=function(a){null!==a&&(u&&z.l(a,ya,xa,"addSourceEdge:edge"),this.Ze.contains(a)||this.Ze.add(a))};
xa.prototype.deleteSourceEdge=xa.prototype.eE=function(a){null!==a&&(u&&z.l(a,ya,xa,"deleteSourceEdge:edge"),this.Ze.remove(a))};xa.prototype.addDestinationEdge=xa.prototype.DD=function(a){null!==a&&(u&&z.l(a,ya,xa,"addDestinationEdge:edge"),this.Te.contains(a)||this.Te.add(a))};xa.prototype.deleteDestinationEdge=xa.prototype.dE=function(a){null!==a&&(u&&z.l(a,ya,xa,"deleteDestinationEdge:edge"),this.Te.remove(a))};
z.w(xa,{nJ:"sourceVertexes"},function(){for(var a=new K(xa),b=this.tc;b.next();)a.add(b.value.fromVertex);return a.i});z.w(xa,{qH:"destinationVertexes"},function(){for(var a=new K(xa),b=this.pc;b.next();)a.add(b.value.toVertex);return a.i});z.w(xa,{vertexes:"vertexes"},function(){for(var a=new K(xa),b=this.tc;b.next();)a.add(b.value.fromVertex);for(b=this.pc;b.next();)a.add(b.value.toVertex);return a.i});z.w(xa,{tc:"sourceEdges"},function(){return this.Ze.i});z.w(xa,{pc:"destinationEdges"},function(){return this.Te.i});
z.w(xa,{edges:"edges"},function(){for(var a=new J(ya),b=this.tc;b.next();)a.add(b.value);for(b=this.pc;b.next();)a.add(b.value);return a.i});z.w(xa,{BH:"edgesCount"},function(){return this.Ze.count+this.Te.count});var zq;xa.standardComparer=zq=function(a,b){u&&z.l(a,xa,xa,"standardComparer:m");u&&z.l(b,xa,xa,"standardComparer:n");var c=a.Cd,d=b.Cd;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:null!==d?-1:0};
xa.smartComparer=function(a,b){u&&z.l(a,xa,xa,"smartComparer:m");u&&z.l(b,xa,xa,"smartComparer:n");if(null!==a){if(null!==b){var c=a.Cd,d=b.Cd;if(null!==c){if(null!==d){for(var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var g=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(g)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;
if(0!==g-h)return g-h}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0};function ya(){z.kc(this);this.network=null;this.clear()}z.ia("LayoutEdge",ya);ya.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null};
ya.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutEdge#"+z.nd(this);0<a&&(b+=null!==this.link?"("+this.link.toString()+")":"",1<a&&(b+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null")));return b};ya.prototype.Hx=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};ya.prototype.commit=function(){};
ya.prototype.getOtherVertex=ya.prototype.MH=function(a){u&&z.l(a,xa,ya,"getOtherVertex:v");return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null};function tm(){0<arguments.length&&z.pd(tm);yg.call(this);this.ox=!0;this.ct=this.dt=NaN;this.Aj=(new Ea(NaN,NaN)).freeze();this.bi=(new Ea(10,10)).freeze();this.Ie=vn;this.rd=tn;this.ai=pn;this.Lh=Aq}z.Ra(tm,yg);z.ia("GridLayout",tm);
tm.prototype.cloneProtected=function(a){yg.prototype.cloneProtected.call(this,a);a.dt=this.dt;a.ct=this.ct;a.Aj.assign(this.Aj);a.bi.assign(this.bi);a.Ie=this.Ie;a.rd=this.rd;a.ai=this.ai;a.Lh=this.Lh};
tm.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.je=this.initialOrigin(this.je);var b=this.h;a=this.$G(a);for(var c=a.copy().i;c.next();){var d=c.value;if(d instanceof G){var e=d;if(null!==e.Y||null!==e.da){a.remove(e);continue}}d.Bf();if(d instanceof F)for(d=d.Hc;d.next();)a.remove(d.value)}e=a.jc();if(0!==e.length){switch(this.sorting){case sn:e.reverse();break;case pn:e.sort(this.comparer);
break;case qn:e.sort(this.comparer),e.reverse()}var g=this.DJ;isNaN(g)&&(g=0);var h=this.iG,h=isNaN(h)&&null!==b?Math.max(b.xb.width-b.padding.left-b.padding.right,0):Math.max(this.iG,0);0>=g&&0>=h&&(g=1);a=this.spacing.width;isFinite(a)||(a=0);c=this.spacing.height;isFinite(c)||(c=0);null!==b&&b.Wb("Layout");d=[];switch(this.alignment){case wn:var k=a,l=c,m=Math.max(this.cp.width,1);if(!isFinite(m))for(var n=m=0;n<e.length;n++)var p=e[n],q=p.Ia,m=Math.max(m,q.width);var m=Math.max(m+k,1),r=Math.max(this.cp.height,
1);if(!isFinite(r))for(n=r=0;n<e.length;n++)p=e[n],q=p.Ia,r=Math.max(r,q.height);for(var r=Math.max(r+l,1),s=this.Yf,t=this.je.x,v=t,x=this.je.y,y=0,A=0,n=0;n<e.length;n++){var p=e[n],q=p.Ia,C=Math.ceil((q.width+k)/m)*m,L=Math.ceil((q.height+l)/r)*r,H=0;switch(s){case un:H=Math.abs(v-q.width);break;default:H=v+q.width}if(0<g&&y>g-1||0<h&&0<y&&H>h)d.push(new w(0,x,h+k,A)),y=0,v=t,x+=A,A=0;A=Math.max(A,L);L=0;switch(s){case un:L=-q.width;break;default:L=0}p.moveTo(v+L,x);switch(s){case un:v-=C;break;
default:v+=C}y++}d.push(new w(0,x,h+k,A));break;case vn:k=g;l=a;m=c;n=Math.max(this.cp.width,1);p=x=C=0;q=z.O();for(g=0;g<e.length;g++)r=e[g],s=r.Ia,t=pp(r,r.Zb,r.of,q),C=Math.max(C,t.x),x=Math.max(x,s.width-t.x),p=Math.max(p,t.y);v=this.Yf;switch(v){case un:C+=l;break;default:x+=l}var n=isFinite(n)?Math.max(n+l,1):Math.max(C+x,1),U=x=this.je.x,y=this.je.y,A=0;h>=C&&(h-=C);for(var C=L=0,H=Math.max(this.cp.height,1),ea=p=0,W=!0,P=z.O(),g=0;g<e.length;g++){r=e[g];s=r.Ia;t=pp(r,r.Zb,r.of,q);if(0<A)switch(v){case un:U=
(U-x-(s.width-t.x))/n;U=td(Math.round(U),U)?Math.round(U):Math.floor(U);U=U*n+x;break;default:U=(U-x+t.x)/n,U=td(Math.round(U),U)?Math.round(U):Math.ceil(U),U=U*n+x}else switch(v){case un:L=U+t.x+s.width;break;default:L=U-t.x}var ba=0;switch(v){case un:ba=-(U+t.x)+L;break;default:ba=U+s.width-t.x-L}if(0<k&&A>k-1||0<h&&0<A&&ba>h){d.push(new w(0,W?y-p:y,h+l,ea+p+m));for(U=0;U<A&&g!==A;U++){var ba=e[g-A+U],Oa=pp(ba,ba.Zb,ba.of,P);ba.moveTo(ba.position.x,ba.position.y+p-Oa.y)}ea+=m;y=W?y+ea:y+(ea+p);
A=ea=p=0;U=x;W=!1}U===x&&(C=v===un?Math.max(C,s.width-t.x):Math.min(C,-t.x));p=Math.max(p,t.y);ea=Math.max(ea,s.height-t.y);isFinite(H)&&(ea=Math.max(ea,Math.max(s.height,H)-t.y));W?r.moveTo(U-t.x,y-t.y):r.moveTo(U-t.x,y);switch(v){case un:U-=t.x+l;break;default:U+=s.width-t.x+l}A++}d.push(new w(0,y,h+l,(W?ea:ea+p)+m));for(U=0;U<A&&g!==A;U++)ba=e[g-A+U],Oa=pp(ba,ba.Zb,ba.of,q),ba.moveTo(ba.position.x,ba.position.y+p-Oa.y);z.A(q);z.A(P);if(v===un)for(g=0;g<d.length;g++)e=d[g],e.width+=C,e.x-=C;else for(g=
0;g<d.length;g++)e=d[g],e.x>C&&(e.width+=e.x-C,e.x=C)}for(k=g=h=e=0;k<d.length;k++)l=d[k],e=Math.min(e,l.x),h=Math.min(h,l.y),g=Math.max(g,l.x+l.width);this.Yf===un?this.commitLayers(d,new N(e+a/2-(g+e),h-c/2)):this.commitLayers(d,new N(e-a/2,h-c/2));null!==b&&b.Kd("Layout");this.Gf=!0}};tm.prototype.commitLayers=function(){};
z.defineProperty(tm,{iG:"wrappingWidth"},function(){return this.dt},function(a){this.dt!==a&&(z.g(a,"number",tm,"wrappingWidth"),0<a||isNaN(a))&&(this.dt=a,this.ox=isNaN(a),this.I())});z.defineProperty(tm,{DJ:"wrappingColumn"},function(){return this.ct},function(a){this.ct!==a&&(z.g(a,"number",tm,"wrappingColumn"),0<a||isNaN(a))&&(this.ct=a,this.I())});z.defineProperty(tm,{cp:"cellSize"},function(){return this.Aj},function(a){z.l(a,Ea,tm,"cellSize");this.Aj.N(a)||(this.Aj.assign(a),this.I())});
z.defineProperty(tm,{spacing:"spacing"},function(){return this.bi},function(a){z.l(a,Ea,tm,"spacing");this.bi.N(a)||(this.bi.assign(a),this.I())});z.defineProperty(tm,{alignment:"alignment"},function(){return this.Ie},function(a){this.Ie!==a&&(z.Ba(a,tm,tm,"alignment"),a===vn||a===wn)&&(this.Ie=a,this.I())});z.defineProperty(tm,{Yf:"arrangement"},function(){return this.rd},function(a){this.rd!==a&&(z.Ba(a,tm,tm,"arrangement"),a===tn||a===un)&&(this.rd=a,this.I())});
z.defineProperty(tm,{sorting:"sorting"},function(){return this.ai},function(a){this.ai!==a&&(z.Ba(a,tm,tm,"sorting"),a===rn||a===sn||a===pn||a===qn)&&(this.ai=a,this.I())});z.defineProperty(tm,{comparer:"comparer"},function(){return this.Lh},function(a){this.Lh!==a&&(z.g(a,"function",tm,"comparer"),this.Lh=a,this.I())});var Aq;tm.standardComparer=Aq=function(a,b){u&&z.l(a,D,tm,"standardComparer:a");u&&z.l(b,D,tm,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
tm.smartComparer=function(a,b){u&&z.l(a,D,tm,"standardComparer:a");u&&z.l(b,D,tm,"standardComparer:b");if(null!==a){if(null!==b){for(var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var g=parseFloat(c[e]),h=parseFloat(d[e]);if(isNaN(g)){if(!isNaN(h))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(h))return-1;
if(0!==g-h)return g-h}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==b?-1:0};var wn;tm.Position=wn=z.s(tm,"Position",0);var vn;tm.Location=vn=z.s(tm,"Location",1);var tn;tm.LeftToRight=tn=z.s(tm,"LeftToRight",2);var un;tm.RightToLeft=un=z.s(tm,"RightToLeft",3);var rn;tm.Forward=rn=z.s(tm,"Forward",4);var sn;tm.Reverse=sn=z.s(tm,"Reverse",5);var pn;tm.Ascending=pn=z.s(tm,"Ascending",6);var qn;tm.Descending=qn=z.s(tm,"Descending",7);
function xn(){0<arguments.length&&z.pd(xn);yg.call(this);this.Iy=this.bo=this.Ud=0;this.Vq=360;this.Hy=Nn;this.Tk=0;this.cC=Nn;this.Yu=this.Fg=this.sD=0;this.Aw=new Bq;this.$u=this.ym=0;this.yG=600;this.js=NaN;this.rq=1;this.Ps=0;this.Rs=360;this.rd=Nn;this.fa=Jn;this.ai=Gn;this.Lh=zq;this.bi=6;this.Yr=Qn}z.Ra(xn,yg);z.ia("CircularLayout",xn);
xn.prototype.cloneProtected=function(a){yg.prototype.cloneProtected.call(this,a);a.js=this.js;a.rq=this.rq;a.Ps=this.Ps;a.Rs=this.Rs;a.rd=this.rd;a.fa=this.fa;a.ai=this.ai;a.Lh=this.Lh;a.bi=this.bi;a.Yr=this.Yr};xn.prototype.createNetwork=function(){return new Cq};
xn.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.first(),a.ra=0,a.za=0);else{var b=new J(Dq);b.$c(a.i);a=new J(Dq);var c=new J(Dq),d;d=this.sort(b);var e=this.Hy,g=this.cC,h=this.Ud,k=this.bo,l=this.Iy,m=this.Vq,b=this.Tk,n=this.sD,p=this.Fg,q=this.Yu,e=this.Yf,g=this.vx,h=this.TI;if(!isFinite(h)||
0>=h)h=NaN;k=this.UG;if(!isFinite(k)||0>=k)k=1;l=this.Fe;isFinite(l)||(l=0);m=this.Lf;if(!isFinite(m)||360<m||1>m)m=360;b=this.spacing;isFinite(b)||(b=NaN);e===On&&g===Pn?e=Nn:e===On&&g!==Pn&&(g=Pn,e=this.Yf);if((this.direction===Hn||this.direction===In)&&this.sorting!==Gn){for(var r=0;!(r>=d.length);r+=2){a.add(d.ea(r));if(r+1>=d.length)break;c.add(d.ea(r+1))}this.direction===Hn?(this.Yf===On&&a.reverse(),d=new J(Dq),d.$c(a),d.$c(c)):(this.Yf===On&&c.reverse(),d=new J(Dq),d.$c(c),d.$c(a))}for(var s=
d.length,t=n=0,r=0;r<d.length;r++){var p=l+m*t*(this.direction===Jn?1:-1)/s,v=d.ea(r).diameter;isNaN(v)&&(v=Eq(d.ea(r),p));360>m&&(0===r||r===d.length-1)&&(v/=2);n+=v;t++}if(isNaN(h)||e===On){isNaN(b)&&(b=6);if(e!==Nn&&e!==On){v=-Infinity;for(r=0;r<s;r++){var q=d.ea(r),x=d.ea(r===s-1?0:r+1);isNaN(q.diameter)&&Eq(q,0);isNaN(x.diameter)&&Eq(x,0);v=Math.max(v,(q.diameter+x.diameter)/2)}q=v+b;e===Ln?(p=2*Math.PI/s,h=(v+b)/p):h=Fq(this,q*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180)}else h=Fq(this,n+(360<=
m?s:s-1)*(e!==On?b:1.6*b),k,l*Math.PI/180,m*Math.PI/180);p=h*k}else if(p=h*k,t=Gq(this,h,p,l*Math.PI/180,m*Math.PI/180),isNaN(b)){if(e===Nn||e===On)b=(t-n)/(360<=m?s:s-1)}else if(e===Nn||e===On)r=(t-n)/(360<=m?s:s-1),r<b?(h=Fq(this,n+b*(360<=m?s:s-1),k,l*Math.PI/180,m*Math.PI/180),p=h*k):b=r;else{v=-Infinity;for(r=0;r<s;r++)q=d.ea(r),x=d.ea(r===s-1?0:r+1),isNaN(q.diameter)&&Eq(q,0),isNaN(x.diameter)&&Eq(x,0),v=Math.max(v,(q.diameter+x.diameter)/2);q=v+b;r=Fq(this,q*(360<=m?s:s-1),k,l*Math.PI/180,
m*Math.PI/180);r>h?(h=r,p=h*k):q=t/(360<=m?s:s-1)}this.Hy=e;this.cC=g;this.Ud=h;this.bo=k;this.Iy=l;this.Vq=m;this.Tk=b;this.sD=n;this.Fg=p;this.Yu=q;b=d;d=this.Hy;e=this.Ud;g=this.Iy;k=this.Vq;l=this.Tk;m=this.Fg;n=this.Yu;if(this.direction!==Hn&&this.direction!==In||d!==On)if(this.direction===Hn||this.direction===In){h=0;switch(d){case Mn:h=180*Hq(this,e,m,g,n)/Math.PI;break;case Nn:n=b=0;h=a.first();null!==h&&(b=Eq(h,Math.PI/2));h=c.first();null!==h&&(n=Eq(h,Math.PI/2));h=180*Hq(this,e,m,g,l+(b+
n)/2)/Math.PI;break;case Ln:h=k/b.length}if(this.direction===Hn){switch(d){case Mn:Iq(this,a,g,Kn);break;case Nn:Jq(this,a,g,Kn);break;case Ln:Kq(this,a,k/2,g,Kn)}switch(d){case Mn:Iq(this,c,g+h,Jn);break;case Nn:Jq(this,c,g+h,Jn);break;case Ln:Kq(this,c,k/2,g+h,Jn)}}else{switch(d){case Mn:Iq(this,c,g,Kn);break;case Nn:Jq(this,c,g,Kn);break;case Ln:Kq(this,c,k/2,g,Kn)}switch(d){case Mn:Iq(this,a,g+h,Jn);break;case Nn:Jq(this,a,g+h,Jn);break;case Ln:Kq(this,a,k/2,g+h,Jn)}}}else switch(d){case Mn:Iq(this,
b,g,this.direction);break;case Nn:Jq(this,b,g,this.direction);break;case Ln:Kq(this,b,k,g,this.direction);break;case On:Lq(this,b,k,g,this.direction)}else Lq(this,b,k,g-k/2,Jn)}this.updateParts();this.network=null;this.Gf=!0};
function Kq(a,b,c,d,e){var g=a.Vq,h=a.Ud;a=a.Fg;d=d*Math.PI/180;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=d+(e===Jn?l*c/(360<=g?k:k-1):-(l*c)/k),n=b.ea(l),p=h*Math.tan(m)/a,p=Math.sqrt((h*h+a*a*p*p)/(1+p*p));n.ra=p*Math.cos(m);n.za=p*Math.sin(m);n.actualAngle=180*m/Math.PI}}
function Jq(a,b,c,d){var e=a.Ud,g=a.Fg,h=a.Tk;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.ea(l),n=b.ea(l===k-1?0:l+1),p=g*Math.sin(c);m.ra=e*Math.cos(c);m.za=p;m.actualAngle=180*c/Math.PI;isNaN(m.diameter)&&Eq(m,0);isNaN(n.diameter)&&Eq(n,0);m=Hq(a,e,g,d===Jn?c:-c,(m.diameter+n.diameter)/2+h);c+=d===Jn?m:-m}}
function Iq(a,b,c,d){var e=a.Ud,g=a.Fg,h=a.Yu;c=c*Math.PI/180;for(var k=b.length,l=0;l<k;l++){var m=b.ea(l);m.ra=e*Math.cos(c);m.za=g*Math.sin(c);m.actualAngle=180*c/Math.PI;m=Hq(a,e,g,d===Jn?c:-c,h);c+=d===Jn?m:-m}}function Lq(a,b,c,d,e){var g=a.$u,g=a.Vq;a.ym=0;a.Aw=new Bq;if(360>c){for(g=d+(e===Jn?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.$u=g;Mq(a,b,c,d,e)}else Nq(a,b,c,d,e);a.Aw.commit(b)}
function Nq(a,b,c,d,e){var g=a.Ud,h=a.Tk,k=a.bo,l=g*Math.cos(d*Math.PI/180),m=a.Fg*Math.sin(d*Math.PI/180),n=b.jc();if(3===n.length)n[0].ra=g,n[0].za=0,n[1].ra=n[0].ra-n[0].width/2-n[1].width/2-h,n[1].y=n[0].y,n[2].ra=(n[0].ra+n[1].ra)/2,n[2].y=n[0].y-n[2].height-h;else if(4===n.length)n[0].ra=g,n[0].za=0,n[2].ra=-n[0].ra,n[2].za=n[0].za,n[1].ra=0,n[1].y=Math.min(n[0].y,n[2].y)-n[1].height-h,n[3].ra=0,n[3].y=Math.max(n[0].y+n[0].height+h,n[2].y+n[2].height+h);else{for(var g=z.O(),p=0;p<n.length;p++){n[p].ra=
l;n[p].za=m;if(p>=n.length-1)break;Oq(a,l,m,n,p,e,g)||Pq(a,l,m,n,p,e,g);l=g.x;m=g.y}z.A(g);a.ym++;if(!(23<a.ym)){var l=n[0].ra,m=n[0].za,g=n[n.length-1].ra,p=n[n.length-1].za,q=Math.abs(l-g)-((n[0].width+n[n.length-1].width)/2+h),r=Math.abs(m-p)-((n[0].height+n[n.length-1].height)/2+h),h=0;1>Math.abs(r)?Math.abs(l-g)<(n[0].width+n[n.length-1].width)/2&&(h=0):h=0<r?r:1>Math.abs(q)?0:q;q=!1;q=Math.abs(g)>Math.abs(p)?0<g!==m>p:0<p!==l<g;if(q=e===Jn?q:!q)h=-Math.abs(h),h=Math.min(h,-n[n.length-1].width),
h=Math.min(h,-n[n.length-1].height);a.Aw.compare(h,n);1<Math.abs(h)&&(a.Ud=8>a.ym?a.Ud-h/(2*Math.PI):5>n.length&&10<h?a.Ud/2:a.Ud-(0<h?1.7:-2.3),a.Fg=a.Ud*k,Nq(a,b,c,d,e))}}}
function Mq(a,b,c,d,e){for(var g=a.Ud,h=a.Fg,k=a.bo,l=g*Math.cos(d*Math.PI/180),m=h*Math.sin(d*Math.PI/180),n=z.O(),p=b.jc(),q=0;q<p.length;q++){p[q].ra=l;p[q].za=m;if(q>=p.length-1)break;Oq(a,l,m,p,q,e,n)||Pq(a,l,m,p,q,e,n);l=n.x;m=n.y}z.A(n);a.ym++;if(!(23<a.ym)){l=Math.atan2(m,l);l=e===Jn?a.$u-l:l-a.$u;l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI;g=l*(g+h)/2;h=a.Aw;if(Math.abs(g)<Math.abs(h.pp))for(h.pp=g,h.Cn=[],h.gq=[],l=0;l<p.length;l++)h.Cn[l]=p[l].vb.x,h.gq[l]=p[l].vb.y;1<Math.abs(g)&&
(a.Ud=8>a.ym?a.Ud-g/(2*Math.PI):a.Ud-(0<g?1.7:-2.3),a.Fg=a.Ud*k,Mq(a,b,c,d,e))}}function Oq(a,b,c,d,e,g,h){var k=a.Ud,l=a.Fg,m=0,n=0;a=(d[e].width+d[e+1].width)/2+a.Tk;var p=!1;if(0<=c!==(g===Jn)){if(m=b+a,m>k){m=b-a;if(m<-k)return h.x=m,h.y=n,!1;p=!0}}else if(m=b-a,m<-k){m=b+a;if(m>k)return h.x=m,h.y=n,!1;p=!0}n=Math.sqrt(1-Math.min(1,m*m/(k*k)))*l;0>c!==p&&(n=-n);if(Math.abs(c-n)>(d[e].height+d[e+1].height)/2)return h.x=m,h.y=n,!1;h.x=m;h.y=n;return!0}
function Pq(a,b,c,d,e,g,h){var k=a.Ud,l=a.Fg,m=0,n=0;a=(d[e].height+d[e+1].height)/2+a.Tk;d=!1;if(0<=b!==(g===Jn)){if(n=c-a,n<-l){n=c+a;if(n>l){h.x=m;h.y=n;return}d=!0}}else if(n=c+a,n>l){n=c-a;if(n<-l){h.x=m;h.y=n;return}d=!0}m=Math.sqrt(1-Math.min(1,n*n/(l*l)))*k;0>b!==d&&(m=-m);h.x=m;h.y=n}xn.prototype.commitLayout=function(){this.commitNodes();this.Rt&&this.commitLinks()};
xn.prototype.commitNodes=function(){for(var a=this.JG,b=this.network.vertexes.i;b.next();){var c=b.value;c.x+=a.x;c.y+=a.y;c.commit()}};xn.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
function Gq(a,b,c,d,e){var g=a.yG;if(.001>Math.abs(a.bo-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;for(var h=0,k=0,k=void 0!==d&&void 0!==e?e/(g+1):Math.PI/(2*(g+1)),l=0,m=0;m<=g;m++)l=void 0!==d&&void 0!==e?d+m*e/g:m*Math.PI/(2*g),l=Math.sin(l),h+=Math.sqrt(1-a*a*l*l)*k;return void 0!==d&&void 0!==e?(b>c?b:c)*h:4*(b>c?b:c)*h}function Fq(a,b,c,d,e){var g=0,g=void 0!==d&&void 0!==e?Gq(a,1,c,d,e):Gq(a,1,c);return b/g}
function Hq(a,b,c,d,e){if(.001>Math.abs(a.bo-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,h=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var k=0;;k++){var l=Math.sin(d+k*a),h=h+(b>c?b:c)*Math.sqrt(1-g*g*l*l)*a;if(h>=e)return k*a}}
xn.prototype.sort=function(a){switch(this.sorting){case En:break;case Fn:a.reverse();break;case yn:a.sort(this.comparer);break;case Cn:a.sort(this.comparer);a.reverse();break;case Gn:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new J(Dq),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var h=0;h<a.length;h++){var k=a.ea(h).BH;k>e&&(e=k,g=h)}else for(h=0;h<a.length;h++)k=b[h],k>e&&(e=k,g=h);d.add(a.ea(g));b[g]=-1;g=a.ea(g);e=0;for(h=g.tc;h.next();)e=a.indexOf(h.value.fromVertex),0>e||0<=b[e]&&
b[e]++;for(g=g.pc;g.next();)e=a.indexOf(g.value.toVertex),0>e||0<=b[e]&&b[e]++}a=[];for(b=0;b<d.length;b++){h=d.ea(b);a[b]=[];for(var l=0,c=h.pc;c.next();)l=d.indexOf(c.value.toVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(c=h.tc;c.next();)l=d.indexOf(c.value.fromVertex),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}h=[];for(b=0;b<a.length;b++)h[b]=0;for(var c=[],k=[],m=[],e=[],g=new J(Dq),n=0,b=0;b<a.length;b++){var p=a[b].length;if(1===p)e.push(b);else if(0===p)g.add(d.ea(b));else{if(0===n)c.push(b);
else{for(var q=Infinity,r=Infinity,s=-1,t=[],p=0;p<c.length;p++)0>a[c[p]].indexOf(c[p===c.length-1?0:p+1])&&t.push(p===c.length-1?0:p+1);if(0===t.length)for(p=0;p<c.length;p++)t.push(p);for(p=0;p<t.length;p++){var v=t[p],x,l=a[b];x=k;for(var y=m,A=h,C=v,L=c,H=0,U=0;U<x.length;U++){var ea=A[x[U]],W=A[y[U]],P=0,ba=0;ea<W?(P=ea,ba=W):(P=W,ba=ea);if(P<C&&C<=ba)for(ea=0;ea<l.length;ea++)W=l[ea],0>L.indexOf(W)||P<A[W]&&A[W]<ba||P===A[W]||ba===A[W]||H++;else for(ea=0;ea<l.length;ea++)W=l[ea],0>L.indexOf(W)||
P<A[W]&&A[W]<ba&&P!==A[W]&&ba!==A[W]&&H++}x=H;for(A=y=0;A<a[b].length;A++)l=c.indexOf(a[b][A]),0<=l&&(l=Math.abs(v-(l>=v?l+1:l)),y+=l<c.length+1-l?l:c.length+1-l);for(A=0;A<k.length;A++)l=h[k[A]],C=h[m[A]],l>=v&&l++,C>=v&&C++,l>C&&(L=C,C=l,l=L),C-l<(c.length+2)/2===(l<v&&v<=C)&&y++;if(x<q||x===q&&y<r)q=x,r=y,s=v}c.splice(s,0,b);for(p=0;p<c.length;p++)h[c[p]]=p;for(p=0;p<a[b].length;p++)q=a[b][p],0<=c.indexOf(q)&&(k.push(b),m.push(q))}n++}}k=!1;for(m=c.length;;){k=!0;for(h=0;h<e.length;h++)if(b=e[h],
n=a[b][0],l=c.indexOf(n),0<=l){for(r=p=0;r<a[n].length;r++)q=a[n][r],q=c.indexOf(q),0>q||q===l||(s=q>l?q-l:l-q,p+=q<l!==s>m-s?1:-1);c.splice(0>p?l:l+1,0,b);e.splice(h,1);h--}else k=!1;if(k)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],g.add(d.ea(l));return g;default:z.k("Invalid sorting type.")}return a};z.defineProperty(xn,{TI:"radius"},function(){return this.js},function(a){this.js!==a&&(z.g(a,"number",xn,"radius"),0<a||isNaN(a))&&(this.js=a,this.I())});
z.defineProperty(xn,{UG:"aspectRatio"},function(){return this.rq},function(a){this.rq!==a&&(z.g(a,"number",xn,"aspectRatio"),0<a&&(this.rq=a,this.I()))});z.defineProperty(xn,{Fe:"startAngle"},function(){return this.Ps},function(a){this.Ps!==a&&(z.g(a,"number",xn,"startAngle"),this.Ps=a,this.I())});z.defineProperty(xn,{Lf:"sweepAngle"},function(){return this.Rs},function(a){this.Rs!==a&&(z.g(a,"number",xn,"sweepAngle"),this.Rs=0<a&&360>=a?a:360,this.I())});
z.defineProperty(xn,{Yf:"arrangement"},function(){return this.rd},function(a){this.rd!==a&&(z.Ba(a,xn,xn,"arrangement"),a===On||a===Nn||a===Mn||a===Ln)&&(this.rd=a,this.I())});z.defineProperty(xn,{direction:"direction"},function(){return this.fa},function(a){this.fa!==a&&(z.Ba(a,xn,xn,"direction"),a===Jn||a===Kn||a===Hn||a===In)&&(this.fa=a,this.I())});
z.defineProperty(xn,{sorting:"sorting"},function(){return this.ai},function(a){this.ai!==a&&(z.Ba(a,xn,xn,"sorting"),a===En||a===Fn||a===yn||Cn||a===Gn)&&(this.ai=a,this.I())});z.defineProperty(xn,{comparer:"comparer"},function(){return this.Lh},function(a){this.Lh!==a&&(z.g(a,"function",xn,"comparer"),this.Lh=a,this.I())});z.defineProperty(xn,{spacing:"spacing"},function(){return this.bi},function(a){this.bi!==a&&(z.g(a,"number",xn,"spacing"),this.bi=a,this.I())});
z.defineProperty(xn,{vx:"nodeDiameterFormula"},function(){return this.Yr},function(a){this.Yr!==a&&(z.Ba(a,xn,xn,"nodeDiameterFormula"),a===Qn||a===Pn)&&(this.Yr=a,this.I())});z.w(xn,{KG:"actualXRadius"},function(){return this.Ud});z.w(xn,{LG:"actualYRadius"},function(){return this.Fg});z.w(xn,{GJ:"actualSpacing"},function(){return this.Tk});z.w(xn,{JG:"actualCenter"},function(){return isNaN(this.je.x)||isNaN(this.je.y)?new N(0,0):new N(this.je.x+this.KG,this.je.y+this.LG)});var Nn;
xn.ConstantSpacing=Nn=z.s(xn,"ConstantSpacing",0);var Mn;xn.ConstantDistance=Mn=z.s(xn,"ConstantDistance",1);var Ln;xn.ConstantAngle=Ln=z.s(xn,"ConstantAngle",2);var On;xn.Packed=On=z.s(xn,"Packed",3);var Jn;xn.Clockwise=Jn=z.s(xn,"Clockwise",4);var Kn;xn.Counterclockwise=Kn=z.s(xn,"Counterclockwise",5);var Hn;xn.BidirectionalLeft=Hn=z.s(xn,"BidirectionalLeft",6);var In;xn.BidirectionalRight=In=z.s(xn,"BidirectionalRight",7);var En;xn.Forwards=En=z.s(xn,"Forwards",8);var Fn;
xn.Reverse=Fn=z.s(xn,"Reverse",9);var yn;xn.Ascending=yn=z.s(xn,"Ascending",10);var Cn;xn.Descending=Cn=z.s(xn,"Descending",11);var Gn;xn.Optimized=Gn=z.s(xn,"Optimized",12);var Qn;xn.Pythagorean=Qn=z.s(xn,"Pythagorean",13);var Pn;xn.Circular=Pn=z.s(xn,"Circular",14);function Bq(){this.pp=-Infinity;this.gq=this.Cn=null}
Bq.prototype.compare=function(a,b){if(0<a&&0>this.pp||Math.abs(a)<Math.abs(this.pp)&&!(0>a&&0<this.pp)){this.pp=a;this.Cn=[];this.gq=[];for(var c=0;c<b.length;c++)this.Cn[c]=b[c].vb.x,this.gq[c]=b[c].vb.y}};Bq.prototype.commit=function(a){if(null!==this.Cn&&null!==this.gq)for(var b=0;b<this.Cn.length;b++){var c=a.ea(b);c.x=this.Cn[b];c.y=this.gq[b]}};function Cq(){wa.call(this)}z.Ra(Cq,wa);z.ia("CircularNetwork",Cq);Cq.prototype.createVertex=function(){return new Dq};Cq.prototype.createEdge=function(){return new Qq};
function Dq(){xa.call(this);this.actualAngle=this.diameter=NaN}z.Ra(Dq,xa);z.ia("CircularVertex",Dq);
function Eq(a,b){var c=a.network;if(null===c)return NaN;c=c.Sb;if(null===c)return NaN;if(c.Yf===On)if(c.vx===Pn)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.vx===Pn?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function Qq(){ya.call(this)}z.Ra(Qq,ya);z.ia("CircularEdge",Qq);
function Rq(){0<arguments.length&&z.pd(Rq);yg.call(this);this.Eg=null;this.wr=0;this.mg=(new Ea(100,100)).freeze();this.qq=!1;this.$h=!0;this.Kh=!1;this.Bo=100;this.Xq=1;this.Sh=1E3;this.ks=Math;this.Xn=.05;this.Wn=50;this.Tn=150;this.Vn=0;this.Nq=10;this.Mq=5}z.Ra(Rq,yg);z.ia("ForceDirectedLayout",Rq);
Rq.prototype.cloneProtected=function(a){yg.prototype.cloneProtected.call(this,a);a.mg.assign(this.mg);a.qq=this.qq;a.$h=this.$h;a.Kh=this.Kh;a.Bo=this.Bo;a.Xq=this.Xq;a.Sh=this.Sh;a.ks=this.ks;a.Xn=this.Xn;a.Wn=this.Wn;a.Tn=this.Tn;a.Vn=this.Vn;a.Nq=this.Nq;a.Mq=this.Mq};Rq.prototype.createNetwork=function(){return new Sq};
Rq.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.pA;if(0<this.network.vertexes.count){this.network.Uw();for(var b=this.network.vertexes.i;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.i;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);
this.Dz();this.wr=0;if(this.needsClusterLayout()){b=this.network;for(c=b.oJ().i;c.next();){this.network=c.value;for(var d=this.network.vertexes.i;d.next();){var e=d.value;e.ig=e.vertexes.count;e.vk=1;e.Wm=null;e.Fh=null}Tq(this,0,a)}this.network=b;c.reset();u&&z.l(b,Sq,Rq,"arrangeConnectedGraphs:singletons");for(var d=this.KD,g=c.count,h=!0,k=e=0,l=z.rb(),m=0;m<g+b.vertexes.count+2;m++)l[m]=null;g=0;c.reset();for(var n=z.lg();c.next();)if(m=c.value,this.sh(m,n),h)h=!1,e=n.x+n.width/2,k=n.y+n.height/
2,l[0]=new N(n.x+n.width+d.width,n.y),l[1]=new N(n.x,n.y+n.height+d.height),g=2;else{var p=Uq(l,g,e,k,n.width,n.height,d),q=l[p],r=new N(q.x+n.width+d.width,q.y),s=new N(q.x,q.y+n.height+d.height);p+1<g&&l.splice(p+1,0,null);l[p]=r;l[p+1]=s;g++;p=q.x-n.x;q=q.y-n.y;for(m=m.vertexes.i;m.next();)r=m.value,r.ra+=p,r.za+=q}z.dc(n);for(m=b.vertexes.i;m.next();)h=m.value,n=h.vb,2>g?(e=n.x+n.width/2,k=n.y+n.height/2,l[0]=new N(n.x+n.width+d.width,n.y),l[1]=new N(n.x,n.y+n.height+d.height),g=2):(p=Uq(l,g,
e,k,n.width,n.height,d),q=l[p],r=new N(q.x+n.width+d.width,q.y),s=new N(q.x,q.y+n.height+d.height),p+1<g&&l.splice(p+1,0,null),l[p]=r,l[p+1]=s,g++,h.ra=q.x+h.width/2,h.za=q.y+h.height/2);z.xa(l);for(c.reset();c.next();){d=c.value;for(e=d.vertexes.i;e.next();)b.ul(e.value);for(d=d.edges.i;d.next();)b.Zo(d.value)}}Vq(this,a);this.updateParts()}this.Bo=a;this.network=null;this.Gf=!0};
Rq.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var a=0,b=0,c=this.network.vertexes.first().vb,d=this.network.vertexes.i;d.next();){if(d.value.vb.Jg(c)&&(a++,2<a))return!0;if(10<b)break;b++}return!1};Rq.prototype.sh=function(a,b){for(var c=!0,d=a.vertexes.i;d.next();){var e=d.value;c?(c=!1,b.set(e.vb)):b.ri(e.vb)}return b};
function Wq(a,b,c){u&&(z.p(b,Rq,"computeClusterLayoutIterations:level"),z.p(c,Rq,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10)}
function Tq(a,b,c){u&&(z.p(b,Rq,"layoutClusters:level"),z.p(c,Rq,"layoutClusters:maxiter"));if(fr(a,b)){var d=a.Sh;a.Sh*=1+1/(b+1);var e=lr(a,b),g=Math.max(0,Wq(a,b,c));a.pA+=g;Tq(a,b+1,c);Vq(a,g);mr(a,e,b);c=a.Eg;null===c?c=new J(nr):c.clear();c.$c(e.vertexes);c.sort(function(a,b){return null===a||null===b||a===b?0:b.ig-a.ig});for(e=c.i;e.next();)or(a,e.value,b);a.Sh=d}}
function fr(a,b){u&&z.p(b,Rq,"hasClusters:level");if(10<b||3>a.network.vertexes.count)return!1;null===a.Eg?a.Eg=new J(nr):a.Eg.clear();a.Eg.$c(a.network.vertexes);var c=a.Eg;c.sort(function(a,b){return null===a||null===b||a===b?0:b.ig-a.ig});for(var d=c.count-1;0<=d&&1>=c.ea(d).ig;)d--;return 1<c.count-d}
function lr(a,b){u&&z.p(b,Rq,"pushSubNetwork:level");for(var c=a.network,d=new Sq,e=a.Eg.i;e.next();){var g=e.value;if(1<g.ig){d.ul(g);var h=new pr;h.Yx=g.ig;h.Zx=g.width;h.Xx=g.height;h.jB=g.S.x;h.kB=g.S.y;null===g.Fh&&(g.Fh=new J(pr));g.Fh.add(h);g.LA=g.Fh.count-1}else break}for(var k=c.edges.i;k.next();)if(e=k.value,e.fromVertex.network===d&&e.toVertex.network===d)d.Zo(e);else if(e.fromVertex.network===d){var l=e.fromVertex.Wm;null===l&&(l=new J(nr),e.fromVertex.Wm=l);l.add(e.toVertex);e.fromVertex.ig--;
e.fromVertex.vk+=e.toVertex.vk}else e.toVertex.network===d&&(l=e.toVertex.Wm,null===l&&(l=new J(nr),e.toVertex.Wm=l),l.add(e.fromVertex),e.toVertex.ig--,e.toVertex.vk+=e.fromVertex.vk);for(e=d.edges.i;e.next();)g=e.value,g.length*=Math.max(1,se((g.fromVertex.vk+g.toVertex.vk)/(4*b+1)));for(e=d.vertexes.i;e.next();)if(g=e.value,l=g.Wm,null!==l&&0<l.count&&(h=g.Fh.ea(g.Fh.count-1),h=h.Yx-g.ig,!(0>=h))){for(var m=0,n=0,p=l.count-h;p<l.count;p++){for(var q=l.ea(p),r=null,k=q.edges.i;k.next();){var s=
k.value;if(s.MH(q)===g){r=s;break}}null!==r&&(n+=r.length,m+=q.width*q.height)}l=g.ra;k=g.za;p=g.width;q=g.height;r=g.S;s=p*q;1>s&&(s=1);m=se((m+s+n*n*4/(h*h))/s);h=(m-1)*p/2;m=(m-1)*q/2;g.vb=new w(l-r.x-h,k-r.y-m,p+2*h,q+2*m);g.focus=new N(r.x+h,r.y+m)}a.network=d;return c}
function mr(a,b,c){u&&(z.l(b,Sq,Rq,"popNetwork:oldnet"),z.p(c,Rq,"popNetwork:level"));for(c=a.network.vertexes.i;c.next();){var d=c.value;d.network=b;if(null!==d.Fh){var e=d.Fh.ea(d.LA);d.ig=e.Yx;var g=e.jB,h=e.kB;d.vb=new w(d.ra-g,d.za-h,e.Zx,e.Xx);d.focus=new N(g,h);d.LA--}}for(c=a.network.edges.i;c.next();)c.value.network=b;a.network=b}
function or(a,b,c){u&&(z.l(b,nr,Rq,"surroundNode:oldnet"),z.p(c,Rq,"surroundNode:level"));var d=b.Wm;if(null!==d&&0!==d.count){c=b.ra;var e=b.za,g=b.width,h=b.height;null!==b.Fh&&0<b.Fh.count&&(h=b.Fh.ea(0),g=h.Zx,h=h.Xx);for(var g=se(g*g+h*h)/2,k=!1,l=h=0,m=0,n=b.vertexes.i;n.next();){var p=n.value;1>=p.ig?l++:(k=!0,m++,h+=Math.atan2(b.za-p.za,b.ra-p.ra))}if(0!==l)for(0<m&&(h/=m),m=b=0,b=k?2*Math.PI/(l+1):2*Math.PI/l,0===l%2&&(m=b/2),1<d.count&&d.sort(function(a,b){return null===a||null===b||a===
b?0:b.width*b.height-a.width*a.height}),k=0===l%2?0:1,d=d.i;d.next();)if(l=d.value,!(1<l.ig||a.isFixed(l))){n=null;for(p=l.edges.i;p.next();){n=p.value;break}var p=l.width,q=l.height,p=se(p*p+q*q)/2,n=g+n.length+p,p=h+(b*(k/2>>1)+m)*(0===k%2?1:-1);l.ra=c+n*Math.cos(p);l.za=e+n*Math.sin(p);k++}}}
function Uq(a,b,c,d,e,g,h){var k=9E19,l=-1,m=0;a:for(;m<b;m++){var n=a[m],p=n.x-c,q=n.y-d,p=p*p+q*q;if(p<k){for(q=m-1;0<=q;q--)if(a[q].y>n.y&&a[q].x-n.x<e+h.width)continue a;for(q=m+1;q<b;q++)if(a[q].x>n.x&&a[q].y-n.y<g+h.height)continue a;l=m;k=p}}return l}Rq.prototype.Dz=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Rq.prototype.addComments=function(a){var b=a.Pc;if(null!==b)for(b=b.qE();b.next();){var c=b.value;if("Comment"===c.nc&&c.isVisible()){var d=this.network.dn(c);null===d&&(d=this.network.ht(c));d.charge=this.mH;for(var c=null,e=d.pc;e.next();){var g=e.value;if(g.toVertex===a){c=g;break}}if(null===c)for(e=d.tc;e.next();)if(g=e.value,g.fromVertex===a){c=g;break}null===c&&(c=this.network.Hp(a,d,null));c.length=this.nH}}};
function qr(a,b){u&&(z.l(a,nr,Rq,"getNodeDistance:vertexA"),z.l(b,nr,Rq,"getNodeDistance:vertexB"));var c=a.P,d=c.x,e=c.y,g=c.width,c=c.height,h=b.P,k=h.x,l=h.y,m=h.width,h=h.height;return d+g<k?e>l+h?(d=d+g-k,e=e-l-h,se(d*d+e*e)):e+c<l?(d=d+g-k,e=e+c-l,se(d*d+e*e)):k-(d+g):d>k+m?e>l+h?(d=d-k-m,e=e-l-h,se(d*d+e*e)):e+c<l?(d=d-k-m,e=e+c-l,se(d*d+e*e)):d-(k+m):e>l+h?e-(l+h):e+c<l?l-(e+c):.1}
function Vq(a,b){u&&z.p(b,Rq,"performIterations:num");a.Eg=null;for(var c=a.wr+b;a.wr<c&&(a.wr++,rr(a)););a.Eg=null}
function rr(a){null===a.Eg&&(a.Eg=new J(nr),a.Eg.$c(a.network.vertexes));var b=a.Eg.o;if(0>=b.length)return!1;var c=b[0];c.forceX=0;c.forceY=0;for(var d=c.ra,e=d,g=c.za,h=g,c=1;c<b.length;c++){var k=b[c];k.forceX=0;k.forceY=0;var l=k.ra,k=k.za,d=Math.min(d,l),e=Math.max(e,l),g=Math.min(g,k),h=Math.max(h,k)}(g=e-d>h-g)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.ra-b.ra}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.za-b.za});for(var h=a.Sh,m=0,n=0,p=0,c=0;c<b.length;c++){var k=
b[c],l=k.P,q=k.S,d=l.x+q.x,l=l.y+q.y,n=k.charge*a.electricalFieldX(d,l),p=k.charge*a.electricalFieldY(d,l),n=n+k.mass*a.gravitationalFieldX(d,l),p=p+k.mass*a.gravitationalFieldY(d,l);k.forceX+=n;k.forceY+=p;for(q=c+1;q<b.length;q++)if(e=b[q],e!==k){var r=e.P,n=e.S,p=r.x+n.x,r=r.y+n.y;if(d-p>h||p-d>h){if(g)break}else if(l-r>h||r-l>h){if(!g)break}else{var s=qr(k,e);1>s?(n=a.Dx,null===n&&(a.Dx=n=new Ka(0)),m=n.random(),s=n.random(),d>p?(n=Math.abs(e.P.right-k.P.x),n=(1+n)*m):d<p?(n=Math.abs(e.P.x-k.P.right),
n=-(1+n)*m):(n=Math.max(e.width,k.width),n=(1+n)*m-n/2),l>r?(p=Math.abs(e.P.bottom-k.P.y),p=(1+p)*s):d<p?(p=Math.abs(e.P.y-k.P.bottom),p=-(1+p)*s):(p=Math.max(e.height,k.height),p=(1+p)*s-p/2)):(m=-(k.charge*e.charge)/(s*s),n=(p-d)/s*m,p=(r-l)/s*m);k.forceX+=n;k.forceY+=p;e.forceX-=n;e.forceY-=p}}}for(c=a.network.edges.i;c.next();)g=c.value,k=g.fromVertex,e=g.toVertex,l=k.P,q=k.S,d=l.x+q.x,l=l.y+q.y,r=e.P,n=e.S,p=r.x+n.x,r=r.y+n.y,s=qr(k,e),1>s?(n=a.Dx,null===n&&(a.Dx=n=new Ka(0)),m=n.random(),s=
n.random(),n=(d>p?1:-1)*(1+(e.width>k.width)?e.width:k.width)*m,p=(l>r?1:-1)*(1+(e.height>k.height)?e.height:k.height)*s):(m=g.stiffness*(s-g.length),n=(p-d)/s*m,p=(r-l)/s*m),k.forceX+=n,k.forceY+=p,e.forceX-=n,e.forceY-=p;c=0;d=Math.max(a.Sh/20,50);for(e=0;e<b.length;e++)k=b[e],a.isFixed(k)?a.moveFixedVertex(k):(g=k.forceX,h=k.forceY,g<-d?g=-d:g>d&&(g=d),h<-d?h=-d:h>d&&(h=d),k.ra+=g,k.za+=h,c=Math.max(c,g*g+h*h));return c>a.nE*a.nE}Rq.prototype.moveFixedVertex=function(){};
Rq.prototype.commitLayout=function(){this.QA();this.commitNodes();this.Rt&&this.commitLinks()};Rq.prototype.QA=function(){if(this.aq)for(var a=this.network.edges.i;a.next();){var b=a.value.link;null!==b&&(b.Db=Pc,b.Eb=Pc)}};Rq.prototype.commitNodes=function(){var a=0,b=0;if(this.TG){var c=z.lg();this.sh(this.network,c);b=this.je;a=b.x-c.x;b=b.y-c.y;z.dc(c)}for(var c=z.lg(),d=this.network.vertexes.i;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.vb),c.x+=a,c.y+=b,e.vb=c;e.commit()}z.dc(c)};
Rq.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};Rq.prototype.springStiffness=function(a){a=a.stiffness;return isNaN(a)?this.Xn:a};Rq.prototype.springLength=function(a){a=a.length;return isNaN(a)?this.Wn:a};Rq.prototype.electricalCharge=function(a){a=a.charge;return isNaN(a)?this.Tn:a};Rq.prototype.electricalFieldX=function(){return 0};Rq.prototype.electricalFieldY=function(){return 0};
Rq.prototype.gravitationalMass=function(a){a=a.mass;return isNaN(a)?this.Vn:a};Rq.prototype.gravitationalFieldX=function(){return 0};Rq.prototype.gravitationalFieldY=function(){return 0};Rq.prototype.isFixed=function(a){return a.isFixed};z.w(Rq,{gK:"currentIteration"},function(){return this.wr});z.defineProperty(Rq,{KD:"arrangementSpacing"},function(){return this.mg},function(a){z.l(a,Ea,Rq,"arrangementSpacing");this.mg.N(a)||(this.mg.assign(a),this.I())});
z.defineProperty(Rq,{TG:"arrangesToOrigin"},function(){return this.qq},function(a){this.qq!==a&&(z.g(a,"boolean",Rq,"arrangesToOrigin"),this.qq=a,this.I())});z.defineProperty(Rq,{aq:"setsPortSpots"},function(){return this.$h},function(a){this.$h!==a&&(z.g(a,"boolean",Rq,"setsPortSpots"),this.$h=a,this.I())});z.defineProperty(Rq,{comments:"comments"},function(){return this.Kh},function(a){this.Kh!==a&&(z.g(a,"boolean",Rq,"comments"),this.Kh=a,this.I())});
z.defineProperty(Rq,{pA:"maxIterations"},function(){return this.Bo},function(a){this.Bo!==a&&(z.g(a,"number",Rq,"maxIterations"),0<=a&&(this.Bo=a,this.I()))});z.defineProperty(Rq,{nE:"epsilonDistance"},function(){return this.Xq},function(a){this.Xq!==a&&(z.g(a,"number",Rq,"epsilonDistance"),0<a&&(this.Xq=a,this.I()))});z.defineProperty(Rq,{CK:"infinityDistance"},function(){return this.Sh},function(a){this.Sh!==a&&(z.g(a,"number",Rq,"infinityDistance"),1<a&&(this.Sh=a,this.I()))});
z.defineProperty(Rq,{Dx:"randomNumberGenerator"},function(){return this.ks},function(a){this.ks!==a&&(null!==a&&"function"!==typeof a.random&&z.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+a),this.ks=a)});z.defineProperty(Rq,{sK:"defaultSpringStiffness"},function(){return this.Xn},function(a){this.Xn!==a&&(z.g(a,"number",Rq,"defaultSpringStiffness"),this.Xn=a,this.I())});
z.defineProperty(Rq,{rK:"defaultSpringLength"},function(){return this.Wn},function(a){this.Wn!==a&&(z.g(a,"number",Rq,"defaultSpringLength"),this.Wn=a,this.I())});z.defineProperty(Rq,{lK:"defaultElectricalCharge"},function(){return this.Tn},function(a){this.Tn!==a&&(z.g(a,"number",Rq,"defaultElectricalCharge"),this.Tn=a,this.I())});z.defineProperty(Rq,{mK:"defaultGravitationalMass"},function(){return this.Vn},function(a){this.Vn!==a&&(z.g(a,"number",Rq,"defaultGravitationalMass"),this.Vn=a,this.I())});
z.defineProperty(Rq,{nH:"defaultCommentSpringLength"},function(){return this.Nq},function(a){this.Nq!==a&&(z.g(a,"number",Rq,"defaultCommentSpringLength"),this.Nq=a,this.I())});z.defineProperty(Rq,{mH:"defaultCommentElectricalCharge"},function(){return this.Mq},function(a){this.Mq!==a&&(z.g(a,"number",Rq,"defaultCommentElectricalCharge"),this.Mq=a,this.I())});function pr(){this.kB=this.jB=this.Xx=this.Zx=this.Yx=0}function Sq(){wa.call(this)}z.Ra(Sq,wa);z.ia("ForceDirectedNetwork",Sq);
Sq.prototype.createVertex=function(){return new nr};Sq.prototype.createEdge=function(){return new sr};function nr(){xa.call(this);this.isFixed=!1;this.mass=this.charge=NaN;this.vk=this.ig=this.forceY=this.forceX=0;this.Fh=this.Wm=null;this.LA=0}z.Ra(nr,xa);z.ia("ForceDirectedVertex",nr);function sr(){ya.call(this);this.length=this.stiffness=NaN}z.Ra(sr,ya);z.ia("ForceDirectedEdge",sr);
function on(){0<arguments.length&&z.pd(on);yg.call(this);this.Td=this.pm=25;this.fa=0;this.Sn=tr;this.xo=ur;this.no=vr;this.nm=4;this.Fn=wr;this.Si=xr;this.$h=!0;this.Br=4;this.Kb=this.Jv=this.yb=-1;this.Rf=this.Lr=0;this.Rb=this.Pf=this.Qf=this.ug=this.ge=null;this.Ur=0;this.Tr=this.um=null;this.wg=0;this.Vr=null;this.tB=new N;this.ih=[];this.ih.length=100}z.Ra(on,yg);z.ia("LayeredDigraphLayout",on);
on.prototype.cloneProtected=function(a){yg.prototype.cloneProtected.call(this,a);a.pm=this.pm;a.Td=this.Td;a.fa=this.fa;a.Sn=this.Sn;a.xo=this.xo;a.no=this.no;a.nm=this.nm;a.Fn=this.Fn;a.Si=this.Si;a.$h=this.$h;a.Br=this.Br};on.prototype.createNetwork=function(){return new yr};
on.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.je=this.initialOrigin(this.je);this.Jv=-1;this.Rf=this.Lr=0;this.Vr=this.Tr=this.um=null;for(a=0;a<this.ih.length;a++)this.ih[a]=null;if(0<this.network.vertexes.count){this.network.Uw();for(a=this.network.edges.i;a.next();)a.value.rev=!1;switch(this.Sn){default:case zr:var b=0,c=this.network.vertexes.count-
1;a=[];a.length=c+1;for(var d=this.network.vertexes.i;d.next();)d.value.valid=!0;for(;null!==Ar(this.network);){for(d=Br(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=Br(this.network);for(d=Cr(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=Cr(this.network);for(var d=null,e=0,g=this.network.vertexes.i;g.next();){var h=g.value;if(h.valid){for(var k=0,l=h.pc;l.next();)l.value.toVertex.valid&&k++;for(var l=0,m=h.tc;m.next();)m.value.fromVertex.valid&&l++;if(null===d||e<k-l)d=h,e=k-l}}null!==d&&(a[b]=
d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.i;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.Hx(b),b.rev=!0);break;case tr:for(b=this.network.vertexes.i;b.next();)a=b.value,a.ip=-1,a.finish=-1;for(a=this.network.edges.i;a.next();)a.value.forest=!1;this.Ur=0;for(b.reset();b.next();)c=b.value,0===c.tc.count&&Dr(this,c);for(b.reset();b.next();)c=b.value,-1===c.ip&&Dr(this,c);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,
d=c.finish,e=b.toVertex,g=e.finish,e.ip<c.ip&&d<g&&(this.network.Hx(b),b.rev=!0))}for(a=this.network.vertexes.i;a.next();)a.value.layer=-1;this.yb=-1;this.assignLayers();for(a.reset();a.next();)this.yb=Math.max(this.yb,a.value.layer);a=[];for(c=this.network.edges.i;c.next();)b=c.value,b.valid=!1,a.push(b);for(c=0;c<a.length;c++)if(b=a[c],!b.valid&&(null!==b.fromVertex.Cd&&null!==b.toVertex.Cd||b.fromVertex.layer!==b.toVertex.layer)){l=h=k=g=0;e=b.fromVertex;d=b.toVertex;if(null!==b.link){k=b.link;
if(null===k)continue;var n=e.Cd,g=d.Cd;if(null===n||null===g)continue;var p=k.Y,h=k.da,q=k.md,l=k.Qd;b.rev&&(k=p,m=q,p=h,q=l,h=k,l=m);var r=e.S,k=b.toVertex.S,s=b.rev?d.P:e.P,m=z.O();s.F()?(pp(p,q,ec,m),m.F()||m.assign(r)):m.assign(r);n!==p&&s.F()&&p.isVisible()&&(n=e.P,n.F()&&(m.x+=s.x-n.x,m.y+=s.y-n.y));p=b.rev?e.P:d.P;n=z.O();p.F()?(pp(h,l,ec,n),n.F()||n.assign(k)):n.assign(k);g!==h&&p.F()&&h.isVisible()&&(g=d.P,g.F()&&(n.x+=p.x-g.x,n.y+=p.y-g.y));90===this.fa||270===this.fa?(g=Math.round((m.x-
r.x)/this.Td),h=m.x,k=Math.round((n.x-k.x)/this.Td),l=n.x):(g=Math.round((m.y-r.y)/this.Td),h=m.y,k=Math.round((n.y-k.y)/this.Td),l=n.y);z.A(m);z.A(n);b.portFromColOffset=g;b.portFromPos=h;b.portToColOffset=k;b.portToPos=l}else b.portFromColOffset=0,b.portFromPos=0,b.portToColOffset=0,b.portToPos=0;m=e.layer;r=d.layer;a:if(n=b,p=0,s=n.link,null!==s){var t=s.md,v=s.Qd;if(null!==t&&null!==v){var x=s.Y,q=s.da;if(null!==x&&null!==q){var y=t.Db,A=v.Eb;this.aq||(s.Db.bd()||(y=s.Db),s.Eb.bd()||(A=s.Eb));
var C=s.rc,L=Er(this,!0);if(y.bd()||y===Yb)y=L;var H=Er(this,!1);if(A.bd()||A===Yb)A=H;if(y.lj()&&y.vp(H)&&A.lj()&&A.vp(L)){p=0;break a}L=s.getLinkPoint(x,t,y,!0,C,q,v,z.O());y=s.getLinkDirection(x,t,L,y,!0,C,q,v);z.A(L);y===Fr(this,n,!0)?p+=1:this.aq&&null!==x&&1===x.ports.count&&n.rev&&(p+=1);y=s.getLinkPoint(q,v,A,!1,C,x,t,z.O());s=s.getLinkDirection(q,v,y,A,!1,C,x,t);z.A(y);s===Fr(this,n,!1)?p+=2:this.aq&&null!==q&&1===q.ports.count&&n.rev&&(p+=2)}}}n=1===p||3===p?!0:!1;if(p=2===p||3===p?!0:!1)q=
this.network.createVertex(),q.Cd=null,q.Tm=1,q.layer=m,q.near=e,this.network.ul(q),e=this.network.Hp(e,q,b.link),e.valid=!1,e.rev=b.rev,e.portFromColOffset=g,e.portToColOffset=0,e.portFromPos=h,e.portToPos=0,e=q;s=1;n&&s--;if(m-r>s&&0<m){b.valid=!1;q=this.network.createVertex();q.Cd=null;q.Tm=2;q.layer=m-1;this.network.ul(q);e=this.network.Hp(e,q,b.link);e.valid=!0;e.rev=b.rev;e.portFromColOffset=p?0:g;e.portToColOffset=0;e.portFromPos=p?0:h;e.portToPos=0;e=q;for(m--;m-r>s&&0<m;)q=this.network.createVertex(),
q.Cd=null,q.Tm=3,q.layer=m-1,this.network.ul(q),e=this.network.Hp(e,q,b.link),e.valid=!0,e.rev=b.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=q,m--;e=this.network.Hp(q,d,b.link);e.valid=!n;n&&(q.near=d);e.rev=b.rev;e.portFromColOffset=0;e.portToColOffset=k;e.portFromPos=0;e.portToPos=l}else b.valid=!0}b=this.ge=[];for(c=0;c<=this.yb;c++)b[c]=0;for(a=this.network.vertexes.i;a.next();)c=a.value,c.index=-1;this.initializeIndices();this.Jv=-1;for(c=this.Rf=this.Lr=0;c<=
this.yb;c++)b[c]>b[this.Rf]&&(this.Jv=b[c]-1,this.Rf=c),b[c]<b[this.Lr]&&(this.Lr=c);this.Vr=[];for(c=0;c<b.length;c++)this.Vr[c]=[];for(a.reset();a.next();)b=a.value,c=this.Vr[b.layer],c[b.index]=b;this.Kb=-1;for(a=0;a<=this.yb;a++){b=Gr(this,a);c=0;d=this.ge[a];for(e=0;e<d;e++)g=b[e],c+=this.nodeMinColumnSpace(g,!0),g.column=c,c+=1,c+=this.nodeMinColumnSpace(g,!1);this.Kb=Math.max(this.Kb,c-1);Hr(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=null;this.Gf=
!0};on.prototype.linkMinLength=function(){return 1};function Ir(a){var b=a.fromVertex.Cd;a=a.toVertex.Cd;return null===b&&null===a?8:null===b||null===a?4:1}on.prototype.nodeMinLayerSpace=function(a,b){return null===a.Cd?0:90===this.fa||270===this.fa?b?a.S.y+10:a.P.height-a.S.y+10:b?a.S.x+10:a.P.width-a.S.x+10};
on.prototype.nodeMinColumnSpace=function(a,b){if(null===a.Cd)return 0;var c=b?a.yA:a.xA;if(null!==c)return c;c=this.fa;return 90===c||270===c?b?a.yA=a.S.x/this.Td+1|0:a.xA=(a.P.width-a.S.x)/this.Td+1|0:b?a.yA=a.S.y/this.Td+1|0:a.xA=(a.P.height-a.S.y)/this.Td+1|0};function Jr(a){null===a.um&&(a.um=[]);for(var b=0,c=a.network.vertexes.i;c.next();){var d=c.value;a.um[b]=d.layer;b++;a.um[b]=d.column;b++;a.um[b]=d.index;b++}return a.um}
function Kr(a,b){for(var c=0,d=a.network.vertexes.i;d.next();){var e=d.value;e.layer=b[c];c++;e.column=b[c];c++;e.index=b[c];c++}}
function Lr(a,b,c){u&&(z.p(b,on,"crossingMatrix:unfixedLayer"),z.p(c,on,"crossingMatrix:direction"));var d=Gr(a,b),e=a.ge[b];if(null===a.Tr||a.Tr.length<e*e)a.Tr=[];for(var g=a.Tr,h=0;h<e;h++){var k=0,l=d[h],m=l.near,n=0;if(null!==m&&m.layer===l.layer)if(n=m.index,n>h)for(var p=h+1;p<n;p++)l=d[p],l.near===m&&l.Tm===m.Tm||k++;else for(p=h-1;p>n;p--)l=d[p],l.near===m&&l.Tm===m.Tm||k++;var m=0,q,r=q=p=l=0,s,t=0,v=0;s=0;var x;if(0<=c)for(n=d[h].Ze,m=0;m<n.count;m++)if(q=n.o[m],q.valid&&q.fromVertex.layer!==
b)for(l=q.fromVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=n.o[r],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,v=s.portToPos,s=s.portFromPos,p<v&&(l>t||l===t&&q>s)&&k++,v<p&&(t>l||t===l&&s>q)&&k++);if(0>=c)for(n=d[h].Te,m=0;m<n.count;m++)if(q=n.o[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,q=q.portFromPos,r=m+1;r<n.count;r++)s=n.o[r],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,v=s.portToPos,s=s.portFromPos,q<s&&(l>t||l===t&&p>v)&&k++,
s<q&&(t>l||t===l&&v>p)&&k++);g[h*e+h]=k;for(n=h+1;n<e;n++){var y=0,A=0;if(0<=c)for(k=d[h].Ze,x=d[n].Ze,m=0;m<k.count;m++)if(q=k.o[m],q.valid&&q.fromVertex.layer!==b)for(l=q.fromVertex.index,q=q.portFromPos,r=0;r<x.count;r++)s=x.o[r],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,s=s.portFromPos,(l<t||l===t&&q<s)&&A++,(t<l||t===l&&s<q)&&y++);if(0>=c)for(k=d[h].Te,x=d[n].Te,m=0;m<k.count;m++)if(q=k.o[m],q.valid&&q.toVertex.layer!==b)for(l=q.toVertex.index,p=q.portToPos,r=0;r<x.count;r++)s=x.o[r],
s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,v=s.portToPos,(l<t||l===t&&p<v)&&A++,(t<l||t===l&&v<p)&&y++);g[h*e+n]=y;g[n*e+h]=A}}Hr(a,b,d);return g}on.prototype.countCrossings=function(){for(var a=0,b=0;b<=this.yb;b++)for(var c=Lr(this,b,1),d=this.ge[b],e=0;e<d;e++)for(var g=e;g<d;g++)a+=c[e*d+g];return a};
function Mr(a){for(var b=0,c=0;c<=a.yb;c++){for(var d=a,e=c,g=Gr(d,e),h=d.ge[e],k=0,l=0;l<h;l++){var m=null,m=g[l].Te,n,p=0,q=0;if(null!==m)for(var r=0;r<m.count;r++)n=m.o[r],n.valid&&n.toVertex.layer!==e&&(p=n.fromVertex.column+n.portFromColOffset,q=n.toVertex.column+n.portToColOffset,k+=(Math.abs(p-q)+1)*Ir(n))}Hr(d,e,g);b+=k}return b}
on.prototype.normalize=function(){var a=Infinity;this.Kb=-1;for(var b=this.network.vertexes.i;b.next();){var c=b.value,a=Math.min(a,c.column-this.nodeMinColumnSpace(c,!0));this.Kb=Math.max(this.Kb,c.column+this.nodeMinColumnSpace(c,!1))}for(b.reset();b.next();)b.value.column-=a;this.Kb-=a};
function Nr(a,b,c){u&&(z.p(b,on,"barycenters:unfixedLayer"),z.p(c,on,"barycenters:direction"));for(var d=Gr(a,b),e=a.ge[b],g=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.Ze);var m=null;0<=c&&(m=k.Te);var n=0,p=0,q=k.near;null!==q&&q.layer===k.layer&&(n+=q.column-1,p++);if(null!==l)for(q=0;q<l.count;q++){var k=l.o[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(n+=r.column,p++)}if(null!==m)for(l=0;l<m.count;l++)k=m.o[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(n+=q.column,p++);g[h]=0===p?-1:n/
p}Hr(a,b,d);return g}
function Or(a,b,c){u&&(z.p(b,on,"medians:unfixedLayer"),z.p(c,on,"medians:direction"));for(var d=Gr(a,b),e=a.ge[b],g=[],h=0;h<e;h++){var k=d[h],l=null;0>=c&&(l=k.Ze);var m=null;0<=c&&(m=k.Te);var n=0,p=[],q=k.near;null!==q&&q.layer===k.layer&&(p[n]=q.column-1,n++);if(null!==l)for(q=0;q<l.count;q++){var k=l.o[q],r=k.fromVertex;k.valid&&!k.rev&&r.layer!==b&&(p[n]=r.column+k.portFromColOffset,n++)}if(null!==m)for(l=0;l<m.count;l++)k=m.o[l],q=k.toVertex,k.valid&&!k.rev&&q.layer!==b&&(p[n]=q.column+k.portToColOffset,
n++);0===n?g[h]=-1:(p.sort(function(a,b){return a-b}),m=n>>1,g[h]=n&1?p[m]:p[m-1]+p[m]>>1)}Hr(a,b,d);return g}function Pr(a,b,c,d,e,g){if(b.component===d){b.component=c;var h=0,k=0;if(e)for(var l=b.pc;l.next();){var k=l.value,m=k.toVertex,h=b.layer-m.layer,k=a.linkMinLength(k);h===k&&Pr(a,m,c,d,e,g)}if(g)for(l=b.tc;l.next();)k=l.value,m=k.fromVertex,h=m.layer-b.layer,k=a.linkMinLength(k),h===k&&Pr(a,m,c,d,e,g)}}
function Qr(a,b,c,d,e,g){if(b.component===d){b.component=c;if(e)for(var h=b.pc;h.next();)Qr(a,h.value.toVertex,c,d,e,g);if(g)for(b=b.tc;b.next();)Qr(a,b.value.fromVertex,c,d,e,g)}}function Ar(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid)return b}return null}function Br(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.pc;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}}return null}
function Cr(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.tc;d.next();)if(d.value.fromVertex.valid){c=!1;break}if(c)return b}}return null}function Dr(a,b){b.ip=a.Ur;a.Ur++;for(var c=b.pc;c.next();){var d=c.value,e=d.toVertex;-1===e.ip&&(d.forest=!0,Dr(a,e))}b.finish=a.Ur;a.Ur++}
on.prototype.assignLayers=function(){switch(this.xo){case Rr:Sr(this);break;case Tr:for(var a=0,b=this.network.vertexes.i;b.next();)a=Ur(this,b.value),this.yb=Math.max(a,this.yb);for(b.reset();b.next();)a=b.value,a.layer=this.yb-a.layer;break;default:case ur:Sr(this);for(b=this.network.vertexes.i;b.next();)b.value.valid=!1;for(b.reset();b.next();)a=b.value,0===a.tc.count&&Vr(this,a);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.yb=-1;for(b.reset();b.next();){var c=b.value;c.layer-=
a;this.yb=Math.max(this.yb,c.layer)}}};function Sr(a){for(var b=a.network.vertexes.i;b.next();){var c=Wr(a,b.value);a.yb=Math.max(c,a.yb)}}function Wr(a,b){var c=0;if(-1===b.layer){for(var d=b.pc;d.next();)var e=d.value,g=e.toVertex,e=a.linkMinLength(e),c=Math.max(c,Wr(a,g)+e);b.layer=c}else c=b.layer;return c}function Ur(a,b){var c=0;if(-1===b.layer){for(var d=b.tc;d.next();)var e=d.value,g=e.fromVertex,e=a.linkMinLength(e),c=Math.max(c,Ur(a,g)+e);b.layer=c}else c=b.layer;return c}
function Vr(a,b){if(!b.valid){b.valid=!0;for(var c=b.pc;c.next();)Vr(a,c.value.toVertex);for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(var d=b.Ze.o,e=d.length,g=0;g<e;g++){var h=d[g],k=a.linkMinLength(h);h.fromVertex.layer-h.toVertex.layer>k&&Pr(a,h.fromVertex,0,-1,!0,!1)}for(Pr(a,b,1,-1,!0,!0);0!==b.component;){for(var k=0,d=Infinity,l=0,m=null,n=a.network.vertexes.i;n.next();){var p=n.value;if(1===p.component){for(var q=0,r=!1,s=p.Ze.o,e=s.length,g=0;g<e;g++){var h=s[g],t=h.fromVertex,
q=q+1;1!==t.component&&(k+=1,t=t.layer-p.layer,h=a.linkMinLength(h),d=Math.min(d,t-h))}h=p.Te.o;e=h.length;for(g=0;g<e;g++)s=h[g].toVertex,q-=1,1!==s.component?k-=1:r=!0;(null===m||q<l)&&!r&&(m=p,l=q)}}if(0<k){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else m.component=0}for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(Pr(a,b,1,-1,!0,!1);0!==b.component;){g=0;e=Infinity;d=0;k=null;for(l=a.network.vertexes.i;l.next();)if(m=l.value,1===m.component){n=
0;p=!1;h=m.Ze.o;q=h.length;for(r=0;r<q;r++)s=h[r].fromVertex,n+=1,1!==s.component?g+=1:p=!0;h=m.Te.o;q=h.length;for(r=0;r<q;r++)s=h[r],t=s.toVertex,n-=1,1!==t.component&&(g-=1,t=m.layer-t.layer,s=a.linkMinLength(s),e=Math.min(e,t-s));(null===k||n>d)&&!p&&(k=m,d=n)}if(0>g){for(c.reset();c.next();)g=c.value,1===g.component&&(g.layer-=e);b.component=0}else k.component=0}}}
function Fr(a,b,c){return 90===a.fa?c&&!b.rev||!c&&b.rev?270:90:180===a.fa?c&&!b.rev||!c&&b.rev?0:180:270===a.fa?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
on.prototype.initializeIndices=function(){switch(this.no){default:case Xr:for(var a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;b.index=this.ge[c];this.ge[c]++}break;case vr:a=this.network.vertexes.i;for(b=this.yb;0<=b;b--)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Yr(this,c);break;case Zr:for(a=this.network.vertexes.i,b=0;b<=this.yb;b++)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&$r(this,c)}};
function Yr(a,b){var c=b.layer;b.index=a.ge[c];a.ge[c]++;for(var c=b.Te.jc(),d=!0;d;)for(var d=!1,e=0;e<c.length-1;e++){var g=c[e],h=c[e+1];g.portFromColOffset>h.portFromColOffset&&(d=!0,c[e]=h,c[e+1]=g)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Yr(a,d))}
function $r(a,b){var c=b.layer;b.index=a.ge[c];a.ge[c]++;for(var c=b.Ze.jc(),d=!0,e=0;d;)for(d=!1,e=0;e<c.length-1;e++){var g=c[e],h=c[e+1];g.portToColOffset>h.portToColOffset&&(d=!0,c[e]=h,c[e+1]=g)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&$r(a,d))}
on.prototype.reduceCrossings=function(){for(var a=this.countCrossings(),b=Jr(this),c=0,d=0,e=0,c=0;c<this.nm;c++){for(d=0;d<=this.yb;d++)as(this,d,1),bs(this,d,1);e=this.countCrossings();e<a&&(a=e,b=Jr(this));for(d=this.yb;0<=d;d--)as(this,d,-1),bs(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=Jr(this))}Kr(this,b);for(c=0;c<this.nm;c++){for(d=0;d<=this.yb;d++)as(this,d,0),bs(this,d,0);e=this.countCrossings();e<a&&(a=e,b=Jr(this));for(d=this.yb;0<=d;d--)as(this,d,0),bs(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=Jr(this))}Kr(this,b);var g=!1,h=c=0,k=0,d=0;switch(this.Fn){case cs:break;case ds:for(k=a+1;(d=this.countCrossings())<k;)for(k=d,c=this.yb;0<=c;c--)for(h=0;h<=c;h++){for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=bs(this,d,-1)||g;e=this.countCrossings();e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=bs(this,d,1)||g;e=this.countCrossings();e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=bs(this,d,1)||g;e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,
d=h;d<=c;d++)g=bs(this,d,-1)||g;e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=bs(this,d,0)||g;e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=bs(this,d,0)||g;e>=a?Kr(this,b):(a=e,b=Jr(this))}break;default:case wr:for(c=this.yb,h=0,k=a+1;(d=this.countCrossings())<k;){k=d;for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=bs(this,d,-1)||g;e=this.countCrossings();e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=bs(this,d,1)||g;e=this.countCrossings();
e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=bs(this,d,1)||g;e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=bs(this,d,-1)||g;e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=c;d>=h;d--)g=bs(this,d,0)||g;e>=a?Kr(this,b):(a=e,b=Jr(this));for(g=!0;g;)for(g=!1,d=h;d<=c;d++)g=bs(this,d,0)||g;e>=a?Kr(this,b):(a=e,b=Jr(this))}}Kr(this,b)};
function as(a,b,c){u&&(z.p(b,on,"medianBarycenterCrossingReduction:unfixedLayer"),z.p(c,on,"medianBarycenterCrossingReduction:direction"));var d=0,e=Gr(a,b),g=a.ge[b],h=Or(a,b,c);c=Nr(a,b,c);for(d=0;d<g;d++)-1===c[d]&&(c[d]=e[d].column),-1===h[d]&&(h[d]=e[d].column);for(var k=!0,l;k;)for(k=!1,d=0;d<g-1;d++)if(h[d+1]<h[d]||h[d+1]===h[d]&&c[d+1]<c[d])k=!0,l=h[d],h[d]=h[d+1],h[d+1]=l,l=c[d],c[d]=c[d+1],c[d+1]=l,l=e[d],e[d]=e[d+1],e[d+1]=l;for(d=h=0;d<g;d++)l=e[d],l.index=d,h+=a.nodeMinColumnSpace(l,
!0),l.column=h,h+=1,h+=a.nodeMinColumnSpace(l,!1);Hr(a,b,e)}
function bs(a,b,c){var d=Gr(a,b),e=a.ge[b];c=Lr(a,b,c);var g=0,h;h=[];for(g=0;g<e;g++)h[g]=-1;var k;k=[];for(g=0;g<e;g++)k[g]=-1;for(var l=!1,m=!0;m;)for(m=!1,g=0;g<e-1;g++){var n=c[d[g].index*e+d[g+1].index],p=c[d[g+1].index*e+d[g].index],q=0,r=0,s=d[g].column,t=d[g+1].column,v=a.nodeMinColumnSpace(d[g],!0),x=a.nodeMinColumnSpace(d[g],!1),y=a.nodeMinColumnSpace(d[g+1],!0),A=a.nodeMinColumnSpace(d[g+1],!1),v=s-v+y,x=t-x+A,y=y=0,C=d[g].tc.i;for(C.reset();C.next();)if(A=C.value,A.valid&&A.fromVertex.layer===
b){A=A.fromVertex;for(y=0;d[y]!==A;)y++;y<g&&(q+=2*(g-y),r+=2*(g+1-y));y===g+1&&(q+=1);y>g+1&&(q+=4*(y-g),r+=4*(y-(g+1)))}C=d[g].pc.i;for(C.reset();C.next();)if(A=C.value,A.valid&&A.toVertex.layer===b){A=A.toVertex;for(y=0;d[y]!==A;)y++;y===g+1&&(r+=1)}C=d[g+1].tc.i;for(C.reset();C.next();)if(A=C.value,A.valid&&A.fromVertex.layer===b){A=A.fromVertex;for(y=0;d[y]!==A;)y++;y<g&&(q+=2*(g+1-y),r+=2*(g-y));y===g&&(r+=1);y>g+1&&(q+=4*(y-(g+1)),r+=4*(y-g))}C=d[g+1].pc.i;for(C.reset();C.next();)if(A=C.value,
A.valid&&A.toVertex.layer===b){A=A.toVertex;for(y=0;d[y]!==A;)y++;y===g&&(q+=1)}var y=A=0,C=h[d[g].index],L=k[d[g].index],H=h[d[g+1].index],U=k[d[g+1].index];-1!==C&&(A+=Math.abs(C-s),y+=Math.abs(C-x));-1!==L&&(A+=Math.abs(L-s),y+=Math.abs(L-x));-1!==H&&(A+=Math.abs(H-t),y+=Math.abs(H-v));-1!==U&&(A+=Math.abs(U-t),y+=Math.abs(U-v));if(r<q-.5||r===q&&p<n-.5||r===q&&p===n&&y<A-.5)m=l=!0,d[g].column=x,d[g+1].column=v,n=d[g],d[g]=d[g+1],d[g+1]=n}for(g=0;g<e;g++)d[g].index=g;Hr(a,b,d);return l}
on.prototype.straightenAndPack=function(){var a=0,b=!1,c=0!==(this.Si&es),a=this.Si===xr;1E3<this.network.edges.count&&!a&&(c=!1);if(c){b=[];for(a=a=0;a<=this.yb;a++)b[a]=0;for(var d=0,e=this.network.vertexes.i;e.next();){var g=e.value,a=g.layer,d=g.column,g=this.nodeMinColumnSpace(g,!1);b[a]=Math.max(b[a],d+g)}for(e.reset();e.next();)g=e.value,a=g.layer,d=g.column,g.column=(8*(this.Kb-b[a])>>1)+8*d;this.Kb*=8}if(0!==(this.Si&fs))for(b=!0;b;){b=!1;for(a=this.Rf+1;a<=this.yb;a++)b=gs(this,a,1)||b;
for(a=this.Rf-1;0<=a;a--)b=gs(this,a,-1)||b;b=gs(this,this.Rf,0)||b}if(0!==(this.Si&hs)){for(a=this.Rf+1;a<=this.yb;a++)is(this,a,1);for(a=this.Rf-1;0<=a;a--)is(this,a,-1);is(this,this.Rf,0)}c&&(js(this,-1),js(this,1));if(0!==(this.Si&fs))for(b=!0;b;){b=!1;b=gs(this,this.Rf,0)||b;for(a=this.Rf+1;a<=this.yb;a++)b=gs(this,a,0)||b;for(a=this.Rf-1;0<=a;a--)b=gs(this,a,0)||b}};
function gs(a,b,c){u&&(z.p(b,on,"bendStraighten:unfixedLayer"),z.p(c,on,"bendStraighten:direction"));for(var d=!1;ks(a,b,c);)d=!0;return d}
function ks(a,b,c){u&&(z.p(b,on,"shiftbendStraighten:unfixedLayer"),z.p(c,on,"shiftbendStraighten:direction"));var d=0,e=Gr(a,b),g=a.ge[b],h=Nr(a,b,-1);if(0<c)for(d=0;d<g;d++)h[d]=-1;var k=Nr(a,b,1);if(0>c)for(d=0;d<g;d++)k[d]=-1;for(var l=!1,m=!0;m;)for(m=!1,d=0;d<g;d++){var n=e[d].column,p=a.nodeMinColumnSpace(e[d],!0),q=a.nodeMinColumnSpace(e[d],!1),r=0,r=0>d-1||n-e[d-1].column-1>p+a.nodeMinColumnSpace(e[d-1],!1)?n-1:n,p=0,p=d+1>=g||e[d+1].column-n-1>q+a.nodeMinColumnSpace(e[d+1],!0)?n+1:n,s=q=
0,t=0,v=0,x=0,y=0;if(0>=c)for(var A=e[d].tc.i;A.next();){var C=A.value;C.valid&&C.fromVertex.layer!==b&&(v=Ir(C),x=C.portFromColOffset,y=C.portToColOffset,C=C.fromVertex.column,q+=(Math.abs(n+y-(C+x))+1)*v,s+=(Math.abs(r+y-(C+x))+1)*v,t+=(Math.abs(p+y-(C+x))+1)*v)}if(0<=c)for(A=e[d].pc.i;A.next();)C=A.value,C.valid&&C.toVertex.layer!==b&&(v=Ir(C),x=C.portFromColOffset,y=C.portToColOffset,C=C.toVertex.column,q+=(Math.abs(n+x-(C+y))+1)*v,s+=(Math.abs(r+x-(C+y))+1)*v,t+=(Math.abs(p+x-(C+y))+1)*v);y=
x=v=0;A=h[e[d].index];C=k[e[d].index];-1!==A&&(v+=Math.abs(A-n),x+=Math.abs(A-r),y+=Math.abs(A-p));-1!==C&&(v+=Math.abs(C-n),x+=Math.abs(C-r),y+=Math.abs(C-p));if(s<q||s===q&&x<v)m=l=!0,e[d].column=r;else if(t<q||t===q&&y<v)m=l=!0,e[d].column=p}Hr(a,b,e);a.normalize();return l}
function is(a,b,c){u&&(z.p(b,on,"medianStraighten:unfixedLayer"),z.p(c,on,"medianStraighten:direction"));var d=0,e=Gr(a,b),g=a.ge[b],h=Or(a,b,c);c=[];for(d=0;d<g;d++)c[d]=h[d];for(h=!0;h;)for(h=!1,d=0;d<g;d++){var k=e[d].column,l=a.nodeMinColumnSpace(e[d],!0),m=a.nodeMinColumnSpace(e[d],!1),n=0,p=0,q=0,q=p=0;-1===c[d]?0===d&&d===g-1?n=k:0===d?(p=e[d+1].column,n=p-k===m+a.nodeMinColumnSpace(e[d+1],!0)?k-1:k):d===g-1?(q=e[d-1].column,n=k-q===l+a.nodeMinColumnSpace(e[d-1],!1)?k+1:k):(q=e[d-1].column,
q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,n=(q+p)/2|0):0===d&&d===g-1?n=c[d]:0===d?(p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,n=Math.min(c[d],p)):d===g-1?(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,n=Math.max(c[d],q)):(q=e[d-1].column,q=q+a.nodeMinColumnSpace(e[d-1],!1)+l+1,p=e[d+1].column,p=p-a.nodeMinColumnSpace(e[d+1],!0)-m-1,q<c[d]&&c[d]<p?n=c[d]:q>=c[d]?n=q:p<=c[d]&&(n=p));n!==k&&(h=!0,e[d].column=n)}Hr(a,b,e);a.normalize()}
function ls(a,b){u&&(z.p(b,on,"packAux:column"),z.p(1,on,"packAux:direction"));for(var c=!0,d=a.network.vertexes.i;d.next();){var e=d.value,g=a.nodeMinColumnSpace(e,!0),h=a.nodeMinColumnSpace(e,!1);if(e.column-g<=b&&e.column+h>=b){c=!1;break}}e=!1;if(c)for(d.reset();d.next();)c=d.value,c.column>b&&(c.column-=1,e=!0);return e}
function ms(a,b){u&&(z.p(b,on,"tightPackAux:column"),z.p(1,on,"tightPackAux:direction"));for(var c=b,c=b+1,d=0,e=[],g=[],d=0;d<=a.yb;d++)e[d]=!1,g[d]=!1;for(var h=a.network.vertexes.i;h.next();){var d=h.value,k=d.column-a.nodeMinColumnSpace(d,!0),l=d.column+a.nodeMinColumnSpace(d,!1);k<=b&&l>=b&&(e[d.layer]=!0);k<=c&&l>=c&&(g[d.layer]=!0)}k=!0;c=!1;for(d=0;d<=a.yb;d++)k=k&&!(e[d]&&g[d]);if(k)for(h.reset();h.next();)e=h.value,e.column>b&&(e.column-=1,c=!0);return c}
function js(a,b){u&&z.p(b,on,"componentPack:direction");for(var c=0;c<=a.Kb;c++)for(;ls(a,c););a.normalize();for(c=0;c<a.Kb;c++)for(;ms(a,c););a.normalize();var c=0,d,e=0,g=0,h=0;if(0<b)for(c=0;c<=a.Kb;c++)for(d=Jr(a),e=Mr(a),g=e+1;e<g;)g=e,ns(a,c,1),h=Mr(a),h>e?Kr(a,d):h<e&&(e=h,d=Jr(a));if(0>b)for(c=a.Kb;0<=c;c--)for(d=Jr(a),e=Mr(a),g=e+1;e<g;)g=e,ns(a,c,-1),h=Mr(a),h>e?Kr(a,d):h<e&&(e=h,d=Jr(a));a.normalize()}
function ns(a,b,c){a.wg=0;for(var d=a.network.vertexes.i;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();){var e=d.value;e.column-a.nodeMinColumnSpace(e,!0)<=b&&(e.component=a.wg)}if(0>c)for(d.reset();d.next();)e=d.value,e.column+a.nodeMinColumnSpace(e,!1)>=b&&(e.component=a.wg);a.wg++;for(d.reset();d.next();)b=d.value,-1===b.component&&(Qr(a,b,a.wg,-1,!0,!0),a.wg++);var g=0;b=[];for(g=0;g<a.wg*a.wg;g++)b[g]=!1;e=[];for(g=0;g<(a.yb+1)*(a.Kb+1);g++)e[g]=-1;for(d.reset();d.next();)for(var g=
d.value,h=g.layer,k=Math.max(0,g.column-a.nodeMinColumnSpace(g,!0)),l=Math.min(a.Kb,g.column+a.nodeMinColumnSpace(g,!1));k<=l;k++)e[h*(a.Kb+1)+k]=g.component;for(g=0;g<=a.yb;g++){if(0<c)for(k=0;k<a.Kb;k++)-1!==e[g*(a.Kb+1)+k]&&-1!==e[g*(a.Kb+1)+k+1]&&e[g*(a.Kb+1)+k]!==e[g*(a.Kb+1)+k+1]&&(b[e[g*(a.Kb+1)+k]*a.wg+e[g*(a.Kb+1)+k+1]]=!0);if(0>c)for(k=a.Kb;0<k;k--)-1!==e[g*(a.Kb+1)+k]&&-1!==e[g*(a.Kb+1)+k-1]&&e[g*(a.Kb+1)+k]!==e[g*(a.Kb+1)+k-1]&&(b[e[g*(a.Kb+1)+k]*a.wg+e[g*(a.Kb+1)+k-1]]=!0)}e=[];for(g=
0;g<a.wg;g++)e[g]=!0;h=new J("number");h.add(0);for(l=0;0!==h.count;)if(l=h.o[h.count-1],h.dd(h.count-1),e[l])for(e[l]=!1,g=0;g<a.wg;g++)b[l*a.wg+g]&&h.Md(0,g);if(0<c)for(d.reset();d.next();)a=d.value,e[a.component]&&(a.column-=1);if(0>c)for(d.reset();d.next();)c=d.value,e[c.component]&&(c.column+=1)}
on.prototype.commitLayout=function(){if(this.aq)for(var a=Er(this,!0),b=Er(this,!1),c=this.network.edges.i;c.next();){var d=c.value.link;null!==d&&(d.Db=a,d.Eb=b)}this.commitNodes();this.Hz();this.Rt&&this.commitLinks()};function Er(a,b){return 270===a.fa?b?Zc:bd:90===a.fa?b?bd:Zc:180===a.fa?b?$c:ad:b?ad:$c}
on.prototype.commitNodes=function(){this.ug=[];this.Qf=[];this.Pf=[];this.Rb=[];for(var a=0;a<=this.yb;a++)this.ug[a]=0,this.Qf[a]=0,this.Pf[a]=0,this.Rb[a]=0;for(a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;this.ug[c]=Math.max(this.ug[c],this.nodeMinLayerSpace(b,!0));this.Qf[c]=Math.max(this.Qf[c],this.nodeMinLayerSpace(b,!1))}for(var b=0,d=this.pm,c=0;c<=this.yb;c++){var e=d;0>=this.ug[c]+this.Qf[c]&&(e=0);0<c&&(b+=e/2);90===this.fa||0===this.fa?(b+=this.Qf[c],this.Pf[c]=b,b+=this.ug[c]):
(b+=this.ug[c],this.Pf[c]=b,b+=this.Qf[c]);c<this.yb&&(b+=e/2);this.Rb[c]=b}d=b;b=this.je;for(c=0;c<=this.yb;c++)270===this.fa?this.Pf[c]=b.y+this.Pf[c]:90===this.fa?(this.Pf[c]=b.y+d-this.Pf[c],this.Rb[c]=d-this.Rb[c]):180===this.fa?this.Pf[c]=b.x+this.Pf[c]:(this.Pf[c]=b.x+d-this.Pf[c],this.Rb[c]=d-this.Rb[c]);a.reset();for(d=e=Infinity;a.next();){var c=a.value,g=c.layer,h=c.column|0,k=0,l=0;270===this.fa||90===this.fa?(k=b.x+this.Td*h,l=this.Pf[g]):(k=this.Pf[g],l=b.y+this.Td*h);c.ra=k;c.za=l;
e=Math.min(c.x,e);d=Math.min(c.y,d)}e=b.x-e;b=b.y-d;this.tB=null!==this.group?new N(e,b):Id;for(a.reset();a.next();)c=a.value,null!==this.group&&(c.x+=e,c.y+=b),c.commit()};
on.prototype.Hz=function(){for(var a=0,b=this.pm,c=0;c<=this.yb;c++)a+=this.ug[c],a+=this.Qf[c];for(var a=a+this.yb*b,b=[],c=this.Td*this.Kb,d=this.yI;0<=d;d--)270===this.fa?0===d?b.push(new w(0,0,c,Math.abs(this.Rb[0]))):b.push(new w(0,this.Rb[d-1],c,Math.abs(this.Rb[d-1]-this.Rb[d]))):90===this.fa?0===d?b.push(new w(0,this.Rb[0],c,Math.abs(this.Rb[0]-a))):b.push(new w(0,this.Rb[d],c,Math.abs(this.Rb[d-1]-this.Rb[d]))):180===this.fa?0===d?b.push(new w(0,0,Math.abs(this.Rb[0]),c)):b.push(new w(this.Rb[d-
1],0,Math.abs(this.Rb[d-1]-this.Rb[d]),c)):0===d?b.push(new w(this.Rb[0],0,Math.abs(this.Rb[0]-a),c)):b.push(new w(this.Rb[d],0,Math.abs(this.Rb[d-1]-this.Rb[d]),c));this.commitLayers(b,this.tB)};on.prototype.commitLayers=function(){};
on.prototype.commitLinks=function(){for(var a=this.network.edges.i,b;a.next();)b=a.value.link,null!==b&&(b.Ul(),b.ep(),b.dj());for(a.reset();a.next();)b=a.value.link,null!==b&&b.An();for(a.reset();a.next();){var c=a.value;b=c.link;if(null!==b){b.Ul();var d=b,e=d.Y,g=d.da,h=d.md,k=d.Qd;if(c.valid){if(b.Se===Xi&&4===b.sa){if(c.rev)var l=e,e=g,g=l,m=h,h=k,k=m;if(c.fromVertex.column===c.toVertex.column){var n=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,g,k),p=b.getLinkPoint(g,k,b.computeSpot(!1),!1,!1,
e,h);n.F()||n.set(e.W.yl);p.F()||p.set(g.W.yl);b.ep();b.tl(n.x,n.y);b.tl((2*n.x+p.x)/3,(2*n.y+p.y)/3);b.tl((n.x+2*p.x)/3,(n.y+2*p.y)/3);b.tl(p.x,p.y)}else{var q=!1,r=!1;null!==h&&b.computeSpot(!0)===Yb&&(q=!0);null!==k&&b.computeSpot(!1)===Yb&&(r=!0);if(q||r){var s=b.m(0).x,t=b.m(0).y,v=b.m(1).x,x=b.m(1).y,y=b.m(2).x,A=b.m(2).y,C=b.m(3).x,L=b.m(3).y;if(q){90===this.fa||270===this.fa?(v=s,x=(t+L)/2):(v=(s+C)/2,x=t);b.aa(1,v,x);var H=b.getLinkPoint(e,h,b.computeSpot(!0),!0,!1,g,k);H.F()||H.set(e.W.yl);
b.aa(0,H.x,H.y)}r&&(90===this.fa||270===this.fa?(y=C,A=(t+L)/2):(y=(s+C)/2,A=L),b.aa(2,y,A),H=b.getLinkPoint(g,k,b.computeSpot(!1),!1,!1,e,h),H.F()||H.set(g.W.yl),b.aa(3,H.x,H.y))}}}b.dj()}else if(c.fromVertex.layer===c.toVertex.layer)b.dj();else{var U=!1,ea=!1,W=0,P=b.Ct+1;if(b.rc)ea=!0,W=b.sa,4<W&&b.points.removeRange(2,W-3);else if(b.Se===Xi)U=!0,W=b.sa,4<W&&b.points.removeRange(2,W-3),P=2;else{var W=b.sa,ba=b.computeSpot(!0)===Yb,Oa=b.computeSpot(!1)===Yb;2<W&&ba&&Oa?b.points.removeRange(1,W-
2):3<W&&ba&&!Oa?b.points.removeRange(1,W-3):3<W&&!ba&&Oa?b.points.removeRange(2,W-2):4<W&&!ba&&!Oa&&b.points.removeRange(2,W-3)}var sa=c.fromVertex,Na=c.toVertex,ua,Ha;if(c.rev){for(var Aa=0;null!==Na&&sa!==Na;){Ha=ua=null;for(var jc=Na.tc.i;jc.next();){var zd=jc.value;if(zd.link===c.link&&(ua=zd.fromVertex,Ha=zd.toVertex,null===ua.Cd))break}if(ua!==sa)if(rb=b.m(P-1).x,gb=b.m(P-1).y,oa=ua.ra,pa=ua.za,ea)180===this.fa||0===this.fa?2===P?(b.B(P++,rb,gb),b.B(P++,rb,pa)):(Ae=null!==Ha?Ha.za:gb,Ae!==pa&&
(sb=this.Rb[ua.layer-1],b.B(P++,sb,gb),b.B(P++,sb,pa))):2===P?(b.B(P++,rb,gb),b.B(P++,oa,gb)):(Cd=null!==Ha?Ha.ra:rb,Cd!==oa&&(sb=this.Rb[ua.layer-1],b.B(P++,rb,sb),b.B(P++,oa,sb)));else if(2===P)if(Xa=Math.max(10,this.ug[Na.layer]),Va=Math.max(10,this.Qf[Na.layer]),U)180===this.fa?oa<=Na.P.x?(Aa=Na.P.x,b.B(P++,Aa-Xa,pa),b.B(P++,Aa,pa),b.B(P++,Aa+Va,pa)):(b.B(P++,oa-Xa,pa),b.B(P++,oa,pa),b.B(P++,oa+Va,pa)):90===this.fa?pa>=Na.P.bottom?(Aa=Na.P.y+Na.P.height,b.B(P++,oa,Aa+Va),b.B(P++,oa,Aa),b.B(P++,
oa,Aa-Xa)):(b.B(P++,oa,pa+Va),b.B(P++,oa,pa),b.B(P++,oa,pa-Xa)):270===this.fa?pa<=Na.P.y?(Aa=Na.P.y,b.B(P++,oa,Aa-Xa),b.B(P++,oa,Aa),b.B(P++,oa,Aa+Va)):(b.B(P++,oa,pa-Xa),b.B(P++,oa,pa),b.B(P++,oa,pa+Va)):0===this.fa&&(oa>=Na.P.right?(Aa=Na.P.x+Na.P.width,b.B(P++,Aa+Va,pa),b.B(P++,Aa,pa),b.B(P++,Aa-Xa,pa)):(b.B(P++,oa+Va,pa),b.B(P++,oa,pa),b.B(P++,oa-Xa,pa)));else{b.B(P++,rb,gb);var Ad=0;if(180===this.fa||0===this.fa){if(180===this.fa?oa>=Na.P.right:oa<=Na.P.x)Ad=(0===this.fa?-Xa:Va)/2;b.B(P++,rb+
Ad,pa)}else{if(270===this.fa?pa>=Na.P.bottom:pa<=Na.P.y)Ad=(90===this.fa?-Xa:Va)/2;b.B(P++,oa,gb+Ad)}b.B(P++,oa,pa)}else Xa=Math.max(10,this.ug[ua.layer]),Va=Math.max(10,this.Qf[ua.layer]),180===this.fa?(U&&b.B(P++,oa-Xa,pa),b.B(P++,oa,pa),U&&b.B(P++,oa+Va,pa)):90===this.fa?(U&&b.B(P++,oa,pa+Va),b.B(P++,oa,pa),U&&b.B(P++,oa,pa-Xa)):270===this.fa?(U&&b.B(P++,oa,pa-Xa),b.B(P++,oa,pa),U&&b.B(P++,oa,pa+Va)):(U&&b.B(P++,oa+Va,pa),b.B(P++,oa,pa),U&&b.B(P++,oa-Xa,pa));Na=ua}if(null===k||b.computeSpot(!1)!==
Yb||ea)if(rb=b.m(P-1).x,gb=b.m(P-1).y,oa=b.m(P).x,pa=b.m(P).y,ea){var Qe=this.Qf[sa.layer],ac=0;180===this.fa||0===this.fa?(ac=gb,ac>=sa.P.y&&ac<=sa.P.bottom&&(180===this.fa?oa>=sa.P.x:oa<=sa.P.right)&&(Aa=sa.ra+(180===this.fa?-Qe:Qe),ac=ac<sa.P.y+sa.P.height/2?sa.P.y-this.Td/2:sa.P.bottom+this.Td/2,b.B(P++,Aa,gb),b.B(P++,Aa,ac)),b.B(P++,oa,ac)):(ac=rb,ac>=sa.P.x&&ac<=sa.P.right&&(270===this.fa?pa>=sa.P.y:pa<=sa.P.bottom)&&(Aa=sa.za+(270===this.fa?-Qe:Qe),ac=ac<sa.P.x+sa.P.width/2?sa.P.x-this.Td/
2:sa.P.right+this.Td/2,b.B(P++,rb,Aa),b.B(P++,ac,Aa)),b.B(P++,ac,pa));b.B(P++,oa,pa)}else if(U)Xa=Math.max(10,this.ug[sa.layer]),Va=Math.max(10,this.Qf[sa.layer]),180===this.fa&&oa>=sa.P.x?(Aa=sa.P.x+sa.P.width,b.aa(P-2,Aa,gb),b.aa(P-1,Aa+Va,gb)):90===this.fa&&pa<=sa.P.bottom?(Aa=sa.P.y,b.aa(P-2,rb,Aa),b.aa(P-1,rb,Aa-Xa)):270===this.fa&&pa>=sa.P.y?(Aa=sa.P.y+sa.P.height,b.aa(P-2,rb,Aa),b.aa(P-1,rb,Aa+Va)):0===this.fa&&oa<=sa.P.right&&(Aa=sa.P.x,b.aa(P-2,Aa,gb),b.aa(P-1,Aa-Xa,gb));else{Xa=Math.max(10,
this.ug[sa.layer]);Va=Math.max(10,this.Qf[sa.layer]);Ad=0;if(180===this.fa||0===this.fa){if(180===this.fa?oa<=sa.P.x:oa>=sa.P.right)Ad=(0===this.fa?Va:-Xa)/2;b.B(P++,oa+Ad,gb)}else{if(270===this.fa?pa<=sa.P.y:pa>=sa.P.bottom)Ad=(90===this.fa?Va:-Xa)/2;b.B(P++,rb,pa+Ad)}b.B(P++,oa,pa)}}else{for(;null!==sa&&sa!==Na;){Ha=ua=null;for(var Ng=sa.pc.i;Ng.next();){var Bd=Ng.value;if(Bd.link===c.link&&(ua=Bd.toVertex,Ha=Bd.fromVertex,null!==Ha.Cd&&(Ha=null),null===ua.Cd))break}var rb=0,gb=0,oa=0,pa=0,sb=0,
Xa=0,Va=0;if(ua!==Na)if(rb=b.m(P-1).x,gb=b.m(P-1).y,oa=ua.ra,pa=ua.za,ea)if(180===this.fa||0===this.fa){var Ae=null!==Ha?Ha.za:gb;Ae!==pa&&(sb=this.Rb[ua.layer],2===P&&(sb=0===this.fa?Math.max(sb,rb):Math.min(sb,rb)),b.B(P++,sb,gb),b.B(P++,sb,pa))}else{var Cd=null!==Ha?Ha.ra:rb;Cd!==oa&&(sb=this.Rb[ua.layer],2===P&&(sb=90===this.fa?Math.max(sb,gb):Math.min(sb,gb)),b.B(P++,rb,sb),b.B(P++,oa,sb))}else Xa=Math.max(10,this.ug[ua.layer]),Va=Math.max(10,this.Qf[ua.layer]),180===this.fa?(b.B(P++,oa+Va,pa),
U&&b.B(P++,oa,pa),b.B(P++,oa-Xa,pa)):90===this.fa?(b.B(P++,oa,pa-Xa),U&&b.B(P++,oa,pa),b.B(P++,oa,pa+Va)):270===this.fa?(b.B(P++,oa,pa+Va),U&&b.B(P++,oa,pa),b.B(P++,oa,pa-Xa)):(b.B(P++,oa-Xa,pa),U&&b.B(P++,oa,pa),b.B(P++,oa+Va,pa));sa=ua}ea&&(rb=b.m(P-1).x,gb=b.m(P-1).y,oa=b.m(P).x,pa=b.m(P).y,180===this.fa||0===this.fa?gb!==pa&&(sb=0===this.fa?Math.min(Math.max((oa+rb)/2,this.Rb[Na.layer]),oa):Math.max(Math.min((oa+rb)/2,this.Rb[Na.layer]),oa),b.B(P++,sb,gb),b.B(P++,sb,pa)):rb!==oa&&(sb=90===this.fa?
Math.min(Math.max((pa+gb)/2,this.Rb[Na.layer]),pa):Math.max(Math.min((pa+gb)/2,this.Rb[Na.layer]),pa),b.B(P++,rb,sb),b.B(P++,oa,sb)))}if(null!==d&&U){if(null!==h){if(b.computeSpot(!0)===Yb){var me=b.m(0),Rd=b.m(2);me.N(Rd)||b.aa(1,(me.x+Rd.x)/2,(me.y+Rd.y)/2)}H=b.getLinkPoint(e,h,Yb,!0,!1,g,k);H.F()||H.set(e.W.yl);b.aa(0,H.x,H.y)}null!==k&&(b.computeSpot(!1)===Yb&&(me=b.m(b.sa-1),Rd=b.m(b.sa-3),me.N(Rd)||b.aa(b.sa-2,(me.x+Rd.x)/2,(me.y+Rd.y)/2)),H=b.getLinkPoint(g,k,Yb,!1,!1,e,h),H.F()||H.set(g.W.yl),
b.aa(b.sa-1,H.x,H.y))}b.dj();c.commit()}}}for(var ne=new J(G),Og=this.network.edges.i;Og.next();){var fd=Og.value.link;null!==fd&&fd.rc&&!ne.contains(fd)&&ne.add(fd)}if(0<ne.count)if(90===this.fa||270===this.fa){for(var ti=0,Ab=new J(os),Qb,gd,qh=ne.i;qh.next();){var Lb=qh.value;if(null!==Lb&&Lb.rc)for(var kb=2;kb<Lb.sa-3;kb++)if(Qb=Lb.m(kb),gd=Lb.m(kb+1),ps(Qb.y,gd.y)&&!ps(Qb.x,gd.x)){var db=new os;db.layer=Math.floor(Qb.y/2);var Re=Lb.m(0),Sd=Lb.m(Lb.sa-1);db.first=Re.x*Re.x+Re.y;db.de=Sd.x*Sd.x+
Sd.y;db.Qe=Math.min(Qb.x,gd.x);db.ke=Math.max(Qb.x,gd.x);db.index=kb;db.link=Lb;if(kb+2<Lb.sa){var Pg=Lb.m(kb-1),Qg=Lb.m(kb+2),kc=0;Pg.y<Qb.y?kc=Qg.y<Qb.y?3:Qb.x<gd.x?2:1:Pg.y>Qb.y&&(kc=Qg.y>Qb.y?0:gd.x<Qb.x?2:1);db.qi=kc}Ab.add(db)}}if(1<Ab.count){Ab.sort(this.CF);for(var lc=0;lc<Ab.count;){for(var oe=Ab.o[lc].layer,hd=lc+1;hd<Ab.count&&Ab.o[hd].layer===oe;)hd++;if(1<hd-lc)for(var mb=lc;mb<hd;){for(var Uc=Ab.o[mb].ke,Qa=lc+1;Qa<hd&&Ab.o[Qa].Qe<Uc;)Uc=Math.max(Uc,Ab.o[Qa].ke),Qa++;var nb=Qa-mb;if(1<
nb){Ab.dq(this.Jx,mb,mb+nb);for(var yc=1,Dd=Ab.o[mb].de,kb=mb;kb<Qa;kb++){var Mb=Ab.o[kb];Mb.de!==Dd&&(yc++,Dd=Mb.de)}Ab.dq(this.BF,mb,mb+nb);for(var pe=1,Dd=Ab.o[mb].first,kb=mb;kb<Qa;kb++)Mb=Ab.o[kb],Mb.first!==Dd&&(pe++,Dd=Mb.first);var tf=!0,Se=pe;yc<pe?(tf=!1,Se=yc,Dd=Ab.o[mb].de,Ab.dq(this.Jx,mb,mb+nb)):Dd=Ab.o[mb].first;for(var Mf=0,kb=mb;kb<Qa;kb++){Mb=Ab.o[kb];(tf?Mb.first:Mb.de)!==Dd&&(Mf++,Dd=tf?Mb.first:Mb.de);Lb=Mb.link;Qb=Lb.m(Mb.index);gd=Lb.m(Mb.index+1);var Jb=this.XE*(Mf-(Se-1)/
2);if(!Lb.kj||qs(Qb.x,Qb.y+Jb,gd.x,gd.y+Jb))ti++,Lb.Ul(),Lb.aa(Mb.index,Qb.x,Qb.y+Jb),Lb.aa(Mb.index+1,gd.x,gd.y+Jb),Lb.dj()}}mb=Qa}lc=hd}}}else{for(var Be=0,Rb=new J(os),Vb,Nb,Jc=ne.i;Jc.next();){var xb=Jc.value;if(null!==xb&&xb.rc)for(var Fb=2;Fb<xb.sa-3;Fb++)if(Vb=xb.m(Fb),Nb=xb.m(Fb+1),ps(Vb.x,Nb.x)&&!ps(Vb.y,Nb.y)){var Ob=new os;Ob.layer=Math.floor(Vb.x/2);var Td=xb.m(0),Rg=xb.m(xb.sa-1);Ob.first=Td.x+Td.y*Td.y;Ob.de=Rg.x+Rg.y*Rg.y;Ob.Qe=Math.min(Vb.y,Nb.y);Ob.ke=Math.max(Vb.y,Nb.y);Ob.index=
Fb;Ob.link=xb;if(Fb+2<xb.sa){var rh=xb.m(Fb-1),sh=xb.m(Fb+2),Ce=0;rh.x<Vb.x?Ce=sh.x<Vb.x?3:Vb.y<Nb.y?2:1:rh.x>Vb.x&&(Ce=sh.x>Vb.x?0:Nb.y<Vb.y?2:1);Ob.qi=Ce}Rb.add(Ob)}}if(1<Rb.count){Rb.sort(this.CF);for(var Kc=0;Kc<Rb.count;){for(var De=Rb.o[Kc].layer,mc=Kc+1;mc<Rb.count&&Rb.o[mc].layer===De;)mc++;if(1<mc-Kc)for(var Bb=Kc;Bb<mc;){for(var Cb=Rb.o[Bb].ke,Lc=Kc+1;Lc<mc&&Rb.o[Lc].Qe<Cb;)Cb=Math.max(Cb,Rb.o[Lc].ke),Lc++;var Sg=Lc-Bb;if(1<Sg){Rb.dq(this.Jx,Bb,Bb+Sg);for(var Vc=1,Wc=Rb.o[Bb].de,Fb=Bb;Fb<
Lc;Fb++){var lb=Rb.o[Fb];lb.de!==Wc&&(Vc++,Wc=lb.de)}Rb.dq(this.BF,Bb,Bb+Sg);for(var Mc=1,Wc=Rb.o[Bb].first,Fb=Bb;Fb<Lc;Fb++)lb=Rb.o[Fb],lb.first!==Wc&&(Mc++,Wc=lb.first);var Ud=!0,Vd=Mc;Vc<Mc?(Ud=!1,Vd=Vc,Wc=Rb.o[Bb].de,Rb.dq(this.Jx,Bb,Bb+Sg)):Wc=Rb.o[Bb].first;for(var uf=0,Fb=Bb;Fb<Lc;Fb++){lb=Rb.o[Fb];(Ud?lb.first:lb.de)!==Wc&&(uf++,Wc=Ud?lb.first:lb.de);xb=lb.link;Vb=xb.m(lb.index);Nb=xb.m(lb.index+1);var Tg=this.XE*(uf-(Vd-1)/2);if(!xb.kj||qs(Vb.x+Tg,Vb.y,Nb.x+Tg,Nb.y))Be++,xb.Ul(),xb.aa(lb.index,
Vb.x+Tg,Vb.y),xb.aa(lb.index+1,Nb.x+Tg,Nb.y),xb.dj()}}Bb=Lc}Kc=mc}}}};on.prototype.CF=function(a,b){return a instanceof os&&b instanceof os&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.Qe<b.Qe?-1:a.Qe>b.Qe?1:a.ke<b.ke?-1:a.ke>b.ke?1:0:0};on.prototype.BF=function(a,b){return a instanceof os&&b instanceof os&&a!==b?a.first<b.first?-1:a.first>b.first||a.qi<b.qi?1:a.qi>b.qi||a.Qe<b.Qe?-1:a.Qe>b.Qe?1:a.ke<b.ke?-1:a.ke>b.ke?1:0:0};
on.prototype.Jx=function(a,b){return a instanceof os&&b instanceof os&&a!==b?a.de<b.de?-1:a.de>b.de||a.qi<b.qi?1:a.qi>b.qi||a.Qe<b.Qe?-1:a.Qe>b.Qe?1:a.ke<b.ke?-1:a.ke>b.ke?1:0:0};function ps(a,b){u&&(z.p(a,on,"isApprox:a"),z.p(b,on,"isApprox:b"));var c=a-b;return-1<c&&1>c}function qs(a,b,c,d){u&&(z.p(a,on,"isUnoccupied2:px"),z.p(b,on,"isUnoccupied2:py"),z.p(c,on,"isUnoccupied2:qx"),z.p(d,on,"isUnoccupied2:qy"));return!0}
function Gr(a,b){var c,d=a.ge[b];if(d>=a.ih.length){c=[];for(var e=0;e<a.ih.length;e++)c[e]=a.ih[e];a.ih=c}void 0===a.ih[d]||null===a.ih[d]?c=[]:(c=a.ih[d],a.ih[d]=null);d=a.Vr[b];for(e=0;e<d.length;e++){var g=d[e];c[g.index]=g}return c}function Hr(a,b,c){a.ih[a.ge[b]]=c}z.defineProperty(on,{layerSpacing:"layerSpacing"},function(){return this.pm},function(a){this.pm!==a&&(z.g(a,"number",on,"layerSpacing"),0<=a&&(this.pm=a,this.I()))});
z.defineProperty(on,{dK:"columnSpacing"},function(){return this.Td},function(a){this.Td!==a&&(z.g(a,"number",on,"columnSpacing"),0<a&&(this.Td=a,this.I()))});z.defineProperty(on,{direction:"direction"},function(){return this.fa},function(a){this.fa!==a&&(z.g(a,"number",on,"direction"),0===a||90===a||180===a||270===a?(this.fa=a,this.I()):z.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))});
z.defineProperty(on,{angle:"angle"},function(){return this.direction},function(a){this.direction=a});z.defineProperty(on,{lH:"cycleRemoveOption"},function(){return this.Sn},function(a){this.Sn!==a&&(z.Ba(a,on,on,"cycleRemoveOption"),a===zr||a===tr)&&(this.Sn=a,this.I())});z.defineProperty(on,{pI:"layeringOption"},function(){return this.xo},function(a){this.xo!==a&&(z.Ba(a,on,on,"layeringOption"),a===ur||a===Rr||a===Tr)&&(this.xo=a,this.I())});
z.defineProperty(on,{aI:"initializeOption"},function(){return this.no},function(a){this.no!==a&&(z.Ba(a,on,on,"initializeOption"),a===vr||a===Zr||a===Xr)&&(this.no=a,this.I())});z.defineProperty(on,{MK:"iterations"},function(){return this.nm},function(a){this.nm!==a&&(z.p(a,yr,"iterations"),0<=a&&(this.nm=a,this.I()))});z.defineProperty(on,{RG:"aggressiveOption"},function(){return this.Fn},function(a){this.Fn!==a&&(z.Ba(a,on,on,"aggressiveOption"),a===cs||a===wr||a===ds)&&(this.Fn=a,this.I())});
z.defineProperty(on,{hL:"packOption"},function(){return this.Si},function(a){this.Si!==a&&(z.g(a,"number",on,"packOption"),0<=a&&8>a&&(this.Si=a,this.I()))});z.defineProperty(on,{aq:"setsPortSpots"},function(){return this.$h},function(a){this.$h!==a&&(z.g(a,"boolean",on,"setsPortSpots"),this.$h=a,this.I())});z.defineProperty(on,{XE:"linkSpacing"},function(){return this.Br},function(a){this.Br!==a&&(z.g(a,"number",on,"linkSpacing"),0<=a&&(this.Br=a,this.I()))});z.w(on,{yI:"maxLayer"},function(){return this.yb});
z.w(on,{RK:"maxIndex"},function(){return this.Jv});z.w(on,{QK:"maxColumn"},function(){return this.Kb});z.w(on,{WK:"minIndexLayer"},function(){return this.Lr});z.w(on,{SK:"maxIndexLayer"},function(){return this.Rf});var tr;on.CycleDepthFirst=tr=z.s(on,"CycleDepthFirst",0);var zr;on.CycleGreedy=zr=z.s(on,"CycleGreedy",1);var ur;on.LayerOptimalLinkLength=ur=z.s(on,"LayerOptimalLinkLength",0);var Rr;on.LayerLongestPathSink=Rr=z.s(on,"LayerLongestPathSink",1);var Tr;
on.LayerLongestPathSource=Tr=z.s(on,"LayerLongestPathSource",2);var vr;on.InitDepthFirstOut=vr=z.s(on,"InitDepthFirstOut",0);var Zr;on.InitDepthFirstIn=Zr=z.s(on,"InitDepthFirstIn",1);var Xr;on.InitNaive=Xr=z.s(on,"InitNaive",2);var cs;on.AggressiveNone=cs=z.s(on,"AggressiveNone",0);var wr;on.AggressiveLess=wr=z.s(on,"AggressiveLess",1);var ds;on.AggressiveMore=ds=z.s(on,"AggressiveMore",2);on.PackNone=0;var es;on.PackExpand=es=1;var fs;on.PackStraighten=fs=2;var hs;on.PackMedian=hs=4;var xr;
on.PackAll=xr=7;function os(){this.index=this.ke=this.Qe=this.de=this.first=this.layer=0;this.link=null;this.qi=0}z.Yd(os,{layer:!0,first:!0,de:!0,Qe:!0,ke:!0,index:!0,link:!0,qi:!0});function yr(){wa.call(this)}z.Ra(yr,wa);z.ia("LayeredDigraphNetwork",yr);yr.prototype.createVertex=function(){return new rs};yr.prototype.createEdge=function(){return new ss};
function rs(){xa.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=null;this.valid=!1;this.finish=this.ip=NaN;this.Tm=0;this.xA=this.yA=null}z.Ra(rs,xa);z.ia("LayeredDigraphVertex",rs);function ss(){ya.call(this);this.forest=this.rev=this.valid=!1;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}z.Ra(ss,ya);z.ia("LayeredDigraphEdge",ss);
function Y(){0<arguments.length&&z.pd(Y);yg.call(this);this.Gd=new K(Object);this.ds=ts;this.Of=us;this.Zs=vs;this.Hv=ws;this.rB=null;this.Kh=!0;this.rd=xs;this.mg=(new Ea(10,10)).freeze();this.wa=new ys;this.ya=new ys;this.pz=[]}z.Ra(Y,yg);z.ia("TreeLayout",Y);Y.prototype.cloneProtected=function(a){yg.prototype.cloneProtected.call(this,a);a.ds=this.ds;a.Zs=this.Zs;a.Hv=this.Hv;a.Kh=this.Kh;a.rd=this.rd;a.mg.assign(this.mg);a.wa.copyInheritedPropertiesFrom(this.wa);a.ya.copyInheritedPropertiesFrom(this.ya)};
Y.prototype.createNetwork=function(){return new zs};Y.prototype.makeNetwork=function(a){function b(a){if(a instanceof E)return!a.Df&&"Comment"!==a.nc;if(a instanceof G){var b=a.Y;if(null===b||b.Df||"Comment"===b.nc)return!1;a=a.da;return null===a||a.Df||"Comment"===a.nc?!1:!0}return!1}var c=this.createNetwork();c.Sb=this;a instanceof B?(c.jk(a.Mg,!0,b),c.jk(a.links,!0,b)):a instanceof F?c.jk(a.Hc,!1,b):c.jk(a.i,!1,b);return c};
Y.prototype.doLayout=function(a){null===a&&z.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.Yf!==As&&(this.je=this.initialOrigin(this.je));var b=this.h;null===b&&a instanceof B&&(b=a);this.Of=this.path===ts&&null!==b?b.ce?us:Bs:this.path===ts?us:this.path;if(0<this.network.vertexes.count){this.network.Uw();for(a=this.network.vertexes.i;a.next();)b=a.value,b.initialized=!1,b.level=
0,b.parent=null,b.children=[];if(0<this.Gd.count){a=new K(ys);for(b=this.Gd.i;b.next();){var c=b.value;c instanceof E?(c=this.network.dn(c),null!==c&&a.add(c)):c instanceof ys&&a.add(c)}this.Gd=a}0===this.Gd.count&&this.findRoots();for(a=this.Gd.copy().i;a.next();)b=a.value,b.initialized||(b.initialized=!0,Cs(this,b));for(a=this.Gd.i;a.next();)b=a.value,b instanceof ys&&Ds(this,b);for(a=this.Gd.i;a.next();)b=a.value,b instanceof ys&&Es(this,b);for(a=this.Gd.i;a.next();)b=a.value,b instanceof ys&&
Fs(this,b);this.Dz();if(this.kA===Gs){c=[];for(a=this.network.vertexes.i;a.next();){var d=a.value,b=d.parent;null===b&&(b=d);var b=0===b.angle||180===b.angle,e=c[d.level];void 0===e&&(e=0);c[d.level]=Math.max(e,b?d.width:d.height)}for(d=0;d<c.length;d++)void 0===c[d]&&(c[d]=0);this.rB=c;for(a=this.network.vertexes.i;a.next();)d=a.value,b=d.parent,null===b&&(b=d),0===b.angle||180===b.angle?(180===b.angle&&(d.Dt+=c[d.level]-d.width),d.width=c[d.level]):(270===b.angle&&(d.Et+=c[d.level]-d.height),d.height=
c[d.level])}else if(this.kA===Hs)for(a=this.network.vertexes.i;a.next();){c=a.value;b=0===c.angle||180===c.angle;e=-1;for(d=0;d<c.children.length;d++)var g=c.children[d],e=Math.max(e,b?g.width:g.height);if(0<=e)for(d=0;d<c.children.length;d++)g=c.children[d],b?(180===c.angle&&(g.Dt+=e-g.width),g.width=e):(270===c.angle&&(g.Et+=e-g.height),g.height=e)}for(a=this.Gd.i;a.next();)b=a.value,b instanceof ys&&this.layoutTree(b);this.arrangeTrees();this.updateParts()}this.network=null;this.Gd=new K(Object);
this.Gf=!0};
Y.prototype.findRoots=function(){for(var a=this.network.vertexes.i;a.next();){var b=a.value;switch(this.Of){case us:0===b.tc.count&&this.Gd.add(b);break;case Bs:0===b.pc.count&&this.Gd.add(b);break;default:z.k("Unhandled path value "+this.Of.toString())}}if(0===this.Gd.count){for(var a=999999,b=null,c=this.network.vertexes.i;c.next();){var d=c.value;switch(this.Of){case us:d.tc.count<a&&(a=d.tc.count,b=d);break;case Bs:d.pc.count<a&&(a=d.pc.count,b=d);break;default:z.k("Unhandled path value "+this.Of.toString())}}null!==
b&&this.Gd.add(b)}};
function Cs(a,b){if(null!==b){u&&z.l(b,ys,Y,"walkTree:v");switch(a.Of){case us:if(0<b.pc.count){for(var c=new J(ys),d=b.qH;d.next();){var e=d.value;Is(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.jc())}break;case Bs:if(0<b.tc.count){c=new J(ys);for(d=b.nJ;d.next();)e=d.value,Is(a,b,e)&&c.add(e);0<c.count&&(b.children=c.jc())}break;default:z.k("Unhandled path value"+a.Of.toString())}c=b.children;d=c.length;for(e=0;e<d;e++){var g=c[e];g.initialized=!0;g.level=b.level+1;g.parent=b;a.Gd.remove(g)}for(e=0;e<
d;e++)g=c[e],Cs(a,g)}}function Is(a,b,c){u&&z.l(b,ys,Y,"walkOK:v");u&&z.l(c,ys,Y,"walkOK:c");if(c.initialized){var d;if(null===b)d=!1;else{u&&z.l(c,ys,Y,"isAncestor:a");u&&z.l(b,ys,Y,"isAncestor:b");for(d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}
Y.prototype.removeChild=function(a,b){if(null!==a&&null!==b){u&&z.l(a,ys,Y,"removeChild:p");u&&z.l(b,ys,Y,"removeChild:c");for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),g=0,e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.children=d}}};
function Ds(a,b){if(null!==b){u&&z.l(b,ys,Y,"initializeTree:v");a.initializeTreeVertexValues(b);b.alignment===Js&&a.sortTreeVertexChildren(b);for(var c=0,d=b.Vm,e=0,g=b.children,h=g.length,k=0;k<h;k++){var l=g[k];Ds(a,l);c+=l.descendantCount+1;d=Math.max(d,l.maxChildrenCount);e=Math.max(e,l.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function Ks(a,b){u&&z.l(b,ys,Y,"mom:v");switch(a.Zs){default:case vs:return null!==b.parent?b.parent:a.wa;case Ls:return null===b.parent?a.wa:null===b.parent.parent?a.ya:b.parent;case Ms:return null!==b.parent?null!==b.parent.parent?b.parent.parent:a.ya:a.wa;case Ns:var c=!0;if(0===b.Vm)c=!1;else for(var d=b.children,e=d.length,g=0;g<e;g++)if(0<d[g].Vm){c=!1;break}return c&&null!==b.parent?a.ya:null!==b.parent?b.parent:a.wa}}
Y.prototype.initializeTreeVertexValues=function(a){u&&z.l(a,ys,Y,"initializeTreeVertexValues:v");var b=Ks(this,a);a.copyInheritedPropertiesFrom(b);if(null!==a.parent&&a.parent.alignment===Js){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=!0};
function Es(a,b){if(null!==b){u&&z.l(b,ys,Y,"assignTree:v");a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)Es(a,c[e])}}Y.prototype.assignTreeVertexValues=function(){};function Fs(a,b){if(null!==b){u&&z.l(b,ys,Y,"sortTree:v");b.alignment!==Js&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)Fs(a,c[e])}}
Y.prototype.sortTreeVertexChildren=function(a){u&&z.l(a,ys,Y,"sortTreeVertexChildren:v");switch(a.sorting){case Os:break;case Ps:a.children.reverse();break;case Qs:a.children.sort(a.comparer);break;case Rs:a.children.sort(a.comparer);a.children.reverse();break;default:z.k("Unhandled sorting value "+a.sorting.toString())}};Y.prototype.Dz=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Y.prototype.addComments=function(a){u&&z.l(a,ys,Y,"addComments:v");var b=a.angle,c=a.parent,d=0,e=Ss,e=!1;null!==c&&(d=c.angle,e=c.alignment,e=Ts(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Vm,g=0,h=0,k=0,l=a.commentSpacing;if(null!==a.Pc)for(var m=a.Pc.qE();m.next();){var n=m.value;"Comment"===n.nc&&n.canLayout()&&(null===a.comments&&(a.comments=[]),a.comments.push(n),n.Bf(),n=n.Ia,b&&!c||!e&&!d&&c||e&&d&&c?(g=Math.max(g,n.width),h+=n.height+Math.abs(k)):(g+=n.width+Math.abs(k),h=Math.max(h,
n.height)),k=l)}null!==a.comments&&(b&&!c||!e&&!d&&c||e&&d&&c?(g+=Math.abs(a.commentMargin),h=Math.max(0,h-a.height)):(h+=Math.abs(a.commentMargin),g=Math.max(0,g-a.width)),e=z.zk(0,0,a.P.width+g,a.P.height+h),a.vb=e,z.dc(e))};function Ts(a){return a===Us||a===Js||a===Vs||a===Ws}function Xs(a){return a===Us||a===Js}
function Ys(a){u&&z.l(a,ys,Y,"isLeftSideBus:v");var b=a.parent;if(null!==b){var c=b.alignment;if(Ts(c)){if(Xs(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Vs)return!0}}return!1}
Y.prototype.layoutComments=function(a){u&&z.l(a,ys,Y,"layoutComments:v");if(null!==a.comments){var b=a.Pc.Ia,c=a.parent,d=a.angle,e=0,g=Ss,g=!1;null!==c&&(e=c.angle,g=c.alignment,g=Ts(g));for(var c=90===d||270===d,d=90===e||270===e,h=0===a.Vm,k=Ys(a),l=0,m=a.comments,n=m.length,p=z.O(),q=0;q<n;q++){var r=m[q],s=r.Ia;if(c&&!h||!g&&!d&&h||g&&d&&h){if(135<e&&!g||d&&k)if(0<=a.commentMargin)for(p.n(a.P.x-a.commentMargin-s.width,a.P.y+l),r.move(p),r=r.Ig();r.next();){var t=r.value;t.Db=$c;t.Eb=ad}else for(p.n(a.P.x+
2*a.S.x-a.commentMargin,a.P.y+l),r.move(p),r=r.Ig();r.next();)t=r.value,t.Db=ad,t.Eb=$c;else if(0<=a.commentMargin)for(p.n(a.P.x+2*a.S.x+a.commentMargin,a.P.y+l),r.move(p),r=r.Ig();r.next();)t=r.value,t.Db=ad,t.Eb=$c;else for(p.n(a.P.x+a.commentMargin-s.width,a.P.y+l),r.move(p),r=r.Ig();r.next();)t=r.value,t.Db=$c,t.Eb=ad;l=0<=a.commentSpacing?l+(s.height+a.commentSpacing):l+(a.commentSpacing-s.height)}else{if(135<e&&!g||!d&&k)if(0<=a.commentMargin)for(p.n(a.P.x+l,a.P.y-a.commentMargin-s.height),
r.move(p),r=r.Ig();r.next();)t=r.value,t.Db=Zc,t.Eb=bd;else for(p.n(a.P.x+l,a.P.y+2*a.S.y-a.commentMargin),r.move(p),r=r.Ig();r.next();)t=r.value,t.Db=bd,t.Eb=Zc;else if(0<=a.commentMargin)for(p.n(a.P.x+l,a.P.y+2*a.S.y+a.commentMargin),r.move(p),r=r.Ig();r.next();)t=r.value,t.Db=bd,t.Eb=Zc;else for(p.n(a.P.x+l,a.P.y+a.commentMargin-s.height),r.move(p),r=r.Ig();r.next();)t=r.value,t.Db=Zc,t.Eb=bd;l=0<=a.commentSpacing?l+(s.width+a.commentSpacing):l+(a.commentSpacing-s.width)}}z.A(p);b=l-a.commentSpacing-
(c?b.height:b.width);if(this.Of===us)for(e=a.pc;e.next();)a=e.value.link,null===a||a.kj||(a.Jl=0<b?b:NaN);else for(e=a.tc;e.next();)a=e.value.link,null===a||a.kj||(a.Yl=0<b?b:NaN)}};
Y.prototype.layoutTree=function(a){if(null!==a){u&&z.l(a,ys,Y,"layoutTree:v");for(var b=a.children,c=b.length,d=0;d<c;d++)this.layoutTree(b[d]);switch(a.compaction){case Zs:$s(this,a);break;case at:if(a.alignment===Js)$s(this,a);else if(u&&z.l(a,ys,Y,"layoutTreeBlock:v"),0===a.Vm){var d=a.parent,b=!1,c=0,e=Ss;null!==d&&(c=d.angle,e=d.alignment,b=Ts(e));d=Ys(a);a.qa.n(0,0);a.ob.n(a.width,a.height);null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.Ua.n(0,0):180===c&&!b||(90===c||270===
c)&&d?a.Ua.n(a.width-2*a.S.x,0):a.Ua.n(0,a.height-2*a.S.y);a.Vt=null;a.mu=null}else{for(var g=bt(a),b=90===g||270===g,h=0,k=a.children,l=k.length,m=0;m<l;m++)var n=k[m],h=Math.max(h,b?n.ob.width:n.ob.height);var p=a.alignment,d=p===ct,q=p===dt,r=Ts(p),s=Math.max(0,a.breadthLimit),c=et(a),t=a.nodeSpacing,v=ft(a),x=a.rowSpacing,y=0;if(d||q||a.Wp||a.Xp&&1===a.maxGenerationCount)y=Math.max(0,a.rowIndent);var d=a.width,e=a.height,A=0,C=0,L=0,H=null,U=null,ea=0,W=0,P=0,ba=0,Oa=0,sa=0,Na=0,ua=0,n=0;r&&!Xs(p)&&
135<g&&k.reverse();if(Xs(p))if(1<l)for(m=0;m<l;m++)0===m%2&&m!==l-1?ua=Math.max(ua,b?k[m].ob.width:k[m].ob.height):0!==m%2&&(n=Math.max(n,b?k[m].ob.width:k[m].ob.height));else 1===l&&(ua=b?k[0].ob.width:k[0].ob.height);if(r){switch(p){case Us:W=135>g?gt(a,k,ua,A,C):ht(a,k,ua,A,C);ua=W.x;A=W.width;C=W.height;break;case Vs:for(m=0;m<l;m++){var n=k[m],Ha=n.ob,H=0===sa?0:x;b?(n.qa.n(h-Ha.width,ba+H),A=Math.max(A,Ha.width),C=Math.max(C,ba+H+Ha.height),ba+=H+Ha.height):(n.qa.n(P+H,h-Ha.height),A=Math.max(A,
P+H+Ha.width),C=Math.max(C,Ha.height),P+=H+Ha.width);sa++}break;case Ws:for(m=0;m<l;m++)n=k[m],Ha=n.ob,H=0===sa?0:x,b?(n.qa.n(t/2+a.S.x,ba+H),A=Math.max(A,Ha.width),C=Math.max(C,ba+H+Ha.height),ba+=H+Ha.height):(n.qa.n(P+H,t/2+a.S.y),A=Math.max(A,P+H+Ha.width),C=Math.max(C,Ha.height),P+=H+Ha.width),sa++}H=it(this,2);U=it(this,2);b?(H[0].n(0,0),H[1].n(0,C),U[0].n(A,0)):(H[0].n(0,0),H[1].n(A,0),U[0].n(0,C));U[1].n(A,C)}else for(m=0;m<l;m++){n=k[m];Ha=n.ob;if(b){0<s&&0<sa&&P+t+Ha.width>s&&(P<h&&ot(a,
p,h-P,0,Na,m-1),Oa++,sa=0,Na=m,L=C,P=0,ba=135<g?-C-x:C+x);pt(this,n,0,ba);var Aa=0;if(0===sa){if(H=n.Vt,U=n.mu,ea=Ha.width,W=Ha.height,null===H||null===U||g!==bt(n))H=it(this,2),U=it(this,2),H[0].n(0,0),H[1].n(0,W),U[0].n(ea,0),U[1].n(ea,W)}else{var jc=z.rb(),W=qt(this,a,n,H,U,ea,W,jc),Aa=W.x,H=jc[0],U=jc[1],ea=W.width,W=W.height;z.xa(jc);P<Ha.width&&0>Aa&&(rt(a,-Aa,0,Na,m-1),st(H,-Aa,0),st(U,-Aa,0),Aa=0)}n.qa.n(Aa,ba);A=Math.max(A,ea);C=Math.max(C,L+(0===Oa?0:x)+Ha.height);P=ea}else{0<s&&0<sa&&ba+
t+Ha.height>s&&(ba<h&&ot(a,p,0,h-ba,Na,m-1),Oa++,sa=0,Na=m,L=A,ba=0,P=135<g?-A-x:A+x);pt(this,n,P,0);Aa=0;if(0===sa){if(H=n.Vt,U=n.mu,ea=Ha.width,W=Ha.height,null===H||null===U||g!==bt(n))H=it(this,2),U=it(this,2),H[0].n(0,0),H[1].n(ea,0),U[0].n(0,W),U[1].n(ea,W)}else jc=z.rb(),W=qt(this,a,n,H,U,ea,W,jc),Aa=W.x,H=jc[0],U=jc[1],ea=W.width,W=W.height,z.xa(jc),ba<Ha.height&&0>Aa&&(rt(a,0,-Aa,Na,m-1),st(H,0,-Aa),st(U,0,-Aa),Aa=0);n.qa.n(P,Aa);C=Math.max(C,W);A=Math.max(A,L+(0===Oa?0:x)+Ha.width);ba=W}sa++}0<
Oa&&(b?(C+=Math.max(0,c),P<A&&ot(a,p,A-P,0,Na,l-1),0<y&&(q||rt(a,y,0,0,l-1),A+=y)):(A+=Math.max(0,c),ba<C&&ot(a,p,0,C-ba,Na,l-1),0<y&&(q||rt(a,0,y,0,l-1),C+=y)));q=h=0;switch(p){case tt:b?h+=A/2-a.S.x-v/2:q+=C/2-a.S.y-v/2;break;case Ss:0<Oa?b?h+=A/2-a.S.x-v/2:q+=C/2-a.S.y-v/2:b?(m=k[0].qa.x+k[0].Ua.x,ua=k[l-1].qa.x+k[l-1].Ua.x+2*k[l-1].S.x,h+=m+(ua-m)/2-a.S.x-v/2):(m=k[0].qa.y+k[0].Ua.y,ua=k[l-1].qa.y+k[l-1].Ua.y+2*k[l-1].S.y,q+=m+(ua-m)/2-a.S.y-v/2);break;case ct:b?(h-=v,A+=v):(q-=v,C+=v);break;
case dt:b?(h+=A-a.width+v,A+=v):(q+=C-a.height+v,C+=v);break;case Us:b?h=1<l?h+(ua+t/2-a.S.x):h+(k[0].S.x-a.S.x+k[0].Ua.x):q=1<l?q+(ua+t/2-a.S.y):q+(k[0].S.y-a.S.y+k[0].Ua.y);break;case Vs:b?h+=A+t/2-a.S.x:q+=C+t/2-a.S.y;break;case Ws:break;default:z.k("Unhandled alignment value "+p.toString())}for(m=0;m<l;m++)n=k[m],b?n.qa.n(n.qa.x+n.Ua.x-h,n.qa.y+(135<g?(r?-C:-n.ob.height)+n.Ua.y-c:e+c+n.Ua.y)):n.qa.n(n.qa.x+(135<g?(r?-A:-n.ob.width)+n.Ua.x-c:d+c+n.Ua.x),n.qa.y+n.Ua.y-q);l=k=0;r?b?(A=ut(a,A,h),
0>h&&(h=0),135<g&&(q+=C+c),C+=e+c,p===Ws&&(k+=t/2+a.S.x),l+=e+c):(135<g&&(h+=A+c),A+=d+c,C=vt(a,C,q),0>q&&(q=0),p===Ws&&(l+=t/2+a.S.y),k+=d+c):b?(null===a.comments?d>A&&(p=wt(p,d-A,0),k=p.x,l=p.y,A=d,h=0):A=ut(a,A,h),0>h&&(k-=h,h=0),135<g&&(q+=C+c),C=Math.max(Math.max(C,e),C+e+c),l+=e+c):(135<g&&(h+=A+c),A=Math.max(Math.max(A,d),A+d+c),null===a.comments?e>C&&(p=wt(p,0,e-C),k=p.x,l=p.y,C=e,q=0):C=vt(a,C,q),0>q&&(l-=q,q=0),k+=d+c);if(0<Oa)g=it(this,4),p=it(this,4),b?(g[2].n(0,e+c),g[3].n(g[2].x,C),
p[2].n(A,g[2].y),p[3].n(p[2].x,g[3].y)):(g[2].n(d+c,0),g[3].n(A,g[2].y),p[2].n(g[2].x,C),p[3].n(g[3].x,p[2].y));else{g=it(this,H.length+2);p=it(this,U.length+2);for(m=0;m<H.length;m++)r=H[m],g[m+2].n(r.x+k,r.y+l);for(m=0;m<U.length;m++)r=U[m],p[m+2].n(r.x+k,r.y+l)}b?(g[0].n(h,0),g[1].n(g[0].x,e),g[2].y<g[1].y&&(g[2].x>g[0].x?g[2].assign(g[1]):g[1].assign(g[2])),g[3].y<g[2].y&&(g[3].x>g[0].x?g[3].assign(g[2]):g[2].assign(g[3])),p[0].n(h+d,0),p[1].n(p[0].x,e),p[2].y<p[1].y&&(p[2].x<p[0].x?p[2].assign(p[1]):
p[1].assign(p[2])),p[3].y<p[2].y&&(p[3].x<p[0].x?p[3].assign(p[2]):p[2].assign(p[3])),g[2].y-=c/2,p[2].y-=c/2):(g[0].n(0,q),g[1].n(d,g[0].y),g[2].x<g[1].x&&(g[2].y>g[0].y?g[2].assign(g[1]):g[1].assign(g[2])),g[3].x<g[2].x&&(g[3].y>g[0].y?g[3].assign(g[2]):g[2].assign(g[3])),p[0].n(0,q+e),p[1].n(d,p[0].y),p[2].x<p[1].x&&(p[2].y<p[0].y?p[2].assign(p[1]):p[1].assign(p[2])),p[3].x<p[2].x&&(p[3].y<p[0].y?p[3].assign(p[2]):p[2].assign(p[3])),g[2].x-=c/2,p[2].x-=c/2);xt(this,H);xt(this,U);a.Vt=g;a.mu=p;
a.Ua.n(h,q);a.ob.n(A,C)}break;default:z.k("Unhandled compaction value "+a.compaction.toString())}}};
function $s(a,b){u&&z.l(b,ys,Y,"layoutTreeNone:v");if(0===b.Vm){var c=!1,d=0,e=Ss;null!==b.parent&&(d=b.parent.angle,e=b.parent.alignment,c=Ts(e));e=Ys(b);b.qa.n(0,0);b.ob.n(b.width,b.height);null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!e?b.Ua.n(0,0):180===d&&!c||(90===d||270===d)&&e?b.Ua.n(b.width-2*b.S.x,0):b.Ua.n(0,b.height-2*b.S.y)}else{for(var c=bt(b),d=90===c||270===c,g=0,e=b.children,h=e.length,k=0;k<h;k++)var l=e[k],g=Math.max(g,d?l.ob.width:l.ob.height);var m=b.alignment,n=
m===ct,p=m===dt,q=Ts(m),r=Math.max(0,b.breadthLimit),s=et(b),t=b.nodeSpacing,v=ft(b),x=n||p?0:v/2,y=b.rowSpacing,A=0;if(n||p||b.Wp||b.Xp&&1===b.maxGenerationCount)A=Math.max(0,b.rowIndent);var n=b.width,C=b.height,L=0,H=0,U=0,ea=0,W=0,P=0,ba=0,Oa=0,sa=0,Na=0;q&&!Xs(m)&&135<c&&e.reverse();if(Xs(m))if(1<h)for(k=0;k<h;k++){var l=e[k],ua=l.ob;0===k%2&&k!==h-1?sa=Math.max(sa,(d?ua.width:ua.height)+yt(l)-t):0!==k%2&&(Na=Math.max(Na,(d?ua.width:ua.height)+yt(l)-t))}else 1===h&&(sa=d?e[0].ob.width:e[0].ob.height);
if(q)switch(m){case Us:case Js:H=135>c?gt(b,e,sa,L,H):ht(b,e,sa,L,H);sa=H.x;L=H.width;H=H.height;break;case Vs:for(k=0;k<h;k++)l=e[k],ua=l.ob,r=0===ba?0:y,d?(l.qa.n(g-ua.width,W+r),L=Math.max(L,ua.width),H=Math.max(H,W+r+ua.height),W+=r+ua.height):(l.qa.n(ea+r,g-ua.height),L=Math.max(L,ea+r+ua.width),H=Math.max(H,ua.height),ea+=r+ua.width),ba++;break;case Ws:for(g=0;g<h;g++)l=e[g],ua=l.ob,r=0===ba?0:y,d?(l.qa.n(t/2+b.S.x,W+r),L=Math.max(L,ua.width),H=Math.max(H,W+r+ua.height),W+=r+ua.height):(l.qa.n(ea+
r,t/2+b.S.y),L=Math.max(L,ea+r+ua.width),H=Math.max(H,ua.height),ea+=r+ua.width),ba++}else for(k=0;k<h;k++)l=e[k],ua=l.ob,d?(0<r&&0<ba&&ea+t+ua.width>r&&(ea<g&&ot(b,m,g-ea,0,Oa,k-1),P++,ba=0,Oa=k,U=H,ea=0,W=135<c?-H-y:H+y),Na=0===ba?x:t,pt(a,l,0,W),l.qa.n(ea+Na,W),L=Math.max(L,ea+Na+ua.width),H=Math.max(H,U+(0===P?0:y)+ua.height),ea+=Na+ua.width):(0<r&&0<ba&&W+t+ua.height>r&&(W<g&&ot(b,m,0,g-W,Oa,k-1),P++,ba=0,Oa=k,U=L,W=0,ea=135<c?-L-y:L+y),Na=0===ba?x:t,pt(a,l,ea,0),l.qa.n(ea,W+Na),H=Math.max(H,
W+Na+ua.height),L=Math.max(L,U+(0===P?0:y)+ua.width),W+=Na+ua.height),ba++;0<P&&(d?(H+=Math.max(0,s),ea<L&&ot(b,m,L-ea,0,Oa,h-1),0<A&&(p||rt(b,A,0,0,h-1),L+=A)):(L+=Math.max(0,s),W<H&&ot(b,m,0,H-W,Oa,h-1),0<A&&(p||rt(b,0,A,0,h-1),H+=A)));A=p=0;switch(m){case tt:d?p+=L/2-b.S.x-v/2:A+=H/2-b.S.y-v/2;break;case Ss:0<P?d?p+=L/2-b.S.x-v/2:A+=H/2-b.S.y-v/2:d?(m=e[0].qa.x+e[0].Ua.x,t=e[h-1].qa.x+e[h-1].Ua.x+2*e[h-1].S.x,p+=m+(t-m)/2-b.S.x-v/2):(m=e[0].qa.y+e[0].Ua.y,t=e[h-1].qa.y+e[h-1].Ua.y+2*e[h-1].S.y,
A+=m+(t-m)/2-b.S.y-v/2);break;case ct:d?(p-=v,L+=v):(A-=v,H+=v);break;case dt:d?(p+=L-b.width+v,L+=v):(A+=H-b.height+v,H+=v);break;case Us:case Js:d?p=1<h?p+(sa+t/2-b.S.x):p+(e[0].S.x-b.S.x+e[0].Ua.x):A=1<h?A+(sa+t/2-b.S.y):A+(e[0].S.y-b.S.y+e[0].Ua.y);break;case Vs:d?p+=L+t/2-b.S.x:A+=H+t/2-b.S.y;break;case Ws:break;default:z.k("Unhandled alignment value "+m.toString())}for(k=0;k<h;k++)l=e[k],d?l.qa.n(l.qa.x+l.Ua.x-p,l.qa.y+(135<c?(q?-H:-l.ob.height)+l.Ua.y-s:C+s+l.Ua.y)):l.qa.n(l.qa.x+(135<c?(q?
-L:-l.ob.width)+l.Ua.x-s:n+s+l.Ua.x),l.qa.y+l.Ua.y-A);d?(L=ut(b,L,p),0>p&&(p=0),135<c&&(A+=H+s),H+=C+s):(135<c&&(p+=L+s),L+=n+s,H=vt(b,H,A),0>A&&(A=0));b.Ua.n(p,A);b.ob.n(L,H)}}
function gt(a,b,c,d,e){u&&z.l(a,ys,Y,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return new w(c,0,d,e);if(1===g){var h=b[0];d=h.ob.width;e=h.ob.height;return new w(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=90===bt(a),n=0,p=0,q=0,r=0;r<g;r++)if(!(0!==r%2||1<g&&r===g-1)){var h=b[r],s=h.ob,t=0===n?0:l;if(m){var v=yt(h)-k;h.qa.n(c-(s.width+v),q+t);d=Math.max(d,s.width+v);e=Math.max(e,q+t+s.height);q+=t+s.height}else v=yt(h)-k,h.qa.n(p+t,c-(s.height+v)),e=Math.max(e,s.height+v),d=Math.max(d,
p+t+s.width),p+=t+s.width;n++}var n=0,x=p,y=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<g;r++)0!==r%2&&(h=b[r],s=h.ob,t=0===n?0:l,m?(v=yt(h)-k,h.qa.n(p+v,q+t),d=Math.max(d,p+s.width+v),e=Math.max(e,q+t+s.height),q+=t+s.height):(v=yt(h)-k,h.qa.n(p+t,q+v),d=Math.max(d,p+t+s.width),e=Math.max(e,q+s.height+v),p+=t+s.width),n++);1<g&&1===g%2&&(h=b[g-1],s=h.ob,b=zt(h,m?Math.max(Math.abs(y),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.qa.n(c+k/2-h.S.x-h.Ua.x,e+b),m=c+k/2-h.S.x-h.Ua.x,d=Math.max(d,m+s.width),
0>m&&(d-=m),e=Math.max(e,Math.max(y,q)+b+s.height),0>h.qa.x&&(c=At(a,h.qa.x,!1,c,k))):(h.qa.n(d+b,c+k/2-h.S.y-h.Ua.y),d=Math.max(d,Math.max(x,p)+b+s.width),m=c+k/2-h.S.y-h.Ua.y,e=Math.max(e,m+s.height),0>m&&(e-=m),0>h.qa.y&&(c=At(a,h.qa.y,!0,c,k))));return new w(c,0,d,e)}
function ht(a,b,c,d,e){u&&z.l(a,ys,Y,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return new w(c,0,d,e);if(1===g){var h=b[0];d=h.ob.width;e=h.ob.height;return new w(c,0,d,e)}for(var k=a.nodeSpacing,l=a.rowSpacing,m=270===bt(a),n=0,p=0,q=0,r=0;r<g;r++)if(!(0!==r%2||1<g&&r===g-1)){var h=b[r],s=h.ob,t=0===n?0:l;if(m){var v=yt(h)-k,q=q-(t+s.height);h.qa.n(c-(s.width+v),q);d=Math.max(d,s.width+v);e=Math.max(e,Math.abs(q))}else v=yt(h)-k,p-=t+s.width,h.qa.n(p,c-(s.height+v)),e=Math.max(e,s.height+
v),d=Math.max(d,Math.abs(p));n++}var n=0,x=p,y=q;m?(p=c+k,q=0):(p=0,q=c+k);for(r=0;r<g;r++)0!==r%2&&(h=b[r],s=h.ob,t=0===n?0:l,m?(v=yt(h)-k,q-=t+s.height,h.qa.n(p+v,q),d=Math.max(d,p+s.width+v),e=Math.max(e,Math.abs(q))):(v=yt(h)-k,p-=t+s.width,h.qa.n(p,q+v),e=Math.max(e,q+s.height+v),d=Math.max(d,Math.abs(p))),n++);1<g&&1===g%2&&(h=b[g-1],s=h.ob,l=zt(h,m?Math.max(Math.abs(y),Math.abs(q)):Math.max(Math.abs(x),Math.abs(p))),m?(h.qa.n(c+k/2-h.S.x-h.Ua.x,-e-s.height-l),p=c+k/2-h.S.x-h.Ua.x,d=Math.max(d,
p+s.width),0>p&&(d-=p),e=Math.max(e,Math.abs(Math.min(y,q))+l+s.height),0>h.qa.x&&(c=At(a,h.qa.x,!1,c,k))):(h.qa.n(-d-s.width-l,c+k/2-h.S.y-h.Ua.y),d=Math.max(d,Math.abs(Math.min(x,p))+l+s.width),p=c+k/2-h.S.y-h.Ua.y,e=Math.max(e,p+s.height),0>p&&(e-=p),0>h.qa.y&&(c=At(a,h.qa.y,!0,c,k))));for(r=0;r<g;r++)h=b[r],m?h.qa.n(h.qa.x,h.qa.y+e):h.qa.n(h.qa.x+d,h.qa.y);return new w(c,0,d,e)}function yt(a){u&&z.l(a,ys,Y,"fixRelativePostions:child");return null===a.parent?0:a.parent.nodeSpacing}
function zt(a){u&&z.l(a,ys,Y,"fixRelativePostions:lastchild");return null===a.parent?0:a.parent.rowSpacing}function At(a,b,c,d,e){u&&z.l(a,ys,Y,"fixRelativePostions:v");a=a.children;for(var g=a.length,h=0;h<g;h++)c?a[h].qa.n(a[h].qa.x,a[h].qa.y-b):a[h].qa.n(a[h].qa.x-b,a[h].qa.y);b=a[g-1];return Math.max(d,c?b.Ua.y+b.S.y-e/2:b.Ua.x+b.S.x-e/2)}
function ut(a,b,c){u&&z.l(a,ys,Y,"calculateSubwidth:v");switch(a.alignment){case Ss:case tt:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case ct:return a.width>b?a.width:b;case dt:return 2*a.S.x>b?a.width:b+a.width-2*a.S.x;case Us:case Js:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Vs:return a.width-a.S.x+a.nodeSpacing/2+b;case Ws:return Math.max(a.width,a.S.x+a.nodeSpacing/2+b);default:return b}}
function vt(a,b,c){u&&z.l(a,ys,Y,"calculateSubheight:v");switch(a.alignment){case Ss:case tt:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case ct:return a.height>b?a.height:b;case dt:return 2*a.S.y>b?a.height:b+a.height-2*a.S.y;case Us:case Js:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Vs:return a.height-a.S.y+a.nodeSpacing/2+b;case Ws:return Math.max(a.height,a.S.y+a.nodeSpacing/2+b);default:return b}}
function wt(a,b,c){u&&z.l(a,Ba,Y,"alignOffset:align");switch(a){case tt:b/=2;c/=2;break;case Ss:b/=2;c/=2;break;case ct:c=b=0;break;case dt:break;default:z.k("Unhandled alignment value "+a.toString())}return new N(b,c)}function ot(a,b,c,d,e,g){u&&z.l(a,ys,Y,"shiftRelPosAlign:v");u&&z.l(b,Ba,Y,"shiftRelPosAlign:align");b=wt(b,c,d);rt(a,b.x,b.y,e,g)}function rt(a,b,c,d,e){u&&z.l(a,ys,Y,"shiftRelPos:v");if(0!==b||0!==c)for(a=a.children;d<=e;d++){var g=a[d].qa;g.x+=b;g.y+=c}}
function pt(a,b,c,d){u&&(z.l(b,ys,Y,"recordMidPoints:v"),z.g(c,"number",Y,"recordMidPoints:x"),z.g(d,"number",Y,"recordMidPoints:y"));var e=b.parent;switch(a.Of){case us:for(a=b.tc;a.next();)b=a.value,b.fromVertex===e&&b.ls.n(c,d);break;case Bs:for(a=b.pc;a.next();)b=a.value,b.toVertex===e&&b.ls.n(c,d);break;default:z.k("Unhandled path value "+a.Of.toString())}}function st(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function qt(a,b,c,d,e,g,h,k){u&&z.l(b,ys,Y,"mergeFringes:parent");u&&z.l(c,ys,Y,"mergeFringes:child");var l=bt(b),m=90===l||270===l,n=b.nodeSpacing;b=d;var p=e;d=g;e=h;var q=c.Vt,r=c.mu;h=c.ob;var s=m?Math.max(e,h.height):Math.max(d,h.width);if(null===q||l!==bt(c))q=it(a,2),r=it(a,2),m?(q[0].n(0,0),q[1].n(0,h.height),r[0].n(h.width,0),r[1].n(r[0].x,q[1].y)):(q[0].n(0,0),q[1].n(h.width,0),r[0].n(0,h.height),r[1].n(q[1].x,r[0].y));if(m){c=d;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=
l=0;l<p.length&&m<q.length;){e=p[l];var t=q[m];g=t.x;var v=t.y;g+=c;var x=e;l+1<p.length&&(x=p[l+1]);var y=t,t=y.x,y=y.y;m+1<q.length&&(y=q[m+1],t=y.x,y=y.y,t+=c);var A=d;e.y===v?A=g-e.x:e.y>v&&e.y<y?A=g+(e.y-v)/(y-v)*(t-g)-e.x:v>e.y&&v<x.y&&(A=g-(e.x+(v-e.y)/(x.y-e.y)*(x.x-e.x)));A<d&&(d=A);x.y<=e.y?l++:y<=v?m++:(x.y<=y&&l++,y<=x.y&&m++)}c-=d;c+=n;l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=it(a,b.length+l.length);for(d=g=e=0;g<l.length&&l[g].y<b[0].y;)v=l[g++],n[d++].n(v.x+
m,v.y);for(;e<b.length;)v=b[e++],n[d++].n(v.x,v.y);for(e=b[b.length-1].y;g<l.length&&l[g].y<=e;)g++;for(;g<l.length&&l[g].y>e;)v=l[g++],n[d++].n(v.x+m,v.y);l=it(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);xt(a,n);d=l}g=r;v=c;if(null===p||2>p.length||null===g||2>g.length)e=null;else{n=it(a,p.length+g.length);for(m=x=l=0;l<p.length&&p[l].y<g[0].y;)e=p[l++],n[m++].n(e.x,e.y);for(;x<g.length;)e=g[x++],n[m++].n(e.x+v,e.y);for(g=g[g.length-1].y;l<p.length&&p[l].y<=g;)l++;for(;l<p.length&&p[l].y>g;)e=p[l++],
n[m++].n(e.x,e.y);e=it(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);xt(a,n)}g=Math.max(0,c)+h.width;h=s}else{c=e;d=9999999;if(!(null===p||2>p.length||null===q||2>q.length))for(m=l=0;l<p.length&&m<q.length;)e=p[l],t=q[m],g=t.x,v=t.y,v+=c,x=e,l+1<p.length&&(x=p[l+1]),y=t,t=y.x,y=y.y,m+1<q.length&&(y=q[m+1],t=y.x,y=y.y,y+=c),A=d,e.x===g?A=v-e.y:e.x>g&&e.x<t?A=v+(e.x-g)/(t-g)*(y-v)-e.y:g>e.x&&g<x.x&&(A=v-(e.y+(g-e.x)/(x.x-e.x)*(x.y-e.y))),A<d&&(d=A),x.x<=e.x?l++:t<=g?m++:(x.x<=t&&l++,t<=x.x&&m++);c-=d;c+=n;
l=q;m=c;if(null===b||2>b.length||null===l||2>l.length)d=null;else{n=it(a,b.length+l.length);for(d=g=e=0;g<l.length&&l[g].x<b[0].x;)v=l[g++],n[d++].n(v.x,v.y+m);for(;e<b.length;)v=b[e++],n[d++].n(v.x,v.y);for(e=b[b.length-1].x;g<l.length&&l[g].x<=e;)g++;for(;g<l.length&&l[g].x>e;)v=l[g++],n[d++].n(v.x,v.y+m);l=it(a,d);for(e=0;e<d;e++)l[e].assign(n[e]);xt(a,n);d=l}g=r;v=c;if(null===p||2>p.length||null===g||2>g.length)e=null;else{n=it(a,p.length+g.length);for(m=x=l=0;l<p.length&&p[l].x<g[0].x;)e=p[l++],
n[m++].n(e.x,e.y);for(;x<g.length;)e=g[x++],n[m++].n(e.x,e.y+v);for(g=g[g.length-1].x;l<p.length&&p[l].x<=g;)l++;for(;l<p.length&&p[l].x>g;)e=p[l++],n[m++].n(e.x,e.y);e=it(a,m);for(l=0;l<m;l++)e[l].assign(n[l]);xt(a,n)}g=s;h=Math.max(0,c)+h.height}xt(a,b);xt(a,q);xt(a,p);xt(a,r);k[0]=d;k[1]=e;return new w(c,0,g,h)}function it(a,b){var c=a.pz[b];if(void 0!==c&&(c=c.pop(),void 0!==c))return c;for(var c=[],d=0;d<b;d++)c[d]=new N;return c}
function xt(a,b){var c=b.length,d=a.pz[c];void 0===d&&(d=[],a.pz[c]=d);d.push(b)}
Y.prototype.arrangeTrees=function(){if(this.rd===As)for(var a=this.Gd.i;a.next();){var b=a.value;if(b instanceof ys){var c=b.Pc;if(null!==c){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);Bt(this,b,c,d)}}}else{c=[];for(a=this.Gd.i;a.next();)b=a.value,b instanceof ys&&c.push(b);switch(this.sorting){case Os:break;case Ps:c.reverse();break;case Qs:c.sort(this.comparer);break;case Rs:c.sort(this.comparer);c.reverse();break;default:z.k("Unhandled sorting value "+this.sorting.toString())}b=
this.je;a=b.x;b=b.y;for(d=0;d<c.length;d++){var e=c[d];Bt(this,e,a+e.Ua.x,b+e.Ua.y);switch(this.rd){case xs:b+=e.ob.height+this.mg.height;break;case Ct:a+=e.ob.width+this.mg.width;break;default:z.k("Unhandled arrangement value "+this.rd.toString())}}}};function Bt(a,b,c,d){if(null!==b){u&&z.l(b,ys,Y,"assignAbsolutePositions:v");b.x=c;b.y=d;b=b.children;for(var e=b.length,g=0;g<e;g++){var h=b[g];Bt(a,h,c+h.qa.x,d+h.qa.y)}}}
Y.prototype.commitLayout=function(){this.QA();this.commitNodes();this.Hz();this.Rt&&this.commitLinks()};Y.prototype.commitNodes=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();for(a.reset();a.next();)this.layoutComments(a.value)};
Y.prototype.Hz=function(){if(this.kA===Gs){for(var a=this.rB,b=[],c=null,d=this.network.vertexes.i;d.next();){var e=d.value;null===c?c=e.vb.copy():c.ri(e.vb);var g=b[e.level],g=void 0===g?et(e):Math.max(g,et(e));b[e.level]=g}for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);90===this.angle||270===this.angle?(c.bg(this.nodeSpacing/2,this.layerSpacing),e=new N(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.bg(this.layerSpacing,this.nodeSpacing/2),e=new N(-this.layerSpacing/2,-this.nodeSpacing/2));var g=
[],c=90===this.angle||270===this.angle?c.width:c.height,h=0;if(180===this.angle||270===this.angle)for(d=0;d<a.length;d++)h+=a[d]+b[d];for(d=0;d<a.length;d++){var k=a[d]+b[d];270===this.angle?(h-=k,g.push(new w(0,h,c,k))):90===this.angle?(g.push(new w(0,h,c,k)),h+=k):180===this.angle?(h-=k,g.push(new w(h,0,k,c))):(g.push(new w(h,0,k,c)),h+=k)}this.commitLayers(g,e)}};Y.prototype.commitLayers=function(){};Y.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
Y.prototype.QA=function(){for(var a=this.Gd.i;a.next();){var b=a.value;b instanceof ys&&Dt(this,b)}};function Dt(a,b){if(null!==b){u&&z.l(b,ys,Y,"setPortSpotsTree:v");a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)Dt(a,c[e])}}
Y.prototype.setPortSpots=function(a){u&&z.l(a,ys,Y,"setPortSpots:v");var b=a.alignment;if(Ts(b)){u&&z.l(a,ys,Y,"setPortSpotsBus:v");u&&z.l(b,Ba,Y,"setPortSpots:align");var c=this.Of===us,d=bt(a),e;switch(d){case 0:e=ad;break;case 90:e=bd;break;case 180:e=$c;break;default:e=Zc}var g=a.children,h=g.length;switch(b){case Us:case Js:for(b=0;b<h;b++){var k=g[b],k=(c?k.tc:k.pc).first();if(null!==k&&(k=k.link,null!==k)){var l=90===d||270===d?$c:Zc;if(1===h||b===h-1&&1===h%2)switch(d){case 0:l=$c;break;case 90:l=
Zc;break;case 180:l=ad;break;default:l=bd}else 0===b%2&&(l=90===d||270===d?ad:bd);c?(a.setsPortSpot&&(k.Db=e),a.setsChildPortSpot&&(k.Eb=l)):(a.setsPortSpot&&(k.Db=l),a.setsChildPortSpot&&(k.Eb=e))}}break;case Vs:l=90===d||270===d?ad:bd;for(d=c?a.pc:a.tc;d.next();)k=d.value.link,null!==k&&(c?(a.setsPortSpot&&(k.Db=e),a.setsChildPortSpot&&(k.Eb=l)):(a.setsPortSpot&&(k.Db=l),a.setsChildPortSpot&&(k.Eb=e)));break;case Ws:for(l=90===d||270===d?$c:Zc,d=c?a.pc:a.tc;d.next();)k=d.value.link,null!==k&&(c?
(a.setsPortSpot&&(k.Db=e),a.setsChildPortSpot&&(k.Eb=l)):(a.setsPortSpot&&(k.Db=l),a.setsChildPortSpot&&(k.Eb=e)))}}else if(c=bt(a),this.Of===us)for(e=a.pc;e.next();){if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.bd())switch(c){case 0:d.Db=ad;break;case 90:d.Db=bd;break;case 180:d.Db=$c;break;default:d.Db=Zc}else d.Db=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.bd())switch(c){case 0:d.Eb=$c;break;case 90:d.Eb=Zc;break;case 180:d.Eb=ad;break;default:d.Eb=bd}else d.Eb=a.childPortSpot}}else for(e=
a.tc;e.next();)if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.bd())switch(c){case 0:d.Eb=ad;break;case 90:d.Eb=bd;break;case 180:d.Eb=$c;break;default:d.Eb=Zc}else d.Eb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.bd())switch(c){case 0:d.Db=$c;break;case 90:d.Db=Zc;break;case 180:d.Db=ad;break;default:d.Db=bd}else d.Db=a.childPortSpot}};function bt(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function et(a){u&&z.l(a,ys,Y,"computeLayerSpacing:v");var b=bt(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width);return c}function ft(a){u&&z.l(a,ys,Y,"computeNodeIndent:v");var b=bt(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
z.defineProperty(Y,{rL:"roots"},function(){return this.Gd},function(a){this.Gd!==a&&(z.l(a,K,Y,"roots"),this.Gd=a,this.I())});z.defineProperty(Y,{path:"path"},function(){return this.ds},function(a){this.ds!==a&&(z.Ba(a,Y,Y,"path"),this.ds=a,this.I())});z.defineProperty(Y,{yJ:"treeStyle"},function(){return this.Zs},function(a){this.rd!==a&&(z.Ba(a,Y,Y,"treeStyle"),a===vs||a===Ms||a===Ns||a===Ls)&&(this.Zs=a,this.I())});
z.defineProperty(Y,{kA:"layerStyle"},function(){return this.Hv},function(a){this.rd!==a&&(z.Ba(a,Y,Y,"layerStyle"),a===ws||a===Hs||a===Gs)&&(this.Hv=a,this.I())});z.defineProperty(Y,{comments:"comments"},function(){return this.Kh},function(a){this.Kh!==a&&(z.g(a,"boolean",Y,"comments"),this.Kh=a,this.I())});z.defineProperty(Y,{Yf:"arrangement"},function(){return this.rd},function(a){this.rd!==a&&(z.Ba(a,Y,Y,"arrangement"),a===xs||a===Ct||a===As)&&(this.rd=a,this.I())});
z.defineProperty(Y,{KD:"arrangementSpacing"},function(){return this.mg},function(a){z.l(a,Ea,Y,"arrangementSpacing");this.mg.N(a)||(this.mg.assign(a),this.I())});z.defineProperty(Y,{qL:"rootDefaults"},function(){return this.wa},function(a){this.wa!==a&&(z.l(a,ys,Y,"rootDefaults"),this.wa=a,this.I())});z.defineProperty(Y,{PJ:"alternateDefaults"},function(){return this.ya},function(a){this.ya!==a&&(z.l(a,ys,Y,"alternateDefaults"),this.ya=a,this.I())});
z.defineProperty(Y,{sorting:"sorting"},function(){return this.wa.sorting},function(a){this.wa.sorting!==a&&(z.Ba(a,Y,Y,"sorting"),a===Os||a===Ps||a===Qs||Rs)&&(this.wa.sorting=a,this.I())});z.defineProperty(Y,{comparer:"comparer"},function(){return this.wa.comparer},function(a){this.wa.comparer!==a&&(z.g(a,"function",Y,"comparer"),this.wa.comparer=a,this.I())});
z.defineProperty(Y,{angle:"angle"},function(){return this.wa.angle},function(a){this.wa.angle!==a&&(z.g(a,"number",Y,"angle"),0===a||90===a||180===a||270===a?(this.wa.angle=a,this.I()):z.k("TreeLayout.angle must be 0, 90, 180, or 270"))});z.defineProperty(Y,{alignment:"alignment"},function(){return this.wa.alignment},function(a){this.wa.alignment!==a&&(z.Ba(a,Y,Y,"alignment"),this.wa.alignment=a,this.I())});
z.defineProperty(Y,{nodeIndent:"nodeIndent"},function(){return this.wa.nodeIndent},function(a){this.wa.nodeIndent!==a&&(z.g(a,"number",Y,"nodeIndent"),0<=a&&(this.wa.nodeIndent=a,this.I()))});z.defineProperty(Y,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.wa.nodeIndentPastParent},function(a){this.wa.nodeIndentPastParent!==a&&(z.g(a,"number",Y,"nodeIndentPastParent"),0<=a&&1>=a&&(this.wa.nodeIndentPastParent=a,this.I()))});
z.defineProperty(Y,{nodeSpacing:"nodeSpacing"},function(){return this.wa.nodeSpacing},function(a){this.wa.nodeSpacing!==a&&(z.g(a,"number",Y,"nodeSpacing"),this.wa.nodeSpacing=a,this.I())});z.defineProperty(Y,{layerSpacing:"layerSpacing"},function(){return this.wa.layerSpacing},function(a){this.wa.layerSpacing!==a&&(z.g(a,"number",Y,"layerSpacing"),this.wa.layerSpacing=a,this.I())});
z.defineProperty(Y,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.wa.layerSpacingParentOverlap},function(a){this.wa.layerSpacingParentOverlap!==a&&(z.g(a,"number",Y,"layerSpacingParentOverlap"),0<=a&&1>=a&&(this.wa.layerSpacingParentOverlap=a,this.I()))});z.defineProperty(Y,{compaction:"compaction"},function(){return this.wa.compaction},function(a){this.wa.compaction!==a&&(z.Ba(a,Y,Y,"compaction"),a===Zs||a===at)&&(this.wa.compaction=a,this.I())});
z.defineProperty(Y,{breadthLimit:"breadthLimit"},function(){return this.wa.breadthLimit},function(a){this.wa.breadthLimit!==a&&(z.g(a,"number",Y,"breadthLimit"),0<=a&&(this.wa.breadthLimit=a,this.I()))});z.defineProperty(Y,{rowSpacing:"rowSpacing"},function(){return this.wa.rowSpacing},function(a){this.wa.rowSpacing!==a&&(z.g(a,"number",Y,"rowSpacing"),this.wa.rowSpacing=a,this.I())});
z.defineProperty(Y,{rowIndent:"rowIndent"},function(){return this.wa.rowIndent},function(a){this.wa.rowIndent!==a&&(z.g(a,"number",Y,"rowIndent"),0<=a&&(this.wa.rowIndent=a,this.I()))});z.defineProperty(Y,{commentSpacing:"commentSpacing"},function(){return this.wa.commentSpacing},function(a){this.wa.commentSpacing!==a&&(z.g(a,"number",Y,"commentSpacing"),this.wa.commentSpacing=a,this.I())});
z.defineProperty(Y,{commentMargin:"commentMargin"},function(){return this.wa.commentMargin},function(a){this.wa.commentMargin!==a&&(z.g(a,"number",Y,"commentMargin"),this.wa.commentMargin=a,this.I())});z.defineProperty(Y,{setsPortSpot:"setsPortSpot"},function(){return this.wa.setsPortSpot},function(a){this.wa.setsPortSpot!==a&&(z.g(a,"boolean",Y,"setsPortSpot"),this.wa.setsPortSpot=a,this.I())});
z.defineProperty(Y,{portSpot:"portSpot"},function(){return this.wa.portSpot},function(a){z.l(a,Q,Y,"portSpot");this.wa.portSpot.N(a)||(this.wa.portSpot=a,this.I())});z.defineProperty(Y,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.wa.setsChildPortSpot},function(a){this.wa.setsChildPortSpot!==a&&(z.g(a,"boolean",Y,"setsChildPortSpot"),this.wa.setsChildPortSpot=a,this.I())});
z.defineProperty(Y,{childPortSpot:"childPortSpot"},function(){return this.wa.childPortSpot},function(a){z.l(a,Q,Y,"childPortSpot");this.wa.childPortSpot.N(a)||(this.wa.childPortSpot=a,this.I())});z.defineProperty(Y,{$J:"alternateSorting"},function(){return this.ya.sorting},function(a){this.ya.sorting!==a&&(z.Ba(a,Y,Y,"alternateSorting"),a===Os||a===Ps||a===Qs||Rs)&&(this.ya.sorting=a,this.I())});
z.defineProperty(Y,{OJ:"alternateComparer"},function(){return this.ya.comparer},function(a){this.ya.comparer!==a&&(z.g(a,"function",Y,"alternateComparer"),this.ya.comparer=a,this.I())});z.defineProperty(Y,{IJ:"alternateAngle"},function(){return this.ya.angle},function(a){this.ya.angle!==a&&(z.g(a,"number",Y,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.ya.angle=a,this.I())});
z.defineProperty(Y,{HJ:"alternateAlignment"},function(){return this.ya.alignment},function(a){this.ya.alignment!==a&&(z.Ba(a,Y,Y,"alternateAlignment"),this.ya.alignment=a,this.I())});z.defineProperty(Y,{SJ:"alternateNodeIndent"},function(){return this.ya.nodeIndent},function(a){this.ya.nodeIndent!==a&&(z.g(a,"number",Y,"alternateNodeIndent"),0<=a&&(this.ya.nodeIndent=a,this.I()))});
z.defineProperty(Y,{TJ:"alternateNodeIndentPastParent"},function(){return this.ya.nodeIndentPastParent},function(a){this.ya.nodeIndentPastParent!==a&&(z.g(a,"number",Y,"alternateNodeIndentPastParent"),0<=a&&1>=a&&(this.ya.nodeIndentPastParent=a,this.I()))});z.defineProperty(Y,{UJ:"alternateNodeSpacing"},function(){return this.ya.nodeSpacing},function(a){this.ya.nodeSpacing!==a&&(z.g(a,"number",Y,"alternateNodeSpacing"),this.ya.nodeSpacing=a,this.I())});
z.defineProperty(Y,{QJ:"alternateLayerSpacing"},function(){return this.ya.layerSpacing},function(a){this.ya.layerSpacing!==a&&(z.g(a,"number",Y,"alternateLayerSpacing"),this.ya.layerSpacing=a,this.I())});z.defineProperty(Y,{RJ:"alternateLayerSpacingParentOverlap"},function(){return this.ya.layerSpacingParentOverlap},function(a){this.ya.layerSpacingParentOverlap!==a&&(z.g(a,"number",Y,"alternateLayerSpacingParentOverlap"),0<=a&&1>=a&&(this.ya.layerSpacingParentOverlap=a,this.I()))});
z.defineProperty(Y,{NJ:"alternateCompaction"},function(){return this.ya.compaction},function(a){this.ya.compaction!==a&&(z.Ba(a,Y,Y,"alternateCompaction"),a===Zs||a===at)&&(this.ya.compaction=a,this.I())});z.defineProperty(Y,{JJ:"alternateBreadthLimit"},function(){return this.ya.breadthLimit},function(a){this.ya.breadthLimit!==a&&(z.g(a,"number",Y,"alternateBreadthLimit"),0<=a&&(this.ya.breadthLimit=a,this.I()))});
z.defineProperty(Y,{XJ:"alternateRowSpacing"},function(){return this.ya.rowSpacing},function(a){this.ya.rowSpacing!==a&&(z.g(a,"number",Y,"alternateRowSpacing"),this.ya.rowSpacing=a,this.I())});z.defineProperty(Y,{WJ:"alternateRowIndent"},function(){return this.ya.rowIndent},function(a){this.ya.rowIndent!==a&&(z.g(a,"number",Y,"alternateRowIndent"),0<=a&&(this.ya.rowIndent=a,this.I()))});
z.defineProperty(Y,{MJ:"alternateCommentSpacing"},function(){return this.ya.commentSpacing},function(a){this.ya.commentSpacing!==a&&(z.g(a,"number",Y,"alternateCommentSpacing"),this.ya.commentSpacing=a,this.I())});z.defineProperty(Y,{LJ:"alternateCommentMargin"},function(){return this.ya.commentMargin},function(a){this.ya.commentMargin!==a&&(z.g(a,"number",Y,"alternateCommentMargin"),this.ya.commentMargin=a,this.I())});
z.defineProperty(Y,{ZJ:"alternateSetsPortSpot"},function(){return this.ya.setsPortSpot},function(a){this.ya.setsPortSpot!==a&&(z.g(a,"boolean",Y,"alternateSetsPortSpot"),this.ya.setsPortSpot=a,this.I())});z.defineProperty(Y,{VJ:"alternatePortSpot"},function(){return this.ya.portSpot},function(a){z.l(a,Q,Y,"alternatePortSpot");this.ya.portSpot.N(a)||(this.ya.portSpot=a,this.I())});
z.defineProperty(Y,{YJ:"alternateSetsChildPortSpot"},function(){return this.ya.setsChildPortSpot},function(a){this.ya.setsChildPortSpot!==a&&(z.g(a,"boolean",Y,"alternateSetsChildPortSpot"),this.ya.setsChildPortSpot=a,this.I())});z.defineProperty(Y,{KJ:"alternateChildPortSpot"},function(){return this.ya.childPortSpot},function(a){z.l(a,Q,Y,"alternateChildPortSpot");this.ya.childPortSpot.N(a)||(this.ya.childPortSpot=a,this.I())});var ts;Y.PathDefault=ts=z.s(Y,"PathDefault",-1);var us;
Y.PathDestination=us=z.s(Y,"PathDestination",0);var Bs;Y.PathSource=Bs=z.s(Y,"PathSource",1);var Os;Y.SortingForwards=Os=z.s(Y,"SortingForwards",10);var Ps;Y.SortingReverse=Ps=z.s(Y,"SortingReverse",11);var Qs;Y.SortingAscending=Qs=z.s(Y,"SortingAscending",12);var Rs;Y.SortingDescending=Rs=z.s(Y,"SortingDescending",13);var tt;Y.AlignmentCenterSubtrees=tt=z.s(Y,"AlignmentCenterSubtrees",20);var Ss;Y.AlignmentCenterChildren=Ss=z.s(Y,"AlignmentCenterChildren",21);var ct;
Y.AlignmentStart=ct=z.s(Y,"AlignmentStart",22);var dt;Y.AlignmentEnd=dt=z.s(Y,"AlignmentEnd",23);var Us;Y.AlignmentBus=Us=z.s(Y,"AlignmentBus",24);var Js;Y.AlignmentBusBranching=Js=z.s(Y,"AlignmentBusBranching",25);var Vs;Y.AlignmentTopLeftBus=Vs=z.s(Y,"AlignmentTopLeftBus",26);var Ws;Y.AlignmentBottomRightBus=Ws=z.s(Y,"AlignmentBottomRightBus",27);var Zs;Y.CompactionNone=Zs=z.s(Y,"CompactionNone",30);var at;Y.CompactionBlock=at=z.s(Y,"CompactionBlock",31);var vs;
Y.StyleLayered=vs=z.s(Y,"StyleLayered",40);var Ns;Y.StyleLastParents=Ns=z.s(Y,"StyleLastParents",41);var Ms;Y.StyleAlternating=Ms=z.s(Y,"StyleAlternating",42);var Ls;Y.StyleRootOnly=Ls=z.s(Y,"StyleRootOnly",43);var xs;Y.ArrangementVertical=xs=z.s(Y,"ArrangementVertical",50);var Ct;Y.ArrangementHorizontal=Ct=z.s(Y,"ArrangementHorizontal",51);var As;Y.ArrangementFixedRoots=As=z.s(Y,"ArrangementFixedRoots",52);var ws;Y.LayerIndividual=ws=z.s(Y,"LayerIndividual",60);var Hs;
Y.LayerSiblings=Hs=z.s(Y,"LayerSiblings",61);var Gs;Y.LayerUniform=Gs=z.s(Y,"LayerUniform",62);function zs(){wa.call(this)}z.Ra(zs,wa);z.ia("TreeNetwork",zs);zs.prototype.createVertex=function(){return new ys};zs.prototype.createEdge=function(){return new Et};
function ys(){xa.call(this);this.initialized=!1;this.parent=null;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=null;this.qa=new N(0,0);this.ob=new Ea(0,0);this.Ua=new N(0,0);this.Xp=this.Wp=this.cJ=!1;this.mu=this.Vt=null;this.sorting=Os;this.comparer=zq;this.angle=0;this.alignment=Ss;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=at;this.breadthLimit=
0;this.rowSpacing=25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=!0;this.portSpot=Pc;this.setsChildPortSpot=!0;this.childPortSpot=Pc}z.Ra(ys,xa);z.ia("TreeVertex",ys);
ys.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};z.w(ys,{Vm:"childrenCount"},function(){return this.children.length});z.defineProperty(ys,{pL:"relativePosition"},function(){return this.qa},function(a){this.qa.set(a)});z.defineProperty(ys,{BL:"subtreeSize"},function(){return this.ob},function(a){this.ob.set(a)});
z.defineProperty(ys,{AL:"subtreeOffset"},function(){return this.Ua},function(a){this.Ua.set(a)});function Et(){ya.call(this);this.ls=new N(0,0)}z.Ra(Et,ya);z.ia("TreeEdge",Et);
Et.prototype.commit=function(){var a=this.link;if(null!==a&&!a.kj){var b=this.network.Sb,c=null,d=null;switch(b.Of){case us:c=this.fromVertex;d=this.toVertex;break;case Bs:c=this.toVertex;d=this.fromVertex;break;default:z.k("Unhandled path value "+b.Of.toString())}if(null!==c&&null!==d)if(b=this.ls,0!==b.x||0!==b.y||c.cJ){var d=c.vb,e=bt(c),g=et(c),h=c.rowSpacing;a.An();var k=a.Se===Xi,l=a.rc,m=0,n,p;a.Ul();if(l||k){for(m=2;4<a.sa;)a.nF(2);n=a.m(1);p=a.m(2)}else{for(m=1;3<a.sa;)a.nF(1);n=a.m(0);p=
a.m(a.sa-1)}var q=a.m(a.sa-1),r=0;0===e?(c.alignment===dt?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-ft(c))))):c.alignment===ct?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+ft(c))))):r=c.Wp||c.Xp&&1===c.maxGenerationCount?d.top-c.Ua.y+b.y:d.y+d.height/2+b.y,k?(a.B(m,n.x,r),m++,a.B(m,d.right+g,r),m++,a.B(m,d.right+g+(b.x-h)/3,r),m++,a.B(m,d.right+g+2*(b.x-h)/3,r),m++,a.B(m,d.right+g+(b.x-h),r),m++,a.B(m,p.x,r)):(l&&(a.B(m,d.right+g/2,n.y),
m++),a.B(m,d.right+g/2,r),m++,a.B(m,d.right+g+b.x-(l?h/2:h),r),m++,l&&a.B(m,a.m(m-1).x,p.y))):90===e?(c.alignment===dt?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-ft(c))))):c.alignment===ct?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+ft(c))))):r=c.Wp||c.Xp&&1===c.maxGenerationCount?d.left-c.Ua.x+b.x:d.x+d.width/2+b.x,k?(a.B(m,r,n.y),m++,a.B(m,r,d.bottom+g),m++,a.B(m,r,d.bottom+g+(b.y-h)/3),m++,a.B(m,r,d.bottom+g+2*(b.y-h)/3),m++,a.B(m,r,d.bottom+
g+(b.y-h)),m++,a.B(m,r,p.y)):(l&&(a.B(m,n.x,d.bottom+g/2),m++),a.B(m,r,d.bottom+g/2),m++,a.B(m,r,d.bottom+g+b.y-(l?h/2:h)),m++,l&&a.B(m,p.x,a.m(m-1).y))):180===e?(c.alignment===dt?(r=d.bottom+b.y,0===b.y&&n.y>q.y+c.rowIndent&&(r=Math.min(r,Math.max(n.y,r-ft(c))))):c.alignment===ct?(r=d.top+b.y,0===b.y&&n.y<q.y-c.rowIndent&&(r=Math.max(r,Math.min(n.y,r+ft(c))))):r=c.Wp||c.Xp&&1===c.maxGenerationCount?d.top-c.Ua.y+b.y:d.y+d.height/2+b.y,k?(a.B(m,n.x,r),m++,a.B(m,d.left-g,r),m++,a.B(m,d.left-g+(b.x+
h)/3,r),m++,a.B(m,d.left-g+2*(b.x+h)/3,r),m++,a.B(m,d.left-g+(b.x+h),r),m++,a.B(m,p.x,r)):(l&&(a.B(m,d.left-g/2,n.y),m++),a.B(m,d.left-g/2,r),m++,a.B(m,d.left-g+b.x+(l?h/2:h),r),m++,l&&a.B(m,a.m(m-1).x,p.y))):270===e?(c.alignment===dt?(r=d.right+b.x,0===b.x&&n.x>q.x+c.rowIndent&&(r=Math.min(r,Math.max(n.x,r-ft(c))))):c.alignment===ct?(r=d.left+b.x,0===b.x&&n.x<q.x-c.rowIndent&&(r=Math.max(r,Math.min(n.x,r+ft(c))))):r=c.Wp||c.Xp&&1===c.maxGenerationCount?d.left-c.Ua.x+b.x:d.x+d.width/2+b.x,k?(a.B(m,
r,n.y),m++,a.B(m,r,d.top-g),m++,a.B(m,r,d.top-g+(b.y+h)/3),m++,a.B(m,r,d.top-g+2*(b.y+h)/3),m++,a.B(m,r,d.top-g+(b.y+h)),m++,a.B(m,r,p.y)):(l&&(a.B(m,n.x,d.top-g/2),m++),a.B(m,r,d.top-g/2),m++,a.B(m,r,d.top-g+b.y+(l?h/2:h)),m++,l&&a.B(m,p.x,a.m(m-1).y))):z.k("Invalid angle "+e);a.dj()}else e=c,g=d,u&&z.l(e,ys,Et,"adjustRouteForAngleChange:parent"),u&&z.l(g,ys,Et,"adjustRouteForAngleChange:child"),a=this.link,c=bt(e),c!==bt(g)&&(b=et(e),d=e.vb,e=g.vb,0===c&&e.left-d.right<b+1||90===c&&e.top-d.bottom<
b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1||(a.An(),e=a.Se===Xi,g=a.rc,h=Ts(this.fromVertex.alignment),a.Ul(),0===c?(c=d.right+b/2,e?4===a.sa&&(b=a.m(3).y,a.aa(1,c-20,a.m(1).y),a.B(2,c-20,b),a.B(3,c,b),a.B(4,c+20,b),a.aa(5,a.m(5).x,b)):g?h?a.aa(3,a.m(2).x,a.m(4).y):6===a.sa&&(a.aa(2,c,a.m(2).y),a.aa(3,c,a.m(3).y)):4===a.sa?a.B(2,c,a.m(2).y):3===a.sa?a.aa(1,c,a.m(2).y):2===a.sa&&a.B(1,c,a.m(1).y)):90===c?(b=d.bottom+b/2,e?4===a.sa&&(c=a.m(3).x,a.aa(1,a.m(1).x,b-20),a.B(2,c,b-20),
a.B(3,c,b),a.B(4,c,b+20),a.aa(5,c,a.m(5).y)):g?h?a.aa(3,a.m(2).x,a.m(4).y):6===a.sa&&(a.aa(2,a.m(2).x,b),a.aa(3,a.m(3).x,b)):4===a.sa?a.B(2,a.m(2).x,b):3===a.sa?a.aa(1,a.m(2).x,b):2===a.sa&&a.B(1,a.m(1).x,b)):180===c?(c=d.left-b/2,e?4===a.sa&&(b=a.m(3).y,a.aa(1,c+20,a.m(1).y),a.B(2,c+20,b),a.B(3,c,b),a.B(4,c-20,b),a.aa(5,a.m(5).x,b)):g?h?a.aa(3,a.m(2).x,a.m(4).y):6===a.sa&&(a.aa(2,c,a.m(2).y),a.aa(3,c,a.m(3).y)):4===a.sa?a.B(2,c,a.m(2).y):3===a.sa?a.aa(1,c,a.m(2).y):2===a.sa&&a.B(1,c,a.m(1).y)):270===
c&&(b=d.top-b/2,e?4===a.sa&&(c=a.m(3).x,a.aa(1,a.m(1).x,b+20),a.B(2,c,b+20),a.B(3,c,b),a.B(4,c,b-20),a.aa(5,c,a.m(5).y)):g?h?a.aa(3,a.m(2).x,a.m(4).y):6===a.sa&&(a.aa(2,a.m(2).x,b),a.aa(3,a.m(3).x,b)):4===a.sa?a.B(2,a.m(2).x,b):3===a.sa?a.aa(1,a.m(2).x,b):2===a.sa&&a.B(1,a.m(1).x,b)),a.dj()))}};z.defineProperty(Et,{oL:"relativePoint"},function(){return this.ls},function(a){this.ls.set(a)});function Ft(){O.call(this);this.$e=null}z.Ra(Ft,O);
Ft.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.element=this.$e.cloneNode(!0)};Ft.prototype.toString=function(){return"HTMLHost("+this.$e.toString()+")#"+z.nd(this)};
Ft.prototype.ok=function(a,b){var c=this.$e;if(null!==c){var d=this.eb(ec);d.x-=this.W.width/2;d.y-=this.W.height/2;d.x-=this.W.x;d.y-=this.W.y;var d=b.aB(d),e=b.El;null===e||e.contains(c)||e.appendChild(c);e=this.transform;c.style.transform="matrix("+e.m11+","+e.m12+","+e.m21+","+e.m22+","+e.dx+","+e.dy+")";c.style.transformOrigin="0 0";e=d.y;c.style.left=d.x+"px";c.style.top=e+"px"}};
Ft.prototype.Ip=function(a,b,c,d){var e=this.Aa;isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);var e=this.Xe,g=this.dg;c=Math.max(c,g.width);d=Math.max(d,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);c=this.$e;null!==c&&(b=c.getBoundingClientRect(),a=b.width,b=b.height);yb(this.Wc,a,b);Jm(this,0,0,a,b)};Ft.prototype.aj=function(a,b,c,d){Nm(this,a,b,c,d)};z.w(Ft,{Ga:"naturalBounds"},function(){return this.Wc});
z.defineProperty(Ft,{element:"element"},function(){return this.$e},function(a){var b=this.$e;b!==a&&(a instanceof HTMLElement||z.k("HTMLHost.element must be an instance of HTMLElement."),this.$e=a,a.className="HTMLHost",this.j("element",b,a),this.ta())});aa.version="1.6.24";
window&&(window.module&&"object"===typeof window.module&&"object"===typeof window.module.exports?window.module.exports=aa:window.define&&"function"===typeof window.define&&window.define.amd?(window.go=aa,window.define(aa)):window.go=aa);"undefined"!==typeof module&&"object"===typeof module.exports&&(module.exports=aa); })(window);
/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */

if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
/*
 * metismenu - v1.1.3
 * Easy menu jQuery plugin for Twitter Bootstrap 3
 * https://github.com/onokumus/metisMenu
 *
 * Made by Osman Nuri Okumus
 * Under MIT License
 */

!function(a,b,c){function d(b,c){this.element=a(b),this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="metisMenu",f={toggle:!0,doubleTapToGo:!1};d.prototype={init:function(){var b=this.element,d=this.settings.toggle,f=this;this.isIE()<=9?(b.find("li.active").has("ul").children("ul").collapse("show"),b.find("li").not(".active").has("ul").children("ul").collapse("hide")):(b.find("li.active").has("ul").children("ul").addClass("collapse in"),b.find("li").not(".active").has("ul").children("ul").addClass("collapse")),f.settings.doubleTapToGo&&b.find("li.active").has("ul").children("a").addClass("doubleTapToGo"),b.find("li").has("ul").children("a").on("click."+e,function(b){return b.preventDefault(),f.settings.doubleTapToGo&&f.doubleTapToGo(a(this))&&"#"!==a(this).attr("href")&&""!==a(this).attr("href")?(b.stopPropagation(),void(c.location=a(this).attr("href"))):(a(this).parent("li").toggleClass("active").children("ul").collapse("toggle"),void(d&&a(this).parent("li").siblings().removeClass("active").children("ul.in").collapse("hide")))})},isIE:function(){for(var a,b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];)return b>4?b:a},doubleTapToGo:function(a){var b=this.element;return a.hasClass("doubleTapToGo")?(a.removeClass("doubleTapToGo"),!0):a.parent().children("ul").length?(b.find(".doubleTapToGo").removeClass("doubleTapToGo"),a.addClass("doubleTapToGo"),!1):void 0},remove:function(){this.element.off("."+e),this.element.removeData(e)}},a.fn[e]=function(b){return this.each(function(){var c=a(this);c.data(e)&&c.data(e).remove(),c.data(e,new d(this,b))}),this}}(jQuery,window,document);
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-50186004-9', 'auto');
ga('send', 'pageview');
$(document).ready(function(){
  $(".video_left img").click(function(){
    $("#gridModalLabel").html( $(this).attr('name') );
    $("#view_yt").html( '<iframe width="560" height="315" src="https://www.youtube.com/embed/'+ $(this).attr('code') +'?autoplay=1" frameborder="0" allowfullscreen></iframe>' );
    $("#gridSystemModal").modal();
  });
  $("#close_yt").click(function(){
    $("#view_yt").html( '' );
  });

  loadDataTable('#dataTables-allpage');

  if($('.tree-term').hasClass('max-death')) {
    $('.tree-term').nestable({
      maxDepth: 2
    });
  } else {
    $('.tree-term').nestable({
      maxDepth: 1
    });
  }

  $('.btn_save_nestable').click(function() {
    saveNestable();
  });
});

function loadDataTable(id_name) {
  $(id_name).DataTable({
    responsive: true
  });
}

function saveNestable() {
  $('.list_term_nestable').val(window.JSON.stringify($('.tree-term').nestable('serialize')));
  $('#form_term').submit();
}
;
$(function() {
    $('#side-menu').metisMenu();
});
$(function() {
    $(window).bind("load resize", function() {
        var topOffset = 50;
        var width = (this.window.innerWidth > 0) ? this.window.innerWidth : this.screen.width;
        if (width < 768) {
            $('div.navbar-collapse').addClass('collapse');
            topOffset = 100;
        } else {
            $('div.navbar-collapse').removeClass('collapse');
        }

        var height = ((this.window.innerHeight > 0) ? this.window.innerHeight : this.screen.height) - 1;
        height = height - topOffset;
        if (height < 1) height = 1;
        if (height > topOffset) {
            $("#page-wrapper").css("min-height", (height) + "px");
        }
    });

    var url = window.location;
    var element = $('ul.nav a').filter(function() {
        return this.href == url;
    }).addClass('active').parent();

    while (true) {
        if (element.is('li')) {
            element = element.parent().addClass('in').parent();
        } else {
            break;
        }
    }
});
/*!
 DataTables 1.10.12
 2008-2015 SpryMedia Ltd - datatables.net/license
*/

(function(h){"function"===typeof define&&define.amd?define(["jquery"],function(D){return h(D,window,document)}):"object"===typeof exports?module.exports=function(D,I){D||(D=window);I||(I="undefined"!==typeof window?require("jquery"):require("jquery")(D));return h(I,D,D.document)}:h(jQuery,window,document)})(function(h,D,I,k){function X(a){var b,c,d={};h.each(a,function(e){if((b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" "))c=e.replace(b[0],b[2].toLowerCase()),
d[c]=e,"o"===b[1]&&X(a[e])});a._hungarianMap=d}function K(a,b,c){a._hungarianMap||X(a);var d;h.each(b,function(e){d=a._hungarianMap[e];if(d!==k&&(c||b[d]===k))"o"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),K(a[d],b[d],c)):b[d]=b[e]})}function Da(a){var b=m.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&(c&&"No data available in table"===b.sEmptyTable)&&E(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&(c&&"Loading..."===b.sLoadingRecords)&&E(a,a,"sZeroRecords","sLoadingRecords");
a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&db(a)}function eb(a){A(a,"ordering","bSort");A(a,"orderMulti","bSortMulti");A(a,"orderClasses","bSortClasses");A(a,"orderCellsTop","bSortCellsTop");A(a,"order","aaSorting");A(a,"orderFixed","aaSortingFixed");A(a,"paging","bPaginate");A(a,"pagingType","sPaginationType");A(a,"pageLength","iDisplayLength");A(a,"searching","bFilter");"boolean"===typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":"");"boolean"===typeof a.scrollX&&(a.scrollX=
a.scrollX?"100%":"");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&K(m.models.oSearch,a[b])}function fb(a){A(a,"orderable","bSortable");A(a,"orderData","aDataSort");A(a,"orderSequence","asSorting");A(a,"orderDataType","sortDataType");var b=a.aDataSort;b&&!h.isArray(b)&&(a.aDataSort=[b])}function gb(a){if(!m.__browser){var b={};m.__browser=b;var c=h("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(h("<div/>").css({position:"absolute",top:1,left:1,
width:100,overflow:"scroll"}).append(h("<div/>").css({width:"100%",height:10}))).appendTo("body"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth;b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth;b.bScrollbarLeft=1!==Math.round(e.offset().left);b.bBounding=c[0].getBoundingClientRect().width?!0:!1;c.remove()}h.extend(a.oBrowser,m.__browser);a.oScroll.iBarWidth=m.__browser.barWidth}function hb(a,b,c,d,e,f){var g,j=!1;c!==k&&(g=c,j=!0);for(;d!==e;)a.hasOwnProperty(d)&&
(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Ea(a,b){var c=m.defaults.column,d=a.aoColumns.length,c=h.extend({},m.models.oColumn,c,{nTh:b?b:I.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=h.extend({},m.models.oSearch,c[d]);ja(a,d,h(b).data())}function ja(a,b,c){var b=a.aoColumns[b],d=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var f=
(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(fb(c),K(m.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),h.extend(b,c),E(b,c,"sWidth","sWidthOrig"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),E(b,c,"aDataSort"));var g=b.mData,j=Q(g),i=b.mRender?Q(b.mRender):null,c=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&
(c(g.sort)||c(g.type)||c(g.filter));b._setter=null;b.fnGetData=function(a,b,c){var d=j(a,b,k,c);return i&&b?i(d,b,a,c):d};b.fnSetData=function(a,b,c){return R(g)(a,b,c)};"number"!==typeof g&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone));a=-1!==h.inArray("asc",b.asSorting);c=-1!==h.inArray("desc",b.asSorting);!b.bSortable||!a&&!c?(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI=""):a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):
!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI)}function Y(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Fa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;(""!==b.sY||""!==b.sX)&&ka(a);u(a,null,"column-sizing",[a])}function Z(a,b){var c=la(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function $(a,b){var c=la(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}
function aa(a){var b=0;h.each(a.aoColumns,function(a,d){d.bVisible&&"none"!==h(d.nTh).css("display")&&b++});return b}function la(a,b){var c=[];h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function Ga(a){var b=a.aoColumns,c=a.aoData,d=m.ext.type.detect,e,f,g,j,i,h,l,q,t;e=0;for(f=b.length;e<f;e++)if(l=b[e],t=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){g=0;for(j=d.length;g<j;g++){i=0;for(h=c.length;i<h;i++){t[i]===k&&(t[i]=B(a,i,e,"type"));q=d[g](t[i],a);if(!q&&
g!==d.length-1)break;if("html"===q)break}if(q){l.sType=q;break}}l.sType||(l.sType="string")}}function ib(a,b,c,d){var e,f,g,j,i,n,l=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){n=b[e];var q=n.targets!==k?n.targets:n.aTargets;h.isArray(q)||(q=[q]);f=0;for(g=q.length;f<g;f++)if("number"===typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Ea(a);d(q[f],n)}else if("number"===typeof q[f]&&0>q[f])d(l.length+q[f],n);else if("string"===typeof q[f]){j=0;for(i=l.length;j<i;j++)("_all"==q[f]||h(l[j].nTh).hasClass(q[f]))&&
d(j,n)}}if(c){e=0;for(a=c.length;e<a;e++)d(e,c[e])}}function N(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},m.models.oRow,{src:c?"dom":"data",idx:e});f._aData=b;a.aoData.push(f);for(var g=a.aoColumns,j=0,i=g.length;j<i;j++)g[j].sType=null;a.aiDisplayMaster.push(e);b=a.rowIdFn(b);b!==k&&(a.aIds[b]=f);(c||!a.oFeatures.bDeferRender)&&Ha(a,e,c,d);return e}function ma(a,b){var c;b instanceof h||(b=h(b));return b.map(function(b,e){c=Ia(a,e);return N(a,c.data,e,c.cells)})}function B(a,b,c,d){var e=a.iDraw,
f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,i=f.fnGetData(g,d,{settings:a,row:b,col:c});if(i===k)return a.iDrawError!=e&&null===j&&(L(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=e),j;if((i===g||null===i)&&null!==j&&d!==k)i=j;else if("function"===typeof i)return i.call(g);return null===i&&"display"==d?"":i}function jb(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}
function Ja(a){return h.map(a.match(/(\\.|[^\.])+/g)||[""],function(a){return a.replace(/\\./g,".")})}function Q(a){if(h.isPlainObject(a)){var b={};h.each(a,function(a,c){c&&(b[a]=Q(c))});return function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,f,g){return a(b,c,f,g)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var c=function(a,b,f){var g,j;if(""!==f){j=Ja(f);
for(var i=0,n=j.length;i<n;i++){f=j[i].match(ba);g=j[i].match(U);if(f){j[i]=j[i].replace(ba,"");""!==j[i]&&(a=a[j[i]]);g=[];j.splice(0,i+1);j=j.join(".");if(h.isArray(a)){i=0;for(n=a.length;i<n;i++)g.push(c(a[i],b,j))}a=f[0].substring(1,f[0].length-1);a=""===a?g:g.join(a);break}else if(g){j[i]=j[i].replace(U,"");a=a[j[i]]();continue}if(null===a||a[j[i]]===k)return k;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}return function(b){return b[a]}}function R(a){if(h.isPlainObject(a))return R(a._);
if(null===a)return function(){};if("function"===typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var b=function(a,d,e){var e=Ja(e),f;f=e[e.length-1];for(var g,j,i=0,n=e.length-1;i<n;i++){g=e[i].match(ba);j=e[i].match(U);if(g){e[i]=e[i].replace(ba,"");a[e[i]]=[];f=e.slice();f.splice(0,i+1);g=f.join(".");if(h.isArray(d)){j=0;for(n=d.length;j<n;j++)f={},b(f,d[j],g),a[e[i]].push(f)}else a[e[i]]=d;return}j&&(e[i]=e[i].replace(U,
""),a=a[e[i]](d));if(null===a[e[i]]||a[e[i]]===k)a[e[i]]={};a=a[e[i]]}if(f.match(U))a[f.replace(U,"")](d);else a[f.replace(ba,"")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Ka(a){return G(a.aoData,"_aData")}function na(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0;a.aIds={}}function oa(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===k&&a.splice(d,1)}function ca(a,b,c,d){var e=a.aoData[b],f,g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);
c.innerHTML=B(a,b,d,"display")};if("dom"===c||(!c||"auto"===c)&&"dom"===e.src)e._aData=Ia(a,e,d,d===k?k:e._aData).data;else{var j=e.anCells;if(j)if(d!==k)g(j[d],d);else{c=0;for(f=j.length;c<f;c++)g(j[c],c)}}e._aSortData=null;e._aFilterData=null;g=a.aoColumns;if(d!==k)g[d].sType=null;else{c=0;for(f=g.length;c<f;c++)g[c].sType=null;La(a,e)}}function Ia(a,b,c,d){var e=[],f=b.firstChild,g,j,i=0,n,l=a.aoColumns,q=a._rowReadObject,d=d!==k?d:q?{}:[],t=function(a,b){if("string"===typeof a){var c=a.indexOf("@");
-1!==c&&(c=a.substring(c+1),R(a)(d,b.getAttribute(c)))}},S=function(a){if(c===k||c===i)j=l[i],n=h.trim(a.innerHTML),j&&j._bAttrSrc?(R(j.mData._)(d,n),t(j.mData.sort,a),t(j.mData.type,a),t(j.mData.filter,a)):q?(j._setter||(j._setter=R(j.mData)),j._setter(d,n)):d[i]=n;i++};if(f)for(;f;){g=f.nodeName.toUpperCase();if("TD"==g||"TH"==g)S(f),e.push(f);f=f.nextSibling}else{e=b.anCells;f=0;for(g=e.length;f<g;f++)S(e[f])}if(b=b.firstChild?b:b.nTr)(b=b.getAttribute("id"))&&R(a.rowId)(d,b);return{data:d,cells:e}}
function Ha(a,b,c,d){var e=a.aoData[b],f=e._aData,g=[],j,i,n,l,q;if(null===e.nTr){j=c||I.createElement("tr");e.nTr=j;e.anCells=g;j._DT_RowIndex=b;La(a,e);l=0;for(q=a.aoColumns.length;l<q;l++){n=a.aoColumns[l];i=c?d[l]:I.createElement(n.sCellType);i._DT_CellIndex={row:b,column:l};g.push(i);if((!c||n.mRender||n.mData!==l)&&(!h.isPlainObject(n.mData)||n.mData._!==l+".display"))i.innerHTML=B(a,b,l,"display");n.sClass&&(i.className+=" "+n.sClass);n.bVisible&&!c?j.appendChild(i):!n.bVisible&&c&&i.parentNode.removeChild(i);
n.fnCreatedCell&&n.fnCreatedCell.call(a.oInstance,i,B(a,b,l),f,b,l)}u(a,"aoRowCreatedCallback",null,[j,f,b])}e.nTr.setAttribute("role","row")}function La(a,b){var c=b.nTr,d=b._aData;if(c){var e=a.rowIdFn(d);e&&(c.id=e);d.DT_RowClass&&(e=d.DT_RowClass.split(" "),b.__rowc=b.__rowc?pa(b.__rowc.concat(e)):e,h(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass));d.DT_RowAttr&&h(c).attr(d.DT_RowAttr);d.DT_RowData&&h(c).data(d.DT_RowData)}}function kb(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===
h("th, td",g).length,n=a.oClasses,l=a.aoColumns;i&&(e=h("<tr/>").appendTo(g));b=0;for(c=l.length;b<c;b++)f=l[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),Ma(a,f.nTh,b))),f.sTitle!=d[0].innerHTML&&d.html(f.sTitle),Na(a,"header")(a,d,f,n);i&&da(a.aoHeader,g);h(g).find(">tr").attr("role","row");h(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH);h(j).find(">tr>th, >tr>td").addClass(n.sFooterTH);
if(null!==j){a=a.aoFooter[0];b=0;for(c=a.length;b<c;b++)f=l[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}}function ea(a,b,c){var d,e,f,g=[],j=[],i=a.aoColumns.length,n;if(b){c===k&&(c=!1);d=0;for(e=b.length;d<e;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}d=0;for(e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=g[d].length;f<b;f++)if(n=i=1,j[d][f]===k){a.appendChild(g[d][f].cell);
for(j[d][f]=1;g[d+i]!==k&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+n]!==k&&g[d][f].cell==g[d][f+n].cell;){for(c=0;c<i;c++)j[d+c][f+n]=1;n++}h(g[d][f].cell).attr("rowspan",i).attr("colspan",n)}}}}function O(a){var b=u(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{var b=[],c=0,d=a.asStripeClasses,e=d.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==y(a),i=a.aiDisplay;a.bDrawing=!0;g!==k&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=
-1);var g=a._iDisplayStart,n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!lb(a))return}else a.iDraw++;if(0!==i.length){f=j?a.aoData.length:n;for(j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];null===q.nTr&&Ha(a,l);l=q.nTr;if(0!==e){var t=d[c%e];q._sRowStripe!=t&&(h(l).removeClass(q._sRowStripe).addClass(t),q._sRowStripe=t)}u(a,"aoRowCallback",null,[l,q._aData,c,j]);b.push(l);c++}}else c=f.sZeroRecords,1==a.iDraw&&"ajax"==y(a)?c=f.sLoadingRecords:
f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{"class":e?d[0]:""}).append(h("<td />",{valign:"top",colSpan:aa(a),"class":a.oClasses.sRowEmpty}).html(c))[0];u(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Ka(a),g,n,i]);u(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Ka(a),g,n,i]);d=h(a.nTBody);d.children().detach();d.append(h(b));u(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function T(a,b){var c=a.oFeatures,d=c.bFilter;
c.bSort&&mb(a);d?fa(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;O(a);a._drawHold=!1}function nb(a){var b=a.oClasses,c=h(a.nTable),c=h("<div/>").insertBefore(c),d=a.oFeatures,e=h("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var f=a.sDom.split(""),g,j,i,n,l,q,t=0;t<f.length;t++){g=null;j=f[t];if("<"==j){i=h("<div/>")[0];
n=f[t+1];if("'"==n||'"'==n){l="";for(q=2;f[t+q]!=n;)l+=f[t+q],q++;"H"==l?l=b.sJUIHeader:"F"==l&&(l=b.sJUIFooter);-1!=l.indexOf(".")?(n=l.split("."),i.id=n[0].substr(1,n[0].length-1),i.className=n[1]):"#"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l;t+=q}e.append(i);e=h(i)}else if(">"==j)e=e.parent();else if("l"==j&&d.bPaginate&&d.bLengthChange)g=ob(a);else if("f"==j&&d.bFilter)g=pb(a);else if("r"==j&&d.bProcessing)g=qb(a);else if("t"==j)g=rb(a);else if("i"==j&&d.bInfo)g=sb(a);else if("p"==
j&&d.bPaginate)g=tb(a);else if(0!==m.ext.feature.length){i=m.ext.feature;q=0;for(n=i.length;q<n;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e);a.nHolding=null}function da(a,b){var c=h(b).children("tr"),d,e,f,g,j,i,n,l,q,t;a.splice(0,a.length);f=0;for(i=c.length;f<i;f++)a.push([]);f=0;for(i=c.length;f<i;f++){d=c[f];for(e=d.firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){l=1*e.getAttribute("colspan");
q=1*e.getAttribute("rowspan");l=!l||0===l||1===l?1:l;q=!q||0===q||1===q?1:q;g=0;for(j=a[f];j[g];)g++;n=g;t=1===l?!0:!1;for(j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][n+j]={cell:e,unique:t},a[f+g].nTr=d}e=e.nextSibling}}}function qa(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],da(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)if(c[b][f].unique&&(!d[f]||!a.bSortCellsTop))d[f]=c[b][f].cell;return d}function ra(a,b,c){u(a,"aoServerParams","serverParams",[b]);if(b&&h.isArray(b)){var d={},
e=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value});b=d}var f,g=a.ajax,j=a.oInstance,i=function(b){u(a,null,"xhr",[a,b,a.jqXHR]);c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var n=h.isFunction(f)?f(b,a):f,b=h.isFunction(f)&&n?n:h.extend(!0,b,n);delete g.data}n={data:b,success:function(b){var c=b.error||b.sError;c&&L(a,0,c);a.json=b;i(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var d=u(a,null,"xhr",
[a,null,a.jqXHR]);-1===h.inArray(!0,d)&&("parsererror"==c?L(a,0,"Invalid JSON response",1):4===b.readyState&&L(a,0,"Ajax error",7));C(a,!1)}};a.oAjaxData=b;u(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||"string"===typeof g?a.jqXHR=h.ajax(h.extend(n,{url:g||a.sAjaxSource})):h.isFunction(g)?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(n,g)),g.data=f)}function lb(a){return a.bAjaxDataGet?(a.iDraw++,C(a,
!0),ra(a,ub(a),function(b){vb(a,b)}),!1):!0}function ub(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,g,j=[],i,n,l,q=V(a);g=a._iDisplayStart;i=!1!==d.bPaginate?a._iDisplayLength:-1;var k=function(a,b){j.push({name:a,value:b})};k("sEcho",a.iDraw);k("iColumns",c);k("sColumns",G(b,"sName").join(","));k("iDisplayStart",g);k("iDisplayLength",i);var S={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)n=b[g],
l=f[g],i="function"==typeof n.mData?"function":n.mData,S.columns.push({data:i,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),k("mDataProp_"+g,i),d.bFilter&&(k("sSearch_"+g,l.sSearch),k("bRegex_"+g,l.bRegex),k("bSearchable_"+g,n.bSearchable)),d.bSort&&k("bSortable_"+g,n.bSortable);d.bFilter&&(k("sSearch",e.sSearch),k("bRegex",e.bRegex));d.bSort&&(h.each(q,function(a,b){S.order.push({column:b.col,dir:b.dir});k("iSortCol_"+a,b.col);k("sSortDir_"+
a,b.dir)}),k("iSortingCols",q.length));b=m.ext.legacy.ajax;return null===b?a.sAjaxSource?j:S:b?j:S}function vb(a,b){var c=sa(a,b),d=b.sEcho!==k?b.sEcho:b.draw,e=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}na(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(f,10);d=0;for(e=c.length;d<e;d++)N(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;O(a);a._bInitComplete||
ta(a,b);a.bAjaxDataGet=!0;C(a,!1)}function sa(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?Q(c)(b):b}function pb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=d.sSearch,j=j.match(/_INPUT_/)?j.replace("_INPUT_",g):j+g,b=h("<div/>",{id:!f.f?c+"_filter":null,"class":b.sFilter}).append(h("<label/>").append(j)),f=function(){var b=!this.value?
"":this.value;b!=e.sSearch&&(fa(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,O(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===y(a)?400:0,i=h("input",b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",g?Oa(f,g):f).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c);h(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{i[0]!==I.activeElement&&i.val(e.sSearch)}catch(d){}});
return b[0]}function fa(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};Ga(a);if("ssp"!=y(a)){wb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<e.length;b++)xb(a,e[b].sSearch,b,e[b].bEscapeRegex!==k?!e[b].bEscapeRegex:e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);yb(a)}else f(b);a.bFiltered=!0;u(a,null,"search",[a])}function yb(a){for(var b=
m.ext.search,c=a.aiDisplay,d,e,f=0,g=b.length;f<g;f++){for(var j=[],i=0,n=c.length;i<n;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0;h.merge(c,j)}}function xb(a,b,c,d,e,f){if(""!==b)for(var g=a.aiDisplay,d=Pa(b,d,e,f),e=g.length-1;0<=e;e--)b=a.aoData[g[e]]._aFilterData[c],d.test(b)||g.splice(e,1)}function wb(a,b,c,d,e,f){var d=Pa(b,d,e,f),e=a.oPreviousSearch.sSearch,f=a.aiDisplayMaster,g;0!==m.ext.search.length&&(c=!0);g=zb(a);if(0>=b.length)a.aiDisplay=f.slice();
else{if(g||c||e.length>b.length||0!==b.indexOf(e)||a.bSorted)a.aiDisplay=f.slice();b=a.aiDisplay;for(c=b.length-1;0<=c;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}}function Pa(a,b,c,d){a=b?a:Qa(a);c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0))var b=a.match(/^"(.*)"$/),a=b?b[1]:a;return a.replace('"',"")}).join(")(?=.*?")+").*$");return RegExp(a,d?"i":"")}function zb(a){var b=a.aoColumns,c,d,e,f,g,j,i,h,l=m.ext.type.search;c=!1;d=0;for(f=a.aoData.length;d<
f;d++)if(h=a.aoData[d],!h._aFilterData){j=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.bSearchable?(i=B(a,d,e,"filter"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=""),"string"!==typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(ua.innerHTML=i,i=Zb?ua.textContent:ua.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);h._aFilterData=j;h._sFilterRow=j.join("  ");c=!0}return c}function Ab(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}
function Bb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function sb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h("<div/>",{"class":a.oClasses.sInfo,id:!c?b+"_info":null});c||(a.aoDrawCallback.push({fn:Cb,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",b+"_info"));return d[0]}function Cb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),
g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered);j+=c.sInfoPostFix;j=Db(a,j);c=c.fnInfoCallback;null!==c&&(j=c.call(a.oInstance,a,d,e,f,g,j));h(b).html(j)}}function Db(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/
e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ga(a){var b,c,d=a.iInitDisplayStart,e=a.aoColumns,f;c=a.oFeatures;var g=a.bDeferLoading;if(a.bInitialised){nb(a);kb(a);ea(a,a.aoHeader);ea(a,a.aoFooter);C(a,!0);c.bAutoWidth&&Fa(a);b=0;for(c=e.length;b<c;b++)f=e[b],f.sWidth&&(f.nTh.style.width=x(f.sWidth));u(a,null,"preInit",[a]);T(a);e=y(a);if("ssp"!=e||g)"ajax"==e?ra(a,[],function(c){var f=sa(a,c);for(b=0;b<f.length;b++)N(a,f[b]);a.iInitDisplayStart=d;T(a);C(a,!1);ta(a,c)},a):(C(a,!1),
ta(a))}else setTimeout(function(){ga(a)},200)}function ta(a,b){a._bInitComplete=!0;(b||a.oInit.aaData)&&Y(a);u(a,null,"plugin-init",[a,b]);u(a,"aoInitComplete","init",[a,b])}function Ra(a,b){var c=parseInt(b,10);a._iDisplayLength=c;Sa(a);u(a,null,"length",[a,c])}function ob(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=h.isArray(d[0]),f=e?d[0]:d,d=e?d[1]:d,e=h("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),g=0,j=f.length;g<j;g++)e[0][g]=new Option(d[g],f[g]);var i=
h("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(i[0].id=c+"_length");i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML));h("select",i).val(a._iDisplayLength).bind("change.DT",function(){Ra(a,h(this).val());O(a)});h(a.nTable).bind("length.dt.DT",function(b,c,d){a===c&&h("select",i).val(d)});return i[0]}function tb(a){var b=a.sPaginationType,c=m.ext.pager[b],d="function"===typeof c,e=function(a){O(a)},b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;
d||c.fnInit(a,b,e);f.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=-1===i,b=l?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),k,l=0;for(k=f.p.length;l<k;l++)Na(a,"pageButton")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,e)},sName:"pagination"}));return b}function Ta(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();0===f||-1===e?d=0:"number"===typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:
"previous"==b?(d=0<=e?d-e:0,0>d&&(d=0)):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:L(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(u(a,null,"page",[a]),c&&O(a));return b}function qb(a){return h("<div/>",{id:!a.aanFeatures.r?a.sTableId+"_processing":null,"class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none");u(a,null,"processing",
[a,b])}function rb(a){var b=h(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),n=h(b[0].cloneNode(!1)),l=b.children("tfoot");l.length||(l=null);i=h("<div/>",{"class":f.sScrollWrapper}).append(h("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?!d?null:x(d):"100%"}).append(h("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",
width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append("top"===j?g:null).append(b.children("thead"))))).append(h("<div/>",{"class":f.sScrollBody}).css({position:"relative",overflow:"auto",width:!d?null:x(d)}).append(b));l&&i.append(h("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:d?!d?null:x(d):"100%"}).append(h("<div/>",{"class":f.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===j?g:null).append(b.children("tfoot")))));
var b=i.children(),k=b[0],f=b[1],t=l?b[2]:null;if(d)h(f).on("scroll.DT",function(){var a=this.scrollLeft;k.scrollLeft=a;l&&(t.scrollLeft=a)});h(f).css(e&&c.bCollapse?"max-height":"height",e);a.nScrollHead=k;a.nScrollBody=f;a.nScrollFoot=t;a.aoDrawCallback.push({fn:ka,sName:"scrolling"});return i[0]}function ka(a){var b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY,b=b.iBarWidth,f=h(a.nScrollHead),g=f[0].style,j=f.children("div"),i=j[0].style,n=j.children("table"),j=a.nScrollBody,l=h(j),q=j.style,t=h(a.nScrollFoot).children("div"),
m=t.children("table"),o=h(a.nTHead),F=h(a.nTable),p=F[0],r=p.style,u=a.nTFoot?h(a.nTFoot):null,Eb=a.oBrowser,Ua=Eb.bScrollOversize,s=G(a.aoColumns,"nTh"),P,v,w,y,z=[],A=[],B=[],C=[],D,E=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};v=j.scrollHeight>j.clientHeight;if(a.scrollBarVis!==v&&a.scrollBarVis!==k)a.scrollBarVis=v,Y(a);else{a.scrollBarVis=v;F.children("thead, tfoot").remove();u&&(w=u.clone().prependTo(F),P=u.find("tr"),w=
w.find("tr"));y=o.clone().prependTo(F);o=o.find("tr");v=y.find("tr");y.find("th, td").removeAttr("tabindex");c||(q.width="100%",f[0].style.width="100%");h.each(qa(a,y),function(b,c){D=Z(a,b);c.style.width=a.aoColumns[D].sWidth});u&&J(function(a){a.style.width=""},w);f=F.outerWidth();if(""===c){r.width="100%";if(Ua&&(F.find("tbody").height()>j.offsetHeight||"scroll"==l.css("overflow-y")))r.width=x(F.outerWidth()-b);f=F.outerWidth()}else""!==d&&(r.width=x(d),f=F.outerWidth());J(E,v);J(function(a){B.push(a.innerHTML);
z.push(x(h(a).css("width")))},v);J(function(a,b){if(h.inArray(a,s)!==-1)a.style.width=z[b]},o);h(v).height(0);u&&(J(E,w),J(function(a){C.push(a.innerHTML);A.push(x(h(a).css("width")))},w),J(function(a,b){a.style.width=A[b]},P),h(w).height(0));J(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+B[b]+"</div>";a.style.width=z[b]},v);u&&J(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+C[b]+"</div>";a.style.width=
A[b]},w);if(F.outerWidth()<f){P=j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")?f+b:f;if(Ua&&(j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")))r.width=x(P-b);(""===c||""!==d)&&L(a,1,"Possible column misalignment",6)}else P="100%";q.width=x(P);g.width=x(P);u&&(a.nScrollFoot.style.width=x(P));!e&&Ua&&(q.height=x(p.offsetHeight+b));c=F.outerWidth();n[0].style.width=x(c);i.width=x(c);d=F.height()>j.clientHeight||"scroll"==l.css("overflow-y");e="padding"+(Eb.bScrollbarLeft?"Left":
"Right");i[e]=d?b+"px":"0px";u&&(m[0].style.width=x(c),t[0].style.width=x(c),t[0].style[e]=d?b+"px":"0px");F.children("colgroup").insertBefore(F.children("thead"));l.scroll();if((a.bSorted||a.bFiltered)&&!a._drawHold)j.scrollTop=0}}function J(a,b,c){for(var d=0,e=0,f=b.length,g,j;e<f;){g=b[e].firstChild;for(j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Fa(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,f=d.sX,g=d.sXInner,
j=c.length,i=la(a,"bVisible"),n=h("th",a.nTHead),l=b.getAttribute("width"),k=b.parentNode,t=!1,m,o,p=a.oBrowser,d=p.bScrollOversize;(m=b.style.width)&&-1!==m.indexOf("%")&&(l=m);for(m=0;m<i.length;m++)o=c[i[m]],null!==o.sWidth&&(o.sWidth=Fb(o.sWidthOrig,k),t=!0);if(d||!t&&!f&&!e&&j==aa(a)&&j==n.length)for(m=0;m<j;m++)i=Z(a,m),null!==i&&(c[i].sWidth=x(n.eq(m).width()));else{j=h(b).clone().css("visibility","hidden").removeAttr("id");j.find("tbody tr").remove();var r=h("<tr/>").appendTo(j.find("tbody"));
j.find("thead, tfoot").remove();j.append(h(a.nTHead).clone()).append(h(a.nTFoot).clone());j.find("tfoot th, tfoot td").css("width","");n=qa(a,j.find("thead")[0]);for(m=0;m<i.length;m++)o=c[i[m]],n[m].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?x(o.sWidthOrig):"",o.sWidthOrig&&f&&h(n[m]).append(h("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(m=0;m<i.length;m++)t=i[m],o=c[t],h(Gb(a,t)).clone(!1).append(o.sContentPadding).appendTo(r);h("[name]",
j).removeAttr("name");o=h("<div/>").css(f||e?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(j).appendTo(k);f&&g?j.width(g):f?(j.css("width","auto"),j.removeAttr("width"),j.width()<k.clientWidth&&l&&j.width(k.clientWidth)):e?j.width(k.clientWidth):l&&j.width(l);for(m=e=0;m<i.length;m++)k=h(n[m]),g=k.outerWidth()-k.width(),k=p.bBounding?Math.ceil(n[m].getBoundingClientRect().width):k.outerWidth(),e+=k,c[i[m]].sWidth=x(k-g);b.style.width=x(e);o.remove()}l&&(b.style.width=
x(l));if((l||f)&&!a._reszEvt)b=function(){h(D).bind("resize.DT-"+a.sInstance,Oa(function(){Y(a)}))},d?setTimeout(b,1E3):b(),a._reszEvt=!0}function Fb(a,b){if(!a)return 0;var c=h("<div/>").css("width",x(a)).appendTo(b||I.body),d=c[0].offsetWidth;c.remove();return d}function Gb(a,b){var c=Hb(a,b);if(0>c)return null;var d=a.aoData[c];return!d.nTr?h("<td/>").html(B(a,c,b,"display"))[0]:d.anCells[b]}function Hb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)c=B(a,f,b,"display")+"",c=c.replace($b,
""),c=c.replace(/&nbsp;/g," "),c.length>d&&(d=c.length,e=f);return e}function x(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function V(a){var b,c,d=[],e=a.aoColumns,f,g,j,i;b=a.aaSortingFixed;c=h.isPlainObject(b);var n=[];f=function(a){a.length&&!h.isArray(a[0])?n.push(a):h.merge(n,a)};h.isArray(b)&&f(b);c&&b.pre&&f(b.pre);f(a.aaSorting);c&&b.post&&f(b.post);for(a=0;a<n.length;a++){i=n[a][0];f=e[i].aDataSort;b=0;for(c=f.length;b<c;b++)g=f[b],j=e[g].sType||
"string",n[a]._idx===k&&(n[a]._idx=h.inArray(n[a][1],e[g].asSorting)),d.push({src:i,col:g,dir:n[a][1],index:n[a]._idx,type:j,formatter:m.ext.type.order[j+"-pre"]})}return d}function mb(a){var b,c,d=[],e=m.ext.type.order,f=a.aoData,g=0,j,i=a.aiDisplayMaster,h;Ga(a);h=V(a);b=0;for(c=h.length;b<c;b++)j=h[b],j.formatter&&g++,Ib(a,j.col);if("ssp"!=y(a)&&0!==h.length){b=0;for(c=i.length;b<c;b++)d[i[b]]=b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,k=f[a]._aSortData,m=f[b]._aSortData;for(g=
0;g<i;g++)if(j=h[g],c=k[j.col],e=m[j.col],c=c<e?-1:c>e?1:0,0!==c)return"asc"===j.dir?c:-c;c=d[a];e=d[b];return c<e?-1:c>e?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,m=f[a]._aSortData,p=f[b]._aSortData;for(j=0;j<k;j++)if(i=h[j],c=m[i.col],g=p[i.col],i=e[i.type+"-"+i.dir]||e["string-"+i.dir],c=i(c,g),0!==c)return c;c=d[a];g=d[b];return c<g?-1:c>g?1:0})}a.bSorted=!0}function Jb(a){for(var b,c,d=a.aoColumns,e=V(a),a=a.oLanguage.oAria,f=0,g=d.length;f<g;f++){c=d[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,
"");var i=c.nTh;i.removeAttribute("aria-sort");c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),c=j[e[0].index+1]||j[0]):c=j[0],b+="asc"===c?a.sSortAscending:a.sSortDescending);i.setAttribute("aria-label",b)}}function Va(a,b,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;c===k&&(c=h.inArray(a[1],f));return c+1<f.length?c+1:b?null:0};"number"===typeof e[0]&&(e=a.aaSorting=[e]);c&&a.oFeatures.bSortMulti?(c=h.inArray(b,
G(e,"0")),-1!==c?(b=g(e[c],!0),null===b&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=f[b],e[c]._idx=b)):(e.push([b,f[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0);T(a);"function"==typeof d&&d(a)}function Ma(a,b,c,d){var e=a.aoColumns[c];Wa(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Va(a,c,b.shiftKey,d);"ssp"!==y(a)&&C(a,!1)},0)):Va(a,c,b.shiftKey,d))})}
function va(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,d=V(a),e=a.oFeatures,f,g;if(e.bSort&&e.bSortClasses){e=0;for(f=b.length;e<f;e++)g=b[e].src,h(G(a.aoData,"anCells",g)).removeClass(c+(2>e?e+1:3));e=0;for(f=d.length;e<f;e++)g=d[e].src,h(G(a.aoData,"anCells",g)).addClass(c+(2>e?e+1:3))}a.aLastSort=d}function Ib(a,b){var c=a.aoColumns[b],d=m.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,$(a,b)));for(var f,g=m.ext.type.order[c.sType+"-pre"],j=0,i=a.aoData.length;j<i;j++)if(c=a.aoData[j],
c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)f=d?e[j]:B(a,j,b,"sort"),c._aSortData[b]=g?g(f):f}function wa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:Ab(a.oPreviousSearch),columns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:Ab(a.aoPreSearchCols[d])}})};u(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,
b)}}function Kb(a){var b,c,d=a.aoColumns;if(a.oFeatures.bStateSave){var e=a.fnStateLoadCallback.call(a.oInstance,a);if(e&&e.time&&(b=u(a,"aoStateLoadParams","stateLoadParams",[a,e]),-1===h.inArray(!1,b)&&(b=a.iStateDuration,!(0<b&&e.time<+new Date-1E3*b)&&d.length===e.columns.length))){a.oLoadedState=h.extend(!0,{},e);e.start!==k&&(a._iDisplayStart=e.start,a.iInitDisplayStart=e.start);e.length!==k&&(a._iDisplayLength=e.length);e.order!==k&&(a.aaSorting=[],h.each(e.order,function(b,c){a.aaSorting.push(c[0]>=
d.length?[0,c[1]]:c)}));e.search!==k&&h.extend(a.oPreviousSearch,Bb(e.search));b=0;for(c=e.columns.length;b<c;b++){var f=e.columns[b];f.visible!==k&&(d[b].bVisible=f.visible);f.search!==k&&h.extend(a.aoPreSearchCols[b],Bb(f.search))}u(a,"aoStateLoaded","stateLoaded",[a,e])}}}function xa(a){var b=m.settings,a=h.inArray(a,G(b,"nTable"));return-1!==a?b[a]:null}function L(a,b,c,d){c="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+c;d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+
d);if(b)D.console&&console.log&&console.log(c);else if(b=m.ext,b=b.sErrMode||b.errMode,a&&u(a,null,"error",[a,d,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==typeof b&&b(a,d,c)}}function E(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?E(a,b,d[0],d[1]):E(a,b,d)}):(d===k&&(d=c),b[c]!==k&&(a[d]=b[c]))}function Lb(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&"data"!==e&&"aaData"!==
e&&h.isArray(d)?d.slice():d);return a}function Wa(a,b,c){h(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function u(a,b,c,d){var e=[];b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)}));null!==c&&(b=h.Event(c+".dt"),h(a.nTable).trigger(b,d),e.push(b.result));return e}function Sa(a){var b=a._iDisplayStart,
c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function Na(a,b){var c=a.renderer,d=m.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:"string"===typeof c?d[c]||d._:d._}function y(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ya(a,b){var c=[],c=Mb.numbers_length,d=Math.floor(c/2);b<=c?c=W(0,b):a<=d?(c=W(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=W(b-(c-2),b):(c=W(a-d+2,a+d-1),c.push("ellipsis"),
c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0));c.DT_el="span";return c}function db(a){h.each({num:function(b){return za(b,a)},"num-fmt":function(b){return za(b,a,Xa)},"html-num":function(b){return za(b,a,Aa)},"html-num-fmt":function(b){return za(b,a,Aa,Xa)}},function(b,c){v.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(v.type.search[b+a]=v.type.search.html)})}function Nb(a){return function(){var b=[xa(this[m.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return m.ext.internal[a].apply(this,
b)}}var m=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new r(xa(this[v.iApiIndex])):new r(this)};this.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===k||b)&&c.draw();return d.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===k||a?b.draw(!1):
(""!==d.sX||""!==d.sY)&&ka(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,c){var d=this.api(!0),a=d.rows(a),e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(c===k||c)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0);null===b||b===k?e.search(a,
c,d,h):e.column(b).search(a,c,d,h);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==k){var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==k||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),
[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===k||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return xa(this[v.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=
function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a);(e===k||e)&&h.columns.adjust();(d===k||d)&&h.draw();return 0};this.fnVersionCheck=v.fnVersionCheck;var b=this,c=a===k,d=this.length;c&&(a={});this.oApi=this.internal=v.internal;for(var e in m.ext.internal)e&&(this[e]=Nb(e));this.each(function(){var e={},e=1<d?Lb(e,a,!0):a,g=0,j,i=this.getAttribute("id"),n=!1,l=m.defaults,q=h(this);if("table"!=
this.nodeName.toLowerCase())L(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{eb(l);fb(l.column);K(l,l,!0);K(l.column,l.column,!0);K(l,h.extend(e,q.data()));var t=m.settings,g=0;for(j=t.length;g<j;g++){var p=t[g];if(p.nTable==this||p.nTHead.parentNode==this||p.nTFoot&&p.nTFoot.parentNode==this){g=e.bRetrieve!==k?e.bRetrieve:l.bRetrieve;if(c||g)return p.oInstance;if(e.bDestroy!==k?e.bDestroy:l.bDestroy){p.oInstance.fnDestroy();break}else{L(p,0,"Cannot reinitialise DataTable",3);
return}}if(p.sTableId==this.id){t.splice(g,1);break}}if(null===i||""===i)this.id=i="DataTables_Table_"+m.ext._unique++;var o=h.extend(!0,{},m.models.oSettings,{sDestroyWidth:q[0].style.width,sInstance:i,sTableId:i});o.nTable=this;o.oApi=b.internal;o.oInit=e;t.push(o);o.oInstance=1===b.length?b:q.dataTable();eb(e);e.oLanguage&&Da(e.oLanguage);e.aLengthMenu&&!e.iDisplayLength&&(e.iDisplayLength=h.isArray(e.aLengthMenu[0])?e.aLengthMenu[0][0]:e.aLengthMenu[0]);e=Lb(h.extend(!0,{},l),e);E(o.oFeatures,
e,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));E(o,e,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols",
"aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);E(o.oScroll,e,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);E(o.oLanguage,e,"fnInfoCallback");z(o,"aoDrawCallback",e.fnDrawCallback,"user");z(o,"aoServerParams",e.fnServerParams,"user");z(o,"aoStateSaveParams",e.fnStateSaveParams,"user");z(o,"aoStateLoadParams",e.fnStateLoadParams,"user");z(o,"aoStateLoaded",e.fnStateLoaded,"user");z(o,"aoRowCallback",e.fnRowCallback,
"user");z(o,"aoRowCreatedCallback",e.fnCreatedRow,"user");z(o,"aoHeaderCallback",e.fnHeaderCallback,"user");z(o,"aoFooterCallback",e.fnFooterCallback,"user");z(o,"aoInitComplete",e.fnInitComplete,"user");z(o,"aoPreDrawCallback",e.fnPreDrawCallback,"user");o.rowIdFn=Q(e.rowId);gb(o);i=o.oClasses;e.bJQueryUI?(h.extend(i,m.ext.oJUIClasses,e.oClasses),e.sDom===l.sDom&&"lfrtip"===l.sDom&&(o.sDom='<"H"lfr>t<"F"ip>'),o.renderer)?h.isPlainObject(o.renderer)&&!o.renderer.header&&(o.renderer.header="jqueryui"):
o.renderer="jqueryui":h.extend(i,m.ext.classes,e.oClasses);q.addClass(i.sTable);o.iInitDisplayStart===k&&(o.iInitDisplayStart=e.iDisplayStart,o._iDisplayStart=e.iDisplayStart);null!==e.iDeferLoading&&(o.bDeferLoading=!0,g=h.isArray(e.iDeferLoading),o._iRecordsDisplay=g?e.iDeferLoading[0]:e.iDeferLoading,o._iRecordsTotal=g?e.iDeferLoading[1]:e.iDeferLoading);var r=o.oLanguage;h.extend(!0,r,e.oLanguage);""!==r.sUrl&&(h.ajax({dataType:"json",url:r.sUrl,success:function(a){Da(a);K(l.oLanguage,a);h.extend(true,
r,a);ga(o)},error:function(){ga(o)}}),n=!0);null===e.asStripeClasses&&(o.asStripeClasses=[i.sStripeOdd,i.sStripeEven]);var g=o.asStripeClasses,v=q.children("tbody").find("tr").eq(0);-1!==h.inArray(!0,h.map(g,function(a){return v.hasClass(a)}))&&(h("tbody tr",this).removeClass(g.join(" ")),o.asDestroyStripes=g.slice());t=[];g=this.getElementsByTagName("thead");0!==g.length&&(da(o.aoHeader,g[0]),t=qa(o));if(null===e.aoColumns){p=[];g=0;for(j=t.length;g<j;g++)p.push(null)}else p=e.aoColumns;g=0;for(j=
p.length;g<j;g++)Ea(o,t?t[g]:null);ib(o,e.aoColumnDefs,p,function(a,b){ja(o,a,b)});if(v.length){var s=function(a,b){return a.getAttribute("data-"+b)!==null?b:null};h(v[0]).children("th, td").each(function(a,b){var c=o.aoColumns[a];if(c.mData===a){var d=s(b,"sort")||s(b,"order"),e=s(b,"filter")||s(b,"search");if(d!==null||e!==null){c.mData={_:a+".display",sort:d!==null?a+".@data-"+d:k,type:d!==null?a+".@data-"+d:k,filter:e!==null?a+".@data-"+e:k};ja(o,a)}}})}var w=o.oFeatures;e.bStateSave&&(w.bStateSave=
!0,Kb(o,e),z(o,"aoDrawCallback",wa,"state_save"));if(e.aaSorting===k){t=o.aaSorting;g=0;for(j=t.length;g<j;g++)t[g][1]=o.aoColumns[g].asSorting[0]}va(o);w.bSort&&z(o,"aoDrawCallback",function(){if(o.bSorted){var a=V(o),b={};h.each(a,function(a,c){b[c.src]=c.dir});u(o,null,"order",[o,a,b]);Jb(o)}});z(o,"aoDrawCallback",function(){(o.bSorted||y(o)==="ssp"||w.bDeferRender)&&va(o)},"sc");g=q.children("caption").each(function(){this._captionSide=q.css("caption-side")});j=q.children("thead");0===j.length&&
(j=h("<thead/>").appendTo(this));o.nTHead=j[0];j=q.children("tbody");0===j.length&&(j=h("<tbody/>").appendTo(this));o.nTBody=j[0];j=q.children("tfoot");if(0===j.length&&0<g.length&&(""!==o.oScroll.sX||""!==o.oScroll.sY))j=h("<tfoot/>").appendTo(this);0===j.length||0===j.children().length?q.addClass(i.sNoFooter):0<j.length&&(o.nTFoot=j[0],da(o.aoFooter,o.nTFoot));if(e.aaData)for(g=0;g<e.aaData.length;g++)N(o,e.aaData[g]);else(o.bDeferLoading||"dom"==y(o))&&ma(o,h(o.nTBody).children("tr"));o.aiDisplay=
o.aiDisplayMaster.slice();o.bInitialised=!0;!1===n&&ga(o)}});b=null;return this},v,r,p,s,Ya={},Ob=/[\r\n]/g,Aa=/<.*?>/g,ac=/^[\w\+\-]/,bc=/[\w\+\-]$/,cc=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Xa=/[',$%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,M=function(a){return!a||!0===a||"-"===a?!0:!1},Pb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Qb=function(a,b){Ya[b]||(Ya[b]=RegExp(Qa(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,
"").replace(Ya[b],"."):a},Za=function(a,b,c){var d="string"===typeof a;if(M(a))return!0;b&&d&&(a=Qb(a,b));c&&d&&(a=a.replace(Xa,""));return!isNaN(parseFloat(a))&&isFinite(a)},Rb=function(a,b,c){return M(a)?!0:!(M(a)||"string"===typeof a)?null:Za(a.replace(Aa,""),b,c)?!0:null},G=function(a,b,c){var d=[],e=0,f=a.length;if(c!==k)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<f;e++)a[e]&&d.push(a[e][b]);return d},ha=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==k)for(;f<g;f++)a[b[f]][c]&&
e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},W=function(a,b){var c=[],d;b===k?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Sb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},pa=function(a){var b=[],c,d,e=a.length,f,g=0;d=0;a:for(;d<e;d++){c=a[d];for(f=0;f<g;f++)if(b[f]===c)continue a;b.push(c);g++}return b};m.util={throttle:function(a,b){var c=b!==k?b:200,d,e;return function(){var b=this,g=+new Date,h=arguments;d&&g<d+c?(clearTimeout(e),
e=setTimeout(function(){d=k;a.apply(b,h)},c)):(d=g,a.apply(b,h))}},escapeRegex:function(a){return a.replace(cc,"\\$1")}};var A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ba=/\[.*?\]$/,U=/\(\)$/,Qa=m.util.escapeRegex,ua=h("<div>")[0],Zb=ua.textContent!==k,$b=/<.*?>/g,Oa=m.util.throttle,Tb=[],w=Array.prototype,dc=function(a){var b,c,d=m.settings,e=h.map(d,function(a){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase())return b=h.inArray(a,e),-1!==b?[d[b]]:
null;if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?c=h(a):a instanceof h&&(c=a)}else return[];if(c)return c.map(function(){b=h.inArray(this,e);return-1!==b?d[b]:null}).toArray()};r=function(a,b){if(!(this instanceof r))return new r(a,b);var c=[],d=function(a){(a=dc(a))&&(c=c.concat(a))};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=pa(c);b&&h.merge(this,b);this.selector={rows:null,cols:null,opts:null};r.extend(this,this,Tb)};
m.Api=r;h.extend(r.prototype,{any:function(){return 0!==this.count()},concat:w.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new r(b[a],this[a]):null},filter:function(a){var b=[];if(w.filter)b=w.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new r(this.context,b)},flatten:function(){var a=
[];return new r(this.context,a.concat.apply(a,this.toArray()))},join:w.join,indexOf:w.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var e=[],f,g,h,i,n,l=this.context,m,t,p=this.selector;"string"===typeof a&&(d=c,c=b,b=a,a=!1);g=0;for(h=l.length;g<h;g++){var o=new r(l[g]);if("table"===b)f=c.call(o,l[g],g),f!==k&&e.push(f);else if("columns"===b||"rows"===b)f=c.call(o,l[g],this[g],g),f!==k&&e.push(f);else if("column"===b||"column-rows"===
b||"row"===b||"cell"===b){t=this[g];"column-rows"===b&&(m=Ba(l[g],p.opts));i=0;for(n=t.length;i<n;i++)f=t[i],f="cell"===b?c.call(o,l[g],f.row,f.column,g,i):c.call(o,l[g],f,g,i,m),f!==k&&e.push(f)}}return e.length||d?(a=new r(l,a?e.concat.apply([],e):e),b=a.selector,b.rows=p.rows,b.cols=p.cols,b.opts=p.opts,a):this},lastIndexOf:w.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(w.map)b=w.map.call(this,a,this);else for(var c=
0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new r(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:w.pop,push:w.push,reduce:w.reduce||function(a,b){return hb(this,a,b,0,this.length,1)},reduceRight:w.reduceRight||function(a,b){return hb(this,a,b,this.length-1,-1,-1)},reverse:w.reverse,selector:null,shift:w.shift,sort:w.sort,splice:w.splice,toArray:function(){return w.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},
unique:function(){return new r(this.context,pa(this))},unshift:w.unshift});r.extend=function(a,b,c){if(c.length&&b&&(b instanceof r||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=b.apply(a,arguments);r.extend(d,d,c.methodExt);return d}};d=0;for(e=c.length;d<e;d++)f=c[d],b[f.name]="function"===typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,r.extend(a,b[f.name],f.propExt)}};r.register=p=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<
d;c++)r.register(a[c],b);else for(var e=a.split("."),f=Tb,g,j,c=0,d=e.length;c<d;c++){g=(j=-1!==e[c].indexOf("()"))?e[c].replace("()",""):e[c];var i;a:{i=0;for(var n=f.length;i<n;i++)if(f[i].name===g){i=f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i));c===d-1?i.val=b:f=j?i.methodExt:i.propExt}};r.registerPlural=s=function(a,b,c){r.register(a,c);r.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof r?a.length?h.isArray(a[0])?new r(a.context,
a[0]):a[0]:k:a})};p("tables()",function(a){var b;if(a){b=r;var c=this.context;if("number"===typeof a)a=[c[a]];else var d=h.map(c,function(a){return a.nTable}),a=h(d).filter(a).map(function(){var a=h.inArray(this,d);return c[a]}).toArray();b=new b(a)}else b=this;return b});p("table()",function(a){var a=this.tables(a),b=a.context;return b.length?new r(b[0]):a});s("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});s("tables().body()","table().body()",
function(){return this.iterator("table",function(a){return a.nTBody},1)});s("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});s("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});s("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});p("draw()",function(a){return this.iterator("table",function(b){"page"===
a?O(b):("string"===typeof a&&(a="full-hold"===a?!1:!0),T(b,!1===a))})});p("page()",function(a){return a===k?this.page.info().page:this.iterator("table",function(b){Ta(b,a)})});p("page.info()",function(){if(0===this.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,
serverSide:"ssp"===y(a)}});p("page.len()",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:k:this.iterator("table",function(b){Ra(b,a)})});var Ub=function(a,b,c){if(c){var d=new r(a);d.one("draw",function(){c(d.ajax.json())})}if("ssp"==y(a))T(a,b);else{C(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort();ra(a,[],function(c){na(a);for(var c=sa(a,c),d=0,e=c.length;d<e;d++)N(a,c[d]);T(a,b);C(a,!1)})}};p("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
p("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});p("ajax.reload()",function(a,b){return this.iterator("table",function(c){Ub(c,!1===b,a)})});p("ajax.url()",function(a){var b=this.context;if(a===k){if(0===b.length)return k;b=b[0];return b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});p("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Ub(c,
!1===b,a)})});var $a=function(a,b,c,d,e){var f=[],g,j,i,n,l,m;i=typeof b;if(!b||"string"===i||"function"===i||b.length===k)b=[b];i=0;for(n=b.length;i<n;i++){j=b[i]&&b[i].split?b[i].split(","):[b[i]];l=0;for(m=j.length;l<m;l++)(g=c("string"===typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&(f=f.concat(g))}a=v.selector[a];if(a.length){i=0;for(n=a.length;i<n;i++)f=a[i](d,e,f)}return pa(f)},ab=function(a){a||(a={});a.filter&&a.search===k&&(a.search=a.filter);return h.extend({search:"none",order:"current",
page:"all"},a)},bb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Ba=function(a,b){var c,d,e,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var j=b.search;d=b.order;e=b.page;if("ssp"==y(a))return"removed"===j?[]:W(0,c.length);if("current"==e){c=a._iDisplayStart;for(d=a.fnDisplayEnd();c<d;c++)f.push(g[c])}else if("current"==d||"applied"==d)f="none"==j?c.slice():"applied"==j?g.slice():h.map(c,function(a){return-1===
h.inArray(a,g)?a:null});else if("index"==d||"original"==d){c=0;for(d=a.aoData.length;c<d;c++)"none"==j?f.push(c):(e=h.inArray(c,g),(-1===e&&"removed"==j||0<=e&&"applied"==j)&&f.push(c))}return f};p("rows()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=ab(b),c=this.iterator("table",function(c){var e=b;return $a("row",a,function(a){var b=Pb(a);if(b!==null&&!e)return[b];var j=Ba(c,e);if(b!==null&&h.inArray(b,j)!==-1)return[b];if(!a)return j;if(typeof a==="function")return h.map(j,function(b){var e=
c.aoData[b];return a(b,e._aData,e.nTr)?b:null});b=Sb(ha(c.aoData,j,"nTr"));if(a.nodeName){if(a._DT_RowIndex!==k)return[a._DT_RowIndex];if(a._DT_CellIndex)return[a._DT_CellIndex.row];b=h(a).closest("*[data-dt-row]");return b.length?[b.data("dt-row")]:[]}if(typeof a==="string"&&a.charAt(0)==="#"){j=c.aIds[a.replace(/^#/,"")];if(j!==k)return[j.idx]}return h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},c,e)},1);c.selector.rows=a;c.selector.opts=b;return c});p("rows().nodes()",function(){return this.iterator("row",
function(a,b){return a.aoData[b].nTr||k},1)});p("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return ha(a.aoData,b,"_aData")},1)});s("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)});s("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){ca(b,c,a)})});s("rows().indexes()","row().index()",function(){return this.iterator("row",
function(a,b){return b},1)});s("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((!0===a?"#":"")+h)}return new r(c,b)});s("rows().remove()","row().remove()",function(){var a=this;this.iterator("row",function(b,c,d){var e=b.aoData,f=e[c],g,h,i,n,l;e.splice(c,1);g=0;for(h=e.length;g<h;g++)if(i=e[g],l=i.anCells,null!==i.nTr&&(i.nTr._DT_RowIndex=g),null!==l){i=0;for(n=
l.length;i<n;i++)l[i]._DT_CellIndex.row=g}oa(b.aiDisplayMaster,c);oa(b.aiDisplay,c);oa(a[d],c,!1);Sa(b);c=b.rowIdFn(f._aData);c!==k&&delete b.aIds[c]});this.iterator("table",function(a){for(var c=0,d=a.aoData.length;c<d;c++)a.aoData[c].idx=c});return this});p("rows.add()",function(a){var b=this.iterator("table",function(b){var c,f,g,h=[];f=0;for(g=a.length;f<g;f++)c=a[f],c.nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(ma(b,c)[0]):h.push(N(b,c));return h},1),c=this.rows(-1);c.pop();h.merge(c,b);
return c});p("row()",function(a,b){return bb(this.rows(a,b))});p("row().data()",function(a){var b=this.context;if(a===k)return b.length&&this.length?b[0].aoData[this[0]]._aData:k;b[0].aoData[this[0]]._aData=a;ca(b[0],this[0],"data");return this});p("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});p("row.add()",function(a){a instanceof h&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?
ma(b,a)[0]:N(b,a)});return this.row(b[0])});var cb=function(a,b){var c=a.context;if(c.length&&(c=c[0].aoData[b!==k?b:a[0]])&&c._details)c._details.remove(),c._detailsShow=k,c._details=k},Vb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new r(e),g=e.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<G(g,"_details").length&&(f.on("draw.dt.DT_details",
function(a,b){e===b&&f.rows({page:"current"}).eq(0).each(function(a){a=g[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(e===b)for(var c,d=aa(b),f=0,h=g.length;f<h;f++)c=g[f],c._details&&c._details.children("td[colspan]").attr("colspan",d)}),f.on("destroy.dt.DT_details",function(a,b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&cb(f,c)}))}}};p("row().child()",function(a,b){var c=this.context;if(a===k)return c.length&&this.length?
c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)cb(this);else if(c.length&&this.length){var d=c[0],c=c[0].aoData[this[0]],e=[],f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&"tr"===a.nodeName.toLowerCase()?e.push(a):(c=h("<tr><td/></tr>").addClass(b),h("td",c).addClass(b).html(a)[0].colSpan=aa(d),e.push(c[0]))};f(a,b);c._details&&c._details.remove();c._details=h(e);c._detailsShow&&c._details.insertAfter(c.nTr)}return this});
p(["row().child.show()","row().child().show()"],function(){Vb(this,!0);return this});p(["row().child.hide()","row().child().hide()"],function(){Vb(this,!1);return this});p(["row().child.remove()","row().child().remove()"],function(){cb(this);return this});p("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var ec=/^(.+):(name|visIdx|visible)$/,Wb=function(a,b,c,d,e){for(var c=[],d=0,f=e.length;d<f;d++)c.push(B(a,e[d],b));
return c};p("columns()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");var b=ab(b),c=this.iterator("table",function(c){var e=a,f=b,g=c.aoColumns,j=G(g,"sName"),i=G(g,"nTh");return $a("column",e,function(a){var b=Pb(a);if(a==="")return W(g.length);if(b!==null)return[b>=0?b:g.length+b];if(typeof a==="function"){var e=Ba(c,f);return h.map(g,function(b,f){return a(f,Wb(c,f,0,0,e),i[f])?f:null})}var k=typeof a==="string"?a.match(ec):"";if(k)switch(k[2]){case "visIdx":case "visible":b=parseInt(k[1],
10);if(b<0){var m=h.map(g,function(a,b){return a.bVisible?b:null});return[m[m.length+b]]}return[Z(c,b)];case "name":return h.map(j,function(a,b){return a===k[1]?b:null});default:return[]}if(a.nodeName&&a._DT_CellIndex)return[a._DT_CellIndex.column];b=h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray();if(b.length||!a.nodeName)return b;b=h(a).closest("*[data-dt-column]");return b.length?[b.data("dt-column")]:[]},c,f)},1);c.selector.cols=a;c.selector.opts=b;return c});s("columns().header()",
"column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});s("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});s("columns().data()","column().data()",function(){return this.iterator("column-rows",Wb,1)});s("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});s("columns().cache()","column().cache()",
function(a){return this.iterator("column-rows",function(b,c,d,e,f){return ha(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});s("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return ha(a.aoData,e,"anCells",b)},1)});s("columns().visible()","column().visible()",function(a,b){var c=this.iterator("column",function(b,c){if(a===k)return b.aoColumns[c].bVisible;var f=b.aoColumns,g=f[c],j=b.aoData,i,n,l;if(a!==k&&g.bVisible!==a){if(a){var m=
h.inArray(!0,G(f,"bVisible"),c+1);i=0;for(n=j.length;i<n;i++)l=j[i].nTr,f=j[i].anCells,l&&l.insertBefore(f[c],f[m]||null)}else h(G(b.aoData,"anCells",c)).detach();g.bVisible=a;ea(b,b.aoHeader);ea(b,b.aoFooter);wa(b)}});a!==k&&(this.iterator("column",function(c,e){u(c,null,"column-visibility",[c,e,a,b])}),(b===k||b)&&this.columns.adjust());return c});s("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?$(b,c):c},1)});p("columns.adjust()",
function(){return this.iterator("table",function(a){Y(a)},1)});p("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return Z(c,b);if("fromData"===a||"toVisible"===a)return $(c,b)}});p("column()",function(a,b){return bb(this.columns(a,b))});p("cells()",function(a,b,c){h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null));h.isPlainObject(b)&&(c=b,b=null);if(null===b||b===k)return this.iterator("table",function(b){var d=a,e=ab(c),f=
b.aoData,g=Ba(b,e),j=Sb(ha(f,g,"anCells")),i=h([].concat.apply([],j)),l,n=b.aoColumns.length,m,p,r,u,v,s;return $a("cell",d,function(a){var c=typeof a==="function";if(a===null||a===k||c){m=[];p=0;for(r=g.length;p<r;p++){l=g[p];for(u=0;u<n;u++){v={row:l,column:u};if(c){s=f[l];a(v,B(b,l,u),s.anCells?s.anCells[u]:null)&&m.push(v)}else m.push(v)}}return m}if(h.isPlainObject(a))return[a];c=i.filter(a).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray();if(c.length||
!a.nodeName)return c;s=h(a).closest("*[data-dt-row]");return s.length?[{row:s.data("dt-row"),column:s.data("dt-column")}]:[]},b,e)});var d=this.columns(b,c),e=this.rows(a,c),f,g,j,i,n,l=this.iterator("table",function(a,b){f=[];g=0;for(j=e[b].length;g<j;g++){i=0;for(n=d[b].length;i<n;i++)f.push({row:e[b][g],column:d[b][i]})}return f},1);h.extend(l.selector,{cols:b,rows:a,opts:c});return l});s("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b])&&
a.anCells?a.anCells[c]:k},1)});p("cells().data()",function(){return this.iterator("cell",function(a,b,c){return B(a,b,c)},1)});s("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});s("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return B(b,c,d,a)},1)});s("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,
b,c){return{row:b,column:c,columnVisible:$(a,c)}},1)});s("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){ca(b,c,a,d)})});p("cell()",function(a,b,c){return bb(this.cells(a,b,c))});p("cell().data()",function(a){var b=this.context,c=this[0];if(a===k)return b.length&&c.length?B(b[0],c[0].row,c[0].column):k;jb(b[0],c[0].row,c[0].column,a);ca(b[0],c[0].row,"data",c[0].column);return this});p("order()",function(a,b){var c=this.context;if(a===k)return 0!==
c.length?c[0].aaSorting:k;"number"===typeof a?a=[[a,b]]:a.length&&!h.isArray(a[0])&&(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});p("order.listener()",function(a,b,c){return this.iterator("table",function(d){Ma(d,a,b,c)})});p("order.fixed()",function(a){if(!a){var b=this.context,b=b.length?b[0].aaSortingFixed:k;return h.isArray(b)?{pre:b}:b}return this.iterator("table",function(b){b.aaSortingFixed=h.extend(!0,{},a)})});p(["columns().order()",
"column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])});c.aaSorting=e})});p("search()",function(a,b,c,d){var e=this.context;return a===k?0!==e.length?e[0].oPreviousSearch.sSearch:k:this.iterator("table",function(e){e.oFeatures.bFilter&&fa(e,h.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})});s("columns().search()","column().search()",function(a,
b,c,d){return this.iterator("column",function(e,f){var g=e.aoPreSearchCols;if(a===k)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),fa(e,e.oPreviousSearch,1))})});p("state()",function(){return this.context.length?this.context[0].oSavedState:null});p("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});p("state.loaded()",function(){return this.context.length?
this.context[0].oLoadedState:null});p("state.save()",function(){return this.iterator("table",function(a){wa(a)})});m.versionCheck=m.fnVersionCheck=function(a){for(var b=m.version.split("."),a=a.split("."),c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};m.isDataTable=m.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;h.each(m.settings,function(a,e){var f=e.nScrollHead?h("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?h("table",e.nScrollFoot)[0]:
null;if(e.nTable===b||f===b||g===b)c=!0});return c};m.tables=m.fnTables=function(a){var b=!1;h.isPlainObject(a)&&(b=a.api,a=a.visible);var c=h.map(m.settings,function(b){if(!a||a&&h(b.nTable).is(":visible"))return b.nTable});return b?new r(c):c};m.camelToHungarian=K;p("$()",function(a,b){var c=this.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))});h.each(["on","one","off"],function(a,b){p(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||
(a[0]+=".dt");var d=h(this.tables().nodes());d[b].apply(d,a);return this})});p("clear()",function(){return this.iterator("table",function(a){na(a)})});p("settings()",function(){return new r(this.context,this.context)});p("init()",function(){var a=this.context;return a.length?a[0].oInit:null});p("data()",function(){return this.iterator("table",function(a){return G(a.aoData,"_aData")}).flatten()});p("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var c=b.nTableWrapper.parentNode,
d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),f=h(f),k=h(b.nTableWrapper),l=h.map(b.aoData,function(a){return a.nTr}),p;b.bDestroying=!0;u(b,"aoDestroyCallback","destroy",[b]);a||(new r(b)).columns().visible(!0);k.unbind(".DT").find(":not(tbody *)").unbind(".DT");h(D).unbind(".DT-"+b.sInstance);e!=g.parentNode&&(i.children("thead").detach(),i.append(g));j&&e!=j.parentNode&&(i.children("tfoot").detach(),i.append(j));b.aaSorting=[];b.aaSortingFixed=[];va(b);h(l).removeClass(b.asStripeClasses.join(" "));
h("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone);b.bJUI&&(h("th span."+d.sSortIcon+", td span."+d.sSortIcon,g).detach(),h("th, td",g).each(function(){var a=h("div."+d.sSortJUIWrapper,this);h(this).append(a.contents());a.detach()}));f.children().detach();f.append(l);g=a?"remove":"detach";i[g]();k[g]();!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),i.css("width",b.sDestroyWidth).removeClass(d.sTable),(p=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%
p])}));c=h.inArray(b,m.settings);-1!==c&&m.settings.splice(c,1)})});h.each(["column","row","cell"],function(a,b){p(b+"s().every()",function(a){var d=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,n){a.call(e[b](g,"cell"===b?h:d,"cell"===b?d:k),g,h,i,n)})})});p("i18n()",function(a,b,c){var d=this.context[0],a=Q(a)(d.oLanguage);a===k&&(a=b);c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:a._);return a.replace("%d",c)});m.version="1.10.12";m.settings=[];m.models={};m.models.oSearch={bCaseInsensitive:!0,
sSearch:"",bRegex:!1,bSmart:!0};m.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};m.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,
sTitle:null,sType:null,sWidth:null,sWidthOrig:null};m.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,
fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===
a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",
sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},m.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",
renderer:null,rowId:"DT_RowId"};X(m.defaults);m.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};X(m.defaults.column);m.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,
bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],
aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,
fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==y(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==y(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=
this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};m.ext=v={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},
header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:m.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:m.version};h.extend(v,{afnFiltering:v.search,aTypes:v.type.detect,ofnSearch:v.type.search,oSort:v.type.order,afnSortData:v.order,aoFeatures:v.feature,oApi:v.internal,oStdClasses:v.classes,oPagination:v.pager});h.extend(m.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",
sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",
sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Ca="",Ca="",H=Ca+"ui-state-default",ia=Ca+"css_right ui-icon ui-icon-",Xb=Ca+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";h.extend(m.ext.oJUIClasses,
m.ext.classes,{sPageButton:"fg-button ui-button "+H,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:H+" sorting_asc",sSortDesc:H+" sorting_desc",sSortable:H+" sorting",sSortableAsc:H+" sorting_asc_disabled",sSortableDesc:H+" sorting_desc_disabled",sSortableNone:H+" sorting_disabled",sSortJUIAsc:ia+"triangle-1-n",sSortJUIDesc:ia+"triangle-1-s",sSortJUI:ia+"carat-2-n-s",
sSortJUIAscAllowed:ia+"carat-1-n",sSortJUIDescAllowed:ia+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+H,sScrollFoot:"dataTables_scrollFoot "+H,sHeaderTH:H,sFooterTH:H,sJUIHeader:Xb+" ui-corner-tl ui-corner-tr",sJUIFooter:Xb+" ui-corner-bl ui-corner-br"});var Mb=m.ext.pager;h.extend(Mb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(a,b){return[ya(a,
b)]},simple_numbers:function(a,b){return["previous",ya(a,b),"next"]},full_numbers:function(a,b){return["first","previous",ya(a,b),"next","last"]},_numbers:ya,numbers_length:7});h.extend(!0,m.ext.renderer,{pageButton:{_:function(a,b,c,d,e,f){var g=a.oClasses,j=a.oLanguage.oPaginate,i=a.oLanguage.oAria.paginate||{},k,l,m=0,p=function(b,d){var o,r,u,s,v=function(b){Ta(a,b.data.action,true)};o=0;for(r=d.length;o<r;o++){s=d[o];if(h.isArray(s)){u=h("<"+(s.DT_el||"div")+"/>").appendTo(b);p(u,s)}else{k=null;
l="";switch(s){case "ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case "first":k=j.sFirst;l=s+(e>0?"":" "+g.sPageButtonDisabled);break;case "previous":k=j.sPrevious;l=s+(e>0?"":" "+g.sPageButtonDisabled);break;case "next":k=j.sNext;l=s+(e<f-1?"":" "+g.sPageButtonDisabled);break;case "last":k=j.sLast;l=s+(e<f-1?"":" "+g.sPageButtonDisabled);break;default:k=s+1;l=e===s?g.sPageButtonActive:""}if(k!==null){u=h("<a>",{"class":g.sPageButton+" "+l,"aria-controls":a.sTableId,"aria-label":i[s],
"data-dt-idx":m,tabindex:a.iTabIndex,id:c===0&&typeof s==="string"?a.sTableId+"_"+s:null}).html(k).appendTo(b);Wa(u,{action:s},v);m++}}}},r;try{r=h(b).find(I.activeElement).data("dt-idx")}catch(o){}p(h(b).empty(),d);r&&h(b).find("[data-dt-idx="+r+"]").focus()}}});h.extend(m.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Za(a,c)?"num"+c:null},function(a){if(a&&!(a instanceof Date)&&(!ac.test(a)||!bc.test(a)))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||M(a)?"date":
null},function(a,b){var c=b.oLanguage.sDecimal;return Za(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Rb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Rb(a,c,!0)?"html-num-fmt"+c:null},function(a){return M(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);h.extend(m.ext.type.search,{html:function(a){return M(a)?a:"string"===typeof a?a.replace(Ob," ").replace(Aa,""):""},string:function(a){return M(a)?a:"string"===typeof a?a.replace(Ob,
" "):a}});var za=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=Qb(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};h.extend(v.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return M(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return M(a)?"":"string"===typeof a?a.toLowerCase():!a.toString?"":a.toString()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,
b){return a<b?1:a>b?-1:0}});db("");h.extend(!0,m.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on("order.dt.DT",function(e,f,g,h){if(a===f){e=c.idx;b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass(h[e]=="asc"?d.sSortAsc:h[e]=="desc"?d.sSortDesc:c.sSortingClass)}})},jqueryui:function(a,b,c,d){h("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b);h(a.nTable).on("order.dt.DT",function(e,
f,g,h){if(a===f){e=c.idx;b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass(h[e]=="asc"?d.sSortAsc:h[e]=="desc"?d.sSortDesc:c.sSortingClass);b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass(h[e]=="asc"?d.sSortJUIAsc:h[e]=="desc"?d.sSortJUIDesc:c.sSortingClassJUI)}})}}});var Yb=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};m.render={number:function(a,
b,c,d,e){return{display:function(f){if("number"!==typeof f&&"string"!==typeof f)return f;var g=0>f?"-":"",h=parseFloat(f);if(isNaN(h))return Yb(f);f=Math.abs(h);h=parseInt(f,10);f=c?b+(f-h).toFixed(c).substring(2):"";return g+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+f+(e||"")}}},text:function(){return{display:Yb}}};h.extend(m.ext.internal,{_fnExternApiFunc:Nb,_fnBuildAjax:ra,_fnAjaxUpdate:lb,_fnAjaxParameters:ub,_fnAjaxUpdateDraw:vb,_fnAjaxDataSrc:sa,_fnAddColumn:Ea,_fnColumnOptions:ja,
_fnAdjustColumnSizing:Y,_fnVisibleToColumnIndex:Z,_fnColumnIndexToVisible:$,_fnVisbleColumns:aa,_fnGetColumns:la,_fnColumnTypes:Ga,_fnApplyColumnDefs:ib,_fnHungarianMap:X,_fnCamelToHungarian:K,_fnLanguageCompat:Da,_fnBrowserDetect:gb,_fnAddData:N,_fnAddTr:ma,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==k?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:jb,_fnSplitObjNotation:Ja,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:R,
_fnGetDataMaster:Ka,_fnClearTable:na,_fnDeleteIndex:oa,_fnInvalidate:ca,_fnGetRowElements:Ia,_fnCreateTr:Ha,_fnBuildHead:kb,_fnDrawHead:ea,_fnDraw:O,_fnReDraw:T,_fnAddOptionsHtml:nb,_fnDetectHeader:da,_fnGetUniqueThs:qa,_fnFeatureHtmlFilter:pb,_fnFilterComplete:fa,_fnFilterCustom:yb,_fnFilterColumn:xb,_fnFilter:wb,_fnFilterCreateSearch:Pa,_fnEscapeRegex:Qa,_fnFilterData:zb,_fnFeatureHtmlInfo:sb,_fnUpdateInfo:Cb,_fnInfoMacros:Db,_fnInitialise:ga,_fnInitComplete:ta,_fnLengthChange:Ra,_fnFeatureHtmlLength:ob,
_fnFeatureHtmlPaginate:tb,_fnPageChange:Ta,_fnFeatureHtmlProcessing:qb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:rb,_fnScrollDraw:ka,_fnApplyToChildren:J,_fnCalculateColumnWidths:Fa,_fnThrottle:Oa,_fnConvertToWidth:Fb,_fnGetWidestNode:Gb,_fnGetMaxLenString:Hb,_fnStringToCss:x,_fnSortFlatten:V,_fnSort:mb,_fnSortAria:Jb,_fnSortListener:Va,_fnSortAttachListener:Ma,_fnSortingClasses:va,_fnSortData:Ib,_fnSaveState:wa,_fnLoadState:Kb,_fnSettingsFromNode:xa,_fnLog:L,_fnMap:E,_fnBindAction:Wa,_fnCallbackReg:z,
_fnCallbackFire:u,_fnLengthOverflow:Sa,_fnRenderer:Na,_fnDataSource:y,_fnRowAttributes:La,_fnCalculateEnd:function(){}});h.fn.dataTable=m;m.$=h;h.fn.dataTableSettings=m.settings;h.fn.dataTableExt=m.ext;h.fn.DataTable=function(a){return h(this).dataTable(a).api()};h.each(m,function(a,b){h.fn.DataTable[a]=b});return h.fn.dataTable});
/*!
 DataTables Bootstrap 3 integration
 2011-2014 SpryMedia Ltd - datatables.net/license
*/

(function(){var f=function(c,b){c.extend(!0,b.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-6'i><'col-sm-6'p>>",renderer:"bootstrap"});c.extend(b.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"});b.ext.renderer.pageButton.bootstrap=function(g,f,p,k,h,l){var q=new b.Api(g),r=g.oClasses,i=g.oLanguage.oPaginate,d,e,o=function(b,f){var j,m,n,a,k=function(a){a.preventDefault();
c(a.currentTarget).hasClass("disabled")||q.page(a.data.action).draw(!1)};j=0;for(m=f.length;j<m;j++)if(a=f[j],c.isArray(a))o(b,a);else{e=d="";switch(a){case "ellipsis":d="&hellip;";e="disabled";break;case "first":d=i.sFirst;e=a+(0<h?"":" disabled");break;case "previous":d=i.sPrevious;e=a+(0<h?"":" disabled");break;case "next":d=i.sNext;e=a+(h<l-1?"":" disabled");break;case "last":d=i.sLast;e=a+(h<l-1?"":" disabled");break;default:d=a+1,e=h===a?"active":""}d&&(n=c("<li>",{"class":r.sPageButton+" "+
e,"aria-controls":g.sTableId,tabindex:g.iTabIndex,id:0===p&&"string"===typeof a?g.sTableId+"_"+a:null}).append(c("<a>",{href:"#"}).html(d)).appendTo(b),g.oApi._fnBindAction(n,{action:a},k))}};o(c(f).empty().html('<ul class="pagination"/>').children("ul"),k)};b.TableTools&&(c.extend(!0,b.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},
select:{row:"active"}}),c.extend(!0,b.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"===typeof define&&define.amd?define(["jquery","datatables"],f):"object"===typeof exports?f(require("jquery"),require("datatables")):jQuery&&f(jQuery,jQuery.fn.dataTable)})(window,document);
/*! Responsive 1.0.6
 * 2014-2015 SpryMedia Ltd - datatables.net/license
 */

/**
 * @summary     Responsive
 * @description Responsive tables plug-in for DataTables
 * @version     1.0.6
 * @file        dataTables.responsive.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2014-2015 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */


(function(window, document, undefined) {


var factory = function( $, DataTable ) {
"use strict";

/**
 * Responsive is a plug-in for the DataTables library that makes use of
 * DataTables' ability to change the visibility of columns, changing the
 * visibility of columns so the displayed columns fit into the table container.
 * The end result is that complex tables will be dynamically adjusted to fit
 * into the viewport, be it on a desktop, tablet or mobile browser.
 *
 * Responsive for DataTables has two modes of operation, which can used
 * individually or combined:
 *
 * * Class name based control - columns assigned class names that match the
 *   breakpoint logic can be shown / hidden as required for each breakpoint.
 * * Automatic control - columns are automatically hidden when there is no
 *   room left to display them. Columns removed from the right.
 *
 * In additional to column visibility control, Responsive also has built into
 * options to use DataTables' child row display to show / hide the information
 * from the table that has been hidden. There are also two modes of operation
 * for this child row display:
 *
 * * Inline - when the control element that the user can use to show / hide
 *   child rows is displayed inside the first column of the table.
 * * Column - where a whole column is dedicated to be the show / hide control.
 *
 * Initialisation of Responsive is performed by:
 *
 * * Adding the class `responsive` or `dt-responsive` to the table. In this case
 *   Responsive will automatically be initialised with the default configuration
 *   options when the DataTable is created.
 * * Using the `responsive` option in the DataTables configuration options. This
 *   can also be used to specify the configuration options, or simply set to
 *   `true` to use the defaults.
 *
 *  @class
 *  @param {object} settings DataTables settings object for the host table
 *  @param {object} [opts] Configuration options
 *  @requires jQuery 1.7+
 *  @requires DataTables 1.10.1+
 *
 *  @example
 *      $('#example').DataTable( {
 *        responsive: true
 *      } );
 *    } );
 */
var Responsive = function ( settings, opts ) {
	// Sanity check that we are using DataTables 1.10 or newer
	if ( ! DataTable.versionCheck || ! DataTable.versionCheck( '1.10.1' ) ) {
		throw 'DataTables Responsive requires DataTables 1.10.1 or newer';
	}

	this.s = {
		dt: new DataTable.Api( settings ),
		columns: []
	};

	// Check if responsive has already been initialised on this table
	if ( this.s.dt.settings()[0].responsive ) {
		return;
	}

	// details is an object, but for simplicity the user can give it as a string
	if ( opts && typeof opts.details === 'string' ) {
		opts.details = { type: opts.details };
	}

	this.c = $.extend( true, {}, Responsive.defaults, DataTable.defaults.responsive, opts );
	settings.responsive = this;
	this._constructor();
};

Responsive.prototype = {
	/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	 * Constructor
	 */

	/**
	 * Initialise the Responsive instance
	 *
	 * @private
	 */
	_constructor: function ()
	{
		var that = this;
		var dt = this.s.dt;

		dt.settings()[0]._responsive = this;

		// Use DataTables' private throttle function to avoid processor thrashing
		$(window).on( 'resize.dtr orientationchange.dtr', dt.settings()[0].oApi._fnThrottle( function () {
			that._resize();
		} ) );

		// Destroy event handler
		dt.on( 'destroy.dtr', function () {
			$(window).off( 'resize.dtr orientationchange.dtr draw.dtr' );
		} );

		// Reorder the breakpoints array here in case they have been added out
		// of order
		this.c.breakpoints.sort( function (a, b) {
			return a.width < b.width ? 1 :
				a.width > b.width ? -1 : 0;
		} );

		// Determine which columns are already hidden, and should therefore
		// remain hidden. todo - should this be done? See thread 22677
		//
		// this.s.alwaysHidden = dt.columns(':hidden').indexes();

		this._classLogic();
		this._resizeAuto();

		// Details handler
		var details = this.c.details;
		if ( details.type ) {
			that._detailsInit();
			this._detailsVis();

			dt.on( 'column-visibility.dtr', function () {
				that._detailsVis();
			} );

			// Redraw the details box on each draw. This is used until
			// DataTables implements a native `updated` event for rows
			dt.on( 'draw.dtr', function () {
				dt.rows( {page: 'current'} ).iterator( 'row', function ( settings, idx ) {
					var row = dt.row( idx );

					if ( row.child.isShown() ) {
						var info = that.c.details.renderer( dt, idx );
						row.child( info, 'child' ).show();
					}
				} );
			} );

			$(dt.table().node()).addClass( 'dtr-'+details.type );
		}

		// First pass - draw the table for the current viewport size
		this._resize();
	},


	/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	 * Private methods
	 */

	/**
	 * Calculate the visibility for the columns in a table for a given
	 * breakpoint. The result is pre-determined based on the class logic if
	 * class names are used to control all columns, but the width of the table
	 * is also used if there are columns which are to be automatically shown
	 * and hidden.
	 *
	 * @param  {string} breakpoint Breakpoint name to use for the calculation
	 * @return {array} Array of boolean values initiating the visibility of each
	 *   column.
	 *  @private
	 */
	_columnsVisiblity: function ( breakpoint )
	{
		var dt = this.s.dt;
		var columns = this.s.columns;
		var i, ien;

		// Class logic - determine which columns are in this breakpoint based
		// on the classes. If no class control (i.e. `auto`) then `-` is used
		// to indicate this to the rest of the function
		var display = $.map( columns, function ( col ) {
			return col.auto && col.minWidth === null ?
				false :
				col.auto === true ?
					'-' :
					$.inArray( breakpoint, col.includeIn ) !== -1;
		} );

		// Auto column control - first pass: how much width is taken by the
		// ones that must be included from the non-auto columns
		var requiredWidth = 0;
		for ( i=0, ien=display.length ; i<ien ; i++ ) {
			if ( display[i] === true ) {
				requiredWidth += columns[i].minWidth;
			}
		}

		// Second pass, use up any remaining width for other columns. For
		// scrolling tables we need to subtract the width of the scrollbar. It
		// may not be requires which makes this sub-optimal, but it would
		// require another full redraw to make complete use of those extra few
		// pixels
		var scrolling = dt.settings()[0].oScroll;
		var bar = scrolling.sY || scrolling.sX ? scrolling.iBarWidth : 0;
		var widthAvailable = dt.table().container().offsetWidth - bar;
		var usedWidth = widthAvailable - requiredWidth;

		// Control column needs to always be included. This makes it sub-
		// optimal in terms of using the available with, but to stop layout
		// thrashing or overflow. Also we need to account for the control column
		// width first so we know how much width is available for the other
		// columns, since the control column might not be the first one shown
		for ( i=0, ien=display.length ; i<ien ; i++ ) {
			if ( columns[i].control ) {
				usedWidth -= columns[i].minWidth;
			}
		}

		// Allow columns to be shown (counting from the left) until we run out
		// of room
		var empty = false;
		for ( i=0, ien=display.length ; i<ien ; i++ ) {
			if ( display[i] === '-' && ! columns[i].control ) {
				// Once we've found a column that won't fit we don't let any
				// others display either, or columns might disappear in the
				// middle of the table
				if ( empty || usedWidth - columns[i].minWidth < 0 ) {
					empty = true;
					display[i] = false;
				}
				else {
					display[i] = true;
				}

				usedWidth -= columns[i].minWidth;
			}
		}

		// Determine if the 'control' column should be shown (if there is one).
		// This is the case when there is a hidden column (that is not the
		// control column). The two loops look inefficient here, but they are
		// trivial and will fly through. We need to know the outcome from the
		// first , before the action in the second can be taken
		var showControl = false;

		for ( i=0, ien=columns.length ; i<ien ; i++ ) {
			if ( ! columns[i].control && ! columns[i].never && ! display[i] ) {
				showControl = true;
				break;
			}
		}

		for ( i=0, ien=columns.length ; i<ien ; i++ ) {
			if ( columns[i].control ) {
				display[i] = showControl;
			}
		}

		// Finally we need to make sure that there is at least one column that
		// is visible
		if ( $.inArray( true, display ) === -1 ) {
			display[0] = true;
		}

		return display;
	},


	/**
	 * Create the internal `columns` array with information about the columns
	 * for the table. This includes determining which breakpoints the column
	 * will appear in, based upon class names in the column, which makes up the
	 * vast majority of this method.
	 *
	 * @private
	 */
	_classLogic: function ()
	{
		var that = this;
		var calc = {};
		var breakpoints = this.c.breakpoints;
		var columns = this.s.dt.columns().eq(0).map( function (i) {
			var className = this.column(i).header().className;

			return {
				className: className,
				includeIn: [],
				auto:      false,
				control:   false,
				never:     className.match(/\bnever\b/) ? true : false
			};
		} );

		// Simply add a breakpoint to `includeIn` array, ensuring that there are
		// no duplicates
		var add = function ( colIdx, name ) {
			var includeIn = columns[ colIdx ].includeIn;

			if ( $.inArray( name, includeIn ) === -1 ) {
				includeIn.push( name );
			}
		};

		var column = function ( colIdx, name, operator, matched ) {
			var size, i, ien;

			if ( ! operator ) {
				columns[ colIdx ].includeIn.push( name );
			}
			else if ( operator === 'max-' ) {
				// Add this breakpoint and all smaller
				size = that._find( name ).width;

				for ( i=0, ien=breakpoints.length ; i<ien ; i++ ) {
					if ( breakpoints[i].width <= size ) {
						add( colIdx, breakpoints[i].name );
					}
				}
			}
			else if ( operator === 'min-' ) {
				// Add this breakpoint and all larger
				size = that._find( name ).width;

				for ( i=0, ien=breakpoints.length ; i<ien ; i++ ) {
					if ( breakpoints[i].width >= size ) {
						add( colIdx, breakpoints[i].name );
					}
				}
			}
			else if ( operator === 'not-' ) {
				// Add all but this breakpoint (xxx need extra information)

				for ( i=0, ien=breakpoints.length ; i<ien ; i++ ) {
					if ( breakpoints[i].name.indexOf( matched ) === -1 ) {
						add( colIdx, breakpoints[i].name );
					}
				}
			}
		};

		// Loop over each column and determine if it has a responsive control
		// class
		columns.each( function ( col, i ) {
			var classNames = col.className.split(' ');
			var hasClass = false;

			// Split the class name up so multiple rules can be applied if needed
			for ( var k=0, ken=classNames.length ; k<ken ; k++ ) {
				var className = $.trim( classNames[k] );

				if ( className === 'all' ) {
					// Include in all
					hasClass = true;
					col.includeIn = $.map( breakpoints, function (a) {
						return a.name;
					} );
					return;
				}
				else if ( className === 'none' || className === 'never' ) {
					// Include in none (default) and no auto
					hasClass = true;
					return;
				}
				else if ( className === 'control' ) {
					// Special column that is only visible, when one of the other
					// columns is hidden. This is used for the details control
					hasClass = true;
					col.control = true;
					return;
				}

				$.each( breakpoints, function ( j, breakpoint ) {
					// Does this column have a class that matches this breakpoint?
					var brokenPoint = breakpoint.name.split('-');
					var re = new RegExp( '(min\\-|max\\-|not\\-)?('+brokenPoint[0]+')(\\-[_a-zA-Z0-9])?' );
					var match = className.match( re );

					if ( match ) {
						hasClass = true;

						if ( match[2] === brokenPoint[0] && match[3] === '-'+brokenPoint[1] ) {
							// Class name matches breakpoint name fully
							column( i, breakpoint.name, match[1], match[2]+match[3] );
						}
						else if ( match[2] === brokenPoint[0] && ! match[3] ) {
							// Class name matched primary breakpoint name with no qualifier
							column( i, breakpoint.name, match[1], match[2] );
						}
					}
				} );
			}

			// If there was no control class, then automatic sizing is used
			if ( ! hasClass ) {
				col.auto = true;
			}
		} );

		this.s.columns = columns;
	},


	/**
	 * Initialisation for the details handler
	 *
	 * @private
	 */
	_detailsInit: function ()
	{
		var that    = this;
		var dt      = this.s.dt;
		var details = this.c.details;

		// The inline type always uses the first child as the target
		if ( details.type === 'inline' ) {
			details.target = 'td:first-child';
		}

		// type.target can be a string jQuery selector or a column index
		var target   = details.target;
		var selector = typeof target === 'string' ? target : 'td';

		// Click handler to show / hide the details rows when they are available
		$( dt.table().body() ).on( 'click', selector, function (e) {
			// If the table is not collapsed (i.e. there is no hidden columns)
			// then take no action
			if ( ! $(dt.table().node()).hasClass('collapsed' ) ) {
				return;
			}

			// Check that the row is actually a DataTable's controlled node
			if ( ! dt.row( $(this).closest('tr') ).length ) {
				return;
			}

			// For column index, we determine if we should act or not in the
			// handler - otherwise it is already okay
			if ( typeof target === 'number' ) {
				var targetIdx = target < 0 ?
					dt.columns().eq(0).length + target :
					target;

				if ( dt.cell( this ).index().column !== targetIdx ) {
					return;
				}
			}

			// $().closest() includes itself in its check
			var row = dt.row( $(this).closest('tr') );

			if ( row.child.isShown() ) {
				row.child( false );
				$( row.node() ).removeClass( 'parent' );
			}
			else {
				var info = that.c.details.renderer( dt, row[0] );
				row.child( info, 'child' ).show();
				$( row.node() ).addClass( 'parent' );
			}
		} );
	},


	/**
	 * Update the child rows in the table whenever the column visibility changes
	 *
	 * @private
	 */
	_detailsVis: function ()
	{
		var that = this;
		var dt = this.s.dt;

		// Find how many columns are hidden
		var hiddenColumns = dt.columns().indexes().filter( function ( idx ) {
			var col = dt.column( idx );

			if ( col.visible() ) {
				return null;
			}

			// Only counts as hidden if it doesn't have the `never` class
			return $( col.header() ).hasClass( 'never' ) ? null : idx;
		} );
		var haveHidden = true;

		if ( hiddenColumns.length === 0 || ( hiddenColumns.length === 1 && this.s.columns[ hiddenColumns[0] ].control ) ) {
			haveHidden = false;
		}

		if ( haveHidden ) {
			// Show all existing child rows
			dt.rows( { page: 'current' } ).eq(0).each( function (idx) {
				var row = dt.row( idx );

				if ( row.child() ) {
					var info = that.c.details.renderer( dt, row[0] );

					// The renderer can return false to have no child row
					if ( info === false ) {
						row.child.hide();
					}
					else {
						row.child( info, 'child' ).show();
					}
				}
			} );
		}
		else {
			// Hide all existing child rows
			dt.rows( { page: 'current' } ).eq(0).each( function (idx) {
				dt.row( idx ).child.hide();
			} );
		}
	},


	/**
	 * Find a breakpoint object from a name
	 * @param  {string} name Breakpoint name to find
	 * @return {object}      Breakpoint description object
	 */
	_find: function ( name )
	{
		var breakpoints = this.c.breakpoints;

		for ( var i=0, ien=breakpoints.length ; i<ien ; i++ ) {
			if ( breakpoints[i].name === name ) {
				return breakpoints[i];
			}
		}
	},


	/**
	 * Alter the table display for a resized viewport. This involves first
	 * determining what breakpoint the window currently is in, getting the
	 * column visibilities to apply and then setting them.
	 *
	 * @private
	 */
	_resize: function ()
	{
		var dt = this.s.dt;
		var width = $(window).width();
		var breakpoints = this.c.breakpoints;
		var breakpoint = breakpoints[0].name;
		var columns = this.s.columns;
		var i, ien;

		// Determine what breakpoint we are currently at
		for ( i=breakpoints.length-1 ; i>=0 ; i-- ) {
			if ( width <= breakpoints[i].width ) {
				breakpoint = breakpoints[i].name;
				break;
			}
		}
		
		// Show the columns for that break point
		var columnsVis = this._columnsVisiblity( breakpoint );

		// Set the class before the column visibility is changed so event
		// listeners know what the state is. Need to determine if there are
		// any columns that are not visible but can be shown
		var collapsedClass = false;
		for ( i=0, ien=columns.length ; i<ien ; i++ ) {
			if ( columnsVis[i] === false && ! columns[i].never ) {
				collapsedClass = true;
				break;
			}
		}

		$( dt.table().node() ).toggleClass('collapsed', collapsedClass );

		dt.columns().eq(0).each( function ( colIdx, i ) {
			dt.column( colIdx ).visible( columnsVis[i] );
		} );
	},


	/**
	 * Determine the width of each column in the table so the auto column hiding
	 * has that information to work with. This method is never going to be 100%
	 * perfect since column widths can change slightly per page, but without
	 * seriously compromising performance this is quite effective.
	 *
	 * @private
	 */
	_resizeAuto: function ()
	{
		var dt = this.s.dt;
		var columns = this.s.columns;

		// Are we allowed to do auto sizing?
		if ( ! this.c.auto ) {
			return;
		}

		// Are there any columns that actually need auto-sizing, or do they all
		// have classes defined
		if ( $.inArray( true, $.map( columns, function (c) { return c.auto; } ) ) === -1 ) {
			return;
		}

		// Clone the table with the current data in it
		var tableWidth   = dt.table().node().offsetWidth;
		var columnWidths = dt.columns;
		var clonedTable  = dt.table().node().cloneNode( false );
		var clonedHeader = $( dt.table().header().cloneNode( false ) ).appendTo( clonedTable );
		var clonedBody   = $( dt.table().body().cloneNode( false ) ).appendTo( clonedTable );

		$( dt.table().footer() ).clone( false ).appendTo( clonedTable );

		// This is a bit slow, but we need to get a clone of each row that
		// includes all columns. As such, try to do this as little as possible.
		dt.rows( { page: 'current' } ).indexes().flatten().each( function ( idx ) {
			var clone = dt.row( idx ).node().cloneNode( true );
			
			if ( dt.columns( ':hidden' ).flatten().length ) {
				$(clone).append( dt.cells( idx, ':hidden' ).nodes().to$().clone() );
			}

			$(clone).appendTo( clonedBody );
		} );

		var cells = dt.columns().header().to$().clone( false );
		$('<tr/>')
			.append( cells )
			.appendTo( clonedHeader );

		// In the inline case extra padding is applied to the first column to
		// give space for the show / hide icon. We need to use this in the
		// calculation
		if ( this.c.details.type === 'inline' ) {
			$(clonedTable).addClass( 'dtr-inline collapsed' );
		}

		var inserted = $('<div/>')
			.css( {
				width: 1,
				height: 1,
				overflow: 'hidden'
			} )
			.append( clonedTable );

		// Remove columns which are not to be included
		inserted.find('th.never, td.never').remove();

		inserted.insertBefore( dt.table().node() );

		// The cloned header now contains the smallest that each column can be
		dt.columns().eq(0).each( function ( idx ) {
			columns[idx].minWidth = cells[ idx ].offsetWidth || 0;
		} );

		inserted.remove();
	}
};


/**
 * List of default breakpoints. Each item in the array is an object with two
 * properties:
 *
 * * `name` - the breakpoint name.
 * * `width` - the breakpoint width
 *
 * @name Responsive.breakpoints
 * @static
 */
Responsive.breakpoints = [
	{ name: 'desktop',  width: Infinity },
	{ name: 'tablet-l', width: 1024 },
	{ name: 'tablet-p', width: 768 },
	{ name: 'mobile-l', width: 480 },
	{ name: 'mobile-p', width: 320 }
];


/**
 * Responsive default settings for initialisation
 *
 * @namespace
 * @name Responsive.defaults
 * @static
 */
Responsive.defaults = {
	/**
	 * List of breakpoints for the instance. Note that this means that each
	 * instance can have its own breakpoints. Additionally, the breakpoints
	 * cannot be changed once an instance has been creased.
	 *
	 * @type {Array}
	 * @default Takes the value of `Responsive.breakpoints`
	 */
	breakpoints: Responsive.breakpoints,

	/**
	 * Enable / disable auto hiding calculations. It can help to increase
	 * performance slightly if you disable this option, but all columns would
	 * need to have breakpoint classes assigned to them
	 *
	 * @type {Boolean}
	 * @default  `true`
	 */
	auto: true,

	/**
	 * Details control. If given as a string value, the `type` property of the
	 * default object is set to that value, and the defaults used for the rest
	 * of the object - this is for ease of implementation.
	 *
	 * The object consists of the following properties:
	 *
	 * * `renderer` - function that is called for display of the child row data.
	 *   The default function will show the data from the hidden columns
	 * * `target` - Used as the selector for what objects to attach the child
	 *   open / close to
	 * * `type` - `false` to disable the details display, `inline` or `column`
	 *   for the two control types
	 *
	 * @type {Object|string}
	 */
	details: {
		renderer: function ( api, rowIdx ) {
			var data = api.cells( rowIdx, ':hidden' ).eq(0).map( function ( cell ) {
				var header = $( api.column( cell.column ).header() );
				var idx = api.cell( cell ).index();

				if ( header.hasClass( 'control' ) || header.hasClass( 'never' ) ) {
					return '';
				}

				// Use a non-public DT API method to render the data for display
				// This needs to be updated when DT adds a suitable method for
				// this type of data retrieval
				var dtPrivate = api.settings()[0];
				var cellData = dtPrivate.oApi._fnGetCellData(
					dtPrivate, idx.row, idx.column, 'display'
				);
				var title = header.text();
				if ( title ) {
					title = title + ':';
				}

				return '<li data-dtr-index="'+idx.column+'">'+
						'<span class="dtr-title">'+
							title+
						'</span> '+
						'<span class="dtr-data">'+
							cellData+
						'</span>'+
					'</li>';
			} ).toArray().join('');

			return data ?
				$('<ul data-dtr-index="'+rowIdx+'"/>').append( data ) :
				false;
		},

		target: 0,

		type: 'inline'
	}
};


/*
 * API
 */
var Api = $.fn.dataTable.Api;

// Doesn't do anything - work around for a bug in DT... Not documented
Api.register( 'responsive()', function () {
	return this;
} );

Api.register( 'responsive.index()', function ( li ) {
	li = $(li);

	return {
		column: li.data('dtr-index'),
		row:    li.parent().data('dtr-index')
	};
} );

Api.register( 'responsive.rebuild()', function () {
	return this.iterator( 'table', function ( ctx ) {
		if ( ctx._responsive ) {
			ctx._responsive._classLogic();
		}
	} );
} );

Api.register( 'responsive.recalc()', function () {
	return this.iterator( 'table', function ( ctx ) {
		if ( ctx._responsive ) {
			ctx._responsive._resizeAuto();
			ctx._responsive._resize();
		}
	} );
} );


/**
 * Version information
 *
 * @name Responsive.version
 * @static
 */
Responsive.version = '1.0.6';


$.fn.dataTable.Responsive = Responsive;
$.fn.DataTable.Responsive = Responsive;

// Attach a listener to the document which listens for DataTables initialisation
// events so we can automatically initialise
$(document).on( 'init.dt.dtr', function (e, settings, json) {
	if ( e.namespace !== 'dt' ) {
		return;
	}

	if ( $(settings.nTable).hasClass( 'responsive' ) ||
		 $(settings.nTable).hasClass( 'dt-responsive' ) ||
		 settings.oInit.responsive ||
		 DataTable.defaults.responsive
	) {
		var init = settings.oInit.responsive;

		if ( init !== false ) {
			new Responsive( settings, $.isPlainObject( init ) ? init : {}  );
		}
	}
} );

return Responsive;
}; // /factory


// Define as an AMD module if possible
if ( typeof define === 'function' && define.amd ) {
	define( ['jquery', 'datatables'], factory );
}
else if ( typeof exports === 'object' ) {
    // Node/CommonJS
    factory( require('jquery'), require('datatables') );
}
else if ( jQuery && !jQuery.fn.dataTable.Responsive ) {
	// Otherwise simply initialise as normal, stopping multiple evaluation
	factory( jQuery, jQuery.fn.dataTable );
}


})(window, document);
$(document).ready(function () {
  uploadImage();
  setBackgroundImage();
  $(document).on('click', '.btn-close', function() {
    $('#myModal').hide();
  });
})

$(function() {
  $(document).on('change', '.change_image_preview', {}, function() {
    readURL(this);
  });
});

function readURL(input) {
  var error_msg = 'File khng c ln hn 5mb'
  var max_size = 5242880;
  var html_error = '<span class="error form__item-error error_image">' + error_msg + '</span>';
  if (input.files[0].size > max_size) {
    $('.change_image_preview').val('');
    if ($('#error-img').hasClass('.error-msg')) {
      return $('.error-msg').html(error_msg);
    }
    return $('#error-img').html(html_error);
  }
  $('.image-preview-css').addClass('image-preview');
  $('#error-img').html("");
  var url = input.value;
  var ext = url.substring(url.lastIndexOf('.') + 1).toLowerCase();
  if (input.files && input.files[0] && ['gif', 'png', 'jpeg', 'jpg'].indexOf(ext) > -1) {
    var reader = new FileReader();
    reader.onload = function (e) {
      $('.image-preview').css('background-image', 'url(' + e.target.result + ')');
    };
    reader.readAsDataURL(input.files[0]);
  }
}

function setBackgroundImage() {
  $('.image-preview').css('background-image', 'url('+ $('.image-preview').data('background') +')');
}

function showPost(id_href) {
  var id = $(id_href).data()["id"];
  $.ajax({
    type: 'GET',
    url: '/admin/post/' + id
  });
}

function editPost(id_href) {
  var id = $(id_href).data()["id"];
  $.ajax({
    type: 'GET',
    url: '/admin/post/' + id + '/edit'
  });
}

function uploadImage() {
  $('#comment').froalaEditor({
    videoUpload: false,
    imageUploadMethod: 'POST',
    imageUploadURL: '/admin/attachment',
    imageUploadParam: 'attachment',
    imageUploadParams: {target_type: 'POST'},
    imageMaxSize: 5 * 1024 * 1024,
    imageAllowedTypes: ['jpeg', 'jpg', 'png'],
    imageManagerLoadURL: '/admin/attachment',
    toolbarButtons: ['fullscreen', 'bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'fontFamily', 'fontSize', '|',
      'color', 'emoticons', 'inlineStyle', 'paragraphStyle', '|', 'paragraphFormat', 'align', 'formatOL', 'formatUL', 'outdent', 'indent', '-',
      'insertLink', 'insertImage', 'insertVideo', 'insertTable', '|', 'quote', 'insertHR', 'undo', 'redo', 'clearFormatting', 'html']
  })
}
;
$(document).ready(function() {
  var html_iframe = '<iframe width="600" height="400" src="https://www.youtube.com/embed/';
  var after_iframe = '"></iframe>';
  add_iframe_url(html_iframe, after_iframe);
  iframe_url_index();
  add_code_image();
  $('.embed-video').change(function(){
    add_iframe_url(html_iframe, after_iframe);
  })
})

function youtube_parser(url){
  var regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;
  var match = url.match(regExp);
  return (match&&match[7].length==11)? match[7] : false;
}

function add_iframe_url(html_iframe, after_iframe) {
  if($('.embed-video').val()){
    full_iframe = html_iframe + youtube_parser($('.embed-video').val()) + after_iframe;
    $('.embeding-video').html(full_iframe);
    $('.show-video').show();
  } else {
    $('.embeding-video').html("");
    $('.show-video').hide();
  }
}

function iframe_url_index() {
  $('.show-video-url').each(function() {
    if($(this).attr('url')) {
      id_video = youtube_parser($(this).attr('url'));
      iframe_url = 'https://www.youtube.com/embed/' + id_video
      $(this).attr('src', iframe_url);
      $('.show-video-url').show();
    }else {
      $('.show-video-url').html("");
      $('.show-video-url').hide();
    }
  });
}

function add_code_image() {
  var before_img = "http://img.youtube.com/vi/"
  var after_img = "/0.jpg"
  var id_video = ""
  image_chil = $($('.video-url').children()).children()
  image_chil.each(function() {
    id_video = youtube_parser($(this).attr('url'));
    $(this).attr('code', id_video);
    src_img = before_img + id_video + after_img
    $(this).attr('src', src_img);
  });

}
;
/*!
 * froala_editor v2.7.6 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */


!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c)}:a(window.jQuery)}(function(a){var b=function(c,d){this.id=++a.FE.ID,this.opts=a.extend(!0,{},a.extend({},b.DEFAULTS,"object"==typeof d&&d));var e=JSON.stringify(this.opts);a.FE.OPTS_MAPPING[e]=a.FE.OPTS_MAPPING[e]||this.id,this.sid=a.FE.OPTS_MAPPING[e],a.FE.SHARED[this.sid]=a.FE.SHARED[this.sid]||{},this.shared=a.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=a(c),this.$oel.data("froala.editor",this),this.o_doc=c.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var f=a(this.o_win).scrollTop();this.$oel.on("froala.doInit",a.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=a(this.doc),this.$win=a(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(a.FE.PLUGINS)),this.opts.initOnClick?(this.load(a.FE.MODULES),this.$el.on("touchstart.init",function(){a(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){a(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",a.proxy(function(b){if("touchend"==b.type&&!this.$el.data("touched"))return!0;if(1===b.which||!b.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(a.FE.MODULES),this.load(a.FE.PLUGINS);var c=b.originalEvent&&b.originalEvent.originalTarget;c&&"IMG"==c.tagName&&a(c).trigger("mousedown"),"undefined"==typeof this.ul&&this.destroy(),"touchend"==b.type&&this.image&&b.originalEvent&&b.originalEvent.target&&a(b.originalEvent.target).is("img")&&setTimeout(a.proxy(function(){this.image.edit(a(b.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this)),this.events.trigger("initializationDelayed")):(this.load(a.FE.MODULES),this.load(a.FE.PLUGINS),a(this.o_win).scrollTop(f),"undefined"==typeof this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};b.DEFAULTS={initOnClick:!1,pluginsEnabled:null},b.MODULES={},b.PLUGINS={},b.VERSION="2.7.6",b.INSTANCES=[],b.OPTS_MAPPING={},b.SHARED={},b.ID=0,b.prototype._init=function(){var b=this.$oel.prop("tagName");this.$oel.closest("label").length>=1;var c=a.proxy(function(){"TEXTAREA"!=b&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=a('<iframe src="about:blank" frameBorder="0">'),this.$wp=a("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=a("<div></div>"),this.el=this.$el.get(0),this.$wp=a("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),d=a.proxy(function(){this.$box=a("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,a.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,a.proxy(function(){this.events.trigger("form.reset")},this)),c()},this),e=a.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),f=a.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),g=a.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(a){a.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?g():"TEXTAREA"==b?d():"A"==b?e():"IMG"==b?f():"BUTTON"==b||"INPUT"==b?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,g()):c()},b.prototype.load=function(b){for(var c in b)if(b.hasOwnProperty(c)){if(this[c])continue;if(a.FE.PLUGINS[c]&&this.opts.pluginsEnabled.indexOf(c)<0)continue;if(this[c]=new b[c](this),this[c]._init&&(this[c]._init(),this.opts.initOnClick&&"core"==c))return!1}},b.prototype.destroy=function(){this.shared.count--,this.events.$off();var b=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var c in this.shared)this.shared.hasOwnProperty(c)&&(null==this.shared[c],a.FE.SHARED[this.sid][c]=null);a.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(b),a.FE.INSTANCES.splice(a.FE.INSTANCES.indexOf(this),1)},a.fn.froalaEditor=function(c){for(var d=[],e=0;e<arguments.length;e++)d.push(arguments[e]);if("string"==typeof c){var f=[];return this.each(function(){var b=a(this),e=b.data("froala.editor");if(!e)return void 0;var g,h;if(c.indexOf(".")>0&&e[c.split(".")[0]]?(e[c.split(".")[0]]&&(g=e[c.split(".")[0]]),h=c.split(".")[1]):(g=e,h=c.split(".")[0]),!g[h])return a.error("Method "+c+" does not exist in Froala Editor.");var i=g[h].apply(e,d.slice(1));void 0===i?f.push(this):0===f.length&&f.push(i)}),1==f.length?f[0]:f}return"object"!=typeof c&&c?void 0:this.each(function(){var d=a(this).data("froala.editor");if(!d){var e=this;new b(e,c)}})},a.fn.froalaEditor.Constructor=b,a.FroalaEditor=b,a.FE=b,a.FE.XS=0,a.FE.SM=1,a.FE.MD=2,a.FE.LG=3;var c="a-z\\u0080-\\u009f\\u00a1-\\uffff0-9-_.";if(a.FE.LinkRegExCommon="["+c+"]{1,}",a.FE.LinkRegExEnd="((:[0-9]{1,5})|)(((\\/|\\?|#)[a-z\\u00a1-\\uffff0-9@?\\|!^=%&amp;/~+#-\\'*-_{}]*)|())",a.FE.LinkRegExTLD="(("+a.FE.LinkRegExCommon+")(\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))",a.FE.LinkRegExHTTP="((ftp|http|https):\\/\\/"+a.FE.LinkRegExCommon+")",a.FE.LinkRegExAuth="((ftp|http|https):\\/\\/[\\u0021-\\uffff]{1,}@"+a.FE.LinkRegExCommon+")",a.FE.LinkRegExWWW="(www\\."+a.FE.LinkRegExCommon+"\\.[a-z0-9-]{2,24})",a.FE.LinkRegEx="("+a.FE.LinkRegExTLD+"|"+a.FE.LinkRegExHTTP+"|"+a.FE.LinkRegExWWW+"|"+a.FE.LinkRegExAuth+")"+a.FE.LinkRegExEnd,a.FE.LinkProtocols=["mailto","tel","sms","notes","data"],a.FE.MAIL_REGEX=/.+@.+\..+/i,a.FE.MODULES.helpers=function(b){function c(){var a,b,c=-1;return"Microsoft Internet Explorer"==navigator.appName?(a=navigator.userAgent,b=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==b.exec(a)&&(c=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(a=navigator.userAgent,b=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==b.exec(a)&&(c=parseFloat(RegExp.$1))),c}function d(){var a={},b=c();if(b>0)a.msie=!0;else{var d=navigator.userAgent.toLowerCase(),e=/(edge)[ \/]([\w.]+)/.exec(d)||/(chrome)[ \/]([\w.]+)/.exec(d)||/(webkit)[ \/]([\w.]+)/.exec(d)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(d)||/(msie) ([\w.]+)/.exec(d)||d.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(d)||[],f={browser:e[1]||"",version:e[2]||"0"};e[1]&&(a[f.browser]=!0),a.chrome?a.webkit=!0:a.webkit&&(a.safari=!0)}return a.msie&&(a.version=b),a}function e(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!h()}function f(){return/(Android)/g.test(navigator.userAgent)&&!h()}function g(){return/(Blackberry)/g.test(navigator.userAgent)}function h(){return/(Windows Phone)/gi.test(navigator.userAgent)}function i(){return f()||e()||g()}function j(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}function k(a){return parseInt(a,10)||0}function l(){var b=a('<div class="fr-visibility-helper"></div>').appendTo("body:first");try{var c=k(b.css("margin-left"));return b.remove(),c}catch(d){return a.FE.LG}}function m(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function n(b){if(!/^(https?:|ftps?:|)\/\//i.test(b))return!1;b=String(b).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20");var c=new RegExp("^"+a.FE.LinkRegExHTTP+a.FE.LinkRegExEnd+"$","gi");return c.test(b)}function o(b){return/^(https?:|ftps?:|)\/\//i.test(b)?!1:a.FE.MAIL_REGEX.test(b)}function p(b){var c=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;return/^(https?:|ftps?:|)\/\//i.test(b)?b:c.test(b)?b:new RegExp("^("+a.FE.LinkProtocols.join("|")+"):\\/\\/","i").test(b)?b:b=encodeURIComponent(b).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}")}function q(a){return a&&!a.propertyIsEnumerable("length")&&"object"==typeof a&&"number"==typeof a.length}function r(a){function b(a){return("0"+parseInt(a,10).toString(16)).slice(-2)}try{return a&&"transparent"!==a?/^#[0-9A-F]{6}$/i.test(a)?a:(a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+b(a[1])+b(a[2])+b(a[3])).toUpperCase()):""}catch(c){return null}}function s(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?"rgb("+parseInt(c[1],16)+", "+parseInt(c[2],16)+", "+parseInt(c[3],16)+")":""}function t(c){var d=(c.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(d)<0){if(!B){var e=a('<div dir="'+("rtl"==b.opts.direction?"rtl":"auto")+'" style="text-align: '+b.$el.css("text-align")+'; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');a("body:first").append(e);var f=e.find("#s1").get(0).getBoundingClientRect().left,g=e.find("#s2").get(0).getBoundingClientRect().left;e.remove(),B=g>f?"left":"right"}d=B}return d}function u(){return null==C&&(C=navigator.platform.toUpperCase().indexOf("MAC")>=0),C}function v(){function a(a,b){var d=a[b];a[b]=function(a){var b,f=!1,g=!1;if(a&&a.match(e)){a=a.replace(e,""),this.parentNode||(c.appendChild(this),g=!0);var h=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),f=!0),b=d.call(h,"#"+this.id+" "+a),f&&(this.id=""),g&&c.removeChild(this),b}return d.call(this,a)}}var c=b.o_doc.createElement("div");try{c.querySelectorAll(":scope *")}catch(d){var e=/^\s*:scope/gi;a(Element.prototype,"querySelector"),a(Element.prototype,"querySelectorAll"),a(HTMLElement.prototype,"querySelector"),a(HTMLElement.prototype,"querySelectorAll")}}function w(){return b.o_win.pageYOffset?b.o_win.pageYOffset:b.o_doc.documentElement&&b.o_doc.documentElement.scrollTop?b.o_doc.documentElement.scrollTop:b.o_doc.body.scrollTop?b.o_doc.body.scrollTop:0}function x(){return b.o_win.pageXOffset?b.o_win.pageXOffset:b.o_doc.documentElement&&b.o_doc.documentElement.scrollLeft?b.o_doc.documentElement.scrollLeft:b.o_doc.body.scrollLeft?b.o_doc.body.scrollLeft:0}function y(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(a){var b=this,c=this;if(!c)return null;if(!document.documentElement.contains(b))return null;do{if(c.matches(a))return c;c=c.parentElement}while(null!==c);return null})}function z(a){var b=a.getBoundingClientRect();return b.top>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)||b.top<=0&&b.bottom>=(window.innerHeight||document.documentElement.clientHeight)}function A(){b.browser=d(),v(),y()}var B,C=null;return{_init:A,isIOS:e,isMac:u,isAndroid:f,isBlackberry:g,isWindowsPhone:h,isMobile:i,isEmail:o,requestAnimationFrame:j,getPX:k,screenSize:l,isTouch:m,sanitizeURL:p,isArray:q,RGBToHex:r,HEXtoRGB:s,isURL:n,getAlignment:t,scrollTop:w,scrollLeft:x,isInViewPort:z}},a.FE.MODULES.events=function(b){function c(a,b,c){s(a,b,c)}function d(){c(b.$el,"cut copy paste beforepaste",function(a){v(a.type,[a])})}function e(){c(b.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(a){v(a.type,[a])}),r("mousedown",function(){for(var c=0;c<a.FE.INSTANCES.length;c++)a.FE.INSTANCES[c]!=b&&a.FE.INSTANCES[c].popups&&a.FE.INSTANCES[c].popups.areVisible()&&a.FE.INSTANCES[c].$el.find(".fr-marker").remove()})}function f(){c(b.$el,"keydown keypress keyup input",function(a){v(a.type,[a])})}function g(){c(b.$win,b._mousedown,function(a){v("window.mousedown",[a]),n()}),c(b.$win,b._mouseup,function(a){v("window.mouseup",[a])}),c(b.$win,"cut copy keydown keyup touchmove touchend",function(a){v("window."+a.type,[a])})}function h(){c(b.$doc,"dragend drop",function(a){v("document."+a.type,[a])})}function i(c){var d;if("undefined"==typeof c&&(c=!0),!b.$wp)return!1;if(b.helpers.isIOS()&&b.$win.get(0).focus(),b.core.hasFocus())return!1;if(!b.core.hasFocus()&&c){var e=b.$win.scrollTop();if(b.browser.msie&&b.$box&&b.$box.css("position","fixed"),b.browser.msie&&b.$wp&&b.$wp.css("overflow","visible"),o(),b.$el.focus(),b.events.trigger("focus"),n(),b.browser.msie&&b.$box&&b.$box.css("position",""),b.browser.msie&&b.$wp&&b.$wp.css("overflow","auto"),e!=b.$win.scrollTop()&&b.$win.scrollTop(e),d=b.selection.info(b.el),!d.atStart)return!1}if(!b.core.hasFocus()||b.$el.find(".fr-marker").length>0)return!1;if(d=b.selection.info(b.el),d.atStart&&b.selection.isCollapsed()&&null!=b.html.defaultTag()){var f=b.markers.insert();if(f&&!b.node.blockParent(f)){a(f).remove();var g=b.$el.find(b.html.blockTagsQuery()).get(0);g&&(a(g).prepend(a.FE.MARKERS),b.selection.restore())}else f&&a(f).remove()}}function j(){c(b.$el,"focus",function(a){p()&&(i(!1),C===!1&&v(a.type,[a]))}),c(b.$el,"blur",function(a){p()&&C===!0&&(v(a.type,[a]),n())}),r("focus",function(){C=!0}),r("blur",function(){C=!1})}function k(){b.helpers.isMobile()?(b._mousedown="touchstart",b._mouseup="touchend",b._move="touchmove",b._mousemove="touchmove"):(b._mousedown="mousedown",b._mouseup="mouseup",b._move="",b._mousemove="mousemove")}function l(c){var d=a(c.currentTarget);return b.edit.isDisabled()||b.node.hasClass(d.get(0),"fr-disabled")?(c.preventDefault(),!1):"mousedown"===c.type&&1!==c.which?!0:(b.helpers.isMobile()||c.preventDefault(),(b.helpers.isAndroid()||b.helpers.isWindowsPhone())&&0===d.parents(".fr-dropdown-menu").length&&(c.preventDefault(),c.stopPropagation()),d.addClass("fr-selected"),void b.events.trigger("commands.mousedown",[d]))}function m(c,d){var e=a(c.currentTarget);if(b.edit.isDisabled()||b.node.hasClass(e.get(0),"fr-disabled"))return c.preventDefault(),!1;if("mouseup"===c.type&&1!==c.which)return!0;if(!b.node.hasClass(e.get(0),"fr-selected"))return!0;if("touchmove"!=c.type){if(c.stopPropagation(),c.stopImmediatePropagation(),c.preventDefault(),!b.node.hasClass(e.get(0),"fr-selected"))return b.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),!1;if(b.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),e.data("dragging")||e.attr("disabled"))return e.removeData("dragging"),!1;var f=e.data("timeout");f&&(clearTimeout(f),e.removeData("timeout")),d.apply(b,[c])}else e.data("timeout")||e.data("timeout",setTimeout(function(){e.data("dragging",!0)},100))}function n(){A=!0}function o(){A=!1}function p(){return A}function q(a,c,d){s(a,b._mousedown,c,function(a){b.edit.isDisabled()||l(a)},!0),s(a,b._mouseup+" "+b._move,c,function(a){b.edit.isDisabled()||m(a,d)},!0),s(a,"mousedown click mouseup",c,function(a){b.edit.isDisabled()||a.stopPropagation()},!0),r("window.mouseup",function(){b.edit.isDisabled()||(a.find(c).removeClass("fr-selected"),n())})}function r(a,c,d){var e=a.split(" ");if(e.length>1){for(var f=0;f<e.length;f++)r(e[f],c,d);return!0}"undefined"==typeof d&&(d=!1);var g;g=0!==a.indexOf("shared.")?B[a]=B[a]||[]:b.shared._events[a]=b.shared._events[a]||[],d?g.unshift(c):g.push(c)}function s(a,c,d,e,f){"function"==typeof d&&(f=e,e=d,d=!1);var g=f?b.shared.$_events:D,h=f?b.sid:b.id;d?a.on(c.split(" ").join(".ed"+h+" ")+".ed"+h,d,e):a.on(c.split(" ").join(".ed"+h+" ")+".ed"+h,e),g.push([a,c.split(" ").join(".ed"+h+" ")+".ed"+h])}function t(a){for(var b=0;b<a.length;b++)a[b][0].off(a[b][1])}function u(){t(D),D=[],0===b.shared.count&&(t(b.shared.$_events),b.shared.$_events=[])}function v(c,d,e){if(!b.edit.isDisabled()||e){var f;if(0!==c.indexOf("shared."))f=B[c];else{if(b.shared.count>0)return!1;f=b.shared._events[c]}var g;if(f)for(var h=0;h<f.length;h++)if(g=f[h].apply(b,d),g===!1)return!1;return g=b.$oel.triggerHandler("froalaEditor."+c,a.merge([b],d||[])),g===!1?!1:g}}function w(c,d,e){if(!b.edit.isDisabled()||e){var f;if(0!==c.indexOf("shared."))f=B[c];else{if(b.shared.count>0)return!1;f=b.shared._events[c]}var g;if(f)for(var h=0;h<f.length;h++)g=f[h].apply(b,[d]),"undefined"!=typeof g&&(d=g);return g=b.$oel.triggerHandler("froalaEditor."+c,a.merge([b],[d])),"undefined"!=typeof g&&(d=g),d}}function x(){for(var a in B)B.hasOwnProperty(a)&&delete B[a]}function y(){for(var a in b.shared._events)b.shared._events.hasOwnProperty(a)&&delete b.shared._events[a]}function z(){b.shared.$_events=b.shared.$_events||[],b.shared._events={},k(),e(),g(),h(),f(),j(),n(),d(),r("destroy",x),r("shared.destroy",y)}var A,B={},C=!1,D=[];return{_init:z,on:r,trigger:v,bindClick:q,disableBlur:o,enableBlur:n,blurActive:p,focus:i,chainTrigger:w,$on:s,$off:u}},a.FE.MODULES.node=function(b){function c(a){return a&&"IFRAME"!=a.tagName?Array.prototype.slice.call(a.childNodes||[]):[]}function d(b){return b?b.nodeType!=Node.ELEMENT_NODE?!1:a.FE.BLOCK_TAGS.indexOf(b.tagName.toLowerCase())>=0:!1}function e(a){return a?a.nodeType!=Node.ELEMENT_NODE?!1:"a"==a.tagName.toLowerCase():!1}function f(e,f){if(!e)return!0;if(e.querySelector("table"))return!1;var g=c(e);1==g.length&&d(g[0])&&(g=c(g[0]));for(var h=!1,i=0;i<g.length;i++){var j=g[i];if(!(f&&b.node.hasClass(j,"fr-marker")||j.nodeType==Node.TEXT_NODE&&0===j.textContent.length)){if("BR"!=j.tagName&&(j.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(h)return!1;"BR"==j.tagName&&(h=!0)}}return e.querySelectorAll(a.FE.VOID_ELEMENTS.join(",")).length-e.querySelectorAll("br").length?!1:e.querySelector(b.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")?!1:e.querySelectorAll(a.FE.BLOCK_TAGS.join(",")).length>1?!1:e.querySelector(b.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")?!1:!0}function g(a){for(;a&&a.parentNode!==b.el&&(!a.parentNode||!b.node.hasClass(a.parentNode,"fr-inner"));)if(a=a.parentNode,d(a))return a;return null}function h(c,e,f){if("undefined"==typeof e&&(e=[]),"undefined"==typeof f&&(f=!0),e.push(b.el),e.indexOf(c.parentNode)>=0||c.parentNode&&b.node.hasClass(c.parentNode,"fr-inner")||c.parentNode&&a.FE.SIMPLE_ENTER_TAGS.indexOf(c.parentNode.tagName)>=0&&f)return null;for(;e.indexOf(c.parentNode)<0&&c.parentNode&&!b.node.hasClass(c.parentNode,"fr-inner")&&(a.FE.SIMPLE_ENTER_TAGS.indexOf(c.parentNode.tagName)<0||!f)&&(!d(c)||!d(c.parentNode)||!f);)c=c.parentNode;return c}function i(a){var b={},c=a.attributes;if(c)for(var d=0;d<c.length;d++){var e=c[d];b[e.nodeName]=e.value}return b}function j(a){for(var b="",c=i(a),d=Object.keys(c).sort(),e=0;e<d.length;e++){var f=d[e],g=c[f];g.indexOf("'")<0&&g.indexOf('"')>=0?b+=" "+f+"='"+g+"'":g.indexOf('"')>=0&&g.indexOf("'")>=0?(g=g.replace(/"/g,"&quot;"),b+=" "+f+'="'+g+'"'):b+=" "+f+'="'+g+'"'}return b}function k(a){for(var b=a.attributes,c=b.length-1;c>=0;c--){var d=b[c];a.removeAttribute(d.nodeName)}}function l(a){return"<"+a.tagName.toLowerCase()+j(a)+">"}function m(a){return"</"+a.tagName.toLowerCase()+">"}function n(a,c){"undefined"==typeof c&&(c=!0);for(var d=a.previousSibling;d&&c&&b.node.hasClass(d,"fr-marker");)d=d.previousSibling;return d?d.nodeType==Node.TEXT_NODE&&""===d.textContent?n(d):!1:!0}function o(a,c){"undefined"==typeof c&&(c=!0);for(var d=a.nextSibling;d&&c&&b.node.hasClass(d,"fr-marker");)d=d.nextSibling;return d?d.nodeType==Node.TEXT_NODE&&""===d.textContent?o(d):!1:!0}function p(b){return b&&b.nodeType==Node.ELEMENT_NODE&&a.FE.VOID_ELEMENTS.indexOf((b.tagName||"").toLowerCase())>=0}function q(a){return a?["UL","OL"].indexOf(a.tagName)>=0:!1}function r(a){return a===b.el}function s(a){return a&&a.nodeType==Node.ELEMENT_NODE&&a.getAttribute("class")&&(a.getAttribute("class")||"").indexOf("fr-deletable")>=0}function t(a){return a===b.doc.activeElement&&(!b.doc.hasFocus||b.doc.hasFocus())&&!!(r(a)||a.type||a.href||~a.tabIndex)}function u(a){return(!a.getAttribute||"false"!=a.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(a.tagName)<0}function v(b,c){return b instanceof a&&(b=b.get(0)),b&&b.classList&&b.classList.contains(c)}function w(a){return b.browser.msie?a:{acceptNode:a}}return{isBlock:d,isEmpty:f,blockParent:g,deepestParent:h,rawAttributes:i,attributes:j,clearAttributes:k,openTagString:l,closeTagString:m,isFirstSibling:n,isLastSibling:o,isList:q,isLink:e,isElement:r,contents:c,isVoid:p,hasFocus:t,isEditable:u,isDeletable:s,hasClass:v,filter:w}},a.FE.INVISIBLE_SPACE="&#8203;",a.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+a.FE.INVISIBLE_SPACE+"</span>",a.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+a.FE.INVISIBLE_SPACE+"</span>",a.FE.MARKERS=a.FE.START_MARKER+a.FE.END_MARKER,a.FE.MODULES.markers=function(b){function c(c,d){return a('<span class="fr-marker" data-id="'+d+'" data-type="'+c+'" style="display: '+(b.browser.safari?"none":"inline-block")+'; line-height: 0;">'+a.FE.INVISIBLE_SPACE+"</span>",b.doc)[0]}function d(d,e,f){var g,h,i;try{var j=d.cloneRange();if(j.collapse(e),j.insertNode(c(e,f)),e===!0)for(g=b.$el.find('span.fr-marker[data-type="true"][data-id="'+f+'"]').get(0),i=g.nextSibling;i&&i.nodeType===Node.TEXT_NODE&&0===i.textContent.length;)a(i).remove(),i=g.nextSibling;if(e===!0&&!d.collapsed){for(;!b.node.isElement(g.parentNode)&&!i;)a(g.parentNode).after(g),i=g.nextSibling;if(i&&i.nodeType===Node.ELEMENT_NODE&&b.node.isBlock(i)){h=[i];do i=h[0],h=b.node.contents(i);while(h[0]&&b.node.isBlock(h[0]));a(i).prepend(a(g))}}if(e===!1&&!d.collapsed){if(g=b.$el.find('span.fr-marker[data-type="false"][data-id="'+f+'"]').get(0),i=g.previousSibling,i&&i.nodeType===Node.ELEMENT_NODE&&b.node.isBlock(i)){h=[i];do i=h[h.length-1],h=b.node.contents(i);while(h[h.length-1]&&b.node.isBlock(h[h.length-1]));a(i).append(a(g))}g.parentNode&&["TD","TH"].indexOf(g.parentNode.tagName)>=0&&g.parentNode.previousSibling&&!g.previousSibling&&a(g.parentNode.previousSibling).append(g)}var k=b.$el.find('span.fr-marker[data-type="'+e+'"][data-id="'+f+'"]').get(0);return k&&(k.style.display="none"),k}catch(l){return null}}function e(){if(!b.$wp)return null;try{var c=b.selection.ranges(0),d=c.commonAncestorContainer;if(d!=b.el&&0===b.$el.find(d).length)return null;var e=c.cloneRange(),f=c.cloneRange();e.collapse(!0);var g=a('<span class="fr-marker" style="display: none; line-height: 0;">'+a.FE.INVISIBLE_SPACE+"</span>",b.doc)[0];if(e.insertNode(g),g=b.$el.find("span.fr-marker").get(0)){for(var h=g.nextSibling;h&&h.nodeType===Node.TEXT_NODE&&0===h.textContent.length;)a(h).remove(),h=b.$el.find("span.fr-marker").get(0).nextSibling;return b.selection.clear(),b.selection.get().addRange(f),g}return null}catch(i){}}function f(){b.selection.isCollapsed()||b.selection.remove();var c=b.$el.find(".fr-marker").get(0);if(null==c&&(c=e()),null==c)return null;var d=b.node.deepestParent(c);if(d||(d=b.node.blockParent(c),d&&"LI"!=d.tagName&&(d=null)),d)if(b.node.isBlock(d)&&b.node.isEmpty(d))"LI"!=d.tagName||d.parentNode.firstElementChild!=d||b.node.isEmpty(d.parentNode)?a(d).replaceWith('<span class="fr-marker"></span>'):a(d).append('<span class="fr-marker"></span>');else if(b.cursor.isAtStart(c,d))a(d).before('<span class="fr-marker"></span>'),a(c).remove();else if(b.cursor.isAtEnd(c,d))a(d).after('<span class="fr-marker"></span>'),a(c).remove();else{var f=c,g="",h="";do f=f.parentNode,g+=b.node.closeTagString(f),h=b.node.openTagString(f)+h;while(f!=d);a(c).replaceWith('<span id="fr-break"></span>');var i=b.node.openTagString(d)+a(d).html()+b.node.closeTagString(d);i=i.replace(/<span id="fr-break"><\/span>/g,g+'<span class="fr-marker"></span>'+h),a(d).replaceWith(i)}return b.$el.find(".fr-marker").get(0)}function g(a){var c=a.clientX,d=a.clientY;h();var f,g=null;if("undefined"!=typeof b.doc.caretPositionFromPoint?(f=b.doc.caretPositionFromPoint(c,d),g=b.doc.createRange(),g.setStart(f.offsetNode,f.offset),g.setEnd(f.offsetNode,f.offset)):"undefined"!=typeof b.doc.caretRangeFromPoint&&(f=b.doc.caretRangeFromPoint(c,d),g=b.doc.createRange(),g.setStart(f.startContainer,f.startOffset),g.setEnd(f.startContainer,f.startOffset)),null!==g&&"undefined"!=typeof b.win.getSelection){var i=b.win.getSelection();i.removeAllRanges(),i.addRange(g)}else if("undefined"!=typeof b.doc.body.createTextRange)try{g=b.doc.body.createTextRange(),g.moveToPoint(c,d);var j=g.duplicate();j.moveToPoint(c,d),g.setEndPoint("EndToEnd",j),g.select()}catch(k){return!1}e()}function h(){b.$el.find(".fr-marker").remove()}return{place:d,insert:e,split:f,insertAtPoint:g,remove:h}},a.FE.MODULES.selection=function(b){function c(){var a="";return b.win.getSelection?a=b.win.getSelection():b.doc.getSelection?a=b.doc.getSelection():b.doc.selection&&(a=b.doc.selection.createRange().text),a.toString()}function d(){var a="";return a=b.win.getSelection?b.win.getSelection():b.doc.getSelection?b.doc.getSelection():b.doc.selection.createRange()}function e(a){var c=d(),e=[];if(c&&c.getRangeAt&&c.rangeCount){e=[];for(var f=0;f<c.rangeCount;f++)e.push(c.getRangeAt(f))}else e=b.doc.createRange?[b.doc.createRange()]:[];return"undefined"!=typeof a?e[a]:e}function f(){var a=d();try{a.removeAllRanges?a.removeAllRanges():a.empty?a.empty():a.clear&&a.clear()}catch(b){}}function g(){var f=d();try{if(f.rangeCount){var g,h=e(0),i=h.startContainer;if(i.nodeType==Node.TEXT_NODE&&h.startOffset==(i.textContent||"").length&&i.nextSibling&&(i=i.nextSibling),i.nodeType==Node.ELEMENT_NODE){var j=!1;if(i.childNodes.length>0&&i.childNodes[h.startOffset]){for(g=i.childNodes[h.startOffset];g&&g.nodeType==Node.TEXT_NODE&&0===g.textContent.length;)g=g.nextSibling;if(g&&g.textContent.replace(/\u200B/g,"")===c().replace(/\u200B/g,"")&&(i=g,j=!0),!j&&i.childNodes.length>1&&h.startOffset>0&&i.childNodes[h.startOffset-1]){for(g=i.childNodes[h.startOffset-1];g&&g.nodeType==Node.TEXT_NODE&&0===g.textContent.length;)g=g.nextSibling;g&&g.textContent.replace(/\u200B/g,"")===c().replace(/\u200B/g,"")&&(i=g,j=!0)}}else!h.collapsed&&i.nextSibling&&i.nextSibling.nodeType==Node.ELEMENT_NODE&&(g=i.nextSibling,g&&g.textContent.replace(/\u200B/g,"")===c().replace(/\u200B/g,"")&&(i=g,j=!0));!j&&i.childNodes.length>0&&a(i.childNodes[0]).text().replace(/\u200B/g,"")===c().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(i.childNodes[0].tagName)<0&&(i=i.childNodes[0])}for(;i.nodeType!=Node.ELEMENT_NODE&&i.parentNode;)i=i.parentNode;for(var k=i;k&&"HTML"!=k.tagName;){if(k==b.el)return i;k=a(k).parent()[0]}}}catch(l){}return b.el}function h(){var f=d();try{if(f.rangeCount){var g,h=e(0),i=h.endContainer;if(i.nodeType==Node.ELEMENT_NODE){var j=!1;i.childNodes.length>0&&i.childNodes[h.endOffset]&&a(i.childNodes[h.endOffset]).text()===c()?(i=i.childNodes[h.endOffset],j=!0):!h.collapsed&&i.previousSibling&&i.previousSibling.nodeType==Node.ELEMENT_NODE?(g=i.previousSibling,g&&g.textContent.replace(/\u200B/g,"")===c().replace(/\u200B/g,"")&&(i=g,j=!0)):!h.collapsed&&i.childNodes.length>0&&i.childNodes[h.endOffset]&&(g=i.childNodes[h.endOffset].previousSibling,g.nodeType==Node.ELEMENT_NODE&&g&&g.textContent.replace(/\u200B/g,"")===c().replace(/\u200B/g,"")&&(i=g,j=!0)),!j&&i.childNodes.length>0&&a(i.childNodes[i.childNodes.length-1]).text()===c()&&["BR","IMG","HR"].indexOf(i.childNodes[i.childNodes.length-1].tagName)<0&&(i=i.childNodes[i.childNodes.length-1])}for(i.nodeType==Node.TEXT_NODE&&0===h.endOffset&&i.previousSibling&&i.previousSibling.nodeType==Node.ELEMENT_NODE&&(i=i.previousSibling);i.nodeType!=Node.ELEMENT_NODE&&i.parentNode;)i=i.parentNode;for(var k=i;k&&"HTML"!=k.tagName;){if(k==b.el)return i;k=a(k).parent()[0]}}}catch(l){}return b.el}function i(a,b){var c=a;return c.nodeType==Node.ELEMENT_NODE&&c.childNodes.length>0&&c.childNodes[b]&&(c=c.childNodes[b]),c.nodeType==Node.TEXT_NODE&&(c=c.parentNode),c}function j(){var c,f=[],g=d();if(u()&&g.rangeCount){var h=e();for(c=0;c<h.length;c++){var j,k=h[c],l=i(k.startContainer,k.startOffset),m=i(k.endContainer,k.endOffset);(b.node.isBlock(l)||b.node.hasClass(l,"fr-inner"))&&f.indexOf(l)<0&&f.push(l),j=b.node.blockParent(l),j&&f.indexOf(j)<0&&f.push(j);for(var n=[],o=l;o!==m&&o!==b.el;)n.indexOf(o)<0&&o.children&&o.children.length?(n.push(o),o=o.children[0]):o.nextSibling?o=o.nextSibling:o.parentNode&&(o=o.parentNode,n.push(o)),b.node.isBlock(o)&&n.indexOf(o)<0&&f.indexOf(o)<0&&(o!==m||k.endOffset>0)&&f.push(o);b.node.isBlock(m)&&f.indexOf(m)<0&&k.endOffset>0&&f.push(m),j=b.node.blockParent(m),j&&f.indexOf(j)<0&&f.push(j)}}for(c=f.length-1;c>0;c--)a(f[c]).find(f).length&&f.splice(c,1);return f}function k(){if(b.$wp){b.markers.remove();var c,d,f=e(),g=[];for(d=0;d<f.length;d++)if(f[d].startContainer!==b.doc||b.browser.msie){c=f[d];var h=c.collapsed,i=b.markers.place(c,!0,d),j=b.markers.place(c,!1,d);"undefined"!=typeof i&&i||!h||(a(".fr-marker").remove(),b.selection.setAtEnd(b.el)),b.el.normalize(),b.browser.safari&&!h&&(c=b.doc.createRange(),c.setStartAfter(i),c.setEndBefore(j),g.push(c))}if(b.browser.safari&&g.length)for(b.selection.clear(),d=0;d<g.length;d++)b.selection.get().addRange(g[d])}}function l(){var c,e=b.el.querySelectorAll('.fr-marker[data-type="true"]');if(!b.$wp)return b.markers.remove(),!1;if(0===e.length)return!1;if(b.browser.msie||b.browser.edge)for(c=0;c<e.length;c++)e[c].style.display="inline-block";b.core.hasFocus()||b.browser.msie||b.browser.webkit||b.$el.focus(),f();var g=d();for(c=0;c<e.length;c++){var h=a(e[c]).data("id"),i=e[c],j=b.doc.createRange(),k=b.$el.find('.fr-marker[data-type="false"][data-id="'+h+'"]');(b.browser.msie||b.browser.edge)&&k.css("display","inline-block");var l=null;if(k.length>0){k=k[0];try{for(var n,o=!1,p=i.nextSibling;p&&p.nodeType==Node.TEXT_NODE&&0===p.textContent.length;)n=p,p=p.nextSibling,a(n).remove();for(var q=k.nextSibling;q&&q.nodeType==Node.TEXT_NODE&&0===q.textContent.length;)n=q,q=q.nextSibling,a(n).remove();if(i.nextSibling==k||k.nextSibling==i){for(var r=i.nextSibling==k?i:k,s=r==i?k:i,t=r.previousSibling;t&&t.nodeType==Node.TEXT_NODE&&0===t.length;)n=t,t=t.previousSibling,a(n).remove();if(t&&t.nodeType==Node.TEXT_NODE)for(;t&&t.previousSibling&&t.previousSibling.nodeType==Node.TEXT_NODE;)t.previousSibling.textContent=t.previousSibling.textContent+t.textContent,t=t.previousSibling,a(t.nextSibling).remove();for(var u=s.nextSibling;u&&u.nodeType==Node.TEXT_NODE&&0===u.length;)n=u,u=u.nextSibling,a(n).remove();if(u&&u.nodeType==Node.TEXT_NODE)for(;u&&u.nextSibling&&u.nextSibling.nodeType==Node.TEXT_NODE;)u.nextSibling.textContent=u.textContent+u.nextSibling.textContent,
u=u.nextSibling,a(u.previousSibling).remove();if(t&&(b.node.isVoid(t)||b.node.isBlock(t))&&(t=null),u&&(b.node.isVoid(u)||b.node.isBlock(u))&&(u=null),t&&u&&t.nodeType==Node.TEXT_NODE&&u.nodeType==Node.TEXT_NODE){a(i).remove(),a(k).remove();var v=t.textContent.length;t.textContent=t.textContent+u.textContent,a(u).remove(),b.spaces.normalize(t),j.setStart(t,v),j.setEnd(t,v),o=!0}else!t&&u&&u.nodeType==Node.TEXT_NODE?(a(i).remove(),a(k).remove(),b.spaces.normalize(u),l=a(b.doc.createTextNode("\u200b")),a(u).before(l),j.setStart(u,0),j.setEnd(u,0),o=!0):!u&&t&&t.nodeType==Node.TEXT_NODE&&(a(i).remove(),a(k).remove(),b.spaces.normalize(t),l=a(b.doc.createTextNode("\u200b")),a(t).after(l),j.setStart(t,t.textContent.length),j.setEnd(t,t.textContent.length),o=!0)}if(!o){var w,x;(b.browser.chrome||b.browser.edge)&&i.nextSibling==k?(w=m(k,j,!0)||j.setStartAfter(k),x=m(i,j,!1)||j.setEndBefore(i)):(i.previousSibling==k&&(i=k,k=i.nextSibling),k.nextSibling&&"BR"===k.nextSibling.tagName||!k.nextSibling&&b.node.isBlock(i.previousSibling)||i.previousSibling&&"BR"==i.previousSibling.tagName||(i.style.display="inline",k.style.display="inline",l=a(b.doc.createTextNode("\u200b"))),w=m(i,j,!0)||a(i).before(l)&&j.setStartBefore(i),x=m(k,j,!1)||a(k).after(l)&&j.setEndAfter(k)),"function"==typeof w&&w(),"function"==typeof x&&x()}}catch(y){}}l&&l.remove();try{g.addRange(j)}catch(y){}}b.markers.remove()}function m(c,d,e){var f,g=c.previousSibling,h=c.nextSibling;return g&&h&&g.nodeType==Node.TEXT_NODE&&h.nodeType==Node.TEXT_NODE?(f=g.textContent.length,e?(h.textContent=g.textContent+h.textContent,a(g).remove(),a(c).remove(),b.spaces.normalize(h),function(){d.setStart(h,f)}):(g.textContent=g.textContent+h.textContent,a(h).remove(),a(c).remove(),b.spaces.normalize(g),function(){d.setEnd(g,f)})):g&&!h&&g.nodeType==Node.TEXT_NODE?(f=g.textContent.length,e?(b.spaces.normalize(g),function(){d.setStart(g,f)}):(b.spaces.normalize(g),function(){d.setEnd(g,f)})):h&&!g&&h.nodeType==Node.TEXT_NODE?e?(b.spaces.normalize(h),function(){d.setStart(h,0)}):(b.spaces.normalize(h),function(){d.setEnd(h,0)}):!1}function n(){for(var c=b.$el.find(".fr-marker"),d=0;d<c.length;d++)if(a(c[d]).parentsUntil('.fr-element, [contenteditable="true"]','[contenteditable="false"]').length)return!1;return!0}function o(){for(var a=e(),b=0;b<a.length;b++)if(!a[b].collapsed)return!1;return!0}function p(a){var c,d,e=!1,f=!1;if(b.win.getSelection){var g=b.win.getSelection();g.rangeCount&&(c=g.getRangeAt(0),d=c.cloneRange(),d.selectNodeContents(a),d.setEnd(c.startContainer,c.startOffset),e=""===d.toString(),d.selectNodeContents(a),d.setStart(c.endContainer,c.endOffset),f=""===d.toString())}else b.doc.selection&&"Control"!=b.doc.selection.type&&(c=b.doc.selection.createRange(),d=c.duplicate(),d.moveToElementText(a),d.setEndPoint("EndToStart",c),e=""===d.text,d.moveToElementText(a),d.setEndPoint("StartToEnd",c),f=""===d.text);return{atStart:e,atEnd:f}}function q(){if(o())return!1;var c,d=b.el.querySelectorAll("td, th, img, br");for(c=0;c<d.length;c++)d[c].nextSibling&&(d[c].innerHTML='<span class="fr-mk">'+a.FE.INVISIBLE_SPACE+"</span>"+d[c].innerHTML);var e=!1,f=p(b.el);for(f.atStart&&f.atEnd&&(e=!0),d=b.el.querySelectorAll(".fr-mk"),c=0;c<d.length;c++)d[c].parentNode.removeChild(d[c]);return e}function r(c,d){"undefined"==typeof d&&(d=!0);var e=a(c).html();e&&e.replace(/\u200b/g,"").length!=e.length&&a(c).html(e.replace(/\u200b/g,""));for(var f=b.node.contents(c),g=0;g<f.length;g++)f[g].nodeType!=Node.ELEMENT_NODE?a(f[g]).remove():(r(f[g],0===g),0===g&&(d=!1));c.nodeType==Node.TEXT_NODE?a(c).replaceWith('<span data-first="true" data-text="true"></span>'):d&&a(c).attr("data-first",!0)}function s(){return 0===a(this).find("fr-inner").length}function t(c,d){var e=b.node.contents(c.get(0));["TD","TH"].indexOf(c.get(0).tagName)>=0&&1==c.find(".fr-marker").length&&b.node.hasClass(e[0],"fr-marker")&&c.attr("data-del-cell",!0);for(var f=0;f<e.length;f++){var g=e[f];b.node.hasClass(g,"fr-marker")?d=(d+1)%2:d?a(g).find(".fr-marker").length>0?d=t(a(g),d):["TD","TH"].indexOf(g.tagName)<0&&!b.node.hasClass(g,"fr-inner")?!b.opts.keepFormatOnDelete||b.$el.find("[data-first]").length>0||b.node.isVoid(g)?a(g).remove():r(g):b.node.hasClass(g,"fr-inner")?0===a(g).find(".fr-inner").length?a(g).html("<br>"):a(g).find(".fr-inner").filter(s).html("<br>"):(a(g).empty(),a(g).attr("data-del-cell",!0)):a(g).find(".fr-marker").length>0&&(d=t(a(g),d))}return d}function u(){try{if(!b.$wp)return!1;for(var a=e(0),c=a.commonAncestorContainer;c&&!b.node.isElement(c);)c=c.parentNode;return b.node.isElement(c)?!0:!1}catch(d){return!1}}function v(){if(o())return!0;var c;k();var d=function(b){for(var c=b.previousSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;){var d=c;c=c.previousSibling,a(d).remove()}return c},e=function(b){for(var c=b.nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;){var d=c;c=c.nextSibling,a(d).remove()}return c},f=b.$el.find('.fr-marker[data-type="true"]');for(c=0;c<f.length;c++)for(var g=f[c];!(d(g)||b.node.isBlock(g.parentNode)||b.$el.is(g.parentNode)||b.node.hasClass(g.parentNode,"fr-inner"));)a(g.parentNode).before(g);var h=b.$el.find('.fr-marker[data-type="false"]');for(c=0;c<h.length;c++){for(var i=h[c];!(e(i)||b.node.isBlock(i.parentNode)||b.$el.is(i.parentNode)||b.node.hasClass(i.parentNode,"fr-inner"));)a(i.parentNode).after(i);i.parentNode&&b.node.isBlock(i.parentNode)&&b.node.isEmpty(i.parentNode)&&!b.$el.is(i.parentNode)&&!b.node.hasClass(i.parentNode,"fr-inner")&&b.opts.keepFormatOnDelete&&a(i.parentNode).after(i)}if(n()){t(b.$el,0);var j=b.$el.find('[data-first="true"]');if(j.length)b.$el.find(".fr-marker").remove(),j.append(a.FE.INVISIBLE_SPACE+a.FE.MARKERS).removeAttr("data-first"),j.attr("data-text")&&j.replaceWith(j.html());else for(b.$el.find("table").filter(function(){var b=a(this).find("[data-del-cell]").length>0&&a(this).find("[data-del-cell]").length==a(this).find("td, th").length;return b}).remove(),b.$el.find("[data-del-cell]").removeAttr("data-del-cell"),f=b.$el.find('.fr-marker[data-type="true"]'),c=0;c<f.length;c++){var m=f[c],p=m.nextSibling,q=b.$el.find('.fr-marker[data-type="false"][data-id="'+a(m).data("id")+'"]').get(0);if(q){if(m&&(!p||p!=q)){var r=b.node.blockParent(m),s=b.node.blockParent(q),u=!1,v=!1;if(r&&["UL","OL"].indexOf(r.tagName)>=0&&(r=null,u=!0),s&&["UL","OL"].indexOf(s.tagName)>=0&&(s=null,v=!0),a(m).after(q),r!=s)if(null!=r||u)if(null!=s||v||0!==a(r).parentsUntil(b.$el,"table").length)r&&s&&0===a(r).parentsUntil(b.$el,"table").length&&0===a(s).parentsUntil(b.$el,"table").length&&0===a(r).find(s).length&&0===a(s).find(r).length&&(a(r).append(a(s).html()),a(s).remove());else{for(p=r;!p.nextSibling&&p.parentNode!=b.el;)p=p.parentNode;for(p=p.nextSibling;p&&"BR"!=p.tagName;){var w=p.nextSibling;a(r).append(p),p=w}p&&"BR"==p.tagName&&a(p).remove()}else{var x=b.node.deepestParent(m);x?(a(x).after(a(s).html()),a(s).remove()):0===a(s).parentsUntil(b.$el,"table").length&&(a(m).next().after(a(s).html()),a(s).remove())}}}else q=a(m).clone().attr("data-type",!1),a(m).after(q)}}b.opts.keepFormatOnDelete||b.html.fillEmptyBlocks(),b.html.cleanEmptyTags(!0),b.clean.lists(),b.opts.htmlUntouched||b.spaces.normalize();var y=b.$el.find(".fr-marker:last").get(0),z=b.$el.find(".fr-marker:first").get(0);"undefined"!=typeof y&&"undefined"!=typeof z&&!y.nextSibling&&z.previousSibling&&"BR"==z.previousSibling.tagName&&b.node.isElement(y.parentNode)&&b.node.isElement(z.parentNode)&&b.$el.append("<br>"),l()}function w(c,d){if(!c||c.getElementsByClassName("fr-marker").length>0)return!1;for(var e=c.firstChild;e&&(b.node.isBlock(e)||d&&!b.node.isVoid(e)&&e.nodeType==Node.ELEMENT_NODE);)c=e,e=e.firstChild;c.innerHTML=a.FE.MARKERS+c.innerHTML}function x(c,d){if(!c||c.getElementsByClassName("fr-marker").length>0)return!1;for(var e=c.lastChild;e&&(b.node.isBlock(e)||d&&!b.node.isVoid(e)&&e.nodeType==Node.ELEMENT_NODE);)c=e,e=e.lastChild;var f=b.doc.createElement("SPAN");f.setAttribute("id","fr-sel-markers"),f.innerHTML=a.FE.MARKERS,c.appendChild(f);var g=c.querySelector("#fr-sel-markers");g.outerHTML=g.innerHTML}function y(c,d){"undefined"==typeof d&&(d=!0);for(var e=c.previousSibling;e&&e.nodeType==Node.TEXT_NODE&&0===e.textContent.length;)e=e.previousSibling;return e?(b.node.isBlock(e)?x(e):"BR"==e.tagName?a(e).before(a.FE.MARKERS):a(e).after(a.FE.MARKERS),!0):d?(b.node.isBlock(c)?w(c):a(c).before(a.FE.MARKERS),!0):!1}function z(c,d){"undefined"==typeof d&&(d=!0);for(var e=c.nextSibling;e&&e.nodeType==Node.TEXT_NODE&&0===e.textContent.length;)e=e.nextSibling;return e?(b.node.isBlock(e)?w(e):a(e).before(a.FE.MARKERS),!0):d?(b.node.isBlock(c)?x(c):a(c).after(a.FE.MARKERS),!0):!1}return{text:c,get:d,ranges:e,clear:f,element:g,endElement:h,save:k,restore:l,isCollapsed:o,isFull:q,inEditor:u,remove:v,blocks:j,info:p,setAtEnd:x,setAtStart:w,setBefore:y,setAfter:z,rangeElement:i}},a.extend(a.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","muted","name","novalidate","open","optimum","pattern","ping","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),a.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},a.FE.MODULES.clean=function(b){function c(a){if(a.nodeType==Node.ELEMENT_NODE&&a.getAttribute("class")&&a.getAttribute("class").indexOf("fr-marker")>=0)return!1;var d,e=b.node.contents(a),f=[];for(d=0;d<e.length;d++)e[d].nodeType!=Node.ELEMENT_NODE||b.node.isVoid(e[d])?e[d].nodeType==Node.TEXT_NODE&&(e[d].textContent=e[d].textContent.replace(/\u200b/g,"")):e[d].textContent.replace(/\u200b/g,"").length!=e[d].textContent.length&&c(e[d]);if(a.nodeType==Node.ELEMENT_NODE&&!b.node.isVoid(a)&&(a.normalize(),e=b.node.contents(a),f=a.querySelectorAll(".fr-marker"),e.length-f.length===0)){for(d=0;d<e.length;d++)if((e[d].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(d=0;d<f.length;d++)a.parentNode.insertBefore(f[d].cloneNode(!0),a);return a.parentNode.removeChild(a),!1}}function d(a,c){if(a.nodeType==Node.COMMENT_NODE)return"<!--"+a.nodeValue+"-->";if(a.nodeType==Node.TEXT_NODE)return c?a.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"");if(a.nodeType!=Node.ELEMENT_NODE)return a.outerHTML;if(a.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","NOSCRIPT"].indexOf(a.tagName)>=0)return a.outerHTML;if(a.nodeType==Node.ELEMENT_NODE&&"svg"==a.tagName){var e=document.createElement("div"),f=a.cloneNode(!0);return e.appendChild(f),e.innerHTML}if("IFRAME"==a.tagName)return a.outerHTML.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");var g=a.childNodes;if(0===g.length)return a.outerHTML;for(var h="",i=0;i<g.length;i++)"PRE"==a.tagName&&(c=!0),h+=d(g[i],c);return b.node.openTagString(a)+h+b.node.closeTagString(a)}function e(a){return I=[],a=a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(a){return I.push(a),"[FROALA.EDITOR.SCRIPT "+(I.length-1)+"]"}),a=a.replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,function(a){return I.push(a),"[FROALA.EDITOR.NOSCRIPT "+(I.length-1)+"]"}),a=a.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function f(a){return a=a.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(a,c){return b.opts.htmlRemoveTags.indexOf("script")>=0?"":I[parseInt(c,10)]}),a=a.replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,function(a,c){return b.opts.htmlRemoveTags.indexOf("noscript")>=0?"":I[parseInt(c,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}),a=a.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function g(a){var b=a.replace(/;;/gi,";");return b=b.replace(/^;/gi,""),";"!=b.charAt(b.length)&&(b+=";"),b}function h(a){var c;for(c in a)if(a.hasOwnProperty(c)){var d=c.match(G),e=null;"style"==c&&b.opts.htmlAllowedStyleProps.length&&(e=a[c].match(H)),d&&e?a[c]=g(e.join(";")):(!d||"style"==c&&!e)&&delete a[c]}for(var f="",h=Object.keys(a).sort(),i=0;i<h.length;i++)c=h[i],f+=a[c].indexOf('"')<0?" "+c+'="'+a[c]+'"':" "+c+"='"+a[c]+"'";return f}function i(a,c,d){if(b.opts.fullPage){var e=b.html.extractDoctype(d),f=h(b.html.extractNodeAttrs(d,"html"));c=null==c?b.html.extractNode(d,"head")||"<title></title>":c;var g=h(b.html.extractNodeAttrs(d,"head")),i=h(b.html.extractNodeAttrs(d,"body"));return e+"<html"+f+"><head"+g+">"+c+"</head><body"+i+">"+a+"</body></html>"}return a}function j(a,c){var e,f=document.implementation.createHTMLDocument("Froala DOC"),g=f.createElement("DIV");g.innerHTML=a;var h="";if(g){var i=b.node.contents(g);for(e=0;e<i.length;e++)c(i[e]);for(i=b.node.contents(g),e=0;e<i.length;e++)h+=d(i[e])}return h}function k(a,c,d){a=e(a);var g=a,h=null;b.opts.fullPage&&(g=b.html.extractNode(a,"body")||(a.indexOf("<body")>=0?"":a),d&&(h=b.html.extractNode(a,"head")||"")),g=j(g,c),h&&(h=j(h,c));var k=i(g,h,a);return f(k)}function l(a){return a.replace(/\u200b/g,"").length==a.length?a:b.clean.exec(a,c)}function m(){var c=b.el.querySelectorAll(Object.keys(a.FE.HTML5Map).join(","));if(c.length){var d=!1;b.el.querySelector(".fr-marker")||(b.selection.save(),d=!0);for(var e=0;e<c.length;e++)""===b.node.attributes(c[e])&&a(c[e]).replaceWith("<"+a.FE.HTML5Map[c[e].tagName]+">"+c[e].innerHTML+"</"+a.FE.HTML5Map[c[e].tagName]+">");d&&b.selection.restore()}}function n(a){var c=b.doc.createElement("DIV");return c.innerText=a,c.textContent}function o(c){if("SPAN"==c.tagName&&(c.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;if("PRE"==c.tagName&&q(c),c.nodeType==Node.ELEMENT_NODE&&(c.getAttribute("data-fr-src")&&0!==c.getAttribute("data-fr-src").indexOf("blob:")&&c.setAttribute("data-fr-src",b.helpers.sanitizeURL(n(c.getAttribute("data-fr-src")))),c.getAttribute("href")&&c.setAttribute("href",b.helpers.sanitizeURL(n(c.getAttribute("href")))),c.getAttribute("src")&&c.setAttribute("src",b.helpers.sanitizeURL(n(c.getAttribute("src")))),["TABLE","TBODY","TFOOT","TR"].indexOf(c.tagName)>=0&&(c.innerHTML=c.innerHTML.trim())),!b.opts.pasteAllowLocalImages&&c.nodeType==Node.ELEMENT_NODE&&"IMG"==c.tagName&&c.getAttribute("data-fr-src")&&0===c.getAttribute("data-fr-src").indexOf("file://"))return c.parentNode.removeChild(c),!1;if(c.nodeType==Node.ELEMENT_NODE&&a.FE.HTML5Map[c.tagName]&&""===b.node.attributes(c)){var d=a.FE.HTML5Map[c.tagName],e="<"+d+">"+c.innerHTML+"</"+d+">";c.insertAdjacentHTML("beforebegin",e),c=c.previousSibling,c.parentNode.removeChild(c.nextSibling)}if(b.opts.htmlAllowComments||c.nodeType!=Node.COMMENT_NODE)if(c.tagName&&c.tagName.match(F))c.parentNode.removeChild(c);else if(c.tagName&&!c.tagName.match(E))"svg"===c.tagName?c.parentNode.removeChild(c):b.browser.safari&&"path"==c.tagName&&c.parentNode&&"svg"==c.parentNode.tagName||(c.outerHTML=c.innerHTML);else{var f=c.attributes;if(f)for(var h=f.length-1;h>=0;h--){var i=f[h],j=i.nodeName.match(G),k=null;"style"==i.nodeName&&b.opts.htmlAllowedStyleProps.length&&(k=i.value.match(H)),j&&k?i.value=g(k.join(";")):(!j||"style"==i.nodeName&&!k)&&c.removeAttribute(i.nodeName)}}else 0!==c.data.indexOf("[FROALA.EDITOR")&&c.parentNode.removeChild(c)}function p(a){for(var c=b.node.contents(a),d=0;d<c.length;d++)c[d].nodeType!=Node.TEXT_NODE&&p(c[d]);o(a)}function q(a){var b=a.innerHTML;b.indexOf("\n")>=0&&(a.innerHTML=b.replace(/\n/g,"<br>"))}function r(c,d,e,f){"undefined"==typeof d&&(d=[]),"undefined"==typeof e&&(e=[]),"undefined"==typeof f&&(f=!1);var g,h=a.merge([],b.opts.htmlAllowedTags);for(g=0;g<d.length;g++)h.indexOf(d[g])>=0&&h.splice(h.indexOf(d[g]),1);var i=a.merge([],b.opts.htmlAllowedAttrs);for(g=0;g<e.length;g++)i.indexOf(e[g])>=0&&i.splice(i.indexOf(e[g]),1);return i.push("data-fr-.*"),i.push("fr-.*"),E=new RegExp("^"+h.join("$|^")+"$","gi"),G=new RegExp("^"+i.join("$|^")+"$","gi"),F=new RegExp("^"+b.opts.htmlRemoveTags.join("$|^")+"$","gi"),H=b.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+b.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,c=k(c,p,!0)}function s(){for(var a=b.el.querySelectorAll("tr"),c=0;c<a.length;c++){for(var d=a[c].children,e=!0,f=0;f<d.length;f++)if("TH"!=d[f].tagName){e=!1;break}if(e!==!1&&0!==d.length){for(var g=a[c];g&&"TABLE"!=g.tagName&&"THEAD"!=g.tagName;)g=g.parentNode;var h=g;"THEAD"!=h.tagName&&(h=b.doc.createElement("THEAD"),g.insertBefore(h,g.firstChild)),h.appendChild(a[c])}}}function t(){s()}function u(){var a=[],c=function(a){return!b.node.isList(a.parentNode)};do{if(a.length){var d=a[0],e=b.doc.createElement("ul");d.parentNode.insertBefore(e,d);do{var f=d;d=d.nextSibling,e.appendChild(f)}while(d&&"LI"==d.tagName)}a=[];for(var g=b.el.querySelectorAll("li"),h=0;h<g.length;h++)c(g[h])&&a.push(g[h])}while(a.length>0)}function v(){for(var a=b.el.querySelectorAll("ol + ol, ul + ul"),c=0;c<a.length;c++){var d=a[c];if(b.node.isList(d.previousSibling)&&b.node.openTagString(d)==b.node.openTagString(d.previousSibling)){for(var e=b.node.contents(d),f=0;f<e.length;f++)d.previousSibling.appendChild(e[f]);d.parentNode.removeChild(d)}}}function w(){var a,c,d=function(a){a.querySelector("LI")||(c=!0,a.parentNode.removeChild(a))};do{c=!1;var e=b.el.querySelectorAll("li:empty");for(a=0;a<e.length;a++)e[a].parentNode.removeChild(e[a]);var f=b.el.querySelectorAll("ul, ol");for(a=0;a<f.length;a++)d(f[a])}while(c===!0)}function x(){for(var c=b.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),d=0;d<c.length;d++){var e=c[d],f=e.previousSibling;f&&("LI"==f.tagName?f.appendChild(e):a(e).wrap("<li></li>"))}}function y(){for(var c=b.el.querySelectorAll("li > ul, li > ol"),d=0;d<c.length;d++){var e=c[d];if(e.nextSibling){var f=e.nextSibling,g=a("<li>");a(e.parentNode).after(g);do{var h=f;f=f.nextSibling,g.append(h)}while(f)}}}function z(){for(var c=b.el.querySelectorAll("li > ul, li > ol"),d=0;d<c.length;d++){var e=c[d];if(b.node.isFirstSibling(e))a(e).before("<br/>");else if(e.previousSibling&&"BR"==e.previousSibling.tagName){for(var f=e.previousSibling.previousSibling;f&&b.node.hasClass(f,"fr-marker");)f=f.previousSibling;f&&"BR"!=f.tagName&&a(e.previousSibling).remove()}}}function A(){for(var c=b.el.querySelectorAll("li:empty"),d=0;d<c.length;d++)a(c[d]).remove()}function B(){for(var c=b.el.querySelectorAll("ul, ol"),d=0;d<c.length;d++)for(var e=b.node.contents(c[d]),f=null,g=e.length-1;g>=0;g--)"LI"!=e[g].tagName?(f||(f=a("<li>"),f.insertBefore(e[g])),f.prepend(e[g])):f=null}function C(){u(),v(),B(),w(),x(),y(),z(),A()}function D(){b.opts.fullPage&&a.merge(b.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var E,F,G,H,I=[];return{_init:D,html:r,toHTML5:m,tables:t,lists:C,invisibleSpaces:l,exec:k}},a.FE.MODULES.spaces=function(b){function c(c,d){var e=c.previousSibling,f=c.nextSibling,g=c.textContent,h=c.parentNode;if(!b.html.isPreformatted(h)){d&&(g=g.replace(/[\f\n\r\t\v ]{2,}/g," "),f&&"BR"!==f.tagName&&!b.node.isBlock(f)||!(b.node.isBlock(h)||b.node.isLink(h)&&!h.nextSibling||b.node.isElement(h))||(g=g.replace(/[\f\n\r\t\v ]{1,}$/g,"")),e&&"BR"!==e.tagName&&!b.node.isBlock(e)||!(b.node.isBlock(h)||b.node.isLink(h)&&!h.previousSibling||b.node.isElement(h))||(g=g.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===g&&(e&&b.node.isVoid(e)||f&&b.node.isVoid(f))&&(g="")),(!e&&b.node.isBlock(f)||!f&&b.node.isBlock(e))&&b.node.isBlock(h)&&(g=g.replace(/^[\f\n\r\t\v ]{1,}/g,"")),d||(g=g.replace(new RegExp(a.FE.UNICODE_NBSP,"g")," "));for(var i="",j=0;j<g.length;j++)i+=32!=g.charCodeAt(j)||0!==j&&32!=i.charCodeAt(j-1)?g[j]:a.FE.UNICODE_NBSP;(!f||f&&b.node.isBlock(f)||f&&f.nodeType==Node.ELEMENT_NODE&&b.win.getComputedStyle(f)&&"block"==b.win.getComputedStyle(f).display)&&(i=i.replace(/ $/,a.FE.UNICODE_NBSP)),!e||b.node.isVoid(e)||b.node.isBlock(e)||(i=i.replace(/^\u00A0([^ $])/," $1"),1!==i.length||160!==i.charCodeAt(0)||!f||b.node.isVoid(f)||b.node.isBlock(f)||(i=" ")),d||(i=i.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2")),c.textContent!=i&&(c.textContent=i)}}function d(a,d){if("undefined"!=typeof a&&a||(a=b.el),"undefined"==typeof d&&(d=!1),!a.getAttribute||"false"!=a.getAttribute("contenteditable"))if(a.nodeType==Node.TEXT_NODE)c(a,d);else if(a.nodeType==Node.ELEMENT_NODE)for(var e=b.doc.createTreeWalker(a,NodeFilter.SHOW_TEXT,b.node.filter(function(a){for(var c=a.parentNode;c&&c!==b.el;){if("STYLE"==c.tagName||"IFRAME"==c.tagName)return!1;if("PRE"===c.tagName)return!1;c=c.parentNode}return null!=a.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!b.node.hasClass(a.parentNode,"fr-marker")}),!1);e.nextNode();)c(e.currentNode,d)}function e(){for(var a=[],c=b.el.querySelectorAll(".fr-marker"),e=0;e<c.length;e++){var f=null,g=b.node.blockParent(c[e]);f=g?g:c[e];for(var h=f.nextSibling,i=f.previousSibling;h&&"BR"==h.tagName;)h=h.nextSibling;for(;i&&"BR"==i.tagName;)i=i.previousSibling;f&&a.indexOf(f)<0&&a.push(f),i&&a.indexOf(i)<0&&a.push(i),h&&a.indexOf(h)<0&&a.push(h)}for(var j=0;j<a.length;j++)d(a[j])}return{normalize:d,normalizeAroundCursor:e}},a.FE.UNICODE_NBSP=String.fromCharCode(160),a.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],a.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],a.extend(a.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon",".fr-inner","path","line"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),a.FE.MODULES.html=function(b){function c(){return b.opts.enter==a.FE.ENTER_P?"p":b.opts.enter==a.FE.ENTER_DIV?"div":b.opts.enter==a.FE.ENTER_BR?null:void 0}function d(a,c){return a&&a!==b.el?c?-1!=["PRE","SCRIPT","STYLE"].indexOf(a.tagName)?!0:d(a.parentNode,c):-1!=["PRE","SCRIPT","STYLE"].indexOf(a.tagName):!1}function e(c){var d,e=[],f=[];if(c){var h=b.el.querySelectorAll(".fr-marker");for(d=0;d<h.length;d++){var i=b.node.blockParent(h[d])||h[d];if(i){var j=i.nextSibling,k=i.previousSibling;i&&f.indexOf(i)<0&&b.node.isBlock(i)&&f.push(i),k&&b.node.isBlock(k)&&f.indexOf(k)<0&&f.push(k),j&&b.node.isBlock(j)&&f.indexOf(j)<0&&f.push(j)}}}else f=b.el.querySelectorAll(g());var l=g();for(l+=","+a.FE.VOID_ELEMENTS.join(","),l+=", .fr-inner",l+=","+b.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",d=f.length-1;d>=0;d--)if(!(f[d].textContent&&f[d].textContent.replace(/\u200B|\n/g,"").length>0||f[d].querySelectorAll(l).length>0)){for(var m=b.node.contents(f[d]),n=!1,o=0;o<m.length;o++)if(m[o].nodeType!=Node.COMMENT_NODE&&m[o].textContent&&m[o].textContent.replace(/\u200B|\n/g,"").length>0){n=!0;break}n||e.push(f[d])}return e}function f(){return a.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function g(){return a.FE.BLOCK_TAGS.join(", ")}function h(c){var d=a.merge([],a.FE.VOID_ELEMENTS);d=a.merge(d,b.opts.htmlAllowedEmptyTags),d="undefined"==typeof c?a.merge(d,a.FE.BLOCK_TAGS):a.merge(d,a.FE.NO_DELETE_TAGS);var e,f;e=b.el.querySelectorAll("*:empty:not("+d.join("):not(")+"):not(.fr-marker)");do{f=!1;for(var g=0;g<e.length;g++)(0===e[g].attributes.length||"undefined"!=typeof e[g].getAttribute("href"))&&(e[g].parentNode.removeChild(e[g]),f=!0);e=b.el.querySelectorAll("*:empty:not("+d.join("):not(")+"):not(.fr-marker)")}while(e.length&&f)}function i(a,d){var e=c();if(d&&(e="div"),e){for(var f=b.doc.createDocumentFragment(),g=null,h=!1,i=a.firstChild,j=!1;i;){var k=i.nextSibling;if(i.nodeType==Node.ELEMENT_NODE&&(b.node.isBlock(i)||b.opts.htmlDoNotWrapTags.indexOf(i.tagName.toLowerCase())>=0&&!b.node.hasClass(i,"fr-marker")))g=null,f.appendChild(i.cloneNode(!0));else if(i.nodeType!=Node.ELEMENT_NODE&&i.nodeType!=Node.TEXT_NODE)g=null,f.appendChild(i.cloneNode(!0));else if("BR"==i.tagName)null==g?(g=b.doc.createElement(e),j=!0,d&&g.setAttribute("class","fr-temp-div"),g.setAttribute("data-empty",!0),g.appendChild(i.cloneNode(!0)),f.appendChild(g)):h===!1&&(g.appendChild(b.doc.createElement("br")),d&&g.setAttribute("class","fr-temp-div"),g.setAttribute("data-empty",!0)),g=null;else{var l=i.textContent;(i.nodeType!==Node.TEXT_NODE||l.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||l.length&&l.indexOf("\n")<0)&&(null==g&&(g=b.doc.createElement(e),j=!0,d&&g.setAttribute("class","fr-temp-div"),f.appendChild(g),h=!1),g.appendChild(i.cloneNode(!0)),h||b.node.hasClass(i,"fr-marker")||i.nodeType==Node.TEXT_NODE&&0===l.replace(/ /g,"").length||(h=!0))}i=k}j&&(a.innerHTML="",a.appendChild(f))}}function j(a,b){for(var c=a.length-1;c>=0;c--)i(a[c],b)}function k(a,c,d,e,f){if(!b.$wp)return!1;"undefined"==typeof a&&(a=!1),"undefined"==typeof c&&(c=!1),"undefined"==typeof d&&(d=!1),"undefined"==typeof e&&(e=!1),"undefined"==typeof f&&(f=!1);var g=b.$wp.scrollTop();i(b.el,a),e&&j(b.el.querySelectorAll(".fr-inner"),a),c&&j(b.el.querySelectorAll("td, th"),a),d&&j(b.el.querySelectorAll("blockquote"),a),f&&j(b.el.querySelectorAll("li"),a),g!=b.$wp.scrollTop()&&b.$wp.scrollTop(g)}function l(){b.$el.find("div.fr-temp-div").each(function(){this.previousSibling&&this.previousSibling.nodeType===Node.TEXT_NODE&&a(this).before("<br>"),a(this).attr("data-empty")||!this.nextSibling||b.node.isBlock(this.nextSibling)&&!a(this.nextSibling).hasClass("fr-temp-div")?a(this).replaceWith(a(this).html()):a(this).replaceWith(a(this).html()+"<br>")}),b.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""===a(this).attr("class")}).removeAttr("class")}function m(c){for(var d=e(c),f=0;f<d.length;f++){var g=d[f];"false"===g.getAttribute("contenteditable")||g.querySelector(b.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||b.node.isVoid(g)||"TABLE"!=g.tagName&&"TBODY"!=g.tagName&&"TR"!=g.tagName&&"UL"!=g.tagName&&"OL"!=g.tagName&&g.appendChild(b.doc.createElement("br"))}if(b.browser.msie&&b.opts.enter==a.FE.ENTER_BR){var h=b.node.contents(b.el);h.length&&h[h.length-1].nodeType==Node.TEXT_NODE&&b.$el.append("<br>")}}function n(){return b.$el.get(0).querySelectorAll(g())}function o(a){if("undefined"==typeof a&&(a=b.el),a&&["SCRIPT","STYLE","PRE"].indexOf(a.tagName)>=0)return!1;for(var c=b.doc.createTreeWalker(a,NodeFilter.SHOW_TEXT,b.node.filter(function(a){return null!=a.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);c.nextNode();){var e=c.currentNode;if(!d(e.parentNode,!0)){var f=b.node.isBlock(e.parentNode)||b.node.isElement(e.parentNode),g=e.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(f){var h=e.previousSibling,i=e.nextSibling;h&&i&&" "==g?g=b.node.isBlock(h)&&b.node.isBlock(i)?"":" ":(h||(g=g.replace(/^ */,"")),i||(g=g.replace(/ *$/,"")))}e.textContent=g}}}function p(a,b,c){var d=new RegExp(b,"gi"),e=d.exec(a);return e?e[c]:null}function q(a,b){var c=a.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return c?b.implementation.createDocumentType(c[1],c[3],c[4]):b.implementation.createDocumentType("html")}function r(a){var b=a.doctype,c="<!DOCTYPE html>";return b&&(c="<!DOCTYPE "+b.name+(b.publicId?' PUBLIC "'+b.publicId+'"':"")+(!b.publicId&&b.systemId?" SYSTEM":"")+(b.systemId?' "'+b.systemId+'"':"")+">"),c}function s(c){var d=c.parentNode;if(d&&(b.node.isBlock(d)||b.node.isElement(d))&&["TD","TH"].indexOf(d.tagName)<0){for(var e=c.previousSibling,f=c.nextSibling;e&&(e.nodeType==Node.TEXT_NODE&&0===e.textContent.replace(/\n|\r/g,"").length||b.node.hasClass(e,"fr-tmp"));)e=e.previousSibling;if(f)return!1;e&&d&&"BR"!=e.tagName&&!b.node.isBlock(e)&&!f&&d.textContent.replace(/\u200B/g,"").length>0&&e.textContent.length>0&&!b.node.hasClass(e,"fr-marker")&&(b.el!=d||f||b.opts.enter!=a.FE.ENTER_BR||!b.browser.msie)&&c.parentNode.removeChild(c)}else!d||b.node.isBlock(d)||b.node.isElement(d)||c.previousSibling||c.nextSibling||!b.node.isDeletable(c.parentNode)||s(c.parentNode)}function t(){for(var a=b.el.getElementsByTagName("br"),c=0;c<a.length;c++)s(a[c])}function u(){b.opts.htmlUntouched||(h(),k(),o(),b.spaces.normalize(null,!0),b.html.fillEmptyBlocks(),b.clean.lists(),b.clean.tables(),b.clean.toHTML5(),b.html.cleanBRs()),b.selection.restore(),v(),b.placeholder.refresh()}function v(){b.node.isEmpty(b.el)&&(null!=c()?b.el.querySelector(g())||b.el.querySelector(b.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(b.core.hasFocus()?(b.$el.html("<"+c()+">"+a.FE.MARKERS+"<br/></"+c()+">"),b.selection.restore()):b.$el.html("<"+c()+"><br/></"+c()+">")):b.el.querySelector("*:not(.fr-marker):not(br)")||(b.core.hasFocus()?(b.$el.html(a.FE.MARKERS+"<br/>"),b.selection.restore()):b.$el.html("<br/>")))}function w(a,b){return p(a,"<"+b+"[^>]*?>([\\w\\W]*)</"+b+">",1)}function x(c,d){var e=a("<div "+(p(c,"<"+d+"([^>]*?)>",1)||"")+">");return b.node.rawAttributes(e.get(0))}function y(a){return(p(a,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>").replace(/\n/g," ").replace(/ {2,}/g," ")}function z(a,c){b.opts.htmlExecuteScripts?a.html(c):a.get(0).innerHTML=c}function A(c){var d=b.clean.html((c||"").trim(),[],[],b.opts.fullPage);if(b.opts.fullPage){var e=w(d,"body")||(d.indexOf("<body")>=0?"":d),f=x(d,"body"),g=w(d,"head")||"<title></title>",h=x(d,"head"),i=a("<div>").append(g).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0)&&this.parentNode.removeChild(this)}).end().html().trim();g=a("<div>").append(g).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"<!--"+this.nodeValue+"-->":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0?this.outerHTML:""}).toArray().join("");var j=y(d),k=x(d,"html");z(b.$el,i+"\n"+e),b.node.clearAttributes(b.el),b.$el.attr(f),b.$el.addClass("fr-view"),b.$el.attr("spellcheck",b.opts.spellcheck),b.$el.attr("dir",b.opts.direction),z(b.$head,g),
b.node.clearAttributes(b.$head.get(0)),b.$head.attr(h),b.node.clearAttributes(b.$html.get(0)),b.$html.attr(k),b.iframe_document.doctype.parentNode.replaceChild(q(j,b.iframe_document),b.iframe_document.doctype)}else z(b.$el,d);var l=b.edit.isDisabled();b.edit.on(),b.core.injectStyle(b.opts.iframeDefaultStyle+b.opts.iframeStyle),u(),b.opts.useClasses||(b.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),b.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),l&&b.edit.off(),b.events.trigger("html.set")}function B(a){var b=/(#[^\s\+>~\.\[:]+)/g,c=/(\[[^\]]+\])/g,d=/(\.[^\s\+>~\.\[:]+)/g,e=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,f=/(:[\w-]+\([^\)]*\))/gi,g=/(:[^\s\+>~\.\[:]+)/g,h=/([^\s\+>~\.\[:]+)/g;!function(){var b=/:not\(([^\)]*)\)/g;b.test(a)&&(a=a.replace(b,"     $1 "))}();var i=100*(a.match(b)||[]).length+10*(a.match(c)||[]).length+10*(a.match(d)||[]).length+10*(a.match(f)||[]).length+10*(a.match(g)||[]).length+(a.match(e)||[]).length;return a=a.replace(/[\*\s\+>~]/g," "),a=a.replace(/[#\.]/g," "),i+=(a.match(h)||[]).length}function C(a){if(b.events.trigger("html.processGet",[a]),a&&a.getAttribute&&""===a.getAttribute("class")&&a.removeAttribute("class"),a&&a.getAttribute&&""===a.getAttribute("style")&&a.removeAttribute("style"),a&&a.nodeType==Node.ELEMENT_NODE){var c,d=a.querySelectorAll('[class=""],[style=""]');for(c=0;c<d.length;c++){var e=d[c];""===e.getAttribute("class")&&e.removeAttribute("class"),""===e.getAttribute("style")&&e.removeAttribute("style")}if("BR"===a.tagName)s(a);else{var f=a.querySelectorAll("br");for(c=0;c<f.length;c++)s(f[c])}}}function D(a,b){return a[3]-b[3]}function E(a,c){if(!b.$wp)return b.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var d="";b.events.trigger("html.beforeGet");var e,f,g=[],h={},i=[],j=b.el.querySelectorAll("input, textarea");for(e=0;e<j.length;e++)j[e].setAttribute("value",j[e].value);if(!b.opts.useClasses&&!c){var k=new RegExp("^"+b.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(e=0;e<b.doc.styleSheets.length;e++){var l,m=0;try{l=b.doc.styleSheets[e].cssRules,b.doc.styleSheets[e].ownerNode&&"STYLE"==b.doc.styleSheets[e].ownerNode.nodeType&&(m=1)}catch(n){}if(l)for(var o=0,p=l.length;p>o;o++)if(l[o].selectorText&&l[o].style.cssText.length>0){var q,s=l[o].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{q=b.el.querySelectorAll(s)}catch(n){q=[]}for(f=0;f<q.length;f++){!q[f].getAttribute("fr-original-style")&&q[f].getAttribute("style")?(q[f].setAttribute("fr-original-style",q[f].getAttribute("style")),g.push(q[f])):q[f].getAttribute("fr-original-style")||(q[f].setAttribute("fr-original-style",""),g.push(q[f])),h[q[f]]||(h[q[f]]={});for(var t=1e3*m+B(l[o].selectorText),u=l[o].style.cssText.split(";"),v=0;v<u.length;v++){var w=u[v].trim().split(":")[0];if(w&&!w.match(k)&&(h[q[f]][w]||(h[q[f]][w]=0,(q[f].getAttribute("fr-original-style")||"").indexOf(w+":")>=0&&(h[q[f]][w]=1e4)),t>=h[q[f]][w]&&(h[q[f]][w]=t,u[v].trim().length))){var x=u[v].trim().split(":");x.splice(0,1),i.push([q[f],w.trim(),x.join(":").trim(),t])}}}}}for(i.sort(D),e=0;e<i.length;e++){var y=i[e];y[0].style[y[1]]=y[2]}for(e=0;e<g.length;e++)if(g[e].getAttribute("class")&&(g[e].setAttribute("fr-original-class",g[e].getAttribute("class")),g[e].removeAttribute("class")),(g[e].getAttribute("fr-original-style")||"").trim().length>0){var z=g[e].getAttribute("fr-original-style").split(";");for(f=0;f<z.length;f++)if(z[f].indexOf(":")>0){var A=z[f].split(":"),E=A[0];A.splice(0,1),g[e].style[E.trim()]=A.join(":").trim()}}}if(b.node.isEmpty(b.el))b.opts.fullPage&&(d=r(b.iframe_document),d+="<html"+b.node.attributes(b.$html.get(0))+">"+b.$html.find("head").get(0).outerHTML+"<body></body></html>");else if("undefined"==typeof a&&(a=!1),b.opts.fullPage){d=r(b.iframe_document),b.$el.removeClass("fr-view");var F=b.opts.heightMin;b.opts.heightMin=null,b.size.refresh(),d+="<html"+b.node.attributes(b.$html.get(0))+">"+b.$html.html()+"</html>",b.opts.heightMin=F,b.size.refresh(),b.$el.addClass("fr-view")}else d=b.$el.html();if(!b.opts.useClasses&&!c)for(e=0;e<g.length;e++)g[e].getAttribute("fr-original-class")&&(g[e].setAttribute("class",g[e].getAttribute("fr-original-class")),g[e].removeAttribute("fr-original-class")),null!=g[e].getAttribute("fr-original-style")&&"undefined"!=typeof g[e].getAttribute("fr-original-style")?(0!==g[e].getAttribute("fr-original-style").length?g[e].setAttribute("style",g[e].getAttribute("fr-original-style")):g[e].removeAttribute("style"),g[e].removeAttribute("fr-original-style")):g[e].removeAttribute("style");b.opts.fullPage&&(d=d.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),d=d.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,""),d=d.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),d=d.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),d=d.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),d=d.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),d=d.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),d=d.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),b.opts.htmlSimpleAmpersand&&(d=d.replace(/\&amp;/gi,"&")),b.events.trigger("html.afterGet"),a||(d=d.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),d=b.clean.invisibleSpaces(d),d=b.clean.exec(d,C);var G=b.events.chainTrigger("html.get",d);return"string"==typeof G&&(d=G),d=d.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(a){return a.replace(/<br>/g,"\n")})}function F(){var c=function(c,d){for(;d&&(d.nodeType==Node.TEXT_NODE||!b.node.isBlock(d))&&!b.node.isElement(d)&&!b.node.hasClass(d,"fr-inner");)d&&d.nodeType!=Node.TEXT_NODE&&a(c).wrapInner(b.node.openTagString(d)+b.node.closeTagString(d)),d=d.parentNode;d&&c.innerHTML==d.innerHTML&&(c.innerHTML=d.outerHTML)},d=function(){var c,d=null;return b.win.getSelection?(c=b.win.getSelection(),c&&c.rangeCount&&(d=c.getRangeAt(0).commonAncestorContainer,d.nodeType!=Node.ELEMENT_NODE&&(d=d.parentNode))):(c=b.doc.selection)&&"Control"!=c.type&&(d=c.createRange().parentElement()),null!=d&&(a.inArray(b.el,a(d).parents())>=0||d==b.el)?d:null},e="";if("undefined"!=typeof b.win.getSelection){b.browser.mozilla&&(b.selection.save(),b.$el.find('.fr-marker[data-type="false"]').length>1&&(b.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),b.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),b.$el.find(".fr-marker").not('[data-id="0"]').remove()),b.selection.restore());for(var f=b.selection.ranges(),g=0;g<f.length;g++){var h=document.createElement("div");h.appendChild(f[g].cloneContents()),c(h,d()),a(h).find(".fr-element").length>0&&(h=b.el),e+=h.innerHTML}}else"undefined"!=typeof b.doc.selection&&"Text"==b.doc.selection.type&&(e=b.doc.selection.createRange().htmlText);return e}function G(a){var c=b.doc.createElement("div");return c.innerHTML=a,null!==c.querySelector(g())}function H(a){var c=b.doc.createElement("div");return c.innerHTML=a,b.selection.setAtEnd(c),c.innerHTML}function I(a){return a.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function J(c){if(!b.html.defaultTag())return c;var d=b.doc.createElement("div");d.innerHTML=c;for(var e=d.querySelectorAll(":scope > "+b.html.defaultTag()),f=e.length-1;f>=0;f--){var g=e[f];b.node.isBlock(g.previousSibling)||(g.previousSibling&&!b.node.isEmpty(g)&&a("<br>").insertAfter(g.previousSibling),g.outerHTML=g.innerHTML)}return d.innerHTML}function K(c,d,e){b.selection.isCollapsed()||b.selection.remove();var f;if(f=d?c:b.clean.html(c),c.indexOf('class="fr-marker"')<0&&(f=H(f)),b.node.isEmpty(b.el)&&!b.opts.keepFormatOnDelete&&G(f))b.el.innerHTML=f;else{var g=b.markers.insert();if(g){b.node.isLastSibling(g)&&a(g).parent().hasClass("fr-deletable")&&a(g).insertAfter(a(g).parent());var h,i=b.node.blockParent(g);if((G(f)||e)&&(h=b.node.deepestParent(g)||i&&"LI"==i.tagName)){if(i&&"LI"==i.tagName&&(f=J(f)),g=b.markers.split(),!g)return!1;g.outerHTML=f}else g.outerHTML=f}else b.el.innerHTML=b.el.innerHTML+f}u(),b.keys.positionCaret(),b.events.trigger("html.inserted")}function L(c){var d=null;if("undefined"==typeof c&&(d=b.selection.element()),b.opts.keepFormatOnDelete)return!1;var e=d?(d.textContent.match(/\u200B/g)||[]).length-d.querySelectorAll(".fr-marker").length:0,f=(b.el.textContent.match(/\u200B/g)||[]).length-b.el.querySelectorAll(".fr-marker").length;if(f==e)return!1;var g,h;do{h=!1,g=b.el.querySelectorAll("*:not(.fr-marker)");for(var i=0;i<g.length;i++){var j=g[i];if(d!=j){var k=j.textContent;0===j.children.length&&1===k.length&&8203==k.charCodeAt(0)&&"TD"!==j.tagName&&(a(j).remove(),h=!0)}}}while(h)}function M(){if(b.$wp){var a=function(){L(),b.placeholder&&setTimeout(b.placeholder.refresh,0)};b.events.on("mouseup",a),b.events.on("keydown",a),b.events.on("contentChanged",v)}}return{defaultTag:c,isPreformatted:d,emptyBlocks:e,emptyBlockTagsQuery:f,blockTagsQuery:g,fillEmptyBlocks:m,cleanEmptyTags:h,cleanWhiteTags:L,cleanBlankSpaces:o,blocks:n,getDoctype:r,set:A,get:E,getSelected:F,insert:K,wrap:k,unwrap:l,escapeEntities:I,checkIfEmpty:v,extractNode:w,extractNodeAttrs:x,extractDoctype:y,cleanBRs:t,_init:M}},a.extend(a.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),a.FE.MODULES.size=function(a){function b(){c(),a.opts.height&&a.$el.css("minHeight",a.opts.height-a.helpers.getPX(a.$el.css("padding-top"))-a.helpers.getPX(a.$el.css("padding-bottom"))),a.$iframe.height(a.$el.outerHeight(!0))}function c(){a.opts.heightMin?a.$el.css("minHeight",a.opts.heightMin):a.$el.css("minHeight",""),a.opts.heightMax?(a.$wp.css("maxHeight",a.opts.heightMax),a.$wp.css("overflow","auto")):(a.$wp.css("maxHeight",""),a.$wp.css("overflow","")),a.opts.height?(a.$wp.height(a.opts.height),a.$wp.css("overflow","auto"),a.$el.css("minHeight",a.opts.height-a.helpers.getPX(a.$el.css("padding-top"))-a.helpers.getPX(a.$el.css("padding-bottom")))):(a.$wp.css("height",""),a.opts.heightMin||a.$el.css("minHeight",""),a.opts.heightMax||a.$wp.css("overflow","")),a.opts.width&&a.$box.width(a.opts.width)}function d(){return a.$wp?(c(),void(a.$iframe&&(a.events.on("keyup keydown",function(){setTimeout(b,0)},!0),a.events.on("commands.after html.set init initialized paste.after",b)))):!1}return{_init:d,syncIframe:b,refresh:c}},a.extend(a.FE.DEFAULTS,{language:null}),a.FE.LANGUAGE={},a.FE.MODULES.language=function(b){function c(a){return e&&e.translation[a]&&e.translation[a].length?e.translation[a]:a}function d(){a.FE.LANGUAGE&&(e=a.FE.LANGUAGE[b.opts.language]),e&&e.direction&&(b.opts.direction=e.direction)}var e;return{_init:d,translate:c}},a.extend(a.FE.DEFAULTS,{placeholderText:"Type something"}),a.FE.MODULES.placeholder=function(b){function c(){b.$placeholder||g();var c=b.opts.iframe?b.$iframe.prev().outerHeight(!0):b.$el.prev().outerHeight(!0),d=0,e=0,f=0,h=0,i=0,j=0,k=b.node.contents(b.el),l=a(b.selection.element()).css("text-align");if(k.length&&k[0].nodeType==Node.ELEMENT_NODE){var m=a(k[0]);(!b.opts.toolbarInline||b.$el.prev().length>0)&&b.ready&&(d=b.helpers.getPX(m.css("margin-top")),h=b.helpers.getPX(m.css("padding-top")),e=b.helpers.getPX(m.css("margin-left")),f=b.helpers.getPX(m.css("margin-right")),i=b.helpers.getPX(m.css("padding-left")),j=b.helpers.getPX(m.css("padding-right"))),b.$placeholder.css("font-size",m.css("font-size")),b.$placeholder.css("line-height",m.css("line-height"))}else b.$placeholder.css("font-size",b.$el.css("font-size")),b.$placeholder.css("line-height",b.$el.css("line-height"));b.$wp.addClass("show-placeholder"),b.$placeholder.css({marginTop:Math.max(b.helpers.getPX(b.$el.css("margin-top")),d)+(c?c:0),paddingTop:Math.max(b.helpers.getPX(b.$el.css("padding-top")),h),paddingLeft:Math.max(b.helpers.getPX(b.$el.css("padding-left")),i),marginLeft:Math.max(b.helpers.getPX(b.$el.css("margin-left")),e),paddingRight:Math.max(b.helpers.getPX(b.$el.css("padding-right")),j),marginRight:Math.max(b.helpers.getPX(b.$el.css("margin-right")),f),textAlign:l}).text(b.language.translate(b.opts.placeholderText||b.$oel.attr("placeholder")||"")),b.$placeholder.html(b.$placeholder.text().replace(/\n/g,"<br>"))}function d(){b.$wp.removeClass("show-placeholder")}function e(){return b.$wp?b.node.hasClass(b.$wp.get(0),"show-placeholder"):!0}function f(){return b.$wp?void(b.core.isEmpty()?c():d()):!1}function g(){b.$placeholder=a('<span class="fr-placeholder"></span>'),b.$wp.append(b.$placeholder)}function h(){return b.$wp?void b.events.on("init input keydown keyup contentChanged initialized",f):!1}return{_init:h,show:c,hide:d,refresh:f,isVisible:e}},a.FE.MODULES.edit=function(a){function b(){if(a.browser.mozilla)try{a.doc.execCommand("enableObjectResizing",!1,"false"),a.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(b){}if(a.browser.msie)try{a.doc.body.addEventListener("mscontrolselect",function(a){return a.preventDefault(),!1})}catch(b){}}function c(){a.$wp?(a.$el.attr("contenteditable",!0),a.$el.removeClass("fr-disabled").attr("aria-disabled",!1),a.$tb&&a.$tb.removeClass("fr-disabled").removeAttr("aria-disabled"),b()):a.$el.is("a")&&a.$el.attr("contenteditable",!0),g=!1}function d(){a.events.disableBlur(),a.$wp?(a.$el.attr("contenteditable",!1),a.$el.addClass("fr-disabled").attr("aria-disabled",!0),a.$tb&&a.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):a.$el.is("a")&&a.$el.attr("contenteditable",!1),a.events.enableBlur(),g=!0}function e(){return g}function f(){a.events.on("focus",function(){e()?a.edit.off():a.edit.on()})}var g=!1;return{_init:f,on:c,off:d,disableDesign:b,isDisabled:e}},a.extend(a.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeDefaultStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}body::-moz-selection{background:#b5d6fd;color:#000;}body::selection{background:#b5d6fd;color:#000;}',iframeStyle:"",iframeStyleFiles:[],direction:"auto",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),a.FE.MODULES.core=function(b){function c(c){if(b.opts.iframe){b.$head.find("style[data-fr-style], link[data-fr-style]").remove(),b.$head.append('<style data-fr-style="true">'+c+"</style>");for(var d=0;d<b.opts.iframeStyleFiles.length;d++){var e=a('<link data-fr-style="true" rel="stylesheet" href="'+b.opts.iframeStyleFiles[d]+'">');e.get(0).addEventListener("load",b.size.syncIframe),b.$head.append(e)}}}function d(){b.opts.iframe||b.$el.addClass("fr-element fr-view")}function e(){if(b.$box.addClass("fr-box"+(b.opts.editorClass?" "+b.opts.editorClass:"")),b.$box.attr("role","application"),b.$wp.addClass("fr-wrapper"),d(),b.opts.iframe){b.$iframe.addClass("fr-iframe"),b.$el.addClass("fr-view");for(var a=0;a<b.o_doc.styleSheets.length;a++){var c;try{c=b.o_doc.styleSheets[a].cssRules}catch(e){}if(c)for(var f=0,g=c.length;g>f;f++)!c[f].selectorText||0!==c[f].selectorText.indexOf(".fr-view")&&0!==c[f].selectorText.indexOf(".fr-element")||c[f].style.cssText.length>0&&(0===c[f].selectorText.indexOf(".fr-view")?b.opts.iframeStyle+=c[f].selectorText.replace(/\.fr-view/g,"body")+"{"+c[f].style.cssText+"}":b.opts.iframeStyle+=c[f].selectorText.replace(/\.fr-element/g,"body")+"{"+c[f].style.cssText+"}")}}"auto"!=b.opts.direction&&b.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+b.opts.direction),b.$el.attr("dir",b.opts.direction),b.$wp.attr("dir",b.opts.direction),b.opts.zIndex>1&&b.$box.css("z-index",b.opts.zIndex),b.opts.theme&&b.$box.addClass(b.opts.theme+"-theme"),b.opts.tabIndex=b.opts.tabIndex||b.$oel.attr("tabIndex"),b.opts.tabIndex&&b.$el.attr("tabIndex",b.opts.tabIndex)}function f(){return b.node.isEmpty(b.el)}function g(){b.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!b.win.FormData,progress:"upload"in new XMLHttpRequest}}function h(a,c){var d=new XMLHttpRequest;d.open(c,a,!0),b.opts.requestWithCredentials&&(d.withCredentials=!0);for(var e in b.opts.requestHeaders)b.opts.requestHeaders.hasOwnProperty(e)&&d.setRequestHeader(e,b.opts.requestHeaders[e]);return d}function i(a){"TEXTAREA"==b.$oel.get(0).tagName&&b.$oel.val(a),b.$box.removeAttr("role"),b.$wp&&("TEXTAREA"==b.$oel.get(0).tagName?(b.$el.html(""),b.$wp.html(""),b.$box.replaceWith(b.$oel),b.$oel.show()):(b.$wp.replaceWith(a),b.$el.html(""),b.$box.removeClass("fr-view fr-ltr fr-box "+(b.opts.editorClass||"")),b.opts.theme&&b.$box.addClass(b.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function j(){return b.browser.mozilla&&b.helpers.isMobile()?b.selection.inEditor():b.node.hasFocus(b.el)||b.$el.find("*:focus").length>0}function k(a){if(!a)return!1;var c=a.data("instance");return c?c.id==b.id:!1}function l(){if(a.FE.INSTANCES.push(b),g(),b.$wp){e(),b.html.set(b._original_html),b.$el.attr("spellcheck",b.opts.spellcheck),b.helpers.isMobile()&&(b.$el.attr("autocomplete",b.opts.spellcheck?"on":"off"),b.$el.attr("autocorrect",b.opts.spellcheck?"on":"off"),b.$el.attr("autocapitalize",b.opts.spellcheck?"on":"off")),b.opts.disableRightClick&&b.events.$on(b.$el,"contextmenu",function(a){return 2==a.button?!1:void 0});try{b.doc.execCommand("styleWithCSS",!1,!1)}catch(c){}}"TEXTAREA"==b.$oel.get(0).tagName&&(b.events.on("contentChanged",function(){b.$oel.val(b.html.get())}),b.events.on("form.submit",function(){b.$oel.val(b.html.get())}),b.events.on("form.reset",function(){b.html.set(b._original_html)}),b.$oel.val(b.html.get())),b.helpers.isIOS()&&b.events.$on(b.$doc,"selectionchange",function(){b.$doc.get(0).hasFocus()||b.$win.get(0).focus()}),b.events.trigger("init")}return{_init:l,destroy:i,isEmpty:f,getXHR:h,injectStyle:c,hasFocus:j,sameInstance:k}},a.FE.MODULES.cursorLists=function(b){function c(a){for(var b=a;"LI"!=b.tagName;)b=b.parentNode;return b}function d(a){for(var c=a;!b.node.isList(c);)c=c.parentNode;return c}function e(e){var f,g=c(e),h=g.nextSibling,i=g.previousSibling,j=b.html.defaultTag();if(b.node.isEmpty(g,!0)&&h){for(var k="",l="",m=e.parentNode;!b.node.isList(m)&&m.parentNode&&"LI"!==m.parentNode.tagName;)k=b.node.openTagString(m)+k,l+=b.node.closeTagString(m),m=m.parentNode;k=b.node.openTagString(m)+k,l+=b.node.closeTagString(m);var n="";for(n=m.parentNode&&"LI"==m.parentNode.tagName?l+"<li>"+a.FE.MARKERS+"<br>"+k:j?l+"<"+j+">"+a.FE.MARKERS+"<br></"+j+">"+k:l+a.FE.MARKERS+"<br>"+k,a(g).html('<span id="fr-break"></span>');["UL","OL"].indexOf(m.tagName)<0||m.parentNode&&"LI"===m.parentNode.tagName;)m=m.parentNode;var o=b.node.openTagString(m)+a(m).html()+b.node.closeTagString(m);o=o.replace(/<span id="fr-break"><\/span>/g,n),a(m).replaceWith(o),b.$el.find("li:empty").remove()}else if(i&&h||!b.node.isEmpty(g,!0)){for(var p="<br>",q=e.parentNode;q&&"LI"!=q.tagName;)p=b.node.openTagString(q)+p+b.node.closeTagString(q),q=q.parentNode;a(g).before("<li>"+p+"</li>"),a(e).remove()}else if(i){f=d(g);for(var r=a.FE.MARKERS+"<br>",s=e.parentNode;s&&"LI"!=s.tagName;)r=b.node.openTagString(s)+r+b.node.closeTagString(s),s=s.parentNode;f.parentNode&&"LI"==f.parentNode.tagName?a(f.parentNode).after("<li>"+r+"</li>"):j?a(f).after("<"+j+">"+r+"</"+j+">"):a(f).after(r),a(g).remove()}else f=d(g),f.parentNode&&"LI"==f.parentNode.tagName?h?a(f.parentNode).before(b.node.openTagString(g)+a.FE.MARKERS+"<br></li>"):a(f.parentNode).after(b.node.openTagString(g)+a.FE.MARKERS+"<br></li>"):j?a(f).before("<"+j+">"+a.FE.MARKERS+"<br></"+j+">"):a(f).before(a.FE.MARKERS+"<br>"),a(g).remove()}function f(d){for(var e=c(d),f="",g=d,h="",i="";g!=e;){g=g.parentNode;var j="A"==g.tagName&&b.cursor.isAtEnd(d,g)?"fr-to-remove":"";h=b.node.openTagString(a(g).clone().addClass(j).get(0))+h,i=b.node.closeTagString(g)+i}f=i+f+h+a.FE.MARKERS+a.FE.INVISIBLE_SPACE,a(d).replaceWith('<span id="fr-break"></span>');var k=b.node.openTagString(e)+a(e).html()+b.node.closeTagString(e);k=k.replace(/<span id="fr-break"><\/span>/g,f),a(e).replaceWith(k)}function g(d){for(var e=c(d),f=a.FE.MARKERS,g="",h=d,i=!1;h!=e;){h=h.parentNode;var j="A"==h.tagName&&b.cursor.isAtEnd(d,h)?"fr-to-remove":"";i||h==e||b.node.isBlock(h)||(i=!0,g+=a.FE.INVISIBLE_SPACE),g=b.node.openTagString(a(h).clone().addClass(j).get(0))+g,f+=b.node.closeTagString(h)}var k=g+f;a(d).remove(),a(e).after(k)}function h(e){var f=c(e),g=f.previousSibling;if(g){g=a(g).find(b.html.blockTagsQuery()).get(-1)||g,a(e).replaceWith(a.FE.MARKERS);var h=b.node.contents(g);h.length&&"BR"==h[h.length-1].tagName&&a(h[h.length-1]).remove(),a(f).find(b.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==f&&a(this).replaceWith(a(this).html()+(b.node.isEmpty(this)?"":"<br>"))});for(var i,j=b.node.contents(f)[0];j&&!b.node.isList(j);)i=j.nextSibling,a(g).append(j),j=i;for(g=f.previousSibling;j;)i=j.nextSibling,a(g).append(j),j=i;a(f).remove()}else{var k=d(f);if(a(e).replaceWith(a.FE.MARKERS),k.parentNode&&"LI"==k.parentNode.tagName){var l=k.previousSibling;b.node.isBlock(l)?(a(f).find(b.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==f&&a(this).replaceWith(a(this).html()+(b.node.isEmpty(this)?"":"<br>"))}),a(l).append(a(f).html())):a(k).before(a(f).html())}else{var m=b.html.defaultTag();m&&0===a(f).find(b.html.blockTagsQuery()).length?a(k).before("<"+m+">"+a(f).html()+"</"+m+">"):a(k).before(a(f).html())}a(f).remove(),b.html.wrap(),0===a(k).find("li").length&&a(k).remove()}}function i(d){var e,f=c(d),g=f.nextSibling;if(g){e=b.node.contents(g),e.length&&"BR"==e[0].tagName&&a(e[0]).remove(),a(g).find(b.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==g&&a(this).replaceWith(a(this).html()+(b.node.isEmpty(this)?"":"<br>"))});for(var h,i=d,j=b.node.contents(g)[0];j&&!b.node.isList(j);)h=j.nextSibling,a(i).after(j),i=j,j=h;for(;j;)h=j.nextSibling,a(f).append(j),j=h;a(d).replaceWith(a.FE.MARKERS),a(g).remove()}else{for(var k=f;!k.nextSibling&&k!=b.el;)k=k.parentNode;if(k==b.el)return!1;if(k=k.nextSibling,b.node.isBlock(k))a.FE.NO_DELETE_TAGS.indexOf(k.tagName)<0&&(a(d).replaceWith(a.FE.MARKERS),e=b.node.contents(f),e.length&&"BR"==e[e.length-1].tagName&&a(e[e.length-1]).remove(),a(f).append(a(k).html()),a(k).remove());else for(e=b.node.contents(f),e.length&&"BR"==e[e.length-1].tagName&&a(e[e.length-1]).remove(),a(d).replaceWith(a.FE.MARKERS);k&&!b.node.isBlock(k)&&"BR"!=k.tagName;)a(f).append(a(k)),k=k.nextSibling}}return{_startEnter:e,_middleEnter:f,_endEnter:g,_backspace:h,_del:i}},a.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],a.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],a.FE.MODULES.cursor=function(b){function c(a){return a?b.node.isBlock(a)?!0:a.nextSibling&&a.nextSibling.nodeType==Node.TEXT_NODE&&0===a.nextSibling.textContent.replace(/\u200b/g,"").length?c(a.nextSibling):!a.nextSibling||a.previousSibling&&"BR"==a.nextSibling.tagName&&!a.nextSibling.nextSibling?c(a.parentNode):!1:!1}function d(a){return a?b.node.isBlock(a)?!0:a.previousSibling&&a.previousSibling.nodeType==Node.TEXT_NODE&&0===a.previousSibling.textContent.replace(/\u200b/g,"").length?d(a.previousSibling):a.previousSibling?!1:!a.previousSibling&&b.node.hasClass(a.parentNode,"fr-inner")?!0:d(a.parentNode):!1}function e(a,c){return a?a==b.$wp.get(0)?!1:a.previousSibling&&a.previousSibling.nodeType==Node.TEXT_NODE&&0===a.previousSibling.textContent.replace(/\u200b/g,"").length?e(a.previousSibling,c):a.previousSibling?!1:a.parentNode==c?!0:e(a.parentNode,c):!1}function f(a,c){return a?a==b.$wp.get(0)?!1:a.nextSibling&&a.nextSibling.nodeType==Node.TEXT_NODE&&0===a.nextSibling.textContent.replace(/\u200b/g,"").length?f(a.nextSibling,c):!a.nextSibling||a.previousSibling&&"BR"==a.nextSibling.tagName&&!a.nextSibling.nextSibling?a.parentNode==c?!0:f(a.parentNode,c):!1:!1}function g(c){return a(c).parentsUntil(b.$el,"LI").length>0&&0===a(c).parentsUntil("LI","TABLE").length}function h(a,b){var c=new RegExp((b?"^":"")+"([\\uD83C-\\uDBFF\\uDC00-\\uDFFF\\u200D]+)"+(b?"":"$"),"i"),d=a.match(c);return d?d[0].length:1}function i(c){for(var d=a(c).parentsUntil(b.$el,"BLOCKQUOTE").length>0,e=b.node.deepestParent(c,[],!d),f=e;e&&!e.previousSibling&&"BLOCKQUOTE"!=e.tagName&&e.parentElement!=b.el&&!b.node.hasClass(e.parentElement,"fr-inner")&&a.FE.SIMPLE_ENTER_TAGS.indexOf(e.parentElement.tagName)<0;)e=e.parentElement;if(e&&"BLOCKQUOTE"==e.tagName){var g=b.node.deepestParent(c,[a(c).parentsUntil(b.$el,"BLOCKQUOTE").get(0)]);g&&g.previousSibling&&(e=g,f=g)}if(null!==e){var h,i=e.previousSibling;if(b.node.isBlock(e)&&b.node.isEditable(e)&&i&&a.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0)if(b.node.isDeletable(i))a(i).remove(),a(c).replaceWith(a.FE.MARKERS);else if(b.node.isEditable(i))if(b.node.isBlock(i))if(b.node.isEmpty(i)&&!b.node.isList(i))a(i).remove(),a(c).after(b.opts.keepFormatOnDelete?a.FE.INVISIBLE_SPACE:"");else{if(b.node.isList(i)&&(i=a(i).find("li:last").get(0)),h=b.node.contents(i),h.length&&"BR"==h[h.length-1].tagName&&a(h[h.length-1]).remove(),"BLOCKQUOTE"==i.tagName&&"BLOCKQUOTE"!=e.tagName)for(h=b.node.contents(i);h.length&&b.node.isBlock(h[h.length-1]);)i=h[h.length-1],h=b.node.contents(i);else if("BLOCKQUOTE"!=i.tagName&&"BLOCKQUOTE"==e.tagName)for(h=b.node.contents(e);h.length&&b.node.isBlock(h[0]);)e=h[0],h=b.node.contents(e);if(b.node.isEmpty(e))a(c).remove(),b.selection.setAtEnd(i,!0);else{a(c).replaceWith(a.FE.MARKERS);var j=i.childNodes;b.node.isBlock(j[j.length-1])?a(j[j.length-1]).append(f.innerHTML):a(i).append(f.innerHTML)}a(f).remove(),b.node.isEmpty(e)&&a(e).remove()}else a(c).replaceWith(a.FE.MARKERS),"BLOCKQUOTE"==e.tagName&&i.nodeType==Node.ELEMENT_NODE?a(i).remove():(a(i).after(b.node.isEmpty(e)?"":a(e).html()),a(e).remove(),"BR"==i.tagName&&a(i).remove())}}function j(c){for(var d=c;!d.previousSibling;)if(d=d.parentNode,b.node.isElement(d))return!1;d=d.previousSibling;var e;if(!b.node.isBlock(d)&&b.node.isEditable(d)){for(e=b.node.contents(d);d.nodeType!=Node.TEXT_NODE&&!b.node.isDeletable(d)&&e.length&&b.node.isEditable(d);)d=e[e.length-1],e=b.node.contents(d);if(d.nodeType==Node.TEXT_NODE){var f=d.textContent,g=f.length;if(f.length&&"\n"===f[f.length-1])return d.textContent=f.substring(0,g-2),0===d.textContent.length&&d.parentNode.removeChild(d),j(c);if(b.opts.tabSpaces&&f.length>=b.opts.tabSpaces){var i=f.substr(f.length-b.opts.tabSpaces,f.length-1);0===i.replace(/ /g,"").replace(new RegExp(a.FE.UNICODE_NBSP,"g"),"").length&&(g=f.length-b.opts.tabSpaces+1)}d.textContent=f.substring(0,g-h(f));var k=f.length!=d.textContent.length;0===d.textContent.length?k&&b.opts.keepFormatOnDelete?a(d).after(a.FE.INVISIBLE_SPACE+a.FE.MARKERS):(2!=d.parentNode.childNodes.length||d.parentNode!=c.parentNode)&&1!=d.parentNode.childNodes.length||b.node.isBlock(d.parentNode)||b.node.isElement(d.parentNode)||!b.node.isDeletable(d.parentNode)?(a(d).after(a.FE.MARKERS),b.node.isElement(d.parentNode)&&!c.nextSibling&&d.previousSibling&&"BR"==d.previousSibling.tagName&&a(c).after("<br>"),d.parentNode.removeChild(d)):(a(d.parentNode).after(a.FE.MARKERS),a(d.parentNode).remove()):a(d).after(a.FE.MARKERS)}else b.node.isDeletable(d)?(a(d).after(a.FE.MARKERS),a(d).remove()):c.nextSibling&&"BR"==c.nextSibling.tagName&&b.node.isVoid(d)&&"BR"!=d.tagName?(a(c.nextSibling).remove(),a(c).replaceWith(a.FE.MARKERS)):b.events.trigger("node.remove",[a(d)])!==!1&&(a(d).after(a.FE.MARKERS),a(d).remove())}else if(a.FE.NO_DELETE_TAGS.indexOf(d.tagName)<0&&(b.node.isEditable(d)||b.node.isDeletable(d)))if(b.node.isDeletable(d))a(c).replaceWith(a.FE.MARKERS),a(d).remove();else if(b.node.isEmpty(d)&&!b.node.isList(d))a(d).remove(),a(c).replaceWith(a.FE.MARKERS);else{for(b.node.isList(d)&&(d=a(d).find("li:last").get(0)),e=b.node.contents(d),e&&"BR"==e[e.length-1].tagName&&a(e[e.length-1]).remove(),e=b.node.contents(d);e&&b.node.isBlock(e[e.length-1]);)d=e[e.length-1],e=b.node.contents(d);a(d).append(a.FE.MARKERS);for(var l=c;!l.previousSibling;)l=l.parentNode;for(;l&&"BR"!==l.tagName&&!b.node.isBlock(l);){var m=l;l=l.nextSibling,a(d).append(m)}l&&"BR"==l.tagName&&a(l).remove(),a(c).remove()}else c.nextSibling&&"BR"==c.nextSibling.tagName&&a(c.nextSibling).remove()}function k(){var f=!1,k=b.markers.insert();if(!k)return!0;for(var l=k.parentNode;l&&!b.node.isElement(l);){if("false"===l.getAttribute("contenteditable"))return a(k).replaceWith(a.FE.MARKERS),b.selection.restore(),!1;if("true"===l.getAttribute("contenteditable"))break;l=l.parentNode}b.el.normalize();var m=k.previousSibling;if(m){var n=m.textContent;n&&n.length&&8203==n.charCodeAt(n.length-1)&&(1==n.length?a(m).remove():m.textContent=m.textContent.substr(0,n.length-h(n)))}return c(k)?f=j(k):d(k)?g(k)&&e(k,a(k).parents("li:first").get(0))?b.cursorLists._backspace(k):i(k):f=j(k),a(k).remove(),o(),b.html.fillEmptyBlocks(!0),b.opts.htmlUntouched||(b.html.cleanEmptyTags(),b.clean.lists()),b.spaces.normalizeAroundCursor(),b.selection.restore(),f}function l(c){var d=a(c).parentsUntil(b.$el,"BLOCKQUOTE").length>0,e=b.node.deepestParent(c,[],!d);if(e&&"BLOCKQUOTE"==e.tagName){var f=b.node.deepestParent(c,[a(c).parentsUntil(b.$el,"BLOCKQUOTE").get(0)]);f&&f.nextSibling&&(e=f)}if(null!==e){var g,h=e.nextSibling;if(b.node.isBlock(e)&&(b.node.isEditable(e)||b.node.isDeletable(e))&&h&&a.FE.NO_DELETE_TAGS.indexOf(h.tagName)<0)if(b.node.isDeletable(h))a(h).remove(),a(c).replaceWith(a.FE.MARKERS);else if(b.node.isBlock(h)&&b.node.isEditable(h))if(b.node.isList(h))if(b.node.isEmpty(e,!0))a(e).remove(),a(h).find("li:first").prepend(a.FE.MARKERS);else{var i=a(h).find("li:first");"BLOCKQUOTE"==e.tagName&&(g=b.node.contents(e),g.length&&b.node.isBlock(g[g.length-1])&&(e=g[g.length-1])),0===i.find("ul, ol").length&&(a(c).replaceWith(a.FE.MARKERS),i.find(b.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==i.get(0)&&a(this).replaceWith(a(this).html()+(b.node.isEmpty(this)?"":"<br>"))}),a(e).append(b.node.contents(i.get(0))),i.remove(),0===a(h).find("li").length&&a(h).remove())}else{if(g=b.node.contents(h),g.length&&"BR"==g[0].tagName&&a(g[0]).remove(),"BLOCKQUOTE"!=h.tagName&&"BLOCKQUOTE"==e.tagName)for(g=b.node.contents(e);g.length&&b.node.isBlock(g[g.length-1]);)e=g[g.length-1],g=b.node.contents(e);else if("BLOCKQUOTE"==h.tagName&&"BLOCKQUOTE"!=e.tagName)for(g=b.node.contents(h);g.length&&b.node.isBlock(g[0]);)h=g[0],g=b.node.contents(h);a(c).replaceWith(a.FE.MARKERS),a(e).append(h.innerHTML),a(h).remove()}else{for(a(c).replaceWith(a.FE.MARKERS);h&&"BR"!==h.tagName&&!b.node.isBlock(h)&&b.node.isEditable(h);){var j=h;h=h.nextSibling,a(e).append(j)}h&&"BR"==h.tagName&&b.node.isEditable(h)&&a(h).remove()}}}function m(d){for(var e=d;!e.nextSibling;)if(e=e.parentNode,b.node.isElement(e))return!1;if(e=e.nextSibling,"BR"==e.tagName&&b.node.isEditable(e))if(e.nextSibling){if(b.node.isBlock(e.nextSibling)&&b.node.isEditable(e.nextSibling)){if(!(a.FE.NO_DELETE_TAGS.indexOf(e.nextSibling.tagName)<0))return void a(e).remove();e=e.nextSibling,a(e.previousSibling).remove()}}else if(c(e)){if(g(d))b.cursorLists._del(d);else{var f=b.node.deepestParent(e);f&&((!b.node.isEmpty(b.node.blockParent(e))||(b.node.blockParent(e).nextSibling&&a.FE.NO_DELETE_TAGS.indexOf(b.node.blockParent(e).nextSibling.tagName))<0)&&a(e).remove(),l(d))}return}var i;if(!b.node.isBlock(e)&&b.node.isEditable(e)){for(i=b.node.contents(e);e.nodeType!=Node.TEXT_NODE&&i.length&&!b.node.isDeletable(e)&&b.node.isEditable(e);)e=i[0],i=b.node.contents(e);
e.nodeType==Node.TEXT_NODE?(a(e).before(a.FE.MARKERS),e.textContent.length&&(e.textContent=e.textContent.substring(h(e.textContent,!0),e.textContent.length))):b.node.isDeletable(e)?(a(e).before(a.FE.MARKERS),a(e).remove()):b.events.trigger("node.remove",[a(e)])!==!1&&(a(e).before(a.FE.MARKERS),a(e).remove()),a(d).remove()}else if(a.FE.NO_DELETE_TAGS.indexOf(e.tagName)<0&&(b.node.isEditable(e)||b.node.isDeletable(e)))if(b.node.isDeletable(e))a(d).replaceWith(a.FE.MARKERS),a(e).remove();else if(b.node.isList(e))d.previousSibling?(a(e).find("li:first").prepend(d),b.cursorLists._backspace(d)):(a(e).find("li:first").prepend(a.FE.MARKERS),a(d).remove());else if(i=b.node.contents(e),i&&"BR"==i[0].tagName&&a(i[0]).remove(),i&&"BLOCKQUOTE"==e.tagName){var j=i[0];for(a(d).before(a.FE.MARKERS);j&&"BR"!=j.tagName;){var k=j;j=j.nextSibling,a(d).before(k)}j&&"BR"==j.tagName&&a(j).remove()}else a(d).after(a(e).html()).after(a.FE.MARKERS),a(e).remove()}function n(){var e=b.markers.insert();if(!e)return!1;if(b.el.normalize(),c(e))if(g(e))if(0===a(e).parents("li:first").find("ul, ol").length)b.cursorLists._del(e);else{var f=a(e).parents("li:first").find("ul:first, ol:first").find("li:first");f=f.find(b.html.blockTagsQuery()).get(-1)||f,f.prepend(e),b.cursorLists._backspace(e)}else l(e);else m(d(e)?e:e);a(e).remove(),o(),b.html.fillEmptyBlocks(!0),b.opts.htmlUntouched||(b.html.cleanEmptyTags(),b.clean.lists()),b.spaces.normalizeAroundCursor(),b.selection.restore()}function o(){for(var a=b.el.querySelectorAll("blockquote:empty"),c=0;c<a.length;c++)a[c].parentNode.removeChild(a[c])}function p(){b.$el.find(".fr-to-remove").each(function(){for(var c=b.node.contents(this),d=0;d<c.length;d++)c[d].nodeType==Node.TEXT_NODE&&(c[d].textContent=c[d].textContent.replace(/\u200B/g,""));a(this).replaceWith(this.innerHTML)})}function q(c,d,e){var g,h=b.node.deepestParent(c,[],!e);if(h&&"BLOCKQUOTE"==h.tagName)return f(c,h)?(g=b.html.defaultTag(),g?a(h).after("<"+g+">"+a.FE.MARKERS+"<br></"+g+">"):a(h).after(a.FE.MARKERS+"<br>"),a(c).remove(),!1):(s(c,d,e),!1);if(null==h)g=b.html.defaultTag(),g&&b.node.isElement(c.parentNode)?a(c).replaceWith("<"+g+">"+a.FE.MARKERS+"<br></"+g+">"):!c.previousSibling||a(c.previousSibling).is("br")||c.nextSibling?a(c).replaceWith("<br>"+a.FE.MARKERS):a(c).replaceWith("<br>"+a.FE.MARKERS+"<br>");else{var i=c,j="";(!b.node.isBlock(h)||d)&&(j="<br/>");var k="",l="";g=b.html.defaultTag();var m="",n="";g&&b.node.isBlock(h)&&(m="<"+g+">",n="</"+g+">",h.tagName==g.toUpperCase()&&(m=b.node.openTagString(a(h).clone().removeAttr("id").get(0))));do if(i=i.parentNode,!d||i!=h||d&&!b.node.isBlock(h))if(k+=b.node.closeTagString(i),i==h&&b.node.isBlock(h))l=m+l;else{var o="A"==i.tagName&&f(c,i)?"fr-to-remove":"";l=b.node.openTagString(a(i).clone().addClass(o).get(0))+l}while(i!=h);j=k+j+l+(c.parentNode==h&&b.node.isBlock(h)?"":a.FE.INVISIBLE_SPACE)+a.FE.MARKERS,b.node.isBlock(h)&&!a(h).find("*:last").is("br")&&a(h).append("<br/>"),a(c).after('<span id="fr-break"></span>'),a(c).remove(),h.nextSibling&&!b.node.isBlock(h.nextSibling)||b.node.isBlock(h)||a(h).after("<br>");var p;p=!d&&b.node.isBlock(h)?b.node.openTagString(h)+a(h).html()+n:b.node.openTagString(h)+a(h).html()+b.node.closeTagString(h),p=p.replace(/<span id="fr-break"><\/span>/g,j),a(h).replaceWith(p)}}function r(c,d,g){var h,i=b.node.deepestParent(c,[],!g);if(i&&"TABLE"==i.tagName)return a(i).find("td:first, th:first").prepend(c),r(c,d,g);if(i&&"BLOCKQUOTE"==i.tagName){if(e(c,i))return h=b.html.defaultTag(),h?a(i).before("<"+h+">"+a.FE.MARKERS+"<br></"+h+">"):a(i).before(a.FE.MARKERS+"<br>"),a(c).remove(),!1;f(c,i)?q(c,d,!0):s(c,d,!0)}if(null==i)h=b.html.defaultTag(),h&&b.node.isElement(c.parentNode)?a(c).replaceWith("<"+h+">"+a.FE.MARKERS+"<br></"+h+">"):a(c).replaceWith("<br>"+a.FE.MARKERS);else{if(b.node.isBlock(i))if("PRE"==i.tagName&&(d=!0),d)a(c).remove(),a(i).prepend("<br>"+a.FE.MARKERS);else{if(b.node.isEmpty(i,!0))return q(c,d,g);if(b.opts.keepFormatOnDelete){for(var j=c,k=a.FE.INVISIBLE_SPACE;j!=i&&!b.node.isElement(j);)j=j.parentNode,k=b.node.openTagString(j)+k+b.node.closeTagString(j);a(i).before(k)}else a(i).before(b.node.openTagString(a(i).clone().removeAttr("id").get(0))+"<br>"+b.node.closeTagString(i))}else a(i).before("<br>");a(c).remove()}}function s(c,d,g){var h=b.node.deepestParent(c,[],!g);if(null==h)b.html.defaultTag()&&c.parentNode===b.el?a(c).replaceWith("<"+b.html.defaultTag()+">"+a.FE.MARKERS+"<br></"+b.html.defaultTag()+">"):((!c.nextSibling||b.node.isBlock(c.nextSibling))&&a(c).after("<br>"),a(c).replaceWith("<br>"+a.FE.MARKERS));else{var i=c,j="";"PRE"==h.tagName&&(d=!0),(!b.node.isBlock(h)||d)&&(j="<br>");var k="",l="";do{var m=i;if(i=i.parentNode,"BLOCKQUOTE"==h.tagName&&b.node.isEmpty(m)&&!b.node.hasClass(m,"fr-marker")&&a(m).find(c).length>0&&a(m).after(c),("BLOCKQUOTE"!=h.tagName||!f(c,i)&&!e(c,i))&&(!d||i!=h||d&&!b.node.isBlock(h))){k+=b.node.closeTagString(i);var n="A"==i.tagName&&f(c,i)?"fr-to-remove":"";l=b.node.openTagString(a(i).clone().addClass(n).removeAttr("id").get(0))+l}}while(i!=h);var o=h==c.parentNode&&b.node.isBlock(h)||c.nextSibling;if("BLOCKQUOTE"==h.tagName){c.previousSibling&&b.node.isBlock(c.previousSibling)&&c.nextSibling&&"BR"==c.nextSibling.tagName&&(a(c.nextSibling).after(c),c.nextSibling&&"BR"==c.nextSibling.tagName&&a(c.nextSibling).remove());var p=b.html.defaultTag();j=k+j+(p?"<"+p+">":"")+a.FE.MARKERS+"<br>"+(p?"</"+p+">":"")+l}else j=k+j+l+(o?"":a.FE.INVISIBLE_SPACE)+a.FE.MARKERS;a(c).replaceWith('<span id="fr-break"></span>');var q=b.node.openTagString(h)+a(h).html()+b.node.closeTagString(h);q=q.replace(/<span id="fr-break"><\/span>/g,j),a(h).replaceWith(q)}}function t(e){var f=b.markers.insert();if(!f)return!0;b.el.normalize();var h=!1;a(f).parentsUntil(b.$el,"BLOCKQUOTE").length>0&&(e=!1,h=!0),a(f).parentsUntil(b.$el,"TD, TH").length&&(h=!1),c(f)?!g(f)||e||h?q(f,e,h):b.cursorLists._endEnter(f):d(f)?!g(f)||e||h?r(f,e,h):b.cursorLists._startEnter(f):!g(f)||e||h?s(f,e,h):b.cursorLists._middleEnter(f),p(),b.html.fillEmptyBlocks(!0),b.opts.htmlUntouched||(b.html.cleanEmptyTags(),b.clean.lists()),b.spaces.normalizeAroundCursor(),b.selection.restore()}return{enter:t,backspace:k,del:n,isAtEnd:f,isAtStart:e}},a.FE.ENTER_P=0,a.FE.ENTER_DIV=1,a.FE.ENTER_BR=2,a.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,IME:229},a.extend(a.FE.DEFAULTS,{enter:a.FE.ENTER_P,multiLine:!0,tabSpaces:0}),a.FE.MODULES.keys=function(b){function c(a){b.opts.multiLine?(b.helpers.isIOS()||(a.preventDefault(),a.stopPropagation()),b.selection.isCollapsed()||b.selection.remove(),b.cursor.enter()):(a.preventDefault(),a.stopPropagation())}function d(a){a.preventDefault(),a.stopPropagation(),b.opts.multiLine&&(b.selection.isCollapsed()||b.selection.remove(),b.cursor.enter(!0))}function e(){setTimeout(function(){b.events.disableBlur(),b.events.focus()},0)}function f(a){if(b.selection.isCollapsed())if(b.cursor.backspace(),b.helpers.isIOS()){var c=b.selection.ranges(0);c.deleteContents(),c.insertNode(document.createTextNode("\u200b"));var d=b.selection.get();d.modify("move","rtl"===b.opts.direction?"left":"right","character")}else a.preventDefault(),a.stopPropagation();else a.preventDefault(),a.stopPropagation(),b.selection.remove(),b.html.fillEmptyBlocks();b.placeholder.refresh()}function g(a){a.preventDefault(),a.stopPropagation(),""===b.selection.text()?b.cursor.del():b.selection.remove(),b.placeholder.refresh()}function h(c){var d=b.selection.element();if(!b.helpers.isMobile()&&d&&"A"==d.tagName){c.preventDefault(),c.stopPropagation(),b.selection.isCollapsed()||b.selection.remove();var e=b.markers.insert();if(e){var f=e.previousSibling,g=e.nextSibling;!g&&e.parentNode&&"A"==e.parentNode.tagName?(e.parentNode.insertAdjacentHTML("afterend","&nbsp;"+a.FE.MARKERS),e.parentNode.removeChild(e)):(f&&f.nodeType==Node.TEXT_NODE&&1==f.textContent.length&&160==f.textContent.charCodeAt(0)?f.textContent=f.textContent+" ":e.insertAdjacentHTML("beforebegin","&nbsp;"),e.outerHTML=a.FE.MARKERS),b.selection.restore()}}}function i(){if(b.browser.mozilla&&b.selection.isCollapsed()&&!H){var a=b.selection.ranges(0),c=a.startContainer,d=a.startOffset;c&&c.nodeType==Node.TEXT_NODE&&d<=c.textContent.length&&d>0&&32==c.textContent.charCodeAt(d-1)&&(b.selection.save(),b.spaces.normalize(),b.selection.restore())}}function j(){b.selection.isFull()&&setTimeout(function(){var c=b.html.defaultTag();c?b.$el.html("<"+c+">"+a.FE.MARKERS+"<br/></"+c+">"):b.$el.html(a.FE.MARKERS+"<br/>"),b.selection.restore(),b.placeholder.refresh(),b.button.bulkRefresh(),b.undo.saveStep()},0)}function k(a){if(b.opts.tabSpaces>0)if(b.selection.isCollapsed()){b.undo.saveStep(),a.preventDefault(),a.stopPropagation();for(var c="",d=0;d<b.opts.tabSpaces;d++)c+="&nbsp;";b.html.insert(c),b.placeholder.refresh(),b.undo.saveStep()}else a.preventDefault(),a.stopPropagation(),a.shiftKey?b.commands.outdent():b.commands.indent()}function l(){H=!1}function m(){H=!1}function n(){return H}function o(){var c=b.html.defaultTag();c?b.$el.html("<"+c+">"+a.FE.MARKERS+"<br/></"+c+">"):b.$el.html(a.FE.MARKERS+"<br/>"),b.selection.restore()}function p(i){var j=b.selection.element();if(j&&["INPUT","TEXTAREA"].indexOf(j.tagName)>=0)return!0;b.events.disableBlur(),I=null;var l=i.which;if(16===l)return!0;if(E=l,l===a.FE.KEYCODE.IME)return H=!0,!0;H=!1;var m=v(l)&&!t(i)&&!i.altKey,n=l==a.FE.KEYCODE.BACKSPACE||l==a.FE.KEYCODE.DELETE;return(b.selection.isFull()&&!b.opts.keepFormatOnDelete&&!b.placeholder.isVisible()||n&&b.placeholder.isVisible()&&b.opts.keepFormatOnDelete)&&(m||n)&&(o(),!v(l))?(i.preventDefault(),!0):(l==a.FE.KEYCODE.ENTER?i.shiftKey?d(i):c(i):l===a.FE.KEYCODE.BACKSPACE&&(i.metaKey||i.ctrlKey)?e():l!=a.FE.KEYCODE.BACKSPACE||t(i)||i.altKey?l!=a.FE.KEYCODE.DELETE||t(i)||i.altKey||i.shiftKey?l==a.FE.KEYCODE.SPACE?h(i):l==a.FE.KEYCODE.TAB?k(i):t(i)||!v(i.which)||b.selection.isCollapsed()||i.ctrlKey||b.selection.remove():b.placeholder.isVisible()?(b.opts.keepFormatOnDelete||o(),i.preventDefault(),i.stopPropagation()):g(i):b.placeholder.isVisible()?(b.opts.keepFormatOnDelete||o(),i.preventDefault(),i.stopPropagation()):f(i),void b.events.enableBlur())}function q(a){for(var c=b.doc.createTreeWalker(a,NodeFilter.SHOW_TEXT,b.node.filter(function(a){return/\u200B/gi.test(a.textContent)}),!1);c.nextNode();){var d=c.currentNode;d.textContent=d.textContent.replace(/\u200B/gi,"")}}function r(){if(!b.$wp)return!0;var c;b.opts.height||b.opts.heightMax?(c=b.position.getBoundingRect().top,(b.helpers.isIOS()||b.helpers.isAndroid())&&(c-=b.helpers.scrollTop()),b.opts.iframe&&(c+=b.$iframe.offset().top),c>b.$wp.offset().top-b.helpers.scrollTop()+b.$wp.height()-20&&b.$wp.scrollTop(c+b.$wp.scrollTop()-(b.$wp.height()+b.$wp.offset().top)+b.helpers.scrollTop()+20)):(c=b.position.getBoundingRect().top,b.opts.toolbarBottom&&(c+=b.opts.toolbarStickyOffset),(b.helpers.isIOS()||b.helpers.isAndroid())&&(c-=b.helpers.scrollTop()),b.opts.iframe&&(c+=b.$iframe.offset().top,c-=b.helpers.scrollTop()),c+=b.opts.toolbarStickyOffset,c>b.o_win.innerHeight-20&&a(b.o_win).scrollTop(c+b.helpers.scrollTop()-b.o_win.innerHeight+20),c=b.position.getBoundingRect().top,b.opts.toolbarBottom||(c-=b.opts.toolbarStickyOffset),(b.helpers.isIOS()||b.helpers.isAndroid())&&(c-=b.helpers.scrollTop()),b.opts.iframe&&(c+=b.$iframe.offset().top,c-=b.helpers.scrollTop()),c<b.$tb.height()+20&&a(b.o_win).scrollTop(c+b.helpers.scrollTop()-b.$tb.height()-20))}function s(c){var d=b.selection.element();if(d&&["INPUT","TEXTAREA"].indexOf(d.tagName)>=0)return!0;if(c&&0===c.which&&E&&(c.which=E),b.helpers.isAndroid()&&b.browser.mozilla)return!0;if(H)return!1;if(c&&b.helpers.isIOS()&&c.which==a.FE.KEYCODE.ENTER&&b.doc.execCommand("delete"),!b.selection.isCollapsed())return!0;if(c&&(c.which===a.FE.KEYCODE.META||c.which==a.FE.KEYCODE.CTRL))return!0;if(c&&u(c.which))return!0;c&&!b.helpers.isIOS()&&(c.which==a.FE.KEYCODE.ENTER||c.which==a.FE.KEYCODE.BACKSPACE||c.which>=37&&c.which<=40&&!b.browser.msie)&&r();var e=function(a){if(!a)return!1;var b=a.innerHTML;return b=b.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""),b&&/\u200B/.test(b)&&b.replace(/\u200B/gi,"").length>0?!0:!1},f=function(a){var c=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!b.helpers.isIOS()||0===((a.textContent||"").match(c)||[]).length},g=b.selection.element();e(g)&&!b.node.hasClass(g,"fr-marker")&&"IFRAME"!=g.tagName&&f(g)&&(b.selection.save(),q(g),b.selection.restore())}function t(a){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(a.metaKey&&!a.altKey)return!0}else if(a.ctrlKey&&!a.altKey)return!0;return!1}function u(b){return b>=a.FE.KEYCODE.ARROW_LEFT&&b<=a.FE.KEYCODE.ARROW_DOWN?!0:void 0}function v(c){if(c>=a.FE.KEYCODE.ZERO&&c<=a.FE.KEYCODE.NINE)return!0;if(c>=a.FE.KEYCODE.NUM_ZERO&&c<=a.FE.KEYCODE.NUM_MULTIPLY)return!0;if(c>=a.FE.KEYCODE.A&&c<=a.FE.KEYCODE.Z)return!0;if(b.browser.webkit&&0===c)return!0;switch(c){case a.FE.KEYCODE.SPACE:case a.FE.KEYCODE.QUESTION_MARK:case a.FE.KEYCODE.NUM_PLUS:case a.FE.KEYCODE.NUM_MINUS:case a.FE.KEYCODE.NUM_PERIOD:case a.FE.KEYCODE.NUM_DIVISION:case a.FE.KEYCODE.SEMICOLON:case a.FE.KEYCODE.FF_SEMICOLON:case a.FE.KEYCODE.DASH:case a.FE.KEYCODE.EQUALS:case a.FE.KEYCODE.FF_EQUALS:case a.FE.KEYCODE.COMMA:case a.FE.KEYCODE.PERIOD:case a.FE.KEYCODE.SLASH:case a.FE.KEYCODE.APOSTROPHE:case a.FE.KEYCODE.SINGLE_QUOTE:case a.FE.KEYCODE.OPEN_SQUARE_BRACKET:case a.FE.KEYCODE.BACKSLASH:case a.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function w(c){var d=c.which;return t(c)||d>=37&&40>=d||!v(d)&&d!=a.FE.KEYCODE.DELETE&&d!=a.FE.KEYCODE.BACKSPACE&&d!=a.FE.KEYCODE.ENTER&&d!=a.FE.KEYCODE.IME?!0:(F||(G=b.snapshot.get(),b.undo.canDo()||b.undo.saveStep()),clearTimeout(F),void(F=setTimeout(function(){F=null,b.undo.saveStep()},Math.max(250,b.opts.typingTimer))))}function x(a){var c=a.which;return t(a)||c>=37&&40>=c?!0:void(G&&F?(b.undo.saveStep(G),G=null):"undefined"!=typeof c&&0!==c||G||F||b.undo.saveStep())}function y(){F&&(clearTimeout(F),b.undo.saveStep(),G=null)}function z(b){var c=b.which;return t(b)||c==a.FE.KEYCODE.F5}function A(a){if(a&&"BR"==a.tagName)return!1;try{return 0===(a.textContent||"").length&&a.querySelector&&!a.querySelector(":scope > br")||a.childNodes&&1==a.childNodes.length&&a.childNodes[0].getAttribute&&"false"==a.childNodes[0].getAttribute("contenteditable")}catch(b){return!1}}function B(c){var d=b.el.childNodes,e=b.html.defaultTag();return c.target&&c.target!==b.el?!0:0===d.length?!0:void(b.$el.outerHeight()-c.offsetY<=10?A(d[d.length-1])&&(e?b.$el.append("<"+e+">"+a.FE.MARKERS+"<br></"+e+">"):b.$el.append(a.FE.MARKERS+"<br>"),b.selection.restore(),r()):c.offsetY<=10&&A(d[0])&&(e?b.$el.prepend("<"+e+">"+a.FE.MARKERS+"<br></"+e+">"):b.$el.prepend(a.FE.MARKERS+"<br>"),b.selection.restore(),r()))}function C(){F&&clearTimeout(F)}function D(){b.events.on("keydown",w),b.events.on("input",i),b.events.on("mousedown",m),b.events.on("keyup input",x),b.events.on("keypress",l),b.events.on("keydown",p),b.events.on("keyup",s),b.events.on("destroy",C),b.events.on("html.inserted",s),b.events.on("cut",j),b.events.on("click",B)}var E,F,G,H=!1,I=null;return{_init:D,ctrlKey:t,isCharacter:v,isArrow:u,forceUndo:y,isIME:n,isBrowserAction:z,positionCaret:r}},a.FE.MODULES.accessibility=function(b){function c(a){if(a&&a.length&&!b.$el.find('[contenteditable="true"]').is(":focus")){a.data("blur-event-set")||a.parents(".fr-popup").length||(b.events.$on(a,"blur",function(){var c=a.parents(".fr-toolbar, .fr-popup").data("instance")||b;c.events.blurActive()&&c.events.trigger("blur"),setTimeout(function(){c.events.enableBlur()},100)},!0),a.data("blur-event-set",!0));var c=a.parents(".fr-toolbar, .fr-popup").data("instance")||b;c.events.disableBlur(),a.focus(),b.shared.$f_el=a}}function d(a,b){var d=b?"last":"first",e=a.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[d]();return e.length?(c(e),!0):void 0}function e(a){return a.is("input, textarea")&&g(),b.events.disableBlur(),a.focus(),!0}function f(a,c){var d=a.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(c?":last":":first");if(d.length)return e(d);if(b.shared.with_kb){var f=a.find(".fr-active-item:visible:first");if(f.length)return e(f);var g=a.find("[tabIndex]:visible:first");if(g.length)return e(g)}}function g(){0===b.$el.find(".fr-marker").length&&b.core.hasFocus()&&b.selection.save()}function h(a){a.$el.find(".fr-marker").length&&(a.events.disableBlur(),a.selection.restore(),a.events.enableBlur())}function i(a){var c=a.children().not(".fr-buttons");c.data("mouseenter-event-set")||(b.events.$on(c,"mouseenter","[tabIndex]",function(d){var e=a.data("instance")||b;if(!F)return d.stopPropagation(),void d.preventDefault();var f=c.find(":focus:first");f.length&&!f.is("input, button, textarea")&&(e.events.disableBlur(),f.blur(),e.events.disableBlur(),e.events.focus())}),c.data("mouseenter-event-set",!0)),!f(c)&&b.shared.with_kb&&d(a.find(".fr-buttons"))}function j(a){b.core.hasFocus()||(b.events.disableBlur(),b.events.focus()),b.accessibility.saveSelection(),b.events.disableBlur(),b.$el.blur(),b.selection.clear(),b.events.disableBlur(),b.shared.with_kb?a.find(".fr-command[tabIndex], [tabIndex]").first().focus():a.find("[tabIndex]:first").focus()}function k(){var a=b.popups.areVisible();if(a){var c=a.find(".fr-buttons");return c.find("button:focus, .fr-group span:focus").length?!d(a.data("instance").$tb):!d(c)}return!d(b.$tb)}function l(){var a=null;return b.shared.$f_el.is(".fr-dropdown.fr-active")?a=b.shared.$f_el:b.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(a=b.shared.$f_el.closest(".fr-dropdown-menu").prev()),a}function m(e,g,h){if(b.shared.$f_el){var i=l();i&&(b.button.click(i),b.shared.$f_el=i);var j=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),k=j.index(b.shared.$f_el);if(0===k&&!h||k==j.length-1&&h){var m;if(g){if(e.parent().is(".fr-popup")){var n=e.parent().children().not(".fr-buttons");m=!f(n,!h)}m===!1&&(b.shared.$f_el=null)}g&&m===!1||d(e,!h)}else c(a(j.get(k+(h?1:-1))));return!1}}function n(a,b){return m(a,b,!0)}function o(a,b){return m(a,b)}function p(a){if(b.shared.$f_el){var d;if(b.shared.$f_el.is(".fr-dropdown.fr-active"))return d=a?b.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():b.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last(),c(d),!1;if(b.shared.$f_el.is("a.fr-command"))return d=a?b.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():b.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first(),d.length||(d=a?b.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():b.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),c(d),!1}}function q(){return b.shared.$f_el&&b.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?s():p(!0)}function r(){return p()}function s(){if(b.shared.$f_el){if(b.shared.$f_el.hasClass("fr-dropdown"))b.button.click(b.shared.$f_el);else if(b.shared.$f_el.is("button.fr-back")){b.opts.toolbarInline&&(b.events.disableBlur(),b.events.focus());var a=b.popups.areVisible(b);a&&(b.shared.with_kb=!1),b.button.click(b.shared.$f_el),z(a)}else{if(b.events.disableBlur(),b.button.click(b.shared.$f_el),b.shared.$f_el.attr("data-popup")){var c=b.popups.areVisible(b);c&&c.data("popup-button",b.shared.$f_el)}else if(b.shared.$f_el.attr("data-modal")){var d=b.modals.areVisible(b);d&&d.data("modal-button",b.shared.$f_el)}b.shared.$f_el=null}return!1}}function t(){b.shared.$f_el&&(b.events.disableBlur(),b.shared.$f_el.blur(),b.shared.$f_el=null),b.events.trigger("toolbar.focusEditor")!==!1&&(b.events.disableBlur(),b.$el.focus(),b.events.focus())}function u(a){if(b.shared.$f_el){var d=l();return d?(b.button.click(d),c(d)):a.parent().find(".fr-back:visible").length?(b.shared.with_kb=!1,b.opts.toolbarInline&&(b.events.disableBlur(),b.events.focus()),b.button.exec(a.parent().find(".fr-back:visible:first")),z(a.parent())):b.shared.$f_el.is("button, .fr-group span")&&(a.parent().is(".fr-popup")?(h(b),b.shared.$f_el=null,b.events.trigger("toolbar.esc")!==!1&&(b.popups.hide(a.parent()),b.opts.toolbarInline&&b.toolbar.showInline(null,!0),z(a.parent()))):t()),!1}}function v(c,d){var e=-1!=navigator.userAgent.indexOf("Mac OS X")?c.metaKey:c.ctrlKey,f=c.which,g=!1;return f!=a.FE.KEYCODE.TAB||e||c.shiftKey||c.altKey?f!=a.FE.KEYCODE.ARROW_RIGHT||e||c.shiftKey||c.altKey?f!=a.FE.KEYCODE.TAB||e||!c.shiftKey||c.altKey?f!=a.FE.KEYCODE.ARROW_LEFT||e||c.shiftKey||c.altKey?f!=a.FE.KEYCODE.ARROW_UP||e||c.shiftKey||c.altKey?f!=a.FE.KEYCODE.ARROW_DOWN||e||c.shiftKey||c.altKey?f!=a.FE.KEYCODE.ENTER&&f!=a.FE.KEYCODE.SPACE||e||c.shiftKey||c.altKey?f!=a.FE.KEYCODE.ESC||e||c.shiftKey||c.altKey?f!=a.FE.KEYCODE.F10||e||c.shiftKey||!c.altKey||(g=k()):g=u(d):g=s():g=q():g=r():g=o(d):g=o(d,!0):g=n(d):g=n(d,!0),b.shared.$f_el||void 0!==g||(g=!0),!g&&b.keys.isBrowserAction(c)&&(g=!0),g?!0:(c.preventDefault(),c.stopPropagation(),!1)}function w(c){c&&c.length&&(b.events.$on(c,"keydown",function(d){if(!a(d.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var e=c.parents(".fr-popup").data("instance")||c.data("instance")||b;b.shared.with_kb=!0;var f=e.accessibility.exec(d,c);return b.shared.with_kb=!1,f},!0),b.events.$on(c,"mouseenter","[tabIndex]",function(d){var e=c.parents(".fr-popup").data("instance")||c.data("instance")||b;if(!F)return d.stopPropagation(),void d.preventDefault();var f=a(d.currentTarget);e.shared.$f_el&&e.shared.$f_el.not(f)&&e.accessibility.focusEditor()},!0))}function x(a){var c=b.popups.get(a),d=y(a);w(c.find(".fr-buttons")),b.events.$on(c,"mouseenter","tabIndex",d._tiMouseenter,!0),b.events.$on(c.children().not(".fr-buttons"),"keydown","[tabIndex]",d._tiKeydown,!0),b.popups.onHide(a,function(){h(c.data("instance")||b)}),b.popups.onShow(a,function(){F=!1,setTimeout(function(){F=!0},0)})}function y(c){var e=b.popups.get(c);return{_tiKeydown:function(g){var i=e.data("instance")||b;if(i.events.trigger("popup.tab",[g])===!1)return!1;var j=g.which,k=e.find(":focus:first");if(a.FE.KEYCODE.TAB==j){g.preventDefault();var l=e.children().not(".fr-buttons"),m=l.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),n=m.indexOf(this)+(g.shiftKey?-1:1);if(n>=0&&n<m.length)return i.events.disableBlur(),a(m[n]).focus(),g.stopPropagation(),!1;var o=e.find(".fr-buttons");if(o.length&&d(o,g.shiftKey?!0:!1))return g.stopPropagation(),!1;if(f(l))return g.stopPropagation(),!1}else{if(a.FE.KEYCODE.ENTER!=j||!g.target||"TEXTAREA"===g.target.tagName)return a.FE.KEYCODE.ESC==j?(g.preventDefault(),g.stopPropagation(),h(i),i.popups.isVisible(c)&&e.find(".fr-back:visible").length?(i.opts.toolbarInline&&(i.events.disableBlur(),i.events.focus()),i.button.exec(e.find(".fr-back:visible:first")),z(e)):i.popups.isVisible(c)&&e.find(".fr-dismiss:visible").length?i.button.exec(e.find(".fr-dismiss:visible:first")):(i.popups.hide(c),i.opts.toolbarInline&&i.toolbar.showInline(null,!0),z(e)),!1):a.FE.KEYCODE.SPACE==j&&(k.is(".fr-submit")||k.is(".fr-dismiss"))?(g.preventDefault(),g.stopPropagation(),i.events.disableBlur(),i.button.exec(k),!0):i.keys.isBrowserAction(g)?void g.stopPropagation():k.is("input[type=text], textarea")?void g.stopPropagation():a.FE.KEYCODE.SPACE==j&&(k.is(".fr-link-attr")||k.is("input[type=file]"))?void g.stopPropagation():(g.stopPropagation(),g.preventDefault(),!1);var p=null;e.find(".fr-submit:visible").length>0?p=e.find(".fr-submit:visible:first"):e.find(".fr-dismiss:visible").length&&(p=e.find(".fr-dismiss:visible:first")),p&&(g.preventDefault(),g.stopPropagation(),i.events.disableBlur(),i.button.exec(p))}},_tiMouseenter:function(){var a=e.data("instance")||b;C(a)}}}function z(a){var b=a.data("popup-button");b&&setTimeout(function(){c(b),a.data("popup-button",null)},0)}function A(a){var b=a.data("modal-button");b&&setTimeout(function(){c(b),a.data("modal-button",null)},0)}function B(){return null!=b.shared.$f_el}function C(a){var c=b.popups.areVisible(a);c&&c.data("popup-button",null)}function D(c){var d=-1!=navigator.userAgent.indexOf("Mac OS X")?c.metaKey:c.ctrlKey,e=c.which;if(e==a.FE.KEYCODE.F10&&!d&&!c.shiftKey&&c.altKey){b.shared.with_kb=!0;var g=b.popups.areVisible(b),h=!1;return g&&(h=f(g.children().not(".fr-buttons"))),h||k(),b.shared.with_kb=!1,c.preventDefault(),c.stopPropagation(),!1}return!0}function E(){b.$wp?b.events.on("keydown",D,!0):b.events.$on(b.$win,"keydown",D,!0),b.events.on("mousedown",function(a){C(b),b.shared.$f_el&&(h(b),a.stopPropagation(),b.events.disableBlur(),b.shared.$f_el=null)},!0),b.events.on("blur",function(){b.shared.$f_el=null,C(b)},!0)}var F=!0;return{_init:E,registerPopup:x,registerToolbar:w,focusToolbarElement:c,focusToolbar:d,focusContent:f,focusPopup:i,focusModal:j,focusEditor:t,focusPopupButton:z,focusModalButton:A,hasFocus:B,exec:v,saveSelection:g,restoreSelection:h}},a.FE.MODULES.format=function(b){function c(a,b){var c="<"+a;for(var d in b)b.hasOwnProperty(d)&&(c+=" "+d+'="'+b[d]+'"');return c+=">"}function d(a){return"</"+a+">"}function e(a,b){var c=a;for(var d in b)b.hasOwnProperty(d)&&(c+="id"==d?"#"+b[d]:"class"==d?"."+b[d]:"["+d+'="'+b[d]+'"]');return c}function f(a,b){return a&&a.nodeType==Node.ELEMENT_NODE?(a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector).call(a,b):!1}function g(d,e,f){if(d){if(b.node.isBlock(d))return g(d.firstChild,e,f),!1;for(var h=a(c(e,f)).insertBefore(d),i=d;i&&!a(i).is(".fr-marker")&&0===a(i).find(".fr-marker").length&&"UL"!=i.tagName&&"OL"!=i.tagName;){var j=i;i=i.nextSibling,h.append(j)}if(i)(a(i).find(".fr-marker").length||"UL"==i.tagName||"OL"==i.tagName)&&g(i.firstChild,e,f);else{for(var k=h.get(0).parentNode;k&&!k.nextSibling&&!b.node.isElement(k);)k=k.parentNode;if(k){var l=k.nextSibling;l&&(b.node.isBlock(l)?"HR"===l.tagName?g(l.nextSibling,e,f):g(l.firstChild,e,f):g(l,e,f))}}h.is(":empty")&&h.remove()}}function h(h,i){var j;if("undefined"==typeof i&&(i={}),i.style&&delete i.style,b.selection.isCollapsed()){b.markers.insert();var k=b.$el.find(".fr-marker");k.replaceWith(c(h,i)+a.FE.INVISIBLE_SPACE+a.FE.MARKERS+d(h)),b.selection.restore()}else{b.selection.save();var l=b.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling;g(l,h,i);var m;do for(m=b.$el.find(e(h,i)+" > "+e(h,i)),j=0;j<m.length;j++)m[j].outerHTML=m[j].innerHTML;while(m.length);b.el.normalize();var n=b.el.querySelectorAll(".fr-marker");for(j=0;j<n.length;j++){var o=a(n[j]);o.data("type")===!0?f(o.get(0).nextSibling,e(h,i))&&o.next().prepend(o):f(o.get(0).previousSibling,e(h,i))&&o.prev().append(o)}b.selection.restore()}}function i(a,c,d,g){if(!g){var h=!1;if(a.data("type")===!0)for(;b.node.isFirstSibling(a.get(0))&&!a.parent().is(b.$el)&&!a.parent().is("ol")&&!a.parent().is("ul");)a.parent().before(a),h=!0;else if(a.data("type")===!1)for(;b.node.isLastSibling(a.get(0))&&!a.parent().is(b.$el)&&!a.parent().is("ol")&&!a.parent().is("ul");)a.parent().after(a),h=!0;if(h)return!0}if(a.parents(c).length||"undefined"==typeof c){var i="",j="",k=a.parent();if(k.is(b.$el)||b.node.isBlock(k.get(0)))return!1;for(;!b.node.isBlock(k.parent().get(0))&&("undefined"==typeof c||"undefined"!=typeof c&&!f(k.get(0),e(c,d)));)i+=b.node.closeTagString(k.get(0)),j=b.node.openTagString(k.get(0))+j,k=k.parent();var l=a.get(0).outerHTML;a.replaceWith('<span id="mark"></span>');var m=k.html().replace(/<span id="mark"><\/span>/,i+b.node.closeTagString(k.get(0))+j+l+i+b.node.openTagString(k.get(0))+j);return k.replaceWith(b.node.openTagString(k.get(0))+m+b.node.closeTagString(k.get(0))),!0}return!1}function j(c,d,g,h){for(var i=b.node.contents(c.get(0)),k=0;k<i.length;k++){var l=i[k];if(b.node.hasClass(l,"fr-marker"))d=(d+1)%2;else if(d)if(a(l).find(".fr-marker").length>0)d=j(a(l),d,g,h);else{for(var m=a(l).find(g||"*:not(a):not(br)"),n=m.length-1;n>=0;n--){var o=m[n];b.node.isBlock(o)||b.node.isVoid(o)||"undefined"!=typeof g&&!f(o,e(g,h))?b.node.isBlock(o)&&"undefined"==typeof g&&"TABLE"!=l.tagName&&b.node.clearAttributes(o):o.outerHTML=o.innerHTML}"undefined"==typeof g&&l.nodeType==Node.ELEMENT_NODE&&!b.node.isVoid(l)&&!b.node.isBlock(l)&&"A"!==l.tagName||f(l,e(g,h))?a(l).replaceWith(l.innerHTML):"undefined"==typeof g&&l.nodeType==Node.ELEMENT_NODE&&b.node.isBlock(l)&&"TABLE"!=l.tagName&&b.node.clearAttributes(l)}else a(l).find(".fr-marker").length>0&&(d=j(a(l),d,g,h))}return d}function k(c,d){"undefined"==typeof d&&(d={}),d.style&&delete d.style;var e=b.selection.isCollapsed();b.selection.save();for(var f=!0;f;){f=!1;for(var g=b.$el.find(".fr-marker"),h=0;h<g.length;h++){var k=a(g[h]),l=null;if(k.attr("data-cloned")||e||(l=k.clone().removeClass("fr-marker").addClass("fr-clone"),k.data("type")===!0?k.attr("data-cloned",!0).after(l):k.attr("data-cloned",!0).before(l)),i(k,c,d,e)){f=!0;break}}}j(b.$el,0,c,d),e||(b.$el.find(".fr-marker").remove(),b.$el.find(".fr-clone").removeClass("fr-clone").addClass("fr-marker")),e&&b.$el.find(".fr-marker").before(a.FE.INVISIBLE_SPACE).after(a.FE.INVISIBLE_SPACE),b.html.cleanEmptyTags(),b.el.normalize(),b.selection.restore()}function l(a,b){q(a,b)?k(a,b):h(a,b)}function m(b,c){var d=a(b);d.css(c,""),""===d.attr("style")&&d.replaceWith(d.html())}function n(b,c){return 0===a(b).attr("style").indexOf(c+":")||a(b).attr("style").indexOf(";"+c+":")>=0||a(b).attr("style").indexOf("; "+c+":")>=0}function o(c,d){var e,f;if(b.selection.isCollapsed()){b.markers.insert(),f=b.$el.find(".fr-marker");var h=f.parent();if(b.node.openTagString(h.get(0))=='<span style="'+c+": "+h.css(c)+';">'){if(b.node.isEmpty(h.get(0)))h.replaceWith('<span style="'+c+": "+d+';">'+a.FE.INVISIBLE_SPACE+a.FE.MARKERS+"</span>");else{var j={};j["style*"]=c+":",i(f,"span",j,!0),f=b.$el.find(".fr-marker"),d?f.replaceWith('<span style="'+c+": "+d+';">'+a.FE.INVISIBLE_SPACE+a.FE.MARKERS+"</span>"):f.replaceWith(a.FE.INVISIBLE_SPACE+a.FE.MARKERS)}b.html.cleanEmptyTags()}else b.node.isEmpty(h.get(0))&&h.is("span")?(f.replaceWith(a.FE.MARKERS),h.css(c,d)):f.replaceWith('<span style="'+c+": "+d+';">'+a.FE.INVISIBLE_SPACE+a.FE.MARKERS+"</span>");b.selection.restore()}else{if(b.selection.save(),null==d||"color"==c&&b.$el.find(".fr-marker").parents("u, a").length>0){var k=b.$el.find(".fr-marker");for(e=0;e<k.length;e++)if(f=a(k[e]),f.data("type")===!0)for(;b.node.isFirstSibling(f.get(0))&&!f.parent().is(b.$el)&&!b.node.isElement(f.parent().get(0))&&!b.node.isBlock(f.parent().get(0));)f.parent().before(f);else for(;b.node.isLastSibling(f.get(0))&&!f.parent().is(b.$el)&&!b.node.isElement(f.parent().get(0))&&!b.node.isBlock(f.parent().get(0));)f.parent().after(f)}var l=b.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,o={"class":"fr-unprocessed"};for(d&&(o.style=c+": "+d+";"),g(l,"span",o),b.$el.find(".fr-marker + .fr-unprocessed").each(function(){a(this).prepend(a(this).prev())}),b.$el.find(".fr-unprocessed + .fr-marker").each(function(){a(this).prev().append(this)}),(d||"").match(/\dem$/)&&b.$el.find("span.fr-unprocessed").removeClass("fr-unprocessed");b.$el.find("span.fr-unprocessed").length>0;){
var p=b.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(p.parent().get(0).normalize(),p.parent().is("span")&&1==p.parent().get(0).childNodes.length){p.parent().css(c,d);var q=p;p=p.parent(),q.replaceWith(q.html())}var r=p.find("span");for(e=r.length-1;e>=0;e--)m(r[e],c);var s=p.parentsUntil(b.$el,"span[style]"),t=[];for(e=s.length-1;e>=0;e--)n(s[e],c)||t.push(s[e]);if(s=s.not(t),s.length){var u="",v="",w="",x="",y=p.get(0);do y=y.parentNode,a(y).addClass("fr-split"),u+=b.node.closeTagString(y),v=b.node.openTagString(a(y).clone().addClass("fr-split").get(0))+v,s.get(0)!=y&&(w+=b.node.closeTagString(y),x=b.node.openTagString(a(y).clone().addClass("fr-split").get(0))+x);while(s.get(0)!=y);var z=u+b.node.openTagString(a(s.get(0)).clone().css(c,d||"").get(0))+x+p.css(c,"").get(0).outerHTML+w+"</span>"+v;p.replaceWith('<span id="fr-break"></span>');var A=s.get(0).outerHTML;a(s.get(0)).replaceWith(A.replace(/<span id="fr-break"><\/span>/g,z))}}for(;b.$el.find(".fr-split:empty").length>0;)b.$el.find(".fr-split:empty").remove();b.$el.find(".fr-split").removeClass("fr-split"),b.$el.find('span[style=""]').removeAttr("style"),b.$el.find('span[class=""]').removeAttr("class"),b.html.cleanEmptyTags(),a(b.$el.find("span").get().reverse()).each(function(){this.attributes&&0!==this.attributes.length||a(this).replaceWith(this.innerHTML)}),b.el.normalize();var B=b.$el.find("span[style] + span[style]");for(e=0;e<B.length;e++){var C=a(B[e]),D=a(B[e]).prev();C.get(0).previousSibling==D.get(0)&&b.node.openTagString(C.get(0))==b.node.openTagString(D.get(0))&&(C.prepend(D.html()),D.remove())}b.$el.find("span[style] span[style]").each(function(){if(a(this).attr("style").indexOf("font-size")>=0){var b=a(this).parents("span[style]");b.attr("style").indexOf("background-color")>=0&&(a(this).attr("style",a(this).attr("style")+";"+b.attr("style")),i(a(this),"span[style]",{},!1))}}),b.el.normalize(),b.selection.restore()}}function p(a){o(a,null)}function q(a,c){"undefined"==typeof c&&(c={}),c.style&&delete c.style;var d=b.selection.ranges(0),g=d.startContainer;if(g.nodeType==Node.ELEMENT_NODE&&g.childNodes.length>0&&g.childNodes[d.startOffset]&&(g=g.childNodes[d.startOffset]),!d.collapsed&&g.nodeType==Node.TEXT_NODE&&d.startOffset==(g.textContent||"").length){for(;!b.node.isBlock(g.parentNode)&&!g.nextSibling;)g=g.parentNode;g.nextSibling&&(g=g.nextSibling)}for(var h=g;h&&h.nodeType==Node.ELEMENT_NODE&&!f(h,e(a,c));)h=h.firstChild;if(h&&h.nodeType==Node.ELEMENT_NODE&&f(h,e(a,c)))return!0;var i=g;for(i&&i.nodeType!=Node.ELEMENT_NODE&&(i=i.parentNode);i&&i.nodeType==Node.ELEMENT_NODE&&i!=b.el&&!f(i,e(a,c));)i=i.parentNode;return i&&i.nodeType==Node.ELEMENT_NODE&&i!=b.el&&f(i,e(a,c))?!0:!1}return{is:q,toggle:l,apply:h,remove:k,applyStyle:o,removeStyle:p}},a.extend(a.FE.DEFAULTS,{indentMargin:20}),a.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(a){var b=this.format.is("strong");a.toggleClass("fr-active",b).attr("aria-pressed",b)}},italic:{title:"Italic",toggle:!0,refresh:function(a){var b=this.format.is("em");a.toggleClass("fr-active",b).attr("aria-pressed",b)}},underline:{title:"Underline",toggle:!0,refresh:function(a){var b=this.format.is("u");a.toggleClass("fr-active",b).attr("aria-pressed",b)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(a){var b=this.format.is("s");a.toggleClass("fr-active",b).attr("aria-pressed",b)}},subscript:{title:"Subscript",toggle:!0,refresh:function(a){var b=this.format.is("sub");a.toggleClass("fr-active",b).attr("aria-pressed",b)}},superscript:{title:"Superscript",toggle:!0,refresh:function(a){var b=this.format.is("sup");a.toggleClass("fr-active",b).attr("aria-pressed",b)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},a.FE.RegisterCommand=function(b,c){a.FE.COMMANDS[b]=c},a.FE.MODULES.commands=function(b){function c(a){return b.html.defaultTag()&&(a="<"+b.html.defaultTag()+">"+a+"</"+b.html.defaultTag()+">"),a}function d(c,d){if(b.events.trigger("commands.before",a.merge([c],d||[]))!==!1){var e=a.FE.COMMANDS[c]&&a.FE.COMMANDS[c].callback||i[c],f=!0,g=!1;a.FE.COMMANDS[c]&&("undefined"!=typeof a.FE.COMMANDS[c].focus&&(f=a.FE.COMMANDS[c].focus),"undefined"!=typeof a.FE.COMMANDS[c].accessibilityFocus&&(g=a.FE.COMMANDS[c].accessibilityFocus)),(!b.core.hasFocus()&&f&&!b.popups.areVisible()||!b.core.hasFocus()&&g&&b.accessibility.hasFocus())&&b.events.focus(!0),a.FE.COMMANDS[c]&&a.FE.COMMANDS[c].undo!==!1&&(b.$el.find(".fr-marker").length&&(b.events.disableBlur(),b.selection.restore()),b.undo.saveStep()),e&&e.apply(b,a.merge([c],d||[])),b.events.trigger("commands.after",a.merge([c],d||[])),a.FE.COMMANDS[c]&&a.FE.COMMANDS[c].undo!==!1&&b.undo.saveStep()}}function e(a,c){b.format.toggle(c)}function f(c){b.selection.save(),b.html.wrap(!0,!0,!0,!0),b.selection.restore();for(var d=b.selection.blocks(),e=0;e<d.length;e++)if("LI"!=d[e].tagName&&"LI"!=d[e].parentNode.tagName){var f=a(d[e]),g="rtl"==b.opts.direction||"rtl"==f.css("direction")?"margin-right":"margin-left",h=b.helpers.getPX(f.css(g));if(f.width()<2*b.opts.indentMargin&&c>0)continue;f.css(g,Math.max(h+c*b.opts.indentMargin,0)||""),f.removeClass("fr-temp-div")}b.selection.save(),b.html.unwrap(),b.selection.restore()}function g(a){return function(){d(a)}}function h(){b.events.on("keydown",function(a){var c=b.selection.element();return c&&"HR"==c.tagName&&!b.keys.isArrow(a.which)?(a.preventDefault(),!1):void 0}),b.events.on("keyup",function(c){var d=b.selection.element();if(d&&"HR"==d.tagName)if(c.which==a.FE.KEYCODE.ARROW_LEFT||c.which==a.FE.KEYCODE.ARROW_UP){if(d.previousSibling)return b.node.isBlock(d.previousSibling)?b.selection.setAtEnd(d.previousSibling):a(d).before(a.FE.MARKERS),b.selection.restore(),!1}else if((c.which==a.FE.KEYCODE.ARROW_RIGHT||c.which==a.FE.KEYCODE.ARROW_DOWN)&&d.nextSibling)return b.node.isBlock(d.nextSibling)?b.selection.setAtStart(d.nextSibling):a(d).after(a.FE.MARKERS),b.selection.restore(),!1}),b.events.on("mousedown",function(a){return a.target&&"HR"==a.target.tagName?(a.preventDefault(),a.stopPropagation(),!1):void 0}),b.events.on("mouseup",function(){var c=b.selection.element(),d=b.selection.endElement();c==d&&c&&"HR"==c.tagName&&(c.nextSibling&&(b.node.isBlock(c.nextSibling)?b.selection.setAtStart(c.nextSibling):a(c).after(a.FE.MARKERS)),b.selection.restore())})}var i={bold:function(){e("bold","strong")},subscript:function(){b.format.is("sup")&&b.format.remove("sup"),e("subscript","sub")},superscript:function(){b.format.is("sub")&&b.format.remove("sub"),e("superscript","sup")},italic:function(){e("italic","em")},strikeThrough:function(){e("strikeThrough","s")},underline:function(){e("underline","u")},undo:function(){b.undo.run()},redo:function(){b.undo.redo()},indent:function(){f(1)},outdent:function(){f(-1)},show:function(){b.opts.toolbarInline&&b.toolbar.showInline(null,!0)},insertHR:function(){b.selection.remove();var d="";b.core.isEmpty()&&(d="<br>",d=c(d)),b.html.insert('<hr id="fr-just">'+d);var e=b.$el.find("hr#fr-just");e.removeAttr("id");var f;if(0===e.next().length){var g=b.html.defaultTag();g?e.after(a("<"+g+">").append("<br>")):e.after("<br>")}e.prev().is("hr")?f=b.selection.setAfter(e.get(0),!1):e.next().is("hr")?f=b.selection.setBefore(e.get(0),!1):b.selection.setAfter(e.get(0),!1)||b.selection.setBefore(e.get(0),!1),f||"undefined"==typeof f||(d=a.FE.MARKERS+"<br>",d=c(d),e.after(d)),b.selection.restore()},clearFormatting:function(){b.format.remove()},selectAll:function(){b.doc.execCommand("selectAll",!1,!1)}},j={};for(var k in i)i.hasOwnProperty(k)&&(j[k]=g(k));return a.extend(j,{exec:d,_init:h})},a.FE.MODULES.data=function(b){function c(a){return a}function d(a){if(!a)return a;for(var b="",d=c("charCodeAt"),g=c("fromCharCode"),h=n.indexOf(a[0]),i=1;i<a.length-2;i++){for(var j=e(++h),k=a[d](i),l="";/[0-9-]/.test(a[i+1]);)l+=a[++i];l=parseInt(l,10)||0,k=f(k,j,l),k^=h-1&31,b+=String[g](k)}return b}function e(a){for(var b=a.toString(),c=0,d=0;d<b.length;d++)c+=parseInt(b.charAt(d),10);return c>10?c%9+1:c}function f(a,b,c){for(var d=Math.abs(c);d-->0;)a-=b;return 0>c&&(a+=123),a}function g(a){return a&&"block"!==a.css("display")?(a.remove(),!0):!1}function h(a){return a&&0===b.$box.find(a).length}function i(){return g(l)||g(m)||h(l)||h(m)}function j(){return q>10&&(b[c(p("0ppecjvc=="))](),setTimeout(function(){a.FE=null},10)),b.$box?(b.$wp.prepend(p(c(p("NCKB1zwtPA9tqzajXC2c2A7B-16VD3spzJ1C9C3D5oOF2OB1NB1LD7VA5QF4TE3gytXB2A4C-8VA2AC4E1D3GB2EB2KC3KD1MF1juuSB1A8C6yfbmd1B2a1A5qdsdB2tivbC3CB1KC1CH1eLA2sTF1B4I4H-7B-21UB6b1F5bzzzyAB4JC3MG2hjdKC1JE6C1E1cj1pD-16pUE5B4prra2B5ZB3D3C3pxj1EA6A3rnJA2C-7I-7JD9D1E1wYH1F3sTB5TA2G4H4ZA22qZA5BB3mjcvcCC3JB1xillavC-21VE6PC5SI4YC5C8mb1A3WC3BD2B5aoDA2qqAE3A5D-17fOD1D5RD4WC10tE6OAZC3nF-7b1C4A4D3qCF2fgmapcromlHA2QA6a1E1D3e1A6C2bie2F4iddnIA7B2mvnwcIB5OA1DB2OLQA3PB10WC7WC5d1E3uI-7b1D5D6b1E4D2arlAA4EA1F-11srxI-7MB1D7PF1E5B4adB-21YD5vrZH3D3xAC4E1A2GF2CF2J-7yNC2JE1MI2hH-7QB1C6B5B-9bA-7XB13a1B5VievwpKB4LA3NF-10H-9I-8hhaC-16nqPG4wsleTD5zqYF3h1G2B7B4yvGE2Pi1H-7C-21OE6B1uLD1kI4WC1E7C5g1D-8fue1C8C6c1D4D3Hpi1CC4kvGC2E1legallyXB4axVA11rsA4A-9nkdtlmzBA2GD3A13A6CB1dabE1lezrUE6RD5TB4A-7f1C8c1B5d1D4D3tyfCD5C2D2==")))),l=b.$wp.find("> div:first"),m=l.find("> a"),"rtl"==b.opts.direction&&l.css("left","auto").css("right",0).attr("direction","rtl"),void q++):!1}function k(){var a=b.o_win.FEK;try{a=a||localStorage&&localStorage.FEK}catch(d){}a=b.opts.key||a||[""];var e=p(c("ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9=="));"string"==typeof a&&(a=[a]),b.ul=!0;for(var f=0;f<a.length;f++){var g=p(a[f])||"";if(!(g!==p(c(p("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&g.indexOf(o,g.length-o.length)<0&&[p("9qqG-7amjlwq=="),p("KA3B3C2A6D1D5H5H1A3=="),p("QzbzvxyB2yA-9m=="),p("ji1kacwmgG5bc=="),p("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(o)<0)){b.ul=!1;break}}var h=new Image;b.ul===!0&&(j(),h.src=c(p(e))+"u"),b.ul===!0&&b.events.on("contentChanged",function(){i()&&j()}),b.events.on("destroy",function(){l&&l.length&&l.remove()},!0)}var l,m,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=function(){for(var a=0,b=document.domain,c=b.split("."),d="_gd"+(new Date).getTime();a<c.length-1&&-1==document.cookie.indexOf(d+"="+d);)b=c.slice(-1-++a).join("."),document.cookie=d+"="+d+";domain="+b+";";return document.cookie=d+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+b+";",(b||"").replace(/(^\.*)|(\.*$)/g,"")}(),p=c(d),q=0;return{_init:k}},a.extend(a.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col","meta"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[".*"],pasteAllowLocalImages:!1}),a.FE.MODULES.paste=function(b){function c(a,c){try{b.win.localStorage.setItem("fr-copied-html",a),b.win.localStorage.setItem("fr-copied-text",c)}catch(d){}}function d(d){var e=b.html.getSelected();c(e,a("<div>").html(e).text()),"cut"==d.type&&(b.undo.saveStep(),setTimeout(function(){b.selection.save(),b.html.wrap(),b.selection.restore(),b.events.focus(),b.undo.saveStep()},0))}function e(a){if(y)return!1;if(a.originalEvent&&(a=a.originalEvent),b.events.trigger("paste.before",[a])===!1)return a.preventDefault(),!1;if(t=b.$win.scrollTop(),a&&a.clipboardData&&a.clipboardData.getData){var c="",d=a.clipboardData.types;if(b.helpers.isArray(d))for(var e=0;e<d.length;e++)c+=d[e]+";";else c=d;if(u="",/text\/rtf/.test(c)&&(v=a.clipboardData.getData("text/rtf")),/text\/html/.test(c)&&!b.browser.safari?u=a.clipboardData.getData("text/html"):/text\/rtf/.test(c)&&b.browser.safari?u=v:/public.rtf/.test(c)&&b.browser.safari?u=a.clipboardData.getData("text/rtf"):/text\/plain/.test(c)&&!b.browser.mozilla&&(u=b.html.escapeEntities(a.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==u)return j(),a.preventDefault&&(a.stopPropagation(),a.preventDefault()),!1;u=null}return g(),!1}function f(c){if(c.originalEvent&&(c=c.originalEvent),c&&c.dataTransfer&&c.dataTransfer.getData){var d="",e=c.dataTransfer.types;if(b.helpers.isArray(e))for(var f=0;f<e.length;f++)d+=e[f]+";";else d=e;if(u="",/text\/rtf/.test(d)&&(v=c.dataTransfer.getData("text/rtf")),/text\/html/.test(d)?u=c.dataTransfer.getData("text/html"):/text\/rtf/.test(d)&&b.browser.safari?u=v:/text\/plain/.test(d)&&!this.browser.mozilla&&(u=b.html.escapeEntities(c.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==u){b.keys.forceUndo(),x=b.snapshot.get(),b.selection.remove();var g=b.markers.insertAtPoint(c);if(g!==!1){var h=b.el.querySelector(".fr-marker");return a(h).replaceWith(a.FE.MARKERS),j(),c.preventDefault&&(c.stopPropagation(),c.preventDefault()),!1}}else u=null}}function g(){b.selection.save(),b.events.disableBlur(),u=null,w?(w.html(""),b.browser.edge&&b.opts.iframe&&b.$el.append(w)):(w=a('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%; -moz-user-select: text; -webkit-user-select: text; -ms-user-select: text; user-select: text;" tabIndex="-1"></div>'),b.browser.safari?(w.css("top",b.$sc.scrollTop()),b.$el.after(w)):b.browser.edge&&b.opts.iframe?b.$el.append(w):b.$box.after(w),b.events.on("destroy",function(){w.remove()})),w.focus(),b.win.setTimeout(j,1)}function h(a){var c;a=a.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),a=a.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),a=a.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),a=a.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),a=a.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),a=a.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),a=a.replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),a=a.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),a=a.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),a=a.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),a=a.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),a=a.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),a=a.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),a=a.replace(/<!--[\s\S]*?-->/gi,""),a=a.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var d=["style","script","applet","embed","noframes","noscript"];for(c=0;c<d.length;c++){var e=new RegExp("<"+d[c]+".*?"+d[c]+"(.*?)>","gi");a=a.replace(e,"")}a=a.replace(/&nbsp;/gi," "),a=a.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),a=a.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var f;do f=a,a=a.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"");while(a!=f);a=a.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),a=a.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),a=b.clean.html(a,b.opts.pasteDeniedTags,b.opts.pasteDeniedAttrs),a=a.replace(/<a>(.[^<]+)<\/a>/gi,"$1"),a=a.replace(/<br> */g,"<br>");var g=b.o_doc.createElement("div");g.innerHTML=a;var h=g.querySelectorAll("li[data-indent]");for(c=0;c<h.length;c++){var i=h[c],j=i.previousElementSibling;if(j&&"LI"==j.tagName){var k=j.querySelector(":scope > ul, :scope > ol");k||(k=document.createElement("ul"),j.appendChild(k)),k.appendChild(i)}else i.removeAttribute("data-indent")}return b.html.cleanBlankSpaces(g),a=g.innerHTML}function i(a){var c,d=null,e=b.doc.createElement("div");e.innerHTML=a;var f=e.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(c=0;c<f.length;c++)d=f[c],d.outerHTML="<"+(b.html.defaultTag()||"DIV")+">"+d.innerHTML+"</"+(b.html.defaultTag()||"DIV")+">";for(f=e.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")"),c=f.length-1;c>=0;c--)d=f[c],d.outerHTML=d.innerHTML;var g=function(a){for(var c=b.node.contents(a),d=0;d<c.length;d++)c[d].nodeType!=Node.TEXT_NODE&&c[d].nodeType!=Node.ELEMENT_NODE?c[d].parentNode.removeChild(c[d]):g(c[d])};return g(e),e.innerHTML}function j(){b.browser.edge&&b.opts.iframe&&b.$box.after(w),x||(b.keys.forceUndo(),x=b.snapshot.get()),u||(u=w.get(0).innerHTML,b.selection.restore(),b.events.enableBlur());var a=u.match(/(class=\"?Mso|class=\'?Mso|class="?Xl|class='?Xl|class=Xl|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),c=b.events.chainTrigger("paste.beforeCleanup",u);c&&"string"==typeof c&&(u=c),(!a||a&&b.events.trigger("paste.wordPaste",[u])!==!1)&&l(u,a)}function k(c){var d=null;try{d=b.win.localStorage.getItem("fr-copied-text")}catch(e){}return d&&a("<div>").html(c).text().replace(/\u00A0/gi," ").replace(/\r|\n/gi,"")==d.replace(/\u00A0/gi," ").replace(/\r|\n/gi,"")?!0:!1}function l(c,d,e){var f,g=null,j=null;if(c.toLowerCase().indexOf("<body")>=0){var l="";c.indexOf("<style")>=0&&(l=c.replace(/[.\s\S\w\W<>]*(<style[^>]*>[\s]*[.\s\S\w\W<>]*[\s]*<\/style>)[.\s\S\w\W<>]*/gi,"$1")),c=l+c.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1"),c=c.replace(/ \n/g," ").replace(/\n /g," ").replace(/([^>])\n([^<])/g,"$1 $2")}var n=!1;c.indexOf('id="docs-internal-guid')>=0&&(c=c.replace(/^[\w\W\s\S]* id="docs-internal-guid[^>]*>([\w\W\s\S]*)<\/b>[\w\W\s\S]*$/g,"$1"),n=!0);var o=!1;if(!d&&(o=k(c),o&&(c=b.win.localStorage.getItem("fr-copied-html")),!o)){var r=b.opts.htmlAllowedStyleProps;if(b.opts.htmlAllowedStyleProps=b.opts.pasteAllowedStyleProps,b.opts.htmlAllowComments=!1,b.opts.tabSpaces){for(var s="",t=0;t++<b.opts.tabSpaces;)s+="&nbsp;";c=c.replace(/\t/g,s)}else c=c.replace(/\t/g,"");c=b.clean.html(c,b.opts.pasteDeniedTags,b.opts.pasteDeniedAttrs),b.opts.htmlAllowedStyleProps=r,b.opts.htmlAllowComments=!0,c=p(c),c=c.replace(/\r/g,""),c=c.replace(/^ */g,"").replace(/ *$/g,"")}!d||b.wordPaste&&e||(c=c.replace(/^\n*/g,"").replace(/^ /g,""),0===c.indexOf("<colgroup>")&&(c="<table>"+c+"</table>"),c=h(c),c=p(c)),b.opts.pastePlain&&!o&&(c=i(c));var u=b.events.chainTrigger("paste.afterCleanup",c);if("string"==typeof u&&(c=u),""!==c){var v=b.o_doc.createElement("div");v.innerHTML=c,b.spaces.normalize(v);var w=v.getElementsByTagName("span");for(f=w.length-1;f>=0;f--){var y=w[f];0===y.attributes.length&&(y.outerHTML=y.innerHTML)}var z=b.selection.element(),A=!1;if(z&&a(z).parentsUntil(b.el,"ul, ol").length&&(A=!0),A){var B=v.children;1==B.length&&["OL","UL"].indexOf(B[0].tagName)>=0&&(B[0].outerHTML=B[0].innerHTML)}if(!n){var C=v.getElementsByTagName("br");for(f=C.length-1;f>=0;f--){var D=C[f];b.node.isBlock(D.previousSibling)&&D.parentNode.removeChild(D)}}if(b.opts.enter==a.FE.ENTER_BR)for(g=v.querySelectorAll("p, div"),f=g.length-1;f>=0;f--)j=g[f],0===j.attributes.length&&(j.outerHTML=j.innerHTML+(j.nextSibling&&!b.node.isEmpty(j)?"<br>":""));else if(b.opts.enter==a.FE.ENTER_DIV)for(g=v.getElementsByTagName("p"),f=g.length-1;f>=0;f--)j=g[f],0===j.attributes.length&&(j.outerHTML="<div>"+j.innerHTML+"</div>");else b.opts.enter==a.FE.ENTER_P&&1==v.childNodes.length&&"P"==v.childNodes[0].tagName&&0===v.childNodes[0].attributes.length&&(v.childNodes[0].outerHTML=v.childNodes[0].innerHTML);c=v.innerHTML,o&&(c=q(c)),b.html.insert(c,!0)}m(),b.undo.saveStep(x),x=null,b.undo.saveStep()}function m(){b.events.trigger("paste.after")}function n(){return v}function o(a){for(var b=a.length-1;b>=0;b--)a[b].attributes&&a[b].attributes.length&&a.splice(b,1);return a}function p(a){var c,d=b.o_doc.createElement("div");d.innerHTML=a;for(var e=o(Array.prototype.slice.call(d.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")));e.length;){var f=e[e.length-1];if(b.html.defaultTag()&&"div"!=b.html.defaultTag())f.querySelector(b.html.blockTagsQuery())?f.outerHTML=f.innerHTML:f.outerHTML="<"+b.html.defaultTag()+">"+f.innerHTML+"</"+b.html.defaultTag()+">";else{var g=f.querySelectorAll("*");!g.length||"BR"!==g[g.length-1].tagName&&0===f.innerText.length?f.outerHTML=f.innerHTML+"<br>":f.outerHTML=f.innerHTML}e=o(Array.prototype.slice.call(d.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")))}for(e=o(Array.prototype.slice.call(d.querySelectorAll("div:not([style])")));e.length;){for(c=0;c<e.length;c++){var h=e[c],i=h.innerHTML.replace(/\u0009/gi,"").trim();h.outerHTML=i}e=o(Array.prototype.slice.call(d.querySelectorAll("div:not([style])")))}return d.innerHTML}function q(c){var d,e=b.o_doc.createElement("div");e.innerHTML=c;for(var f=e.querySelectorAll("*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not("+a.FE.VOID_ELEMENTS.join("):not(")+"):not("+b.opts.htmlAllowedEmptyTags.join("):not(")+")");f.length;){for(d=0;d<f.length;d++)f[d].parentNode.removeChild(f[d]);f=e.querySelectorAll("*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not("+a.FE.VOID_ELEMENTS.join("):not(")+"):not("+b.opts.htmlAllowedEmptyTags.join("):not(")+")")}return e.innerHTML}function r(){b.el.addEventListener("copy",d),b.el.addEventListener("cut",d),b.el.addEventListener("paste",e,{capture:!0}),b.events.on("drop",f),b.browser.msie&&b.browser.version<11&&(b.events.on("mouseup",function(a){2==a.button&&(setTimeout(function(){y=!1},50),y=!0)},!0),b.events.on("beforepaste",e)),b.events.on("destroy",s)}function s(){b.el.removeEventListener("copy",d),b.el.removeEventListener("cut",d),b.el.removeEventListener("paste",e)}var t,u,v,w,x,y=!1;return{_init:r,cleanEmptyTagsAndDivs:p,getRtfClipboard:n,saveCopiedText:c,clean:l}},a.extend(a.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),a.FE.SHORTCUTS_MAP={},a.FE.RegisterShortcut=function(b,c,d,e,f,g){a.FE.SHORTCUTS_MAP[(f?"^":"")+(g?"@":"")+b]={cmd:c,val:d,letter:e,shift:f,option:g},a.FE.DEFAULTS.shortcutsEnabled.push(c)},a.FE.RegisterShortcut(a.FE.KEYCODE.E,"show",null,"E",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.B,"bold",null,"B",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.I,"italic",null,"I",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.U,"underline",null,"U",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),a.FE.RegisterShortcut(a.FE.KEYCODE.Y,"redo",null,"Y",!1,!1),a.FE.MODULES.shortcuts=function(b){function c(c){if(!b.opts.shortcutsHint)return null;if(!f){f={};for(var d in a.FE.SHORTCUTS_MAP)a.FE.SHORTCUTS_MAP.hasOwnProperty(d)&&b.opts.shortcutsEnabled.indexOf(a.FE.SHORTCUTS_MAP[d].cmd)>=0&&(f[a.FE.SHORTCUTS_MAP[d].cmd+"."+(a.FE.SHORTCUTS_MAP[d].val||"")]={shift:a.FE.SHORTCUTS_MAP[d].shift,option:a.FE.SHORTCUTS_MAP[d].option,letter:a.FE.SHORTCUTS_MAP[d].letter})}var e=f[c];return e?(b.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(e.shift?b.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(e.option?b.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+e.letter:null}function d(c){if(!b.core.hasFocus())return!0;var d=c.which,e=-1!=navigator.userAgent.indexOf("Mac OS X")?c.metaKey:c.ctrlKey;if("keyup"==c.type&&g&&d!=a.FE.KEYCODE.META)return g=!1,!1;"keydown"==c.type&&(g=!1);var f=(c.shiftKey?"^":"")+(c.altKey?"@":"")+d;if(e&&a.FE.SHORTCUTS_MAP[f]){var h=a.FE.SHORTCUTS_MAP[f].cmd;if(h&&b.opts.shortcutsEnabled.indexOf(h)>=0){var i,j=a.FE.SHORTCUTS_MAP[f].val;if(h&&!j?i=b.$tb.find('.fr-command[data-cmd="'+h+'"]'):h&&j&&(i=b.$tb.find('.fr-command[data-cmd="'+h+'"][data-param1="'+j+'"]')),i.length)return c.preventDefault(),c.stopPropagation(),i.parents(".fr-toolbar").data("instance",b),"keydown"==c.type&&(b.button.exec(i),g=!0),!1;if(h&&(b.commands[h]||a.FE.COMMANDS[h]&&a.FE.COMMANDS[h].callback))return c.preventDefault(),c.stopPropagation(),"keydown"==c.type&&((b.commands[h]||a.FE.COMMANDS[h].callback)(),g=!0),!1}}}function e(){b.events.on("keydown",d,!0),b.events.on("keyup",d,!0)}var f=null,g=!1;return{_init:e,get:c}},a.FE.MODULES.snapshot=function(a){function b(a){for(var b=a.parentNode.childNodes,c=0,d=null,e=0;e<b.length;e++){if(d){var f=b[e].nodeType===Node.TEXT_NODE&&""===b[e].textContent,g=d.nodeType===Node.TEXT_NODE&&b[e].nodeType===Node.TEXT_NODE;f||g||c++}if(b[e]==a)return c;d=b[e]}}function c(c){var d=[];if(!c.parentNode)return[];for(;!a.node.isElement(c);)d.push(b(c)),c=c.parentNode;return d.reverse()}function d(a,b){for(;a&&a.nodeType===Node.TEXT_NODE;){var c=a.previousSibling;c&&c.nodeType==Node.TEXT_NODE&&(b+=c.textContent.length),a=c}return b}function e(a){return{scLoc:c(a.startContainer),scOffset:d(a.startContainer,a.startOffset),ecLoc:c(a.endContainer),ecOffset:d(a.endContainer,a.endOffset)}}function f(){var b={};if(a.events.trigger("snapshot.before"),b.html=(a.$wp?a.$el.html():a.$oel.get(0).outerHTML).replace(/ style=""/g,""),b.ranges=[],a.$wp&&a.selection.inEditor()&&a.core.hasFocus())for(var c=a.selection.ranges(),d=0;d<c.length;d++)b.ranges.push(e(c[d]));return a.events.trigger("snapshot.after",[b]),b}function g(b){for(var c=a.el,d=0;d<b.length;d++)c=c.childNodes[b[d]];return c}function h(b,c){try{var d=g(c.scLoc),e=c.scOffset,f=g(c.ecLoc),h=c.ecOffset,i=a.doc.createRange();i.setStart(d,e),i.setEnd(f,h),b.addRange(i)}catch(j){}}function i(b){a.$el.html()!=b.html&&(a.opts.htmlExecuteScripts?a.$el.html(b.html):a.el.innerHTML=b.html);var c=a.selection.get();a.selection.clear(),a.events.focus(!0);for(var d=0;d<b.ranges.length;d++)h(c,b.ranges[d])}function j(b,c){return b.html!=c.html?!1:a.core.hasFocus()&&JSON.stringify(b.ranges)!=JSON.stringify(c.ranges)?!1:!0}return{get:f,restore:i,equal:j}},a.FE.MODULES.undo=function(a){function b(b){var c=b.which,d=a.keys.ctrlKey(b);d&&(90==c&&b.shiftKey&&b.preventDefault(),90==c&&b.preventDefault())}function c(){return 0===a.undo_stack.length||a.undo_index<=1?!1:!0}function d(){return a.undo_index==a.undo_stack.length?!1:!0}function e(b){return!a.undo_stack||a.undoing||a.el.querySelector(".fr-marker")?!1:void("undefined"==typeof b?(b=a.snapshot.get(),a.undo_stack[a.undo_index-1]&&a.snapshot.equal(a.undo_stack[a.undo_index-1],b)||(f(),a.undo_stack.push(b),a.undo_index++,b.html!=l&&(a.events.trigger("contentChanged"),l=b.html))):(f(),a.undo_index>0?a.undo_stack[a.undo_index-1]=b:(a.undo_stack.push(b),a.undo_index++)))}function f(){if(!a.undo_stack||a.undoing)return!1;for(;a.undo_stack.length>a.undo_index;)a.undo_stack.pop()}function g(){if(a.undo_index>1){a.undoing=!0;var b=a.undo_stack[--a.undo_index-1];clearTimeout(a._content_changed_timer),a.snapshot.restore(b),l=b.html,a.popups.hideAll(),a.toolbar.enable(),a.events.trigger("contentChanged"),a.events.trigger("commands.undo"),a.undoing=!1}}function h(){if(a.undo_index<a.undo_stack.length){a.undoing=!0;var b=a.undo_stack[a.undo_index++];clearTimeout(a._content_changed_timer),a.snapshot.restore(b),l=b.html,a.popups.hideAll(),a.toolbar.enable(),a.events.trigger("contentChanged"),a.events.trigger("commands.redo"),a.undoing=!1}}function i(){a.undo_index=0,a.undo_stack=[]}function j(){a.undo_stack=[]}function k(){i(),a.events.on("initialized",function(){l=(a.$wp?a.$el.html():a.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),a.events.on("blur",function(){a.el.querySelector(".fr-dragging")||a.undo.saveStep()}),a.events.on("keydown",b),a.events.on("destroy",j)}var l=null;return{_init:k,run:g,redo:h,canDo:c,canRedo:d,dropRedo:f,reset:i,saveStep:e}},a.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',font_awesome_5:'<i class="fas fa-[FA5NAME]" aria-hidden="true"></i>',font_awesome_5s:'<i class="far fa-[FA5NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},a.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left",FA5NAME:"undo"},redo:{NAME:"rotate-right",FA5NAME:"redo"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},a.FE.DefineIconTemplate=function(b,c){a.FE.ICON_TEMPLATES[b]=c},a.FE.DefineIcon=function(b,c){a.FE.ICONS[b]=c},a.extend(a.FE.DEFAULTS,{iconsTemplate:a.FE.ICON_DEFAULT_TEMPLATE||"font_awesome"}),a.FE.MODULES.icon=function(b){function c(c){var d=null,e=a.FE.ICONS[c];if("undefined"!=typeof e){var f=e.template||b.opts.iconsTemplate;e.FA5NAME||(e.FA5NAME=e.NAME),f&&(f=a.FE.ICON_TEMPLATES[f])&&(d=f.replace(/\[([a-zA-Z0-9]*)\]/g,function(a,b){return"NAME"==b?e[b]||c:e[b]}))}return d||c}function d(c){var d=a.FE.ICONS[c],e=b.opts.iconsTemplate;return"undefined"!=typeof d?e=d.template||b.opts.iconsTemplate:e}return{create:c,getTemplate:d}},a.extend(a.FE.DEFAULTS,{tooltips:!0}),a.FE.MODULES.tooltip=function(b){function c(){return b.helpers.isMobile()?!1:void(b.$tooltip&&b.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed"))}function d(c,d){if(b.helpers.isMobile())return!1;if(c.data("title")||c.data("title",c.attr("title")),!c.data("title"))return!1;b.$tooltip||f(),c.removeAttr("title"),b.$tooltip.text(b.language.translate(c.data("title"))),b.$tooltip.addClass("fr-visible");var e=c.offset().left+(c.outerWidth()-b.$tooltip.outerWidth())/2;0>e&&(e=0),e+b.$tooltip.outerWidth()>a(b.o_win).width()&&(e=a(b.o_win).width()-b.$tooltip.outerWidth()),"undefined"==typeof d&&(d=b.opts.toolbarBottom);var g=d?c.offset().top-b.$tooltip.height():c.offset().top+c.outerHeight();b.$tooltip.css("position",""),b.$tooltip.css("left",e),b.$tooltip.css("top",Math.ceil(g)),"static"!=a(b.o_doc).find("body:first").css("position")?(b.$tooltip.css("margin-left",-a(b.o_doc).find("body:first").offset().left),b.$tooltip.css("margin-top",-a(b.o_doc).find("body:first").offset().top)):(b.$tooltip.css("margin-left",""),b.$tooltip.css("margin-top",""))}function e(e,f,g){b.opts.tooltips&&!b.helpers.isMobile()&&(b.events.$on(e,"mouseenter",f,function(c){b.node.hasClass(c.currentTarget,"fr-disabled")||b.edit.isDisabled()||d(a(c.currentTarget),g)},!0),b.events.$on(e,"mouseleave "+b._mousedown+" "+b._mouseup,f,function(){c()},!0))}function f(){b.opts.tooltips&&!b.helpers.isMobile()&&(b.shared.$tooltip?b.$tooltip=b.shared.$tooltip:(b.shared.$tooltip=a('<div class="fr-tooltip"></div>'),b.$tooltip=b.shared.$tooltip,b.opts.theme&&b.$tooltip.addClass(b.opts.theme+"-theme"),a(b.o_doc).find("body:first").append(b.$tooltip)),b.events.on("shared.destroy",function(){b.$tooltip.html("").removeData().remove(),b.$tooltip=null},!0))}return{hide:c,to:d,bind:e}},a.FE.MODULES.button=function(b){function c(b,c,d){for(var e=a(),f=0;f<b.length;f++){var g=a(b[f]);if(g.is(c)&&(e=e.add(g)),d&&g.is(".fr-dropdown")){var h=g.next().find(c);e=e.add(h)}}return e}function d(d,e){var f,g=a();if(!d)return g;g=g.add(c(w,d,e)),g=g.add(c(x,d,e));for(f in b.shared.popups)if(b.shared.popups.hasOwnProperty(f)){var h=b.shared.popups[f],i=h.children().find(d);g=g.add(i)}for(f in b.shared.modals)if(b.shared.modals.hasOwnProperty(f)){var j=b.shared.modals[f],k=j.$modal.find(d);g=g.add(k)}return g}function e(c){var e=c.next(),f=b.node.hasClass(c.get(0),"fr-active"),g=d(".fr-dropdown.fr-active").not(c),h=c.parents(".fr-toolbar, .fr-popup").data("instance")||b;if(h.helpers.isIOS()&&!h.el.querySelector(".fr-marker")&&(h.selection.save(),h.selection.clear(),h.selection.restore()),
!f){var i=c.data("cmd");e.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),a.FE.COMMANDS[i]&&a.FE.COMMANDS[i].refreshOnShow&&a.FE.COMMANDS[i].refreshOnShow.apply(h,[c,e]),e.css("left",c.offset().left-c.parent().offset().left-("rtl"==b.opts.direction?e.width()-c.outerWidth():0)),e.addClass("test-height");var j=e.outerHeight();e.removeClass("test-height"),e.css("top","").css("bottom",""),!b.opts.toolbarBottom&&e.offset().top+c.outerHeight()+j<a(b.o_doc).height()?e.css("top",c.position().top+c.outerHeight()):e.css("bottom",c.parents(".fr-popup, .fr-toolbar").first().height()-c.position().top)}c.addClass("fr-blink").toggleClass("fr-active"),c.hasClass("fr-active")?(e.attr("aria-hidden",!1),c.attr("aria-expanded",!0)):(e.attr("aria-hidden",!0),c.attr("aria-expanded",!1)),setTimeout(function(){c.removeClass("fr-blink")},300),e.css("margin-left",""),e.offset().left+e.outerWidth()>b.$sc.offset().left+b.$sc.width()&&e.css("margin-left",-(e.offset().left+e.outerWidth()-b.$sc.offset().left-b.$sc.width())),e.offset().left<b.$sc.offset().left&&"rtl"==b.opts.direction&&e.css("margin-left",b.$sc.offset().left),g.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),g.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!==c.parents(".fr-popup").length||b.opts.toolbarInline||(b.node.hasClass(c.get(0),"fr-active")?b.$tb.css("zIndex",(b.opts.zIndex||1)+4):b.$tb.css("zIndex",""));var k=e.find("a.fr-command.fr-active:first");b.helpers.isMobile()||(k.length?b.accessibility.focusToolbarElement(k):b.accessibility.focusToolbarElement(c))}function f(a){a.addClass("fr-blink"),setTimeout(function(){a.removeClass("fr-blink")},500);for(var b=a.data("cmd"),c=[];"undefined"!=typeof a.data("param"+(c.length+1));)c.push(a.data("param"+(c.length+1)));var e=d(".fr-dropdown.fr-active");e.length&&(e.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),e.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),a.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(b,c)}function g(a){f(a)}function h(c){var d=c.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==c.parents(".fr-popup").length||c.data("popup")||d.popups.hideAll(),d.popups.areVisible()&&!d.popups.areVisible(d)){for(var f=0;f<a.FE.INSTANCES.length;f++)a.FE.INSTANCES[f]!=d&&a.FE.INSTANCES[f].popups&&a.FE.INSTANCES[f].popups.areVisible()&&a.FE.INSTANCES[f].$el.find(".fr-marker").remove();d.popups.hideAll()}b.node.hasClass(c.get(0),"fr-dropdown")?e(c):(g(c),a.FE.COMMANDS[c.data("cmd")]&&a.FE.COMMANDS[c.data("cmd")].refreshAfterCallback!==!1&&d.button.bulkRefresh())}function i(b){var c=a(b.currentTarget);h(c)}function j(a){var b=a.find(".fr-dropdown.fr-active");b.length&&(b.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),b.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function k(a){a.preventDefault(),a.stopPropagation()}function l(a){return a.stopPropagation(),b.helpers.isMobile()?void 0:!1}function m(c,d){b.events.bindClick(c,".fr-command:not(.fr-disabled)",i),b.events.$on(c,b._mousedown+" "+b._mouseup+" "+b._move,".fr-dropdown-menu",k,!0),b.events.$on(c,b._mousedown+" "+b._mouseup+" "+b._move,".fr-dropdown-menu .fr-dropdown-wrapper",l,!0);var e=c.get(0).ownerDocument,f="defaultView"in e?e.defaultView:e.parentWindow,g=function(d){(!d||d.type==b._mouseup&&d.target!=a("html").get(0)||"keydown"==d.type&&(b.keys.isCharacter(d.which)&&!b.keys.ctrlKey(d)||d.which==a.FE.KEYCODE.ESC))&&j(c)};b.events.$on(a(f),b._mouseup+" resize keydown",g,!0),b.opts.iframe&&b.events.$on(b.$win,b._mouseup,g,!0),b.node.hasClass(c.get(0),"fr-popup")?a.merge(x,c.find(".fr-btn").toArray()):a.merge(w,c.find(".fr-btn").toArray()),b.tooltip.bind(c,".fr-btn, .fr-title",d)}function n(a,c){var d="";if(c.html)d+="function"==typeof c.html?c.html.call(b):c.html;else{var e=c.options;"function"==typeof e&&(e=e()),d+='<ul class="fr-dropdown-list" role="presentation">';for(var f in e)if(e.hasOwnProperty(f)){var g=b.shortcuts.get(a+"."+f);g=g?'<span class="fr-shortcut">'+g+"</span>":"",d+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+a+'" data-param1="'+f+'" title="'+e[f]+'">'+b.language.translate(e[f])+"</a></li>"}d+="</ul>"}return d}function o(a,c,d){if(b.helpers.isMobile()&&c.showOnMobile===!1)return"";var e=c.displaySelection;"function"==typeof e&&(e=e(b));var f;if(e){var g="function"==typeof c.defaultSelection?c.defaultSelection(b):c.defaultSelection;f='<span style="width:'+(c.displaySelectionWidth||100)+'px">'+b.language.translate(g||c.title)+"</span>"}else f=b.icon.create(c.icon||a),f+='<span class="fr-sr-only">'+(b.language.translate(c.title)||"")+"</span>";var h=c.popup?' data-popup="true"':"",i=c.modal?' data-modal="true"':"",j=b.shortcuts.get(a+".");j=j?" ("+j+")":"";var k=a+"-"+b.id,l="dropdown-menu-"+k,m='<button id="'+k+'"type="button" tabIndex="-1" role="button"'+(c.toggle?' aria-pressed="false"':"")+("dropdown"==c.type?' aria-controls="'+l+'" aria-expanded="false" aria-haspopup="true"':"")+(c.disabled?' aria-disabled="true"':"")+' title="'+(b.language.translate(c.title)||"")+j+'" class="fr-command fr-btn'+("dropdown"==c.type?" fr-dropdown":"")+(" fr-btn-"+b.icon.getTemplate(c.icon))+(c.displaySelection?" fr-selection":"")+(c.back?" fr-back":"")+(c.disabled?" fr-disabled":"")+(d?"":" fr-hidden")+'" data-cmd="'+a+'"'+h+i+">"+f+"</button>";if("dropdown"==c.type){var o='<div id="'+l+'" class="fr-dropdown-menu" role="listbox" aria-labelledby="'+k+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';o+=n(a,c),o+="</div></div></div>",m+=o}return m}function p(c,d){for(var e="",f=0;f<c.length;f++){var g=c[f],h=a.FE.COMMANDS[g];if(!(h&&"undefined"!=typeof h.plugin&&b.opts.pluginsEnabled.indexOf(h.plugin)<0))if(h){var i="undefined"!=typeof d?d.indexOf(g)>=0:!0;e+=o(g,h,i)}else"|"==g?e+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==g&&(e+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>')}return e}function q(c){var d,e=c.parents(".fr-popup, .fr-toolbar").data("instance")||b,f=c.data("cmd");b.node.hasClass(c.get(0),"fr-dropdown")?d=c.next():(c.removeClass("fr-active"),c.attr("aria-pressed")&&c.attr("aria-pressed",!1)),a.FE.COMMANDS[f]&&a.FE.COMMANDS[f].refresh?a.FE.COMMANDS[f].refresh.apply(e,[c,d]):b.refresh[f]&&e.refresh[f](c,d)}function r(c){var d=b.$tb?b.$tb.data("instance")||b:b;return b.events.trigger("buttons.refresh")===!1?!0:void setTimeout(function(){for(var e=d.selection.inEditor()&&d.core.hasFocus(),f=0;f<c.length;f++){var g=a(c[f]),h=g.data("cmd");0===g.parents(".fr-popup").length?e||a.FE.COMMANDS[h]&&a.FE.COMMANDS[h].forcedRefresh?d.button.refresh(g):b.node.hasClass(g.get(0),"fr-dropdown")||(g.removeClass("fr-active"),g.attr("aria-pressed")&&g.attr("aria-pressed",!1)):g.parents(".fr-popup").is(":visible")&&d.button.refresh(g)}},0)}function s(){r(w),r(x)}function t(){w=[],x=[]}function u(){clearTimeout(y),y=setTimeout(s,50)}function v(){b.opts.toolbarInline?b.events.on("toolbar.show",s):(b.events.on("mouseup",u),b.events.on("keyup",u),b.events.on("blur",u),b.events.on("focus",u),b.events.on("contentChanged",u),b.helpers.isMobile()&&b.events.$on(b.$doc,"selectionchange",s)),b.events.on("shared.destroy",t)}var w=[];(b.opts.toolbarInline||b.opts.toolbarContainer)&&(b.shared.buttons||(b.shared.buttons=[]),w=b.shared.buttons);var x=[];b.shared.popup_buttons||(b.shared.popup_buttons=[]),x=b.shared.popup_buttons;var y=null;return{_init:v,buildList:p,bindCommands:m,refresh:q,bulkRefresh:s,exec:f,click:h,hideActiveDropdowns:j,getButtons:d}},a.FE.MODULES.modals=function(b){function c(a){return n[a]}function d(c,d){var e='<div tabIndex="-1" class="fr-modal'+(b.opts.theme?" "+b.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">',f='<i title="'+b.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i>';return e+='<div class="fr-modal-head">'+c+f+"</div>",e+='<div tabIndex="-1" class="fr-modal-body">'+d+"</div>",e+="</div></div>",a(e)}function e(c,e,f){if(b.shared.$overlay||(b.shared.$overlay=a('<div class="fr-overlay">').appendTo("body:first")),m=b.shared.$overlay,b.opts.theme&&m.addClass(b.opts.theme+"-theme"),!n[c]){var g=d(e,f);n[c]={$modal:g,$head:g.find(".fr-modal-head"),$body:g.find(".fr-modal-body")},b.helpers.isMobile()||g.addClass("fr-desktop"),g.appendTo("body:first"),b.events.$on(g,"click",".fr-modal-close",function(){h(c)}),n[c].$body.css("margin-top",n[c].$head.outerHeight()),b.events.$on(g,"keydown",function(d){var e=d.which;return e==a.FE.KEYCODE.ESC?(h(c),b.accessibility.focusModalButton(g),!1):a(d.currentTarget).is("input[type=text], textarea")||e==a.FE.KEYCODE.ARROW_UP||e==a.FE.KEYCODE.ARROW_DOWN||b.keys.isBrowserAction(d)?!0:(d.preventDefault(),d.stopPropagation(),!1)},!0),h(c,!0)}return n[c]}function f(){for(var a in n){var b=n[a];b&&b.$modal&&b.$modal.removeData().remove()}m&&m.removeData().remove(),n={}}function g(c){if(n[c]){var d=n[c].$modal;d.data("instance",b),d.show(),m.show(),a(b.o_doc).find("body:first").addClass("prevent-scroll"),b.helpers.isMobile()&&a(b.o_doc).find("body:first").addClass("fr-mobile"),d.addClass("fr-active"),b.accessibility.focusModal(d)}}function h(c,d){if(n[c]){var e=n[c].$modal,f=e.data("instance")||b;f.events.enableBlur(),e.hide(),m.hide(),a(f.o_doc).find("body:first").removeClass("prevent-scroll fr-mobile"),e.removeClass("fr-active"),d||(b.accessibility.restoreSelection(f),b.events.trigger("modals.hide"))}}function i(c){if(n[c]){var d=n[c],e=d.$modal,f=d.$body,g=a(b.o_win).height(),h=e.find(".fr-modal-wrapper"),i=h.outerHeight(!0),j=h.height()-(f.outerHeight(!0)-f.height()),k=g-i+j,l=f.get(0).scrollHeight,m="auto";l>k&&(m=k),f.height(m)}}function j(a){var c;if("string"==typeof a){if(!n[a])return;c=n[a].$modal}else c=a;return c&&b.node.hasClass(c,"fr-active")&&b.core.sameInstance(c)||!1}function k(a){for(var b in n)if(n.hasOwnProperty(b)&&j(b)&&("undefined"==typeof a||n[b].$modal.data("instance")==a))return n[b].$modal;return!1}function l(){b.events.on("shared.destroy",f,!0)}b.shared.modals||(b.shared.modals={});var m,n=b.shared.modals;return{_init:l,get:c,create:e,show:g,hide:h,resize:i,isVisible:j,areVisible:k}},a.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},a.FE.RegisterTemplate=function(b,c){a.FE.POPUP_TEMPLATES[b]=c},a.FE.MODULES.popups=function(b){function c(a,c){c.is(":visible")||(c=b.$sc),c.is(x[a].data("container"))||(x[a].data("container",c),c.append(x[a]))}function d(a,d,e,h){if(f(a)||(g()&&b.$el.find(".fr-marker").length>0?(b.events.disableBlur(),b.selection.restore()):g()||(b.events.disableBlur(),b.events.focus(),b.events.enableBlur())),m([a]),!x[a])return!1;var i=b.button.getButtons(".fr-dropdown.fr-active");i.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),i.next().attr("aria-hidden",!0),x[a].data("instance",b),b.$tb&&b.$tb.data("instance",b);var j=x[a].outerWidth(),k=f(a);x[a].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var l=x[a].data("container");b.opts.toolbarInline&&l&&b.$tb&&l.get(0)==b.$tb.get(0)&&(c(a,b.$sc),e=b.$tb.offset().top-b.helpers.getPX(b.$tb.css("margin-top")),d=b.$tb.offset().left+b.$tb.outerWidth()/2+(parseFloat(b.$tb.find(".fr-arrow").css("margin-left"))||0)+b.$tb.find(".fr-arrow").outerWidth()/2,b.node.hasClass(b.$tb.get(0),"fr-above")&&e&&(e+=b.$tb.outerHeight()),h=0),l=x[a].data("container"),!b.opts.iframe||h||k||(d&&(d-=b.$iframe.offset().left),e&&(e-=b.$iframe.offset().top)),l.is(b.$tb)?b.$tb.css("zIndex",(b.opts.zIndex||1)+4):x[a].css("zIndex",(b.opts.zIndex||1)+4),d&&(d-=j/2),b.opts.toolbarBottom&&l&&b.$tb&&l.get(0)==b.$tb.get(0)&&(x[a].addClass("fr-above"),e&&(e-=x[a].outerHeight())),x[a].removeClass("fr-active"),b.position.at(d,e,x[a],h||0),x[a].addClass("fr-active"),k||b.accessibility.focusPopup(x[a]),b.opts.toolbarInline&&b.toolbar.hide(),b.events.trigger("popups.show."+a),s(a)._repositionPopup(),o()}function e(a,c){b.events.on("popups.show."+a,c)}function f(a){return x[a]&&b.node.hasClass(x[a],"fr-active")&&b.core.sameInstance(x[a])||!1}function g(a){for(var b in x)if(x.hasOwnProperty(b)&&f(b)&&("undefined"==typeof a||x[b].data("instance")==a))return x[b];return!1}function h(a){var c=null;c="string"!=typeof a?a:x[a],c&&b.node.hasClass(c,"fr-active")&&(c.removeClass("fr-active fr-above"),b.events.trigger("popups.hide."+a),b.$tb&&(b.opts.zIndex>1?b.$tb.css("zIndex",b.opts.zIndex+1):b.$tb.css("zIndex","")),b.events.disableBlur(),c.find("input, textarea, button").filter(":focus").blur(),c.find("input, textarea").attr("disabled","disabled"))}function i(a,c){b.events.on("popups.hide."+a,c)}function j(a){var c=x[a];if(c&&!c.data("inst"+b.id)){var d=s(a);t(d,a)}return c}function k(a,c){b.events.on("popups.refresh."+a,c)}function l(c){x[c].data("instance",b),b.events.trigger("popups.refresh."+c);for(var d=x[c].find(".fr-command"),e=0;e<d.length;e++){var f=a(d[e]);0===f.parents(".fr-dropdown-menu").length&&b.button.refresh(f)}}function m(a){"undefined"==typeof a&&(a=[]);for(var b in x)x.hasOwnProperty(b)&&a.indexOf(b)<0&&h(b)}function n(){b.shared.exit_flag=!0}function o(){b.shared.exit_flag=!1}function p(){return b.shared.exit_flag}function q(c,d){var e=a.FE.POPUP_TEMPLATES[c];if(!e)return null;"function"==typeof e&&(e=e.apply(b));for(var f in d)d.hasOwnProperty(f)&&(e=e.replace("[_"+f.toUpperCase()+"_]",d[f]));return e}function r(c,d){var e,f,g=q(c,d);return g?(e=a('<div class="fr-popup'+(b.helpers.isMobile()?" fr-mobile":" fr-desktop")+(b.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+g+"</div>"),b.opts.theme&&e.addClass(b.opts.theme+"-theme"),b.opts.zIndex>1&&(b.opts.editInPopup?e.css("z-index",b.opts.zIndex+2):b.$tb.css("z-index",b.opts.zIndex+2)),"auto"!=b.opts.direction&&e.removeClass("fr-ltr fr-rtl").addClass("fr-"+b.opts.direction),e.find("input, textarea").attr("dir",b.opts.direction).attr("disabled","disabled"),f=a("body:first"),f.append(e),e.data("container",f),x[c]=e,b.button.bindCommands(e,!1),e):(e=a('<div class="fr-popup fr-empty"></div>'),f=a("body:first"),f.append(e),e.data("container",f),x[c]=e,e)}function s(c){var d=x[c];return{_windowResize:function(){var a=d.data("instance")||b;!a.helpers.isMobile()&&d.is(":visible")&&(a.events.disableBlur(),a.popups.hide(c),a.events.enableBlur())},_inputFocus:function(c){var e=d.data("instance")||b,f=a(c.currentTarget);if(f.is("input:file")&&f.closest(".fr-layer").addClass("fr-input-focus"),c.preventDefault(),c.stopPropagation(),setTimeout(function(){e.events.enableBlur()},100),e.helpers.isMobile()){var g=a(e.o_win).scrollTop();setTimeout(function(){a(e.o_win).scrollTop(g)},0)}},_inputBlur:function(c){var e=d.data("instance")||b,f=a(c.currentTarget);f.is("input:file")&&f.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&a(this).is(":visible")&&(e.events.blurActive()&&e.events.trigger("blur"),e.events.enableBlur())},_editorKeydown:function(e){var g=d.data("instance")||b;g.keys.ctrlKey(e)||e.which==a.FE.KEYCODE.ALT||e.which==a.FE.KEYCODE.ESC||(f(c)&&d.find(".fr-back:visible").length?g.button.exec(d.find(".fr-back:visible:first")):e.which!=a.FE.KEYCODE.ALT&&g.popups.hide(c))},_preventFocus:function(c){var e=d.data("instance")||b,f=c.originalEvent?c.originalEvent.target||c.originalEvent.originalTarget:null;"mouseup"==c.type||a(f).is(":focus")||e.events.disableBlur(),"mouseup"!=c.type||a(f).hasClass("fr-command")||a(f).parents(".fr-command").length>0||a(f).hasClass("fr-dropdown-content")||b.button.hideActiveDropdowns(d),(b.browser.safari||b.browser.mozilla)&&"mousedown"==c.type&&a(f).is("input[type=file]")&&e.events.disableBlur();var g="input, textarea, button, select, label, .fr-command";return f&&!a(f).is(g)&&0===a(f).parents(g).length?(c.stopPropagation(),!1):(f&&a(f).is(g)&&c.stopPropagation(),void o())},_editorMouseup:function(){d.is(":visible")&&p()&&d.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&b.events.disableBlur()},_windowMouseup:function(a){if(!b.core.sameInstance(d))return!0;var e=d.data("instance")||b;d.is(":visible")&&p()&&(a.stopPropagation(),e.markers.remove(),e.popups.hide(c),o())},_windowKeydown:function(e){if(!b.core.sameInstance(d))return!0;var f=d.data("instance")||b,g=e.which;if(a.FE.KEYCODE.ESC==g){if(f.popups.isVisible(c)&&f.opts.toolbarInline)return e.stopPropagation(),f.popups.isVisible(c)&&(d.find(".fr-back:visible").length?(f.button.exec(d.find(".fr-back:visible:first")),f.accessibility.focusPopupButton(d)):d.find(".fr-dismiss:visible").length?f.button.exec(d.find(".fr-dismiss:visible:first")):(f.popups.hide(c),f.toolbar.showInline(null,!0),f.accessibility.FocusPopupButton(d))),!1;if(f.popups.isVisible(c))return d.find(".fr-back:visible").length?(f.button.exec(d.find(".fr-back:visible:first")),f.accessibility.focusPopupButton(d)):d.find(".fr-dismiss:visible").length?f.button.exec(d.find(".fr-dismiss:visible:first")):(f.popups.hide(c),f.accessibility.focusPopupButton(d)),!1}},_doPlaceholder:function(){var b=a(this).next();0===b.length&&a(this).attr("placeholder")&&a(this).after('<label for="'+a(this).attr("id")+'">'+a(this).attr("placeholder")+"</label>"),a(this).toggleClass("fr-not-empty",""!==a(this).val())},_repositionPopup:function(){if(!b.opts.height&&!b.opts.heightMax||b.opts.toolbarInline)return!0;if(b.$wp&&f(c)&&d.parent().get(0)==b.$sc.get(0)){var a=d.offset().top-b.$wp.offset().top,e=b.$wp.outerHeight();b.node.hasClass(d.get(0),"fr-above")&&(a+=d.outerHeight()),a>e||0>a?d.addClass("fr-hidden"):d.removeClass("fr-hidden")}}}}function t(a,c){b.events.on("mouseup",a._editorMouseup,!0),b.$wp&&b.events.on("keydown",a._editorKeydown),b.events.on("blur",function(){g()&&b.markers.remove(),m()}),b.$wp&&!b.helpers.isMobile()&&b.events.$on(b.$wp,"scroll.popup"+c,a._repositionPopup),b.events.on("window.mouseup",a._windowMouseup,!0),b.events.on("window.keydown",a._windowKeydown,!0),x[c].data("inst"+b.id,!0),b.events.on("destroy",function(){b.core.sameInstance(x[c])&&x[c].removeClass("fr-active").appendTo("body:first")},!0)}function u(c,d){var e=r(c,d),f=s(c);return t(f,c),b.events.$on(e,"mousedown mouseup touchstart touchend touch","*",f._preventFocus,!0),b.events.$on(e,"focus","input, textarea, button, select",f._inputFocus,!0),b.events.$on(e,"blur","input, textarea, button, select",f._inputBlur,!0),b.accessibility.registerPopup(c),b.events.$on(e,"keydown keyup change input","input, textarea",f._doPlaceholder,!0),b.helpers.isIOS()&&b.events.$on(e,"touchend","label",function(){a("#"+a(this).attr("for")).prop("checked",function(a,b){return!b})},!0),b.events.$on(a(b.o_win),"resize",f._windowResize,!0),e}function v(){for(var a in x)if(x.hasOwnProperty(a)){var b=x[a];b&&(b.html("").removeData().remove(),x[a]=null)}x=[]}function w(){b.events.on("shared.destroy",v,!0),b.events.on("window.mousedown",n),b.events.on("window.touchmove",o),b.events.$on(a(b.o_win),"scroll",o),b.events.on("mousedown",function(a){g()&&(a.stopPropagation(),b.$el.find(".fr-marker").remove(),n(),b.events.disableBlur())})}b.shared.popups||(b.shared.popups={});var x=b.shared.popups;return b.shared.exit_flag=!1,{_init:w,create:u,get:j,show:d,hide:h,onHide:i,hideAll:m,setContainer:c,refresh:l,onRefresh:k,onShow:e,isVisible:f,areVisible:g}},a.FE.MODULES.position=function(b){function c(){var a=b.selection.ranges(0),c=a.getBoundingClientRect();if(0===c.top&&0===c.left&&0===c.width||0===c.height){var d=!1;0===b.$el.find(".fr-marker").length&&(b.selection.save(),d=!0);var e=b.$el.find(".fr-marker:first");e.css("display","inline"),e.css("line-height","");var f=e.offset(),g=e.outerHeight();e.css("display","none"),e.css("line-height",0),c={},c.left=f.left,c.width=0,c.height=g,c.top=f.top-(b.helpers.isMobile()&&!b.helpers.isIOS()||b.opts.iframe?0:b.helpers.scrollTop()),c.right=1,c.bottom=1,c.ok=!0,d&&b.selection.restore()}return c}function d(a,c,d){var e=a.outerHeight(!0);if(!b.helpers.isMobile()&&b.$tb&&a.parent().get(0)!=b.$tb.get(0)){var f=a.parent().offset().top,g=c-e-(d||0);a.parent().get(0)==b.$sc.get(0)&&(f-=a.parent().position().top);var h=b.$sc.get(0).clientHeight;f+c+e>b.$sc.offset().top+h&&a.parent().offset().top+g>0&&g>0?g>b.$wp.scrollTop()&&(c=g,a.addClass("fr-above")):a.removeClass("fr-above")}return c}function e(a,c){var d=a.outerWidth(!0);return c+d>b.$sc.get(0).clientWidth-10&&(c=b.$sc.get(0).clientWidth-d-10),0>c&&(c=10),c}function f(a){var d=c();a.css({top:0,left:0});var e=d.top+d.height,f=d.left+d.width/2-a.get(0).offsetWidth/2+b.helpers.scrollLeft();b.opts.iframe||(e+=b.helpers.scrollTop()),g(f,e,a,d.height)}function g(a,c,f,g){var h=f.data("container");!h||"BODY"===h.get(0).tagName&&"static"==h.css("position")||(a&&(a-=h.offset().left),c&&(c-=h.offset().top),"BODY"!=h.get(0).tagName?(a&&(a+=h.get(0).scrollLeft),c&&(c+=h.get(0).scrollTop)):"absolute"==h.css("position")&&(a&&(a+=h.position().left),c&&(c+=h.position().top))),b.opts.iframe&&h&&b.$tb&&h.get(0)!=b.$tb.get(0)&&(a&&(a+=b.$iframe.offset().left),c&&(c+=b.$iframe.offset().top));var i=e(f,a);if(a){f.css("left",i);var j=f.data("fr-arrow");j||(j=f.find(".fr-arrow"),f.data("fr-arrow",j)),j.data("margin-left")||j.data("margin-left",b.helpers.getPX(j.css("margin-left"))),j.css("margin-left",a-i+j.data("margin-left"))}c&&f.css("top",d(f,c,g))}function h(c){var d=a(c),e=d.is(".fr-sticky-on"),f=d.data("sticky-top"),g=d.data("sticky-scheduled");if("undefined"==typeof f){d.data("sticky-top",0);var h=a('<div class="fr-sticky-dummy" style="height: '+d.outerHeight()+'px;"></div>');b.$box.prepend(h)}else b.$box.find(".fr-sticky-dummy").css("height",d.outerHeight());if(b.core.hasFocus()||b.$tb.find("input:visible:focus").length>0){var i=b.helpers.scrollTop(),j=Math.min(Math.max(i-b.$tb.parent().offset().top,0),b.$tb.parent().outerHeight()-d.outerHeight());j!=f&&j!=g&&(clearTimeout(d.data("sticky-timeout")),d.data("sticky-scheduled",j),d.outerHeight()<i-b.$tb.parent().offset().top&&d.addClass("fr-opacity-0"),d.data("sticky-timeout",setTimeout(function(){var a=b.helpers.scrollTop(),c=Math.min(Math.max(a-b.$tb.parent().offset().top,0),b.$tb.parent().outerHeight()-d.outerHeight());c>0&&"BODY"==b.$tb.parent().get(0).tagName&&(c+=b.$tb.parent().position().top),c!=f&&(d.css("top",Math.max(c,0)),d.data("sticky-top",c),d.data("sticky-scheduled",c)),d.removeClass("fr-opacity-0")},100))),e||(d.css("top","0"),d.width(b.$tb.parent().width()),d.addClass("fr-sticky-on"),b.$box.addClass("fr-sticky-box"))}else clearTimeout(a(c).css("sticky-timeout")),d.css("top","0"),d.css("position",""),d.width(""),d.data("sticky-top",0),d.removeClass("fr-sticky-on"),b.$box.removeClass("fr-sticky-box")}function i(c){if(c.offsetWidth){var d,e,f=a(c),g=f.outerHeight(),h=f.data("sticky-position"),i=a("body"==b.opts.scrollableContainer?b.o_win:b.opts.scrollableContainer).outerHeight(),j=0,k=0;"body"!==b.opts.scrollableContainer&&(j=b.$sc.offset().top,k=a(b.o_win).outerHeight()-j-i);var l="body"==b.opts.scrollableContainer?b.helpers.scrollTop():j,m=f.is(".fr-sticky-on");f.data("sticky-parent")||f.data("sticky-parent",f.parent());var n=f.data("sticky-parent"),o=n.offset().top,p=n.outerHeight();if(f.data("sticky-offset")?b.$box.find(".fr-sticky-dummy").css("height",g+"px"):(f.data("sticky-offset",!0),f.after('<div class="fr-sticky-dummy" style="height: '+g+'px;"></div>')),!h){var q="auto"!==f.css("top")||"auto"!==f.css("bottom");q||f.css("position","fixed"),h={top:b.node.hasClass(f.get(0),"fr-top"),bottom:b.node.hasClass(f.get(0),"fr-bottom")},q||f.css("position",""),f.data("sticky-position",h),f.data("top",b.node.hasClass(f.get(0),"fr-top")?f.css("top"):"auto"),f.data("bottom",b.node.hasClass(f.get(0),"fr-bottom")?f.css("bottom"):"auto")}var r=function(){return l+d>o&&o+p-g>=l+d},s=function(){return l+i-e>o+g&&o+p>l+i-e};d=b.helpers.getPX(f.data("top")),e=b.helpers.getPX(f.data("bottom"));var t=h.top&&r()&&(b.helpers.isInViewPort(b.$sc.get(0))||"body"==b.opts.scrollableContainer),u=h.bottom&&s();t||u?(f.css("width",n.get(0).getBoundingClientRect().width+"px"),m||(f.addClass("fr-sticky-on"),f.removeClass("fr-sticky-off"),f.css("top")&&("auto"!=f.data("top")?f.css("top",b.helpers.getPX(f.data("top"))+j):f.data("top","auto")),f.css("bottom")&&("auto"!=f.data("bottom")?f.css("bottom",b.helpers.getPX(f.data("bottom"))+k):f.css("bottom","auto")))):b.node.hasClass(f.get(0),"fr-sticky-off")||(f.width(""),f.removeClass("fr-sticky-on"),f.addClass("fr-sticky-off"),f.css("top")&&"auto"!=f.data("top")&&h.top&&f.css("top",0),f.css("bottom")&&"auto"!=f.data("bottom")&&h.bottom&&f.css("bottom",0))}}function j(){var a=document.createElement("test"),c=a.style;return c.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==c.position.indexOf("sticky")&&!b.helpers.isIOS()&&!b.helpers.isAndroid()&&!b.browser.chrome}function k(){if(!j())if(b._stickyElements=[],b.helpers.isIOS()){var c=function(){if(b.helpers.requestAnimationFrame()(c),b.events.trigger("position.refresh")!==!1)for(var a=0;a<b._stickyElements.length;a++)h(b._stickyElements[a])};c(),b.events.$on(a(b.o_win),"scroll",function(){if(b.core.hasFocus())for(var c=0;c<b._stickyElements.length;c++){var d=a(b._stickyElements[c]),e=d.parent(),f=b.helpers.scrollTop();d.outerHeight()<f-e.offset().top&&(d.addClass("fr-opacity-0"),d.data("sticky-top",-1),d.data("sticky-scheduled",-1))}},!0)}else"body"!==b.opts.scrollableContainer&&b.events.$on(a(b.opts.scrollableContainer),"scroll",l,!0),b.events.$on(a(b.o_win),"scroll",l,!0),b.events.$on(a(b.o_win),"resize",l,!0),b.events.on("initialized",l),b.events.on("focus",l),b.events.$on(a(b.o_win),"resize","textarea",l,!0);b.events.on("destroy",function(){b._stickyElements=[]})}function l(){if(b._stickyElements)for(var a=0;a<b._stickyElements.length;a++)i(b._stickyElements[a])}function m(a){a.addClass("fr-sticky"),b.helpers.isIOS()&&a.addClass("fr-sticky-ios"),j()||(a.removeClass("fr-sticky"),b._stickyElements.push(a.get(0)))}function n(){k()}return{_init:n,forSelection:f,addSticky:m,refresh:l,at:g,getBoundingRect:c}},a.FE.MODULES.refresh=function(b){function c(a){g(a,!b.undo.canDo())}function d(a){g(a,!b.undo.canRedo())}function e(a){if(b.node.hasClass(a.get(0),"fr-no-refresh"))return!1;for(var c=b.selection.blocks(),d=0;d<c.length;d++){for(var e=c[d].previousSibling;e&&e.nodeType==Node.TEXT_NODE&&0===e.textContent.length;)e=e.previousSibling;if("LI"!=c[d].tagName||e)return g(a,!1),!0;g(a,!0)}}function f(c){if(b.node.hasClass(c.get(0),"fr-no-refresh"))return!1;for(var d=b.selection.blocks(),e=0;e<d.length;e++){var f="rtl"==b.opts.direction||"rtl"==a(d[e]).css("direction")?"margin-right":"margin-left";if("LI"==d[e].tagName||"LI"==d[e].parentNode.tagName)return g(c,!1),!0;if(b.helpers.getPX(a(d[e]).css(f))>0)return g(c,!1),!0}g(c,!0)}function g(a,b){a.toggleClass("fr-disabled",b).attr("aria-disabled",b)}return{undo:c,redo:d,outdent:f,indent:e}},a.extend(a.FE.DEFAULTS,{editInPopup:!1}),a.FE.MODULES.textEdit=function(a){function b(){var b='<div id="fr-text-edit-'+a.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+a.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+a.language.translate("Update")+"</button></div></div>",c={edit:b};a.popups.create("text.edit",c)}function c(){var b,c=a.popups.get("text.edit");b="INPUT"===a.$el.prop("tagName")?a.$el.attr("placeholder"):a.$el.text(),c.find("input").val(b).trigger("change"),a.popups.setContainer("text.edit",a.$sc),a.popups.show("text.edit",a.$el.offset().left+a.$el.outerWidth()/2,a.$el.offset().top+a.$el.outerHeight(),a.$el.outerHeight())}function d(){a.events.$on(a.$el,a._mouseup,function(){setTimeout(function(){c()},10)})}function e(){var b=a.popups.get("text.edit"),c=b.find("input").val();0===c.length&&(c=a.opts.placeholderText),"INPUT"===a.$el.prop("tagName")?a.$el.attr("placeholder",c):a.$el.text(c),a.events.trigger("contentChanged"),a.popups.hide("text.edit")}function f(){a.opts.editInPopup&&(b(),d())}return{_init:f,update:e}},a.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),a.extend(a.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:null,toolbarButtonsXS:null,toolbarButtonsSM:null,toolbarButtonsMD:null,toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),a.FE.TOOLBAR_BUTTONS=["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","embedly","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],a.FE.TOOLBAR_BUTTONS_MD=null,a.FE.TOOLBAR_BUTTONS_SM=["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],a.FE.TOOLBAR_BUTTONS_XS=["bold","italic","fontFamily","fontSize","|","undo","redo"],a.FE.MODULES.toolbar=function(b){function c(a,b){for(var c=0;c<b.length;c++)"-"!=b[c]&&"|"!=b[c]&&a.indexOf(b[c])<0&&a.push(b[c])}function d(){var d=a.merge([],e());c(d,t[a.FE.XS]),c(d,t[a.FE.SM]),c(d,t[a.FE.MD]),c(d,t[a.FE.LG]);for(var f=d.length-1;f>=0;f--)"-"!=d[f]&&"|"!=d[f]&&d.indexOf(d[f])<f&&d.splice(f,1);var g=b.button.buildList(d,e());b.$tb.append(g),b.button.bindCommands(b.$tb)}function e(){var a=b.helpers.screenSize();return t[a]}function f(){var a=e();b.$tb.find(".fr-separator").remove(),b.$tb.find("> .fr-command").addClass("fr-hidden");for(var c=0;c<a.length;c++)if("|"==a[c]||"-"==a[c])b.$tb.append(b.button.buildList([a[c]]));else{var d=b.$tb.find('> .fr-command[data-cmd="'+a[c]+'"]'),f=null;b.node.hasClass(d.next().get(0),"fr-dropdown-menu")&&(f=d.next()),d.removeClass("fr-hidden").appendTo(b.$tb),f&&f.appendTo(b.$tb)}}function g(){b.events.$on(a(b.o_win),"resize",f),b.events.$on(a(b.o_win),"orientationchange",f)}function h(c,d){setTimeout(function(){if((!c||c.which!=a.FE.KEYCODE.ESC)&&b.selection.inEditor()&&b.core.hasFocus()&&!b.popups.areVisible()&&(b.opts.toolbarVisibleWithoutSelection||!b.selection.isCollapsed()&&!b.keys.isIME()||d)){if(b.$tb.data("instance",b),b.events.trigger("toolbar.show",[c])===!1)return!1;b.$tb.show(),b.opts.toolbarContainer||b.position.forSelection(b.$tb),b.opts.zIndex>1?b.$tb.css("z-index",b.opts.zIndex+1):b.$tb.css("z-index",null)}},0)}function i(a){if(a&&"blur"===a.type&&document.activeElement===b.el)return!1;if(a&&"keydown"===a.type&&b.keys.ctrlKey(a))return!0;var c=b.button.getButtons(".fr-dropdown.fr-active");return c.next().find(b.o_doc.activeElement).length?!0:void(b.events.trigger("toolbar.hide")!==!1&&b.$tb.hide())}function j(){return b.events.trigger("toolbar.show")===!1?!1:void b.$tb.show()}function k(c){clearTimeout(u),c&&c.which==a.FE.KEYCODE.ESC||(u=setTimeout(h,b.opts.typingTimer))}function l(){b.events.on("window.mousedown",i),b.events.on("keydown",i),b.events.on("blur",i),b.helpers.isMobile()||b.events.on("window.mouseup",h),b.helpers.isMobile()?b.helpers.isIOS()||(b.events.on("window.touchend",h),b.browser.mozilla&&setInterval(h,200)):b.events.on("window.keyup",k),b.events.on("keydown",function(b){b&&b.which==a.FE.KEYCODE.ESC&&i()}),b.events.on("keydown",function(b){return b.which==a.FE.KEYCODE.ALT?(b.stopPropagation(),!1):void 0},!0),b.events.$on(b.$wp,"scroll.toolbar",h),b.events.on("commands.after",h),b.helpers.isMobile()&&(b.events.$on(b.$doc,"selectionchange",k),b.events.$on(b.$doc,"orientationchange",h))}function m(){b.opts.toolbarInline?(b.$sc.append(b.$tb),b.$tb.data("container",b.$sc),b.$tb.addClass("fr-inline"),b.$tb.prepend('<span class="fr-arrow"></span>'),l(),b.opts.toolbarBottom=!1):(b.opts.toolbarBottom&&!b.helpers.isIOS()?(b.$box.append(b.$tb),b.$tb.addClass("fr-bottom"),
b.$box.addClass("fr-bottom")):(b.opts.toolbarBottom=!1,b.$box.prepend(b.$tb),b.$tb.addClass("fr-top"),b.$box.addClass("fr-top")),b.$tb.addClass("fr-basic"),b.opts.toolbarSticky&&(b.opts.toolbarStickyOffset&&(b.opts.toolbarBottom?b.$tb.css("bottom",b.opts.toolbarStickyOffset):b.$tb.css("top",b.opts.toolbarStickyOffset)),b.position.addSticky(b.$tb)))}function n(){b.$tb.html("").removeData().remove(),b.$tb=null}function o(){b.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),b.$box.find(".fr-sticky-dummy").remove()}function p(){b.opts.theme&&b.$tb.addClass(b.opts.theme+"-theme"),b.opts.zIndex>1&&b.$tb.css("z-index",b.opts.zIndex+1),"auto"!=b.opts.direction&&b.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+b.opts.direction),b.helpers.isMobile()?b.$tb.addClass("fr-mobile"):b.$tb.addClass("fr-desktop"),b.opts.toolbarContainer?(b.opts.toolbarInline&&(l(),i()),b.opts.toolbarBottom?b.$tb.addClass("fr-bottom"):b.$tb.addClass("fr-top")):m(),d(),g(),b.accessibility.registerToolbar(b.$tb),b.events.$on(b.$tb,b._mousedown+" "+b._mouseup,function(a){var c=a.originalEvent?a.originalEvent.target||a.originalEvent.originalTarget:null;return c&&"INPUT"!=c.tagName&&!b.edit.isDisabled()?(a.stopPropagation(),a.preventDefault(),!1):void 0},!0)}function q(){return b.$sc=a(b.opts.scrollableContainer).first(),b.$wp?(b.opts.toolbarContainer?(b.shared.$tb?(b.$tb=b.shared.$tb,b.opts.toolbarInline&&l()):(b.shared.$tb=a('<div class="fr-toolbar"></div>'),b.$tb=b.shared.$tb,a(b.opts.toolbarContainer).append(b.$tb),p(),b.$tb.data("instance",b)),b.opts.toolbarInline?b.$box.addClass("fr-inline"):b.$box.addClass("fr-basic"),b.events.on("focus",function(){b.$tb.data("instance",b)},!0),b.opts.toolbarInline=!1):b.opts.toolbarInline?(b.$box.addClass("fr-inline"),b.shared.$tb?(b.$tb=b.shared.$tb,l()):(b.shared.$tb=a('<div class="fr-toolbar"></div>'),b.$tb=b.shared.$tb,p())):(b.$box.addClass("fr-basic"),b.$tb=a('<div class="fr-toolbar"></div>'),p(),b.$tb.data("instance",b)),b.events.on("destroy",o,!0),void b.events.on(b.opts.toolbarInline||b.opts.toolbarContainer?"shared.destroy":"destroy",n,!0)):!1}function r(){!v&&b.$tb&&(b.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),v=!0)}function s(){v&&b.$tb&&(b.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),v=!1),b.button.bulkRefresh()}var t=[];t[a.FE.XS]=b.opts.toolbarButtonsXS||b.opts.toolbarButtons||a.FE.TOOLBAR_BUTTONS_XS||a.FE.TOOLBAR_BUTTONS||[],t[a.FE.SM]=b.opts.toolbarButtonsSM||b.opts.toolbarButtons||a.FE.TOOLBAR_BUTTONS_SM||a.FE.TOOLBAR_BUTTONS||[],t[a.FE.MD]=b.opts.toolbarButtonsMD||b.opts.toolbarButtons||a.FE.TOOLBAR_BUTTONS_MD||a.FE.TOOLBAR_BUTTONS||[],t[a.FE.LG]=b.opts.toolbarButtons||a.FE.TOOLBAR_BUTTONS||[];var u=null,v=!1;return{_init:q,hide:i,show:j,showInline:h,disable:r,enable:s}},a.FE.PLUGINS.align=function(b){function c(c){var d=b.selection.element();if(a(d).parents(".fr-img-caption").length)a(d).css("text-align",c);else{b.selection.save(),b.html.wrap(!0,!0,!0,!0),b.selection.restore();for(var e=b.selection.blocks(),f=0;f<e.length;f++)b.helpers.getAlignment(a(e[f].parentNode))==c?a(e[f]).css("text-align","").removeClass("fr-temp-div"):a(e[f]).css("text-align",c).removeClass("fr-temp-div"),""===a(e[f]).attr("class")&&a(e[f]).removeAttr("class"),""===a(e[f]).attr("style")&&a(e[f]).removeAttr("style");b.selection.save(),b.html.unwrap(),b.selection.restore()}}function d(c){var d=b.selection.blocks();if(d.length){var e=b.helpers.getAlignment(a(d[0]));c.find("> *:first").replaceWith(b.icon.create("align-"+e))}}function e(c,d){var e=b.selection.blocks();if(e.length){var f=b.helpers.getAlignment(a(e[0]));d.find('a.fr-command[data-param1="'+f+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:c,refresh:d,refreshOnShow:e}},a.FE.DefineIcon("align",{NAME:"align-left"}),a.FE.DefineIcon("align-left",{NAME:"align-left"}),a.FE.DefineIcon("align-right",{NAME:"align-right"}),a.FE.DefineIcon("align-center",{NAME:"align-center"}),a.FE.DefineIcon("align-justify",{NAME:"align-justify"}),a.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.align.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+d+'" title="'+this.language.translate(c[d])+'">'+this.icon.create("align-"+d)+'<span class="fr-sr-only">'+this.language.translate(c[d])+"</span></a></li>");return b+="</ul>"},callback:function(a,b){this.align.apply(b)},refresh:function(a){this.align.refresh(a)},refreshOnShow:function(a,b){this.align.refreshOnShow(a,b)},plugin:"align"}),a.extend(a.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),a.FE.PLUGINS.charCounter=function(b){function c(){return(b.el.textContent||"").replace(/\u200B/g,"").length}function d(d){if(b.opts.charCounterMax<0)return!0;if(c()<b.opts.charCounterMax)return!0;var e=d.which;return!b.keys.ctrlKey(d)&&b.keys.isCharacter(e)||e===a.FE.KEYCODE.IME?(d.preventDefault(),d.stopPropagation(),b.events.trigger("charCounter.exceeded"),!1):!0}function e(d){if(b.opts.charCounterMax<0)return d;var e=a("<div>").html(d).text().length;return e+c()<=b.opts.charCounterMax?d:(b.events.trigger("charCounter.exceeded"),"")}function f(){if(b.opts.charCounterCount){var a=c()+(b.opts.charCounterMax>0?"/"+b.opts.charCounterMax:"");h.text(a),b.opts.toolbarBottom&&h.css("margin-bottom",b.$tb.outerHeight(!0));var d=b.$wp.get(0).offsetWidth-b.$wp.get(0).clientWidth;d>=0&&("rtl"==b.opts.direction?h.css("margin-left",d):h.css("margin-right",d))}}function g(){return b.$wp&&b.opts.charCounterCount?(h=a('<span class="fr-counter"></span>'),h.css("bottom",b.$wp.css("border-bottom-width")),b.$box.append(h),b.events.on("keydown",d,!0),b.events.on("paste.afterCleanup",e),b.events.on("keyup contentChanged input",function(){b.events.trigger("charCounter.update")}),b.events.on("charCounter.update",f),b.events.trigger("charCounter.update"),void b.events.on("destroy",function(){a(b.o_win).off("resize.char"+b.id),h.removeData().remove(),h=null})):!1}var h;return{_init:g,count:c}},a.FE.PLUGINS.codeBeautifier=function(){function a(a,c){function d(a){return a.replace(/^\s+/g,"")}function e(a){return a.replace(/\s+$/g,"")}function g(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=i,this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:u,in_array:function(a,b){for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1}},this.is_whitespace=function(a){for(var b=0;b<a.length;a++)if(!this.Utils.in_array(a.charAt(b),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var a="";if(a=this.input.charAt(this.pos),this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)o&&"\n"==a&&this.newlines<=p&&(this.newlines+=1),this.pos++,a=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(a){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,a),this.print_indentation(a)):(this.line_char_count++,a.push(" "))},this.get_content=function(){for(var a="",b=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(b);else{if(q){var c=this.input.substr(this.pos,3);if("{{#"==c||"{{/"==c)break;if("{{!"==c)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,b.push(a)}}return b.length?b.join(""):""},this.get_contents_to=function(a){if(this.pos==this.input.length)return["","TK_EOF"];var b="",c=new RegExp("</"+a+"\\s*>","igm");c.lastIndex=this.pos;var d=c.exec(this.input),e=d?d.index:this.input.length;return this.pos<e&&(b=this.input.substring(this.pos,e),this.pos=e),b},this.record_tag=function(a){this.tags[a+"count"]?(this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level):(this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level),this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!=b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]),delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1==this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}},this.indent_to_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!=b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]])}},this.get_tag=function(a){var b,c,d,e="",f=[],g="",h=!1,i=!0,j=this.pos,l=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=j,this.line_char_count=l),f.length?f.join(""):["","TK_EOF"];if(e=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(e,this.Utils.whitespace))h=!0;else{if(("'"==e||'"'==e)&&(e+=this.get_unformatted(e),h=!0),"="==e&&(h=!1),f.length&&"="!=f[f.length-1]&&">"!=e&&h){if(this.space_or_wrap(f),h=!1,!i&&"force"==r&&"/"!=e){this.print_newline(!0,f),this.print_indentation(f);for(var m=0;s>m;m++)f.push(k)}for(var o=0;o<f.length;o++)if(" "==f[o]){i=!1;break}}if(q&&"<"==d&&e+this.input.charAt(this.pos)=="{{"&&(e+=this.get_unformatted("}}"),f.length&&" "!=f[f.length-1]&&"<"!=f[f.length-1]&&(e=" "+e),h=!0),"<"!=e||d||(b=this.pos-1,d="<"),q&&!d&&f.length>=2&&"{"==f[f.length-1]&&"{"==f[f.length-2]&&(b="#"==e||"/"==e||"!"==e?this.pos-3:this.pos-2,d="{"),this.line_char_count++,f.push(e),f[1]&&("!"==f[1]||"?"==f[1]||"%"==f[1])){f=[this.get_comment(b)];break}if(q&&f[1]&&"{"==f[1]&&f[2]&&"!"==f[2]){f=[this.get_comment(b)];break}if(q&&"{"==d&&f.length>2&&"}"==f[f.length-2]&&"}"==f[f.length-1])break}}while(">"!=e);var p,t,u=f.join("");p=-1!=u.indexOf(" ")?u.indexOf(" "):"{"==u[0]?u.indexOf("}"):u.indexOf(">"),t="<"!=u[0]&&q?"#"==u[2]?3:2:1;var v=u.substring(t,p).toLowerCase();return"/"==u.charAt(u.length-2)||this.Utils.in_array(v,this.Utils.single_token)?a||(this.tag_type="SINGLE"):q&&"{"==u[0]&&"else"==v?a||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(v,n)?(g=this.get_unformatted("</"+v+">",u),f.push(g),c=this.pos-1,this.tag_type="SINGLE"):"script"==v&&(-1==u.search("type")||u.search("type")>-1&&u.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?a||(this.record_tag(v),this.tag_type="SCRIPT"):"style"==v&&(-1==u.search("type")||u.search("type")>-1&&u.search("text/css")>-1)?a||(this.record_tag(v),this.tag_type="STYLE"):"!"==v.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"==v.charAt(0)?(this.retrieve_tag(v.substring(1)),this.tag_type="END"):(this.record_tag(v),"html"!=v.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(f),this.Utils.in_array(v,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),a&&(this.pos=j,this.line_char_count=l),f.join("")},this.get_comment=function(a){var b="",c=">",d=!1;this.pos=a;var e=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(b+=e,b[b.length-1]!=c[c.length-1]||-1==b.indexOf(c));)!d&&b.length<10&&(0===b.indexOf("<![if")?(c="<![endif]>",d=!0):0===b.indexOf("<![cdata[")?(c="]]>",d=!0):0===b.indexOf("<![")?(c="]>",d=!0):0===b.indexOf("<!--")?(c="-->",d=!0):0===b.indexOf("{{!")?(c="}}",d=!0):0===b.indexOf("<?")?(c="?>",d=!0):0===b.indexOf("<%")&&(c="%>",d=!0)),e=this.input.charAt(this.pos),this.pos++;return b},this.get_unformatted=function(a,b){if(b&&-1!=b.toLowerCase().indexOf(a))return"";var c="",d="",e=0,f=!0;do{if(this.pos>=this.input.length)return d;if(c=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(c,this.Utils.whitespace)){if(!f){this.line_char_count--;continue}if("\n"==c||"\r"==c){d+="\n",this.line_char_count=0;continue}}d+=c,this.line_char_count++,f=!0,q&&"{"==c&&d.length&&"{"==d[d.length-2]&&(d+=this.get_unformatted("}}"),e=d.length)}while(-1==d.toLowerCase().indexOf(a,e));return d},this.get_token=function(){var a;if("TK_TAG_SCRIPT"==this.last_token||"TK_TAG_STYLE"==this.last_token){var b=this.last_token.substr(7);return a=this.get_contents_to(b),"string"!=typeof a?a:[a,"TK_"+b]}if("CONTENT"==this.current_mode)return a=this.get_content(),"string"!=typeof a?a:[a,"TK_CONTENT"];if("TAG"==this.current_mode){if(a=this.get_tag(),"string"!=typeof a)return a;var c="TK_TAG_"+this.tag_type;return[a,c]}},this.get_full_indent=function(a){return a=this.indent_level+a||0,1>a?"":new Array(a+1).join(this.indent_string)},this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!=a.toLowerCase()||!this.Utils.in_array("a",b))return!0;var c=this.get_tag(!0),d=(c||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!d||this.Utils.in_array(d,b)?!0:!1},this.printer=function(a,b,c,f,g){this.input=a||"",this.output=[],this.indent_character=b,this.indent_string="",this.indent_size=c,this.brace_style=g,this.indent_level=0,this.wrap_line_length=f,this.line_char_count=0;for(var h=0;h<this.indent_size;h++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0,b&&b.length&&(a||"\n"!=b[b.length-1])&&("\n"!=b[b.length-1]&&(b[b.length-1]=e(b[b.length-1])),b.push("\n"))},this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(a){(!this.is_whitespace(a)||this.output.length)&&((a||""!==a)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),a=d(a)),this.print_token_raw(a))},this.print_token_raw=function(a){this.newlines>0&&(a=e(a)),a&&""!==a&&(a.length>1&&"\n"==a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(var b=0;b<this.newlines;b++)this.print_newline(b>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var h,i,j,k,l,m,n,o,p,q,r,s,t,u;for(c=c||{},void 0!==c.wrap_line_length&&0!==parseInt(c.wrap_line_length,10)||void 0===c.max_char||0===parseInt(c.max_char,10)||(c.wrap_line_length=c.max_char),i=void 0===c.indent_inner_html?!1:c.indent_inner_html,j=void 0===c.indent_size?4:parseInt(c.indent_size,10),k=void 0===c.indent_char?" ":c.indent_char,m=void 0===c.brace_style?"collapse":c.brace_style,l=0===parseInt(c.wrap_line_length,10)?32786:parseInt(c.wrap_line_length||250,10),n=c.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],o=void 0===c.preserve_newlines?!0:c.preserve_newlines,p=o?isNaN(parseInt(c.max_preserve_newlines,10))?32786:parseInt(c.max_preserve_newlines,10):0,q=void 0===c.indent_handlebars?!1:c.indent_handlebars,r=void 0===c.wrap_attributes?"auto":c.wrap_attributes,s=void 0===c.wrap_attributes_indent_size?j:parseInt(c.wrap_attributes_indent_size,10)||j,t=void 0===c.end_with_newline?!1:c.end_with_newline,u=Array.isArray(c.extra_liners)?c.extra_liners.concat():"string"==typeof c.extra_liners?c.extra_liners.split(","):"head,body,/html".split(","),c.indent_with_tabs&&(k="	",j=1),h=new g,h.printer(a,k,j,l,m);;){var v=h.get_token();if(h.token_text=v[0],h.token_type=v[1],"TK_EOF"==h.token_type)break;switch(h.token_type){case"TK_TAG_START":h.print_newline(!1,h.output),h.print_token(h.token_text),h.indent_content&&(h.indent(),h.indent_content=!1),h.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":h.print_newline(!1,h.output),h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==h.last_token&&""===h.last_text){var w=h.token_text.match(/\w+/)[0],x=null;h.output.length&&(x=h.output[h.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==x||x[1]!=w&&!h.Utils.in_array(x[1],n))&&h.print_newline(!1,h.output)}h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var y=h.token_text.match(/^\s*<([a-z-]+)/i);y&&h.Utils.in_array(y[1],n)||h.print_newline(!1,h.output),h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":h.print_token(h.token_text),h.indent_content&&(h.indent(),h.indent_content=!1),h.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":h.print_token(h.token_text),h.current_mode="TAG";break;case"TK_CONTENT":h.print_token(h.token_text),h.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==h.token_text){h.print_newline(!1,h.output);var z,A=h.token_text,B=1;"TK_SCRIPT"==h.token_type?z="function"==typeof f&&f:"TK_STYLE"==h.token_type&&(z="function"==typeof b&&b),"keep"==c.indent_scripts?B=0:"separate"==c.indent_scripts&&(B=-h.indent_level);var C=h.get_full_indent(B);if(z)A=z(A.replace(/^\s*/,C),c);else{var D=A.match(/^\s*/)[0],E=D.match(/[^\n\r]*$/)[0].split(h.indent_string).length-1,F=h.get_full_indent(B-E);A=A.replace(/^\s*/,C).replace(/\r\n|\r|\n/g,"\n"+F).replace(/\s+$/,"")}A&&(h.print_token_raw(A),h.print_newline(!0,h.output))}h.current_mode="TAG";break;default:""!==h.token_text&&h.print_token(h.token_text)}h.last_token=h.token_type,h.last_text=h.token_text}var G=h.output.join("").replace(/[\r\n\t ]+$/,"");return t&&(G+="\n"),G}function b(a,b){function c(){return v=a.charAt(++x),v||""}function d(b){var d="",e=x;return b&&g(),d=a.charAt(x+1)||"",x=e-1,c(),d}function e(b){for(var d=x;c();)if("\\"===v)c();else{if(-1!==b.indexOf(v))break;if("\n"===v)break}return a.substring(d,x+1)}function f(a){var b=x,d=e(a);return x=b-1,c(),d}function g(){for(var a="";w.test(d());)c(),a+=v;return a}function h(){var a="";for(v&&w.test(v)&&(a=v);w.test(c());)a+=v;return a}function i(b){var e=x;for(b="/"===d(),c();c();){if(!b&&"*"===v&&"/"===d()){c();break}if(b&&"\n"===v)return a.substring(e,x)}return a.substring(e,x)+v}function j(b){return a.substring(x-b.length,x).toLowerCase()===b}function k(){for(var b=0,c=x+1;c<a.length;c++){var d=a.charAt(c);if("{"===d)return!0;if("("===d)b+=1;else if(")"===d){if(0==b)return!1;b-=1}else if(";"===d||"}"===d)return!1}return!1}function l(){B++,z+=A}function m(){B--,z=z.slice(0,-p)}var n={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},o={"@media":!0,"@supports":!0,"@document":!0};b=b||{},a=a||"",a=a.replace(/\r\n|[\r\u2028\u2029]/g,"\n");var p=b.indent_size||4,q=b.indent_char||" ",r=void 0===b.selector_separator_newline?!0:b.selector_separator_newline,s=void 0===b.end_with_newline?!1:b.end_with_newline,t=void 0===b.newline_between_rules?!0:b.newline_between_rules,u=b.eol?b.eol:"\n";"string"==typeof p&&(p=parseInt(p,10)),b.indent_with_tabs&&(q="	",p=1),u=u.replace(/\\r/,"\r").replace(/\\n/,"\n");var v,w=/^\s+$/,x=-1,y=0,z=a.match(/^[\t ]*/)[0],A=new Array(p+1).join(q),B=0,C=0,D={};D["{"]=function(a){D.singleSpace(),E.push(a),D.newLine()},D["}"]=function(a){D.newLine(),E.push(a),D.newLine()},D._lastCharWhitespace=function(){return w.test(E[E.length-1])},D.newLine=function(a){E.length&&(a||"\n"===E[E.length-1]||D.trim(),E.push("\n"),z&&E.push(z))},D.singleSpace=function(){E.length&&!D._lastCharWhitespace()&&E.push(" ")},D.preserveSingleSpace=function(){L&&D.singleSpace()},D.trim=function(){for(;D._lastCharWhitespace();)E.pop()};for(var E=[],F=!1,G=!1,H=!1,I="",J="";;){var K=h(),L=""!==K,M=-1!==K.indexOf("\n");if(J=I,I=v,!v)break;if("/"===v&&"*"===d()){var N=0===B;(M||N)&&D.newLine(),E.push(i()),D.newLine(),N&&D.newLine(!0)}else if("/"===v&&"/"===d())M||"{"===J||D.trim(),D.singleSpace(),E.push(i()),D.newLine();else if("@"===v){D.preserveSingleSpace(),E.push(v);var O=f(": ,;{}()[]/='\"");O.match(/[ :]$/)&&(c(),O=e(": ").replace(/\s$/,""),E.push(O),D.singleSpace()),O=O.replace(/\s$/,""),O in n&&(C+=1,O in o&&(H=!0))}else"#"===v&&"{"===d()?(D.preserveSingleSpace(),E.push(e("}"))):"{"===v?"}"===d(!0)?(g(),c(),D.singleSpace(),E.push("{}"),D.newLine(),t&&0===B&&D.newLine(!0)):(l(),D["{"](v),H?(H=!1,F=B>C):F=B>=C):"}"===v?(m(),D["}"](v),F=!1,G=!1,C&&C--,t&&0===B&&D.newLine(!0)):":"===v?(g(),!F&&!H||j("&")||k()?":"===d()?(c(),E.push("::")):E.push(":"):(G=!0,E.push(":"),D.singleSpace())):'"'===v||"'"===v?(D.preserveSingleSpace(),E.push(e(v))):";"===v?(G=!1,E.push(v),D.newLine()):"("===v?j("url")?(E.push(v),g(),c()&&(")"!==v&&'"'!==v&&"'"!==v?E.push(e(")")):x--)):(y++,D.preserveSingleSpace(),E.push(v),g()):")"===v?(E.push(v),y--):","===v?(E.push(v),g(),r&&!G&&1>y?D.newLine():D.singleSpace()):"]"===v?E.push(v):"["===v?(D.preserveSingleSpace(),E.push(v)):"="===v?(g(),v="=",E.push(v)):(D.preserveSingleSpace(),E.push(v))}var P="";return z&&(P+=z),P+=E.join("").replace(/[\r\n\t ]+$/,""),s&&(P+="\n"),"\n"!=u&&(P=P.replace(/[\n]/g,u)),P}function c(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function d(a){return a.replace(/^\s+|\s+$/g,"")}function e(a){return a.replace(/^\s+/g,"")}function f(a,b){var c=new g(a,b);return c.beautify()}function g(a,b){function f(a,b){var c=0;a&&(c=a.indentation_level,!R.just_added_newline()&&a.line_indent_level>c&&(c=a.line_indent_level));var d={mode:b,parent:a,last_text:a?a.last_text:"",last_word:a?a.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:c,line_indent_level:a?a.line_indent_level:c,start_line_index:R.get_line_number(),ternary_depth:0};return d}function g(a){var b=a.newlines,c=ba.keep_array_indentation&&t(Y.mode);if(c)for(d=0;b>d;d+=1)n(d>0);else if(ba.max_preserve_newlines&&b>ba.max_preserve_newlines&&(b=ba.max_preserve_newlines),ba.preserve_newlines&&a.newlines>1){n();for(var d=1;b>d;d+=1)n(!0)}U=a,aa[U.type]()}function h(a){a=a.replace(/\x0d/g,"");for(var b=[],c=a.indexOf("\n");-1!==c;)b.push(a.substring(0,c)),a=a.substring(c+1),c=a.indexOf("\n");return a.length&&b.push(a),b}function m(a){if(a=void 0===a?!1:a,!R.just_added_newline())if(ba.preserve_newlines&&U.wanted_newline||a)n(!1,!0);else if(ba.wrap_line_length){var b=R.current_line.get_character_count()+U.text.length+(R.space_before_token?1:0);b>=ba.wrap_line_length&&n(!1,!0)}}function n(a,b){if(!b&&";"!==Y.last_text&&","!==Y.last_text&&"="!==Y.last_text&&"TK_OPERATOR"!==V)for(;Y.mode===l.Statement&&!Y.if_block&&!Y.do_block;)v();R.add_new_line(a)&&(Y.multiline_frame=!0)}function o(){R.just_added_newline()&&(ba.keep_array_indentation&&t(Y.mode)&&U.wanted_newline?(R.current_line.push(U.whitespace_before),R.space_before_token=!1):R.set_indent(Y.indentation_level)&&(Y.line_indent_level=Y.indentation_level))}function p(a){return R.raw?void R.add_raw_token(U):(ba.comma_first&&"TK_COMMA"===V&&R.just_added_newline()&&","===R.previous_line.last()&&(R.previous_line.pop(),o(),R.add_token(","),R.space_before_token=!0),a=a||U.text,o(),void R.add_token(a))}function q(){Y.indentation_level+=1}function r(){Y.indentation_level>0&&(!Y.parent||Y.indentation_level>Y.parent.indentation_level)&&(Y.indentation_level-=1)}function s(a){Y?($.push(Y),Z=Y):Z=f(null,a),Y=f(Z,a)}function t(a){return a===l.ArrayLiteral}function u(a){return c(a,[l.Expression,l.ForInitializer,l.Conditional])}function v(){$.length>0&&(Z=Y,Y=$.pop(),Z.mode===l.Statement&&R.remove_redundant_indentation(Z))}function w(){return Y.parent.mode===l.ObjectLiteral&&Y.mode===l.Statement&&(":"===Y.last_text&&0===Y.ternary_depth||"TK_RESERVED"===V&&c(Y.last_text,["get","set"]))}function x(){return"TK_RESERVED"===V&&c(Y.last_text,["var","let","const"])&&"TK_WORD"===U.type||"TK_RESERVED"===V&&"do"===Y.last_text||"TK_RESERVED"===V&&"return"===Y.last_text&&!U.wanted_newline||"TK_RESERVED"===V&&"else"===Y.last_text&&("TK_RESERVED"!==U.type||"if"!==U.text)||"TK_END_EXPR"===V&&(Z.mode===l.ForInitializer||Z.mode===l.Conditional)||"TK_WORD"===V&&Y.mode===l.BlockStatement&&!Y.in_case&&"--"!==U.text&&"++"!==U.text&&"function"!==W&&"TK_WORD"!==U.type&&"TK_RESERVED"!==U.type||Y.mode===l.ObjectLiteral&&(":"===Y.last_text&&0===Y.ternary_depth||"TK_RESERVED"===V&&c(Y.last_text,["get","set"]))?(s(l.Statement),q(),"TK_RESERVED"===V&&c(Y.last_text,["var","let","const"])&&"TK_WORD"===U.type&&(Y.declaration_statement=!0),w()||m("TK_RESERVED"===U.type&&c(U.text,["do","for","if","while"])),!0):!1}function y(a,b){for(var c=0;c<a.length;c++){var e=d(a[c]);if(e.charAt(0)!==b)return!1}return!0}function z(a,b){for(var c,d=0,e=a.length;e>d;d++)if(c=a[d],c&&0!==c.indexOf(b))return!1;return!0}function A(a){return c(a,["case","return","do","if","throw","else"])}function B(a){var b=S+(a||0);return 0>b||b>=ca.length?null:ca[b]}function C(){x();var a=l.Expression;if("["===U.text){if("TK_WORD"===V||")"===Y.last_text)return"TK_RESERVED"===V&&c(Y.last_text,T.line_starters)&&(R.space_before_token=!0),s(a),p(),q(),void(ba.space_in_paren&&(R.space_before_token=!0));a=l.ArrayLiteral,t(Y.mode)&&("["===Y.last_text||","===Y.last_text&&("]"===W||"}"===W))&&(ba.keep_array_indentation||n())}else"TK_RESERVED"===V&&"for"===Y.last_text?a=l.ForInitializer:"TK_RESERVED"===V&&c(Y.last_text,["if","while"])&&(a=l.Conditional);";"===Y.last_text||"TK_START_BLOCK"===V?n():"TK_END_EXPR"===V||"TK_START_EXPR"===V||"TK_END_BLOCK"===V||"."===Y.last_text?m(U.wanted_newline):"TK_RESERVED"===V&&"("===U.text||"TK_WORD"===V||"TK_OPERATOR"===V?"TK_RESERVED"===V&&("function"===Y.last_word||"typeof"===Y.last_word)||"*"===Y.last_text&&"function"===W?ba.space_after_anon_function&&(R.space_before_token=!0):"TK_RESERVED"!==V||!c(Y.last_text,T.line_starters)&&"catch"!==Y.last_text||ba.space_before_conditional&&(R.space_before_token=!0):R.space_before_token=!0,"("===U.text&&"TK_RESERVED"===V&&"await"===Y.last_word&&(R.space_before_token=!0),"("===U.text&&("TK_EQUALS"===V||"TK_OPERATOR"===V)&&(w()||m()),s(a),p(),ba.space_in_paren&&(R.space_before_token=!0),q()}function D(){for(;Y.mode===l.Statement;)v();Y.multiline_frame&&m("]"===U.text&&t(Y.mode)&&!ba.keep_array_indentation),ba.space_in_paren&&("TK_START_EXPR"!==V||ba.space_in_empty_paren?R.space_before_token=!0:(R.trim(),R.space_before_token=!1)),"]"===U.text&&ba.keep_array_indentation?(p(),v()):(v(),p()),R.remove_redundant_indentation(Z),Y.do_while&&Z.mode===l.Conditional&&(Z.mode=l.Expression,Y.do_block=!1,Y.do_while=!1)}function E(){var a=B(1),b=B(2);s(b&&(":"===b.text&&c(a.type,["TK_STRING","TK_WORD","TK_RESERVED"])||c(a.text,["get","set"])&&c(b.type,["TK_WORD","TK_RESERVED"]))?c(W,["class","interface"])?l.BlockStatement:l.ObjectLiteral:l.BlockStatement);var d=!a.comments_before.length&&"}"===a.text,e=d&&"function"===Y.last_word&&"TK_END_EXPR"===V;"expand"===ba.brace_style||"none"===ba.brace_style&&U.wanted_newline?"TK_OPERATOR"!==V&&(e||"TK_EQUALS"===V||"TK_RESERVED"===V&&A(Y.last_text)&&"else"!==Y.last_text)?R.space_before_token=!0:n(!1,!0):"TK_OPERATOR"!==V&&"TK_START_EXPR"!==V?"TK_START_BLOCK"===V?n():R.space_before_token=!0:t(Z.mode)&&","===Y.last_text&&("}"===W?R.space_before_token=!0:n()),p(),q()}function F(){for(;Y.mode===l.Statement;)v();var a="TK_START_BLOCK"===V;"expand"===ba.brace_style?a||n():a||(t(Y.mode)&&ba.keep_array_indentation?(ba.keep_array_indentation=!1,n(),ba.keep_array_indentation=!0):n()),v(),p()}function G(){if("TK_RESERVED"===U.type&&Y.mode!==l.ObjectLiteral&&c(U.text,["set","get"])&&(U.type="TK_WORD"),"TK_RESERVED"===U.type&&Y.mode===l.ObjectLiteral){var a=B(1);":"==a.text&&(U.type="TK_WORD")}if(x()||!U.wanted_newline||u(Y.mode)||"TK_OPERATOR"===V&&"--"!==Y.last_text&&"++"!==Y.last_text||"TK_EQUALS"===V||!ba.preserve_newlines&&"TK_RESERVED"===V&&c(Y.last_text,["var","let","const","set","get"])||n(),Y.do_block&&!Y.do_while){if("TK_RESERVED"===U.type&&"while"===U.text)return R.space_before_token=!0,p(),R.space_before_token=!0,void(Y.do_while=!0);n(),Y.do_block=!1}if(Y.if_block)if(Y.else_block||"TK_RESERVED"!==U.type||"else"!==U.text){for(;Y.mode===l.Statement;)v();Y.if_block=!1,Y.else_block=!1}else Y.else_block=!0;if("TK_RESERVED"===U.type&&("case"===U.text||"default"===U.text&&Y.in_case_statement))return n(),(Y.case_body||ba.jslint_happy)&&(r(),Y.case_body=!1),p(),Y.in_case=!0,void(Y.in_case_statement=!0);if("TK_RESERVED"===U.type&&"function"===U.text&&((c(Y.last_text,["}",";"])||R.just_added_newline()&&!c(Y.last_text,["[","{",":","=",","]))&&(R.just_added_blankline()||U.comments_before.length||(n(),n(!0))),"TK_RESERVED"===V||"TK_WORD"===V?"TK_RESERVED"===V&&c(Y.last_text,["get","set","new","return","export","async"])?R.space_before_token=!0:"TK_RESERVED"===V&&"default"===Y.last_text&&"export"===W?R.space_before_token=!0:n():"TK_OPERATOR"===V||"="===Y.last_text?R.space_before_token=!0:(Y.multiline_frame||!u(Y.mode)&&!t(Y.mode))&&n()),("TK_COMMA"===V||"TK_START_EXPR"===V||"TK_EQUALS"===V||"TK_OPERATOR"===V)&&(w()||m()),"TK_RESERVED"===U.type&&c(U.text,["function","get","set"]))return p(),void(Y.last_word=U.text);if(_="NONE","TK_END_BLOCK"===V?"TK_RESERVED"===U.type&&c(U.text,["else","catch","finally"])?"expand"===ba.brace_style||"end-expand"===ba.brace_style||"none"===ba.brace_style&&U.wanted_newline?_="NEWLINE":(_="SPACE",R.space_before_token=!0):_="NEWLINE":"TK_SEMICOLON"===V&&Y.mode===l.BlockStatement?_="NEWLINE":"TK_SEMICOLON"===V&&u(Y.mode)?_="SPACE":"TK_STRING"===V?_="NEWLINE":"TK_RESERVED"===V||"TK_WORD"===V||"*"===Y.last_text&&"function"===W?_="SPACE":"TK_START_BLOCK"===V?_="NEWLINE":"TK_END_EXPR"===V&&(R.space_before_token=!0,_="NEWLINE"),"TK_RESERVED"===U.type&&c(U.text,T.line_starters)&&")"!==Y.last_text&&(_="else"===Y.last_text||"export"===Y.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===U.type&&c(U.text,["else","catch","finally"]))if("TK_END_BLOCK"!==V||"expand"===ba.brace_style||"end-expand"===ba.brace_style||"none"===ba.brace_style&&U.wanted_newline)n();else{R.trim(!0);var b=R.current_line;"}"!==b.last()&&n(),R.space_before_token=!0}else"NEWLINE"===_?"TK_RESERVED"===V&&A(Y.last_text)?R.space_before_token=!0:"TK_END_EXPR"!==V?"TK_START_EXPR"===V&&"TK_RESERVED"===U.type&&c(U.text,["var","let","const"])||":"===Y.last_text||("TK_RESERVED"===U.type&&"if"===U.text&&"else"===Y.last_text?R.space_before_token=!0:n()):"TK_RESERVED"===U.type&&c(U.text,T.line_starters)&&")"!==Y.last_text&&n():Y.multiline_frame&&t(Y.mode)&&","===Y.last_text&&"}"===W?n():"SPACE"===_&&(R.space_before_token=!0);p(),Y.last_word=U.text,"TK_RESERVED"===U.type&&"do"===U.text&&(Y.do_block=!0),"TK_RESERVED"===U.type&&"if"===U.text&&(Y.if_block=!0)}function H(){for(x()&&(R.space_before_token=!1);Y.mode===l.Statement&&!Y.if_block&&!Y.do_block;)v();p()}function I(){x()?R.space_before_token=!0:"TK_RESERVED"===V||"TK_WORD"===V?R.space_before_token=!0:"TK_COMMA"===V||"TK_START_EXPR"===V||"TK_EQUALS"===V||"TK_OPERATOR"===V?w()||m():n(),p()}function J(){x(),Y.declaration_statement&&(Y.declaration_assignment=!0),R.space_before_token=!0,p(),R.space_before_token=!0}function K(){return Y.declaration_statement?(u(Y.parent.mode)&&(Y.declaration_assignment=!1),p(),void(Y.declaration_assignment?(Y.declaration_assignment=!1,n(!1,!0)):(R.space_before_token=!0,ba.comma_first&&m()))):(p(),void(Y.mode===l.ObjectLiteral||Y.mode===l.Statement&&Y.parent.mode===l.ObjectLiteral?(Y.mode===l.Statement&&v(),n()):(R.space_before_token=!0,ba.comma_first&&m())))}function L(){if(x(),"TK_RESERVED"===V&&A(Y.last_text))return R.space_before_token=!0,void p();if("*"===U.text&&"TK_DOT"===V)return void p();if(":"===U.text&&Y.in_case)return Y.case_body=!0,
q(),p(),n(),void(Y.in_case=!1);if("::"===U.text)return void p();"TK_OPERATOR"===V&&m();var a=!0,b=!0;c(U.text,["--","++","!","~"])||c(U.text,["-","+"])&&(c(V,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||c(Y.last_text,T.line_starters)||","===Y.last_text)?(a=!1,b=!1,!U.wanted_newline||"--"!==U.text&&"++"!==U.text||n(!1,!0),";"===Y.last_text&&u(Y.mode)&&(a=!0),"TK_RESERVED"===V?a=!0:"TK_END_EXPR"===V?a=!("]"===Y.last_text&&("--"===U.text||"++"===U.text)):"TK_OPERATOR"===V&&(a=c(U.text,["--","-","++","+"])&&c(Y.last_text,["--","-","++","+"]),c(U.text,["+","-"])&&c(Y.last_text,["--","++"])&&(b=!0)),Y.mode!==l.BlockStatement&&Y.mode!==l.Statement||"{"!==Y.last_text&&";"!==Y.last_text||n()):":"===U.text?0===Y.ternary_depth?a=!1:Y.ternary_depth-=1:"?"===U.text?Y.ternary_depth+=1:"*"===U.text&&"TK_RESERVED"===V&&"function"===Y.last_text&&(a=!1,b=!1),R.space_before_token=R.space_before_token||a,p(),R.space_before_token=b}function M(){if(R.raw)return R.add_raw_token(U),void(U.directives&&"end"===U.directives.preserve&&(ba.test_output_raw||(R.raw=!1)));if(U.directives)return n(!1,!0),p(),"start"===U.directives.preserve&&(R.raw=!0),void n(!1,!0);if(!k.newline.test(U.text)&&!U.wanted_newline)return R.space_before_token=!0,p(),void(R.space_before_token=!0);var a,b=h(U.text),c=!1,d=!1,f=U.whitespace_before,g=f.length;for(n(!1,!0),b.length>1&&(y(b.slice(1),"*")?c=!0:z(b.slice(1),f)&&(d=!0)),p(b[0]),a=1;a<b.length;a++)n(!1,!0),c?p(" "+e(b[a])):d&&b[a].length>g?p(b[a].substring(g)):R.add_token(b[a]);n(!1,!0)}function N(){U.wanted_newline?n(!1,!0):R.trim(!0),R.space_before_token=!0,p(),n(!1,!0)}function O(){x(),"TK_RESERVED"===V&&A(Y.last_text)?R.space_before_token=!0:m(")"===Y.last_text&&ba.break_chained_methods),p()}function P(){p(),"\n"===U.text[U.text.length-1]&&n()}function Q(){for(;Y.mode===l.Statement;)v()}var R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca=[],da="";for(aa={TK_START_EXPR:C,TK_END_EXPR:D,TK_START_BLOCK:E,TK_END_BLOCK:F,TK_WORD:G,TK_RESERVED:G,TK_SEMICOLON:H,TK_STRING:I,TK_EQUALS:J,TK_OPERATOR:L,TK_COMMA:K,TK_BLOCK_COMMENT:M,TK_COMMENT:N,TK_DOT:O,TK_UNKNOWN:P,TK_EOF:Q},b=b?b:{},ba={},void 0!==b.braces_on_own_line&&(ba.brace_style=b.braces_on_own_line?"expand":"collapse"),ba.brace_style=b.brace_style?b.brace_style:ba.brace_style?ba.brace_style:"collapse","expand-strict"===ba.brace_style&&(ba.brace_style="expand"),ba.indent_size=b.indent_size?parseInt(b.indent_size,10):4,ba.indent_char=b.indent_char?b.indent_char:" ",ba.eol=b.eol?b.eol:"\n",ba.preserve_newlines=void 0===b.preserve_newlines?!0:b.preserve_newlines,ba.break_chained_methods=void 0===b.break_chained_methods?!1:b.break_chained_methods,ba.max_preserve_newlines=void 0===b.max_preserve_newlines?0:parseInt(b.max_preserve_newlines,10),ba.space_in_paren=void 0===b.space_in_paren?!1:b.space_in_paren,ba.space_in_empty_paren=void 0===b.space_in_empty_paren?!1:b.space_in_empty_paren,ba.jslint_happy=void 0===b.jslint_happy?!1:b.jslint_happy,ba.space_after_anon_function=void 0===b.space_after_anon_function?!1:b.space_after_anon_function,ba.keep_array_indentation=void 0===b.keep_array_indentation?!1:b.keep_array_indentation,ba.space_before_conditional=void 0===b.space_before_conditional?!0:b.space_before_conditional,ba.unescape_strings=void 0===b.unescape_strings?!1:b.unescape_strings,ba.wrap_line_length=void 0===b.wrap_line_length?0:parseInt(b.wrap_line_length,10),ba.e4x=void 0===b.e4x?!1:b.e4x,ba.end_with_newline=void 0===b.end_with_newline?!1:b.end_with_newline,ba.comma_first=void 0===b.comma_first?!1:b.comma_first,ba.test_output_raw=void 0===b.test_output_raw?!1:b.test_output_raw,ba.jslint_happy&&(ba.space_after_anon_function=!0),b.indent_with_tabs&&(ba.indent_char="	",ba.indent_size=1),ba.eol=ba.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),X="";ba.indent_size>0;)X+=ba.indent_char,ba.indent_size-=1;var ea=0;if(a&&a.length){for(;" "===a.charAt(ea)||"	"===a.charAt(ea);)da+=a.charAt(ea),ea+=1;a=a.substring(ea)}V="TK_START_BLOCK",W="",R=new i(X,da),R.raw=ba.test_output_raw,$=[],s(l.BlockStatement),this.beautify=function(){var b,c;for(T=new j(a,ba,X),ca=T.tokenize(),S=0;b=B();){for(var d=0;d<b.comments_before.length;d++)g(b.comments_before[d]);g(b),W=Y.last_text,V=b.type,Y.last_text=b.text,S+=1}return c=R.get_code(),ba.end_with_newline&&(c+="\n"),"\n"!=ba.eol&&(c=c.replace(/[\n]/g,ba.eol)),c}}function h(a){var b=0,c=-1,d=[],e=!0;this.set_indent=function(d){b=a.baseIndentLength+d*a.indent_length,c=d},this.get_character_count=function(){return b},this.is_empty=function(){return e},this.last=function(){return this._empty?null:d[d.length-1]},this.push=function(a){d.push(a),b+=a.length,e=!1},this.pop=function(){var a=null;return e||(a=d.pop(),b-=a.length,e=0===d.length),a},this.remove_indent=function(){c>0&&(c-=1,b-=a.indent_length)},this.trim=function(){for(;" "===this.last();){d.pop();b-=1}e=0===d.length},this.toString=function(){var b="";return this._empty||(c>=0&&(b=a.indent_cache[c]),b+=d.join("")),b}}function i(a,b){b=b||"",this.indent_cache=[b],this.baseIndentLength=b.length,this.indent_length=a.length,this.raw=!1;var c=[];this.baseIndentString=b,this.indent_string=a,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new h(this),c.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return c.length},this.add_new_line=function(a){return 1===this.get_line_number()&&this.just_added_newline()?!1:a||!this.just_added_newline()?(this.raw||this.add_outputline(),!0):!1},this.get_code=function(){var a=c.join("\n").replace(/[\r\n\t ]+$/,"");return a},this.set_indent=function(a){if(c.length>1){for(;a>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(a),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(a){for(var b=0;b<a.newlines;b++)this.add_outputline();this.current_line.push(a.whitespace_before),this.current_line.push(a.text),this.space_before_token=!1},this.add_token=function(a){this.add_space_before_token(),this.current_line.push(a)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(a){if(!a.multiline_frame&&a.mode!==l.ForInitializer&&a.mode!==l.Conditional)for(var b=a.start_line_index,d=c.length;d>b;)c[b].remove_indent(),b++},this.trim=function(d){for(d=void 0===d?!1:d,this.current_line.trim(a,b);d&&c.length>1&&this.current_line.is_empty();)c.pop(),this.current_line=c[c.length-1],this.current_line.trim();this.previous_line=c.length>1?c[c.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===c.length)return!0;var a=c[c.length-2];return a.is_empty()}return!1}}function j(a,b,e){function f(a){if(!a.match(y))return null;var b={};z.lastIndex=0;for(var c=z.exec(a);c;)b[c[1]]=c[2],c=z.exec(a);return b}function g(){var e,g=[];if(p=0,q="",t>=u)return["","TK_EOF"];var y;y=s.length?s[s.length-1]:new m("TK_START_BLOCK","{");var z=a.charAt(t);for(t+=1;c(z,i);){if(k.newline.test(z)?("\n"!==z||"\r"!==a.charAt(t-2))&&(p+=1,g=[]):g.push(z),t>=u)return["","TK_EOF"];z=a.charAt(t),t+=1}if(g.length&&(q=g.join("")),j.test(z)){var C=!0,D=!0,E=j;for("0"===z&&u>t&&/[Xxo]/.test(a.charAt(t))?(C=!1,D=!1,z+=a.charAt(t),t+=1,E=/[o]/.test(a.charAt(t))?l:n):(z="",t-=1);u>t&&E.test(a.charAt(t));)z+=a.charAt(t),t+=1,C&&u>t&&"."===a.charAt(t)&&(z+=a.charAt(t),t+=1,C=!1),D&&u>t&&/[Ee]/.test(a.charAt(t))&&(z+=a.charAt(t),t+=1,u>t&&/[+-]/.test(a.charAt(t))&&(z+=a.charAt(t),t+=1),D=!1,C=!1);return[z,"TK_WORD"]}if(k.isIdentifierStart(a.charCodeAt(t-1))){if(u>t)for(;k.isIdentifierChar(a.charCodeAt(t))&&(z+=a.charAt(t),t+=1,t!==u););return"TK_DOT"===y.type||"TK_RESERVED"===y.type&&c(y.text,["set","get"])||!c(z,v)?[z,"TK_WORD"]:"in"===z?[z,"TK_OPERATOR"]:[z,"TK_RESERVED"]}if("("===z||"["===z)return[z,"TK_START_EXPR"];if(")"===z||"]"===z)return[z,"TK_END_EXPR"];if("{"===z)return[z,"TK_START_BLOCK"];if("}"===z)return[z,"TK_END_BLOCK"];if(";"===z)return[z,"TK_SEMICOLON"];if("/"===z){var F="";if("*"===a.charAt(t)){t+=1,w.lastIndex=t;var G=w.exec(a);F="/*"+G[0],t+=G[0].length;var H=f(F);return H&&"start"===H.ignore&&(A.lastIndex=t,G=A.exec(a),F+=G[0],t+=G[0].length),F=F.replace(k.lineBreak,"\n"),[F,"TK_BLOCK_COMMENT",H]}if("/"===a.charAt(t)){t+=1,x.lastIndex=t;var G=x.exec(a);return F="//"+G[0],t+=G[0].length,[F,"TK_COMMENT"]}}if("`"===z||"'"===z||'"'===z||("/"===z||b.e4x&&"<"===z&&a.slice(t-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===y.type&&c(y.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===y.type&&")"===y.text&&y.parent&&"TK_RESERVED"===y.parent.type&&c(y.parent.text,["if","while","for"])||c(y.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var I=z,J=!1,K=!1;if(e=z,"/"===I)for(var L=!1;u>t&&(J||L||a.charAt(t)!==I)&&!k.newline.test(a.charAt(t));)e+=a.charAt(t),J?J=!1:(J="\\"===a.charAt(t),"["===a.charAt(t)?L=!0:"]"===a.charAt(t)&&(L=!1)),t+=1;else if(b.e4x&&"<"===I){var M=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,N=a.slice(t-1),O=M.exec(N);if(O&&0===O.index){for(var P=O[2],Q=0;O;){var R=!!O[1],S=O[2],T=!!O[O.length-1]||"![CDATA["===S.slice(0,8);if(S!==P||T||(R?--Q:++Q),0>=Q)break;O=M.exec(N)}var U=O?O.index+O[0].length:N.length;return N=N.slice(0,U),t+=U-1,N=N.replace(k.lineBreak,"\n"),[N,"TK_STRING"]}}else for(;u>t&&(J||a.charAt(t)!==I&&("`"===I||!k.newline.test(a.charAt(t))));)(J||"`"===I)&&k.newline.test(a.charAt(t))?("\r"===a.charAt(t)&&"\n"===a.charAt(t+1)&&(t+=1),e+="\n"):e+=a.charAt(t),J?(("x"===a.charAt(t)||"u"===a.charAt(t))&&(K=!0),J=!1):J="\\"===a.charAt(t),t+=1;if(K&&b.unescape_strings&&(e=h(e)),u>t&&a.charAt(t)===I&&(e+=I,t+=1,"/"===I))for(;u>t&&k.isIdentifierStart(a.charCodeAt(t));)e+=a.charAt(t),t+=1;return[e,"TK_STRING"]}if("#"===z){if(0===s.length&&"!"===a.charAt(t)){for(e=z;u>t&&"\n"!==z;)z=a.charAt(t),e+=z,t+=1;return[d(e)+"\n","TK_UNKNOWN"]}var V="#";if(u>t&&j.test(a.charAt(t))){do z=a.charAt(t),V+=z,t+=1;while(u>t&&"#"!==z&&"="!==z);return"#"===z||("["===a.charAt(t)&&"]"===a.charAt(t+1)?(V+="[]",t+=2):"{"===a.charAt(t)&&"}"===a.charAt(t+1)&&(V+="{}",t+=2)),[V,"TK_WORD"]}}if("<"===z&&("?"===a.charAt(t)||"%"===a.charAt(t))){B.lastIndex=t-1;var W=B.exec(a);if(W)return z=W[0],t+=z.length-1,z=z.replace(k.lineBreak,"\n"),[z,"TK_STRING"]}if("<"===z&&"<!--"===a.substring(t-1,t+3)){for(t+=3,z="<!--";!k.newline.test(a.charAt(t))&&u>t;)z+=a.charAt(t),t++;return r=!0,[z,"TK_COMMENT"]}if("-"===z&&r&&"-->"===a.substring(t-1,t+2))return r=!1,t+=2,["-->","TK_COMMENT"];if("."===z)return[z,"TK_DOT"];if(c(z,o)){for(;u>t&&c(z+a.charAt(t),o)&&(z+=a.charAt(t),t+=1,!(t>=u)););return","===z?[z,"TK_COMMA"]:"="===z?[z,"TK_EQUALS"]:[z,"TK_OPERATOR"]}return[z,"TK_UNKNOWN"]}function h(a){for(var b,c=!1,d="",e=0,f="",g=0;c||e<a.length;)if(b=a.charAt(e),e++,c){if(c=!1,"x"===b)f=a.substr(e,2),e+=2;else{if("u"!==b){d+="\\"+b;continue}f=a.substr(e,4),e+=4}if(!f.match(/^[0123456789abcdefABCDEF]+$/))return a;if(g=parseInt(f,16),g>=0&&32>g){d+="x"===b?"\\x"+f:"\\u"+f;continue}if(34===g||39===g||92===g)d+="\\"+String.fromCharCode(g);else{if("x"===b&&g>126&&255>=g)return a;d+=String.fromCharCode(g)}}else"\\"===b?c=!0:d+=b;return d}var i="\n\r	 ".split(""),j=/[0-9]/,l=/[01234567]/,n=/[0123456789abcdefABCDEF]/,o="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var p,q,r,s,t,u,v=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),w=/([\s\S]*?)((?:\*\/)|$)/g,x=/([^\n\r\u2028\u2029]*)/g,y=/\/\* beautify( \w+[:]\w+)+ \*\//g,z=/ (\w+)[:](\w+)/g,A=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,B=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){u=a.length,t=0,r=!1,s=[];for(var b,c,d,e=null,f=[],h=[];!c||"TK_EOF"!==c.type;){for(d=g(),b=new m(d[1],d[0],p,q);"TK_COMMENT"===b.type||"TK_BLOCK_COMMENT"===b.type||"TK_UNKNOWN"===b.type;)"TK_BLOCK_COMMENT"===b.type&&(b.directives=d[2]),h.push(b),d=g(),b=new m(d[1],d[0],p,q);h.length&&(b.comments_before=h,h=[]),"TK_START_BLOCK"===b.type||"TK_START_EXPR"===b.type?(b.parent=c,f.push(e),e=b):("TK_END_BLOCK"===b.type||"TK_END_EXPR"===b.type)&&e&&("]"===b.text&&"["===e.text||")"===b.text&&"("===e.text||"}"===b.text&&"{"===e.text)&&(b.parent=e.parent,e=f.pop()),s.push(b),c=b}return s}}var k={};!function(a){var b="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",c="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",d=new RegExp("["+b+"]"),e=new RegExp("["+b+c+"]");a.newline=/[\n\r\u2028\u2029]/,a.lineBreak=new RegExp("\r\n|"+a.newline.source),a.allLineBreaks=new RegExp(a.lineBreak.source,"g"),a.isIdentifierStart=function(a){return 65>a?36===a||64===a:91>a?!0:97>a?95===a:123>a?!0:a>=170&&d.test(String.fromCharCode(a))},a.isIdentifierChar=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:a>=170&&e.test(String.fromCharCode(a))}}(k);var l={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},m=function(a,b,c,d,e,f){this.type=a,this.text=b,this.comments_before=[],this.newlines=c||0,this.wanted_newline=c>0,this.whitespace_before=d||"",this.parent=null,this.directives=null};return{run:a}},a.extend(a.FE.DEFAULTS,{codeMirror:window.CodeMirror,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"	",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),a.FE.PLUGINS.codeView=function(b){function c(){return b.$box.hasClass("fr-code-view")}function d(){return m?m.getValue():l.val()}function e(){c()&&(m.setSize(null,b.opts.height?b.opts.height:"auto"),b.opts.heightMin||b.opts.height?b.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",b.opts.heightMin||b.opts.height):b.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",""))}function f(a){var c=d();b.html.set(c),b.$el.blur(),b.$tb.find(" > .fr-command").not(a).removeClass("fr-disabled").attr("aria-disabled",!1),a.removeClass("fr-active").attr("aria-pressed",!1),b.selection.setAtStart(b.el),b.selection.restore(),b.placeholder.refresh(),b.undo.saveStep()}function g(c){l||(j(),!m&&b.opts.codeMirror?m=b.opts.codeMirror.fromTextArea(l.get(0),b.opts.codeMirrorOptions):b.events.$on(l,"keydown keyup change input",function(){b.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height=this.scrollHeight+"px")})),b.undo.saveStep(),b.html.cleanEmptyTags(),b.html.cleanWhiteTags(!0),b.core.hasFocus()&&(b.core.isEmpty()||(b.selection.save(),b.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),b.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var d=b.html.get(!1,!0);b.$el.find("span.fr-tmp").remove(),b.$box.toggleClass("fr-code-view",!0),b.core.hasFocus()&&b.$el.blur(),d=d.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM"),d=d.replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),b.codeBeautifier&&(d=b.codeBeautifier.run(d,b.opts.codeBeautifierOptions));var e,f;if(m){e=d.indexOf("FROALA-SM"),f=d.indexOf("FROALA-EM"),e>f?e=f:f-=9,d=d.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"");var g=d.substring(0,e).length-d.substring(0,e).replace(/\n/g,"").length,h=d.substring(0,f).length-d.substring(0,f).replace(/\n/g,"").length;e=d.substring(0,e).length-d.substring(0,d.substring(0,e).lastIndexOf("\n")+1).length,f=d.substring(0,f).length-d.substring(0,d.substring(0,f).lastIndexOf("\n")+1).length,m.setSize(null,b.opts.height?b.opts.height:"auto"),b.opts.heightMin&&b.$box.find(".CodeMirror-scroll").css("min-height",b.opts.heightMin),m.setValue(d),m.focus(),m.setSelection({line:g,ch:e},{line:h,ch:f}),m.refresh(),m.clearHistory()}else{e=d.indexOf("FROALA-SM"),f=d.indexOf("FROALA-EM")-9,b.opts.heightMin&&l.css("min-height",b.opts.heightMin),b.opts.height&&l.css("height",b.opts.height),b.opts.heightMax&&l.css("max-height",b.opts.height||b.opts.heightMax),l.val(d.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var i=a(b.o_doc).scrollTop();l.focus(),l.get(0).setSelectionRange(e,f),a(b.o_doc).scrollTop(i)}b.$tb.find(" > .fr-command").not(c).filter(function(){return b.opts.codeViewKeepActiveButtons.indexOf(a(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),c.addClass("fr-active").attr("aria-pressed",!0),!b.helpers.isMobile()&&b.opts.toolbarInline&&b.toolbar.hide()}function h(a){"undefined"==typeof a&&(a=!c());var d=b.$tb.find('.fr-command[data-cmd="html"]');a?(b.popups.hideAll(),g(d)):(b.$box.toggleClass("fr-code-view",!1),f(d))}function i(){c()&&h(!1),m&&m.toTextArea(),l.val("").removeData().remove(),l=null,n&&(n.remove(),n=null)}function j(){l=a('<textarea class="fr-code" tabIndex="-1">'),b.$wp.append(l),l.attr("dir",b.opts.direction),b.$box.hasClass("fr-basic")||(n=a('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(b.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),b.$box.append(n),b.events.bindClick(b.$box,"a.html-switch",function(){h(!1)}));var f=function(){return!c()};b.events.on("buttons.refresh",f),b.events.on("copy",f,!0),b.events.on("cut",f,!0),b.events.on("paste",f,!0),b.events.on("destroy",i,!0),b.events.on("html.set",function(){c()&&h(!0)}),b.events.on("codeView.update",e),b.events.on("form.submit",function(){c()&&(b.html.set(d()),b.events.trigger("contentChanged",[],!0))},!0)}function k(){return b.$wp?void 0:!1}var l,m,n;return{_init:k,toggle:h,isActive:c,get:d}},a.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),a.FE.DefineIcon("html",{NAME:"code"}),a.extend(a.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),a.extend(a.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),a.FE.PLUGINS.colors=function(b){function c(){var a=b.$tb.find('.fr-command[data-cmd="color"]'),c=b.popups.get("colors.picker");if(c||(c=e()),!c.hasClass("fr-active"))if(b.popups.setContainer("colors.picker",b.$tb),i(c.find(".fr-selected-tab").attr("data-param1")),a.is(":visible")){var d=a.offset().left+a.outerWidth()/2,f=a.offset().top+(b.opts.toolbarBottom?10:a.outerHeight()-10);b.popups.show("colors.picker",d,f,a.outerHeight())}else b.position.forSelection(c),b.popups.show("colors.picker")}function d(){b.popups.hide("colors.picker")}function e(){var a='<div class="fr-buttons fr-colors-buttons">';b.opts.toolbarInline&&b.opts.colorsButtons.length>0&&(a+=b.button.buildList(b.opts.colorsButtons)),a+=f()+"</div>";var c="";b.opts.colorsHEXInput&&(c='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer-'+b.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-color-hex-layer-text-'+b.id+'" type="text" placeholder="'+b.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="customColor" tabIndex="2" role="button">'+b.language.translate("OK")+"</button></div></div>");var d={buttons:a,text_colors:g("text"),background_colors:g("background"),custom_color:c},e=b.popups.create("colors.picker",d);return h(e),e}function f(){var a='<div class="fr-colors-tabs fr-group">';return a+='<span class="fr-colors-tab '+("background"==b.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==b.opts.colorsDefaultTab?!1:!0)+'" data-param1="text" data-cmd="colorChangeSet" title="'+b.language.translate("Text")+'">'+b.language.translate("Text")+"</span>",a+='<span class="fr-colors-tab '+("background"==b.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==b.opts.colorsDefaultTab?!0:!1)+'" data-param1="background" data-cmd="colorChangeSet" title="'+b.language.translate("Background")+'">'+b.language.translate("Background")+"</span>",a+"</div>"}function g(a){for(var c="text"==a?b.opts.colorsText:b.opts.colorsBackground,d='<div class="fr-color-set fr-'+a+"-color"+(b.opts.colorsDefaultTab==a||"text"!=b.opts.colorsDefaultTab&&"background"!=b.opts.colorsDefaultTab&&"text"==a?" fr-selected-set":"")+'">',e=0;e<c.length;e++)0!==e&&e%b.opts.colorsStep===0&&(d+="<br>"),d+="REMOVE"!=c[e]?'<span class="fr-command fr-select-color" style="background: '+c[e]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+a+'Color" data-param1="'+c[e]+'"><span class="fr-sr-only">'+b.language.translate("Color")+" "+c[e]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command fr-select-color" data-cmd="'+a+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+b.language.translate("Clear Formatting")+'">'+b.icon.create("remove")+'<span class="fr-sr-only">'+b.language.translate("Clear Formatting")+"</span></span>";return d+"</div>"}function h(c){b.events.on("popup.tab",function(d){var e=a(d.currentTarget);if(!b.popups.isVisible("colors.picker")||!e.is("span"))return!0;var f=d.which,g=!0;if(a.FE.KEYCODE.TAB==f){var h=c.find(".fr-buttons");g=!b.accessibility.focusToolbar(h,d.shiftKey?!0:!1)}else if(a.FE.KEYCODE.ARROW_UP==f||a.FE.KEYCODE.ARROW_DOWN==f||a.FE.KEYCODE.ARROW_LEFT==f||a.FE.KEYCODE.ARROW_RIGHT==f){if(e.is("span.fr-select-color")){var i=e.parent().find("span.fr-select-color"),j=i.index(e),k=b.opts.colorsStep,l=Math.floor(i.length/k),m=j%k,n=Math.floor(j/k),o=n*k+m,p=l*k;a.FE.KEYCODE.ARROW_UP==f?o=((o-k)%p+p)%p:a.FE.KEYCODE.ARROW_DOWN==f?o=(o+k)%p:a.FE.KEYCODE.ARROW_LEFT==f?o=((o-1)%p+p)%p:a.FE.KEYCODE.ARROW_RIGHT==f&&(o=(o+1)%p);var q=a(i.get(o));b.events.disableBlur(),q.focus(),g=!1}}else a.FE.KEYCODE.ENTER==f&&(b.button.exec(e),g=!1);return g===!1&&(d.preventDefault(),d.stopPropagation()),g},!0)}function i(c){var d,e=b.popups.get("colors.picker"),f=a(b.selection.element());d="background"==c?"background-color":"color";var g=e.find(".fr-"+c+"-color .fr-select-color");for(g.find(".fr-selected-color").remove(),g.removeClass("fr-active-item"),g.not('[data-param1="REMOVE"]').attr("aria-selected",!1);f.get(0)!=b.el;){if("transparent"!=f.css(d)&&"rgba(0, 0, 0, 0)"!=f.css(d)){var h=e.find(".fr-"+c+'-color .fr-select-color[data-param1="'+b.helpers.RGBToHex(f.css(d))+'"]');h.append('<span class="fr-selected-color" aria-hidden="true">\uf00c</span>'),h.addClass("fr-active-item").attr("aria-selected",!0);break}f=f.parent()}var i=e.find(".fr-color-hex-layer input");i.length&&i.val(b.helpers.RGBToHex(f.css(d))).trigger("change")}function j(a,c){a.hasClass("fr-selected-tab")||(a.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),a.addClass("fr-selected-tab").attr("aria-pressed",!0),a.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),a.parents(".fr-popup").find(".fr-color-set.fr-"+c+"-color").addClass("fr-selected-set"),i(c)),b.accessibility.focusPopup(a.parents(".fr-popup"))}function k(a){"REMOVE"!=a?b.format.applyStyle("background-color",b.helpers.HEXtoRGB(a)):b.format.removeStyle("background-color"),d()}function l(a){"REMOVE"!=a?b.format.applyStyle("color",b.helpers.HEXtoRGB(a)):b.format.removeStyle("color"),d()}function m(){b.popups.hide("colors.picker"),b.toolbar.showInline()}function n(){var a=b.popups.get("colors.picker"),c=a.find(".fr-color-hex-layer input");if(c.length){var d=c.val(),e=a.find(".fr-selected-tab").attr("data-param1");"background"==e?k(d):l(d)}}return{showColorsPopup:c,hideColorsPopup:d,changeSet:j,background:k,customColor:n,text:l,back:m}},a.FE.DefineIcon("colors",{NAME:"tint"}),a.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),a.FE.RegisterCommand("textColor",{undo:!0,callback:function(a,b){this.colors.text(b)}}),a.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(a,b){this.colors.background(b)}}),a.FE.RegisterCommand("colorChangeSet",{
undo:!1,focus:!1,callback:function(a,b){var c=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+a+'"][data-param1="'+b+'"]');this.colors.changeSet(c,b)}}),a.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),a.FE.RegisterCommand("customColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor()}}),a.FE.DefineIcon("remove",{NAME:"eraser"}),a.extend(a.FE.DEFAULTS,{dragInline:!0}),a.FE.PLUGINS.draggable=function(b){function c(c){return c.originalEvent&&c.originalEvent.target&&c.originalEvent.target.nodeType==Node.TEXT_NODE?!0:(c.target&&"A"==c.target.tagName&&1==c.target.childNodes.length&&"IMG"==c.target.childNodes[0].tagName&&(c.target=c.target.childNodes[0]),a(c.target).hasClass("fr-draggable")?(b.undo.canDo()||b.undo.saveStep(),b.opts.dragInline?b.$el.attr("contenteditable",!0):b.$el.attr("contenteditable",!1),b.opts.toolbarInline&&b.toolbar.hide(),a(c.target).addClass("fr-dragging"),b.browser.msie||b.browser.edge||b.selection.clear(),void c.originalEvent.dataTransfer.setData("text","Froala")):(c.preventDefault(),!1))}function d(a){return!(a&&("HTML"==a.tagName||"BODY"==a.tagName||b.node.isElement(a)))}function e(a,c,d){b.opts.iframe&&(a+=b.$iframe.offset().top,c+=b.$iframe.offset().left),n.offset().top!=a&&n.css("top",a),n.offset().left!=c&&n.css("left",c),n.width()!=d&&n.css("width",d)}function f(c){var f=b.doc.elementFromPoint(c.originalEvent.pageX-b.win.pageXOffset,c.originalEvent.pageY-b.win.pageYOffset);if(!d(f)){for(var g=0,h=f;!d(h)&&h==f&&c.originalEvent.pageY-b.win.pageYOffset-g>0;)g++,h=b.doc.elementFromPoint(c.originalEvent.pageX-b.win.pageXOffset,c.originalEvent.pageY-b.win.pageYOffset-g);(!d(h)||n&&0===b.$el.find(h).length&&h!=n.get(0))&&(h=null);for(var i=0,j=f;!d(j)&&j==f&&c.originalEvent.pageY-b.win.pageYOffset+i<a(b.doc).height();)i++,j=b.doc.elementFromPoint(c.originalEvent.pageX-b.win.pageXOffset,c.originalEvent.pageY-b.win.pageYOffset+i);(!d(j)||n&&0===b.$el.find(j).length&&j!=n.get(0))&&(j=null),f=null==j&&h?h:j&&null==h?j:j&&h?i>g?h:j:null}if(a(f).hasClass("fr-drag-helper"))return!1;if(f&&!b.node.isBlock(f)&&(f=b.node.blockParent(f)),f&&["TD","TH","TR","THEAD","TBODY"].indexOf(f.tagName)>=0&&(f=a(f).parents("table").get(0)),f&&["LI"].indexOf(f.tagName)>=0&&(f=a(f).parents("UL, OL").get(0)),f&&!a(f).hasClass("fr-drag-helper")){n||(a.FE.$draggable_helper||(a.FE.$draggable_helper=a('<div class="fr-drag-helper"></div>')),n=a.FE.$draggable_helper,b.events.on("shared.destroy",function(){n.html("").removeData().remove(),n=null},!0));var k,l=c.originalEvent.pageY;k=l<a(f).offset().top+a(f).outerHeight()/2?!0:!1;var m=a(f),o=0;k||0!==m.next().length?(k||(m=m.next()),"before"==n.data("fr-position")&&m.is(n.data("fr-tag"))||(m.prev().length>0&&(o=parseFloat(m.prev().css("margin-bottom"))||0),o=Math.max(o,parseFloat(m.css("margin-top"))||0),e(m.offset().top-o/2-b.$box.offset().top,m.offset().left-b.win.pageXOffset-b.$box.offset().left,m.width()),n.data("fr-position","before"))):"after"==n.data("fr-position")&&m.is(n.data("fr-tag"))||(o=parseFloat(m.css("margin-bottom"))||0,e(m.offset().top+a(f).height()+o/2-b.$box.offset().top,m.offset().left-b.win.pageXOffset-b.$box.offset().left,m.width()),n.data("fr-position","after")),n.data("fr-tag",m),n.addClass("fr-visible"),n.appendTo(b.$box)}else n&&b.$box.find(n).length>0&&n.removeClass("fr-visible")}function g(a){a.originalEvent.dataTransfer.dropEffect="move",b.opts.dragInline?j()||!b.browser.msie&&!b.browser.edge||a.preventDefault():(a.preventDefault(),f(a))}function h(a){a.originalEvent.dataTransfer.dropEffect="move",b.opts.dragInline||a.preventDefault()}function i(a){b.$el.attr("contenteditable",!0);var c=b.$el.find(".fr-dragging");n&&n.hasClass("fr-visible")&&b.$box.find(n).length?k(a):c.length&&(a.preventDefault(),a.stopPropagation()),n&&b.$box.find(n).length&&n.removeClass("fr-visible"),c.removeClass("fr-dragging")}function j(){for(var b=null,c=0;c<a.FE.INSTANCES.length;c++)if(b=a.FE.INSTANCES[c].$el.find(".fr-dragging"),b.length)return b.get(0)}function k(c){for(var d,e,f=0;f<a.FE.INSTANCES.length;f++)if(d=a.FE.INSTANCES[f].$el.find(".fr-dragging"),d.length){e=a.FE.INSTANCES[f];break}if(d.length){if(c.preventDefault(),c.stopPropagation(),n&&n.hasClass("fr-visible")&&b.$box.find(n).length)n.data("fr-tag")[n.data("fr-position")]('<span class="fr-marker"></span>'),n.removeClass("fr-visible");else{var g=b.markers.insertAtPoint(c.originalEvent);if(g===!1)return!1}if(d.removeClass("fr-dragging"),d=b.events.chainTrigger("element.beforeDrop",d),d===!1)return!1;var h=d;if(d.parent().is("A")&&1==d.parent().get(0).childNodes.length&&(h=d.parent()),b.core.isEmpty())b.events.focus();else{var i=b.$el.find(".fr-marker");i.replaceWith(a.FE.MARKERS),b.selection.restore()}if(e==b||b.undo.canDo()||b.undo.saveStep(),b.core.isEmpty())b.$el.html(h);else{var j=b.markers.insert();0===h.find(j).length?a(j).replaceWith(h):0===d.find(j).length&&a(j).replaceWith(d),d.after(a.FE.MARKERS),b.selection.restore()}return b.popups.hideAll(),b.selection.save(),b.$el.find(b.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),b.html.wrap(),b.html.fillEmptyBlocks(),b.selection.restore(),b.undo.saveStep(),b.opts.iframe&&b.size.syncIframe(),e!=b&&(e.popups.hideAll(),e.$el.find(e.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),e.html.wrap(),e.html.fillEmptyBlocks(),e.undo.saveStep(),e.events.trigger("element.dropped"),e.opts.iframe&&e.size.syncIframe()),b.events.trigger("element.dropped",[h]),!1}n&&n.removeClass("fr-visible"),b.undo.canDo()||b.undo.saveStep(),setTimeout(function(){b.undo.saveStep()},0)}function l(a){if(a&&"DIV"==a.tagName&&b.node.hasClass(a,"fr-drag-helper"))a.parentNode.removeChild(a);else if(a&&a.nodeType==Node.ELEMENT_NODE)for(var c=a.querySelectorAll("div.fr-drag-helper"),d=0;d<c.length;d++)c[d].parentNode.removeChild(c[d])}function m(){b.opts.enter==a.FE.ENTER_BR&&(b.opts.dragInline=!0),b.events.on("dragstart",c,!0),b.events.on("dragover",g,!0),b.events.on("dragenter",h,!0),b.events.on("document.dragend",i,!0),b.events.on("document.drop",i,!0),b.events.on("drop",k,!0),b.events.on("html.processGet",l)}var n;return{_init:m}},a.extend(a.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),a.extend(a.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),a.FE.PLUGINS.emoticons=function(b){function c(){var a=b.$tb.find('.fr-command[data-cmd="emoticons"]'),c=b.popups.get("emoticons");if(c||(c=e()),!c.hasClass("fr-active")){b.popups.refresh("emoticons"),b.popups.setContainer("emoticons",b.$tb);var d=a.offset().left+a.outerWidth()/2,f=a.offset().top+(b.opts.toolbarBottom?10:a.outerHeight()-10);b.popups.show("emoticons",d,f,a.outerHeight())}}function d(){b.popups.hide("emoticons")}function e(){var a="";b.opts.toolbarInline&&b.opts.emoticonsButtons.length>0&&(a='<div class="fr-buttons fr-emoticons-buttons">'+b.button.buildList(b.opts.emoticonsButtons)+"</div>");var c={buttons:a,emoticons:g()},d=b.popups.create("emoticons",c);return b.tooltip.bind(d,".fr-emoticon"),h(d),d}function f(){if(!b.selection.isCollapsed())return!1;var a=b.selection.element(),c=b.selection.endElement();if(a&&b.node.hasClass(a,"fr-emoticon"))return a;if(c&&b.node.hasClass(c,"fr-emoticon"))return c;var d=b.selection.ranges(0),e=d.startContainer;if(e.nodeType==Node.ELEMENT_NODE&&e.childNodes.length>0&&d.startOffset>0){var f=e.childNodes[d.startOffset-1];if(b.node.hasClass(f,"fr-emoticon"))return f}return!1}function g(){for(var a='<div style="text-align: center">',c=0;c<b.opts.emoticonsSet.length;c++)0!==c&&c%b.opts.emoticonsStep===0&&(a+="<br>"),a+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+b.language.translate(b.opts.emoticonsSet[c].desc)+'" role="button" data-param1="'+b.opts.emoticonsSet[c].code+'">'+(b.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+b.opts.emoticonsSet[c].code+'.svg"/>':"&#x"+b.opts.emoticonsSet[c].code+";")+'<span class="fr-sr-only">'+b.language.translate(b.opts.emoticonsSet[c].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return b.opts.emoticonsUseImage&&(a+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),a+="</div>"}function h(c){b.events.on("popup.tab",function(d){var e=a(d.currentTarget);if(!b.popups.isVisible("emoticons")||!e.is("span, a"))return!0;var f,g,h,i=d.which;if(a.FE.KEYCODE.TAB==i){if(e.is("span.fr-emoticon")&&d.shiftKey||e.is("a")&&!d.shiftKey){var j=c.find(".fr-buttons");f=!b.accessibility.focusToolbar(j,d.shiftKey?!0:!1)}if(f!==!1){var k=c.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");e.is("span.fr-emoticon")&&(k=k.not("span.fr-emoticon:not(:focus)")),g=k.index(e),g=d.shiftKey?((g-1)%k.length+k.length)%k.length:(g+1)%k.length,h=k.get(g),b.events.disableBlur(),h.focus(),f=!1}}else if(a.FE.KEYCODE.ARROW_UP==i||a.FE.KEYCODE.ARROW_DOWN==i||a.FE.KEYCODE.ARROW_LEFT==i||a.FE.KEYCODE.ARROW_RIGHT==i){if(e.is("span.fr-emoticon")){var l=e.parent().find("span.fr-emoticon");g=l.index(e);var m=b.opts.emoticonsStep,n=Math.floor(l.length/m),o=g%m,p=Math.floor(g/m),q=p*m+o,r=n*m;a.FE.KEYCODE.ARROW_UP==i?q=((q-m)%r+r)%r:a.FE.KEYCODE.ARROW_DOWN==i?q=(q+m)%r:a.FE.KEYCODE.ARROW_LEFT==i?q=((q-1)%r+r)%r:a.FE.KEYCODE.ARROW_RIGHT==i&&(q=(q+1)%r),h=a(l.get(q)),b.events.disableBlur(),h.focus(),f=!1}}else a.FE.KEYCODE.ENTER==i&&(e.is("a")?e[0].click():b.button.exec(e),f=!1);return f===!1&&(d.preventDefault(),d.stopPropagation()),f},!0)}function i(c,d){var e=f(),g=b.selection.ranges(0);e?(0===g.startOffset&&b.selection.element()===e?a(e).before(a.FE.MARKERS+a.FE.INVISIBLE_SPACE):g.startOffset>0&&b.selection.element()===e&&g.commonAncestorContainer.parentNode.classList.contains("fr-emoticon")&&a(e).after(a.FE.INVISIBLE_SPACE+a.FE.MARKERS),b.selection.restore(),b.html.insert('<span class="fr-emoticon fr-deletable'+(d?" fr-emoticon-img":"")+'"'+(d?' style="background: url('+d+');"':"")+">"+(d?"&nbsp;":c)+"</span>&nbsp;"+a.FE.MARKERS,!0)):b.html.insert('<span class="fr-emoticon fr-deletable'+(d?" fr-emoticon-img":"")+'"'+(d?' style="background: url('+d+');"':"")+">"+(d?"&nbsp;":c)+"</span>&nbsp;",!0)}function j(){b.popups.hide("emoticons"),b.toolbar.showInline()}function k(){var c=function(){for(var a=b.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),c=0;c<a.length;c++)a[c].className+=" fr-deletable"};c(),b.events.on("html.set",c),b.events.on("keydown",function(c){if(b.keys.isCharacter(c.which)&&b.selection.inEditor()){var d=b.selection.ranges(0),e=f();b.node.hasClass(e,"fr-emoticon-img")&&e&&(0===d.startOffset&&b.selection.element()===e?a(e).before(a.FE.MARKERS+a.FE.INVISIBLE_SPACE):a(e).after(a.FE.INVISIBLE_SPACE+a.FE.MARKERS),b.selection.restore())}}),b.events.on("keyup",function(c){for(var d=b.el.querySelectorAll(".fr-emoticon"),e=0;e<d.length;e++)"undefined"!=typeof d[e].textContent&&0===d[e].textContent.replace(/\u200B/gi,"").length&&a(d[e]).remove();if(!(c.which>=a.FE.KEYCODE.ARROW_LEFT&&c.which<=a.FE.KEYCODE.ARROW_DOWN)){var g=f();b.node.hasClass(g,"fr-emoticon-img")&&(a(g).append(a.FE.MARKERS),b.selection.restore())}})}return{_init:k,insert:i,showEmoticonsPopup:c,hideEmoticonsPopup:d,back:j}},a.FE.DefineIcon("emoticons",{NAME:"smile-o",FA5NAME:"smile"}),a.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),a.FE.RegisterCommand("insertEmoticon",{callback:function(a,b){this.emoticons.insert("&#x"+b+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+b+".svg":null),this.emoticons.hideEmoticonsPopup()}}),a.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}}),a.extend(a.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),a.FE.PLUGINS.entities=function(b){function c(a){var b=a.textContent;if(b.match(g)){for(var c="",d=0;d<b.length;d++)c+=h[b[d]]?h[b[d]]:b[d];a.textContent=c}}function d(a){if(a&&["STYLE","SCRIPT","svg","IFRAME"].indexOf(a.tagName)>=0)return!0;for(var e=b.node.contents(a),f=0;f<e.length;f++)e[f].nodeType==Node.TEXT_NODE?c(e[f]):d(e[f]);a.nodeType==Node.TEXT_NODE&&c(a)}function e(a){if(0===a.length)return"";var c=b.clean.exec(a,d).replace(/\&amp;/g,"&");return c}function f(){b.opts.htmlSimpleAmpersand||(b.opts.entities=b.opts.entities+"&amp;");var c=a("<div>").html(b.opts.entities).text(),d=b.opts.entities.split(";");h={},g="";for(var f=0;f<c.length;f++){var i=c.charAt(f);h[i]=d[f]+";",g+="\\"+i+(f<c.length-1?"|":"")}g=new RegExp("("+g+")","g"),b.events.on("html.get",e,!0)}var g,h;return{_init:f}},a.extend(a.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),a.extend(a.FE.DEFAULTS,{fileUpload:!0,fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),a.FE.PLUGINS.file=function(b){function c(){var a=b.$tb.find('.fr-command[data-cmd="insertFile"]'),c=b.popups.get("file.insert");if(c||(c=s()),e(),!c.hasClass("fr-active"))if(b.popups.refresh("file.insert"),b.popups.setContainer("file.insert",b.$tb),a.is(":visible")){var d=a.offset().left+a.outerWidth()/2,f=a.offset().top+(b.opts.toolbarBottom?10:a.outerHeight()-10);b.popups.show("file.insert",d,f,a.outerHeight())}else b.position.forSelection(c),b.popups.show("file.insert")}function d(){var a=b.popups.get("file.insert");a||(a=s()),a.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),a.find(".fr-file-progress-bar-layer").addClass("fr-active"),a.find(".fr-buttons").hide(),f(b.language.translate("Uploading"),0)}function e(a){var c=b.popups.get("file.insert");c&&(c.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),c.find(".fr-file-progress-bar-layer").removeClass("fr-active"),c.find(".fr-buttons").show(),a&&(b.events.focus(),b.popups.hide("file.insert")))}function f(a,c){var d=b.popups.get("file.insert");if(d){var e=d.find(".fr-file-progress-bar-layer");e.find("h3").text(a+(c?" "+c+"%":"")),e.removeClass("fr-error"),c?(e.find("div").removeClass("fr-indeterminate"),e.find("div > span").css("width",c+"%")):e.find("div").addClass("fr-indeterminate")}}function g(a){d();var c=b.popups.get("file.insert"),e=c.find(".fr-file-progress-bar-layer");e.addClass("fr-error");var f=e.find("h3");f.text(a),b.events.disableBlur(),f.focus()}function h(a,c,d){b.edit.on(),b.events.focus(!0),b.selection.restore(),b.opts.fileUseSelectedText&&b.selection.text().length&&(c=b.selection.text()),b.html.insert('<a href="'+a+'" target="_blank" id="fr-inserted-file" class="fr-file">'+c+"</a>");var e=b.$el.find("#fr-inserted-file");e.removeAttr("id"),b.popups.hide("file.insert"),b.undo.saveStep(),x(),b.events.trigger("file.inserted",[e,d])}function i(a){try{if(b.events.trigger("file.uploaded",[a],!0)===!1)return b.edit.on(),!1;var c=JSON.parse(a);return c.link?c:(n(A,a),!1)}catch(d){return n(C,a),!1}}function j(c){try{var d=a(c).find("Location").text(),e=a(c).find("Key").text();return b.events.trigger("file.uploadedToS3",[d,e,c],!0)===!1?(b.edit.on(),!1):d}catch(f){return n(C,c),!1}}function k(a){var c=this.status,d=this.response,e=this.responseXML,f=this.responseText;try{if(b.opts.fileUploadToS3)if(201==c){var g=j(e);g&&h(g,a,d||e)}else n(C,d||e);else if(c>=200&&300>c){var k=i(f);k&&h(k.link,a,d||f)}else n(B,d||f)}catch(l){n(C,d||f)}}function l(){n(C,this.response||this.responseText||this.responseXML)}function m(a){if(a.lengthComputable){var c=a.loaded/a.total*100|0;f(b.language.translate("Uploading"),c)}}function n(a,c){b.edit.on(),g(b.language.translate("Something went wrong. Please try again.")),b.events.trigger("file.error",[{code:a,message:G[a]},c])}function o(){b.edit.on(),e(!0)}function p(a){if("undefined"!=typeof a&&a.length>0){if(b.events.trigger("file.beforeUpload",[a])===!1)return!1;var c=a[0];if(c.size>b.opts.fileMaxSize)return n(D),!1;if(b.opts.fileAllowedTypes.indexOf("*")<0&&b.opts.fileAllowedTypes.indexOf(c.type.replace(/file\//g,""))<0)return n(E),!1;var e;if(b.drag_support.formdata&&(e=b.drag_support.formdata?new FormData:null),e){var f;if(b.opts.fileUploadToS3!==!1){e.append("key",b.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(c.name||"untitled")),e.append("success_action_status","201"),e.append("X-Requested-With","xhr"),e.append("Content-Type",c.type);for(f in b.opts.fileUploadToS3.params)b.opts.fileUploadToS3.params.hasOwnProperty(f)&&e.append(f,b.opts.fileUploadToS3.params[f])}for(f in b.opts.fileUploadParams)b.opts.fileUploadParams.hasOwnProperty(f)&&e.append(f,b.opts.fileUploadParams[f]);e.append(b.opts.fileUploadParam,c);var g=b.opts.fileUploadURL;b.opts.fileUploadToS3&&(g=b.opts.fileUploadToS3.uploadURL?b.opts.fileUploadToS3.uploadURL:"https://"+b.opts.fileUploadToS3.region+".amazonaws.com/"+b.opts.fileUploadToS3.bucket);var h=b.core.getXHR(g,b.opts.fileUploadMethod);h.onload=function(){k.call(h,c.name)},h.onerror=l,h.upload.onprogress=m,h.onabort=o,d();var i=b.popups.get("file.insert");i&&i.off("abortUpload").on("abortUpload",function(){4!=h.readyState&&h.abort()}),h.send(e)}}}function q(c){b.events.$on(c,"dragover dragenter",".fr-file-upload-layer",function(){return a(this).addClass("fr-drop"),!1},!0),b.events.$on(c,"dragleave dragend",".fr-file-upload-layer",function(){return a(this).removeClass("fr-drop"),!1},!0),b.events.$on(c,"drop",".fr-file-upload-layer",function(d){d.preventDefault(),d.stopPropagation(),a(this).removeClass("fr-drop");var e=d.originalEvent.dataTransfer;if(e&&e.files){var f=c.data("instance")||b;f.file.upload(e.files)}},!0),b.helpers.isIOS()&&b.events.$on(c,"touchstart",'.fr-file-upload-layer input[type="file"]',function(){a(this).trigger("click")}),b.events.$on(c,"change",'.fr-file-upload-layer input[type="file"]',function(){if(this.files){var d=c.data("instance")||b;d.file.upload(this.files)}a(this).val("")},!0)}function r(){e()}function s(a){if(a)return b.popups.onHide("file.insert",r),!0;var c="";b.opts.fileUpload||b.opts.fileInsertButtons.splice(b.opts.fileInsertButtons.indexOf("fileUpload"),1),c='<div class="fr-buttons">'+b.button.buildList(b.opts.fileInsertButtons)+"</div>";var d="";b.opts.fileUpload&&(d='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+b.id+'"><strong>'+b.language.translate("Drop file")+"</strong><br>("+b.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+b.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+b.id+'" role="button"></div></div>');var e='<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>',f={buttons:c,upload_layer:d,progress_bar:e},g=b.popups.create("file.insert",f);return q(g),g}function t(a){b.node.hasClass(a,"fr-file")}function u(c){var e=c.originalEvent.dataTransfer;if(e&&e.files&&e.files.length){var f=e.files[0];if(f&&"undefined"!=typeof f.type){if(f.type.indexOf("image")<0){if(!b.opts.fileUpload)return c.preventDefault(),c.stopPropagation(),!1;b.markers.remove(),b.markers.insertAtPoint(c.originalEvent),b.$el.find(".fr-marker").replaceWith(a.FE.MARKERS),b.popups.hideAll();var g=b.popups.get("file.insert");return g||(g=s()),b.popups.setContainer("file.insert",b.$sc),b.popups.show("file.insert",c.originalEvent.pageX,c.originalEvent.pageY),d(),p(e.files),c.preventDefault(),c.stopPropagation(),!1}}else f.type.indexOf("image")<0&&(c.preventDefault(),c.stopPropagation())}}function v(){b.events.on("drop",u),b.events.$on(b.$win,"keydown",function(c){var d=c.which,e=b.popups.get("file.insert");e&&d==a.FE.KEYCODE.ESC&&e.trigger("abortUpload")}),b.events.on("destroy",function(){var a=b.popups.get("file.insert");a&&a.trigger("abortUpload")})}function w(){b.events.disableBlur(),b.selection.restore(),b.events.enableBlur(),b.popups.hide("file.insert"),b.toolbar.showInline()}function x(){var a,c=Array.prototype.slice.call(b.el.querySelectorAll("a.fr-file")),d=[];for(a=0;a<c.length;a++)d.push(c[a].getAttribute("href"));if(H)for(a=0;a<H.length;a++)d.indexOf(H[a].getAttribute("href"))<0&&b.events.trigger("file.unlink",[H[a]]);H=c}function y(){v(),b.events.on("link.beforeRemove",t),b.$wp&&(x(),b.events.on("contentChanged",x)),s(!0)}var z=1,A=2,B=3,C=4,D=5,E=6,F=7,G={};G[z]="File cannot be loaded from the passed link.",G[A]="No link in upload response.",G[B]="Error during file upload.",G[C]="Parsing response failed.",G[D]="File is too large.",G[E]="File file type is invalid.",G[F]="Files can be uploaded only to same domain in IE 8 and IE 9.";var H;return{_init:y,showInsertPopup:c,upload:p,insert:h,back:w,hideProgressBar:e}},a.FE.DefineIcon("insertFile",{NAME:"file-o",FA5NAME:"file"}),a.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),a.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(a){this.opts.toolbarInline?(a.removeClass("fr-hidden"),a.next(".fr-separator").removeClass("fr-hidden")):(a.addClass("fr-hidden"),a.next(".fr-separator").addClass("fr-hidden"))}}),a.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}}),a.extend(a.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif,-webkit-standard":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),a.FE.PLUGINS.fontFamily=function(b){function c(a){b.format.applyStyle("font-family",a)}function d(a,b){b.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),b.find('.fr-command[data-param1="'+g()+'"]').addClass("fr-active").attr("aria-selected",!0);var c=b.find(".fr-dropdown-list"),d=b.find(".fr-active").parent();d.length?c.parent().scrollTop(d.offset().top-c.offset().top-(c.parent().outerHeight()/2-d.outerHeight()/2)):c.parent().scrollTop(0)}function e(b){var c=b.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return a.grep(c,function(a){return a.length>0})}function f(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(a[c].toLowerCase()==b[d].toLowerCase())return[c,d];return null}function g(){var c=a(b.selection.element()).css("font-family"),d=e(c),g=[];for(var h in b.opts.fontFamily)if(b.opts.fontFamily.hasOwnProperty(h)){var i=e(h),j=f(d,i);j&&g.push([h,j])}return 0===g.length?null:(g.sort(function(a,b){var c=a[1][0]-b[1][0];return 0===c?a[1][1]-b[1][1]:c}),g[0][0])}function h(c){if(b.opts.fontFamilySelection){var d=a(b.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");c.find("> span").text(b.opts.fontFamily[g()]||d[0]||b.language.translate(b.opts.fontFamilyDefaultSelection))}}return{apply:c,refreshOnShow:d,refresh:h}},a.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(a){return a.opts.fontFamilySelection},defaultSelection:function(a){return a.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.fontFamily;for(var c in b)b.hasOwnProperty(c)&&(a+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+c+'" style="font-family: '+c+'" title="'+b[c]+'">'+b[c]+"</a></li>");return a+="</ul>"},title:"Font Family",callback:function(a,b){this.fontFamily.apply(b)},refresh:function(a){this.fontFamily.refresh(a)},refreshOnShow:function(a,b){this.fontFamily.refreshOnShow(a,b)},plugin:"fontFamily"}),a.FE.DefineIcon("fontFamily",{NAME:"font"}),a.extend(a.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),a.FE.PLUGINS.fontSize=function(b){function c(a){b.format.applyStyle("font-size",a)}function d(c,d){var e=a(b.selection.element()).css("font-size");d.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),d.find('.fr-command[data-param1="'+e+'"]').addClass("fr-active").attr("aria-selected",!0);var f=d.find(".fr-dropdown-list"),g=d.find(".fr-active").parent();g.length?f.parent().scrollTop(g.offset().top-f.offset().top-(f.parent().outerHeight()/2-g.outerHeight()/2)):f.parent().scrollTop(0)}function e(c){if(b.opts.fontSizeSelection){var d=b.helpers.getPX(a(b.selection.element()).css("font-size"));c.find("> span").text(d)}}return{apply:c,refreshOnShow:d,refresh:e}},a.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(a){return a.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(a){return a.opts.fontSizeDefaultSelection},html:function(){for(var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.fontSize,c=0;c<b.length;c++){var d=b[c];a+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+d+'px" title="'+d+'">'+d+"</a></li>"}return a+="</ul>"},callback:function(a,b){this.fontSize.apply(b)},refresh:function(a){this.fontSize.refresh(a)},refreshOnShow:function(a,b){this.fontSize.refreshOnShow(a,b)},plugin:"fontSize"}),a.FE.DefineIcon("fontSize",{NAME:"text-height"}),a.extend(a.FE.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),a.extend(a.FE.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),a.FE.PLUGINS.forms=function(b){function c(c){c.preventDefault(),b.selection.clear(),a(this).data("mousedown",!0)}function d(b){a(this).data("mousedown")&&(b.stopPropagation(),a(this).removeData("mousedown"),s=this,j(this)),b.preventDefault()}function e(){b.$el.find("input, textarea, button").removeData("mousedown")}function f(){a(this).removeData("mousedown")}function g(){b.events.$on(b.$el,b._mousedown,"input, textarea, button",c),b.events.$on(b.$el,b._mouseup,"input, textarea, button",d),b.events.$on(b.$el,"touchmove","input, textarea, button",f),b.events.$on(b.$el,b._mouseup,e),b.events.$on(b.$win,b._mouseup,e),m(!0)}function h(){return s?s:null}function i(){var a="";b.opts.formEditButtons.length>0&&(a='<div class="fr-buttons">'+b.button.buildList(b.opts.formEditButtons)+"</div>");var c={buttons:a},d=b.popups.create("forms.edit",c);return b.$wp&&b.events.$on(b.$wp,"scroll.link-edit",function(){h()&&b.popups.isVisible("forms.edit")&&j(h())}),d}function j(c){var d=b.popups.get("forms.edit");d||(d=i()),s=c;var e=a(c);b.popups.refresh("forms.edit"),b.popups.setContainer("forms.edit",b.$sc);
var f=e.offset().left+e.outerWidth()/2,g=e.offset().top+e.outerHeight();b.popups.show("forms.edit",f,g,e.outerHeight())}function k(){var c=b.popups.get("forms.update"),d=h();if(d){var e=a(d);e.is("button")?c.find('input[type="text"][name="text"]').val(e.text()):c.find('input[type="text"][name="text"]').val(e.attr("placeholder"))}c.find('input[type="text"][name="text"]').trigger("change")}function l(){s=null}function m(a){if(a)return b.popups.onRefresh("forms.update",k),b.popups.onHide("forms.update",l),!0;var c="";b.opts.formUpdateButtons.length>=1&&(c='<div class="fr-buttons">'+b.button.buildList(b.opts.formUpdateButtons)+"</div>");var d="",e=0;d='<div class="fr-forms-text-layer fr-layer fr-active">',d+='<div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex="'+ ++e+'"></div>',d+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="'+ ++e+'" type="button">'+b.language.translate("Update")+"</button></div></div>";var f={buttons:c,text_layer:d},g=b.popups.create("forms.update",f);return g}function n(){var c=h();if(c){var d=a(c),e=b.popups.get("forms.update");e||(e=m()),b.popups.isVisible("forms.update")||b.popups.refresh("forms.update"),b.popups.setContainer("forms.update",b.$sc);var f=d.offset().left+d.outerWidth()/2,g=d.offset().top+d.outerHeight();b.popups.show("forms.update",f,g,d.outerHeight())}}function o(c,d,e){"undefined"==typeof d&&(d=b.opts.formStyles),"undefined"==typeof e&&(e=b.opts.formMultipleStyles);var f=h();if(!f)return!1;if(!e){var g=Object.keys(d);g.splice(g.indexOf(c),1),a(f).removeClass(g.join(" "))}a(f).toggleClass(c)}function p(){b.events.disableBlur(),b.selection.restore(),b.events.enableBlur();var a=h();a&&b.$wp&&("BUTTON"==a.tagName&&b.selection.restore(),j(a))}function q(){var c=b.popups.get("forms.update"),d=h();if(d){var e=a(d),f=c.find('input[type="text"][name="text"]').val()||"";f.length&&(e.is("button")?e.text(f):e.attr("placeholder",f)),b.popups.hide("forms.update"),j(d)}}function r(){g(),b.events.$on(b.$el,"submit","form",function(a){return a.preventDefault(),!1})}var s;return{_init:r,updateInput:q,getInput:h,applyStyle:o,showUpdatePopup:n,showEditPopup:j,back:p}},a.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),a.FE.DefineIcon("inputStyle",{NAME:"magic"}),a.FE.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var a='<ul class="fr-dropdown-list">',b=this.opts.formStyles;for(var c in b)b.hasOwnProperty(c)&&(a+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'+c+'">'+this.language.translate(b[c])+"</a></li>");return a+="</ul>"},callback:function(a,b){var c=this.forms.getInput();c&&(this.forms.applyStyle(b),this.forms.showEditPopup(c))},refreshOnShow:function(b,c){var d=this.forms.getInput();if(d){var e=a(d);c.find(".fr-command").each(function(){var b=a(this).data("param1");a(this).toggleClass("fr-active",e.hasClass(b))})}}}),a.FE.DefineIcon("inputEdit",{NAME:"edit"}),a.FE.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),a.FE.DefineIcon("inputBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),a.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),a.FE.PLUGINS.fullscreen=function(b){function c(){return b.$box.hasClass("fr-fullscreen")}function d(){if(b.helpers.isIOS()&&b.core.hasFocus())return b.$el.blur(),setTimeout(f,250),!1;i=b.helpers.scrollTop(),b.$box.toggleClass("fr-fullscreen"),a("body:first").toggleClass("fr-fullscreen"),b.helpers.isMobile()&&(b.$tb.data("parent",b.$tb.parent()),b.$tb.prependTo(b.$box),b.$tb.data("sticky-dummy")&&b.$tb.after(b.$tb.data("sticky-dummy"))),j=b.opts.height,k=b.opts.heightMax,l=b.opts.zIndex,b.position.refresh(),b.opts.height=b.o_win.innerHeight-(b.opts.toolbarInline?0:b.$tb.outerHeight()),b.opts.zIndex=2147483641,b.opts.heightMax=null,b.size.refresh(),b.opts.toolbarInline&&b.toolbar.showInline();for(var c=b.$box.parent();!c.is("body:first");)c.data("z-index",c.css("z-index")).data("overflow",c.css("overflow")).css("z-index","2147483640").css("overflow","visible"),c=c.parent();b.opts.toolbarContainer&&b.$box.prepend(b.$tb),b.events.trigger("charCounter.update"),b.events.trigger("codeView.update"),b.$win.trigger("scroll")}function e(){if(b.helpers.isIOS()&&b.core.hasFocus())return b.$el.blur(),setTimeout(f,250),!1;b.$box.toggleClass("fr-fullscreen"),a("body:first").toggleClass("fr-fullscreen"),b.$tb.prependTo(b.$tb.data("parent")),b.$tb.data("sticky-dummy")&&b.$tb.after(b.$tb.data("sticky-dummy")),b.opts.height=j,b.opts.heightMax=k,b.opts.zIndex=l,b.size.refresh(),a(b.o_win).scrollTop(i),b.opts.toolbarInline&&b.toolbar.showInline(),b.events.trigger("charCounter.update"),b.opts.toolbarSticky&&b.opts.toolbarStickyOffset&&(b.opts.toolbarBottom?b.$tb.css("bottom",b.opts.toolbarStickyOffset).data("bottom",b.opts.toolbarStickyOffset):b.$tb.css("top",b.opts.toolbarStickyOffset).data("top",b.opts.toolbarStickyOffset));for(var c=b.$box.parent();!c.is("body:first");)c.data("z-index")&&(c.css("z-index",""),c.css("z-index")!=c.data("z-index")&&c.css("z-index",c.data("z-index")),c.removeData("z-index")),c.data("overflow")?(c.css("overflow",""),c.css("overflow")!=c.data("overflow")&&c.css("overflow",c.data("overflow")),c.removeData("overflow")):(c.css("overflow",""),c.removeData("overflow")),c=c.parent();b.opts.toolbarContainer&&a(b.opts.toolbarContainer).append(b.$tb),a(b.o_win).trigger("scroll"),b.events.trigger("codeView.update")}function f(){c()?e():d(),g(b.$tb.find('.fr-command[data-cmd="fullscreen"]'))}function g(a){var d=c();a.toggleClass("fr-active",d).attr("aria-pressed",d),a.find("> *:not(.fr-sr-only)").replaceWith(d?b.icon.create("fullscreenCompress"):b.icon.create("fullscreen"))}function h(){return b.$wp?(b.events.$on(a(b.o_win),"resize",function(){c()&&(e(),d())}),b.events.on("toolbar.hide",function(){return c()&&b.helpers.isMobile()?!1:void 0}),b.events.on("position.refresh",function(){return b.helpers.isIOS()?!c():void 0}),void b.events.on("destroy",function(){c()&&e()},!0)):!1}var i,j,k,l;return{_init:h,toggle:f,refresh:g,isActive:c}},a.FE.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(a){this.fullscreen.refresh(a)},plugin:"fullscreen"}),a.FE.DefineIcon("fullscreen",{NAME:"expand"}),a.FE.DefineIcon("fullscreenCompress",{NAME:"compress"}),a.extend(a.FE.DEFAULTS,{helpSets:[{title:"Inline Editor",commands:[{val:"OSkeyE",desc:"Show the editor"}]},{title:"Common actions",commands:[{val:"OSkeyC",desc:"Copy"},{val:"OSkeyX",desc:"Cut"},{val:"OSkeyV",desc:"Paste"},{val:"OSkeyZ",desc:"Undo"},{val:"OSkeyShift+Z",desc:"Redo"},{val:"OSkeyK",desc:"Insert Link"},{val:"OSkeyP",desc:"Insert Image"}]},{title:"Basic Formatting",commands:[{val:"OSkeyA",desc:"Select All"},{val:"OSkeyB",desc:"Bold"},{val:"OSkeyI",desc:"Italic"},{val:"OSkeyU",desc:"Underline"},{val:"OSkeyS",desc:"Strikethrough"},{val:"OSkey]",desc:"Increase Indent"},{val:"OSkey[",desc:"Decrease Indent"}]},{title:"Quote",commands:[{val:"OSkey'",desc:"Increase quote level"},{val:"OSkeyShift+'",desc:"Decrease quote level"}]},{title:"Image / Video",commands:[{val:"OSkey+",desc:"Resize larger"},{val:"OSkey-",desc:"Resize smaller"}]},{title:"Table",commands:[{val:"Alt+Space",desc:"Select table cell"},{val:"Shift+Left/Right arrow",desc:"Extend selection one cell"},{val:"Shift+Up/Down arrow",desc:"Extend selection one row"}]},{title:"Navigation",commands:[{val:"OSkey/",desc:"Shortcuts"},{val:"Alt+F10",desc:"Focus popup / toolbar"},{val:"Esc",desc:"Return focus to previous position"}]}]}),a.FE.PLUGINS.help=function(b){function c(){}function d(){for(var a='<div class="fr-help-modal">',c=0;c<b.opts.helpSets.length;c++){var d=b.opts.helpSets[c],e="<table>";e+="<thead><tr><th>"+b.language.translate(d.title)+"</th></tr></thead>",e+="<tbody>";for(var f=0;f<d.commands.length;f++){var g=d.commands[f];e+="<tr>",e+="<td>"+b.language.translate(g.desc)+"</td>",e+="<td>"+g.val.replace("OSkey",b.helpers.isMac()?"&#8984;":"Ctrl+")+"</td>",e+="</tr>"}e+="</tbody></table>",a+=e}return a+="</div>"}function e(){if(!g){var c="<h4>"+b.language.translate("Shortcuts")+"</h4>",e=d(),f=b.modals.create(j,c,e);g=f.$modal,h=f.$head,i=f.$body,b.events.$on(a(b.o_win),"resize",function(){b.modals.resize(j)})}b.modals.show(j),b.modals.resize(j)}function f(){b.modals.hide(j)}var g,h,i,j="help";return{_init:c,show:e,hide:f}},a.FroalaEditor.DefineIcon("help",{NAME:"question"}),a.FE.RegisterShortcut(a.FE.KEYCODE.SLASH,"help",null,"/"),a.FE.RegisterCommand("help",{title:"Help",icon:"help",undo:!1,focus:!1,modal:!0,callback:function(){this.help.show()},plugin:"help",showOnMobile:!1}),a.extend(a.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),a.extend(a.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,imageUploadURL:"https://i.froala.com/upload",imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),a.FE.PLUGINS.image=function(b){function c(){var a=b.popups.get("image.insert"),c=a.find(".fr-image-by-url-layer input");c.val(""),Ea&&c.val(Ea.attr("src")),c.trigger("change")}function d(){var a=b.$tb.find('.fr-command[data-cmd="insertImage"]'),c=b.popups.get("image.insert");if(c||(c=N()),t(),!c.hasClass("fr-active"))if(b.popups.refresh("image.insert"),b.popups.setContainer("image.insert",b.$tb),a.is(":visible")){var d=a.offset().left+a.outerWidth()/2,e=a.offset().top+(b.opts.toolbarBottom?10:a.outerHeight()-10);b.popups.show("image.insert",d,e,a.outerHeight())}else b.position.forSelection(c),b.popups.show("image.insert")}function e(){var a=b.popups.get("image.edit");if(a||(a=r()),a){var c=Aa();Ca()&&(c=c.find(".fr-img-wrap")),b.popups.setContainer("image.edit",b.$sc),b.popups.refresh("image.edit");var d=c.offset().left+c.outerWidth()/2,e=c.offset().top+c.outerHeight();b.popups.show("image.edit",d,e,c.outerHeight())}}function f(){t()}function g(a){a.parents(".fr-img-caption").length>0&&(a=a.parents(".fr-img-caption:first")),a.hasClass("fr-dii")||a.hasClass("fr-dib")||(a.addClass("fr-fi"+qa(a)[0]),a.addClass("fr-di"+ra(a)[0]),a.css("margin",""),a.css("float",""),a.css("display",""),a.css("z-index",""),a.css("position",""),a.css("overflow",""),a.css("vertical-align",""))}function h(a){a.parents(".fr-img-caption").length>0&&(a=a.parents(".fr-img-caption:first"));var b=a.hasClass("fr-dib")?"block":a.hasClass("fr-dii")?"inline":null,c=a.hasClass("fr-fil")?"left":a.hasClass("fr-fir")?"right":qa(a);oa(a,b,c),a.removeClass("fr-dib fr-dii fr-fir fr-fil")}function i(){for(var c="IMG"==b.el.tagName?[b.el]:b.el.querySelectorAll("img"),d=0;d<c.length;d++){var e=a(c[d]);!b.opts.htmlUntouched&&b.opts.useClasses?((b.opts.imageDefaultAlign||b.opts.imageDefaultDisplay)&&g(e),b.opts.imageTextNear||(e.parents(".fr-img-caption").length>0?e.parents(".fr-img-caption:first").removeClass("fr-dii").addClass("fr-dib"):e.removeClass("fr-dii").addClass("fr-dib"))):b.opts.htmlUntouched||b.opts.useClasses||(b.opts.imageDefaultAlign||b.opts.imageDefaultDisplay)&&h(e),b.opts.iframe&&e.on("load",b.size.syncIframe)}}function j(c){"undefined"==typeof c&&(c=!0);var d,e=Array.prototype.slice.call(b.el.querySelectorAll("img")),f=[];for(d=0;d<e.length;d++)if(f.push(e[d].getAttribute("src")),a(e[d]).toggleClass("fr-draggable",b.opts.imageMove),""===e[d].getAttribute("class")&&e[d].removeAttribute("class"),""===e[d].getAttribute("style")&&e[d].removeAttribute("style"),e[d].parentNode&&e[d].parentNode.parentNode&&b.node.hasClass(e[d].parentNode.parentNode,"fr-img-caption")){var g=e[d].parentNode.parentNode;b.browser.mozilla||g.setAttribute("contenteditable",!1),g.setAttribute("draggable",!1),g.classList.add("fr-draggable");var h=e[d].nextSibling;h&&h.setAttribute("contenteditable",!0)}if(Sa)for(d=0;d<Sa.length;d++)f.indexOf(Sa[d].getAttribute("src"))<0&&b.events.trigger("image.removed",[a(Sa[d])]);if(Sa&&c){var i=[];for(d=0;d<Sa.length;d++)i.push(Sa[d].getAttribute("src"));for(d=0;d<e.length;d++)i.indexOf(e[d].getAttribute("src"))<0&&b.events.trigger("image.loaded",[a(e[d])])}Sa=e}function k(){if(Fa||$(),!Ea)return!1;var a=b.$wp||b.$sc;a.append(Fa),Fa.data("instance",b);var c=a.scrollTop()-("static"!=a.css("position")?a.offset().top:0),d=a.scrollLeft()-("static"!=a.css("position")?a.offset().left:0);d-=b.helpers.getPX(a.css("border-left-width")),c-=b.helpers.getPX(a.css("border-top-width")),b.$el.is("img")&&b.$sc.is("body")&&(c=0,d=0);var e=Aa();Ca()&&(e=e.find(".fr-img-wrap")),Fa.css("top",(b.opts.iframe?e.offset().top:e.offset().top+c)-1).css("left",(b.opts.iframe?e.offset().left:e.offset().left+d)-1).css("width",e.get(0).getBoundingClientRect().width).css("height",e.get(0).getBoundingClientRect().height).addClass("fr-active")}function l(a){return'<div class="fr-handler fr-h'+a+'"></div>'}function m(a){Ca()?Ea.parents(".fr-img-caption").css("width",a):Ea.css("width",a)}function n(c){if(!b.core.sameInstance(Fa))return!0;if(c.preventDefault(),c.stopPropagation(),b.$el.find("img.fr-error").left)return!1;b.undo.canDo()||b.undo.saveStep();var d=c.pageX||c.originalEvent.touches[0].pageX;if("mousedown"==c.type){var e=b.$oel.get(0),f=e.ownerDocument,g=f.defaultView||f.parentWindow,h=!1;try{h=g.location!=g.parent.location&&!(g.$&&g.$.FE)}catch(i){}h&&g.frameElement&&(d+=b.helpers.getPX(a(g.frameElement).offset().left)+g.frameElement.clientLeft)}Ga=a(this),Ga.data("start-x",d),Ga.data("start-width",Ea.width()),Ga.data("start-height",Ea.height());var j=Ea.width();if(b.opts.imageResizeWithPercent){var k=Ea.parentsUntil(b.$el,b.html.blockTagsQuery()).get(0)||b.el;j=(j/a(k).outerWidth()*100).toFixed(2)+"%"}m(j),Ha.show(),b.popups.hideAll(),ma()}function o(c){if(!b.core.sameInstance(Fa))return!0;var d;if(Ga&&Ea){if(c.preventDefault(),b.$el.find("img.fr-error").left)return!1;var e=c.pageX||(c.originalEvent.touches?c.originalEvent.touches[0].pageX:null);if(!e)return!1;var f=Ga.data("start-x"),g=e-f,h=Ga.data("start-width");if((Ga.hasClass("fr-hnw")||Ga.hasClass("fr-hsw"))&&(g=0-g),b.opts.imageResizeWithPercent){var i=Ea.parentsUntil(b.$el,b.html.blockTagsQuery()).get(0)||b.el;h=((h+g)/a(i).outerWidth()*100).toFixed(2),b.opts.imageRoundPercent&&(h=Math.round(h)),m(h+"%"),d=Ca()?(b.helpers.getPX(Ea.parents(".fr-img-caption").css("width"))/a(i).outerWidth()*100).toFixed(2):(b.helpers.getPX(Ea.css("width"))/a(i).outerWidth()*100).toFixed(2),d===h||b.opts.imageRoundPercent||m(d+"%"),Ea.css("height","").removeAttr("height")}else h+g>=b.opts.imageMinWidth&&(m(h+g),d=Ca()?b.helpers.getPX(Ea.parents(".fr-img-caption").css("width")):b.helpers.getPX(Ea.css("width"))),d!==h+g&&m(d),((Ea.attr("style")||"").match(/(^height:)|(; *height:)/)||Ea.attr("height"))&&(Ea.css("height",Ga.data("start-height")*Ea.width()/Ga.data("start-width")),Ea.removeAttr("height"));k(),b.events.trigger("image.resize",[za()])}}function p(a){if(!b.core.sameInstance(Fa))return!0;if(Ga&&Ea){if(a&&a.stopPropagation(),b.$el.find("img.fr-error").left)return!1;Ga=null,Ha.hide(),k(),e(),b.undo.saveStep(),b.events.trigger("image.resizeEnd",[za()])}}function q(a,c,d){b.edit.on(),Ea&&Ea.addClass("fr-error"),v(b.language.translate("Something went wrong. Please try again.")),!Ea&&d&&_(d),b.events.trigger("image.error",[{code:a,message:Ra[a]},c,d])}function r(a){if(a)return b.$wp&&b.events.$on(b.$wp,"scroll",function(){Ea&&b.popups.isVisible("image.edit")&&(b.events.disableBlur(),x(Ea))}),!0;var c="";if(b.opts.imageEditButtons.length>0){c+='<div class="fr-buttons">',c+=b.button.buildList(b.opts.imageEditButtons),c+="</div>";var d={buttons:c},e=b.popups.create("image.edit",d);return e}return!1}function s(a){var c=b.popups.get("image.insert");if(c||(c=N()),c.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),c.find(".fr-image-progress-bar-layer").addClass("fr-active"),c.find(".fr-buttons").hide(),Ea){var d=Aa();b.popups.setContainer("image.insert",b.$sc);var e=d.offset().left+d.width()/2,f=d.offset().top+d.height();b.popups.show("image.insert",e,f,d.outerHeight())}"undefined"==typeof a&&u(b.language.translate("Uploading"),0)}function t(a){var c=b.popups.get("image.insert");if(c&&(c.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),c.find(".fr-image-progress-bar-layer").removeClass("fr-active"),c.find(".fr-buttons").show(),a||b.$el.find("img.fr-error").length)){if(b.events.focus(),b.$el.find("img.fr-error").length&&(b.$el.find("img.fr-error").remove(),b.undo.saveStep(),b.undo.run(),b.undo.dropRedo()),!b.$wp&&Ea){var d=Ea;ka(!0),b.selection.setAfter(d.get(0)),b.selection.restore()}b.popups.hide("image.insert")}}function u(a,c){var d=b.popups.get("image.insert");if(d){var e=d.find(".fr-image-progress-bar-layer");e.find("h3").text(a+(c?" "+c+"%":"")),e.removeClass("fr-error"),c?(e.find("div").removeClass("fr-indeterminate"),e.find("div > span").css("width",c+"%")):e.find("div").addClass("fr-indeterminate")}}function v(a){s();var c=b.popups.get("image.insert"),d=c.find(".fr-image-progress-bar-layer");d.addClass("fr-error");var e=d.find("h3");e.text(a),b.events.disableBlur(),e.focus()}function w(){var a=b.popups.get("image.insert"),c=a.find(".fr-image-by-url-layer input");if(c.val().length>0){s(),u(b.language.translate("Loading image"));var d=c.val();if(b.opts.imageUploadRemoteUrls&&b.opts.imageCORSProxy&&b.opts.imageUpload){var e=new XMLHttpRequest;e.responseType="blob",e.onload=function(){200==this.status?I([new Blob([this.response],{type:this.response.type||"image/png"})],Ea):q(Ja)},e.onerror=function(){z(d,!0,[],Ea)},e.open("GET",b.opts.imageCORSProxy+"/"+d,!0),e.send()}else z(d,!0,[],Ea);c.val(""),c.blur()}}function x(a){ja.call(a.get(0))}function y(){var c=a(this);b.popups.hide("image.insert"),c.removeClass("fr-uploading"),c.next().is("br")&&c.next().remove(),x(c),b.events.trigger("image.loaded",[c])}function z(a,c,d,e,f){b.edit.off(),u(b.language.translate("Loading image")),c&&(a=b.helpers.sanitizeURL(a));var g=new Image;g.onload=function(){var c,g;if(e){b.undo.canDo()||e.hasClass("fr-uploading")||b.undo.saveStep();var h=e.data("fr-old-src");e.data("fr-image-pasted")&&(h=null),b.$wp?(c=e.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted"),c.off("load"),h&&e.attr("src",h),e.replaceWith(c)):c=e;for(var i=c.get(0).attributes,k=0;k<i.length;k++){var l=i[k];0===l.nodeName.indexOf("data-")&&c.removeAttr(l.nodeName)}if("undefined"!=typeof d)for(g in d)d.hasOwnProperty(g)&&"link"!=g&&c.attr("data-"+g,d[g]);c.on("load",y),c.attr("src",a),b.edit.on(),j(!1),b.undo.saveStep(),b.events.disableBlur(),b.$el.blur(),b.events.trigger(h?"image.replaced":"image.inserted",[c,f])}else c=F(a,d,y),j(!1),b.undo.saveStep(),b.$el.blur(),b.events.trigger("image.inserted",[c,f])},g.onerror=function(){q(Ja)},s(b.language.translate("Loading image")),g.src=a}function A(a){try{if(b.events.trigger("image.uploaded",[a],!0)===!1)return b.edit.on(),!1;var c=JSON.parse(a);return c.link?c:(q(Ka,a),!1)}catch(d){return q(Ma,a),!1}}function B(c){try{var d=a(c).find("Location").text(),e=a(c).find("Key").text();return b.events.trigger("image.uploadedToS3",[d,e,c],!0)===!1?(b.edit.on(),!1):d}catch(f){return q(Ma,c),!1}}function C(a){u(b.language.translate("Loading image"));var c=this.status,d=this.response,e=this.responseXML,f=this.responseText;try{if(b.opts.imageUploadToS3)if(201==c){var g=B(e);g&&z(g,!1,[],a,d||e)}else q(Ma,d||e,a);else if(c>=200&&300>c){var h=A(f);h&&z(h.link,!1,h,a,d||f)}else q(La,d||f,a)}catch(i){q(Ma,d||f,a)}}function D(){q(Ma,this.response||this.responseText||this.responseXML)}function E(a){if(a.lengthComputable){var c=a.loaded/a.total*100|0;u(b.language.translate("Uploading"),c)}}function F(c,d,e){var f,g="";if(d&&"undefined"!=typeof d)for(f in d)d.hasOwnProperty(f)&&"link"!=f&&(g+=" data-"+f+'="'+d[f]+'"');var h=b.opts.imageDefaultWidth;h&&"auto"!=h&&(h+=b.opts.imageResizeWithPercent?"%":"px");var i=a('<img src="'+c+'"'+g+(h?' style="width: '+h+';"':"")+">");oa(i,b.opts.imageDefaultDisplay,b.opts.imageDefaultAlign),i.on("load",e),i.on("error",function(){a(this).addClass("fr-error"),q(Qa)}),b.edit.on(),b.events.focus(!0),b.selection.restore(),b.undo.saveStep(),b.opts.imageSplitHTML?b.markers.split():b.markers.insert(),b.html.wrap();var j=b.$el.find(".fr-marker");return j.length?(j.parent().is("hr")&&j.parent().after(j),b.node.isLastSibling(j)&&j.parent().hasClass("fr-deletable")&&j.insertAfter(j.parent()),j.replaceWith(i)):b.$el.append(i),b.selection.clear(),i}function G(){b.edit.on(),t(!0)}function H(c,d,e,f){function g(){var e=a(this);e.off("load"),e.addClass("fr-uploading"),e.next().is("br")&&e.next().remove(),b.placeholder.refresh(),x(e),k(),s(),b.edit.off(),c.onload=function(){C.call(c,e)},c.onerror=D,c.upload.onprogress=E,c.onabort=G,e.off("abortUpload").on("abortUpload",function(){4!=c.readyState&&c.abort()}),c.send(d)}var h,i=new FileReader;i.addEventListener("load",function(){var a=i.result;if(i.result.indexOf("svg+xml")<0){for(var c=atob(i.result.split(",")[1]),d=[],e=0;e<c.length;e++)d.push(c.charCodeAt(e));a=window.URL.createObjectURL(new Blob([new Uint8Array(d)],{type:"image/jpeg"}))}f?(f.on("load",g),f.one("error",function(){f.off("load"),f.attr("src",f.data("fr-old-src")),q(Qa)}),b.edit.on(),b.undo.saveStep(),f.data("fr-old-src",f.attr("src")),f.attr("src",a)):h=F(a,null,g)},!1),i.readAsDataURL(e)}function I(a,c){if("undefined"!=typeof a&&a.length>0){if(b.events.trigger("image.beforeUpload",[a,c])===!1)return!1;var d=a[0];if(d.name||(d.name=(new Date).getTime()+".jpg"),d.size>b.opts.imageMaxSize)return q(Na),!1;if(b.opts.imageAllowedTypes.indexOf(d.type.replace(/image\//g,""))<0)return q(Oa),!1;var e;if(b.drag_support.formdata&&(e=b.drag_support.formdata?new FormData:null),e){var f;if(b.opts.imageUploadToS3!==!1){e.append("key",b.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(d.name||"untitled")),e.append("success_action_status","201"),e.append("X-Requested-With","xhr"),e.append("Content-Type",d.type);for(f in b.opts.imageUploadToS3.params)b.opts.imageUploadToS3.params.hasOwnProperty(f)&&e.append(f,b.opts.imageUploadToS3.params[f])}for(f in b.opts.imageUploadParams)b.opts.imageUploadParams.hasOwnProperty(f)&&e.append(f,b.opts.imageUploadParams[f]);e.append(b.opts.imageUploadParam,d,d.name);var g=b.opts.imageUploadURL;b.opts.imageUploadToS3&&(g=b.opts.imageUploadToS3.uploadURL?b.opts.imageUploadToS3.uploadURL:"https://"+b.opts.imageUploadToS3.region+".amazonaws.com/"+b.opts.imageUploadToS3.bucket);var h=b.core.getXHR(g,b.opts.imageUploadMethod);H(h,e,d,c||Ea)}}}function J(c){b.events.$on(c,"dragover dragenter",".fr-image-upload-layer",function(){return a(this).addClass("fr-drop"),!1},!0),b.events.$on(c,"dragleave dragend",".fr-image-upload-layer",function(){return a(this).removeClass("fr-drop"),!1},!0),b.events.$on(c,"drop",".fr-image-upload-layer",function(d){d.preventDefault(),d.stopPropagation(),a(this).removeClass("fr-drop");var e=d.originalEvent.dataTransfer;if(e&&e.files){var f=c.data("instance")||b;f.events.disableBlur(),f.image.upload(e.files),f.events.enableBlur()}},!0),b.helpers.isIOS()&&b.events.$on(c,"touchstart",'.fr-image-upload-layer input[type="file"]',function(){a(this).trigger("click")},!0),b.events.$on(c,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var d=c.data("instance")||b;d.events.disableBlur(),c.find("input:focus").blur(),d.events.enableBlur(),d.image.upload(this.files,Ea)}a(this).val("")},!0)}function K(a){return a.is("img")&&a.parents(".fr-img-caption").length>0?a.parents(".fr-img-caption"):void 0}function L(c){var d=c.originalEvent.dataTransfer;if(d&&d.files&&d.files.length){var e=d.files[0];if(e&&e.type&&-1!==e.type.indexOf("image")&&b.opts.imageAllowedTypes.indexOf(e.type.replace(/image\//g,""))>=0){if(!b.opts.imageUpload)return c.preventDefault(),c.stopPropagation(),!1;b.markers.remove(),b.markers.insertAtPoint(c.originalEvent),b.$el.find(".fr-marker").replaceWith(a.FE.MARKERS),0===b.$el.find(".fr-marker").length&&b.selection.setAtEnd(b.el),b.popups.hideAll();var f=b.popups.get("image.insert");f||(f=N()),b.popups.setContainer("image.insert",b.$sc);var g=c.originalEvent.pageX,h=c.originalEvent.pageY;return b.opts.iframe&&(h+=b.$iframe.offset().top,g+=b.$iframe.offset().left),b.popups.show("image.insert",g,h),s(),b.opts.imageAllowedTypes.indexOf(e.type.replace(/image\//g,""))>=0?(ka(!0),I(d.files)):q(Oa),c.preventDefault(),c.stopPropagation(),!1}}}function M(){b.events.$on(b.$el,b._mousedown,"IMG"==b.el.tagName?null:'img:not([contenteditable="false"])',function(c){return"false"==a(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable")?!0:(b.helpers.isMobile()||b.selection.clear(),Ia=!0,b.popups.areVisible()&&b.events.disableBlur(),b.browser.msie&&(b.events.disableBlur(),b.$el.attr("contenteditable",!1)),b.draggable||"touchstart"==c.type||c.preventDefault(),void c.stopPropagation())}),b.events.$on(b.$el,b._mouseup,"IMG"==b.el.tagName?null:'img:not([contenteditable="false"])',function(c){return"false"==a(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable")?!0:void(Ia&&(Ia=!1,c.stopPropagation(),b.browser.msie&&(b.$el.attr("contenteditable",!0),b.events.enableBlur())))}),b.events.on("keyup",function(c){if(c.shiftKey&&""===b.selection.text().replace(/\n/g,"")&&b.keys.isArrow(c.which)){var d=b.selection.element(),e=b.selection.endElement();d&&"IMG"==d.tagName?x(a(d)):e&&"IMG"==e.tagName&&x(a(e))}},!0),b.events.on("drop",L),b.events.on("element.beforeDrop",K),b.events.on("mousedown window.mousedown",la),b.events.on("window.touchmove",ma),b.events.on("mouseup window.mouseup",function(){return Ea?(ka(),!1):void ma()}),b.events.on("commands.mousedown",function(a){a.parents(".fr-toolbar").length>0&&ka()}),b.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){Ia=!1,ka(!0)}),b.events.on("modals.hide",function(){Ea&&(xa(),b.selection.clear())})}function N(a){if(a)return b.popups.onRefresh("image.insert",c),b.popups.onHide("image.insert",f),!0;var d,e="";b.opts.imageUpload||b.opts.imageInsertButtons.splice(b.opts.imageInsertButtons.indexOf("imageUpload"),1),b.opts.imageInsertButtons.length>1&&(e='<div class="fr-buttons">'+b.button.buildList(b.opts.imageInsertButtons)+"</div>");var g=b.opts.imageInsertButtons.indexOf("imageUpload"),h=b.opts.imageInsertButtons.indexOf("imageByURL"),i="";g>=0&&(d=" fr-active",h>=0&&g>h&&(d=""),i='<div class="fr-image-upload-layer'+d+' fr-layer" id="fr-image-upload-layer-'+b.id+'"><strong>'+b.language.translate("Drop image")+"</strong><br>("+b.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+b.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+b.id+'" role="button"></div></div>');var j="";h>=0&&(d=" fr-active",g>=0&&h>g&&(d=""),j='<div class="fr-image-by-url-layer'+d+' fr-layer" id="fr-image-by-url-layer-'+b.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+b.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+b.language.translate("Insert")+"</button></div></div>");var k='<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>',l={buttons:e,upload_layer:i,by_url_layer:j,progress_bar:k},m=b.popups.create("image.insert",l);return b.$wp&&b.events.$on(b.$wp,"scroll",function(){Ea&&b.popups.isVisible("image.insert")&&wa()}),J(m),m}function O(){if(Ea){var a=b.popups.get("image.alt");a.find("input").val(Ea.attr("alt")||"").trigger("change")}}function P(){var a=b.popups.get("image.alt");a||(a=Q()),t(),b.popups.refresh("image.alt"),b.popups.setContainer("image.alt",b.$sc);var c=Aa();Ca()&&(c=c.find(".fr-img-wrap"));var d=c.offset().left+c.outerWidth()/2,e=c.offset().top+c.outerHeight();b.popups.show("image.alt",d,e,c.outerHeight())}function Q(a){if(a)return b.popups.onRefresh("image.alt",O),!0;var c="";c='<div class="fr-buttons">'+b.button.buildList(b.opts.imageAltButtons)+"</div>";var d="";d='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+b.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+b.id+'" type="text" placeholder="'+b.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+b.language.translate("Update")+"</button></div></div>";var e={buttons:c,alt_layer:d},f=b.popups.create("image.alt",e);return b.$wp&&b.events.$on(b.$wp,"scroll.image-alt",function(){Ea&&b.popups.isVisible("image.alt")&&P()}),f}function R(a){if(Ea){var c=b.popups.get("image.alt");Ea.attr("alt",a||c.find("input").val()||""),c.find("input:focus").blur(),x(Ea)}}function S(){if(Ea){var a=b.popups.get("image.size");a.find('input[name="width"]').val(Ea.get(0).style.width).trigger("change"),a.find('input[name="height"]').val(Ea.get(0).style.height).trigger("change")}}function T(){var a=b.popups.get("image.size");a||(a=U()),t(),b.popups.refresh("image.size"),b.popups.setContainer("image.size",b.$sc);var c=Aa();Ca()&&(c=c.find(".fr-img-wrap"));var d=c.offset().left+c.outerWidth()/2,e=c.offset().top+c.outerHeight();b.popups.show("image.size",d,e,c.outerHeight())}function U(a){if(a)return b.popups.onRefresh("image.size",S),!0;var c="";c='<div class="fr-buttons">'+b.button.buildList(b.opts.imageSizeButtons)+"</div>";var d="";d='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+b.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+b.id+'" type="text" name="width" placeholder="'+b.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+b.id+'" type="text" name="height" placeholder="'+b.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+b.language.translate("Update")+"</button></div></div>";var e={buttons:c,size_layer:d},f=b.popups.create("image.size",e);return b.$wp&&b.events.$on(b.$wp,"scroll.image-size",function(){Ea&&b.popups.isVisible("image.size")&&T()}),f}function V(a,c){if(Ea){var d=b.popups.get("image.size");a=a||d.find('input[name="width"]').val()||"",c=c||d.find('input[name="height"]').val()||"";
var e=/^[\d]+((px)|%)*$/g;Ea.removeAttr("width").removeAttr("height"),a.match(e)?Ea.css("width",a):Ea.css("width",""),c.match(e)?Ea.css("height",c):Ea.css("height",""),Ca()&&(Ea.parent().removeAttr("width").removeAttr("height"),a.match(e)?Ea.parent().css("width",a):Ea.parent().css("width",""),c.match(e)?Ea.parent().css("height",c):Ea.parent().css("height","")),d.find("input:focus").blur(),x(Ea)}}function W(a){var c,d,e=b.popups.get("image.insert");if(Ea||b.opts.toolbarInline){if(Ea){var f=Aa();Ca()&&(f=f.find(".fr-img-wrap")),d=f.offset().top+f.outerHeight(),c=f.offset().left+f.outerWidth()/2}}else{var g=b.$tb.find('.fr-command[data-cmd="insertImage"]');c=g.offset().left+g.outerWidth()/2,d=g.offset().top+(b.opts.toolbarBottom?10:g.outerHeight()-10)}!Ea&&b.opts.toolbarInline&&(d=e.offset().top-b.helpers.getPX(e.css("margin-top")),e.hasClass("fr-above")&&(d+=e.outerHeight())),e.find(".fr-layer").removeClass("fr-active"),e.find(".fr-"+a+"-layer").addClass("fr-active"),b.popups.show("image.insert",c,d,Ea?Ea.outerHeight():0),b.accessibility.focusPopup(e)}function X(a){var c=b.popups.get("image.insert");c.find(".fr-image-upload-layer").hasClass("fr-active")&&a.addClass("fr-active").attr("aria-pressed",!0)}function Y(a){var c=b.popups.get("image.insert");c.find(".fr-image-by-url-layer").hasClass("fr-active")&&a.addClass("fr-active").attr("aria-pressed",!0)}function Z(a,b,c,d){return a.pageX=b,n.call(this,a),a.pageX=a.pageX+c*Math.floor(Math.pow(1.1,d)),o.call(this,a),p.call(this,a),++d}function $(){var c;if(b.shared.$image_resizer?(Fa=b.shared.$image_resizer,Ha=b.shared.$img_overlay,b.events.on("destroy",function(){Fa.removeClass("fr-active").appendTo(a("body:first"))},!0)):(b.shared.$image_resizer=a('<div class="fr-image-resizer"></div>'),Fa=b.shared.$image_resizer,b.events.$on(Fa,"mousedown",function(a){a.stopPropagation()},!0),b.opts.imageResize&&(Fa.append(l("nw")+l("ne")+l("sw")+l("se")),b.shared.$img_overlay=a('<div class="fr-image-overlay"></div>'),Ha=b.shared.$img_overlay,c=Fa.get(0).ownerDocument,a(c).find("body:first").append(Ha))),b.events.on("shared.destroy",function(){Fa.html("").removeData().remove(),Fa=null,b.opts.imageResize&&(Ha.remove(),Ha=null)},!0),b.helpers.isMobile()||b.events.$on(a(b.o_win),"resize",function(){Ea&&!Ea.hasClass("fr-uploading")?ka(!0):Ea&&(k(),wa(),s(!1))}),b.opts.imageResize){c=Fa.get(0).ownerDocument,b.events.$on(Fa,b._mousedown,".fr-handler",n),b.events.$on(a(c),b._mousemove,o),b.events.$on(a(c.defaultView||c.parentWindow),b._mouseup,p),b.events.$on(Ha,"mouseleave",p);var d=1,e=null,f=0;b.events.on("keydown",function(c){if(Ea){var g=-1!=navigator.userAgent.indexOf("Mac OS X")?c.metaKey:c.ctrlKey,h=c.which;(h!==e||c.timeStamp-f>200)&&(d=1),(h==a.FE.KEYCODE.EQUALS||b.browser.mozilla&&h==a.FE.KEYCODE.FF_EQUALS)&&g&&!c.altKey?d=Z.call(this,c,1,1,d):(h==a.FE.KEYCODE.HYPHEN||b.browser.mozilla&&h==a.FE.KEYCODE.FF_HYPHEN)&&g&&!c.altKey?d=Z.call(this,c,2,-1,d):b.keys.ctrlKey(c)||h!=a.FE.KEYCODE.ENTER||(Ea.before("<br>"),x(Ea)),e=h,f=c.timeStamp}},!0),b.events.on("keyup",function(){d=1})}}function _(c){c=c||Aa(),c&&b.events.trigger("image.beforeRemove",[c])!==!1&&(b.popups.hideAll(),xa(),ka(!0),b.undo.canDo()||b.undo.saveStep(),c.get(0)==b.el?c.removeAttr("src"):("A"==c.get(0).parentNode.tagName?(b.selection.setBefore(c.get(0).parentNode)||b.selection.setAfter(c.get(0).parentNode)||c.parent().after(a.FE.MARKERS),a(c.get(0).parentNode).remove()):(b.selection.setBefore(c.get(0))||b.selection.setAfter(c.get(0))||c.after(a.FE.MARKERS),c.remove()),b.html.fillEmptyBlocks(),b.selection.restore()),b.undo.saveStep())}function aa(c){var d=c.which;if(Ea&&(d==a.FE.KEYCODE.BACKSPACE||d==a.FE.KEYCODE.DELETE))return c.preventDefault(),c.stopPropagation(),_(),!1;if(Ea&&d==a.FE.KEYCODE.ESC){var e=Ea;return ka(!0),b.selection.setAfter(e.get(0)),b.selection.restore(),c.preventDefault(),!1}if(Ea&&(d==a.FE.KEYCODE.ARROW_LEFT||d==a.FE.KEYCODE.ARROW_RIGHT)){var f=Ea.get(0);return ka(!0),d==a.FE.KEYCODE.ARROW_LEFT?b.selection.setBefore(f):b.selection.setAfter(f),b.selection.restore(),c.preventDefault(),!1}return Ea&&d!=a.FE.KEYCODE.F10&&!b.keys.isBrowserAction(c)?(c.preventDefault(),c.stopPropagation(),!1):void 0}function ba(a){if(a&&"IMG"==a.tagName){if(b.node.hasClass(a,"fr-uploading")||b.node.hasClass(a,"fr-error")?a.parentNode.removeChild(a):b.node.hasClass(a,"fr-draggable")&&a.classList.remove("fr-draggable"),a.parentNode&&a.parentNode.parentNode&&b.node.hasClass(a.parentNode.parentNode,"fr-img-caption")){var c=a.parentNode.parentNode;c.removeAttribute("contenteditable"),c.removeAttribute("draggable"),c.classList.remove("fr-draggable");var d=a.nextSibling;d&&d.removeAttribute("contenteditable")}}else if(a&&a.nodeType==Node.ELEMENT_NODE)for(var e=a.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),f=0;f<e.length;f++)ba(e[f])}function ca(){if(M(),"IMG"==b.el.tagName&&b.$el.addClass("fr-view"),b.events.$on(b.$el,b.helpers.isMobile()&&!b.helpers.isWindowsPhone()?"touchend":"click","IMG"==b.el.tagName?null:'img:not([contenteditable="false"])',ja),b.helpers.isMobile()&&(b.events.$on(b.$el,"touchstart","IMG"==b.el.tagName?null:'img:not([contenteditable="false"])',function(){Ta=!1}),b.events.$on(b.$el,"touchmove",function(){Ta=!0})),b.$wp?(b.events.on("window.keydown keydown",aa,!0),b.events.on("keyup",function(b){return Ea&&b.which==a.FE.KEYCODE.ENTER?!1:void 0},!0)):b.events.$on(b.$win,"keydown",aa),b.events.on("toolbar.esc",function(){if(Ea){if(b.$wp)b.events.disableBlur(),b.events.focus();else{var a=Ea;ka(!0),b.selection.setAfter(a.get(0)),b.selection.restore()}return!1}},!0),b.events.on("toolbar.focusEditor",function(){return Ea?!1:void 0},!0),b.events.on("window.cut window.copy",function(c){if(Ea&&b.popups.isVisible("image.edit")&&!b.popups.get("image.edit").find(":focus").length){var d=Aa();Ca()?(d.before(a.FE.START_MARKER),d.after(a.FE.END_MARKER),b.selection.restore(),b.paste.saveCopiedText(d.get(0).outerHTML,d.text())):(xa(),b.paste.saveCopiedText(Ea.get(0).outerHTML,Ea.attr("alt"))),"copy"==c.type?setTimeout(function(){x(Ea)}):(ka(!0),b.undo.saveStep(),setTimeout(function(){b.undo.saveStep()},0))}},!0),b.browser.msie&&b.events.on("keydown",function(c){if(!b.selection.isCollapsed()||!Ea)return!0;var d=c.which;d==a.FE.KEYCODE.C&&b.keys.ctrlKey(c)?b.events.trigger("window.copy"):d==a.FE.KEYCODE.X&&b.keys.ctrlKey(c)&&b.events.trigger("window.cut")}),b.events.$on(a(b.o_win),"keydown",function(b){var c=b.which;return Ea&&c==a.FE.KEYCODE.BACKSPACE?(b.preventDefault(),!1):void 0}),b.events.$on(b.$win,"keydown",function(b){var c=b.which;Ea&&Ea.hasClass("fr-uploading")&&c==a.FE.KEYCODE.ESC&&Ea.trigger("abortUpload")}),b.events.on("destroy",function(){Ea&&Ea.hasClass("fr-uploading")&&Ea.trigger("abortUpload")}),b.events.on("paste.before",ha),b.events.on("paste.beforeCleanup",ia),b.events.on("paste.after",ea),b.events.on("html.set",i),b.events.on("html.inserted",i),i(),b.events.on("destroy",function(){Sa=[]}),b.events.on("html.processGet",ba),b.opts.imageOutputSize){var c;b.events.on("html.beforeGet",function(){c=b.el.querySelectorAll("img");for(var d=0;d<c.length;d++){var e=c[d].style.width||a(c[d]).width(),f=c[d].style.height||a(c[d]).height();e&&c[d].setAttribute("width",(""+e).replace(/px/,"")),f&&c[d].setAttribute("height",(""+f).replace(/px/,""))}})}b.opts.iframe&&b.events.on("image.loaded",b.size.syncIframe),b.$wp&&(j(),b.events.on("contentChanged",j)),b.events.$on(a(b.o_win),"orientationchange.image",function(){setTimeout(function(){Ea&&x(Ea)},100)}),r(!0),N(!0),U(!0),Q(!0),b.events.on("node.remove",function(a){return"IMG"==a.get(0).tagName?(_(a),!1):void 0})}function da(c){if(b.events.trigger("image.beforePasteUpload",[c])===!1)return!1;Ea=a(c),k(),e(),wa(),s();for(var d=atob(a(c).attr("src").split(",")[1]),f=[],g=0;g<d.length;g++)f.push(d.charCodeAt(g));var h=new Blob([new Uint8Array(f)],{type:"image/jpeg"});I([h],Ea)}function ea(){b.opts.imagePaste?b.$el.find("img[data-fr-image-pasted]").each(function(c,d){if(b.opts.imagePasteProcess){var e=b.opts.imageDefaultWidth;e&&"auto"!=e&&(e+=b.opts.imageResizeWithPercent?"%":"px"),a(d).css("width",e).removeClass("fr-dii fr-dib fr-fir fr-fil"),oa(a(d),b.opts.imageDefaultDisplay,b.opts.imageDefaultAlign)}if(0===d.src.indexOf("data:"))da(d);else if(0===d.src.indexOf("blob:")||0===d.src.indexOf("http")&&b.opts.imageUploadRemoteUrls&&b.opts.imageCORSProxy){var f=new Image;f.crossOrigin="Anonymous",f.onload=function(){var a=b.o_doc.createElement("CANVAS"),c=a.getContext("2d");a.height=this.naturalHeight,a.width=this.naturalWidth,c.drawImage(this,0,0),d.src=a.toDataURL("image/png"),da(d)},f.src=(0===d.src.indexOf("blob:")?"":b.opts.imageCORSProxy+"/")+d.src}else 0!==d.src.indexOf("http")||0===d.src.indexOf("https://mail.google.com/mail")?(b.selection.save(),a(d).remove(),b.selection.restore()):a(d).removeAttr("data-fr-image-pasted")}):b.$el.find("img[data-fr-image-pasted]").remove()}function fa(a){var c=a.target.result,d=b.opts.imageDefaultWidth;d&&"auto"!=d&&(d+=b.opts.imageResizeWithPercent?"%":"px"),b.undo.saveStep(),b.html.insert('<img data-fr-image-pasted="true" src="'+c+'"'+(d?' style="width: '+d+';"':"")+">");var e=b.$el.find('img[data-fr-image-pasted="true"]');e&&oa(e,b.opts.imageDefaultDisplay,b.opts.imageDefaultAlign),b.events.trigger("paste.after")}function ga(a){var b=new FileReader;b.onload=fa,b.readAsDataURL(a)}function ha(a){if(a&&a.clipboardData&&a.clipboardData.items){var b=null;if(a.clipboardData.getData("text/rtf"))b=a.clipboardData.items[0].getAsFile();else for(var c=0;c<a.clipboardData.items.length&&!(b=a.clipboardData.items[c].getAsFile());c++);if(b)return ga(b),!1}}function ia(a){return a=a.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ja(c){if("false"==a(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(c&&"touchend"==c.type&&Ta)return!0;if(c&&b.edit.isDisabled())return c.stopPropagation(),c.preventDefault(),!1;for(var d=0;d<a.FE.INSTANCES.length;d++)a.FE.INSTANCES[d]!=b&&a.FE.INSTANCES[d].events.trigger("image.hideResizer");b.toolbar.disable(),c&&(c.stopPropagation(),c.preventDefault()),b.helpers.isMobile()&&(b.events.disableBlur(),b.$el.blur(),b.events.enableBlur()),b.opts.iframe&&b.size.syncIframe(),Ea=a(this),b.browser.msie||xa(),k(),e(),b.browser.msie||b.selection.clear(),b.helpers.isIOS()&&(b.events.disableBlur(),b.$el.blur()),b.button.bulkRefresh(),b.events.trigger("video.hideResizer")}function ka(a){Ea&&(na()||a===!0)&&(b.toolbar.enable(),Fa.removeClass("fr-active"),b.popups.hide("image.edit"),Ea=null,ma(),Ga=null,Ha&&Ha.hide())}function la(){Ua=!0}function ma(){Ua=!1}function na(){return Ua}function oa(a,c,d){!b.opts.htmlUntouched&&b.opts.useClasses?(a.removeClass("fr-fil fr-fir fr-dib fr-dii"),d&&a.addClass("fr-fi"+d[0]),c&&a.addClass("fr-di"+c[0])):"inline"==c?(a.css({display:"inline-block",verticalAlign:"bottom",margin:b.opts.imageDefaultMargin}),"center"==d?a.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*b.opts.imageDefaultMargin+"px)",textAlign:"center"}):"left"==d?a.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+b.opts.imageDefaultMargin+"px)",textAlign:"left"}):a.css({"float":"right",marginRight:0,maxWidth:"calc(100% - "+b.opts.imageDefaultMargin+"px)",textAlign:"right"})):"block"==c&&(a.css({display:"block","float":"none",verticalAlign:"top",margin:b.opts.imageDefaultMargin+"px auto",textAlign:"center"}),"left"==d?a.css({marginLeft:0,textAlign:"left"}):"right"==d&&a.css({marginRight:0,textAlign:"right"}))}function pa(a){var c=Aa();c.removeClass("fr-fir fr-fil"),!b.opts.htmlUntouched&&b.opts.useClasses?"left"==a?c.addClass("fr-fil"):"right"==a&&c.addClass("fr-fir"):oa(c,ra(),a),xa(),k(),e(),b.selection.clear()}function qa(a){if("undefined"==typeof a&&(a=Aa()),a){if(a.hasClass("fr-fil"))return"left";if(a.hasClass("fr-fir"))return"right";if(a.hasClass("fr-dib")||a.hasClass("fr-dii"))return"center";var b=a.css("float");if(a.css("float","none"),"block"==a.css("display")){if(a.css("float",""),a.css("float")!=b&&a.css("float",b),0===parseInt(a.css("margin-left"),10))return"left";if(0===parseInt(a.css("margin-right"),10))return"right"}else{if(a.css("float",""),a.css("float")!=b&&a.css("float",b),"left"==a.css("float"))return"left";if("right"==a.css("float"))return"right"}}return"center"}function ra(a){"undefined"==typeof a&&(a=Aa());var b=a.css("float");return a.css("float","none"),"block"==a.css("display")?(a.css("float",""),a.css("float")!=b&&a.css("float",b),"block"):(a.css("float",""),a.css("float")!=b&&a.css("float",b),"inline")}function sa(a){Ea&&a.find("> *:first").replaceWith(b.icon.create("image-align-"+qa()))}function ta(a,b){Ea&&b.find('.fr-command[data-param1="'+qa()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ua(a){var c=Aa();c.removeClass("fr-dii fr-dib"),!b.opts.htmlUntouched&&b.opts.useClasses?"inline"==a?c.addClass("fr-dii"):"block"==a&&c.addClass("fr-dib"):oa(c,a,qa()),xa(),k(),e(),b.selection.clear()}function va(a,b){Ea&&b.find('.fr-command[data-param1="'+ra()+'"]').addClass("fr-active").attr("aria-selected",!0)}function wa(){var a=b.popups.get("image.insert");a||(a=N()),b.popups.isVisible("image.insert")||(t(),b.popups.refresh("image.insert"),b.popups.setContainer("image.insert",b.$sc));var c=Aa();Ca()&&(c=c.find(".fr-img-wrap"));var d=c.offset().left+c.outerWidth()/2,e=c.offset().top+c.outerHeight();b.popups.show("image.insert",d,e,c.outerHeight(!0))}function xa(){if(Ea){b.events.disableBlur(),b.selection.clear();var a=b.doc.createRange();a.selectNode(Ea.get(0));var c=b.selection.get();c.addRange(a),b.events.enableBlur()}}function ya(){Ea?(b.events.disableBlur(),a(".fr-popup input:focus").blur(),x(Ea)):(b.events.disableBlur(),b.selection.restore(),b.events.enableBlur(),b.popups.hide("image.insert"),b.toolbar.showInline())}function za(){return Ea}function Aa(){return Ca()?Ea.parents(".fr-img-caption:first"):Ea}function Ba(a,c,d){if("undefined"==typeof c&&(c=b.opts.imageStyles),"undefined"==typeof d&&(d=b.opts.imageMultipleStyles),!Ea)return!1;var e=Aa();if(!d){var f=Object.keys(c);f.splice(f.indexOf(a),1),e.removeClass(f.join(" "))}"object"==typeof c[a]?(e.removeAttr("style"),e.css(c[a].style)):e.toggleClass(a),x(Ea)}function Ca(){return Ea?Ea.parents(".fr-img-caption").length>0:!1}function Da(){var c;Ea&&!Ca()?(c=Ea,Ea.parent().is("a")&&(c=Ea.parent()),c.wrap("<span "+(b.browser.mozilla?"":'contenteditable="false"')+'class="fr-img-caption '+Ea.attr("class")+'" style="'+(Ea.attr("style")?Ea.attr("style")+" ":"")+"width: "+Ea.width()+'px;" draggable="false"></span>'),c.wrap('<span class="fr-img-wrap"></span>'),c.after('<span class="fr-inner" contenteditable="true">'+a.FE.START_MARKER+"Image caption"+a.FE.END_MARKER+"</span>"),Ea.removeAttr("class").removeAttr("style").removeAttr("width"),ka(!0),b.selection.restore()):(c=Aa(),Ea.insertAfter(c),Ea.attr("class",c.attr("class").replace("fr-img-caption","")).attr("style",c.attr("style")),c.remove(),x(Ea))}var Ea,Fa,Ga,Ha,Ia=!1,Ja=1,Ka=2,La=3,Ma=4,Na=5,Oa=6,Pa=7,Qa=8,Ra={};Ra[Ja]="Image cannot be loaded from the passed link.",Ra[Ka]="No link in upload response.",Ra[La]="Error during file upload.",Ra[Ma]="Parsing response failed.",Ra[Na]="File is too large.",Ra[Oa]="Image file type is invalid.",Ra[Pa]="Files can be uploaded only to same domain in IE 8 and IE 9.",Ra[Qa]="Image file is corrupted.";var Sa,Ta,Ua=!1;return{_init:ca,showInsertPopup:d,showLayer:W,refreshUploadButton:X,refreshByURLButton:Y,upload:I,insertByURL:w,align:pa,refreshAlign:sa,refreshAlignOnShow:ta,display:ua,refreshDisplayOnShow:va,replace:wa,back:ya,get:za,getEl:Aa,insert:z,showProgressBar:s,remove:_,hideProgressBar:t,applyStyle:Ba,showAltPopup:P,showSizePopup:T,setAlt:R,setSize:V,toggleCaption:Da,hasCaption:Ca,exitEdit:ka,edit:x}},a.FE.DefineIcon("insertImage",{NAME:"image"}),a.FE.RegisterShortcut(a.FE.KEYCODE.P,"insertImage",null,"P"),a.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),a.FE.DefineIcon("imageUpload",{NAME:"upload"}),a.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(a){this.image.refreshUploadButton(a)}}),a.FE.DefineIcon("imageByURL",{NAME:"link"}),a.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(a){this.image.refreshByURLButton(a)}}),a.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(a){var b=this.image.get();b?a.text(this.language.translate("Replace")):a.text(this.language.translate("Insert"))}}),a.FE.DefineIcon("imageDisplay",{NAME:"star"}),a.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(a,b){this.image.display(b)},refresh:function(a){this.opts.imageTextNear||a.addClass("fr-hidden")},refreshOnShow:function(a,b){this.image.refreshDisplayOnShow(a,b)}}),a.FE.DefineIcon("image-align",{NAME:"align-left"}),a.FE.DefineIcon("image-align-left",{NAME:"align-left"}),a.FE.DefineIcon("image-align-right",{NAME:"align-right"}),a.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),a.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),a.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.imageAlign.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+d+'" title="'+this.language.translate(c[d])+'">'+this.icon.create("image-align-"+d)+'<span class="fr-sr-only">'+this.language.translate(c[d])+"</span></a></li>");return b+="</ul>"},callback:function(a,b){this.image.align(b)},refresh:function(a){this.image.refreshAlign(a)},refreshOnShow:function(a,b){this.image.refreshAlignOnShow(a,b)}}),a.FE.DefineIcon("imageReplace",{NAME:"exchange",FA5NAME:"exchange-alt"}),a.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),a.FE.DefineIcon("imageRemove",{NAME:"trash"}),a.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),a.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(a){var b=this.image.get();b||this.opts.toolbarInline?(a.removeClass("fr-hidden"),a.next(".fr-separator").removeClass("fr-hidden")):(a.addClass("fr-hidden"),a.next(".fr-separator").addClass("fr-hidden"))}}),a.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),a.FE.DefineIcon("imageStyle",{NAME:"magic"}),a.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.imageStyles;for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];"object"==typeof d&&(d=d.title),a+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+c+'">'+this.language.translate(d)+"</a></li>"}return a+="</ul>"},callback:function(a,b){this.image.applyStyle(b)},refreshOnShow:function(b,c){var d=this.image.getEl();d&&c.find(".fr-command").each(function(){var b=a(this).data("param1"),c=d.hasClass(b);a(this).toggleClass("fr-active",c).attr("aria-selected",c)})}}),a.FE.DefineIcon("imageAlt",{NAME:"info"}),a.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),a.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),a.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),a.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),a.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),a.FE.DefineIcon("imageCaption",{NAME:"commenting",FA5NAME:"comment-alt"}),a.FE.RegisterCommand("imageCaption",{undo:!0,focus:!1,title:"Image Caption",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(a){this.image.get()&&a.toggleClass("fr-active",this.image.hasCaption())}}),a.extend(a.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:null,imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),a.FE.PLUGINS.imageManager=function(b){function c(){if(!z){var a='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+b.sid+'" title="'+b.language.translate("Tags")+'"></i><h4 data-text="true">'+b.language.translate("Manage Images")+"</h4></div>";a+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var c;c=b.opts.imageManagerPreloader?'<img class="fr-preloader" id="fr-preloader" alt="'+b.language.translate("Loading")+'.." src="'+b.opts.imageManagerPreloader+'" style="display: none;">':'<span class="fr-preloader" id="fr-preloader" style="display: none;">'+b.language.translate("Loading")+"</span>",c+='<div class="fr-image-list" id="fr-image-list"></div>';var d=b.modals.create(K,a,c);z=d.$modal,A=d.$head,B=d.$body}z.data("current-image",b.image.get()),b.modals.show(K),C||x(),g()}function d(){b.modals.hide(K)}function e(){var b=a(window).outerWidth();return 768>b?2:1200>b?3:4}function f(){D.empty();for(var a=0;J>a;a++)D.append('<div class="fr-list-column"></div>')}function g(){C.show(),D.find(".fr-list-column").empty(),b.opts.imageManagerLoadURL?a.ajax({url:b.opts.imageManagerLoadURL,method:b.opts.imageManagerLoadMethod,data:b.opts.imageManagerLoadParams,dataType:"json",crossDomain:b.opts.requestWithCORS,xhrFields:{withCredentials:b.opts.requestWithCredentials},headers:b.opts.requestHeaders}).done(function(a,c,d){b.events.trigger("imageManager.imagesLoaded",[a]),h(a,d.response),C.hide()}).fail(function(){var a=this.xhr();s(M,a.response||a.responseText)}):s(N)}function h(a,b){try{D.find(".fr-list-column").empty(),G=0,H=0,I=0,F=a,i()}catch(c){s(O,b)}}function i(){if(H<F.length&&(D.outerHeight()<=B.outerHeight()+b.opts.imageManagerScrollOffset||B.scrollTop()+b.opts.imageManagerScrollOffset>D.outerHeight()-B.outerHeight())){G++;for(var a=b.opts.imageManagerPageSize*(G-1);a<Math.min(F.length,b.opts.imageManagerPageSize*G);a++)j(F[a])}}function j(c){var d=new Image,e=a('<div class="fr-image-container fr-empty fr-image-'+I++ +'" data-loading="'+b.language.translate("Loading")+'.." data-deleting="'+b.language.translate("Deleting")+'..">');n(!1),d.onload=function(){e.height(Math.floor(e.width()/d.width*d.height));var f=a("<img/>");if(c.thumb)f.attr("src",c.thumb);else{if(s(P,c),!c.url)return s(Q,c),!1;f.attr("src",c.url)}if(c.url&&f.attr("data-url",c.url),c.tag)if(A.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),A.find(".fr-modal-tags").show(),c.tag.indexOf(",")>=0){for(var g=c.tag.split(","),h=0;h<g.length;h++)g[h]=g[h].trim(),0===E.find('a[title="'+g[h]+'"]').length&&E.append('<a role="button" title="'+g[h]+'">'+g[h]+"</a>");f.attr("data-tag",g.join())}else 0===E.find('a[title="'+c.tag.trim()+'"]').length&&E.append('<a role="button" title="'+c.tag.trim()+'">'+c.tag.trim()+"</a>"),f.attr("data-tag",c.tag.trim());c.name&&f.attr("alt",c.name);for(var j in c)c.hasOwnProperty(j)&&"thumb"!=j&&"url"!=j&&"tag"!=j&&f.attr("data-"+j,c[j]);e.append(f).append(a(b.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",b.language.translate("Delete"))).append(a(b.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",b.language.translate("Insert"))),E.find(".fr-selected-tag").each(function(a,b){w(f,b.text)||e.hide()}),f.on("load",function(){e.removeClass("fr-empty"),e.height("auto"),H++;var a=l(parseInt(f.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);m(a),n(!1),H%b.opts.imageManagerPageSize===0&&i()}),b.events.trigger("imageManager.imageLoaded",[f])},d.onerror=function(){H++,e.remove();var a=l(parseInt(e.attr("class").match(/fr-image-(\d+)/)[1],10)+1);m(a),s(L,c),H%b.opts.imageManagerPageSize===0&&i()},d.src=c.thumb||c.url,k().append(e)}function k(){var b,c;return D.find(".fr-list-column").each(function(d,e){var f=a(e);0===d?(c=f.outerHeight(),b=f):f.outerHeight()<c&&(c=f.outerHeight(),b=f)}),b}function l(b){void 0===b&&(b=0);for(var c=[],d=I-1;d>=b;d--){var e=D.find(".fr-image-"+d);e.length&&(c.push(e),a('<div id="fr-image-hidden-container">').append(e),D.find(".fr-image-"+d).remove())}return c}function m(a){for(var b=a.length-1;b>=0;b--)k().append(a[b])}function n(a){if(void 0===a&&(a=!0),!z.is(":visible"))return!0;var c=e();if(c!=J){J=c;var d=l();f(),m(d)}b.modals.resize(K),a&&i()}function o(a){var b={},c=a.data();for(var d in c)c.hasOwnProperty(d)&&"url"!=d&&"tag"!=d&&(b[d]=c[d]);return b}function p(c){var d=a(c.currentTarget).siblings("img"),e=z.data("instance")||b,f=z.data("current-image");if(b.modals.hide(K),e.image.showProgressBar(),f)f.data("fr-old-src",f.attr("src")),f.trigger("click");else{e.events.focus(!0),e.selection.restore();var g=e.position.getBoundingRect(),h=g.left+g.width/2+a(b.doc).scrollLeft(),i=g.top+g.height+a(b.doc).scrollTop();e.popups.setContainer("image.insert",b.$sc),e.popups.show("image.insert",h,i)}e.image.insert(d.data("url"),!1,o(d),f)}function q(){z.find("#fr-modal-tags > a").each(function(){0===z.find('#fr-image-list [data-tag*="'+a(this).text()+'"]').length&&a(this).removeClass("fr-selected-tag").hide()}),u()}function r(c){var d=a(c.currentTarget).siblings("img"),e=b.language.translate("Are you sure? Image will be deleted.");confirm(e)&&(b.opts.imageManagerDeleteURL?b.events.trigger("imageManager.beforeDeleteImage",[d])!==!1&&(d.parent().addClass("fr-image-deleting"),a.ajax({method:b.opts.imageManagerDeleteMethod,url:b.opts.imageManagerDeleteURL,data:a.extend(a.extend({src:d.attr("src")},o(d)),b.opts.imageManagerDeleteParams),crossDomain:b.opts.requestWithCORS,xhrFields:{withCredentials:b.opts.requestWithCredentials},headers:b.opts.requestHeaders}).done(function(a){b.events.trigger("imageManager.imageDeleted",[a]);var c=l(parseInt(d.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);d.parent().remove(),m(c),q(),n(!0)}).fail(function(a){s(R,a.response||a.responseText)})):s(S))}function s(c,d){c>=10&&20>c?C.hide():c>=20&&30>c&&a(".fr-image-deleting").removeClass("fr-image-deleting"),b.events.trigger("imageManager.error",[{code:c,message:T[c]},d])}function t(){var a=A.find(".fr-modal-head-line").outerHeight(),b=E.outerHeight();A.toggleClass("fr-show-tags"),A.hasClass("fr-show-tags")?(A.css("height",a+b),E.find("a").css("opacity",1)):(A.css("height",a),E.find("a").css("opacity",0))}function u(){var b=E.find(".fr-selected-tag");b.length>0?(D.find("img").parent().show(),b.each(function(b,c){D.find("img").each(function(b,d){var e=a(d);w(e,c.text)||e.parent().hide()})})):D.find("img").parent().show();var c=l();m(c),i()}function v(c){c.preventDefault();var d=a(c.currentTarget);d.toggleClass("fr-selected-tag"),b.opts.imageManagerToggleTags&&d.siblings("a").removeClass("fr-selected-tag"),u()}function w(a,b){for(var c=(a.attr("data-tag")||"").split(","),d=0;d<c.length;d++)if(c[d]==b)return!0;return!1}function x(){C=z.find("#fr-preloader"),D=z.find("#fr-image-list"),E=z.find("#fr-modal-tags"),J=e(),f(),A.css("height",A.find(".fr-modal-head-line").outerHeight()),b.events.$on(a(b.o_win),"resize",function(){n(F?!0:!1)}),b.helpers.isMobile()&&(b.events.bindClick(D,"div.fr-image-container",function(b){z.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),a(b.currentTarget).addClass("fr-mobile-selected")}),z.on(b._mousedown,function(){z.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),b.events.bindClick(D,".fr-insert-img",p),b.events.bindClick(D,".fr-delete-img",r),z.on(b._mousedown+" "+b._mouseup,function(a){a.stopPropagation()}),z.on(b._mousedown,"*",function(){b.events.disableBlur()}),B.on("scroll",i),b.events.bindClick(z,"i#fr-modal-more-"+b.sid,t),b.events.bindClick(E,"a",v)}function y(){return b.$wp||"IMG"==b.el.tagName?void 0:!1}var z,A,B,C,D,E,F,G,H,I,J,K="image_manager",L=10,M=11,N=12,O=13,P=14,Q=15,R=21,S=22,T={};return T[L]="Image cannot be loaded from the passed link.",T[M]="Error during load images request.",T[N]="Missing imageManagerLoadURL option.",T[O]="Parsing load response failed.",T[P]="Missing image thumb.",T[Q]="Missing image URL.",T[R]="Error during delete image request.",T[S]="Missing imageManagerDeleteURL option.",{require:["image"],_init:y,show:c,hide:d}},!a.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");a.FE.DEFAULTS.imageInsertButtons.push("imageManager"),a.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),a.FE.DefineIcon("imageManager",{NAME:"folder"}),a.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),a.FE.DefineIcon("imageManagerDelete",{NAME:"trash"}),a.extend(a.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),a.FE.PLUGINS.inlineStyle=function(b){function c(c){""!==b.selection.text()?b.html.insert(a.FE.START_MARKER+'<span style="'+c+'">'+b.selection.text()+"</span>"+a.FE.END_MARKER):b.html.insert('<span style="'+c+'">'+a.FE.INVISIBLE_SPACE+a.FE.MARKERS+"</span>")}return{apply:c}},a.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.inlineStyles;for(var c in b)b.hasOwnProperty(c)&&(a+='<li role="presentation"><span style="'+b[c]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+b[c]+'" title="'+this.language.translate(c)+'">'+this.language.translate(c)+"</a></span></li>");return a+="</ul>"},title:"Inline Style",callback:function(a,b){this.inlineStyle.apply(b)},plugin:"inlineStyle"}),a.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"}),a.extend(a.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video",".fr-embedly"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),a.FE.PLUGINS.lineBreaker=function(b){function c(c,d){var e,f,g,h,i,j,k,l;if(null==c)h=d.parent(),i=h.offset().top,k=d.offset().top,e=k-Math.min((k-i)/2,b.opts.lineBreakerOffset),g=h.outerWidth(),f=h.offset().left;else if(null==d)h=c.parent(),j=h.offset().top+h.outerHeight(),l=c.offset().top+c.outerHeight(),l>j&&(h=a(h).parent(),j=h.offset().top+h.outerHeight()),e=l+Math.min(Math.abs(j-l)/2,b.opts.lineBreakerOffset),g=h.outerWidth(),f=h.offset().left;else{h=c.parent();var m=c.offset().top+c.height(),n=d.offset().top;if(m>n)return!1;e=(m+n)/2,g=h.outerWidth(),f=h.offset().left}b.opts.iframe&&(f+=b.$iframe.offset().left-b.helpers.scrollLeft(),e+=b.$iframe.offset().top-b.helpers.scrollTop()),b.$box.append(r),r.css("top",e-b.win.pageYOffset),r.css("left",f-b.win.pageXOffset),r.css("width",g),r.data("tag1",c),r.data("tag2",d),r.addClass("fr-visible").data("instance",b)}function d(a,d){var f,g,h=a.offset().top,i=a.offset().top+a.outerHeight();if(Math.abs(i-d)<=b.opts.lineBreakerOffset||Math.abs(d-h)<=b.opts.lineBreakerOffset)if(Math.abs(i-d)<Math.abs(d-h)){g=a.get(0);for(var j=g.nextSibling;j&&j.nodeType==Node.TEXT_NODE&&0===j.textContent.length;)j=j.nextSibling;
if(!j)return c(a,null),!0;if(f=e(j))return c(a,f),!0}else{if(g=a.get(0),!g.previousSibling)return c(null,a),!0;if(f=e(g.previousSibling))return c(f,a),!0}r.removeClass("fr-visible").removeData("instance")}function e(c){if(c){var d=a(c);if(0===b.$el.find(d).length)return null;if(c.nodeType!=Node.TEXT_NODE&&d.is(b.opts.lineBreakerTags.join(",")))return d;if(d.parents(b.opts.lineBreakerTags.join(",")).length>0)return c=d.parents(b.opts.lineBreakerTags.join(",")).get(0),0!==b.$el.find(c).length&&a(c).is(b.opts.lineBreakerTags.join(","))?a(c):null}return null}function f(a){if("undefined"!=typeof a.inFroalaWrapper)return a.inFroalaWrapper;for(var c=a;a.parentNode&&a.parentNode!==b.$wp.get(0);)a=a.parentNode;return c.inFroalaWrapper=a.parentNode==b.$wp.get(0),c.inFroalaWrapper}function g(a,c){var d=b.doc.elementFromPoint(a,c);return d&&!d.closest(".fr-line-breaker")&&!b.node.isElement(d)&&d!=b.$wp.get(0)&&f(d)?d:null}function h(a,c,d){for(var e=d,f=null;e<=b.opts.lineBreakerOffset&&!f;)f=g(a,c-e),f||(f=g(a,c+e)),e+=d;return f}function i(a,c,d){for(var e=null,f=100;!e&&a>b.$box.offset().left&&a<b.$box.offset().left+b.$box.outerWidth()&&f>0;)e=g(a,c),e||(e=h(a,c,5)),"left"==d?a-=b.opts.lineBreakerHorizontalOffset:a+=b.opts.lineBreakerHorizontalOffset,f-=b.opts.lineBreakerHorizontalOffset;return e}function j(a){t=null;var c=null,f=null,g=b.doc.elementFromPoint(a.pageX-b.win.pageXOffset,a.pageY-b.win.pageYOffset);g&&("HTML"==g.tagName||"BODY"==g.tagName||b.node.isElement(g)||(g.getAttribute("class")||"").indexOf("fr-line-breaker")>=0)?(f=h(a.pageX-b.win.pageXOffset,a.pageY-b.win.pageYOffset,1),f||(f=i(a.pageX-b.win.pageXOffset-b.opts.lineBreakerHorizontalOffset,a.pageY-b.win.pageYOffset,"left")),f||(f=i(a.pageX-b.win.pageXOffset+b.opts.lineBreakerHorizontalOffset,a.pageY-b.win.pageYOffset,"right")),c=e(f)):c=e(g),c?d(c,a.pageY):b.core.sameInstance(r)&&r.removeClass("fr-visible").removeData("instance")}function k(a){return r.hasClass("fr-visible")&&!b.core.sameInstance(r)?!1:b.popups.areVisible()||b.el.querySelector(".fr-selected-cell")?(r.removeClass("fr-visible"),!0):void(s!==!1||b.edit.isDisabled()||(t&&clearTimeout(t),t=setTimeout(j,30,a)))}function l(){t&&clearTimeout(t),r.hasClass("fr-visible")&&r.removeClass("fr-visible").removeData("instance")}function m(){s=!0,l()}function n(){s=!1}function o(c){c.preventDefault();var d=r.data("instance")||b;r.removeClass("fr-visible").removeData("instance");var e=r.data("tag1"),f=r.data("tag2"),g=b.html.defaultTag();null==e?g&&"TD"!=f.parent().get(0).tagName&&0===f.parents(g).length?f.before("<"+g+">"+a.FE.MARKERS+"<br></"+g+">"):f.before(a.FE.MARKERS+"<br>"):g&&"TD"!=e.parent().get(0).tagName&&0===e.parents(g).length?e.after("<"+g+">"+a.FE.MARKERS+"<br></"+g+">"):e.after(a.FE.MARKERS+"<br>"),d.selection.restore()}function p(){b.shared.$line_breaker||(b.shared.$line_breaker=a('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+b.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),r=b.shared.$line_breaker,b.events.on("shared.destroy",function(){r.html("").removeData().remove(),r=null},!0),b.events.on("destroy",function(){r.removeData("instance").removeClass("fr-visible").appendTo("body:first"),clearTimeout(t)},!0),b.events.$on(r,"mousemove",function(a){a.stopPropagation()},!0),b.events.bindClick(r,"a",o)}function q(){return b.$wp?(p(),s=!1,b.events.$on(b.$win,"mousemove",k),b.events.$on(a(b.win),"scroll",l),b.events.on("popups.show.table.edit",l),b.events.on("commands.after",l),b.events.$on(a(b.win),"mousedown",m),void b.events.$on(a(b.win),"mouseup",n)):!1}var r,s,t;return{_init:q}},a.extend(a.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),a.extend(a.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkNoOpener:!0,linkNoReferrer:!0,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),a.FE.PLUGINS.link=function(b){function c(){var c=b.image?b.image.get():null;if(!c&&b.$wp){var d=b.selection.ranges(0).commonAncestorContainer;try{d&&(d.contains&&d.contains(b.el)||!b.el.contains(d)||b.el==d)&&(d=null)}catch(e){d=null}if(d&&"A"===d.tagName)return d;var f=b.selection.element(),g=b.selection.endElement();"A"==f.tagName||b.node.isElement(f)||(f=a(f).parentsUntil(b.$el,"a:first").get(0)),"A"==g.tagName||b.node.isElement(g)||(g=a(g).parentsUntil(b.$el,"a:first").get(0));try{g&&(g.contains&&g.contains(b.el)||!b.el.contains(g)||b.el==g)&&(g=null)}catch(e){g=null}try{f&&(f.contains&&f.contains(b.el)||!b.el.contains(f)||b.el==f)&&(f=null)}catch(e){f=null}return g&&g==f&&"A"==g.tagName?(b.browser.msie||b.helpers.isMobile())&&(b.selection.info(f).atEnd||b.selection.info(f).atStart)?null:f:null}return"A"==b.el.tagName?b.el:c&&c.get(0).parentNode&&"A"==c.get(0).parentNode.tagName?c.get(0).parentNode:void 0}function d(){var a=b.image?b.image.get():null,c=[];if(a)"A"==a.get(0).parentNode.tagName&&c.push(a.get(0).parentNode);else{var d,e,f,g;if(b.win.getSelection){var h=b.win.getSelection();if(h.getRangeAt&&h.rangeCount){g=b.doc.createRange();for(var i=0;i<h.rangeCount;++i)if(d=h.getRangeAt(i),e=d.commonAncestorContainer,e&&1!=e.nodeType&&(e=e.parentNode),e&&"a"==e.nodeName.toLowerCase())c.push(e);else{f=e.getElementsByTagName("a");for(var j=0;j<f.length;++j)g.selectNodeContents(f[j]),g.compareBoundaryPoints(d.END_TO_START,d)<1&&g.compareBoundaryPoints(d.START_TO_END,d)>-1&&c.push(f[j])}}}else if(b.doc.selection&&"Control"!=b.doc.selection.type)if(d=b.doc.selection.createRange(),e=d.parentElement(),"a"==e.nodeName.toLowerCase())c.push(e);else{f=e.getElementsByTagName("a"),g=b.doc.body.createTextRange();for(var k=0;k<f.length;++k)g.moveToElementText(f[k]),g.compareEndPoints("StartToEnd",d)>-1&&g.compareEndPoints("EndToStart",d)<1&&c.push(f[k])}}return c}function e(d){if(b.core.hasFocus()){if(g(),d&&"keyup"===d.type&&(d.altKey||d.which==a.FE.KEYCODE.ALT))return!0;setTimeout(function(){if(!d||d&&(1==d.which||"mouseup"!=d.type)){var e=c(),g=b.image?b.image.get():null;if(e&&!g){if(b.image){var h=b.node.contents(e);if(1==h.length&&"IMG"==h[0].tagName){var i=b.selection.ranges(0);return 0===i.startOffset&&0===i.endOffset?a(e).before(a.FE.MARKERS):a(e).after(a.FE.MARKERS),b.selection.restore(),!1}}d&&d.stopPropagation(),f(e)}}},b.helpers.isIOS()?100:0)}}function f(c){var d=b.popups.get("link.edit");d||(d=h());var e=a(c);b.popups.isVisible("link.edit")||b.popups.refresh("link.edit"),b.popups.setContainer("link.edit",b.$sc);var f=e.offset().left+a(c).outerWidth()/2,g=e.offset().top+e.outerHeight();b.popups.show("link.edit",f,g,e.outerHeight())}function g(){b.popups.hide("link.edit")}function h(){var a="";b.opts.linkEditButtons.length>=1&&("A"==b.el.tagName&&b.opts.linkEditButtons.indexOf("linkRemove")>=0&&b.opts.linkEditButtons.splice(b.opts.linkEditButtons.indexOf("linkRemove"),1),a='<div class="fr-buttons">'+b.button.buildList(b.opts.linkEditButtons)+"</div>");var d={buttons:a},e=b.popups.create("link.edit",d);return b.$wp&&b.events.$on(b.$wp,"scroll.link-edit",function(){c()&&b.popups.isVisible("link.edit")&&f(c())}),e}function i(){}function j(){var d=b.popups.get("link.insert"),e=c();if(e){var f,g,h=a(e),i=d.find('input.fr-link-attr[type="text"]'),j=d.find('input.fr-link-attr[type="checkbox"]');for(f=0;f<i.length;f++)g=a(i[f]),g.val(h.attr(g.attr("name")||""));for(j.prop("checked",!1),f=0;f<j.length;f++)g=a(j[f]),h.attr(g.attr("name"))==g.data("checked")&&g.prop("checked",!0);d.find('input.fr-link-attr[type="text"][name="text"]').val(h.text())}else d.find('input.fr-link-attr[type="text"]').val(""),d.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),d.find('input.fr-link-attr[type="text"][name="text"]').val(b.selection.text());d.find("input.fr-link-attr").trigger("change");var k=b.image?b.image.get():null;k?d.find('.fr-link-attr[name="text"]').parent().hide():d.find('.fr-link-attr[name="text"]').parent().show()}function k(){var a=b.$tb.find('.fr-command[data-cmd="insertLink"]'),c=b.popups.get("link.insert");if(c||(c=l()),!c.hasClass("fr-active"))if(b.popups.refresh("link.insert"),b.popups.setContainer("link.insert",b.$tb||b.$sc),a.is(":visible")){var d=a.offset().left+a.outerWidth()/2,e=a.offset().top+(b.opts.toolbarBottom?10:a.outerHeight()-10);b.popups.show("link.insert",d,e,a.outerHeight())}else b.position.forSelection(c),b.popups.show("link.insert")}function l(a){if(a)return b.popups.onRefresh("link.insert",j),b.popups.onHide("link.insert",i),!0;var d="";b.opts.linkInsertButtons.length>=1&&(d='<div class="fr-buttons">'+b.button.buildList(b.opts.linkInsertButtons)+"</div>");var e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',f="",g=0;f='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+b.id+'">',f+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+b.id+'" name="href" type="text" class="fr-link-attr" placeholder="'+b.language.translate("URL")+'" tabIndex="'+ ++g+'"></div>',b.opts.linkText&&(f+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+b.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+b.language.translate("Text")+'" tabIndex="'+ ++g+'"></div>');for(var h in b.opts.linkAttributes)if(b.opts.linkAttributes.hasOwnProperty(h)){var k=b.opts.linkAttributes[h];f+='<div class="fr-input-line"><input name="'+h+'" type="text" class="fr-link-attr" placeholder="'+b.language.translate(k)+'" tabIndex="'+ ++g+'"></div>'}b.opts.linkAlwaysBlank||(f+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+b.id+'" tabIndex="'+ ++g+'"><span>'+e+'</span></span><label for="fr-link-target-'+b.id+'">'+b.language.translate("Open in new tab")+"</label></div>"),f+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++g+'" type="button">'+b.language.translate("Insert")+"</button></div></div>";var l={buttons:d,input_layer:f},m=b.popups.create("link.insert",l);return b.$wp&&b.events.$on(b.$wp,"scroll.link-insert",function(){var a=b.image?b.image.get():null;a&&b.popups.isVisible("link.insert")&&u(),c&&b.popups.isVisible("link.insert")&&s()}),m}function m(){var d=c(),e=b.image?b.image.get():null;return b.events.trigger("link.beforeRemove",[d])===!1?!1:void(e&&d?(e.unwrap(),b.image.edit(e)):d&&(b.selection.save(),a(d).replaceWith(a(d).html()),b.selection.restore(),g()))}function n(){b.events.on("keyup",function(b){b.which!=a.FE.KEYCODE.ESC&&e(b)}),b.events.on("window.mouseup",e),b.events.$on(b.$el,"click","a",function(a){b.edit.isDisabled()&&a.preventDefault()}),b.helpers.isMobile()&&b.events.$on(b.$doc,"selectionchange",e),l(!0),"A"==b.el.tagName&&b.$el.addClass("fr-view"),b.events.on("toolbar.esc",function(){return b.popups.isVisible("link.edit")?(b.events.disableBlur(),b.events.focus(),!1):void 0},!0)}function o(c){var d,e,f=b.opts.linkList[c],g=b.popups.get("link.insert"),h=g.find('input.fr-link-attr[type="text"]'),i=g.find('input.fr-link-attr[type="checkbox"]');for(e=0;e<h.length;e++)d=a(h[e]),f[d.attr("name")]?d.val(f[d.attr("name")]):"text"!=d.attr("name")&&d.val("");for(e=0;e<i.length;e++)d=a(i[e]),d.prop("checked",d.data("checked")==f[d.attr("name")]);b.accessibility.focusPopup(g)}function p(){var c,d,e=b.popups.get("link.insert"),f=e.find('input.fr-link-attr[type="text"]'),g=e.find('input.fr-link-attr[type="checkbox"]'),h=(f.filter('[name="href"]').val()||"").trim(),i=f.filter('[name="text"]').val(),j={};for(d=0;d<f.length;d++)c=a(f[d]),["href","text"].indexOf(c.attr("name"))<0&&(j[c.attr("name")]=c.val());for(d=0;d<g.length;d++)c=a(g[d]),c.is(":checked")?j[c.attr("name")]=c.data("checked"):j[c.attr("name")]=c.data("unchecked")||null;var k=b.helpers.scrollTop();r(h,i,j),a(b.o_win).scrollTop(k)}function q(){if(!b.selection.isCollapsed()){b.selection.save();for(var c=b.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();c.length;){var d=a(c.pop());d.removeClass("fr-unprocessed");var e=b.node.deepestParent(d.get(0));if(e){var f=d.get(0),g="",h="";do f=f.parentNode,b.node.isBlock(f)||(g+=b.node.closeTagString(f),h=b.node.openTagString(f)+h);while(f!=e);var i=b.node.openTagString(d.get(0))+d.html()+b.node.closeTagString(d.get(0));d.replaceWith('<span id="fr-break"></span>');var j=e.outerHTML;j=j.replace(/<span id="fr-break"><\/span>/g,g+i+h),e.outerHTML=j}c=b.$el.find(".fr-marker.fr-unprocessed").toArray()}b.html.cleanEmptyTags(),b.selection.restore()}}function r(f,g,h){if("undefined"==typeof h&&(h={}),b.events.trigger("link.beforeInsert",[f,g,h])===!1)return!1;var i=b.image?b.image.get():null;i||"A"==b.el.tagName?"A"==b.el.tagName&&b.$el.focus():(b.selection.restore(),b.popups.hide("link.insert"));var j=f;b.opts.linkConvertEmailAddress&&b.helpers.isEmail(f)&&!/^mailto:.*/i.test(f)&&(f="mailto:"+f);var k=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===b.opts.linkAutoPrefix||new RegExp("^("+a.FE.LinkProtocols.join("|")+"):.","i").test(f)||/^data:image.*/i.test(f)||/^(https?:|ftps?:|file:|)\/\//i.test(f)||k.test(f)||["/","{","[","#","(","."].indexOf((f||"")[0])<0&&(f=b.opts.linkAutoPrefix+b.helpers.sanitizeURL(f)),f=b.helpers.sanitizeURL(f),b.opts.linkAlwaysBlank&&(h.target="_blank"),b.opts.linkAlwaysNoFollow&&(h.rel="nofollow"),"_blank"==h.target?(b.opts.linkNoOpener&&(h.rel?h.rel+=" noopener":h.rel="noopener"),b.opts.linkNoReferrer&&(h.rel?h.rel+=" noreferrer":h.rel="noreferrer")):null==h.target&&(h.rel?h.rel=h.rel.replace(/noopener/,"").replace(/noreferrer/,""):h.rel=null),g=g||"",f===b.opts.linkAutoPrefix){var l=b.popups.get("link.insert");return l.find('input[name="href"]').addClass("fr-error"),b.events.trigger("link.bad",[j]),!1}var m,n=c();if(n){if(m=a(n),m.attr("href",f),g.length>0&&m.text()!=g&&!i){for(var o=m.get(0);1===o.childNodes.length&&o.childNodes[0].nodeType==Node.ELEMENT_NODE;)o=o.childNodes[0];a(o).text(g)}i||m.prepend(a.FE.START_MARKER).append(a.FE.END_MARKER),m.attr(h),i||b.selection.restore()}else{i?i.wrap('<a href="'+f+'"></a>'):(b.format.remove("a"),b.selection.isCollapsed()?(g=0===g.length?j:g,b.html.insert('<a href="'+f+'">'+a.FE.START_MARKER+g.replace(/&/g,"&amp;")+a.FE.END_MARKER+"</a>"),b.selection.restore()):g.length>0&&g!=b.selection.text().replace(/\n/g,"")?(b.selection.remove(),b.html.insert('<a href="'+f+'">'+a.FE.START_MARKER+g.replace(/&/g,"&amp;")+a.FE.END_MARKER+"</a>"),b.selection.restore()):(q(),b.format.apply("a",{href:f})));for(var p=d(),r=0;r<p.length;r++)m=a(p[r]),m.attr(h),m.removeAttr("_moz_dirty");1==p.length&&b.$wp&&!i&&(a(p[0]).prepend(a.FE.START_MARKER).append(a.FE.END_MARKER),b.selection.restore())}if(i){var s=b.popups.get("link.insert");s&&s.find("input:focus").blur(),b.image.edit(i)}else e()}function s(){g();var d=c();if(d){var e=b.popups.get("link.insert");e||(e=l()),b.popups.isVisible("link.insert")||(b.popups.refresh("link.insert"),b.selection.save(),b.helpers.isMobile()&&(b.events.disableBlur(),b.$el.blur(),b.events.enableBlur())),b.popups.setContainer("link.insert",b.$sc);var f=(b.image?b.image.get():null)||a(d),h=f.offset().left+f.outerWidth()/2,i=f.offset().top+f.outerHeight();b.popups.show("link.insert",h,i,f.outerHeight())}}function t(){var a=b.image?b.image.get():null;if(a)b.image.back();else{b.events.disableBlur(),b.selection.restore(),b.events.enableBlur();var d=c();d&&b.$wp?(b.selection.restore(),g(),e()):"A"==b.el.tagName?(b.$el.focus(),e()):(b.popups.hide("link.insert"),b.toolbar.showInline())}}function u(){var a=b.image?b.image.getEl():null;if(a){var c=b.popups.get("link.insert");b.image.hasCaption()&&(a=a.find(".fr-img-wrap")),c||(c=l()),j(!0),b.popups.setContainer("link.insert",b.$sc);var d=a.offset().left+a.outerWidth()/2,e=a.offset().top+a.outerHeight();b.popups.show("link.insert",d,e,a.outerHeight())}}function v(d,f,g){"undefined"==typeof g&&(g=b.opts.linkMultipleStyles),"undefined"==typeof f&&(f=b.opts.linkStyles);var h=c();if(!h)return!1;if(!g){var i=Object.keys(f);i.splice(i.indexOf(d),1),a(h).removeClass(i.join(" "))}a(h).toggleClass(d),e()}return{_init:n,remove:m,showInsertPopup:k,usePredefined:o,insertCallback:p,insert:r,update:s,get:c,allSelected:d,back:t,imageLink:u,applyStyle:v}},a.FE.DefineIcon("insertLink",{NAME:"link"}),a.FE.RegisterShortcut(a.FE.KEYCODE.K,"insertLink",null,"K"),a.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),a.FE.DefineIcon("linkOpen",{NAME:"external-link",FA5NAME:"external-link-alt"}),a.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(a){var b=this.link.get();b?a.removeClass("fr-hidden"):a.addClass("fr-hidden")},callback:function(){var a=this.link.get();a&&(this.o_win.open(a.href,"_blank","noopener"),this.popups.hide("link.edit"))},plugin:"link"}),a.FE.DefineIcon("linkEdit",{NAME:"edit"}),a.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(a){var b=this.link.get();b?a.removeClass("fr-hidden"):a.addClass("fr-hidden")},plugin:"link"}),a.FE.DefineIcon("linkRemove",{NAME:"unlink"}),a.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(a){var b=this.link.get();b?a.removeClass("fr-hidden"):a.addClass("fr-hidden")},plugin:"link"}),a.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(a){var b=this.link.get()&&this.doc.hasFocus(),c=this.image?this.image.get():null;c||b||this.opts.toolbarInline?(a.removeClass("fr-hidden"),a.next(".fr-separator").removeClass("fr-hidden")):(a.addClass("fr-hidden"),a.next(".fr-separator").addClass("fr-hidden"))},plugin:"link"}),a.FE.DefineIcon("linkList",{NAME:"search"}),a.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.linkList,c=0;c<b.length;c++)a+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+c+'">'+(b[c].displayText||b[c].text)+"</a></li>";return a+="</ul>"},callback:function(a,b){this.link.usePredefined(b)},plugin:"link"}),a.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(a){var b=this.link.get();b?a.text(this.language.translate("Update")):a.text(this.language.translate("Insert"))},plugin:"link"}),a.FE.DefineIcon("imageLink",{NAME:"link"}),a.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(a){var b,c=this.link.get();c?(b=a.prev(),b.hasClass("fr-separator")&&b.removeClass("fr-hidden"),a.addClass("fr-hidden")):(b=a.prev(),b.hasClass("fr-separator")&&b.addClass("fr-hidden"),a.removeClass("fr-hidden"))},plugin:"link"}),a.FE.DefineIcon("linkStyle",{NAME:"magic"}),a.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.linkStyles;for(var c in b)b.hasOwnProperty(c)&&(a+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+c+'">'+this.language.translate(b[c])+"</a></li>");return a+="</ul>"},callback:function(a,b){this.link.applyStyle(b)},refreshOnShow:function(b,c){var d=this.link.get();if(d){var e=a(d);c.find(".fr-command").each(function(){var b=a(this).data("param1"),c=e.hasClass(b);a(this).toggleClass("fr-active",c).attr("aria-selected",c)})}},refresh:function(a){var b=this.link.get();b?a.removeClass("fr-hidden"):a.addClass("fr-hidden")},plugin:"link"}),a.FE.PLUGINS.lists=function(b){function c(a){return'<span class="fr-open-'+a.toLowerCase()+'"></span>'}function d(a){return'<span class="fr-close-'+a.toLowerCase()+'"></span>'}function e(c,d){for(var e=[],f=0;f<c.length;f++){var g=c[f].parentNode;"LI"==c[f].tagName&&g.tagName!=d&&e.indexOf(g)<0&&e.push(g)}for(f=e.length-1;f>=0;f--){var h=a(e[f]);h.replaceWith("<"+d.toLowerCase()+" "+b.node.attributes(h.get(0))+">"+h.html()+"</"+d.toLowerCase()+">")}}function f(c,d){e(c,d);var f,g=b.html.defaultTag(),h=null;c.length&&(f="rtl"==b.opts.direction||"rtl"==a(c[0]).css("direction")?"margin-right":"margin-left");for(var i=0;i<c.length;i++)if("LI"!=c[i].tagName){var j=b.helpers.getPX(a(c[i]).css(f))||0;c[i].style.marginLeft=null,null===h&&(h=j);var k=h>0?"<"+d+' style="'+f+": "+h+'px;">':"<"+d+">",l="</"+d+">";for(j-=h;j/b.opts.indentMargin>0;)k+="<"+d+">",l+=l,j-=b.opts.indentMargin;g&&c[i].tagName.toLowerCase()==g?a(c[i]).replaceWith(k+"<li"+b.node.attributes(c[i])+">"+a(c[i]).html()+"</li>"+l):a(c[i]).wrap(k+"<li></li>"+l)}b.clean.lists()}function g(e){var f,g;for(f=e.length-1;f>=0;f--)for(g=f-1;g>=0;g--)if(a(e[g]).find(e[f]).length||e[g]==e[f]){e.splice(f,1);break}var h=[];for(f=0;f<e.length;f++){var i=a(e[f]),j=e[f].parentNode,k=i.attr("class");if(i.before(d(j.tagName)),"LI"==j.parentNode.tagName)i.before(d("LI")),i.after(c("LI"));else{var l="";k&&(l+=' class="'+k+'"');var m="rtl"==b.opts.direction||"rtl"==i.css("direction")?"margin-right":"margin-left";b.helpers.getPX(a(j).css(m))&&(a(j).attr("style")||"").indexOf(m+":")>=0&&(l+=' style="'+m+":"+b.helpers.getPX(a(j).css(m))+'px;"'),b.html.defaultTag()&&0===i.find(b.html.blockTagsQuery()).length&&i.wrapInner("<"+b.html.defaultTag()+l+"></"+b.html.defaultTag()+">"),b.node.isEmpty(i.get(0),!0)||0!==i.find(b.html.blockTagsQuery()).length||i.append("<br>"),i.append(c("LI")),i.prepend(d("LI"))}i.after(c(j.tagName)),"LI"==j.parentNode.tagName&&(j=j.parentNode.parentNode),h.indexOf(j)<0&&h.push(j)}for(f=0;f<h.length;f++){var n=a(h[f]),o=n.html();o=o.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>"),o=o.replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),n.replaceWith(b.node.openTagString(n.get(0))+o+b.node.closeTagString(n.get(0)))}b.$el.find("li:empty").remove(),b.$el.find("ul:empty, ol:empty").remove(),b.clean.lists(),b.html.wrap()}function h(a,b){for(var c=!0,d=0;d<a.length;d++){if("LI"!=a[d].tagName)return!1;a[d].parentNode.tagName!=b&&(c=!1)}return c}function i(a){b.selection.save(),b.html.wrap(!0,!0,!0,!0),b.selection.restore();for(var c=b.selection.blocks(),d=0;d<c.length;d++)"LI"!=c[d].tagName&&"LI"==c[d].parentNode.tagName&&(c[d]=c[d].parentNode);b.selection.save(),h(c,a)?g(c):f(c,a),b.html.unwrap(),b.selection.restore()}function j(c,d){var e=a(b.selection.element());if(e.get(0)!=b.el){var f=e.get(0);f="LI"!=f.tagName&&f.firstElementChild&&"LI"!=f.firstElementChild.tagName?e.parents("li").get(0):"LI"==f.tagName||f.firstElementChild?f.firstElementChild&&"LI"==f.firstElementChild.tagName?e.get(0).firstChild:e.get(0):e.parents("li").get(0),f&&f.parentNode.tagName==d&&b.el.contains(f.parentNode)&&c.addClass("fr-active")}}function k(c){b.selection.save();for(var d=0;d<c.length;d++){var e=c[d].previousSibling;if(e){var f=a(c[d]).find("> ul, > ol").last().get(0);if(f){for(var g=a("<li>").prependTo(a(f)),h=b.node.contents(c[d])[0];h&&!b.node.isList(h);){var i=h.nextSibling;g.append(h),h=i}a(e).append(a(f)),a(c[d]).remove()}else{var j=a(e).find("> ul, > ol").last().get(0);if(j)a(j).append(a(c[d]));else{var k=a("<"+c[d].parentNode.tagName+">");a(e).append(k),k.append(a(c[d]))}}}}b.clean.lists(),b.selection.restore()}function l(a){b.selection.save(),g(a),b.selection.restore()}function m(a){if("indent"==a||"outdent"==a){for(var c=!1,d=b.selection.blocks(),e=[],f=0;f<d.length;f++)"LI"==d[f].tagName?(c=!0,e.push(d[f])):"LI"==d[f].parentNode.tagName&&(c=!0,e.push(d[f].parentNode));c&&("indent"==a?k(e):l(e))}}function n(){b.events.on("commands.after",m),b.events.on("keydown",function(c){if(c.which==a.FE.KEYCODE.TAB){for(var d=b.selection.blocks(),e=[],f=0;f<d.length;f++)"LI"==d[f].tagName?e.push(d[f]):"LI"==d[f].parentNode.tagName&&e.push(d[f].parentNode);if(e.length>1||e.length&&(b.selection.info(e[0]).atStart||b.node.isEmpty(e[0])))return c.preventDefault(),c.stopPropagation(),c.shiftKey?l(e):k(e),!1}},!0)}return{_init:n,format:i,refresh:j}},a.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(a){this.lists.refresh(a,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),a.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(a){this.lists.refresh(a,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),a.FE.DefineIcon("formatUL",{NAME:"list-ul"}),a.FE.DefineIcon("formatOL",{NAME:"list-ol"}),a.extend(a.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1,paragraphDefaultSelection:"Paragraph Format"}),a.FE.PLUGINS.paragraphFormat=function(b){function c(c,d){var e=b.html.defaultTag();if(d&&d.toLowerCase()!=e)if(c.find("ul, ol").length>0){var f=a("<"+d+">");c.prepend(f);for(var g=b.node.contents(c.get(0))[0];g&&["UL","OL"].indexOf(g.tagName)<0;){var h=g.nextSibling;f.append(g),g=h}}else c.html("<"+d+">"+c.html()+"</"+d+">")}function d(c,d){var e=b.html.defaultTag();d&&d.toLowerCase()!=e||(d='div class="fr-temp-div"'),c.replaceWith(a("<"+d+">").html(c.html()))}function e(c,d){var e=b.html.defaultTag();d||(d='div class="fr-temp-div"'+(b.node.isEmpty(c.get(0),!0)?' data-empty="true"':"")),d.toLowerCase()==e?(b.node.isEmpty(c.get(0),!0)||c.append("<br/>"),c.replaceWith(c.html())):c.replaceWith(a("<"+d+">").html(c.html()))}function f(c,d){d||(d='div class="fr-temp-div"'+(b.node.isEmpty(c.get(0),!0)?' data-empty="true"':"")),c.replaceWith(a("<"+d+" "+b.node.attributes(c.get(0))+">").html(c.html()).removeAttr("data-empty"))}function g(g){"N"==g&&(g=b.html.defaultTag()),b.selection.save(),b.html.wrap(!0,!0,!b.opts.paragraphFormat.BLOCKQUOTE,!0,!0),b.selection.restore();var h=b.selection.blocks();b.selection.save(),b.$el.find("pre").attr("skip",!0);for(var i=0;i<h.length;i++)if(h[i].tagName!=g&&!b.node.isList(h[i])){var j=a(h[i]);"LI"==h[i].tagName?c(j,g):"LI"==h[i].parentNode.tagName&&h[i]?d(j,g):["TD","TH"].indexOf(h[i].parentNode.tagName)>=0?e(j,g):f(j,g)}b.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){a(this).prev().append("<br>"+a(this).html()),a(this).remove()}),b.$el.find("pre").removeAttr("skip"),b.html.unwrap(),b.selection.restore()}function h(a,c){var d=b.selection.blocks();if(d.length){var e=d[0],f="N",g=b.html.defaultTag();e.tagName.toLowerCase()!=g&&e!=b.el&&(f=e.tagName),c.find('.fr-command[data-param1="'+f+'"]').addClass("fr-active").attr("aria-selected",!0)}else c.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function i(a){if(b.opts.paragraphFormatSelection){var c=b.selection.blocks();if(c.length){var d=c[0],e="N",f=b.html.defaultTag();d.tagName.toLowerCase()!=f&&d!=b.el&&(e=d.tagName),["LI","TD","TH"].indexOf(e)>=0&&(e="N"),a.find("> span").text(b.language.translate(b.opts.paragraphFormat[e]))}else a.find("> span").text(b.language.translate(b.opts.paragraphFormat.N))}}return{apply:g,refreshOnShow:h,refresh:i}},a.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(a){return a.opts.paragraphFormatSelection},defaultSelection:function(a){return a.language.translate(a.opts.paragraphDefaultSelection)},displaySelectionWidth:125,html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.paragraphFormat;for(var c in b)if(b.hasOwnProperty(c)){var d=this.shortcuts.get("paragraphFormat."+c);d=d?'<span class="fr-shortcut">'+d+"</span>":"",a+='<li role="presentation"><'+("N"==c?this.html.defaultTag()||"DIV":c)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+c+'" title="'+this.language.translate(b[c])+'">'+this.language.translate(b[c])+"</a></"+("N"==c?this.html.defaultTag()||"DIV":c)+"></li>"}return a+="</ul>"},title:"Paragraph Format",callback:function(a,b){this.paragraphFormat.apply(b)},refresh:function(a){this.paragraphFormat.refresh(a)},refreshOnShow:function(a,b){this.paragraphFormat.refreshOnShow(a,b)},plugin:"paragraphFormat"}),a.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"}),a.extend(a.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),a.FE.PLUGINS.paragraphStyle=function(b){function c(c,d,e){"undefined"==typeof d&&(d=b.opts.paragraphStyles),"undefined"==typeof e&&(e=b.opts.paragraphMultipleStyles);var f="";e||(f=Object.keys(d),f.splice(f.indexOf(c),1),f=f.join(" ")),b.selection.save(),b.html.wrap(!0,!0,!0,!0),b.selection.restore();var g=b.selection.blocks();b.selection.save();for(var h=a(g[0]).hasClass(c),i=0;i<g.length;i++)a(g[i]).removeClass(f).toggleClass(c,!h),a(g[i]).hasClass("fr-temp-div")&&a(g[i]).removeClass("fr-temp-div"),""===a(g[i]).attr("class")&&a(g[i]).removeAttr("class");b.html.unwrap(),b.selection.restore()}function d(c,d){var e=b.selection.blocks();if(e.length){var f=a(e[0]);d.find(".fr-command").each(function(){var b=a(this).data("param1"),c=f.hasClass(b);a(this).toggleClass("fr-active",c).attr("aria-selected",c)})}}function e(){}return{_init:e,apply:c,refreshOnShow:d}},a.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.paragraphStyles;for(var c in b)b.hasOwnProperty(c)&&(a+='<li role="presentation"><a class="fr-command '+c+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+c+'" title="'+this.language.translate(b[c])+'">'+this.language.translate(b[c])+"</a></li>");return a+="</ul>"},title:"Paragraph Style",callback:function(a,b){this.paragraphStyle.apply(b)},refreshOnShow:function(a,b){this.paragraphStyle.refreshOnShow(a,b)},plugin:"paragraphStyle"}),a.FE.DefineIcon("paragraphStyle",{NAME:"magic"}),a.FE.PLUGINS.print=function(a){function b(){var b=a.$el.html(),c=null;a.shared.print_iframe?c=a.shared.print_iframe:(c=document.createElement("iframe"),c.name="fr-print",c.style.position="fixed",c.style.top="0",c.style.left="-9999px",c.style.height="100%",c.style.width="0",c.style.overflow="hidden",c.style["z-index"]="2147483647",c.style.tabIndex="-1",document.body.appendChild(c),c.onload=function(){setTimeout(function(){a.events.disableBlur(),window.frames["fr-print"].focus(),window.frames["fr-print"].print(),a.$win.get(0).focus(),a.events.disableBlur(),a.events.focus()},0)},a.events.on("shared.destroy",function(){c.remove()}),a.shared.print_iframe=c);var d=c.contentWindow;d.document.open(),d.document.write("<!DOCTYPE html><html><head><title>"+document.title+"</title>"),Array.prototype.forEach.call(document.querySelectorAll("style"),function(a){a=a.cloneNode(!0),d.document.write(a.outerHTML)});var e=document.querySelectorAll("link[rel=stylesheet]");Array.prototype.forEach.call(e,function(a){var b=document.createElement("link");b.rel=a.rel,b.href=a.href,b.media="print",b.type="text/css",
b.media="all",d.document.write(b.outerHTML)}),d.document.write('</head><body style="text-align: '+("rtl"==a.opts.direction?"right":"left")+"; direction: "+a.opts.direction+';"><div class="fr-view">'),d.document.write(b),d.document.write("</div></body></html>"),d.document.close()}return{run:b}},a.FE.DefineIcon("print",{NAME:"print"}),a.FE.RegisterCommand("print",{title:"Print",undo:!1,focus:!1,plugin:"print",callback:function(){this.print.run()}}),a.extend(a.FE.DEFAULTS,{quickInsertButtons:["image","video","embedly","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),a.FE.QUICK_INSERT_BUTTONS={},a.FE.DefineIcon("quickInsert",{PATH:'<path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/>',template:"svg"}),a.FE.RegisterQuickInsertButton=function(b,c){a.FE.QUICK_INSERT_BUTTONS[b]=a.extend({undo:!0},c)},a.FE.RegisterQuickInsertButton("image",{icon:"insertImage",requiredPlugin:"image",title:"Insert Image",undo:!1,callback:function(){var b=this;b.shared.$qi_image_input||(b.shared.$qi_image_input=a('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),a("body:first").append(b.shared.$qi_image_input),b.events.$on(b.shared.$qi_image_input,"change",function(){var b=a(this).data("inst");this.files&&(b.quickInsert.hide(),b.image.upload(this.files)),a(this).val("")},!0)),b.$qi_image_input=b.shared.$qi_image_input,b.helpers.isMobile()&&b.selection.save(),b.$qi_image_input.data("inst",b).trigger("click")}}),a.FE.RegisterQuickInsertButton("video",{icon:"insertVideo",requiredPlugin:"video",title:"Insert Video",undo:!1,callback:function(){var a=prompt(this.language.translate("Paste the URL of the video you want to insert."));a&&this.video.insertByURL(a)}}),a.FE.RegisterQuickInsertButton("embedly",{icon:"embedly",requiredPlugin:"embedly",title:"Embed URL",undo:!1,callback:function(){var a=prompt(this.language.translate("Paste the URL of any web content you want to insert."));a&&this.embedly.add(a)}}),a.FE.RegisterQuickInsertButton("table",{icon:"insertTable",requiredPlugin:"table",title:"Insert Table",callback:function(){this.table.insert(2,2)}}),a.FE.RegisterQuickInsertButton("ol",{icon:"formatOL",requiredPlugin:"lists",title:"Ordered List",callback:function(){this.lists.format("OL")}}),a.FE.RegisterQuickInsertButton("ul",{icon:"formatUL",requiredPlugin:"lists",title:"Unordered List",callback:function(){this.lists.format("UL")}}),a.FE.RegisterQuickInsertButton("hr",{icon:"insertHR",title:"Insert Horizontal Line",callback:function(){this.commands.insertHR()}}),a.FE.PLUGINS.quickInsert=function(b){function c(c){var d,e,f;d=c.offset().top-b.$box.offset().top,e=0-k.outerWidth(),b.opts.enter!=a.FE.ENTER_BR?f=(k.outerHeight()-c.outerHeight())/2:(a("<span>"+a.FE.INVISIBLE_SPACE+"</span>").insertAfter(c),f=(k.outerHeight()-c.next().outerHeight())/2,c.next().remove()),b.opts.iframe&&(d+=b.$iframe.offset().top-b.helpers.scrollTop()),k.hasClass("fr-on")&&d>=0&&l.css("top",d-f),d>=0&&d-f<=b.$box.outerHeight()-c.outerHeight()?(k.hasClass("fr-hidden")&&(k.hasClass("fr-on")&&g(),k.removeClass("fr-hidden")),k.css("top",d-f)):k.hasClass("fr-visible")&&(k.addClass("fr-hidden"),h()),k.css("left",e)}function d(a){k||i(),k.hasClass("fr-on")&&h(),b.$box.append(k),c(a),k.data("tag",a),k.addClass("fr-visible")}function e(){if(b.core.hasFocus()){var c=b.selection.element();if(b.opts.enter==a.FE.ENTER_BR||b.node.isBlock(c)||(c=b.node.blockParent(c)),b.opts.enter==a.FE.ENTER_BR&&!b.node.isBlock(c)){var e=b.node.deepestParent(c);e&&(c=e)}var g=function(){return b.opts.enter!=a.FE.ENTER_BR&&b.node.isEmpty(c)&&b.node.isElement(c.parentNode)&&b.opts.quickInsertTags.indexOf(c.tagName.toLowerCase())>=0},i=function(){return b.opts.enter==a.FE.ENTER_BR&&("BR"==c.tagName&&(!c.previousSibling||"BR"==c.previousSibling.tagName||b.node.isBlock(c.previousSibling))||b.node.isEmpty(c)&&(!c.previousSibling||"BR"==c.previousSibling.tagName||b.node.isBlock(c.previousSibling))&&(!c.nextSibling||"BR"==c.nextSibling.tagName||b.node.isBlock(c.nextSibling)))};c&&(g()||i())?k&&k.data("tag").is(a(c))&&k.hasClass("fr-on")?h():b.selection.isCollapsed()&&d(a(c)):f()}}function f(){k&&(b.html.checkIfEmpty(),k.hasClass("fr-on")&&h(),k.removeClass("fr-visible fr-on"),k.css("left",-9999).css("top",-9999))}function g(c){if(c&&c.preventDefault(),k.hasClass("fr-on")&&!k.hasClass("fr-hidden"))h();else{if(!b.shared.$qi_helper){for(var d=b.opts.quickInsertButtons,e='<div class="fr-qi-helper">',f=0,g=0;g<d.length;g++){var i=a.FE.QUICK_INSERT_BUTTONS[d[g]];i&&(!i.requiredPlugin||a.FE.PLUGINS[i.requiredPlugin]&&b.opts.pluginsEnabled.indexOf(i.requiredPlugin)>=0)&&(e+='<a class="fr-btn fr-floating-btn" role="button" title="'+b.language.translate(i.title)+'" tabIndex="-1" data-cmd="'+d[g]+'" style="transition-delay: '+.025*f++ +'s;">'+b.icon.create(i.icon)+"</a>")}e+="</div>",b.shared.$qi_helper=a(e),b.tooltip.bind(b.shared.$qi_helper,"> a.fr-btn")}l=b.shared.$qi_helper,l.appendTo(b.$box),setTimeout(function(){l.css("top",parseFloat(k.css("top"))),l.css("left",parseFloat(k.css("left"))+k.outerWidth()),l.find("a").addClass("fr-size-1"),k.addClass("fr-on")},10)}}function h(){var a=b.$box.find(".fr-qi-helper");a.length&&(a.find("a").removeClass("fr-size-1"),a.css("left",-9999),k.hasClass("fr-hidden")||k.removeClass("fr-on"))}function i(){b.shared.$quick_insert||(b.shared.$quick_insert=a('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+b.language.translate("Quick Insert")+'">'+b.icon.create("quickInsert")+"</a></div>")),k=b.shared.$quick_insert,b.tooltip.bind(b.$box,".fr-quick-insert > a.fr-floating-btn"),b.events.on("destroy",function(){k.removeClass("fr-on").appendTo(a("body:first")).css("left",-9999).css("top",-9999),l&&(h(),l.appendTo(a("body:first")))},!0),b.events.on("shared.destroy",function(){k.html("").removeData().remove(),k=null,l&&(l.html("").removeData().remove(),l=null)},!0),b.events.on("commands.before",f),b.events.on("commands.after",function(){b.popups.areVisible()||e()}),b.events.bindClick(b.$box,".fr-quick-insert > a",g),b.events.bindClick(b.$box,".fr-qi-helper > a.fr-btn",function(c){var d=a(c.currentTarget).data("cmd");a.FE.QUICK_INSERT_BUTTONS[d].callback.apply(b,[c.currentTarget]),a.FE.QUICK_INSERT_BUTTONS[d].undo&&b.undo.saveStep(),b.quickInsert.hide()}),b.events.$on(b.$wp,"scroll",function(){k.hasClass("fr-visible")&&c(k.data("tag"))})}function j(){return b.$wp?(b.opts.iframe&&b.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),b.popups.onShow("image.edit",f),b.events.on("mouseup",e),b.helpers.isMobile()&&b.events.$on(a(b.o_doc),"selectionchange",e),b.events.on("blur",f),b.events.on("keyup",e),void b.events.on("keydown",function(){setTimeout(function(){e()},0)})):!1}var k,l;return{_init:j,hide:f}},a.FE.PLUGINS.quote=function(b){function c(a){for(;a.parentNode&&a.parentNode!=b.el;)a=a.parentNode;return a}function d(){var d,e=b.selection.blocks();for(d=0;d<e.length;d++)e[d]=c(e[d]);b.selection.save();var f=a("<blockquote>");for(f.insertBefore(e[0]),d=0;d<e.length;d++)f.append(e[d]);b.html.unwrap(),b.selection.restore()}function e(){var c,d=b.selection.blocks();for(c=0;c<d.length;c++)"BLOCKQUOTE"!=d[c].tagName&&(d[c]=a(d[c]).parentsUntil(b.$el,"BLOCKQUOTE").get(0));for(b.selection.save(),c=0;c<d.length;c++)d[c]&&a(d[c]).replaceWith(d[c].innerHTML);b.html.unwrap(),b.selection.restore()}function f(a){b.selection.save(),b.html.wrap(!0,!0,!0,!0),b.selection.restore(),"increase"==a?d():"decrease"==a&&e()}return{apply:f}},a.FE.RegisterShortcut(a.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),a.FE.RegisterShortcut(a.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),a.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(a,b){this.quote.apply(b)},plugin:"quote"}),a.FE.DefineIcon("quote",{NAME:"quote-left"}),a.extend(a.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),a.FE.PLUGINS.save=function(b){function c(a,c){b.events.trigger("save.error",[{code:a,message:n[a]},c])}function d(d){"undefined"==typeof d&&(d=b.html.get());var e=d,f=b.events.trigger("save.before",[d]);if(f===!1)return!1;if("string"==typeof f&&(d=f),b.opts.saveURL){var g={};for(var h in b.opts.saveParams)if(b.opts.saveParams.hasOwnProperty(h)){var i=b.opts.saveParams[h];"function"==typeof i?g[h]=i.call(this):g[h]=i}var k={};k[b.opts.saveParam]=d,a.ajax({type:b.opts.saveMethod,url:b.opts.saveURL,data:a.extend(k,g),crossDomain:b.opts.requestWithCORS,xhrFields:{withCredentials:b.opts.requestWithCredentials},headers:b.opts.requestHeaders}).done(function(a){j=e,b.events.trigger("save.after",[a])}).fail(function(a){c(m,a.response||a.responseText)})}else c(l)}function e(){clearTimeout(i),i=setTimeout(function(){var a=b.html.get();(j!=a||k)&&(j=a,k=!1,d(a))},b.opts.saveInterval)}function f(){e(),k=!1}function g(){k=!0}function h(){b.opts.saveInterval&&(j=b.html.get(),b.events.on("contentChanged",e),b.events.on("keydown destroy",function(){clearTimeout(i)}))}var i=null,j=null,k=!1,l=1,m=2,n={};return n[l]="Missing saveURL option.",n[m]="Something went wrong during save.",{_init:h,save:d,reset:f,force:g}},a.FE.DefineIcon("save",{NAME:"floppy-o"}),a.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"}),a.extend(a.FE.DEFAULTS,{specialCharactersSets:[{title:"Latin",list:[{"char":"&iexcl;",desc:"INVERTED EXCLAMATION MARK"},{"char":"&cent;",desc:"CENT SIGN"},{"char":"&pound;",desc:"POUND SIGN"},{"char":"&curren;",desc:"CURRENCY SIGN"},{"char":"&yen;",desc:"YEN SIGN"},{"char":"&brvbar;",desc:"BROKEN BAR"},{"char":"&sect;",desc:"SECTION SIGN"},{"char":"&uml;",desc:"DIAERESIS"},{"char":"&copy;",desc:"COPYRIGHT SIGN"},{"char":"&trade;",desc:"TRADEMARK SIGN"},{"char":"&ordf;",desc:"FEMININE ORDINAL INDICATOR"},{"char":"&laquo;",desc:"LEFT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&not;",desc:"NOT SIGN"},{"char":"&reg;",desc:"REGISTERED SIGN"},{"char":"&macr;",desc:"MACRON"},{"char":"&deg;",desc:"DEGREE SIGN"},{"char":"&plusmn;",desc:"PLUS-MINUS SIGN"},{"char":"&sup2;",desc:"SUPERSCRIPT TWO"},{"char":"&sup3;",desc:"SUPERSCRIPT THREE"},{"char":"&acute;",desc:"ACUTE ACCENT"},{"char":"&micro;",desc:"MICRO SIGN"},{"char":"&para;",desc:"PILCROW SIGN"},{"char":"&middot;",desc:"MIDDLE DOT"},{"char":"&cedil;",desc:"CEDILLA"},{"char":"&sup1;",desc:"SUPERSCRIPT ONE"},{"char":"&ordm;",desc:"MASCULINE ORDINAL INDICATOR"},{"char":"&raquo;",desc:"RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&frac14;",desc:"VULGAR FRACTION ONE QUARTER"},{"char":"&frac12;",desc:"VULGAR FRACTION ONE HALF"},{"char":"&frac34;",desc:"VULGAR FRACTION THREE QUARTERS"},{"char":"&iquest;",desc:"INVERTED QUESTION MARK"},{"char":"&Agrave;",desc:"LATIN CAPITAL LETTER A WITH GRAVE"},{"char":"&Aacute;",desc:"LATIN CAPITAL LETTER A WITH ACUTE"},{"char":"&Acirc;",desc:"LATIN CAPITAL LETTER A WITH CIRCUMFLEX"},{"char":"&Atilde;",desc:"LATIN CAPITAL LETTER A WITH TILDE"},{"char":"&Auml;",desc:"LATIN CAPITAL LETTER A WITH DIAERESIS "},{"char":"&Aring;",desc:"LATIN CAPITAL LETTER A WITH RING ABOVE"},{"char":"&AElig;",desc:"LATIN CAPITAL LETTER AE"},{"char":"&Ccedil;",desc:"LATIN CAPITAL LETTER C WITH CEDILLA"},{"char":"&Egrave;",desc:"LATIN CAPITAL LETTER E WITH GRAVE"},{"char":"&Eacute;",desc:"LATIN CAPITAL LETTER E WITH ACUTE"},{"char":"&Ecirc;",desc:"LATIN CAPITAL LETTER E WITH CIRCUMFLEX"},{"char":"&Euml;",desc:"LATIN CAPITAL LETTER E WITH DIAERESIS"},{"char":"&Igrave;",desc:"LATIN CAPITAL LETTER I WITH GRAVE"},{"char":"&Iacute;",desc:"LATIN CAPITAL LETTER I WITH ACUTE"},{"char":"&Icirc;",desc:"LATIN CAPITAL LETTER I WITH CIRCUMFLEX"},{"char":"&Iuml;",desc:"LATIN CAPITAL LETTER I WITH DIAERESIS"},{"char":"&ETH;",desc:"LATIN CAPITAL LETTER ETH"},{"char":"&Ntilde;",desc:"LATIN CAPITAL LETTER N WITH TILDE"},{"char":"&Ograve;",desc:"LATIN CAPITAL LETTER O WITH GRAVE"},{"char":"&Oacute;",desc:"LATIN CAPITAL LETTER O WITH ACUTE"},{"char":"&Ocirc;",desc:"LATIN CAPITAL LETTER O WITH CIRCUMFLEX"},{"char":"&Otilde;",desc:"LATIN CAPITAL LETTER O WITH TILDE"},{"char":"&Ouml;",desc:"LATIN CAPITAL LETTER O WITH DIAERESIS"},{"char":"&times;",desc:"MULTIPLICATION SIGN"},{"char":"&Oslash;",desc:"LATIN CAPITAL LETTER O WITH STROKE"},{"char":"&Ugrave;",desc:"LATIN CAPITAL LETTER U WITH GRAVE"},{"char":"&Uacute;",desc:"LATIN CAPITAL LETTER U WITH ACUTE"},{"char":"&Ucirc;",desc:"LATIN CAPITAL LETTER U WITH CIRCUMFLEX"},{"char":"&Uuml;",desc:"LATIN CAPITAL LETTER U WITH DIAERESIS"},{"char":"&Yacute;",desc:"LATIN CAPITAL LETTER Y WITH ACUTE"},{"char":"&THORN;",desc:"LATIN CAPITAL LETTER THORN"},{"char":"&szlig;",desc:"LATIN SMALL LETTER SHARP S"},{"char":"&agrave;",desc:"LATIN SMALL LETTER A WITH GRAVE"},{"char":"&aacute;",desc:"LATIN SMALL LETTER A WITH ACUTE "},{"char":"&acirc;",desc:"LATIN SMALL LETTER A WITH CIRCUMFLEX"},{"char":"&atilde;",desc:"LATIN SMALL LETTER A WITH TILDE"},{"char":"&auml;",desc:"LATIN SMALL LETTER A WITH DIAERESIS"},{"char":"&aring;",desc:"LATIN SMALL LETTER A WITH RING ABOVE"},{"char":"&aelig;",desc:"LATIN SMALL LETTER AE"},{"char":"&ccedil;",desc:"LATIN SMALL LETTER C WITH CEDILLA"},{"char":"&egrave;",desc:"LATIN SMALL LETTER E WITH GRAVE"},{"char":"&eacute;",desc:"LATIN SMALL LETTER E WITH ACUTE"},{"char":"&ecirc;",desc:"LATIN SMALL LETTER E WITH CIRCUMFLEX"},{"char":"&euml;",desc:"LATIN SMALL LETTER E WITH DIAERESIS"},{"char":"&igrave;",desc:"LATIN SMALL LETTER I WITH GRAVE"},{"char":"&iacute;",desc:"LATIN SMALL LETTER I WITH ACUTE"},{"char":"&icirc;",desc:"LATIN SMALL LETTER I WITH CIRCUMFLEX"},{"char":"&iuml;",desc:"LATIN SMALL LETTER I WITH DIAERESIS"},{"char":"&eth;",desc:"LATIN SMALL LETTER ETH"},{"char":"&ntilde;",desc:"LATIN SMALL LETTER N WITH TILDE"},{"char":"&ograve;",desc:"LATIN SMALL LETTER O WITH GRAVE"},{"char":"&oacute;",desc:"LATIN SMALL LETTER O WITH ACUTE"},{"char":"&ocirc;",desc:"LATIN SMALL LETTER O WITH CIRCUMFLEX"},{"char":"&otilde;",desc:"LATIN SMALL LETTER O WITH TILDE"},{"char":"&ouml;",desc:"LATIN SMALL LETTER O WITH DIAERESIS"},{"char":"&divide;",desc:"DIVISION SIGN"},{"char":"&oslash;",desc:"LATIN SMALL LETTER O WITH STROKE"},{"char":"&ugrave;",desc:"LATIN SMALL LETTER U WITH GRAVE"},{"char":"&uacute;",desc:"LATIN SMALL LETTER U WITH ACUTE"},{"char":"&ucirc;",desc:"LATIN SMALL LETTER U WITH CIRCUMFLEX"},{"char":"&uuml;",desc:"LATIN SMALL LETTER U WITH DIAERESIS"},{"char":"&yacute;",desc:"LATIN SMALL LETTER Y WITH ACUTE"},{"char":"&thorn;",desc:"LATIN SMALL LETTER THORN"},{"char":"&yuml;",desc:"LATIN SMALL LETTER Y WITH DIAERESIS"}]},{title:"Greek",list:[{"char":"&Alpha;",desc:"GREEK CAPITAL LETTER ALPHA"},{"char":"&Beta;",desc:"GREEK CAPITAL LETTER BETA"},{"char":"&Gamma;",desc:"GREEK CAPITAL LETTER GAMMA"},{"char":"&Delta;",desc:"GREEK CAPITAL LETTER DELTA"},{"char":"&Epsilon;",desc:"GREEK CAPITAL LETTER EPSILON"},{"char":"&Zeta;",desc:"GREEK CAPITAL LETTER ZETA"},{"char":"&Eta;",desc:"GREEK CAPITAL LETTER ETA"},{"char":"&Theta;",desc:"GREEK CAPITAL LETTER THETA"},{"char":"&Iota;",desc:"GREEK CAPITAL LETTER IOTA"},{"char":"&Kappa;",desc:"GREEK CAPITAL LETTER KAPPA"},{"char":"&Lambda;",desc:"GREEK CAPITAL LETTER LAMBDA"},{"char":"&Mu;",desc:"GREEK CAPITAL LETTER MU"},{"char":"&Nu;",desc:"GREEK CAPITAL LETTER NU"},{"char":"&Xi;",desc:"GREEK CAPITAL LETTER XI"},{"char":"&Omicron;",desc:"GREEK CAPITAL LETTER OMICRON"},{"char":"&Pi;",desc:"GREEK CAPITAL LETTER PI"},{"char":"&Rho;",desc:"GREEK CAPITAL LETTER RHO"},{"char":"&Sigma;",desc:"GREEK CAPITAL LETTER SIGMA"},{"char":"&Tau;",desc:"GREEK CAPITAL LETTER TAU"},{"char":"&Upsilon;",desc:"GREEK CAPITAL LETTER UPSILON"},{"char":"&Phi;",desc:"GREEK CAPITAL LETTER PHI"},{"char":"&Chi;",desc:"GREEK CAPITAL LETTER CHI"},{"char":"&Psi;",desc:"GREEK CAPITAL LETTER PSI"},{"char":"&Omega;",desc:"GREEK CAPITAL LETTER OMEGA"},{"char":"&alpha;",desc:"GREEK SMALL LETTER ALPHA"},{"char":"&beta;",desc:"GREEK SMALL LETTER BETA"},{"char":"&gamma;",desc:"GREEK SMALL LETTER GAMMA"},{"char":"&delta;",desc:"GREEK SMALL LETTER DELTA"},{"char":"&epsilon;",desc:"GREEK SMALL LETTER EPSILON"},{"char":"&zeta;",desc:"GREEK SMALL LETTER ZETA"},{"char":"&eta;",desc:"GREEK SMALL LETTER ETA"},{"char":"&theta;",desc:"GREEK SMALL LETTER THETA"},{"char":"&iota;",desc:"GREEK SMALL LETTER IOTA"},{"char":"&kappa;",desc:"GREEK SMALL LETTER KAPPA"},{"char":"&lambda;",desc:"GREEK SMALL LETTER LAMBDA"},{"char":"&mu;",desc:"GREEK SMALL LETTER MU"},{"char":"&nu;",desc:"GREEK SMALL LETTER NU"},{"char":"&xi;",desc:"GREEK SMALL LETTER XI"},{"char":"&omicron;",desc:"GREEK SMALL LETTER OMICRON"},{"char":"&pi;",desc:"GREEK SMALL LETTER PI"},{"char":"&rho;",desc:"GREEK SMALL LETTER RHO"},{"char":"&sigmaf;",desc:"GREEK SMALL LETTER FINAL SIGMA"},{"char":"&sigma;",desc:"GREEK SMALL LETTER SIGMA"},{"char":"&tau;",desc:"GREEK SMALL LETTER TAU"},{"char":"&upsilon;",desc:"GREEK SMALL LETTER UPSILON"},{"char":"&phi;",desc:"GREEK SMALL LETTER PHI"},{"char":"&chi;",desc:"GREEK SMALL LETTER CHI"},{"char":"&psi;",desc:"GREEK SMALL LETTER PSI"},{"char":"&omega;",desc:"GREEK SMALL LETTER OMEGA"},{"char":"&thetasym;",desc:"GREEK THETA SYMBOL"},{"char":"&upsih;",desc:"GREEK UPSILON WITH HOOK SYMBOL"},{"char":"&straightphi;",desc:"GREEK PHI SYMBOL"},{"char":"&piv;",desc:"GREEK PI SYMBOL"},{"char":"&Gammad;",desc:"GREEK LETTER DIGAMMA"},{"char":"&gammad;",desc:"GREEK SMALL LETTER DIGAMMA"},{"char":"&varkappa;",desc:"GREEK KAPPA SYMBOL"},{"char":"&varrho;",desc:"GREEK RHO SYMBOL"},{"char":"&straightepsilon;",desc:"GREEK LUNATE EPSILON SYMBOL"},{"char":"&backepsilon;",desc:"GREEK REVERSED LUNATE EPSILON SYMBOL"}]},{title:"Cyrillic",list:[{"char":"&#x400",desc:"CYRILLIC CAPITAL LETTER IE WITH GRAVE"},{"char":"&#x401",desc:"CYRILLIC CAPITAL LETTER IO"},{"char":"&#x402",desc:"CYRILLIC CAPITAL LETTER DJE"},{"char":"&#x403",desc:"CYRILLIC CAPITAL LETTER GJE"},{"char":"&#x404",desc:"CYRILLIC CAPITAL LETTER UKRAINIAN IE"},{"char":"&#x405",desc:"CYRILLIC CAPITAL LETTER DZE"},{"char":"&#x406",desc:"CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x407",desc:"CYRILLIC CAPITAL LETTER YI"},{"char":"&#x408",desc:"CYRILLIC CAPITAL LETTER JE"},{"char":"&#x409",desc:"CYRILLIC CAPITAL LETTER LJE"},{"char":"&#x40A",desc:"CYRILLIC CAPITAL LETTER NJE"},{"char":"&#x40B",desc:"CYRILLIC CAPITAL LETTER TSHE"},{"char":"&#x40C",desc:"CYRILLIC CAPITAL LETTER KJE"},{"char":"&#x40D",desc:"CYRILLIC CAPITAL LETTER I WITH GRAVE"},{"char":"&#x40E",desc:"CYRILLIC CAPITAL LETTER SHORT U"},{"char":"&#x40F",desc:"CYRILLIC CAPITAL LETTER DZHE"},{"char":"&#x410",desc:"CYRILLIC CAPITAL LETTER A"},{"char":"&#x411",desc:"CYRILLIC CAPITAL LETTER BE"},{"char":"&#x412",desc:"CYRILLIC CAPITAL LETTER VE"},{"char":"&#x413",desc:"CYRILLIC CAPITAL LETTER GHE"},{"char":"&#x414",desc:"CYRILLIC CAPITAL LETTER DE"},{"char":"&#x415",desc:"CYRILLIC CAPITAL LETTER IE"},{"char":"&#x416",desc:"CYRILLIC CAPITAL LETTER ZHE"},{"char":"&#x417",desc:"CYRILLIC CAPITAL LETTER ZE"},{"char":"&#x418",desc:"CYRILLIC CAPITAL LETTER I"},{"char":"&#x419",desc:"CYRILLIC CAPITAL LETTER SHORT I"},{"char":"&#x41A",desc:"CYRILLIC CAPITAL LETTER KA"},{"char":"&#x41B",desc:"CYRILLIC CAPITAL LETTER EL"},{"char":"&#x41C",desc:"CYRILLIC CAPITAL LETTER EM"},{"char":"&#x41D",desc:"CYRILLIC CAPITAL LETTER EN"},{"char":"&#x41E",desc:"CYRILLIC CAPITAL LETTER O"},{"char":"&#x41F",desc:"CYRILLIC CAPITAL LETTER PE"},{"char":"&#x420",desc:"CYRILLIC CAPITAL LETTER ER"},{"char":"&#x421",desc:"CYRILLIC CAPITAL LETTER ES"},{"char":"&#x422",desc:"CYRILLIC CAPITAL LETTER TE"},{"char":"&#x423",desc:"CYRILLIC CAPITAL LETTER U"},{"char":"&#x424",desc:"CYRILLIC CAPITAL LETTER EF"},{"char":"&#x425",desc:"CYRILLIC CAPITAL LETTER HA"},{"char":"&#x426",desc:"CYRILLIC CAPITAL LETTER TSE"},{"char":"&#x427",desc:"CYRILLIC CAPITAL LETTER CHE"},{"char":"&#x428",desc:"CYRILLIC CAPITAL LETTER SHA"},{"char":"&#x429",desc:"CYRILLIC CAPITAL LETTER SHCHA"},{"char":"&#x42A",desc:"CYRILLIC CAPITAL LETTER HARD SIGN"},{"char":"&#x42B",desc:"CYRILLIC CAPITAL LETTER YERU"},{"char":"&#x42C",desc:"CYRILLIC CAPITAL LETTER SOFT SIGN"},{"char":"&#x42D",desc:"CYRILLIC CAPITAL LETTER E"},{"char":"&#x42E",desc:"CYRILLIC CAPITAL LETTER YU"},{"char":"&#x42F",desc:"CYRILLIC CAPITAL LETTER YA"},{"char":"&#x430",desc:"CYRILLIC SMALL LETTER A"},{"char":"&#x431",desc:"CYRILLIC SMALL LETTER BE"},{"char":"&#x432",desc:"CYRILLIC SMALL LETTER VE"},{"char":"&#x433",desc:"CYRILLIC SMALL LETTER GHE"},{"char":"&#x434",desc:"CYRILLIC SMALL LETTER DE"},{"char":"&#x435",desc:"CYRILLIC SMALL LETTER IE"},{"char":"&#x436",desc:"CYRILLIC SMALL LETTER ZHE"},{"char":"&#x437",desc:"CYRILLIC SMALL LETTER ZE"},{"char":"&#x438",desc:"CYRILLIC SMALL LETTER I"},{"char":"&#x439",desc:"CYRILLIC SMALL LETTER SHORT I"},{"char":"&#x43A",desc:"CYRILLIC SMALL LETTER KA"},{"char":"&#x43B",desc:"CYRILLIC SMALL LETTER EL"},{"char":"&#x43C",desc:"CYRILLIC SMALL LETTER EM"},{"char":"&#x43D",desc:"CYRILLIC SMALL LETTER EN"},{"char":"&#x43E",desc:"CYRILLIC SMALL LETTER O"},{"char":"&#x43F",desc:"CYRILLIC SMALL LETTER PE"},{"char":"&#x440",desc:"CYRILLIC SMALL LETTER ER"},{"char":"&#x441",desc:"CYRILLIC SMALL LETTER ES"},{"char":"&#x442",desc:"CYRILLIC SMALL LETTER TE"},{"char":"&#x443",desc:"CYRILLIC SMALL LETTER U"},{"char":"&#x444",desc:"CYRILLIC SMALL LETTER EF"},{"char":"&#x445",desc:"CYRILLIC SMALL LETTER HA"},{"char":"&#x446",desc:"CYRILLIC SMALL LETTER TSE"},{"char":"&#x447",desc:"CYRILLIC SMALL LETTER CHE"},{"char":"&#x448",desc:"CYRILLIC SMALL LETTER SHA"},{"char":"&#x449",desc:"CYRILLIC SMALL LETTER SHCHA"},{"char":"&#x44A",desc:"CYRILLIC SMALL LETTER HARD SIGN"},{"char":"&#x44B",desc:"CYRILLIC SMALL LETTER YERU"},{"char":"&#x44C",desc:"CYRILLIC SMALL LETTER SOFT SIGN"},{"char":"&#x44D",desc:"CYRILLIC SMALL LETTER E"},{"char":"&#x44E",desc:"CYRILLIC SMALL LETTER YU"},{"char":"&#x44F",desc:"CYRILLIC SMALL LETTER YA"},{"char":"&#x450",desc:"CYRILLIC SMALL LETTER IE WITH GRAVE"},{"char":"&#x451",desc:"CYRILLIC SMALL LETTER IO"},{"char":"&#x452",desc:"CYRILLIC SMALL LETTER DJE"},{"char":"&#x453",desc:"CYRILLIC SMALL LETTER GJE"},{"char":"&#x454",desc:"CYRILLIC SMALL LETTER UKRAINIAN IE"},{"char":"&#x455",desc:"CYRILLIC SMALL LETTER DZE"},{"char":"&#x456",desc:"CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x457",desc:"CYRILLIC SMALL LETTER YI"},{"char":"&#x458",desc:"CYRILLIC SMALL LETTER JE"},{"char":"&#x459",desc:"CYRILLIC SMALL LETTER LJE"},{"char":"&#x45A",desc:"CYRILLIC SMALL LETTER NJE"},{"char":"&#x45B",desc:"CYRILLIC SMALL LETTER TSHE"},{"char":"&#x45C",desc:"CYRILLIC SMALL LETTER KJE"},{"char":"&#x45D",desc:"CYRILLIC SMALL LETTER I WITH GRAVE"},{"char":"&#x45E",desc:"CYRILLIC SMALL LETTER SHORT U"},{"char":"&#x45F",desc:"CYRILLIC SMALL LETTER DZHE"}]},{title:"Punctuation",list:[{"char":"&ndash;",desc:"EN DASH"},{"char":"&mdash;",desc:"EM DASH"},{"char":"&lsquo;",desc:"LEFT SINGLE QUOTATION MARK"},{"char":"&rsquo;",desc:"RIGHT SINGLE QUOTATION MARK"},{"char":"&sbquo;",desc:"SINGLE LOW-9 QUOTATION MARK"},{"char":"&ldquo;",desc:"LEFT DOUBLE QUOTATION MARK"},{"char":"&rdquo;",desc:"RIGHT DOUBLE QUOTATION MARK"},{"char":"&bdquo;",desc:"DOUBLE LOW-9 QUOTATION MARK"},{"char":"&dagger;",desc:"DAGGER"},{"char":"&Dagger;",desc:"DOUBLE DAGGER"},{"char":"&bull;",desc:"BULLET"},{"char":"&hellip;",desc:"HORIZONTAL ELLIPSIS"},{"char":"&permil;",desc:"PER MILLE SIGN"},{"char":"&prime;",desc:"PRIME"},{"char":"&Prime;",desc:"DOUBLE PRIME"},{"char":"&lsaquo;",desc:"SINGLE LEFT-POINTING ANGLE QUOTATION MARK"},{"char":"&rsaquo;",desc:"SINGLE RIGHT-POINTING ANGLE QUOTATION MARK"},{"char":"&oline;",desc:"OVERLINE"},{"char":"&frasl;",desc:"FRACTION SLASH"}]},{title:"Currency",list:[{"char":"&#x20A0",desc:"EURO-CURRENCY SIGN"},{"char":"&#x20A1",desc:"COLON SIGN"},{"char":"&#x20A2",desc:"CRUZEIRO SIGN"},{"char":"&#x20A3",desc:"FRENCH FRANC SIGN"},{"char":"&#x20A4",desc:"LIRA SIGN"},{"char":"&#x20A5",desc:"MILL SIGN"},{"char":"&#x20A6",desc:"NAIRA SIGN"},{"char":"&#x20A7",desc:"PESETA SIGN"},{"char":"&#x20A8",desc:"RUPEE SIGN"},{"char":"&#x20A9",desc:"WON SIGN"},{"char":"&#x20AA",desc:"NEW SHEQEL SIGN"},{"char":"&#x20AB",desc:"DONG SIGN"},{"char":"&#x20AC",desc:"EURO SIGN"},{"char":"&#x20AD",desc:"KIP SIGN"},{"char":"&#x20AE",desc:"TUGRIK SIGN"},{"char":"&#x20AF",desc:"DRACHMA SIGN"},{"char":"&#x20B0",desc:"GERMAN PENNY SYMBOL"},{"char":"&#x20B1",desc:"PESO SIGN"},{"char":"&#x20B2",desc:"GUARANI SIGN"},{"char":"&#x20B3",desc:"AUSTRAL SIGN"},{"char":"&#x20B4",desc:"HRYVNIA SIGN"},{"char":"&#x20B5",desc:"CEDI SIGN"},{"char":"&#x20B6",desc:"LIVRE TOURNOIS SIGN"},{"char":"&#x20B7",desc:"SPESMILO SIGN"},{"char":"&#x20B8",desc:"TENGE SIGN"},{"char":"&#x20B9",desc:"INDIAN RUPEE SIGN"}]},{title:"Arrows",list:[{"char":"&#x2190",desc:"LEFTWARDS ARROW"},{"char":"&#x2191",desc:"UPWARDS ARROW"},{"char":"&#x2192",desc:"RIGHTWARDS ARROW"},{"char":"&#x2193",desc:"DOWNWARDS ARROW"},{"char":"&#x2194",desc:"LEFT RIGHT ARROW"},{"char":"&#x2195",desc:"UP DOWN ARROW"},{"char":"&#x2196",desc:"NORTH WEST ARROW"},{"char":"&#x2197",desc:"NORTH EAST ARROW"},{"char":"&#x2198",desc:"SOUTH EAST ARROW"},{"char":"&#x2199",desc:"SOUTH WEST ARROW"},{"char":"&#x219A",desc:"LEFTWARDS ARROW WITH STROKE"},{"char":"&#x219B",desc:"RIGHTWARDS ARROW WITH STROKE"},{"char":"&#x219C",desc:"LEFTWARDS WAVE ARROW"},{"char":"&#x219D",desc:"RIGHTWARDS WAVE ARROW"},{"char":"&#x219E",desc:"LEFTWARDS TWO HEADED ARROW"},{"char":"&#x219F",desc:"UPWARDS TWO HEADED ARROW"},{"char":"&#x21A0",desc:"RIGHTWARDS TWO HEADED ARROW"},{"char":"&#x21A1",desc:"DOWNWARDS TWO HEADED ARROW"},{"char":"&#x21A2",desc:"LEFTWARDS ARROW WITH TAIL"},{"char":"&#x21A3",desc:"RIGHTWARDS ARROW WITH TAIL"},{"char":"&#x21A4",desc:"LEFTWARDS ARROW FROM BAR"},{"char":"&#x21A5",desc:"UPWARDS ARROW FROM BAR"},{"char":"&#x21A6",desc:"RIGHTWARDS ARROW FROM BAR"},{"char":"&#x21A7",desc:"DOWNWARDS ARROW FROM BAR"},{"char":"&#x21A8",desc:"UP DOWN ARROW WITH BASE"},{"char":"&#x21A9",desc:"LEFTWARDS ARROW WITH HOOK"},{"char":"&#x21AA",desc:"RIGHTWARDS ARROW WITH HOOK"},{"char":"&#x21AB",desc:"LEFTWARDS ARROW WITH LOOP"},{"char":"&#x21AC",desc:"RIGHTWARDS ARROW WITH LOOP"},{"char":"&#x21AD",desc:"LEFT RIGHT WAVE ARROW"},{"char":"&#x21AE",desc:"LEFT RIGHT ARROW WITH STROKE"},{"char":"&#x21AF",desc:"DOWNWARDS ZIGZAG ARROW"},{"char":"&#x21B0",desc:"UPWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B1",desc:"UPWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B2",desc:"DOWNWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B3",desc:"DOWNWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B4",desc:"RIGHTWARDS ARROW WITH CORNER DOWNWARDS"},{"char":"&#x21B5",desc:"DOWNWARDS ARROW WITH CORNER LEFTWARDS"},{"char":"&#x21B6",desc:"ANTICLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B7",desc:"CLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B8",desc:"NORTH WEST ARROW TO LONG BAR"},{"char":"&#x21B9",desc:"LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR"},{"char":"&#x21BA",desc:"ANTICLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BB",desc:"CLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BC",desc:"LEFTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21BD",desc:"LEFTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21BE",desc:"UPWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21BF",desc:"UPWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C0",desc:"RIGHTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21C1",desc:"RIGHTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21C2",desc:"DOWNWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21C3",desc:"DOWNWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C4",desc:"RIGHTWARDS ARROW OVER LEFTWARDS ARROW"},{"char":"&#x21C5",desc:"UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW"},{"char":"&#x21C6",desc:"LEFTWARDS ARROW OVER RIGHTWARDS ARROW"},{"char":"&#x21C7",desc:"LEFTWARDS PAIRED ARROWS"},{"char":"&#x21C8",desc:"UPWARDS PAIRED ARROWS"},{"char":"&#x21C9",desc:"RIGHTWARDS PAIRED ARROWS"},{"char":"&#x21CA",desc:"DOWNWARDS PAIRED ARROWS"},{"char":"&#x21CB",desc:"LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON"},{"char":"&#x21CC",desc:"RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON"},{"char":"&#x21CD",desc:"LEFTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21CE",desc:"LEFT RIGHT DOUBLE ARROW WITH STROKE"},{"char":"&#x21CF",desc:"RIGHTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21D0",desc:"LEFTWARDS DOUBLE ARROW"},{"char":"&#x21D1",desc:"UPWARDS DOUBLE ARROW"},{"char":"&#x21D2",desc:"RIGHTWARDS DOUBLE ARROW"},{"char":"&#x21D3",desc:"DOWNWARDS DOUBLE ARROW"},{"char":"&#x21D4",desc:"LEFT RIGHT DOUBLE ARROW"},{"char":"&#x21D5",desc:"UP DOWN DOUBLE ARROW"},{"char":"&#x21D6",desc:"NORTH WEST DOUBLE ARROW"},{"char":"&#x21D7",desc:"NORTH EAST DOUBLE ARROW"},{"char":"&#x21D8",desc:"SOUTH EAST DOUBLE ARROW"},{"char":"&#x21D9",desc:"SOUTH WEST DOUBLE ARROW"},{"char":"&#x21DA",desc:"LEFTWARDS TRIPLE ARROW"},{"char":"&#x21DB",desc:"RIGHTWARDS TRIPLE ARROW"},{"char":"&#x21DC",desc:"LEFTWARDS SQUIGGLE ARROW"},{"char":"&#x21DD",desc:"RIGHTWARDS SQUIGGLE ARROW"},{"char":"&#x21DE",desc:"UPWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21DF",desc:"DOWNWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21E0",desc:"LEFTWARDS DASHED ARROW"},{"char":"&#x21E1",desc:"UPWARDS DASHED ARROW"},{"char":"&#x21E2",desc:"RIGHTWARDS DASHED ARROW"},{"char":"&#x21E3",desc:"DOWNWARDS DASHED ARROW"},{"char":"&#x21E4",desc:"LEFTWARDS ARROW TO BAR"},{"char":"&#x21E5",desc:"RIGHTWARDS ARROW TO BAR"},{"char":"&#x21E6",desc:"LEFTWARDS WHITE ARROW"},{"char":"&#x21E7",desc:"UPWARDS WHITE ARROW"},{"char":"&#x21E8",desc:"RIGHTWARDS WHITE ARROW"},{"char":"&#x21E9",desc:"DOWNWARDS WHITE ARROW"},{"char":"&#x21EA",desc:"UPWARDS WHITE ARROW FROM BAR"},{"char":"&#x21EB",desc:"UPWARDS WHITE ARROW ON PEDESTAL"},{"char":"&#x21EC",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR"},{"char":"&#x21ED",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR"},{"char":"&#x21EE",desc:"UPWARDS WHITE DOUBLE ARROW"},{"char":"&#x21EF",desc:"UPWARDS WHITE DOUBLE ARROW ON PEDESTAL"},{"char":"&#x21F0",desc:"RIGHTWARDS WHITE ARROW FROM WALL"},{"char":"&#x21F1",desc:"NORTH WEST ARROW TO CORNER"},{"char":"&#x21F2",desc:"SOUTH EAST ARROW TO CORNER"},{"char":"&#x21F3",desc:"UP DOWN WHITE ARROW"},{"char":"&#x21F4",desc:"RIGHT ARROW WITH SMALL CIRCLE"},{"char":"&#x21F5",desc:"DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW"},{"char":"&#x21F6",desc:"THREE RIGHTWARDS ARROWS"},{"char":"&#x21F7",desc:"LEFTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F8",desc:"RIGHTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F9",desc:"LEFT RIGHT ARROW WITH VERTICAL STROKE"},{"char":"&#x21FA",desc:"LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FB",desc:"RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FC",desc:"LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FD",desc:"LEFTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FE",desc:"RIGHTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FF",desc:"LEFT RIGHT OPEN-HEADED ARROW"}]},{title:"Math",list:[{"char":"&forall;",desc:"FOR ALL"},{"char":"&part;",desc:"PARTIAL DIFFERENTIAL"},{"char":"&exist;",desc:"THERE EXISTS"},{"char":"&empty;",desc:"EMPTY SET"},{"char":"&nabla;",desc:"NABLA"},{"char":"&isin;",desc:"ELEMENT OF"},{"char":"&notin;",desc:"NOT AN ELEMENT OF"},{"char":"&ni;",desc:"CONTAINS AS MEMBER"},{"char":"&prod;",desc:"N-ARY PRODUCT"},{"char":"&sum;",desc:"N-ARY SUMMATION"},{"char":"&minus;",desc:"MINUS SIGN"},{"char":"&lowast;",desc:"ASTERISK OPERATOR"},{"char":"&radic;",desc:"SQUARE ROOT"},{"char":"&prop;",desc:"PROPORTIONAL TO"},{"char":"&infin;",desc:"INFINITY"},{"char":"&ang;",desc:"ANGLE"},{"char":"&and;",desc:"LOGICAL AND"},{"char":"&or;",desc:"LOGICAL OR"},{"char":"&cap;",desc:"INTERSECTION"},{"char":"&cup;",desc:"UNION"},{"char":"&int;",desc:"INTEGRAL"},{"char":"&there4;",desc:"THEREFORE"},{"char":"&sim;",desc:"TILDE OPERATOR"},{"char":"&cong;",desc:"APPROXIMATELY EQUAL TO"},{"char":"&asymp;",
desc:"ALMOST EQUAL TO"},{"char":"&ne;",desc:"NOT EQUAL TO"},{"char":"&equiv;",desc:"IDENTICAL TO"},{"char":"&le;",desc:"LESS-THAN OR EQUAL TO"},{"char":"&ge;",desc:"GREATER-THAN OR EQUAL TO"},{"char":"&sub;",desc:"SUBSET OF"},{"char":"&sup;",desc:"SUPERSET OF"},{"char":"&nsub;",desc:"NOT A SUBSET OF"},{"char":"&sube;",desc:"SUBSET OF OR EQUAL TO"},{"char":"&supe;",desc:"SUPERSET OF OR EQUAL TO"},{"char":"&oplus;",desc:"CIRCLED PLUS"},{"char":"&otimes;",desc:"CIRCLED TIMES"},{"char":"&perp;",desc:"UP TACK"}]},{title:"Misc",list:[{"char":"&spades;",desc:"BLACK SPADE SUIT"},{"char":"&clubs;",desc:"BLACK CLUB SUIT"},{"char":"&hearts;",desc:"BLACK HEART SUIT"},{"char":"&diams;",desc:"BLACK DIAMOND SUIT"},{"char":"&#x2669",desc:"QUARTER NOTE"},{"char":"&#x266A",desc:"EIGHTH NOTE"},{"char":"&#x266B",desc:"BEAMED EIGHTH NOTES"},{"char":"&#x266C",desc:"BEAMED SIXTEENTH NOTES"},{"char":"&#x266D",desc:"MUSIC FLAT SIGN"},{"char":"&#x266E",desc:"MUSIC NATURAL SIGN"},{"char":"&#x2600",desc:"BLACK SUN WITH RAYS"},{"char":"&#x2601",desc:"CLOUD"},{"char":"&#x2602",desc:"UMBRELLA"},{"char":"&#x2603",desc:"SNOWMAN"},{"char":"&#x2615",desc:"HOT BEVERAGE"},{"char":"&#x2618",desc:"SHAMROCK"},{"char":"&#x262F",desc:"YIN YANG"},{"char":"&#x2714",desc:"HEAVY CHECK MARK"},{"char":"&#x2716",desc:"HEAVY MULTIPLICATION X"},{"char":"&#x2744",desc:"SNOWFLAKE"},{"char":"&#x275B",desc:"HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275C",desc:"HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275D",desc:"HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275E",desc:"HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x2764",desc:"HEAVY BLACK HEART"}]}]}),a.FE.PLUGINS.specialCharacters=function(b){function c(){}function d(){for(var a='<div class="fr-special-characters-modal">',c=0;c<b.opts.specialCharactersSets.length;c++){for(var d=b.opts.specialCharactersSets[c],e=d.list,f='<div class="fr-special-characters-list"><p class="fr-special-characters-title">'+b.language.translate(d.title)+"</p>",g=0;g<e.length;g++){var h=e[g];f+='<span class="fr-command fr-special-character" tabIndex="-1" role="button" value="'+h["char"]+'" title="'+h.desc+'">'+h["char"]+'<span class="fr-sr-only">'+b.language.translate(h.desc)+"&nbsp;&nbsp;&nbsp;</span></span>"}a+=f+"</div>"}return a+="</div>"}function e(a,c){b.events.disableBlur(),a.focus(),c.preventDefault(),c.stopPropagation()}function f(){b.events.$on(l,"keydown",function(c){var d=c.which,f=l.find("span.fr-special-character:focus:first");if(!(f.length||d!=a.FE.KEYCODE.F10||b.keys.ctrlKey(c)||c.shiftKey)&&c.altKey){var g=l.find("span.fr-special-character:first");return e(g,c),!1}if(d==a.FE.KEYCODE.TAB||d==a.FE.KEYCODE.ARROW_LEFT||d==a.FE.KEYCODE.ARROW_RIGHT){var h=null,i=null,k=!1;return d==a.FE.KEYCODE.ARROW_LEFT||d==a.FE.KEYCODE.ARROW_RIGHT?(i=d==a.FE.KEYCODE.ARROW_RIGHT,k=!0):i=!c.shiftKey,f.length?(k&&(h=i?f.nextAll("span.fr-special-character:first"):f.prevAll("span.fr-special-character:first")),h&&h.length||(h=i?f.parent().next().find("span.fr-special-character:first"):f.parent().prev().find("span.fr-special-character:"+(k?"last":"first")),h.length||(h=l.find("span.fr-special-character:"+(i?"first":"last"))))):h=l.find("span.fr-special-character:"+(i?"first":"last")),e(h,c),!1}if(d!=a.FE.KEYCODE.ENTER||!f.length)return!0;var m=j.data("instance")||b;m.specialCharacters.insert(f)},!0)}function g(){if(!j){var c="<h4>"+b.language.translate("Special Characters")+"</h4>",e=d(),g=b.modals.create(m,c,e);j=g.$modal,k=g.$head,l=g.$body,b.events.$on(a(b.o_win),"resize",function(){var a=j.data("instance")||b;a.modals.resize(m)}),b.events.bindClick(l,".fr-special-character",function(c){var d=j.data("instance")||b,e=a(c.currentTarget);d.specialCharacters.insert(e)}),f()}b.modals.show(m),b.modals.resize(m)}function h(){b.modals.hide(m)}function i(a){b.specialCharacters.hide(),b.undo.saveStep(),b.html.insert(a.attr("value"),!0),b.undo.saveStep()}var j,k,l,m="special_characters";return{_init:c,show:g,hide:h,insert:i}},a.FroalaEditor.DefineIcon("specialCharacters",{template:"text",NAME:"&#937;"}),a.FE.RegisterCommand("specialCharacters",{title:"Special Characters",icon:"specialCharacters",undo:!1,focus:!1,modal:!0,callback:function(){this.specialCharacters.show()},plugin:"specialCharacters",showOnMobile:!1}),a.extend(a.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]"}),a.extend(a.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),a.FE.PLUGINS.table=function(b){function c(){var a=b.$tb.find('.fr-command[data-cmd="insertTable"]'),c=b.popups.get("table.insert");if(c||(c=g()),!c.hasClass("fr-active")){b.popups.refresh("table.insert"),b.popups.setContainer("table.insert",b.$tb);var d=a.offset().left+a.outerWidth()/2,e=a.offset().top+(b.opts.toolbarBottom?10:a.outerHeight()-10);b.popups.show("table.insert",d,e,a.outerHeight())}}function d(){var a=J();if(a){var c=b.popups.get("table.edit");if(c||(c=k()),c){b.popups.setContainer("table.edit",b.$sc);var d=R(a),e=(d.left+d.right)/2,f=d.bottom;b.popups.show("table.edit",e,f,d.bottom-d.top),b.edit.isDisabled()&&(b.toolbar.disable(),b.$el.removeClass("fr-no-selection"),b.edit.on(),b.button.bulkRefresh(),b.selection.setAtEnd(b.$el.find(".fr-selected-cell:last").get(0)),b.selection.restore())}}}function e(){var a=J();if(a){var c=b.popups.get("table.colors");c||(c=l()),b.popups.setContainer("table.colors",b.$sc);var d=R(a),e=(d.left+d.right)/2,f=d.bottom;p(),b.popups.show("table.colors",e,f,d.bottom-d.top)}}function f(){0===ta().length&&b.toolbar.enable()}function g(c){if(c)return b.popups.onHide("table.insert",function(){b.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var d="";b.opts.tableInsertButtons.length>0&&(d='<div class="fr-buttons">'+b.button.buildList(b.opts.tableInsertButtons)+"</div>");var e={buttons:d,rows_columns:i()},f=b.popups.create("table.insert",e);return b.events.$on(f,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(b){h(a(b.currentTarget))},!0),j(f),f}function h(a){var c=a.data("row"),d=a.data("col"),e=a.parent();e.siblings(".fr-table-size-info").html(c+" &times; "+d),e.find("> span").removeClass("hover fr-active-item");for(var f=1;f<=b.opts.tableInsertMaxSize;f++)for(var g=0;g<=b.opts.tableInsertMaxSize;g++){var h=e.find('> span[data-row="'+f+'"][data-col="'+g+'"]');c>=f&&d>=g?h.addClass("hover"):c+1>=f||2>=f&&!b.helpers.isMobile()?h.css("display","inline-block"):f>2&&!b.helpers.isMobile()&&h.css("display","none")}a.addClass("fr-active-item")}function i(){for(var a='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',c=1;c<=b.opts.tableInsertMaxSize;c++){for(var d=1;d<=b.opts.tableInsertMaxSize;d++){var e="inline-block";c>2&&!b.helpers.isMobile()&&(e="none");var f="fr-table-cell ";1==c&&1==d&&(f+=" hover"),a+='<span class="fr-command '+f+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+c+'" data-col="'+d+'" data-param1="'+c+'" data-param2="'+d+'" style="display: '+e+';" role="button"><span></span><span class="fr-sr-only">'+c+" &times; "+d+"&nbsp;&nbsp;&nbsp;</span></span>"}a+='<div class="new-line"></div>'}return a+="</div></div>"}function j(c){b.events.$on(c,"focus","[tabIndex]",function(b){var c=a(b.currentTarget);h(c)}),b.events.on("popup.tab",function(c){var d=a(c.currentTarget);if(!b.popups.isVisible("table.insert")||!d.is("span, a"))return!0;var e,f=c.which;if(a.FE.KEYCODE.ARROW_UP==f||a.FE.KEYCODE.ARROW_DOWN==f||a.FE.KEYCODE.ARROW_LEFT==f||a.FE.KEYCODE.ARROW_RIGHT==f){if(d.is("span.fr-table-cell")){var g=d.parent().find("span.fr-table-cell"),i=g.index(d),j=b.opts.tableInsertMaxSize,k=i%j,l=Math.floor(i/j);a.FE.KEYCODE.ARROW_UP==f?l=Math.max(0,l-1):a.FE.KEYCODE.ARROW_DOWN==f?l=Math.min(b.opts.tableInsertMaxSize-1,l+1):a.FE.KEYCODE.ARROW_LEFT==f?k=Math.max(0,k-1):a.FE.KEYCODE.ARROW_RIGHT==f&&(k=Math.min(b.opts.tableInsertMaxSize-1,k+1));var m=l*j+k,n=a(g.get(m));h(n),b.events.disableBlur(),n.focus(),e=!1}}else a.FE.KEYCODE.ENTER==f&&(b.button.exec(d),e=!1);return e===!1&&(c.preventDefault(),c.stopPropagation()),e},!0)}function k(a){if(a)return b.popups.onHide("table.edit",f),!0;var c="";if(b.opts.tableEditButtons.length>0){c='<div class="fr-buttons">'+b.button.buildList(b.opts.tableEditButtons)+"</div>";var e={buttons:c},g=b.popups.create("table.edit",e);return b.events.$on(b.$wp,"scroll.table-edit",function(){b.popups.isVisible("table.edit")&&d()}),g}return!1}function l(){var a="";b.opts.tableColorsButtons.length>0&&(a='<div class="fr-buttons fr-table-colors-buttons">'+b.button.buildList(b.opts.tableColorsButtons)+"</div>");var c="";b.opts.colorsHEXInput&&(c='<div class="fr-table-colors-hex-layer fr-active fr-layer" id="fr-table-colors-hex-layer-'+b.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-table-colors-hex-layer-text-'+b.id+'" type="text" placeholder="'+b.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="tableCellBackgroundCustomColor" tabIndex="2" role="button">'+b.language.translate("OK")+"</button></div></div>");var d={buttons:a,colors:m(),custom_color:c},f=b.popups.create("table.colors",d);return b.events.$on(b.$wp,"scroll.table-colors",function(){b.popups.isVisible("table.colors")&&e()}),o(f),f}function m(){for(var a='<div class="fr-table-colors">',c=0;c<b.opts.tableColors.length;c++)0!==c&&c%b.opts.tableColorsStep===0&&(a+="<br>"),a+="REMOVE"!=b.opts.tableColors[c]?'<span class="fr-command" style="background: '+b.opts.tableColors[c]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+b.opts.tableColors[c]+'"><span class="fr-sr-only">'+b.language.translate("Color")+" "+b.opts.tableColors[c]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+b.language.translate("Clear Formatting")+'">'+b.icon.create("tableColorRemove")+'<span class="fr-sr-only">'+b.language.translate("Clear Formatting")+"</span></span>";return a+="</div>"}function n(){var a=b.popups.get("table.colors"),c=a.find(".fr-table-colors-hex-layer input");c.length&&F(c.val())}function o(c){b.events.on("popup.tab",function(d){var e=a(d.currentTarget);if(!b.popups.isVisible("table.colors")||!e.is("span"))return!0;var f=d.which,g=!0;if(a.FE.KEYCODE.TAB==f){var h=c.find(".fr-buttons");g=!b.accessibility.focusToolbar(h,d.shiftKey?!0:!1)}else if(a.FE.KEYCODE.ARROW_UP==f||a.FE.KEYCODE.ARROW_DOWN==f||a.FE.KEYCODE.ARROW_LEFT==f||a.FE.KEYCODE.ARROW_RIGHT==f){var i=e.parent().find("span.fr-command"),j=i.index(e),k=b.opts.colorsStep,l=Math.floor(i.length/k),m=j%k,n=Math.floor(j/k),o=n*k+m,p=l*k;a.FE.KEYCODE.ARROW_UP==f?o=((o-k)%p+p)%p:a.FE.KEYCODE.ARROW_DOWN==f?o=(o+k)%p:a.FE.KEYCODE.ARROW_LEFT==f?o=((o-1)%p+p)%p:a.FE.KEYCODE.ARROW_RIGHT==f&&(o=(o+1)%p);var q=a(i.get(o));b.events.disableBlur(),q.focus(),g=!1}else a.FE.KEYCODE.ENTER==f&&(b.button.exec(e),g=!1);return g===!1&&(d.preventDefault(),d.stopPropagation()),g},!0)}function p(){var a=b.popups.get("table.colors"),c=b.$el.find(".fr-selected-cell:first"),d=b.helpers.RGBToHex(c.css("background-color")),e=a.find(".fr-table-colors-hex-layer input");a.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),a.find('span[data-param1="'+d+'"]').addClass("fr-selected-color fr-active-item"),e.val(d).trigger("change")}function q(c,d){var e,f,g='<table style="width: 100%;" class="fr-inserted-table"><tbody>',h=100/d;for(e=0;c>e;e++){for(g+="<tr>",f=0;d>f;f++)g+='<td style="width: '+h.toFixed(4)+'%;">',0===e&&0===f&&(g+=a.FE.MARKERS),g+="<br></td>";g+="</tr>"}g+="</tbody></table>",b.html.insert(g),b.selection.restore();var i=b.$el.find(".fr-inserted-table");i.removeClass("fr-inserted-table"),b.events.trigger("table.inserted",[i.get(0)])}function r(){if(ta().length>0){var a=ua();b.selection.setBefore(a.get(0))||b.selection.setAfter(a.get(0)),b.selection.restore(),b.popups.hide("table.edit"),a.remove(),b.toolbar.enable()}}function s(){var b=ua();if(b.length>0&&0===b.find("th").length){var c,e="<thead><tr>",f=0;for(b.find("tr:first > td").each(function(){var b=a(this);f+=parseInt(b.attr("colspan"),10)||1}),c=0;f>c;c++)e+="<th><br></th>";e+="</tr></thead>",b.prepend(e),d()}}function t(){var a=ua(),c=a.find("thead");if(c.length>0)if(0===a.find("tbody tr").length)r();else if(c.remove(),ta().length>0)d();else{b.popups.hide("table.edit");var e=a.find("tbody tr:first td:first").get(0);e&&(b.selection.setAtEnd(e),b.selection.restore())}}function u(c){var e=ua();if(e.length>0){if(b.$el.find("th.fr-selected-cell").length>0&&"above"==c)return;var f,g,h,i=J(),j=P(i);g="above"==c?j.min_i:j.max_i;var k="<tr>";for(f=0;f<i[g].length;f++)if("below"==c&&g<i.length-1&&i[g][f]==i[g+1][f]||"above"==c&&g>0&&i[g][f]==i[g-1][f]){if(0===f||f>0&&i[g][f]!=i[g][f-1]){var l=a(i[g][f]);l.attr("rowspan",parseInt(l.attr("rowspan"),10)+1)}}else k+="<td><br></td>";k+="</tr>",h=a(b.$el.find("th.fr-selected-cell").length>0&&"below"==c?e.find("tbody").not(e.find("table tbody")):e.find("tr").not(e.find("table tr")).get(g)),"below"==c?"TBODY"==h.prop("tagName")?h.prepend(k):h.after(k):"above"==c&&(h.before(k),b.popups.isVisible("table.edit")&&d())}}function v(){var c=ua();if(c.length>0){var d,e,f,g=J(),h=P(g);if(0===h.min_i&&h.max_i==g.length-1)r();else{for(d=h.max_i;d>=h.min_i;d--){for(f=a(c.find("tr").not(c.find("table tr")).get(d)),e=0;e<g[d].length;e++)if(0===e||g[d][e]!=g[d][e-1]){var i=a(g[d][e]);if(parseInt(i.attr("rowspan"),10)>1){var j=parseInt(i.attr("rowspan"),10)-1;1==j?i.removeAttr("rowspan"):i.attr("rowspan",j)}if(d<g.length-1&&g[d][e]==g[d+1][e]&&(0===d||g[d][e]!=g[d-1][e])){for(var k=g[d][e],l=e;l>0&&g[d][l]==g[d][l-1];)l--;0===l?a(c.find("tr").not(c.find("table tr")).get(d+1)).prepend(k):a(g[d+1][l-1]).after(k)}}var m=f.parent();f.remove(),0===m.find("tr").length&&m.remove(),g=J(c)}B(0,g.length-1,0,g[0].length-1,c),h.min_i>0?b.selection.setAtEnd(g[h.min_i-1][0]):b.selection.setAtEnd(g[0][0]),b.selection.restore(),b.popups.hide("table.edit")}}}function w(c){var e=ua();if(e.length>0){var f,g=J(),h=P(g);f="before"==c?h.min_j:h.max_j;var i,j=100/g[0].length,k=100/(g[0].length+1);e.find("th, td").each(function(){i=a(this),i.data("old-width",i.outerWidth()/e.outerWidth()*100)}),e.find("tr").not(e.find("table tr")).each(function(b){for(var d,e=a(this),h=0,i=0;f>h-1;){if(d=e.find("> th, > td").get(i),!d){d=null;break}d==g[b][h]?(h+=parseInt(a(d).attr("colspan"),10)||1,i++):(h+=parseInt(a(g[b][h]).attr("colspan"),10)||1,"after"==c&&(d=0===i?-1:e.find("> th, > td").get(i-1)))}var l=a(d);if("after"==c&&h-1>f||"before"==c&&f>0&&g[b][f]==g[b][f-1]){if(0===b||b>0&&g[b][f]!=g[b-1][f]){var m=parseInt(l.attr("colspan"),10)+1;l.attr("colspan",m),l.css("width",(l.data("old-width")*k/j+k).toFixed(4)+"%"),l.removeData("old-width")}}else{var n;n=e.find("th").length>0?'<th style="width: '+k.toFixed(4)+'%;"><br></th>':'<td style="width: '+k.toFixed(4)+'%;"><br></td>',-1==d?e.prepend(n):null==d?e.append(n):"before"==c?l.before(n):"after"==c&&l.after(n)}}),e.find("th, td").each(function(){i=a(this),i.data("old-width")&&(i.css("width",(i.data("old-width")*k/j).toFixed(4)+"%"),i.removeData("old-width"))}),b.popups.isVisible("table.edit")&&d()}}function x(){var c=ua();if(c.length>0){var d,e,f,g=J(),h=P(g);if(0===h.min_j&&h.max_j==g[0].length-1)r();else{var i=100/g[0].length,j=100/(g[0].length-h.max_j+h.min_j-1);for(c.find("th, td").each(function(){f=a(this),f.hasClass("fr-selected-cell")||f.data("old-width",f.outerWidth()/c.outerWidth()*100)}),e=h.max_j;e>=h.min_j;e--)for(d=0;d<g.length;d++)if(0===d||g[d][e]!=g[d-1][e])if(f=a(g[d][e]),(parseInt(f.attr("colspan"),10)||1)>1){var k=parseInt(f.attr("colspan"),10)-1;1==k?f.removeAttr("colspan"):f.attr("colspan",k),f.css("width",((f.data("old-width")-la(e,g))*j/i).toFixed(4)+"%"),f.removeData("old-width")}else{var l=a(f.parent().get(0));f.remove(),0===l.find("> th, > td").length&&(0===l.prev().length||0===l.next().length||l.prev().find("> th[rowspan], > td[rowspan]").length<l.prev().find("> th, > td").length)&&l.remove()}B(0,g.length-1,0,g[0].length-1,c),h.min_j>0?b.selection.setAtEnd(g[h.min_i][h.min_j-1]):b.selection.setAtEnd(g[h.min_i][0]),b.selection.restore(),b.popups.hide("table.edit"),c.find("th, td").each(function(){f=a(this),f.data("old-width")&&(f.css("width",(f.data("old-width")*j/i).toFixed(4)+"%"),f.removeData("old-width"))})}}}function y(a,b,c){var d,e,f,g,h,i=0,j=J(c);if(b=Math.min(b,j[0].length-1),b>a)for(e=a;b>=e;e++)if(!(e>a&&j[0][e]==j[0][e-1])&&(g=Math.min(parseInt(j[0][e].getAttribute("colspan"),10)||1,b-a+1),g>1&&j[0][e]==j[0][e+1]))for(i=g-1,d=1;d<j.length;d++)if(j[d][e]!=j[d-1][e]){for(f=e;e+g>f;f++)if(h=parseInt(j[d][f].getAttribute("colspan"),10)||1,h>1&&j[d][f]==j[d][f+1])i=Math.min(i,h-1),f+=i;else if(i=Math.max(0,i-1),!i)break;if(!i)break}i&&A(j,i,"colspan",0,j.length-1,a,b)}function z(a,b,c){var d,e,f,g,h,i=0,j=J(c);if(b=Math.min(b,j.length-1),b>a)for(d=a;b>=d;d++)if(!(d>a&&j[d][0]==j[d-1][0])&&(g=Math.min(parseInt(j[d][0].getAttribute("rowspan"),10)||1,b-a+1),g>1&&j[d][0]==j[d+1][0]))for(i=g-1,e=1;e<j[0].length;e++)if(j[d][e]!=j[d][e-1]){for(f=d;d+g>f;f++)if(h=parseInt(j[f][e].getAttribute("rowspan"),10)||1,h>1&&j[f][e]==j[f+1][e])i=Math.min(i,h-1),f+=i;else if(i=Math.max(0,i-1),!i)break;if(!i)break}i&&A(j,i,"rowspan",a,b,0,j[0].length-1)}function A(a,b,c,d,e,f,g){var h,i,j;for(h=d;e>=h;h++)for(i=f;g>=i;i++)h>d&&a[h][i]==a[h-1][i]||i>f&&a[h][i]==a[h][i-1]||(j=parseInt(a[h][i].getAttribute(c),10)||1,j>1&&(j-b>1?a[h][i].setAttribute(c,j-b):a[h][i].removeAttribute(c)))}function B(a,b,c,d,e){z(a,b,e),y(c,d,e)}function C(){if(ta().length>1&&(0===b.$el.find("th.fr-selected-cell").length||0===b.$el.find("td.fr-selected-cell").length)){M();var c,e,f=J(),g=P(f),h=b.$el.find(".fr-selected-cell"),i=a(h[0]),j=i.parent(),k=j.find(".fr-selected-cell"),l=i.closest("table"),m=i.html(),n=0;for(c=0;c<k.length;c++)n+=a(k[c]).outerWidth();for(i.css("width",(n/l.outerWidth()*100).toFixed(4)+"%"),g.min_j<g.max_j&&i.attr("colspan",g.max_j-g.min_j+1),g.min_i<g.max_i&&i.attr("rowspan",g.max_i-g.min_i+1),c=1;c<h.length;c++)e=a(h[c]),"<br>"!=e.html()&&""!==e.html()&&(m+="<br>"+e.html()),e.remove();i.html(m),b.selection.setAtEnd(i.get(0)),b.selection.restore(),b.toolbar.enable(),z(g.min_i,g.max_i,l);var o=l.find("tr:empty");for(c=o.length-1;c>=0;c--)a(o[c]).remove();y(g.min_j,g.max_j,l),d()}}function D(){if(1==ta().length){var c=b.$el.find(".fr-selected-cell"),d=c.parent(),e=c.closest("table"),f=parseInt(c.attr("rowspan"),10),g=J(),h=K(c.get(0),g),i=c.clone().html("<br>");if(f>1){var j=Math.ceil(f/2);j>1?c.attr("rowspan",j):c.removeAttr("rowspan"),f-j>1?i.attr("rowspan",f-j):i.removeAttr("rowspan");for(var k=h.row+j,l=0===h.col?h.col:h.col-1;l>=0&&(g[k][l]==g[k][l-1]||k>0&&g[k][l]==g[k-1][l]);)l--;-1==l?a(e.find("tr").not(e.find("table tr")).get(k)).prepend(i):a(g[k][l]).after(i)}else{var m,n=a("<tr>").append(i);for(m=0;m<g[0].length;m++)if(0===m||g[h.row][m]!=g[h.row][m-1]){var o=a(g[h.row][m]);o.is(c)||o.attr("rowspan",(parseInt(o.attr("rowspan"),10)||1)+1)}d.after(n)}N(),b.popups.hide("table.edit")}}function E(){if(1==ta().length){var c=b.$el.find(".fr-selected-cell"),d=parseInt(c.attr("colspan"),10)||1,e=c.parent().outerWidth(),f=c.outerWidth(),g=c.clone().html("<br>"),h=J(),i=K(c.get(0),h);if(d>1){var j=Math.ceil(d/2);f=ma(i.col,i.col+j-1,h)/e*100;var k=ma(i.col+j,i.col+d-1,h)/e*100;j>1?c.attr("colspan",j):c.removeAttr("colspan"),d-j>1?g.attr("colspan",d-j):g.removeAttr("colspan"),c.css("width",f.toFixed(4)+"%"),g.css("width",k.toFixed(4)+"%")}else{var l;for(l=0;l<h.length;l++)if(0===l||h[l][i.col]!=h[l-1][i.col]){var m=a(h[l][i.col]);if(!m.is(c)){var n=(parseInt(m.attr("colspan"),10)||1)+1;m.attr("colspan",n)}}f=f/e*100/2,c.css("width",f.toFixed(4)+"%"),g.css("width",f.toFixed(4)+"%")}c.after(g),N(),b.popups.hide("table.edit")}}function F(a){var c=b.$el.find(".fr-selected-cell");"REMOVE"!=a?c.css("background-color",b.helpers.HEXtoRGB(a)):c.css("background-color",""),d()}function G(a){b.$el.find(".fr-selected-cell").css("vertical-align",a)}function H(a){b.$el.find(".fr-selected-cell").css("text-align",a)}function I(a,b,c,d){if(b.length>0){if(!c){var e=Object.keys(d);e.splice(e.indexOf(a),1),b.removeClass(e.join(" "))}b.toggleClass(a)}}function J(b){b=b||null;var c=[];return null==b&&ta().length>0&&(b=ua()),b&&b.find("tr").not(b.find("table tr")).each(function(b,d){var e=a(d),f=0;e.find("> th, > td").each(function(d,e){for(var g=a(e),h=parseInt(g.attr("colspan"),10)||1,i=parseInt(g.attr("rowspan"),10)||1,j=b;b+i>j;j++)for(var k=f;f+h>k;k++)c[j]||(c[j]=[]),c[j][k]?f++:c[j][k]=e;f+=h})}),c}function K(a,b){for(var c=0;c<b.length;c++)for(var d=0;d<b[c].length;d++)if(b[c][d]==a)return{row:c,col:d}}function L(a,b,c){for(var d=a+1,e=b+1;d<c.length;){if(c[d][b]!=c[a][b]){d--;break}d++}for(d==c.length&&d--;e<c[a].length;){if(c[a][e]!=c[a][b]){e--;break}e++}return e==c[a].length&&e--,{row:d,col:e}}function M(){b.el.querySelector(".fr-cell-fixed")&&b.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),b.el.querySelector(".fr-cell-handler")&&b.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function N(){var c=b.$el.find(".fr-selected-cell");c.length>0&&c.each(function(){var b=a(this);b.removeClass("fr-selected-cell"),""===b.attr("class")&&b.removeAttr("class")}),M()}function O(){b.events.disableBlur(),b.selection.clear(),b.$el.addClass("fr-no-selection"),b.$el.blur(),b.events.enableBlur()}function P(a){var c=b.$el.find(".fr-selected-cell");if(c.length>0){var d,e=a.length,f=0,g=a[0].length,h=0;for(d=0;d<c.length;d++){var i=K(c[d],a),j=L(i.row,i.col,a);e=Math.min(i.row,e),f=Math.max(j.row,f),g=Math.min(i.col,g),h=Math.max(j.col,h)}return{min_i:e,max_i:f,min_j:g,max_j:h}}return null}function Q(b,c,d,e,f){var g,h,i,j,k=b,l=c,m=d,n=e;for(g=k;l>=g;g++)((parseInt(a(f[g][m]).attr("rowspan"),10)||1)>1||(parseInt(a(f[g][m]).attr("colspan"),10)||1)>1)&&(i=K(f[g][m],f),j=L(i.row,i.col,f),k=Math.min(i.row,k),l=Math.max(j.row,l),m=Math.min(i.col,m),n=Math.max(j.col,n)),((parseInt(a(f[g][n]).attr("rowspan"),10)||1)>1||(parseInt(a(f[g][n]).attr("colspan"),10)||1)>1)&&(i=K(f[g][n],f),j=L(i.row,i.col,f),k=Math.min(i.row,k),l=Math.max(j.row,l),m=Math.min(i.col,m),n=Math.max(j.col,n));for(h=m;n>=h;h++)((parseInt(a(f[k][h]).attr("rowspan"),10)||1)>1||(parseInt(a(f[k][h]).attr("colspan"),10)||1)>1)&&(i=K(f[k][h],f),j=L(i.row,i.col,f),k=Math.min(i.row,k),l=Math.max(j.row,l),m=Math.min(i.col,m),n=Math.max(j.col,n)),((parseInt(a(f[l][h]).attr("rowspan"),10)||1)>1||(parseInt(a(f[l][h]).attr("colspan"),10)||1)>1)&&(i=K(f[l][h],f),j=L(i.row,i.col,f),k=Math.min(i.row,k),l=Math.max(j.row,l),m=Math.min(i.col,m),n=Math.max(j.col,n));return k==b&&l==c&&m==d&&n==e?{min_i:b,max_i:c,min_j:d,max_j:e}:Q(k,l,m,n,f)}function R(b){var c=P(b),d=a(b[c.min_i][c.min_j]),e=a(b[c.min_i][c.max_j]),f=a(b[c.max_i][c.min_j]),g=d.offset().left,h=e.offset().left+e.outerWidth(),i=d.offset().top,j=f.offset().top+f.outerHeight();return{left:g,right:h,top:i,bottom:j}}function S(c,d){if(a(c).is(d))N(),b.edit.on(),a(c).addClass("fr-selected-cell");else{O(),b.edit.off();var e=J(),f=K(c,e),g=K(d,e),h=Q(Math.min(f.row,g.row),Math.max(f.row,g.row),Math.min(f.col,g.col),Math.max(f.col,g.col),e);N(),c.classList.add("fr-cell-fixed"),d.classList.add("fr-cell-handler");for(var i=h.min_i;i<=h.max_i;i++)for(var j=h.min_j;j<=h.max_j;j++)a(e[i][j]).addClass("fr-selected-cell")}}function T(c){var d=null,e=a(c.target);return"TD"==c.target.tagName||"TH"==c.target.tagName?d=c.target:e.closest("td").length>0?d=e.closest("td").get(0):e.closest("th").length>0&&(d=e.closest("th").get(0)),0===b.$el.find(d).length?null:d}function U(){N(),b.popups.hide("table.edit")}function V(c){var d=T(c);if("false"==a(d).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(ta().length>0&&!d&&U(),!b.edit.isDisabled()||b.popups.isVisible("table.edit"))if(1!=c.which||1==c.which&&b.helpers.isMac()&&c.ctrlKey)(3==c.which||1==c.which&&b.helpers.isMac()&&c.ctrlKey)&&d&&U();else if(Ba=!0,d){ta().length>0&&!c.shiftKey&&U(),c.stopPropagation(),b.events.trigger("image.hideResizer"),b.events.trigger("video.hideResizer"),Aa=!0;var e=d.tagName.toLowerCase();c.shiftKey&&b.$el.find(e+".fr-selected-cell").length>0?a(b.$el.find(e+".fr-selected-cell").closest("table")).is(a(d).closest("table"))?S(Ca,d):O():((b.keys.ctrlKey(c)||c.shiftKey)&&(ta().length>1||0===a(d).find(b.selection.element()).length&&!a(d).is(b.selection.element()))&&O(),Ca=d,S(Ca,Ca))}}function W(c){if(Aa||b.$tb.is(c.target)||b.$tb.is(a(c.target).closest(b.$tb.get(0)))||(ta().length>0&&b.toolbar.enable(),N()),!(1!=c.which||1==c.which&&b.helpers.isMac()&&c.ctrlKey)){if(Ba=!1,Aa){Aa=!1;var e=T(c);e||1!=ta().length?ta().length>0&&(b.selection.isCollapsed()?d():N()):N()}if(Ea){Ea=!1,ya.removeClass("fr-moving"),b.$el.removeClass("fr-no-selection"),b.edit.on();var f=parseFloat(ya.css("left"))+b.opts.tableResizerOffset+b.$wp.offset().left;b.opts.iframe&&(f-=b.$iframe.offset().left),ya.data("release-position",f),ya.removeData("max-left"),ya.removeData("max-right"),ka(c),ca()}}}function X(c){if(Aa===!0){var d=a(c.currentTarget);if(d.closest("table").is(ua())){if("TD"==c.currentTarget.tagName&&0===b.$el.find("th.fr-selected-cell").length)return void S(Ca,c.currentTarget);if("TH"==c.currentTarget.tagName&&0===b.$el.find("td.fr-selected-cell").length)return void S(Ca,c.currentTarget)}O()}}function Y(c,d){for(var e=c;e&&"TABLE"!=e.tagName&&e.parentNode!=b.el;)e=e.parentNode;if(e&&"TABLE"==e.tagName){var f=J(a(e));"up"==d?$(K(c,f),e,f):"down"==d&&_(K(c,f),e,f)}}function Z(a,c,d,e){for(var f,g=c;g!=b.el&&"TD"!=g.tagName&&"TH"!=g.tagName&&("up"==e?f=g.previousElementSibling:"down"==e&&(f=g.nextElementSibling),!f);)g=g.parentNode;"TD"==g.tagName||"TH"==g.tagName?Y(g,e):f&&("up"==e&&b.selection.setAtEnd(f),"down"==e&&b.selection.setAtStart(f))}function $(a,c,d){a.row>0?b.selection.setAtEnd(d[a.row-1][a.col]):Z(a,c,d,"up")}function _(a,c,d){var e=parseInt(d[a.row][a.col].getAttribute("rowspan"),10)||1;a.row<d.length-e?b.selection.setAtStart(d[a.row+e][a.col]):Z(a,c,d,"down")}function aa(c){var d=c.which,e=b.selection.blocks();if(e.length&&(e=e[0],"TD"==e.tagName||"TH"==e.tagName)){for(var f=e;f&&"TABLE"!=f.tagName&&f.parentNode!=b.el;)f=f.parentNode;if(f&&"TABLE"==f.tagName&&(a.FE.KEYCODE.ARROW_LEFT==d||a.FE.KEYCODE.ARROW_UP==d||a.FE.KEYCODE.ARROW_RIGHT==d||a.FE.KEYCODE.ARROW_DOWN==d)&&(ta().length>0&&U(),b.browser.webkit&&(a.FE.KEYCODE.ARROW_UP==d||a.FE.KEYCODE.ARROW_DOWN==d))){var g=b.selection.ranges(0).startContainer;if(g.nodeType==Node.TEXT_NODE&&(a.FE.KEYCODE.ARROW_UP==d&&g.previousSibling||a.FE.KEYCODE.ARROW_DOWN==d&&g.nextSibling))return;c.preventDefault(),c.stopPropagation();var h=J(a(f)),i=K(e,h);return a.FE.KEYCODE.ARROW_UP==d?$(i,f,h):a.FE.KEYCODE.ARROW_DOWN==d&&_(i,f,h),b.selection.restore(),!1}}}function ba(){b.shared.$table_resizer||(b.shared.$table_resizer=a('<div class="fr-table-resizer"><div></div></div>')),ya=b.shared.$table_resizer,b.events.$on(ya,"mousedown",function(a){return b.core.sameInstance(ya)?(ta().length>0&&U(),1==a.which?(b.selection.save(),Ea=!0,ya.addClass("fr-moving"),O(),b.edit.off(),ya.find("div").css("opacity",1),!1):void 0):!0}),b.events.$on(ya,"mousemove",function(a){return b.core.sameInstance(ya)?void(Ea&&(b.opts.iframe&&(a.pageX-=b.$iframe.offset().left),na(a))):!0}),b.events.on("shared.destroy",function(){ya.html("").removeData().remove(),ya=null},!0),b.events.on("destroy",function(){b.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),ya.hide().appendTo(a("body:first"))},!0)}function ca(){ya&&(ya.find("div").css("opacity",0),ya.css("top",0),ya.css("left",0),ya.css("height",0),ya.find("div").css("height",0),ya.hide())}function da(){za&&za.removeClass("fr-visible").css("left","-9999px")}function ea(c,d){var e=a(d),f=e.closest("table"),g=f.parent();if(d&&"TD"!=d.tagName&&"TH"!=d.tagName&&(e.closest("td").length>0?d=e.closest("td"):e.closest("th").length>0&&(d=e.closest("th"))),!d||"TD"!=d.tagName&&"TH"!=d.tagName)ya&&e.get(0)!=ya.get(0)&&e.parent().get(0)!=ya.get(0)&&b.core.sameInstance(ya)&&ca();else{if(e=a(d),0===b.$el.find(e).length)return!1;var h=e.offset().left-1,i=h+e.outerWidth();if(Math.abs(c.pageX-h)<=b.opts.tableResizerOffset||Math.abs(i-c.pageX)<=b.opts.tableResizerOffset){var j,k,l,m,n,o=J(f),p=K(d,o),q=L(p.row,p.col,o),r=f.offset().top,s=f.outerHeight()-1;"rtl"!=b.opts.direction?c.pageX-h<=b.opts.tableResizerOffset?(l=h,p.col>0?(m=h-la(p.col-1,o)+b.opts.tableResizingLimit,n=h+la(p.col,o)-b.opts.tableResizingLimit,j=p.col-1,k=p.col):(j=null,k=0,m=f.offset().left-1-parseInt(f.css("margin-left"),10),n=f.offset().left-1+f.width()-o[0].length*b.opts.tableResizingLimit)):i-c.pageX<=b.opts.tableResizerOffset&&(l=i,q.col<o[q.row].length&&o[q.row][q.col+1]?(m=i-la(q.col,o)+b.opts.tableResizingLimit,n=i+la(q.col+1,o)-b.opts.tableResizingLimit,j=q.col,k=q.col+1):(j=q.col,k=null,m=f.offset().left-1+o[0].length*b.opts.tableResizingLimit,n=g.offset().left-1+g.width()+parseFloat(g.css("padding-left")))):i-c.pageX<=b.opts.tableResizerOffset?(l=i,p.col>0?(m=i-la(p.col,o)+b.opts.tableResizingLimit,n=i+la(p.col-1,o)-b.opts.tableResizingLimit,j=p.col,k=p.col-1):(j=null,k=0,m=f.offset().left+o[0].length*b.opts.tableResizingLimit,n=g.offset().left-1+g.width()+parseFloat(g.css("padding-left")))):c.pageX-h<=b.opts.tableResizerOffset&&(l=h,q.col<o[q.row].length&&o[q.row][q.col+1]?(m=h-la(q.col+1,o)+b.opts.tableResizingLimit,n=h+la(q.col,o)-b.opts.tableResizingLimit,j=q.col+1,k=q.col):(j=q.col,k=null,m=g.offset().left+parseFloat(g.css("padding-left")),n=f.offset().left-1+f.width()-o[0].length*b.opts.tableResizingLimit)),ya||ba(),ya.data("table",f),ya.data("first",j),ya.data("second",k),ya.data("instance",b),b.$wp.append(ya);var t=l-b.win.pageXOffset-b.opts.tableResizerOffset-b.$wp.offset().left,u=r-b.$wp.offset().top+b.$wp.scrollTop();b.opts.iframe&&(t+=b.$iframe.offset().left,u+=b.$iframe.offset().top,m+=b.$iframe.offset().left,n+=b.$iframe.offset().left),ya.data("max-left",m),ya.data("max-right",n),ya.data("origin",l-b.win.pageXOffset),ya.css("top",u),ya.css("left",t),ya.css("height",s),ya.find("div").css("height",s),ya.css("padding-left",b.opts.tableResizerOffset),ya.css("padding-right",b.opts.tableResizerOffset),ya.show()}else b.core.sameInstance(ya)&&ca()}}function fa(c,d){if(b.$box.find(".fr-line-breaker").is(":visible"))return!1;za||qa(),b.$box.append(za),za.data("instance",b);var e=a(d),f=e.find("tr:first"),g=c.pageX,h=0,i=0;b.opts.iframe&&(h+=b.$iframe.offset().left-b.helpers.scrollLeft(),i+=b.$iframe.offset().top-b.helpers.scrollTop());var j;f.find("th, td").each(function(){var c=a(this);return c.offset().left<=g&&g<c.offset().left+c.outerWidth()/2?(j=parseInt(za.find("a").css("width"),10),za.css("top",i+c.offset().top-b.$box.offset().top-b.win.pageYOffset-j-5),za.css("left",h+c.offset().left-b.$box.offset().left-b.win.pageXOffset-j/2),
za.data("selected-cell",c),za.data("position","before"),za.addClass("fr-visible"),!1):c.offset().left+c.outerWidth()/2<=g&&g<c.offset().left+c.outerWidth()?(j=parseInt(za.find("a").css("width"),10),za.css("top",i+c.offset().top-b.$box.offset().top-b.win.pageYOffset-j-5),za.css("left",h+c.offset().left-b.$box.offset().left+c.outerWidth()-b.win.pageXOffset-j/2),za.data("selected-cell",c),za.data("position","after"),za.addClass("fr-visible"),!1):void 0})}function ga(c,d){if(b.$box.find(".fr-line-breaker").is(":visible"))return!1;za||qa(),b.$box.append(za),za.data("instance",b);var e=a(d),f=c.pageY,g=0,h=0;b.opts.iframe&&(g+=b.$iframe.offset().left-b.helpers.scrollLeft(),h+=b.$iframe.offset().top-b.helpers.scrollTop());var i;e.find("tr").each(function(){var c=a(this);return c.offset().top<=f&&f<c.offset().top+c.outerHeight()/2?(i=parseInt(za.find("a").css("width"),10),za.css("top",h+c.offset().top-b.$box.offset().top-b.win.pageYOffset-i/2),za.css("left",g+c.offset().left-b.$box.offset().left-b.win.pageXOffset-i-5),za.data("selected-cell",c.find("td:first")),za.data("position","above"),za.addClass("fr-visible"),!1):c.offset().top+c.outerHeight()/2<=f&&f<c.offset().top+c.outerHeight()?(i=parseInt(za.find("a").css("width"),10),za.css("top",h+c.offset().top-b.$box.offset().top+c.outerHeight()-b.win.pageYOffset-i/2),za.css("left",g+c.offset().left-b.$box.offset().left-b.win.pageXOffset-i-5),za.data("selected-cell",c.find("td:first")),za.data("position","below"),za.addClass("fr-visible"),!1):void 0})}function ha(c,d){if(0===ta().length){var e,f,g;if(d&&("HTML"==d.tagName||"BODY"==d.tagName||b.node.isElement(d)))for(e=1;e<=b.opts.tableInsertHelperOffset;e++){if(f=b.doc.elementFromPoint(c.pageX-b.win.pageXOffset,c.pageY-b.win.pageYOffset+e),a(f).hasClass("fr-tooltip"))return!0;if(f&&("TH"==f.tagName||"TD"==f.tagName||"TABLE"==f.tagName)&&(a(f).parents(".fr-wrapper").length||b.opts.iframe))return fa(c,a(f).closest("table")),!0;if(g=b.doc.elementFromPoint(c.pageX-b.win.pageXOffset+e,c.pageY-b.win.pageYOffset),a(g).hasClass("fr-tooltip"))return!0;if(g&&("TH"==g.tagName||"TD"==g.tagName||"TABLE"==g.tagName)&&(a(g).parents(".fr-wrapper").length||b.opts.iframe))return ga(c,a(g).closest("table")),!0}b.core.sameInstance(za)&&da()}}function ia(a){Da=null;var c=b.doc.elementFromPoint(a.pageX-b.win.pageXOffset,a.pageY-b.win.pageYOffset);b.opts.tableResizer&&(!b.popups.areVisible()||b.popups.areVisible()&&b.popups.isVisible("table.edit"))&&ea(a,c),!b.opts.tableInsertHelper||b.popups.areVisible()||b.$tb.hasClass("fr-inline")&&b.$tb.is(":visible")||ha(a,c)}function ja(){if(Ea){var a=ya.data("table"),c=a.offset().top-b.win.pageYOffset;b.opts.iframe&&(c+=b.$iframe.offset().top-b.helpers.scrollTop()),ya.css("top",c)}}function ka(){var c=ya.data("origin"),d=ya.data("release-position");if(c!==d){var e=ya.data("first"),f=ya.data("second"),g=ya.data("table"),h=g.outerWidth();if(b.undo.canDo()||b.undo.saveStep(),null!==e&&null!==f){var i,j,k,l=J(g),m=[],n=[],o=[],p=[];for(i=0;i<l.length;i++)j=a(l[i][e]),k=a(l[i][f]),m[i]=j.outerWidth(),o[i]=k.outerWidth(),n[i]=m[i]/h*100,p[i]=o[i]/h*100;for(i=0;i<l.length;i++){j=a(l[i][e]),k=a(l[i][f]);var q=(n[i]*(m[i]+d-c)/m[i]).toFixed(4);j.css("width",q+"%"),k.css("width",(n[i]+p[i]-q).toFixed(4)+"%")}}else{var r,s=g.parent(),t=h/s.width()*100,u=(parseInt(g.css("margin-left"),10)||0)/s.width()*100,v=(parseInt(g.css("margin-right"),10)||0)/s.width()*100;"rtl"==b.opts.direction&&0===f||"rtl"!=b.opts.direction&&0!==f?(r=(h+d-c)/h*t,g.css("margin-right","calc(100% - "+Math.round(r).toFixed(4)+"% - "+Math.round(u).toFixed(4)+"%)")):("rtl"==b.opts.direction&&0!==f||"rtl"!=b.opts.direction&&0===f)&&(r=(h-d+c)/h*t,g.css("margin-left","calc(100% - "+Math.round(r).toFixed(4)+"% - "+Math.round(v).toFixed(4)+"%)")),g.css("width",Math.round(r).toFixed(4)+"%")}b.selection.restore(),b.undo.saveStep()}ya.removeData("origin"),ya.removeData("release-position"),ya.removeData("first"),ya.removeData("second"),ya.removeData("table")}function la(b,c){var d,e=a(c[0][b]).outerWidth();for(d=1;d<c.length;d++)e=Math.min(e,a(c[d][b]).outerWidth());return e}function ma(a,b,c){var d,e=0;for(d=a;b>=d;d++)e+=la(d,c);return e}function na(a){if(ta().length>1&&Ba&&O(),Ba===!1&&Aa===!1&&Ea===!1)Da&&clearTimeout(Da),(!b.edit.isDisabled()||b.popups.isVisible("table.edit"))&&(Da=setTimeout(ia,30,a));else if(Ea){var c=a.pageX-b.win.pageXOffset;b.opts.iframe&&(c+=b.$iframe.offset().left);var d=ya.data("max-left"),e=ya.data("max-right");c>=d&&e>=c?ya.css("left",c-b.opts.tableResizerOffset-b.$wp.offset().left):d>c&&parseFloat(ya.css("left"),10)>d-b.opts.tableResizerOffset?ya.css("left",d-b.opts.tableResizerOffset-b.$wp.offset().left):c>e&&parseFloat(ya.css("left"),10)<e-b.opts.tableResizerOffset&&ya.css("left",e-b.opts.tableResizerOffset-b.$wp.offset().left)}else Ba&&da()}function oa(c){b.node.isEmpty(c.get(0))?c.prepend(a.FE.MARKERS):c.prepend(a.FE.START_MARKER).append(a.FE.END_MARKER)}function pa(c){var d=c.which;if(d==a.FE.KEYCODE.TAB){var e;if(ta().length>0)e=b.$el.find(".fr-selected-cell:last");else{var f=b.selection.element();"TD"==f.tagName||"TH"==f.tagName?e=a(f):f!=b.el&&(a(f).parentsUntil(b.$el,"td").length>0?e=a(f).parents("td:first"):a(f).parentsUntil(b.$el,"th").length>0&&(e=a(f).parents("th:first")))}if(e)return c.preventDefault(),a(b.selection.element()).parents("ol, ul").length>0&&(a(b.selection.element()).parents("li").prev().length>0||a(b.selection.element()).is("li")&&a(b.selection.element()).prev().length>0)?!0:(U(),c.shiftKey?e.prev().length>0?oa(e.prev()):e.closest("tr").length>0&&e.closest("tr").prev().length>0?oa(e.closest("tr").prev().find("td:last")):e.closest("tbody").length>0&&e.closest("table").find("thead tr").length>0&&oa(e.closest("table").find("thead tr th:last")):e.next().length>0?oa(e.next()):e.closest("tr").length>0&&e.closest("tr").next().length>0?oa(e.closest("tr").next().find("td:first")):e.closest("thead").length>0&&e.closest("table").find("tbody tr").length>0?oa(e.closest("table").find("tbody tr td:first")):(e.addClass("fr-selected-cell"),u("below"),N(),oa(e.closest("tr").next().find("td:first"))),b.selection.restore(),!1)}}function qa(){b.shared.$ti_helper||(b.shared.$ti_helper=a('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+b.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),b.events.bindClick(b.shared.$ti_helper,"a",function(){var a=za.data("selected-cell"),c=za.data("position"),d=za.data("instance")||b;"before"==c?(b.undo.saveStep(),a.addClass("fr-selected-cell"),d.table.insertColumn(c),a.removeClass("fr-selected-cell"),b.undo.saveStep()):"after"==c?(b.undo.saveStep(),a.addClass("fr-selected-cell"),d.table.insertColumn(c),a.removeClass("fr-selected-cell"),b.undo.saveStep()):"above"==c?(b.undo.saveStep(),a.addClass("fr-selected-cell"),d.table.insertRow(c),a.removeClass("fr-selected-cell"),b.undo.saveStep()):"below"==c&&(b.undo.saveStep(),a.addClass("fr-selected-cell"),d.table.insertRow(c),a.removeClass("fr-selected-cell"),b.undo.saveStep()),da()}),b.events.on("shared.destroy",function(){b.shared.$ti_helper.html("").removeData().remove(),b.shared.$ti_helper=null},!0),b.events.$on(b.shared.$ti_helper,"mousemove",function(a){a.stopPropagation()},!0),b.events.$on(a(b.o_win),"scroll",function(){da()},!0),b.events.$on(b.$wp,"scroll",function(){da()},!0)),za=b.shared.$ti_helper,b.events.on("destroy",function(){za=null}),b.tooltip.bind(b.$box,".fr-insert-helper > a.fr-floating-btn")}function ra(){Ca=null,clearTimeout(Da)}function sa(){ta().length>0?d():(b.popups.hide("table.insert"),b.toolbar.showInline())}function ta(){return b.el.querySelectorAll(".fr-selected-cell")}function ua(){var c=ta();if(c.length){for(var d=c[0];d&&"TABLE"!=d.tagName&&d.parentNode!=b.el;)d=d.parentNode;return a(d&&"TABLE"==d.tagName?d:[])}return a([])}function va(c){if(c.altKey&&c.which==a.FE.KEYCODE.SPACE){var e,f=b.selection.element();if("TD"==f.tagName||"TH"==f.tagName?e=f:a(f).closest("td").length>0?e=a(f).closest("td").get(0):a(f).closest("th").length>0&&(e=a(f).closest("th").get(0)),e)return c.preventDefault(),S(e,e),d(),!1}}function wa(c){var d=ta();if(d.length>0){var e,f,g=J(),h=c.which;1==d.length?(e=d[0],f=e):(e=b.el.querySelector(".fr-cell-fixed"),f=b.el.querySelector(".fr-cell-handler"));var i=K(f,g);if(a.FE.KEYCODE.ARROW_RIGHT==h){if(i.col<g[0].length-1)return S(e,g[i.row][i.col+1]),!1}else if(a.FE.KEYCODE.ARROW_DOWN==h){if(i.row<g.length-1)return S(e,g[i.row+1][i.col]),!1}else if(a.FE.KEYCODE.ARROW_LEFT==h){if(i.col>0)return S(e,g[i.row][i.col-1]),!1}else if(a.FE.KEYCODE.ARROW_UP==h&&i.row>0)return S(e,g[i.row-1][i.col]),!1}}function xa(){if(!b.$wp)return!1;if(!b.helpers.isMobile()){Ba=!1,Aa=!1,Ea=!1,b.events.$on(b.$el,"mousedown",V),b.popups.onShow("image.edit",function(){N(),Ba=!1,Aa=!1}),b.popups.onShow("link.edit",function(){N(),Ba=!1,Aa=!1}),b.events.on("commands.mousedown",function(a){a.parents(".fr-toolbar").length>0&&N()}),b.events.$on(b.$el,"mouseenter","th, td",X),b.events.$on(b.$win,"mouseup",W),b.opts.iframe&&b.events.$on(a(b.o_win),"mouseup",W),b.events.$on(b.$win,"mousemove",na),b.events.$on(a(b.o_win),"scroll",ja),b.events.on("contentChanged",function(){ta().length>0&&(d(),b.$el.find("img").on("load.selected-cells",function(){a(this).off("load.selected-cells"),ta().length>0&&d()}))}),b.events.$on(a(b.o_win),"resize",function(){N()}),b.events.on("toolbar.esc",function(){return ta().length>0?(b.events.disableBlur(),b.events.focus(),!1):void 0},!0),b.events.$on(a(b.o_win),"keydown",function(){Ba&&Aa&&(Ba=!1,Aa=!1,b.$el.removeClass("fr-no-selection"),b.edit.on(),b.selection.setAtEnd(b.$el.find(".fr-selected-cell:last").get(0)),b.selection.restore(),N())}),b.events.$on(b.$el,"keydown",function(a){a.shiftKey?wa(a)===!1&&setTimeout(function(){d()},0):aa(a)}),b.events.on("keydown",function(c){if(pa(c)===!1)return!1;var d=ta();if(d.length>0){if(d.length>0&&b.keys.ctrlKey(c)&&c.which==a.FE.KEYCODE.A)return N(),b.popups.isVisible("table.edit")&&b.popups.hide("table.edit"),d=[],!0;if(c.which==a.FE.KEYCODE.ESC&&b.popups.isVisible("table.edit"))return N(),b.popups.hide("table.edit"),c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),d=[],!1;if(d.length>1&&(c.which==a.FE.KEYCODE.BACKSPACE||c.which==a.FE.KEYCODE.DELETE)){b.undo.saveStep();for(var e=0;e<d.length;e++)a(d[e]).html("<br>"),e==d.length-1&&a(d[e]).prepend(a.FE.MARKERS);return b.selection.restore(),b.undo.saveStep(),d=[],!1}if(d.length>1&&c.which!=a.FE.KEYCODE.F10&&!b.keys.isBrowserAction(c))return c.preventDefault(),d=[],!1}else if(d=[],va(c)===!1)return!1},!0);var c=[];b.events.on("html.beforeGet",function(){c=ta();for(var a=0;a<c.length;a++)c[a].className=(c[a].className||"").replace(/fr-selected-cell/g,"")}),b.events.on("html.afterGet",function(){for(var a=0;a<c.length;a++)c[a].className=(c[a].className?c[a].className.trim()+" ":"")+"fr-selected-cell";c=[]}),g(!0),k(!0)}b.events.on("destroy",ra)}var ya,za,Aa,Ba,Ca,Da,Ea;return{_init:xa,insert:q,remove:r,insertRow:u,deleteRow:v,insertColumn:w,deleteColumn:x,mergeCells:C,splitCellVertically:E,splitCellHorizontally:D,addHeader:s,removeHeader:t,setBackground:F,showInsertPopup:c,showEditPopup:d,showColorsPopup:e,back:sa,verticalAlign:G,horizontalAlign:H,applyStyle:I,selectedTable:ua,selectedCells:ta,customColor:n}},a.FE.DefineIcon("insertTable",{NAME:"table"}),a.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),a.FE.RegisterCommand("tableInsert",{callback:function(a,b,c){this.table.insert(b,c),this.popups.hide("table.insert")}}),a.FE.DefineIcon("tableHeader",{NAME:"header",FA5NAME:"heading"}),a.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){var a=this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]');a.hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(a){var b=this.table.selectedTable();b.length>0&&(0===b.find("th").length?a.removeClass("fr-active").attr("aria-pressed",!1):a.addClass("fr-active").attr("aria-pressed",!0))}}),a.FE.DefineIcon("tableRows",{NAME:"bars"}),a.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.tableRows.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+d+'" title="'+this.language.translate(c[d])+'">'+this.language.translate(c[d])+"</a></li>");return b+="</ul>"},callback:function(a,b){"above"==b||"below"==b?this.table.insertRow(b):this.table.deleteRow()}}),a.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),a.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.tableColumns.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+d+'" title="'+this.language.translate(c[d])+'">'+this.language.translate(c[d])+"</a></li>");return b+="</ul>"},callback:function(a,b){"before"==b||"after"==b?this.table.insertColumn(b):this.table.deleteColumn()}}),a.FE.DefineIcon("tableCells",{NAME:"square-o",FA5NAME:"square"}),a.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.tableCells.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+d+'" title="'+this.language.translate(c[d])+'">'+this.language.translate(c[d])+"</a></li>");return b+="</ul>"},callback:function(a,b){"merge"==b?this.table.mergeCells():"vertical-split"==b?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(a,b){this.$el.find(".fr-selected-cell").length>1?(b.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),b.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),b.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(b.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),b.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),b.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),a.FE.DefineIcon("tableRemove",{NAME:"trash"}),a.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),a.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),a.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.tableStyles;for(var c in b)b.hasOwnProperty(c)&&(a+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+c+'" title="'+this.language.translate(b[c])+'">'+this.language.translate(b[c])+"</a></li>");return a+="</ul>"},callback:function(a,b){this.table.applyStyle(b,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(b,c){var d=this.$el.find(".fr-selected-cell").closest("table");d&&c.find(".fr-command").each(function(){var b=a(this).data("param1"),c=d.hasClass(b);a(this).toggleClass("fr-active",c).attr("aria-selected",c)})}}),a.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),a.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),a.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(a,b){this.table.setBackground(b)}}),a.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(a){0!==this.table.selectedCells().length||this.opts.toolbarInline?(a.removeClass("fr-hidden"),a.next(".fr-separator").removeClass("fr-hidden")):(a.addClass("fr-hidden"),a.next(".fr-separator").addClass("fr-hidden"))}}),a.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v",FA5NAME:"arrows-alt-v"}),a.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.tableCellVerticalAlign.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+d.toLowerCase()+'" title="'+this.language.translate(c[d])+'">'+this.language.translate(d)+"</a></li>");return b+="</ul>"},callback:function(a,b){this.table.verticalAlign(b)},refreshOnShow:function(a,b){b.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),a.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),a.FE.DefineIcon("align-left",{NAME:"align-left"}),a.FE.DefineIcon("align-right",{NAME:"align-right"}),a.FE.DefineIcon("align-center",{NAME:"align-center"}),a.FE.DefineIcon("align-justify",{NAME:"align-justify"}),a.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.tableCellHorizontalAlign.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+d+'" title="'+this.language.translate(c[d])+'">'+this.icon.create("align-"+d)+'<span class="fr-sr-only">'+this.language.translate(c[d])+"</span></a></li>");return b+="</ul>"},callback:function(a,b){this.table.horizontalAlign(b)},refresh:function(b){var c=this.table.selectedCells();c.length&&b.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(a(c[0]))))},refreshOnShow:function(a,b){b.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),a.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),a.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',b=this.opts.tableCellStyles;for(var c in b)b.hasOwnProperty(c)&&(a+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+c+'" title="'+this.language.translate(b[c])+'">'+this.language.translate(b[c])+"</a></li>");return a+="</ul>"},callback:function(a,b){this.table.applyStyle(b,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(b,c){var d=this.$el.find(".fr-selected-cell:first");d&&c.find(".fr-command").each(function(){var b=a(this).data("param1"),c=d.hasClass(b);a(this).toggleClass("fr-active",c).attr("aria-selected",c)})}}),a.FE.RegisterCommand("tableCellBackgroundCustomColor",{title:"OK",undo:!0,callback:function(){this.table.customColor()}}),a.FE.DefineIcon("tableColorRemove",{NAME:"eraser"}),a.FE.URLRegEx="(^| |\\u00A0)("+a.FE.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}\\.[a-z0-9+-_]{1,}))$",a.FE.PLUGINS.url=function(b){function c(a,c,d){for(var e="";d.length&&"."==d[d.length-1];)e+=".",d=d.substring(0,d.length-1);var f=d;if(b.opts.linkConvertEmailAddress)b.helpers.isEmail(f)&&!/^mailto:.*/i.test(f)&&(f="mailto:"+f);else if(b.helpers.isEmail(f))return c+d;return/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(f)||(f="//"+f),(c?c:"")+"<a"+(b.opts.linkAlwaysBlank?' target="_blank"':"")+(j?' rel="'+j+'"':"")+' data-fr-linked="true" href="'+f+'">'+d.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&amp;/g,"&").replace(/&/g,"&amp;")+"</a>"+e}function d(){return new RegExp(a.FE.URLRegEx,"gi")}function e(a){return b.opts.linkAlwaysNoFollow&&(j="nofollow"),b.opts.linkAlwaysBlank&&(b.opts.linkNoOpener&&(j?j+=" noopener":j="noopener"),b.opts.linkNoReferrer&&(j?j+=" noreferrer":j="noreferrer")),a.replace(d(),c)}function f(a){return a?"A"===a.tagName?!0:a.parentNode&&a.parentNode!=b.el?f(a.parentNode):!1:!1}function g(a){var b=a.split(" ");return b[b.length-1]}function h(){var c=b.selection.ranges(0),h=c.startContainer;if(!h||h.nodeType!==Node.TEXT_NODE)return!1;if(f(h))return!1;if(d().test(g(h.textContent))){a(h).before(e(h.textContent));var i=a(h.parentNode).find("a[data-fr-linked]");i.removeAttr("data-fr-linked"),h.parentNode.removeChild(h),b.events.trigger("url.linked",[i.get(0)])}else if(h.textContent.split(" ").length<=2&&h.previousSibling&&"A"===h.previousSibling.tagName){var j=h.previousSibling.innerText+h.textContent;d().test(g(j))&&(a(h.previousSibling).replaceWith(e(j)),h.parentNode.removeChild(h))}}function i(){b.events.on("keypress",function(a){!b.selection.isCollapsed()||"."!=a.key&&")"!=a.key&&"("!=a.key||h()},!0),b.events.on("keydown",function(c){var d=c.which;!b.selection.isCollapsed()||d!=a.FE.KEYCODE.ENTER&&d!=a.FE.KEYCODE.SPACE||h()},!0),b.events.on("paste.beforeCleanup",function(a){if(b.helpers.isURL(a)){var c=null;return b.opts.linkAlwaysBlank&&(b.opts.linkNoOpener&&(c?c+=" noopener":c="noopener"),b.opts.linkNoReferrer&&(c?c+=" noreferrer":c="noreferrer")),"<a"+(b.opts.linkAlwaysBlank?' target="_blank"':"")+(c?' rel="'+c+'"':"")+' href="'+a+'" >'+a+"</a>"}})}var j=null;return{_init:i}},a.extend(a.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),a.extend(a.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUpload:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),a.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],a.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,a.FE.PLUGINS.video=function(b){function c(){var a=b.popups.get("video.insert"),c=a.find(".fr-video-by-url-layer input");c.val("").trigger("change");var d=a.find(".fr-video-embed-layer textarea");d.val("").trigger("change"),d=a.find(".fr-video-upload-layer input"),d.val("").trigger("change")}function d(){var a=b.$tb.find('.fr-command[data-cmd="insertVideo"]'),c=b.popups.get("video.insert");if(c||(c=f()),o(),!c.hasClass("fr-active"))if(b.popups.refresh("video.insert"),b.popups.setContainer("video.insert",b.$tb),a.is(":visible")){var d=a.offset().left+a.outerWidth()/2,e=a.offset().top+(b.opts.toolbarBottom?10:a.outerHeight()-10);b.popups.show("video.insert",d,e,a.outerHeight())}else b.position.forSelection(c),b.popups.show("video.insert")}function e(){var a=b.popups.get("video.edit");if(a||(a=T()),a){b.popups.setContainer("video.edit",b.$sc),b.popups.refresh("video.edit");var c=ra.find("iframe, embed, video"),d=c.offset().left+c.outerWidth()/2,e=c.offset().top+c.outerHeight();b.popups.show("video.edit",d,e,c.outerHeight())}}function f(a){if(a)return b.popups.onRefresh("video.insert",c),b.popups.onHide("image.insert",ea),!0;var d="";b.opts.videoUpload||b.opts.videoInsertButtons.splice(b.opts.videoInsertButtons.indexOf("videoUpload"),1),b.opts.videoInsertButtons.length>1&&(d='<div class="fr-buttons">'+b.button.buildList(b.opts.videoInsertButtons)+"</div>");var e,f="",g=b.opts.videoInsertButtons.indexOf("videoUpload"),h=b.opts.videoInsertButtons.indexOf("videoByURL"),i=b.opts.videoInsertButtons.indexOf("videoEmbed");h>=0&&(e=" fr-active",(h>g&&g>=0||h>i&&i>=0)&&(e=""),f='<div class="fr-video-by-url-layer fr-layer'+e+'" id="fr-video-by-url-layer-'+b.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+b.id+'" type="text" placeholder="'+b.language.translate("Paste in a video URL")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+b.language.translate("Insert")+"</button></div></div>");var j="";i>=0&&(e=" fr-active",(i>g&&g>=0||i>h&&h>=0)&&(e=""),j='<div class="fr-video-embed-layer fr-layer'+e+'" id="fr-video-embed-layer-'+b.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+b.id+'" type="text" placeholder="'+b.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+b.language.translate("Insert")+"</button></div></div>");var k="";g>=0&&(e=" fr-active",(g>i&&i>=0||g>h&&h>=0)&&(e=""),k='<div class="fr-video-upload-layer fr-layer'+e+'" id="fr-video-upload-layer-'+b.id+'"><strong>'+b.language.translate("Drop video")+"</strong><br>("+b.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+b.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+b.id+'" role="button"></div></div>');var l='<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>',m={buttons:d,by_url_layer:f,embed_layer:j,upload_layer:k,progress_bar:l},n=b.popups.create("video.insert",m);return Q(n),n}function g(a){var c,d,e=b.popups.get("video.insert");if(!ra&&!b.opts.toolbarInline){var f=b.$tb.find('.fr-command[data-cmd="insertVideo"]');c=f.offset().left+f.outerWidth()/2,d=f.offset().top+(b.opts.toolbarBottom?10:f.outerHeight()-10)}b.opts.toolbarInline&&(d=e.offset().top-b.helpers.getPX(e.css("margin-top")),e.hasClass("fr-above")&&(d+=e.outerHeight())),e.find(".fr-layer").removeClass("fr-active"),e.find(".fr-"+a+"-layer").addClass("fr-active"),b.popups.show("video.insert",c,d,0),b.accessibility.focusPopup(e)}function h(a){var c=b.popups.get("video.insert");c.find(".fr-video-by-url-layer").hasClass("fr-active")&&a.addClass("fr-active").attr("aria-pressed",!0)}function i(a){var c=b.popups.get("video.insert");c.find(".fr-video-embed-layer").hasClass("fr-active")&&a.addClass("fr-active").attr("aria-pressed",!0)}function j(a){var c=b.popups.get("video.insert");c.find(".fr-video-upload-layer").hasClass("fr-active")&&a.addClass("fr-active").attr("aria-pressed",!0)}function k(a){b.events.focus(!0),b.selection.restore();var c=!1;ra&&(da(),c=!0),b.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+a+"</span>",!1,b.opts.videoSplitHTML),b.popups.hide("video.insert");var d=b.$el.find(".fr-jiv");d.removeClass("fr-jiv"),fa(d,b.opts.videoDefaultDisplay,b.opts.videoDefaultAlign),d.toggleClass("fr-draggable",b.opts.videoMove),b.events.trigger(c?"video.replaced":"video.inserted",[d])}function l(){var c=a(this);b.popups.hide("video.insert"),c.removeClass("fr-uploading"),c.parent().next().is("br")&&c.parent().next().remove(),t(c.parent()),b.events.trigger("video.loaded",[c.parent()])}function m(a,c,d,e,f){b.edit.off(),p("Loading video"),c&&(a=b.helpers.sanitizeURL(a));var g=function(){var c,g;if(e){b.undo.canDo()||e.find("video").hasClass("fr-uploading")||b.undo.saveStep();var h=e.find("video").data("fr-old-src"),i=e.data("fr-replaced");e.data("fr-replaced",!1),b.$wp?(c=e.clone(),c.find("video").removeData("fr-old-src").removeClass("fr-uploading"),c.find("video").off("canplay"),h&&e.find("video").attr("src",h),e.replaceWith(c)):c=e;for(var j=c.find("video").get(0).attributes,k=0;k<j.length;k++){var m=j[k];0===m.nodeName.indexOf("data-")&&c.find("video").removeAttr(m.nodeName)}if("undefined"!=typeof d)for(g in d)d.hasOwnProperty(g)&&"link"!=g&&c.find("video").attr("data-"+g,d[g]);c.find("video").on("canplay",l),c.find("video").attr("src",a),b.edit.on(),H(),b.undo.saveStep(),b.$el.blur(),b.events.trigger(i?"video.replaced":"video.inserted",[c,f])}else c=A(a,d,l),H(),b.undo.saveStep(),b.events.trigger("video.inserted",[c,f])};n("Loading video"),g()}function n(a){var c=b.popups.get("video.insert");if(c||(c=f()),c.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),c.find(".fr-video-progress-bar-layer").addClass("fr-active"),c.find(".fr-buttons").hide(),ra){var d=ra.find("video");b.popups.setContainer("video.insert",b.$sc);var e=d.offset().left+d.width()/2,g=d.offset().top+d.height();
b.popups.show("video.insert",e,g,d.outerHeight())}"undefined"==typeof a&&p(b.language.translate("Uploading"),0)}function o(a){var c=b.popups.get("video.insert");if(c&&(c.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),c.find(".fr-video-progress-bar-layer").removeClass("fr-active"),c.find(".fr-buttons").show(),a||b.$el.find("video.fr-error").length)){if(b.events.focus(),b.$el.find("video.fr-error").length&&(b.$el.find("video.fr-error").parent().remove(),b.undo.saveStep(),b.undo.run(),b.undo.dropRedo()),!b.$wp&&ra){var d=ra;K(!0),b.selection.setAfter(d.find("video").get(0)),b.selection.restore()}b.popups.hide("video.insert")}}function p(a,c){var d=b.popups.get("video.insert");if(d){var e=d.find(".fr-video-progress-bar-layer");e.find("h3").text(a+(c?" "+c+"%":"")),e.removeClass("fr-error"),c?(e.find("div").removeClass("fr-indeterminate"),e.find("div > span").css("width",c+"%")):e.find("div").addClass("fr-indeterminate")}}function q(a){n();var c=b.popups.get("video.insert"),d=c.find(".fr-video-progress-bar-layer");d.addClass("fr-error");var e=d.find("h3");e.text(a),b.events.disableBlur(),e.focus()}function r(c){if("undefined"==typeof c){var d=b.popups.get("video.insert");c=(d.find('.fr-video-by-url-layer input[type="text"]').val()||"").trim()}var e=null;if(/^http/.test(c)||(c="https://"+c),b.helpers.isURL(c))for(var f=0;f<a.FE.VIDEO_PROVIDERS.length;f++){var g=a.FE.VIDEO_PROVIDERS[f];if(g.test_regex.test(c)&&new RegExp(b.opts.videoAllowedProviders.join("|")).test(g.provider)){e=c.replace(g.url_regex,g.url_text),e=g.html.replace(/\{url\}/,e);break}}e?k(e):b.events.trigger("video.linkError",[c])}function s(c){if("undefined"==typeof c){var d=b.popups.get("video.insert");c=d.find(".fr-video-embed-layer textarea").val()||""}0!==c.length&&a.FE.VIDEO_EMBED_REGEX.test(c)?k(c):b.events.trigger("video.codeError",[c])}function t(a){J.call(a.get(0))}function u(a){try{if(b.events.trigger("video.uploaded",[a],!0)===!1)return b.edit.on(),!1;var c=JSON.parse(a);return c.link?c:(S(ta,a),!1)}catch(d){return S(va,a),!1}}function v(c){try{var d=a(c).find("Location").text(),e=a(c).find("Key").text();return b.events.trigger("video.uploadedToS3",[d,e,c],!0)===!1?(b.edit.on(),!1):d}catch(f){return S(va,c),!1}}function w(a){p("Loading video");var c=this.status,d=this.response,e=this.responseXML,f=this.responseText;try{if(b.opts.videoUploadToS3)if(201==c){var g=v(e);g&&m(g,!1,[],a,d||e)}else S(va,d||e);else if(c>=200&&300>c){var h=u(f);h&&m(h.link,!1,h,a,d||f)}else S(ua,d||f)}catch(i){S(va,d||f)}}function x(){S(va,this.response||this.responseText||this.responseXML)}function y(a){if(a.lengthComputable){var c=a.loaded/a.total*100|0;p(b.language.translate("Uploading"),c)}}function z(){b.edit.on(),o(!0)}function A(c,d,e){var f,g="";if(d&&"undefined"!=typeof d)for(f in d)d.hasOwnProperty(f)&&"link"!=f&&(g+=" data-"+f+'="'+d[f]+'"');var h=b.opts.videoDefaultWidth;h&&"auto"!=h&&(h+="px");var i=a('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+b.opts.videoDefaultDisplay[0]+("center"!=b.opts.videoDefaultAlign?" fr-fv"+b.opts.videoDefaultAlign[0]:"")+'"><video src="'+c+'" '+g+(h?' style="width: '+h+';" ':"")+" controls>"+b.language.translate("Your browser does not support HTML5 video.")+"</video></span>");i.toggleClass("fr-draggable",b.opts.videoMove),b.edit.on(),b.events.focus(!0),b.selection.restore(),b.undo.saveStep(),b.opts.videoSplitHTML?b.markers.split():b.markers.insert(),b.html.wrap();var j=b.$el.find(".fr-marker");return b.node.isLastSibling(j)&&j.parent().hasClass("fr-deletable")&&j.insertAfter(j.parent()),j.replaceWith(i),b.selection.clear(),i.find("video").get(0).readyState>i.find("video").get(0).HAVE_FUTURE_DATA||b.helpers.isIOS()?e.call(i.find("video").get(0)):i.find("video").on("canplaythrough load",e),i}function B(c){if(!b.core.sameInstance(qa))return!0;c.preventDefault(),c.stopPropagation();var d=c.pageX||(c.originalEvent.touches?c.originalEvent.touches[0].pageX:null),e=c.pageY||(c.originalEvent.touches?c.originalEvent.touches[0].pageY:null);if(!d||!e)return!1;if("mousedown"==c.type){var f=b.$oel.get(0),g=f.ownerDocument,h=g.defaultView||g.parentWindow,i=!1;try{i=h.location!=h.parent.location&&!(h.$&&h.$.FE)}catch(j){}i&&h.frameElement&&(d+=b.helpers.getPX(a(h.frameElement).offset().left)+h.frameElement.clientLeft,e=c.clientY+b.helpers.getPX(a(h.frameElement).offset().top)+h.frameElement.clientTop)}b.undo.canDo()||b.undo.saveStep(),pa=a(this),pa.data("start-x",d),pa.data("start-y",e),oa.show(),b.popups.hideAll(),M()}function C(a){if(!b.core.sameInstance(qa))return!0;if(pa){a.preventDefault();var c=a.pageX||(a.originalEvent.touches?a.originalEvent.touches[0].pageX:null),d=a.pageY||(a.originalEvent.touches?a.originalEvent.touches[0].pageY:null);if(!c||!d)return!1;var e=pa.data("start-x"),f=pa.data("start-y");pa.data("start-x",c),pa.data("start-y",d);var g=c-e,h=d-f,i=ra.find("iframe, embed, video"),j=i.width(),k=i.height();(pa.hasClass("fr-hnw")||pa.hasClass("fr-hsw"))&&(g=0-g),(pa.hasClass("fr-hnw")||pa.hasClass("fr-hne"))&&(h=0-h),i.css("width",j+g),i.css("height",k+h),i.removeAttr("width"),i.removeAttr("height"),I()}}function D(a){return b.core.sameInstance(qa)?void(pa&&ra&&(a&&a.stopPropagation(),pa=null,oa.hide(),I(),e(),b.undo.saveStep())):!0}function E(a){return'<div class="fr-handler fr-h'+a+'"></div>'}function F(a,b,c,d){return a.pageX=b,a.pageY=b,B.call(this,a),a.pageX=a.pageX+c*Math.floor(Math.pow(1.1,d)),a.pageY=a.pageY+c*Math.floor(Math.pow(1.1,d)),C.call(this,a),D.call(this,a),++d}function G(){var c;if(b.shared.$video_resizer?(qa=b.shared.$video_resizer,oa=b.shared.$vid_overlay,b.events.on("destroy",function(){qa.removeClass("fr-active").appendTo(a("body:first"))},!0)):(b.shared.$video_resizer=a('<div class="fr-video-resizer"></div>'),qa=b.shared.$video_resizer,b.events.$on(qa,"mousedown",function(a){a.stopPropagation()},!0),b.opts.videoResize&&(qa.append(E("nw")+E("ne")+E("sw")+E("se")),b.shared.$vid_overlay=a('<div class="fr-video-overlay"></div>'),oa=b.shared.$vid_overlay,c=qa.get(0).ownerDocument,a(c).find("body:first").append(oa))),b.events.on("shared.destroy",function(){qa.html("").removeData().remove(),qa=null,b.opts.videoResize&&(oa.remove(),oa=null)},!0),b.helpers.isMobile()||b.events.$on(a(b.o_win),"resize.video",function(){K(!0)}),b.opts.videoResize){c=qa.get(0).ownerDocument,b.events.$on(qa,b._mousedown,".fr-handler",B),b.events.$on(a(c),b._mousemove,C),b.events.$on(a(c.defaultView||c.parentWindow),b._mouseup,D),b.events.$on(oa,"mouseleave",D);var d=1,e=null,f=0;b.events.on("keydown",function(c){if(ra){var g=-1!=navigator.userAgent.indexOf("Mac OS X")?c.metaKey:c.ctrlKey,h=c.which;(h!==e||c.timeStamp-f>200)&&(d=1),(h==a.FE.KEYCODE.EQUALS||b.browser.mozilla&&h==a.FE.KEYCODE.FF_EQUALS)&&g&&!c.altKey?d=F.call(this,c,1,1,d):(h==a.FE.KEYCODE.HYPHEN||b.browser.mozilla&&h==a.FE.KEYCODE.FF_HYPHEN)&&g&&!c.altKey&&(d=F.call(this,c,2,-1,d)),e=h,f=c.timeStamp}}),b.events.on("keyup",function(){d=1})}}function H(){var c,d=Array.prototype.slice.call(b.el.querySelectorAll("video, .fr-video > *")),e=[];for(c=0;c<d.length;c++)e.push(d[c].getAttribute("src")),a(d[c]).toggleClass("fr-draggable",b.opts.videoMove),""===d[c].getAttribute("class")&&d[c].removeAttribute("class"),""===d[c].getAttribute("style")&&d[c].removeAttribute("style");if(Aa)for(c=0;c<Aa.length;c++)e.indexOf(Aa[c].getAttribute("src"))<0&&b.events.trigger("video.removed",[a(Aa[c])]);Aa=d}function I(){qa||G(),(b.$wp||b.$sc).append(qa),qa.data("instance",b);var a=ra.find("iframe, embed, video");qa.css("top",(b.opts.iframe?a.offset().top-1:a.offset().top-b.$wp.offset().top-1)+b.$wp.scrollTop()).css("left",(b.opts.iframe?a.offset().left-1:a.offset().left-b.$wp.offset().left-1)+b.$wp.scrollLeft()).css("width",a.get(0).getBoundingClientRect().width).css("height",a.get(0).getBoundingClientRect().height).addClass("fr-active")}function J(c){if(c&&"touchend"==c.type&&Ba)return!0;if(c&&b.edit.isDisabled())return c.stopPropagation(),c.preventDefault(),!1;if(b.edit.isDisabled())return!1;for(var d=0;d<a.FE.INSTANCES.length;d++)a.FE.INSTANCES[d]!=b&&a.FE.INSTANCES[d].events.trigger("video.hideResizer");b.toolbar.disable(),b.helpers.isMobile()&&(b.events.disableBlur(),b.$el.blur(),b.events.enableBlur()),b.$el.find(".fr-video.fr-active").removeClass("fr-active"),ra=a(this),ra.addClass("fr-active"),b.opts.iframe&&b.size.syncIframe(),ka(),I(),e(),b.selection.clear(),b.button.bulkRefresh(),b.events.trigger("image.hideResizer")}function K(a){ra&&(N()||a===!0)&&(qa.removeClass("fr-active"),b.toolbar.enable(),ra.removeClass("fr-active"),ra=null,M())}function L(){b.shared.vid_exit_flag=!0}function M(){b.shared.vid_exit_flag=!1}function N(){return b.shared.vid_exit_flag}function O(c){var d=c.originalEvent.dataTransfer;if(d&&d.files&&d.files.length){var e=d.files[0];if(e&&e.type&&-1!==e.type.indexOf("video")){if(!b.opts.videoUpload)return c.preventDefault(),c.stopPropagation(),!1;b.markers.remove(),b.markers.insertAtPoint(c.originalEvent),b.$el.find(".fr-marker").replaceWith(a.FE.MARKERS),b.popups.hideAll();var g=b.popups.get("video.insert");return g||(g=f()),b.popups.setContainer("video.insert",b.$sc),b.popups.show("video.insert",c.originalEvent.pageX,c.originalEvent.pageY),n(),b.opts.videoAllowedTypes.indexOf(e.type.replace(/video\//g,""))>=0?P(d.files):S(xa),c.preventDefault(),c.stopPropagation(),!1}}}function P(a){if("undefined"!=typeof a&&a.length>0){if(b.events.trigger("video.beforeUpload",[a])===!1)return!1;var c=a[0];if(c.size>b.opts.videoMaxSize)return S(wa),!1;if(b.opts.videoAllowedTypes.indexOf(c.type.replace(/video\//g,""))<0)return S(xa),!1;var d;if(b.drag_support.formdata&&(d=b.drag_support.formdata?new FormData:null),d){var e;if(b.opts.videoUploadToS3!==!1){d.append("key",b.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(c.name||"untitled")),d.append("success_action_status","201"),d.append("X-Requested-With","xhr"),d.append("Content-Type",c.type);for(e in b.opts.videoUploadToS3.params)b.opts.videoUploadToS3.params.hasOwnProperty(e)&&d.append(e,b.opts.videoUploadToS3.params[e])}for(e in b.opts.videoUploadParams)b.opts.videoUploadParams.hasOwnProperty(e)&&d.append(e,b.opts.videoUploadParams[e]);d.append(b.opts.videoUploadParam,c);var f=b.opts.videoUploadURL;b.opts.videoUploadToS3&&(f=b.opts.videoUploadToS3.uploadURL?b.opts.videoUploadToS3.uploadURL:"https://"+b.opts.videoUploadToS3.region+".amazonaws.com/"+b.opts.videoUploadToS3.bucket);var g=b.core.getXHR(f,b.opts.videoUploadMethod);g.onload=function(){w.call(g,ra)},g.onerror=x,g.upload.onprogress=y,g.onabort=z,n(),b.events.disableBlur(),b.edit.off(),b.events.enableBlur();var h=b.popups.get("video.insert");h&&h.off("abortUpload").on("abortUpload",function(){4!=g.readyState&&g.abort()}),g.send(d)}}}function Q(c){b.events.$on(c,"dragover dragenter",".fr-video-upload-layer",function(){return a(this).addClass("fr-drop"),!1},!0),b.events.$on(c,"dragleave dragend",".fr-video-upload-layer",function(){return a(this).removeClass("fr-drop"),!1},!0),b.events.$on(c,"drop",".fr-video-upload-layer",function(d){d.preventDefault(),d.stopPropagation(),a(this).removeClass("fr-drop");var e=d.originalEvent.dataTransfer;if(e&&e.files){var f=c.data("instance")||b;f.events.disableBlur(),f.video.upload(e.files),f.events.enableBlur()}},!0),b.helpers.isIOS()&&b.events.$on(c,"touchstart",'.fr-video-upload-layer input[type="file"]',function(){a(this).trigger("click")},!0),b.events.$on(c,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var d=c.data("instance")||b;d.events.disableBlur(),c.find("input:focus").blur(),d.events.enableBlur(),d.video.upload(this.files)}a(this).val("")},!0)}function R(){b.events.on("drop",O,!0),b.events.on("mousedown window.mousedown",L),b.events.on("window.touchmove",M),b.events.on("mouseup window.mouseup",K),b.events.on("commands.mousedown",function(a){a.parents(".fr-toolbar").length>0&&K()}),b.events.on("video.hideResizer commands.undo commands.redo element.dropped",function(){K(!0)})}function S(a,c){b.edit.on(),ra&&ra.find("video").addClass("fr-error"),q(b.language.translate("Something went wrong. Please try again.")),b.events.trigger("video.error",[{code:a,message:za[a]},c])}function T(){var a="";if(b.opts.videoEditButtons.length>0){a+='<div class="fr-buttons">',a+=b.button.buildList(b.opts.videoEditButtons),a+="</div>";var c={buttons:a},d=b.popups.create("video.edit",c);return b.events.$on(b.$wp,"scroll.video-edit",function(){ra&&b.popups.isVisible("video.edit")&&(b.events.disableBlur(),t(ra))}),d}return!1}function U(){if(ra){var a=b.popups.get("video.size"),c=ra.find("iframe, embed, video");a.find('input[name="width"]').val(c.get(0).style.width||c.attr("width")).trigger("change"),a.find('input[name="height"]').val(c.get(0).style.height||c.attr("height")).trigger("change")}}function V(){var a=b.popups.get("video.size");a||(a=W()),o(),b.popups.refresh("video.size"),b.popups.setContainer("video.size",b.$sc);var c=ra.find("iframe, embed, video"),d=c.offset().left+c.width()/2,e=c.offset().top+c.height();b.popups.show("video.size",d,e,c.height())}function W(a){if(a)return b.popups.onRefresh("video.size",U),!0;var c="";c='<div class="fr-buttons">'+b.button.buildList(b.opts.videoSizeButtons)+"</div>";var d="";d='<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+b.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+b.id+'" type="text" name="width" placeholder="'+b.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+b.id+'" type="text" name="height" placeholder="'+b.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+b.language.translate("Update")+"</button></div></div>";var e={buttons:c,size_layer:d},f=b.popups.create("video.size",e);return b.events.$on(b.$wp,"scroll",function(){ra&&b.popups.isVisible("video.size")&&(b.events.disableBlur(),t(ra))}),f}function X(a){if("undefined"==typeof a&&(a=ra),a){if(a.hasClass("fr-fvl"))return"left";if(a.hasClass("fr-fvr"))return"right";if(a.hasClass("fr-dvb")||a.hasClass("fr-dvi"))return"center";if("block"==a.css("display")){if("left"==a.css("text-algin"))return"left";if("right"==a.css("text-align"))return"right"}else{if("left"==a.css("float"))return"left";if("right"==a.css("float"))return"right"}}return"center"}function Y(a){ra.removeClass("fr-fvr fr-fvl"),!b.opts.htmlUntouched&&b.opts.useClasses?"left"==a?ra.addClass("fr-fvl"):"right"==a&&ra.addClass("fr-fvr"):fa(ra,_(),a),ka(),I(),e(),b.selection.clear()}function Z(a){return ra?void a.find("> *:first").replaceWith(b.icon.create("video-align-"+X())):!1}function $(a,b){ra&&b.find('.fr-command[data-param1="'+X()+'"]').addClass("fr-active").attr("aria-selected",!0)}function _(a){"undefined"==typeof a&&(a=ra);var b=a.css("float");return a.css("float","none"),"block"==a.css("display")?(a.css("float",""),a.css("float")!=b&&a.css("float",b),"block"):(a.css("float",""),a.css("float")!=b&&a.css("float",b),"inline")}function aa(a){ra.removeClass("fr-dvi fr-dvb"),!b.opts.htmlUntouched&&b.opts.useClasses?"inline"==a?ra.addClass("fr-dvi"):"block"==a&&ra.addClass("fr-dvb"):fa(ra,a,X()),ka(),I(),e(),b.selection.clear()}function ba(a,b){ra&&b.find('.fr-command[data-param1="'+_()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ca(){var a=b.popups.get("video.insert");a||(a=f()),b.popups.isVisible("video.insert")||(o(),b.popups.refresh("video.insert"),b.popups.setContainer("video.insert",b.$sc));var c=ra.offset().left+ra.width()/2,d=ra.offset().top+ra.height();b.popups.show("video.insert",c,d,ra.outerHeight())}function da(){if(ra&&b.events.trigger("video.beforeRemove",[ra])!==!1){var a=ra;b.popups.hideAll(),K(!0),b.selection.setBefore(a.get(0))||b.selection.setAfter(a.get(0)),a.remove(),b.selection.restore(),b.html.fillEmptyBlocks(),b.events.trigger("video.removed",[a])}}function ea(){o()}function fa(a,c,d){!b.opts.htmlUntouched&&b.opts.useClasses?(a.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),a.addClass("fr-fv"+d[0]+" fr-dv"+c[0])):"inline"==c?(a.css({display:"inline-block"}),"center"==d?a.css({"float":"none"}):"left"==d?a.css({"float":"left"}):a.css({"float":"right"})):(a.css({display:"block",clear:"both"}),"left"==d?a.css({textAlign:"left"}):"right"==d?a.css({textAlign:"right"}):a.css({textAlign:"center"}))}function ga(a){a.hasClass("fr-dvi")||a.hasClass("fr-dvb")||(a.addClass("fr-fv"+X(a)[0]),a.addClass("fr-dv"+_(a)[0]))}function ha(a){var b=a.hasClass("fr-dvb")?"block":a.hasClass("fr-dvi")?"inline":null,c=a.hasClass("fr-fvl")?"left":a.hasClass("fr-fvr")?"right":X(a);fa(a,b,c),a.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function ia(){b.$el.find("video").filter(function(){return 0===a(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),b.$el.find("embed, iframe").filter(function(){if(b.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),a(this).parents("span.fr-video").length>0)return!1;for(var c=a(this).attr("src"),d=0;d<a.FE.VIDEO_PROVIDERS.length;d++){var e=a.FE.VIDEO_PROVIDERS[d];if(e.test_regex.test(c)&&new RegExp(b.opts.videoAllowedProviders.join("|")).test(e.provider))return!0}return!1}).map(function(){return 0===a(this).parents("object").length?this:a(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var c=b.$el.find("span.fr-video, video"),d=0;d<c.length;d++){var e=a(c[d]);!b.opts.htmlUntouched&&b.opts.useClasses?(ga(e),b.opts.videoTextNear||e.removeClass("fr-dvi").addClass("fr-dvb")):b.opts.htmlUntouched||b.opts.useClasses||ha(e)}c.toggleClass("fr-draggable",b.opts.videoMove)}function ja(){R(),b.helpers.isMobile()&&(b.events.$on(b.$el,"touchstart","span.fr-video",function(){Ba=!1}),b.events.$on(b.$el,"touchmove",function(){Ba=!0})),b.events.on("html.set",ia),ia(),b.events.$on(b.$el,"mousedown","span.fr-video",function(a){a.stopPropagation()}),b.events.$on(b.$el,"click touchend","span.fr-video",function(b){return"false"==a(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable")?!0:void J.call(this,b)}),b.events.on("keydown",function(c){var d=c.which;return!ra||d!=a.FE.KEYCODE.BACKSPACE&&d!=a.FE.KEYCODE.DELETE?ra&&d==a.FE.KEYCODE.ESC?(K(!0),c.preventDefault(),!1):ra&&d!=a.FE.KEYCODE.F10&&!b.keys.isBrowserAction(c)?(c.preventDefault(),!1):void 0:(c.preventDefault(),da(),b.undo.saveStep(),!1)},!0),b.events.on("toolbar.esc",function(){return ra?(b.events.disableBlur(),b.events.focus(),!1):void 0},!0),b.events.on("toolbar.focusEditor",function(){return ra?!1:void 0},!0),b.events.on("keydown",function(){b.$el.find("span.fr-video:empty").remove()}),b.$wp&&(H(),b.events.on("contentChanged",H)),f(!0),W(!0)}function ka(){if(ra){b.selection.clear();var a=b.doc.createRange();a.selectNode(ra.get(0));var c=b.selection.get();c.addRange(a)}}function la(){ra?(b.events.disableBlur(),ra.trigger("click")):(b.events.disableBlur(),b.selection.restore(),b.events.enableBlur(),b.popups.hide("video.insert"),b.toolbar.showInline())}function ma(a,c){if(ra){var d=b.popups.get("video.size"),e=ra.find("iframe, embed, video");e.css("width",a||d.find('input[name="width"]').val()),e.css("height",c||d.find('input[name="height"]').val()),e.get(0).style.width&&e.removeAttr("width"),e.get(0).style.height&&e.removeAttr("height"),d.find("input:focus").blur(),setTimeout(function(){ra.trigger("click")},b.helpers.isAndroid()?50:0)}}function na(){return ra}var oa,pa,qa,ra,sa=1,ta=2,ua=3,va=4,wa=5,xa=6,ya=7,za={};za[sa]="Video cannot be loaded from the passed link.",za[ta]="No link in upload response.",za[ua]="Error during file upload.",za[va]="Parsing response failed.",za[wa]="File is too large.",za[xa]="Video file type is invalid.",za[ya]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Aa,Ba;return b.shared.vid_exit_flag=!1,{_init:ja,showInsertPopup:d,showLayer:g,refreshByURLButton:h,refreshEmbedButton:i,refreshUploadButton:j,upload:P,insertByURL:r,insertEmbed:s,insert:k,align:Y,refreshAlign:Z,refreshAlignOnShow:$,display:aa,refreshDisplayOnShow:ba,remove:da,hideProgressBar:o,showSizePopup:V,replace:ca,back:la,setSize:ma,get:na}},a.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),a.FE.DefineIcon("insertVideo",{NAME:"video-camera",FA5NAME:"camera"}),a.FE.DefineIcon("videoByURL",{NAME:"link"}),a.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(a){this.video.refreshByURLButton(a)}}),a.FE.DefineIcon("videoEmbed",{NAME:"code"}),a.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(a){this.video.refreshEmbedButton(a)}}),a.FE.DefineIcon("videoUpload",{NAME:"upload"}),a.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(a){this.video.refreshUploadButton(a)}}),a.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),a.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),a.FE.DefineIcon("videoDisplay",{NAME:"star"}),a.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(a,b){this.video.display(b)},refresh:function(a){this.opts.videoTextNear||a.addClass("fr-hidden")},refreshOnShow:function(a,b){this.video.refreshDisplayOnShow(a,b)}}),a.FE.DefineIcon("video-align",{NAME:"align-left"}),a.FE.DefineIcon("video-align-left",{NAME:"align-left"}),a.FE.DefineIcon("video-align-right",{NAME:"align-right"}),a.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),a.FE.DefineIcon("videoAlign",{NAME:"align-center"}),a.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.videoAlign.options;for(var d in c)c.hasOwnProperty(d)&&(b+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+d+'" title="'+this.language.translate(c[d])+'">'+this.icon.create("video-align-"+d)+'<span class="fr-sr-only">'+this.language.translate(c[d])+"</span></a></li>");return b+="</ul>"},callback:function(a,b){this.video.align(b)},refresh:function(a){this.video.refreshAlign(a)},refreshOnShow:function(a,b){this.video.refreshAlignOnShow(a,b)}}),a.FE.DefineIcon("videoReplace",{NAME:"exchange"}),a.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),a.FE.DefineIcon("videoRemove",{NAME:"trash"}),a.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),a.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),a.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),a.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(a){var b=this.video.get();b||this.opts.toolbarInline?(a.removeClass("fr-hidden"),a.next(".fr-separator").removeClass("fr-hidden")):(a.addClass("fr-hidden"),a.next(".fr-separator").addClass("fr-hidden"))}}),a.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),a.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}}),a.extend(a.FE.DEFAULTS,{wordDeniedTags:[],wordDeniedAttrs:[],wordAllowedStyleProps:["font-family","font-size","background","color","width","text-align","vertical-align","background-color","padding","margin","height","margin-top","margin-left","margin-right","margin-bottom","text-decoration","font-weight","font-style"],wordPasteModal:!0}),a.FE.PLUGINS.wordPaste=function(b){function c(){b.events.on("paste.wordPaste",function(a){return C=a,b.opts.wordPasteModal?e():g(!0),!1})}function d(){var a='<div class="fr-word-paste-modal" style="padding: 20px 20px 10px 20px;">';return a+='<p style="text-align: left;">'+b.language.translate("The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?")+"</p>",a+='<div style="text-align: right; margin-top: 50px;"><button class="fr-remove-word fr-command">'+b.language.translate("Clean")+'</button> <button class="fr-keep-word fr-command">'+b.language.translate("Keep")+"</button></div>",a+="</div>"}function e(){if(!B){var c='<h4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.95 73.23" style="height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class="a" d="M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z" transform="translate(-575.97 -827.22)"/><path class="b" d="M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z" transform="translate(-575.97 -827.22)"/></svg> '+b.language.translate("Word Paste Detected")+"</h4>",e=d(),f=b.modals.create(D,c,e),g=f.$body;B=f.$modal,f.$modal.addClass("fr-middle"),b.events.bindClick(g,"button.fr-remove-word",function(){var a=B.data("instance")||b;a.wordPaste.clean()}),b.events.bindClick(g,"button.fr-keep-word",function(){var a=B.data("instance")||b;a.wordPaste.clean(!0)}),b.events.$on(a(b.o_win),"resize",function(){b.modals.resize(D)})}b.modals.show(D),b.modals.resize(D)}function f(){b.modals.hide(D)}function g(a){var c=b.opts.wordAllowedStyleProps;a||(b.opts.wordAllowedStyleProps=[]),0===C.indexOf("<colgroup>")&&(C="<table>"+C+"</table>"),C=C.replace(/<span[\n\r ]*style='mso-spacerun:yes'>[\r\n\u00a0 ]*<\/span>/g,"&nbsp;"),C=A(C,b.paste.getRtfClipboard());var d=b.doc.createElement("DIV");d.innerHTML=C,b.html.cleanBlankSpaces(d),C=d.innerHTML,C=b.paste.cleanEmptyTagsAndDivs(C),C=C.replace(/\u200b/g,""),f(),b.paste.clean(C,!0,!0),b.opts.wordAllowedStyleProps=c}function h(a){var b=a.parentNode;b&&a.parentNode.removeChild(a)}function i(a,b){if(b(a))for(var c=a.firstChild;c;){var d=c,e=c.previousSibling;c=c.nextSibling,i(d,b),d.previousSibling||d.nextSibling||d.parentNode||!c||e==c.previousSibling||!c.parentNode?d.previousSibling||d.nextSibling||d.parentNode||!c||c.previousSibling||c.nextSibling||c.parentNode||(e?c=e.nextSibling?e.nextSibling.nextSibling:null:a.firstChild&&(c=a.firstChild.nextSibling)):c=e?e.nextSibling:a.firstChild}}function j(a){if(!a.getAttribute("style")||!/mso-list:[\s]*l/gi.test(a.getAttribute("style").replace(/\n/gi,"")))return!1;try{if(!a.querySelector('[style="mso-list:Ignore"]'))return!1}catch(b){return!1}return!0}function k(a){return a.getAttribute("style").replace(/\n/gi,"").replace(/.*level([0-9]+?).*/gi,"$1")}function l(a,b){var c=a.cloneNode(!0);if(-1!=["H1","H2","H3","H4","H5","H6"].indexOf(a.tagName)){var d=document.createElement(a.tagName.toLowerCase());d.setAttribute("style",a.getAttribute("style")),d.innerHTML=c.innerHTML,c.innerHTML=d.outerHTML}i(c,function(a){return a.nodeType==Node.ELEMENT_NODE&&("mso-list:Ignore"==a.getAttribute("style")&&a.parentNode.removeChild(a),x(a,b)),!0});var e=c.innerHTML;return e=e.replace(/<!--[\s\S]*?-->/gi,"")}function m(a,b){var c=/[0-9a-zA-Z]./gi,d=!1;a.firstElementChild&&a.firstElementChild.firstElementChild&&a.firstElementChild.firstElementChild.firstChild&&(d=d||c.test(a.firstElementChild.firstElementChild.firstChild.data||""),!d&&a.firstElementChild.firstElementChild.firstElementChild&&a.firstElementChild.firstElementChild.firstElementChild.firstChild&&(d=d||c.test(a.firstElementChild.firstElementChild.firstElementChild.firstChild.data||"")));var e=d?"ol":"ul",f=k(a),g="<"+e+"><li>"+l(a,b),i=a.nextElementSibling,n=a.parentNode;for(h(a),a=null;i&&j(i);){var o=i.previousElementSibling,p=k(i);if(p>f)g+=m(i,b).outerHTML;else{if(f>p)break;g+="</li><li>"+l(i,b)}if(f=p,i.previousElementSibling||i.nextElementSibling||i.parentNode){var q=i;i=i.nextElementSibling,h(q),q=null}else i=o?o.nextElementSibling:n.firstElementChild}g+="</li></"+e+">";var r=document.createElement("div");r.innerHTML=g;var s=r.firstElementChild;return s}function n(a,b){for(var c=document.createElement(b),d=0;d<a.attributes.length;d++){var e=a.attributes[d].name;c.setAttribute(e,a.getAttribute(e))}return c.innerHTML=a.innerHTML,a.parentNode.replaceChild(c,a),c}function o(c,d){b.node.clearAttributes(c);for(var e=c.firstElementChild,f=0,g=!1,i=null;e;){e.firstElementChild&&-1!=e.firstElementChild.tagName.indexOf("W:")&&(e.innerHTML=e.firstElementChild.innerHTML),i=e.getAttribute("width"),i||g||(g=!0),f+=parseInt(i,10),(!e.firstChild||e.firstChild&&e.firstChild.data==a.FE.UNICODE_NBSP)&&(e.firstChild&&h(e.firstChild),e.innerHTML="<br>");for(var k=e.firstElementChild,l=1==e.children.length;k;)"P"!=k.tagName||j(k)||l&&p(k),k=k.nextElementSibling;if(d){var m=e.getAttribute("class");if(m){m=q(m);var n=m.match(/xl[0-9]+/gi);if(n){var o=n[0],s="."+o;d[s]&&r(e,d[s])}}d.td&&r(e,d.td)}var t=e.getAttribute("style");t&&(t=q(t),t&&";"!=t.slice(-1)&&(t+=";"));var u=e.getAttribute("valign");if(!u&&t){var v=t.match(/vertical-align:.+?[; "]{1,1}/gi);v&&(u=v[v.length-1].replace(/vertical-align:(.+?)[; "]{1,1}/gi,"$1"))}var w=null;if(t){var x=t.match(/text-align:.+?[; "]{1,1}/gi);x&&(w=x[x.length-1].replace(/text-align:(.+?)[; "]{1,1}/gi,"$1")),"general"==w&&(w=null)}var y=null;if(t){var z=t.match(/background:.+?[; "]{1,1}/gi);z&&(y=z[z.length-1].replace(/background:(.+?)[; "]{1,1}/gi,"$1"))}var A=e.getAttribute("colspan"),B=e.getAttribute("rowspan");A&&e.setAttribute("colspan",A),B&&e.setAttribute("rowspan",B),u&&(e.style["vertical-align"]=u),w&&(e.style["text-align"]=w),y&&(e.style["background-color"]=y),i&&e.setAttribute("width",i),e=e.nextElementSibling}for(e=c.firstElementChild;e;)i=e.getAttribute("width"),g?e.removeAttribute("width"):e.setAttribute("width",100*parseInt(i,10)/f+"%"),e=e.nextElementSibling}function p(a){var b=a.parentNode,c=a.getAttribute("align");c&&(b&&"TD"==b.tagName?(b.setAttribute("style",b.getAttribute("style")+"text-align:"+c+";"),a.removeAttribute("align")):(a.style["text-align"]=c,a.removeAttribute("align")))}function q(a){return a.replace(/\n|\r|\n\r|&quot;/g,"")}function r(a,b,c){if(b){var d=a.getAttribute("style");d&&";"!=d.slice(-1)&&(d+=";"),b&&";"!=b.slice(-1)&&(b+=";"),b=b.replace(/\n/gi,"");var e=null;e=c?(d||"")+b:b+(d||""),a.setAttribute("style",e)}}function s(a){var b=a.getAttribute("style");if(b){b=q(b),b&&";"!=b.slice(-1)&&(b+=";");var c=b.match(/(^|\S+?):.+?;{1,1}/gi);if(c){for(var d={},e=0;e<c.length;e++){var f=c[e],g=f.split(":");2==g.length&&("text-align"!=g[0]||"SPAN"!=a.tagName)&&(d[g[0]]=g[1])}var h="";for(var i in d)if(d.hasOwnProperty(i)){
if("font-size"==i&&"pt;"==d[i].slice(-3)){var j=null;try{j=parseFloat(d[i].slice(0,-3),10)}catch(k){}j&&(j=Math.round(1.33*j),d[i]=j+"px;")}h+=i+":"+d[i]}h&&a.setAttribute("style",h)}}}function t(a){for(var b=a.match(/[0-9a-f]{2}/gi),c=[],d=0;d<b.length;d++)c.push(String.fromCharCode(parseInt(b[d],16)));var e=c.join("");return btoa(e)}function u(a,b,c){for(var d=a.split(c),e=1;e<d.length;e++){var f=d[e];if(f=f.split("shplid"),f.length>1){f=f[1];for(var g="",h=0;h<f.length&&"\\"!=f[h]&&"{"!=f[h]&&" "!=f[h]&&"\r"!=f[h]&&"\n"!=f[h];)g+=f[h],h++;var i=f.split("bliptag");if(i&&i.length<2)continue;var j=null;if(-1!=i[0].indexOf("pngblip")?j="image/png":-1!=i[0].indexOf("jpegblip")&&(j="image/jpeg"),!j)continue;var k=i[1].split("}");if(k&&k.length<2)continue;var l;if(k.length>2&&-1!=k[0].indexOf("blipuid"))l=k[1].split(" ");else{if(l=k[0].split(" "),l&&l.length<2)continue;l.shift()}var m=l.join("");E[b+g]={image_hex:m,image_type:j}}}}function v(a){E={},u(a,"i","\\shppict"),u(a,"s","\\shp{")}function w(b,c){if(c){var d;if("IMG"==b.tagName){var e=b.getAttribute("src");if(!e||-1==e.indexOf("file://"))return;d=F[b.getAttribute("v:shapes")],d||(d=b.getAttribute("v:shapes"))}else d=b.parentNode.getAttribute("o:spid");if(b.removeAttribute("height"),d){v(c);var f=E[d.substring(7)];if(f){var g=t(f.image_hex),h="data:"+f.image_type+";base64,"+g;"IMG"===b.tagName?(b.src=h,b.setAttribute("data-fr-image-pasted",!0)):a(b.parentNode).before('<img data-fr-image-pasted="true" src="'+h+'" style="'+b.parentNode.getAttribute("style")+'">').remove()}}}}function x(a,b){var c=a.tagName,d=c.toLowerCase();a.firstElementChild&&("I"==a.firstElementChild.tagName?n(a.firstElementChild,"em"):"B"==a.firstElementChild.tagName&&n(a.firstElementChild,"strong"));var e=["SCRIPT","APPLET","EMBED","NOFRAMES","NOSCRIPT"];if(-1!=e.indexOf(c))return h(a),!1;var f=-1,g=["META","LINK","XML","ST1:","O:","W:","FONT"];for(f=0;f<g.length;f++)if(-1!=c.indexOf(g[f]))return a.innerHTML?(a.outerHTML=a.innerHTML,h(a),!1):(h(a),!1);if("TD"!=c){var i=a.getAttribute("class");if(b&&i){i=q(i);var j=i.split(" ");for(f=0;f<j.length;f++){var k=j[f],l=[],m="."+k;l.push(m),m=d+m,l.push(m);for(var s=0;s<l.length;s++)b[l[s]]&&r(a,b[l[s]])}a.removeAttribute("class")}b&&b[d]&&r(a,b[d])}var t=["P","H1","H2","H3","H4","H5","H6","PRE"];if(-1!=t.indexOf(c)){var u=a.getAttribute("class");if(u&&(b&&b[c.toLowerCase()+"."+u]&&r(a,b[c.toLowerCase()+"."+u]),-1!=u.toLowerCase().indexOf("mso"))){var v=q(u);v=v.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi,""),v?a.setAttribute("class",v):a.removeAttribute("class")}var w=a.getAttribute("style"),x=null;if(w){var y=w.match(/text-align:.+?[; "]{1,1}/gi);y&&(x=y[y.length-1].replace(/(text-align:.+?[; "]{1,1})/gi,"$1"))}p(a)}if("TR"==c&&o(a,b),"A"==c&&!a.attributes.getNamedItem("href")&&a.innerHTML&&(a.outerHTML=a.innerHTML),"TD"!=c&&"TH"!=c||a.innerHTML||(a.innerHTML="<br>"),"TABLE"==c&&(a.style.width="100%"),a.getAttribute("lang")&&a.removeAttribute("lang"),a.getAttribute("style")&&-1!=a.getAttribute("style").toLowerCase().indexOf("mso")){var z=q(a.getAttribute("style"));z=z.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi,""),z?a.setAttribute("style",z):a.removeAttribute("style")}return!0}function y(a){var b={},c=a.getElementsByTagName("style");if(c.length){var d=c[0],e=d.innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi);if(e)for(var f=0;f<e.length;f++){var g=e[f],h=g.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),i=g.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");h=h.replace(/^[\s]|[\s]$/gm,""),i=i.replace(/^[\s]|[\s]$/gm,""),h=h.replace(/\n|\r|\n\r/g,""),i=i.replace(/\n|\r|\n\r/g,"");for(var j=h.split(", "),k=0;k<j.length;k++)b[j[k]]=i}}return b}function z(a){for(var b=a.split("v:shape"),c=1;c<b.length;c++){var d=b[c],e=d.split(' id="')[1];if(e&&e.length>1){e=e.split('"')[0];var f=d.split(' o:spid="')[1];f&&f.length>1&&(f=f.split('"')[0],F[e]=f)}}}function A(c,d){c=c.replace(/[.\s\S\w\W<>]*(<html[^>]*>[.\s\S\w\W<>]*<\/html>)[.\s\S\w\W<>]*/i,"$1"),z(c);var e=new DOMParser,f=e.parseFromString(c,"text/html"),g=f.head,k=f.body,l=y(g);i(k,function(b){if(b.nodeType==Node.TEXT_NODE&&/\n|\u00a0|\r/.test(b.data)){if(!/\S| /.test(b.data))return b.data==a.FE.UNICODE_NBSP?(b.data="\u200b",!0):1==b.data.length&&10==b.data.charCodeAt(0)?(b.data=" ",!0):(h(b),!1);b.data=b.data.replace(/\n|\r/gi," ")}return!0}),i(k,function(a){return a.nodeType!=Node.ELEMENT_NODE||"V:IMAGEDATA"!=a.tagName&&"IMG"!=a.tagName||w(a,d),!0});for(var n=k.querySelectorAll("ul > ul, ul > ol, ol > ul, ol > ol"),o=n.length-1;o>=0;o--)n[o].previousElementSibling&&"LI"===n[o].previousElementSibling.tagName&&n[o].previousElementSibling.appendChild(n[o]);i(k,function(a){if(a.nodeType==Node.TEXT_NODE)return a.data=a.data.replace(/<br>(\n|\r)/gi,"<br>"),!1;if(a.nodeType==Node.ELEMENT_NODE){if(j(a)){var b=a.parentNode,c=a.previousSibling,d=m(a,l),e=null;return e=c?c.nextSibling:b.firstChild,e?b.insertBefore(d,e):b.appendChild(d),!1}return x(a,l)}return a.nodeType==Node.COMMENT_NODE?(h(a),!1):!0}),i(k,function(a){if(a.nodeType==Node.ELEMENT_NODE){var b=a.tagName;if(!a.innerHTML&&-1==["BR","IMG"].indexOf(b)){for(var c=a.parentNode;c&&(h(a),a=c,!a.innerHTML);)c=a.parentNode;return!1}s(a)}return!0});var p=k.outerHTML,q=b.opts.htmlAllowedStyleProps;return b.opts.htmlAllowedStyleProps=b.opts.wordAllowedStyleProps,p=b.clean.html(p,b.opts.wordDeniedTags,b.opts.wordDeniedAttrs,!1),b.opts.htmlAllowedStyleProps=q,p}var B,C,D="word_paste",E=null,F={};return{_init:c,clean:g}}});
/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28
* http://jqueryui.com
* Includes: widget.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */


(function( factory ) {
	if ( typeof define === "function" && define.amd ) {

		// AMD. Register as an anonymous module.
		define([ "jquery" ], factory );

	} else if ( typeof exports === "object" ) {

		// Node/CommonJS
		factory( require( "jquery" ) );

	} else {

		// Browser globals
		factory( jQuery );
	}
}(function( $ ) {
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */


var widget_uuid = 0,
	widget_slice = Array.prototype.slice;

$.cleanData = (function( orig ) {
	return function( elems ) {
		var events, elem, i;
		for ( i = 0; (elem = elems[i]) != null; i++ ) {
			try {

				// Only trigger remove when necessary to save time
				events = $._data( elem, "events" );
				if ( events && events.remove ) {
					$( elem ).triggerHandler( "remove" );
				}

			// http://bugs.jquery.com/ticket/8235
			} catch ( e ) {}
		}
		orig( elems );
	};
})( $.cleanData );

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );

	return constructor;
};

$.widget.extend = function( target ) {
	var input = widget_slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = widget_slice.call( arguments, 1 ),
			returnValue = this;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( options === "instance" ) {
					returnValue = instance;
					return false;
				}
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {

			// Allow multiple hashes to be passed on init
			if ( args.length ) {
				options = $.widget.extend.apply( null, [ options ].concat(args) );
			}

			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} );
					if ( instance._init ) {
						instance._init();
					}
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = widget_uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( arguments.length === 1 ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( arguments.length === 1 ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled", !!value );

			// If the widget is becoming disabled, then nothing is interactive
			if ( value ) {
				this.hoverable.removeClass( "ui-state-hover" );
				this.focusable.removeClass( "ui-state-focus" );
			}
		}

		return this;
	},

	enable: function() {
		return this._setOptions({ disabled: false });
	},
	disable: function() {
		return this._setOptions({ disabled: true });
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^([\w:-]*)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) +
			this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );

		// Clear the stack to avoid memory leaks (#10056)
		this.bindings = $( this.bindings.not( element ).get() );
		this.focusable = $( this.focusable.not( element ).get() );
		this.hoverable = $( this.hoverable.not( element ).get() );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

var widget = $.widget;



}));
/*
 * jQuery Iframe Transport Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 */

/* global define, require, window, document, JSON */


;(function (factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        // Register as an anonymous AMD module:
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS:
        factory(require('jquery'));
    } else {
        // Browser globals:
        factory(window.jQuery);
    }
}(function ($) {
    'use strict';

    // Helper variable to create unique names for the transport iframes:
    var counter = 0,
        jsonAPI = $,
        jsonParse = 'parseJSON';

    if ('JSON' in window && 'parse' in JSON) {
      jsonAPI = JSON;
      jsonParse = 'parse';
    }

    // The iframe transport accepts four additional options:
    // options.fileInput: a jQuery collection of file input fields
    // options.paramName: the parameter name for the file form data,
    //  overrides the name property of the file input field(s),
    //  can be a string or an array of strings.
    // options.formData: an array of objects with name and value properties,
    //  equivalent to the return data of .serializeArray(), e.g.:
    //  [{name: 'a', value: 1}, {name: 'b', value: 2}]
    // options.initialIframeSrc: the URL of the initial iframe src,
    //  by default set to "javascript:false;"
    $.ajaxTransport('iframe', function (options) {
        if (options.async) {
            // javascript:false as initial iframe src
            // prevents warning popups on HTTPS in IE6:
            /*jshint scripturl: true */
            var initialIframeSrc = options.initialIframeSrc || 'javascript:false;',
            /*jshint scripturl: false */
                form,
                iframe,
                addParamChar;
            return {
                send: function (_, completeCallback) {
                    form = $('<form style="display:none;"></form>');
                    form.attr('accept-charset', options.formAcceptCharset);
                    addParamChar = /\?/.test(options.url) ? '&' : '?';
                    // XDomainRequest only supports GET and POST:
                    if (options.type === 'DELETE') {
                        options.url = options.url + addParamChar + '_method=DELETE';
                        options.type = 'POST';
                    } else if (options.type === 'PUT') {
                        options.url = options.url + addParamChar + '_method=PUT';
                        options.type = 'POST';
                    } else if (options.type === 'PATCH') {
                        options.url = options.url + addParamChar + '_method=PATCH';
                        options.type = 'POST';
                    }
                    // IE versions below IE8 cannot set the name property of
                    // elements that have already been added to the DOM,
                    // so we set the name along with the iframe HTML markup:
                    counter += 1;
                    iframe = $(
                        '<iframe src="' + initialIframeSrc +
                            '" name="iframe-transport-' + counter + '"></iframe>'
                    ).bind('load', function () {
                        var fileInputClones,
                            paramNames = $.isArray(options.paramName) ?
                                    options.paramName : [options.paramName];
                        iframe
                            .unbind('load')
                            .bind('load', function () {
                                var response;
                                // Wrap in a try/catch block to catch exceptions thrown
                                // when trying to access cross-domain iframe contents:
                                try {
                                    response = iframe.contents();
                                    // Google Chrome and Firefox do not throw an
                                    // exception when calling iframe.contents() on
                                    // cross-domain requests, so we unify the response:
                                    if (!response.length || !response[0].firstChild) {
                                        throw new Error();
                                    }
                                } catch (e) {
                                    response = undefined;
                                }
                                // The complete callback returns the
                                // iframe content document as response object:
                                completeCallback(
                                    200,
                                    'success',
                                    {'iframe': response}
                                );
                                // Fix for IE endless progress bar activity bug
                                // (happens on form submits to iframe targets):
                                $('<iframe src="' + initialIframeSrc + '"></iframe>')
                                    .appendTo(form);
                                window.setTimeout(function () {
                                    // Removing the form in a setTimeout call
                                    // allows Chrome's developer tools to display
                                    // the response result
                                    form.remove();
                                }, 0);
                            });
                        form
                            .prop('target', iframe.prop('name'))
                            .prop('action', options.url)
                            .prop('method', options.type);
                        if (options.formData) {
                            $.each(options.formData, function (index, field) {
                                $('<input type="hidden"/>')
                                    .prop('name', field.name)
                                    .val(field.value)
                                    .appendTo(form);
                            });
                        }
                        if (options.fileInput && options.fileInput.length &&
                                options.type === 'POST') {
                            fileInputClones = options.fileInput.clone();
                            // Insert a clone for each file input field:
                            options.fileInput.after(function (index) {
                                return fileInputClones[index];
                            });
                            if (options.paramName) {
                                options.fileInput.each(function (index) {
                                    $(this).prop(
                                        'name',
                                        paramNames[index] || options.paramName
                                    );
                                });
                            }
                            // Appending the file input fields to the hidden form
                            // removes them from their original location:
                            form
                                .append(options.fileInput)
                                .prop('enctype', 'multipart/form-data')
                                // enctype must be set as encoding for IE:
                                .prop('encoding', 'multipart/form-data');
                            // Remove the HTML5 form attribute from the input(s):
                            options.fileInput.removeAttr('form');
                        }
                        form.submit();
                        // Insert the file input fields at their original location
                        // by replacing the clones with the originals:
                        if (fileInputClones && fileInputClones.length) {
                            options.fileInput.each(function (index, input) {
                                var clone = $(fileInputClones[index]);
                                // Restore the original name and form properties:
                                $(input)
                                    .prop('name', clone.prop('name'))
                                    .attr('form', clone.attr('form'));
                                clone.replaceWith(input);
                            });
                        }
                    });
                    form.append(iframe).appendTo(document.body);
                },
                abort: function () {
                    if (iframe) {
                        // javascript:false as iframe src aborts the request
                        // and prevents warning popups on HTTPS in IE6.
                        // concat is used to avoid the "Script URL" JSLint error:
                        iframe
                            .unbind('load')
                            .prop('src', initialIframeSrc);
                    }
                    if (form) {
                        form.remove();
                    }
                }
            };
        }
    });

    // The iframe transport returns the iframe content document as response.
    // The following adds converters from iframe to text, json, html, xml
    // and script.
    // Please note that the Content-Type for JSON responses has to be text/plain
    // or text/html, if the browser doesn't include application/json in the
    // Accept header, else IE will show a download dialog.
    // The Content-Type for XML responses on the other hand has to be always
    // application/xml or text/xml, so IE properly parses the XML response.
    // See also
    // https://github.com/blueimp/jQuery-File-Upload/wiki/Setup#content-type-negotiation
    $.ajaxSetup({
        converters: {
            'iframe text': function (iframe) {
                return iframe && $(iframe[0].body).text();
            },
            'iframe json': function (iframe) {
                return iframe && jsonAPI[jsonParse]($(iframe[0].body).text());
            },
            'iframe html': function (iframe) {
                return iframe && $(iframe[0].body).html();
            },
            'iframe xml': function (iframe) {
                var xmlDoc = iframe && iframe[0];
                return xmlDoc && $.isXMLDoc(xmlDoc) ? xmlDoc :
                        $.parseXML((xmlDoc.XMLDocument && xmlDoc.XMLDocument.xml) ||
                            $(xmlDoc.body).html());
            },
            'iframe script': function (iframe) {
                return iframe && $.globalEval($(iframe[0].body).text());
            }
        }
    });

}));
/*
 * jQuery File Upload Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 */

/* jshint nomen:false */
/* global define, require, window, document, location, Blob, FormData */


;(function (factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        // Register as an anonymous AMD module:
        define([
            'jquery',
            'jquery-ui/ui/widget'
        ], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS:
        factory(
            require('jquery'),
            require('./vendor/jquery.ui.widget')
        );
    } else {
        // Browser globals:
        factory(window.jQuery);
    }
}(function ($) {
    'use strict';

    // Detect file input support, based on
    // http://viljamis.com/blog/2012/file-upload-support-on-mobile/
    $.support.fileInput = !(new RegExp(
        // Handle devices which give false positives for the feature detection:
        '(Android (1\\.[0156]|2\\.[01]))' +
            '|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)' +
            '|(w(eb)?OSBrowser)|(webOS)' +
            '|(Kindle/(1\\.0|2\\.[05]|3\\.0))'
    ).test(window.navigator.userAgent) ||
        // Feature detection for all other devices:
        $('<input type="file">').prop('disabled'));

    // The FileReader API is not actually used, but works as feature detection,
    // as some Safari versions (5?) support XHR file uploads via the FormData API,
    // but not non-multipart XHR file uploads.
    // window.XMLHttpRequestUpload is not available on IE10, so we check for
    // window.ProgressEvent instead to detect XHR2 file upload capability:
    $.support.xhrFileUpload = !!(window.ProgressEvent && window.FileReader);
    $.support.xhrFormDataFileUpload = !!window.FormData;

    // Detect support for Blob slicing (required for chunked uploads):
    $.support.blobSlice = window.Blob && (Blob.prototype.slice ||
        Blob.prototype.webkitSlice || Blob.prototype.mozSlice);

    // Helper function to create drag handlers for dragover/dragenter/dragleave:
    function getDragHandler(type) {
        var isDragOver = type === 'dragover';
        return function (e) {
            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;
            var dataTransfer = e.dataTransfer;
            if (dataTransfer && $.inArray('Files', dataTransfer.types) !== -1 &&
                    this._trigger(
                        type,
                        $.Event(type, {delegatedEvent: e})
                    ) !== false) {
                e.preventDefault();
                if (isDragOver) {
                    dataTransfer.dropEffect = 'copy';
                }
            }
        };
    }

    // The fileupload widget listens for change events on file input fields defined
    // via fileInput setting and paste or drop events of the given dropZone.
    // In addition to the default jQuery Widget methods, the fileupload widget
    // exposes the "add" and "send" methods, to add or directly send files using
    // the fileupload API.
    // By default, files added via file input selection, paste, drag & drop or
    // "add" method are uploaded immediately, but it is possible to override
    // the "add" callback option to queue file uploads.
    $.widget('blueimp.fileupload', {

        options: {
            // The drop target element(s), by the default the complete document.
            // Set to null to disable drag & drop support:
            dropZone: $(document),
            // The paste target element(s), by the default undefined.
            // Set to a DOM node or jQuery object to enable file pasting:
            pasteZone: undefined,
            // The file input field(s), that are listened to for change events.
            // If undefined, it is set to the file input fields inside
            // of the widget element on plugin initialization.
            // Set to null to disable the change listener.
            fileInput: undefined,
            // By default, the file input field is replaced with a clone after
            // each input field change event. This is required for iframe transport
            // queues and allows change events to be fired for the same file
            // selection, but can be disabled by setting the following option to false:
            replaceFileInput: true,
            // The parameter name for the file form data (the request argument name).
            // If undefined or empty, the name property of the file input field is
            // used, or "files[]" if the file input name property is also empty,
            // can be a string or an array of strings:
            paramName: undefined,
            // By default, each file of a selection is uploaded using an individual
            // request for XHR type uploads. Set to false to upload file
            // selections in one request each:
            singleFileUploads: true,
            // To limit the number of files uploaded with one XHR request,
            // set the following option to an integer greater than 0:
            limitMultiFileUploads: undefined,
            // The following option limits the number of files uploaded with one
            // XHR request to keep the request size under or equal to the defined
            // limit in bytes:
            limitMultiFileUploadSize: undefined,
            // Multipart file uploads add a number of bytes to each uploaded file,
            // therefore the following option adds an overhead for each file used
            // in the limitMultiFileUploadSize configuration:
            limitMultiFileUploadSizeOverhead: 512,
            // Set the following option to true to issue all file upload requests
            // in a sequential order:
            sequentialUploads: false,
            // To limit the number of concurrent uploads,
            // set the following option to an integer greater than 0:
            limitConcurrentUploads: undefined,
            // Set the following option to true to force iframe transport uploads:
            forceIframeTransport: false,
            // Set the following option to the location of a redirect url on the
            // origin server, for cross-domain iframe transport uploads:
            redirect: undefined,
            // The parameter name for the redirect url, sent as part of the form
            // data and set to 'redirect' if this option is empty:
            redirectParamName: undefined,
            // Set the following option to the location of a postMessage window,
            // to enable postMessage transport uploads:
            postMessage: undefined,
            // By default, XHR file uploads are sent as multipart/form-data.
            // The iframe transport is always using multipart/form-data.
            // Set to false to enable non-multipart XHR uploads:
            multipart: true,
            // To upload large files in smaller chunks, set the following option
            // to a preferred maximum chunk size. If set to 0, null or undefined,
            // or the browser does not support the required Blob API, files will
            // be uploaded as a whole.
            maxChunkSize: undefined,
            // When a non-multipart upload or a chunked multipart upload has been
            // aborted, this option can be used to resume the upload by setting
            // it to the size of the already uploaded bytes. This option is most
            // useful when modifying the options object inside of the "add" or
            // "send" callbacks, as the options are cloned for each file upload.
            uploadedBytes: undefined,
            // By default, failed (abort or error) file uploads are removed from the
            // global progress calculation. Set the following option to false to
            // prevent recalculating the global progress data:
            recalculateProgress: true,
            // Interval in milliseconds to calculate and trigger progress events:
            progressInterval: 100,
            // Interval in milliseconds to calculate progress bitrate:
            bitrateInterval: 500,
            // By default, uploads are started automatically when adding files:
            autoUpload: true,

            // Error and info messages:
            messages: {
                uploadedBytes: 'Uploaded bytes exceed file size'
            },

            // Translation function, gets the message key to be translated
            // and an object with context specific data as arguments:
            i18n: function (message, context) {
                message = this.messages[message] || message.toString();
                if (context) {
                    $.each(context, function (key, value) {
                        message = message.replace('{' + key + '}', value);
                    });
                }
                return message;
            },

            // Additional form data to be sent along with the file uploads can be set
            // using this option, which accepts an array of objects with name and
            // value properties, a function returning such an array, a FormData
            // object (for XHR file uploads), or a simple object.
            // The form of the first fileInput is given as parameter to the function:
            formData: function (form) {
                return form.serializeArray();
            },

            // The add callback is invoked as soon as files are added to the fileupload
            // widget (via file input selection, drag & drop, paste or add API call).
            // If the singleFileUploads option is enabled, this callback will be
            // called once for each file in the selection for XHR file uploads, else
            // once for each file selection.
            //
            // The upload starts when the submit method is invoked on the data parameter.
            // The data object contains a files property holding the added files
            // and allows you to override plugin options as well as define ajax settings.
            //
            // Listeners for this callback can also be bound the following way:
            // .bind('fileuploadadd', func);
            //
            // data.submit() returns a Promise object and allows to attach additional
            // handlers using jQuery's Deferred callbacks:
            // data.submit().done(func).fail(func).always(func);
            add: function (e, data) {
                if (e.isDefaultPrevented()) {
                    return false;
                }
                if (data.autoUpload || (data.autoUpload !== false &&
                        $(this).fileupload('option', 'autoUpload'))) {
                    data.process().done(function () {
                        data.submit();
                    });
                }
            },

            // Other callbacks:

            // Callback for the submit event of each file upload:
            // submit: function (e, data) {}, // .bind('fileuploadsubmit', func);

            // Callback for the start of each file upload request:
            // send: function (e, data) {}, // .bind('fileuploadsend', func);

            // Callback for successful uploads:
            // done: function (e, data) {}, // .bind('fileuploaddone', func);

            // Callback for failed (abort or error) uploads:
            // fail: function (e, data) {}, // .bind('fileuploadfail', func);

            // Callback for completed (success, abort or error) requests:
            // always: function (e, data) {}, // .bind('fileuploadalways', func);

            // Callback for upload progress events:
            // progress: function (e, data) {}, // .bind('fileuploadprogress', func);

            // Callback for global upload progress events:
            // progressall: function (e, data) {}, // .bind('fileuploadprogressall', func);

            // Callback for uploads start, equivalent to the global ajaxStart event:
            // start: function (e) {}, // .bind('fileuploadstart', func);

            // Callback for uploads stop, equivalent to the global ajaxStop event:
            // stop: function (e) {}, // .bind('fileuploadstop', func);

            // Callback for change events of the fileInput(s):
            // change: function (e, data) {}, // .bind('fileuploadchange', func);

            // Callback for paste events to the pasteZone(s):
            // paste: function (e, data) {}, // .bind('fileuploadpaste', func);

            // Callback for drop events of the dropZone(s):
            // drop: function (e, data) {}, // .bind('fileuploaddrop', func);

            // Callback for dragover events of the dropZone(s):
            // dragover: function (e) {}, // .bind('fileuploaddragover', func);

            // Callback for the start of each chunk upload request:
            // chunksend: function (e, data) {}, // .bind('fileuploadchunksend', func);

            // Callback for successful chunk uploads:
            // chunkdone: function (e, data) {}, // .bind('fileuploadchunkdone', func);

            // Callback for failed (abort or error) chunk uploads:
            // chunkfail: function (e, data) {}, // .bind('fileuploadchunkfail', func);

            // Callback for completed (success, abort or error) chunk upload requests:
            // chunkalways: function (e, data) {}, // .bind('fileuploadchunkalways', func);

            // The plugin options are used as settings object for the ajax calls.
            // The following are jQuery ajax settings required for the file uploads:
            processData: false,
            contentType: false,
            cache: false,
            timeout: 0
        },

        // A list of options that require reinitializing event listeners and/or
        // special initialization code:
        _specialOptions: [
            'fileInput',
            'dropZone',
            'pasteZone',
            'multipart',
            'forceIframeTransport'
        ],

        _blobSlice: $.support.blobSlice && function () {
            var slice = this.slice || this.webkitSlice || this.mozSlice;
            return slice.apply(this, arguments);
        },

        _BitrateTimer: function () {
            this.timestamp = ((Date.now) ? Date.now() : (new Date()).getTime());
            this.loaded = 0;
            this.bitrate = 0;
            this.getBitrate = function (now, loaded, interval) {
                var timeDiff = now - this.timestamp;
                if (!this.bitrate || !interval || timeDiff > interval) {
                    this.bitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;
                    this.loaded = loaded;
                    this.timestamp = now;
                }
                return this.bitrate;
            };
        },

        _isXHRUpload: function (options) {
            return !options.forceIframeTransport &&
                ((!options.multipart && $.support.xhrFileUpload) ||
                $.support.xhrFormDataFileUpload);
        },

        _getFormData: function (options) {
            var formData;
            if ($.type(options.formData) === 'function') {
                return options.formData(options.form);
            }
            if ($.isArray(options.formData)) {
                return options.formData;
            }
            if ($.type(options.formData) === 'object') {
                formData = [];
                $.each(options.formData, function (name, value) {
                    formData.push({name: name, value: value});
                });
                return formData;
            }
            return [];
        },

        _getTotal: function (files) {
            var total = 0;
            $.each(files, function (index, file) {
                total += file.size || 1;
            });
            return total;
        },

        _initProgressObject: function (obj) {
            var progress = {
                loaded: 0,
                total: 0,
                bitrate: 0
            };
            if (obj._progress) {
                $.extend(obj._progress, progress);
            } else {
                obj._progress = progress;
            }
        },

        _initResponseObject: function (obj) {
            var prop;
            if (obj._response) {
                for (prop in obj._response) {
                    if (obj._response.hasOwnProperty(prop)) {
                        delete obj._response[prop];
                    }
                }
            } else {
                obj._response = {};
            }
        },

        _onProgress: function (e, data) {
            if (e.lengthComputable) {
                var now = ((Date.now) ? Date.now() : (new Date()).getTime()),
                    loaded;
                if (data._time && data.progressInterval &&
                        (now - data._time < data.progressInterval) &&
                        e.loaded !== e.total) {
                    return;
                }
                data._time = now;
                loaded = Math.floor(
                    e.loaded / e.total * (data.chunkSize || data._progress.total)
                ) + (data.uploadedBytes || 0);
                // Add the difference from the previously loaded state
                // to the global loaded counter:
                this._progress.loaded += (loaded - data._progress.loaded);
                this._progress.bitrate = this._bitrateTimer.getBitrate(
                    now,
                    this._progress.loaded,
                    data.bitrateInterval
                );
                data._progress.loaded = data.loaded = loaded;
                data._progress.bitrate = data.bitrate = data._bitrateTimer.getBitrate(
                    now,
                    loaded,
                    data.bitrateInterval
                );
                // Trigger a custom progress event with a total data property set
                // to the file size(s) of the current upload and a loaded data
                // property calculated accordingly:
                this._trigger(
                    'progress',
                    $.Event('progress', {delegatedEvent: e}),
                    data
                );
                // Trigger a global progress event for all current file uploads,
                // including ajax calls queued for sequential file uploads:
                this._trigger(
                    'progressall',
                    $.Event('progressall', {delegatedEvent: e}),
                    this._progress
                );
            }
        },

        _initProgressListener: function (options) {
            var that = this,
                xhr = options.xhr ? options.xhr() : $.ajaxSettings.xhr();
            // Accesss to the native XHR object is required to add event listeners
            // for the upload progress event:
            if (xhr.upload) {
                $(xhr.upload).bind('progress', function (e) {
                    var oe = e.originalEvent;
                    // Make sure the progress event properties get copied over:
                    e.lengthComputable = oe.lengthComputable;
                    e.loaded = oe.loaded;
                    e.total = oe.total;
                    that._onProgress(e, options);
                });
                options.xhr = function () {
                    return xhr;
                };
            }
        },

        _isInstanceOf: function (type, obj) {
            // Cross-frame instanceof check
            return Object.prototype.toString.call(obj) === '[object ' + type + ']';
        },

        _initXHRData: function (options) {
            var that = this,
                formData,
                file = options.files[0],
                // Ignore non-multipart setting if not supported:
                multipart = options.multipart || !$.support.xhrFileUpload,
                paramName = $.type(options.paramName) === 'array' ?
                    options.paramName[0] : options.paramName;
            options.headers = $.extend({}, options.headers);
            if (options.contentRange) {
                options.headers['Content-Range'] = options.contentRange;
            }
            if (!multipart || options.blob || !this._isInstanceOf('File', file)) {
                options.headers['Content-Disposition'] = 'attachment; filename="' +
                    encodeURI(file.name) + '"';
            }
            if (!multipart) {
                options.contentType = file.type || 'application/octet-stream';
                options.data = options.blob || file;
            } else if ($.support.xhrFormDataFileUpload) {
                if (options.postMessage) {
                    // window.postMessage does not allow sending FormData
                    // objects, so we just add the File/Blob objects to
                    // the formData array and let the postMessage window
                    // create the FormData object out of this array:
                    formData = this._getFormData(options);
                    if (options.blob) {
                        formData.push({
                            name: paramName,
                            value: options.blob
                        });
                    } else {
                        $.each(options.files, function (index, file) {
                            formData.push({
                                name: ($.type(options.paramName) === 'array' &&
                                    options.paramName[index]) || paramName,
                                value: file
                            });
                        });
                    }
                } else {
                    if (that._isInstanceOf('FormData', options.formData)) {
                        formData = options.formData;
                    } else {
                        formData = new FormData();
                        $.each(this._getFormData(options), function (index, field) {
                            formData.append(field.name, field.value);
                        });
                    }
                    if (options.blob) {
                        formData.append(paramName, options.blob, file.name);
                    } else {
                        $.each(options.files, function (index, file) {
                            // This check allows the tests to run with
                            // dummy objects:
                            if (that._isInstanceOf('File', file) ||
                                    that._isInstanceOf('Blob', file)) {
                                formData.append(
                                    ($.type(options.paramName) === 'array' &&
                                        options.paramName[index]) || paramName,
                                    file,
                                    file.uploadName || file.name
                                );
                            }
                        });
                    }
                }
                options.data = formData;
            }
            // Blob reference is not needed anymore, free memory:
            options.blob = null;
        },

        _initIframeSettings: function (options) {
            var targetHost = $('<a></a>').prop('href', options.url).prop('host');
            // Setting the dataType to iframe enables the iframe transport:
            options.dataType = 'iframe ' + (options.dataType || '');
            // The iframe transport accepts a serialized array as form data:
            options.formData = this._getFormData(options);
            // Add redirect url to form data on cross-domain uploads:
            if (options.redirect && targetHost && targetHost !== location.host) {
                options.formData.push({
                    name: options.redirectParamName || 'redirect',
                    value: options.redirect
                });
            }
        },

        _initDataSettings: function (options) {
            if (this._isXHRUpload(options)) {
                if (!this._chunkedUpload(options, true)) {
                    if (!options.data) {
                        this._initXHRData(options);
                    }
                    this._initProgressListener(options);
                }
                if (options.postMessage) {
                    // Setting the dataType to postmessage enables the
                    // postMessage transport:
                    options.dataType = 'postmessage ' + (options.dataType || '');
                }
            } else {
                this._initIframeSettings(options);
            }
        },

        _getParamName: function (options) {
            var fileInput = $(options.fileInput),
                paramName = options.paramName;
            if (!paramName) {
                paramName = [];
                fileInput.each(function () {
                    var input = $(this),
                        name = input.prop('name') || 'files[]',
                        i = (input.prop('files') || [1]).length;
                    while (i) {
                        paramName.push(name);
                        i -= 1;
                    }
                });
                if (!paramName.length) {
                    paramName = [fileInput.prop('name') || 'files[]'];
                }
            } else if (!$.isArray(paramName)) {
                paramName = [paramName];
            }
            return paramName;
        },

        _initFormSettings: function (options) {
            // Retrieve missing options from the input field and the
            // associated form, if available:
            if (!options.form || !options.form.length) {
                options.form = $(options.fileInput.prop('form'));
                // If the given file input doesn't have an associated form,
                // use the default widget file input's form:
                if (!options.form.length) {
                    options.form = $(this.options.fileInput.prop('form'));
                }
            }
            options.paramName = this._getParamName(options);
            if (!options.url) {
                options.url = options.form.prop('action') || location.href;
            }
            // The HTTP request method must be "POST" or "PUT":
            options.type = (options.type ||
                ($.type(options.form.prop('method')) === 'string' &&
                    options.form.prop('method')) || ''
                ).toUpperCase();
            if (options.type !== 'POST' && options.type !== 'PUT' &&
                    options.type !== 'PATCH') {
                options.type = 'POST';
            }
            if (!options.formAcceptCharset) {
                options.formAcceptCharset = options.form.attr('accept-charset');
            }
        },

        _getAJAXSettings: function (data) {
            var options = $.extend({}, this.options, data);
            this._initFormSettings(options);
            this._initDataSettings(options);
            return options;
        },

        // jQuery 1.6 doesn't provide .state(),
        // while jQuery 1.8+ removed .isRejected() and .isResolved():
        _getDeferredState: function (deferred) {
            if (deferred.state) {
                return deferred.state();
            }
            if (deferred.isResolved()) {
                return 'resolved';
            }
            if (deferred.isRejected()) {
                return 'rejected';
            }
            return 'pending';
        },

        // Maps jqXHR callbacks to the equivalent
        // methods of the given Promise object:
        _enhancePromise: function (promise) {
            promise.success = promise.done;
            promise.error = promise.fail;
            promise.complete = promise.always;
            return promise;
        },

        // Creates and returns a Promise object enhanced with
        // the jqXHR methods abort, success, error and complete:
        _getXHRPromise: function (resolveOrReject, context, args) {
            var dfd = $.Deferred(),
                promise = dfd.promise();
            context = context || this.options.context || promise;
            if (resolveOrReject === true) {
                dfd.resolveWith(context, args);
            } else if (resolveOrReject === false) {
                dfd.rejectWith(context, args);
            }
            promise.abort = dfd.promise;
            return this._enhancePromise(promise);
        },

        // Adds convenience methods to the data callback argument:
        _addConvenienceMethods: function (e, data) {
            var that = this,
                getPromise = function (args) {
                    return $.Deferred().resolveWith(that, args).promise();
                };
            data.process = function (resolveFunc, rejectFunc) {
                if (resolveFunc || rejectFunc) {
                    data._processQueue = this._processQueue =
                        (this._processQueue || getPromise([this])).then(
                            function () {
                                if (data.errorThrown) {
                                    return $.Deferred()
                                        .rejectWith(that, [data]).promise();
                                }
                                return getPromise(arguments);
                            }
                        ).then(resolveFunc, rejectFunc);
                }
                return this._processQueue || getPromise([this]);
            };
            data.submit = function () {
                if (this.state() !== 'pending') {
                    data.jqXHR = this.jqXHR =
                        (that._trigger(
                            'submit',
                            $.Event('submit', {delegatedEvent: e}),
                            this
                        ) !== false) && that._onSend(e, this);
                }
                return this.jqXHR || that._getXHRPromise();
            };
            data.abort = function () {
                if (this.jqXHR) {
                    return this.jqXHR.abort();
                }
                this.errorThrown = 'abort';
                that._trigger('fail', null, this);
                return that._getXHRPromise(false);
            };
            data.state = function () {
                if (this.jqXHR) {
                    return that._getDeferredState(this.jqXHR);
                }
                if (this._processQueue) {
                    return that._getDeferredState(this._processQueue);
                }
            };
            data.processing = function () {
                return !this.jqXHR && this._processQueue && that
                    ._getDeferredState(this._processQueue) === 'pending';
            };
            data.progress = function () {
                return this._progress;
            };
            data.response = function () {
                return this._response;
            };
        },

        // Parses the Range header from the server response
        // and returns the uploaded bytes:
        _getUploadedBytes: function (jqXHR) {
            var range = jqXHR.getResponseHeader('Range'),
                parts = range && range.split('-'),
                upperBytesPos = parts && parts.length > 1 &&
                    parseInt(parts[1], 10);
            return upperBytesPos && upperBytesPos + 1;
        },

        // Uploads a file in multiple, sequential requests
        // by splitting the file up in multiple blob chunks.
        // If the second parameter is true, only tests if the file
        // should be uploaded in chunks, but does not invoke any
        // upload requests:
        _chunkedUpload: function (options, testOnly) {
            options.uploadedBytes = options.uploadedBytes || 0;
            var that = this,
                file = options.files[0],
                fs = file.size,
                ub = options.uploadedBytes,
                mcs = options.maxChunkSize || fs,
                slice = this._blobSlice,
                dfd = $.Deferred(),
                promise = dfd.promise(),
                jqXHR,
                upload;
            if (!(this._isXHRUpload(options) && slice && (ub || ($.type(mcs) === 'function' ? mcs(options) : mcs) < fs)) ||
                    options.data) {
                return false;
            }
            if (testOnly) {
                return true;
            }
            if (ub >= fs) {
                file.error = options.i18n('uploadedBytes');
                return this._getXHRPromise(
                    false,
                    options.context,
                    [null, 'error', file.error]
                );
            }
            // The chunk upload method:
            upload = function () {
                // Clone the options object for each chunk upload:
                var o = $.extend({}, options),
                    currentLoaded = o._progress.loaded;
                o.blob = slice.call(
                    file,
                    ub,
                    ub + ($.type(mcs) === 'function' ? mcs(o) : mcs),
                    file.type
                );
                // Store the current chunk size, as the blob itself
                // will be dereferenced after data processing:
                o.chunkSize = o.blob.size;
                // Expose the chunk bytes position range:
                o.contentRange = 'bytes ' + ub + '-' +
                    (ub + o.chunkSize - 1) + '/' + fs;
                // Process the upload data (the blob and potential form data):
                that._initXHRData(o);
                // Add progress listeners for this chunk upload:
                that._initProgressListener(o);
                jqXHR = ((that._trigger('chunksend', null, o) !== false && $.ajax(o)) ||
                        that._getXHRPromise(false, o.context))
                    .done(function (result, textStatus, jqXHR) {
                        ub = that._getUploadedBytes(jqXHR) ||
                            (ub + o.chunkSize);
                        // Create a progress event if no final progress event
                        // with loaded equaling total has been triggered
                        // for this chunk:
                        if (currentLoaded + o.chunkSize - o._progress.loaded) {
                            that._onProgress($.Event('progress', {
                                lengthComputable: true,
                                loaded: ub - o.uploadedBytes,
                                total: ub - o.uploadedBytes
                            }), o);
                        }
                        options.uploadedBytes = o.uploadedBytes = ub;
                        o.result = result;
                        o.textStatus = textStatus;
                        o.jqXHR = jqXHR;
                        that._trigger('chunkdone', null, o);
                        that._trigger('chunkalways', null, o);
                        if (ub < fs) {
                            // File upload not yet complete,
                            // continue with the next chunk:
                            upload();
                        } else {
                            dfd.resolveWith(
                                o.context,
                                [result, textStatus, jqXHR]
                            );
                        }
                    })
                    .fail(function (jqXHR, textStatus, errorThrown) {
                        o.jqXHR = jqXHR;
                        o.textStatus = textStatus;
                        o.errorThrown = errorThrown;
                        that._trigger('chunkfail', null, o);
                        that._trigger('chunkalways', null, o);
                        dfd.rejectWith(
                            o.context,
                            [jqXHR, textStatus, errorThrown]
                        );
                    });
            };
            this._enhancePromise(promise);
            promise.abort = function () {
                return jqXHR.abort();
            };
            upload();
            return promise;
        },

        _beforeSend: function (e, data) {
            if (this._active === 0) {
                // the start callback is triggered when an upload starts
                // and no other uploads are currently running,
                // equivalent to the global ajaxStart event:
                this._trigger('start');
                // Set timer for global bitrate progress calculation:
                this._bitrateTimer = new this._BitrateTimer();
                // Reset the global progress values:
                this._progress.loaded = this._progress.total = 0;
                this._progress.bitrate = 0;
            }
            // Make sure the container objects for the .response() and
            // .progress() methods on the data object are available
            // and reset to their initial state:
            this._initResponseObject(data);
            this._initProgressObject(data);
            data._progress.loaded = data.loaded = data.uploadedBytes || 0;
            data._progress.total = data.total = this._getTotal(data.files) || 1;
            data._progress.bitrate = data.bitrate = 0;
            this._active += 1;
            // Initialize the global progress values:
            this._progress.loaded += data.loaded;
            this._progress.total += data.total;
        },

        _onDone: function (result, textStatus, jqXHR, options) {
            var total = options._progress.total,
                response = options._response;
            if (options._progress.loaded < total) {
                // Create a progress event if no final progress event
                // with loaded equaling total has been triggered:
                this._onProgress($.Event('progress', {
                    lengthComputable: true,
                    loaded: total,
                    total: total
                }), options);
            }
            response.result = options.result = result;
            response.textStatus = options.textStatus = textStatus;
            response.jqXHR = options.jqXHR = jqXHR;
            this._trigger('done', null, options);
        },

        _onFail: function (jqXHR, textStatus, errorThrown, options) {
            var response = options._response;
            if (options.recalculateProgress) {
                // Remove the failed (error or abort) file upload from
                // the global progress calculation:
                this._progress.loaded -= options._progress.loaded;
                this._progress.total -= options._progress.total;
            }
            response.jqXHR = options.jqXHR = jqXHR;
            response.textStatus = options.textStatus = textStatus;
            response.errorThrown = options.errorThrown = errorThrown;
            this._trigger('fail', null, options);
        },

        _onAlways: function (jqXHRorResult, textStatus, jqXHRorError, options) {
            // jqXHRorResult, textStatus and jqXHRorError are added to the
            // options object via done and fail callbacks
            this._trigger('always', null, options);
        },

        _onSend: function (e, data) {
            if (!data.submit) {
                this._addConvenienceMethods(e, data);
            }
            var that = this,
                jqXHR,
                aborted,
                slot,
                pipe,
                options = that._getAJAXSettings(data),
                send = function () {
                    that._sending += 1;
                    // Set timer for bitrate progress calculation:
                    options._bitrateTimer = new that._BitrateTimer();
                    jqXHR = jqXHR || (
                        ((aborted || that._trigger(
                            'send',
                            $.Event('send', {delegatedEvent: e}),
                            options
                        ) === false) &&
                        that._getXHRPromise(false, options.context, aborted)) ||
                        that._chunkedUpload(options) || $.ajax(options)
                    ).done(function (result, textStatus, jqXHR) {
                        that._onDone(result, textStatus, jqXHR, options);
                    }).fail(function (jqXHR, textStatus, errorThrown) {
                        that._onFail(jqXHR, textStatus, errorThrown, options);
                    }).always(function (jqXHRorResult, textStatus, jqXHRorError) {
                        that._onAlways(
                            jqXHRorResult,
                            textStatus,
                            jqXHRorError,
                            options
                        );
                        that._sending -= 1;
                        that._active -= 1;
                        if (options.limitConcurrentUploads &&
                                options.limitConcurrentUploads > that._sending) {
                            // Start the next queued upload,
                            // that has not been aborted:
                            var nextSlot = that._slots.shift();
                            while (nextSlot) {
                                if (that._getDeferredState(nextSlot) === 'pending') {
                                    nextSlot.resolve();
                                    break;
                                }
                                nextSlot = that._slots.shift();
                            }
                        }
                        if (that._active === 0) {
                            // The stop callback is triggered when all uploads have
                            // been completed, equivalent to the global ajaxStop event:
                            that._trigger('stop');
                        }
                    });
                    return jqXHR;
                };
            this._beforeSend(e, options);
            if (this.options.sequentialUploads ||
                    (this.options.limitConcurrentUploads &&
                    this.options.limitConcurrentUploads <= this._sending)) {
                if (this.options.limitConcurrentUploads > 1) {
                    slot = $.Deferred();
                    this._slots.push(slot);
                    pipe = slot.then(send);
                } else {
                    this._sequence = this._sequence.then(send, send);
                    pipe = this._sequence;
                }
                // Return the piped Promise object, enhanced with an abort method,
                // which is delegated to the jqXHR object of the current upload,
                // and jqXHR callbacks mapped to the equivalent Promise methods:
                pipe.abort = function () {
                    aborted = [undefined, 'abort', 'abort'];
                    if (!jqXHR) {
                        if (slot) {
                            slot.rejectWith(options.context, aborted);
                        }
                        return send();
                    }
                    return jqXHR.abort();
                };
                return this._enhancePromise(pipe);
            }
            return send();
        },

        _onAdd: function (e, data) {
            var that = this,
                result = true,
                options = $.extend({}, this.options, data),
                files = data.files,
                filesLength = files.length,
                limit = options.limitMultiFileUploads,
                limitSize = options.limitMultiFileUploadSize,
                overhead = options.limitMultiFileUploadSizeOverhead,
                batchSize = 0,
                paramName = this._getParamName(options),
                paramNameSet,
                paramNameSlice,
                fileSet,
                i,
                j = 0;
            if (!filesLength) {
                return false;
            }
            if (limitSize && files[0].size === undefined) {
                limitSize = undefined;
            }
            if (!(options.singleFileUploads || limit || limitSize) ||
                    !this._isXHRUpload(options)) {
                fileSet = [files];
                paramNameSet = [paramName];
            } else if (!(options.singleFileUploads || limitSize) && limit) {
                fileSet = [];
                paramNameSet = [];
                for (i = 0; i < filesLength; i += limit) {
                    fileSet.push(files.slice(i, i + limit));
                    paramNameSlice = paramName.slice(i, i + limit);
                    if (!paramNameSlice.length) {
                        paramNameSlice = paramName;
                    }
                    paramNameSet.push(paramNameSlice);
                }
            } else if (!options.singleFileUploads && limitSize) {
                fileSet = [];
                paramNameSet = [];
                for (i = 0; i < filesLength; i = i + 1) {
                    batchSize += files[i].size + overhead;
                    if (i + 1 === filesLength ||
                            ((batchSize + files[i + 1].size + overhead) > limitSize) ||
                            (limit && i + 1 - j >= limit)) {
                        fileSet.push(files.slice(j, i + 1));
                        paramNameSlice = paramName.slice(j, i + 1);
                        if (!paramNameSlice.length) {
                            paramNameSlice = paramName;
                        }
                        paramNameSet.push(paramNameSlice);
                        j = i + 1;
                        batchSize = 0;
                    }
                }
            } else {
                paramNameSet = paramName;
            }
            data.originalFiles = files;
            $.each(fileSet || files, function (index, element) {
                var newData = $.extend({}, data);
                newData.files = fileSet ? element : [element];
                newData.paramName = paramNameSet[index];
                that._initResponseObject(newData);
                that._initProgressObject(newData);
                that._addConvenienceMethods(e, newData);
                result = that._trigger(
                    'add',
                    $.Event('add', {delegatedEvent: e}),
                    newData
                );
                return result;
            });
            return result;
        },

        _replaceFileInput: function (data) {
            var input = data.fileInput,
                inputClone = input.clone(true),
                restoreFocus = input.is(document.activeElement);
            // Add a reference for the new cloned file input to the data argument:
            data.fileInputClone = inputClone;
            $('<form></form>').append(inputClone)[0].reset();
            // Detaching allows to insert the fileInput on another form
            // without loosing the file input value:
            input.after(inputClone).detach();
            // If the fileInput had focus before it was detached,
            // restore focus to the inputClone.
            if (restoreFocus) {
                inputClone.focus();
            }
            // Avoid memory leaks with the detached file input:
            $.cleanData(input.unbind('remove'));
            // Replace the original file input element in the fileInput
            // elements set with the clone, which has been copied including
            // event handlers:
            this.options.fileInput = this.options.fileInput.map(function (i, el) {
                if (el === input[0]) {
                    return inputClone[0];
                }
                return el;
            });
            // If the widget has been initialized on the file input itself,
            // override this.element with the file input clone:
            if (input[0] === this.element[0]) {
                this.element = inputClone;
            }
        },

        _handleFileTreeEntry: function (entry, path) {
            var that = this,
                dfd = $.Deferred(),
                entries = [],
                dirReader,
                errorHandler = function (e) {
                    if (e && !e.entry) {
                        e.entry = entry;
                    }
                    // Since $.when returns immediately if one
                    // Deferred is rejected, we use resolve instead.
                    // This allows valid files and invalid items
                    // to be returned together in one set:
                    dfd.resolve([e]);
                },
                successHandler = function (entries) {
                    that._handleFileTreeEntries(
                        entries,
                        path + entry.name + '/'
                    ).done(function (files) {
                        dfd.resolve(files);
                    }).fail(errorHandler);
                },
                readEntries = function () {
                    dirReader.readEntries(function (results) {
                        if (!results.length) {
                            successHandler(entries);
                        } else {
                            entries = entries.concat(results);
                            readEntries();
                        }
                    }, errorHandler);
                };
            path = path || '';
            if (entry.isFile) {
                if (entry._file) {
                    // Workaround for Chrome bug #149735
                    entry._file.relativePath = path;
                    dfd.resolve(entry._file);
                } else {
                    entry.file(function (file) {
                        file.relativePath = path;
                        dfd.resolve(file);
                    }, errorHandler);
                }
            } else if (entry.isDirectory) {
                dirReader = entry.createReader();
                readEntries();
            } else {
                // Return an empy list for file system items
                // other than files or directories:
                dfd.resolve([]);
            }
            return dfd.promise();
        },

        _handleFileTreeEntries: function (entries, path) {
            var that = this;
            return $.when.apply(
                $,
                $.map(entries, function (entry) {
                    return that._handleFileTreeEntry(entry, path);
                })
            ).then(function () {
                return Array.prototype.concat.apply(
                    [],
                    arguments
                );
            });
        },

        _getDroppedFiles: function (dataTransfer) {
            dataTransfer = dataTransfer || {};
            var items = dataTransfer.items;
            if (items && items.length && (items[0].webkitGetAsEntry ||
                    items[0].getAsEntry)) {
                return this._handleFileTreeEntries(
                    $.map(items, function (item) {
                        var entry;
                        if (item.webkitGetAsEntry) {
                            entry = item.webkitGetAsEntry();
                            if (entry) {
                                // Workaround for Chrome bug #149735:
                                entry._file = item.getAsFile();
                            }
                            return entry;
                        }
                        return item.getAsEntry();
                    })
                );
            }
            return $.Deferred().resolve(
                $.makeArray(dataTransfer.files)
            ).promise();
        },

        _getSingleFileInputFiles: function (fileInput) {
            fileInput = $(fileInput);
            var entries = fileInput.prop('webkitEntries') ||
                    fileInput.prop('entries'),
                files,
                value;
            if (entries && entries.length) {
                return this._handleFileTreeEntries(entries);
            }
            files = $.makeArray(fileInput.prop('files'));
            if (!files.length) {
                value = fileInput.prop('value');
                if (!value) {
                    return $.Deferred().resolve([]).promise();
                }
                // If the files property is not available, the browser does not
                // support the File API and we add a pseudo File object with
                // the input value as name with path information removed:
                files = [{name: value.replace(/^.*\\/, '')}];
            } else if (files[0].name === undefined && files[0].fileName) {
                // File normalization for Safari 4 and Firefox 3:
                $.each(files, function (index, file) {
                    file.name = file.fileName;
                    file.size = file.fileSize;
                });
            }
            return $.Deferred().resolve(files).promise();
        },

        _getFileInputFiles: function (fileInput) {
            if (!(fileInput instanceof $) || fileInput.length === 1) {
                return this._getSingleFileInputFiles(fileInput);
            }
            return $.when.apply(
                $,
                $.map(fileInput, this._getSingleFileInputFiles)
            ).then(function () {
                return Array.prototype.concat.apply(
                    [],
                    arguments
                );
            });
        },

        _onChange: function (e) {
            var that = this,
                data = {
                    fileInput: $(e.target),
                    form: $(e.target.form)
                };
            this._getFileInputFiles(data.fileInput).always(function (files) {
                data.files = files;
                if (that.options.replaceFileInput) {
                    that._replaceFileInput(data);
                }
                if (that._trigger(
                        'change',
                        $.Event('change', {delegatedEvent: e}),
                        data
                    ) !== false) {
                    that._onAdd(e, data);
                }
            });
        },

        _onPaste: function (e) {
            var items = e.originalEvent && e.originalEvent.clipboardData &&
                    e.originalEvent.clipboardData.items,
                data = {files: []};
            if (items && items.length) {
                $.each(items, function (index, item) {
                    var file = item.getAsFile && item.getAsFile();
                    if (file) {
                        data.files.push(file);
                    }
                });
                if (this._trigger(
                        'paste',
                        $.Event('paste', {delegatedEvent: e}),
                        data
                    ) !== false) {
                    this._onAdd(e, data);
                }
            }
        },

        _onDrop: function (e) {
            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;
            var that = this,
                dataTransfer = e.dataTransfer,
                data = {};
            if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {
                e.preventDefault();
                this._getDroppedFiles(dataTransfer).always(function (files) {
                    data.files = files;
                    if (that._trigger(
                            'drop',
                            $.Event('drop', {delegatedEvent: e}),
                            data
                        ) !== false) {
                        that._onAdd(e, data);
                    }
                });
            }
        },

        _onDragOver: getDragHandler('dragover'),

        _onDragEnter: getDragHandler('dragenter'),

        _onDragLeave: getDragHandler('dragleave'),

        _initEventHandlers: function () {
            if (this._isXHRUpload(this.options)) {
                this._on(this.options.dropZone, {
                    dragover: this._onDragOver,
                    drop: this._onDrop,
                    // event.preventDefault() on dragenter is required for IE10+:
                    dragenter: this._onDragEnter,
                    // dragleave is not required, but added for completeness:
                    dragleave: this._onDragLeave
                });
                this._on(this.options.pasteZone, {
                    paste: this._onPaste
                });
            }
            if ($.support.fileInput) {
                this._on(this.options.fileInput, {
                    change: this._onChange
                });
            }
        },

        _destroyEventHandlers: function () {
            this._off(this.options.dropZone, 'dragenter dragleave dragover drop');
            this._off(this.options.pasteZone, 'paste');
            this._off(this.options.fileInput, 'change');
        },

        _destroy: function () {
            this._destroyEventHandlers();
        },

        _setOption: function (key, value) {
            var reinit = $.inArray(key, this._specialOptions) !== -1;
            if (reinit) {
                this._destroyEventHandlers();
            }
            this._super(key, value);
            if (reinit) {
                this._initSpecialOptions();
                this._initEventHandlers();
            }
        },

        _initSpecialOptions: function () {
            var options = this.options;
            if (options.fileInput === undefined) {
                options.fileInput = this.element.is('input[type="file"]') ?
                        this.element : this.element.find('input[type="file"]');
            } else if (!(options.fileInput instanceof $)) {
                options.fileInput = $(options.fileInput);
            }
            if (!(options.dropZone instanceof $)) {
                options.dropZone = $(options.dropZone);
            }
            if (!(options.pasteZone instanceof $)) {
                options.pasteZone = $(options.pasteZone);
            }
        },

        _getRegExp: function (str) {
            var parts = str.split('/'),
                modifiers = parts.pop();
            parts.shift();
            return new RegExp(parts.join('/'), modifiers);
        },

        _isRegExpOption: function (key, value) {
            return key !== 'url' && $.type(value) === 'string' &&
                /^\/.*\/[igm]{0,3}$/.test(value);
        },

        _initDataAttributes: function () {
            var that = this,
                options = this.options,
                data = this.element.data();
            // Initialize options set via HTML5 data-attributes:
            $.each(
                this.element[0].attributes,
                function (index, attr) {
                    var key = attr.name.toLowerCase(),
                        value;
                    if (/^data-/.test(key)) {
                        // Convert hyphen-ated key to camelCase:
                        key = key.slice(5).replace(/-[a-z]/g, function (str) {
                            return str.charAt(1).toUpperCase();
                        });
                        value = data[key];
                        if (that._isRegExpOption(key, value)) {
                            value = that._getRegExp(value);
                        }
                        options[key] = value;
                    }
                }
            );
        },

        _create: function () {
            this._initDataAttributes();
            this._initSpecialOptions();
            this._slots = [];
            this._sequence = this._getXHRPromise(true);
            this._sending = this._active = 0;
            this._initProgressObject(this);
            this._initEventHandlers();
        },

        // This method is exposed to the widget API and allows to query
        // the number of active uploads:
        active: function () {
            return this._active;
        },

        // This method is exposed to the widget API and allows to query
        // the widget upload progress.
        // It returns an object with loaded, total and bitrate properties
        // for the running uploads:
        progress: function () {
            return this._progress;
        },

        // This method is exposed to the widget API and allows adding files
        // using the fileupload API. The data parameter accepts an object which
        // must have a files property and can contain additional options:
        // .fileupload('add', {files: filesList});
        add: function (data) {
            var that = this;
            if (!data || this.options.disabled) {
                return;
            }
            if (data.fileInput && !data.files) {
                this._getFileInputFiles(data.fileInput).always(function (files) {
                    data.files = files;
                    that._onAdd(null, data);
                });
            } else {
                data.files = $.makeArray(data.files);
                this._onAdd(null, data);
            }
        },

        // This method is exposed to the widget API and allows sending files
        // using the fileupload API. The data parameter accepts an object which
        // must have a files or fileInput property and can contain additional options:
        // .fileupload('send', {files: filesList});
        // The method returns a Promise object for the file upload call.
        send: function (data) {
            if (data && !this.options.disabled) {
                if (data.fileInput && !data.files) {
                    var that = this,
                        dfd = $.Deferred(),
                        promise = dfd.promise(),
                        jqXHR,
                        aborted;
                    promise.abort = function () {
                        aborted = true;
                        if (jqXHR) {
                            return jqXHR.abort();
                        }
                        dfd.reject(null, 'abort', 'abort');
                        return promise;
                    };
                    this._getFileInputFiles(data.fileInput).always(
                        function (files) {
                            if (aborted) {
                                return;
                            }
                            if (!files.length) {
                                dfd.reject();
                                return;
                            }
                            data.files = files;
                            jqXHR = that._onSend(null, data);
                            jqXHR.then(
                                function (result, textStatus, jqXHR) {
                                    dfd.resolve(result, textStatus, jqXHR);
                                },
                                function (jqXHR, textStatus, errorThrown) {
                                    dfd.reject(jqXHR, textStatus, errorThrown);
                                }
                            );
                        }
                    );
                    return this._enhancePromise(promise);
                }
                data.files = $.makeArray(data.files);
                if (data.files.length) {
                    return this._onSend(null, data);
                }
            }
            return this._getXHRPromise(false, data && data.context);
        }

    });

}));

/**
 * Cloudinary's JavaScript library - Version 2.5.0
 * Copyright Cloudinary
 * see https://github.com/cloudinary/cloudinary_js
 *
 */

var slice = [].slice,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

(function(root, factory) {
  var name, ref, results, value;
  if ((typeof define === 'function') && define.amd) {
    return define(['jquery'], factory);
  } else if (typeof exports === 'object') {
    return module.exports = factory(require('jquery'));
  } else {
    root.cloudinary || (root.cloudinary = {});
    ref = factory(jQuery);
    results = [];
    for (name in ref) {
      value = ref[name];
      results.push(root.cloudinary[name] = value);
    }
    return results;
  }
})(this, function(jQuery) {

  /*
   * Includes common utility methods and shims
   */

  /**
   * Return true if all items in list are strings
   * @function Util.allString
   * @param {Array} list - an array of items
   */
  var ArrayParam, BaseUtil, ClientHintsMetaTag, Cloudinary, CloudinaryJQuery, Condition, Configuration, Expression, ExpressionParam, FetchLayer, HtmlTag, ImageTag, Layer, LayerParam, Param, RangeParam, RawParam, SubtitlesLayer, TextLayer, Transformation, TransformationBase, TransformationParam, Util, VideoTag, addClass, allStrings, base64Encode, base64EncodeURL, camelCase, cloneDeep, cloudinary, compact, contains, convertKeys, crc32, defaults, difference, funcTag, functions, getAttribute, getData, hasClass, identity, isEmpty, isFunction, isNumberLike, isObject, isString, m, merge, objToString, objectProto, parameters, reWords, removeAttribute, setAttribute, setAttributes, setData, smartEscape, snakeCase, utf8_encode, webp, width, withCamelCaseKeys, withSnakeCaseKeys, without;
  allStrings = function(list) {
    var item, j, len;
    for (j = 0, len = list.length; j < len; j++) {
      item = list[j];
      if (!Util.isString(item)) {
        return false;
      }
    }
    return true;
  };

  /**
  * Creates a new array without the given item.
  * @function Util.without
  * @param {Array} array - original array
  * @param {*} item - the item to exclude from the new array
  * @return {Array} a new array made of the original array's items except for `item`
   */
  without = function(array, item) {
    var i, length, newArray;
    newArray = [];
    i = -1;
    length = array.length;
    while (++i < length) {
      if (array[i] !== item) {
        newArray.push(array[i]);
      }
    }
    return newArray;
  };

  /**
  * Return true is value is a number or a string representation of a number.
  * @function Util.isNumberLike
  * @param {*} value
  * @returns {boolean} true if value is a number
  * @example
  *    Util.isNumber(0) // true
  *    Util.isNumber("1.3") // true
  *    Util.isNumber("") // false
  *    Util.isNumber(undefined) // false
   */
  isNumberLike = function(value) {
    return (value != null) && !isNaN(parseFloat(value));
  };

  /**
   * Escape all characters matching unsafe in the given string
   * @function Util.smartEscape
   * @param {string} string - source string to escape
   * @param {RegExp} unsafe - characters that must be escaped
   * @return {string} escaped string
   */
  smartEscape = function(string, unsafe) {
    if (unsafe == null) {
      unsafe = /([^a-zA-Z0-9_.\-\/:]+)/g;
    }
    return string.replace(unsafe, function(match) {
      return match.split("").map(function(c) {
        return "%" + c.charCodeAt(0).toString(16).toUpperCase();
      }).join("");
    });
  };

  /**
   * Assign values from sources if they are not defined in the destination.
   * Once a value is set it does not change
   * @function Util.defaults
   * @param {Object} destination - the object to assign defaults to
   * @param {...Object} source - the source object(s) to assign defaults from
   * @return {Object} destination after it was modified
   */
  defaults = function() {
    var destination, sources;
    destination = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];
    return sources.reduce(function(dest, source) {
      var key, value;
      for (key in source) {
        value = source[key];
        if (dest[key] === void 0) {
          dest[key] = value;
        }
      }
      return dest;
    }, destination);
  };

  /*********** lodash functions */
  objectProto = Object.prototype;

  /**
   * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
   * of values.
   */
  objToString = objectProto.toString;

  /**
   * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
   * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
   *
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is an object, else `false`.
   * @example
   *
  #isObject({});
   * // => true
   *
  #isObject([1, 2, 3]);
   * // => true
   *
  #isObject(1);
   * // => false
   */
  isObject = function(value) {
    var type;
    type = typeof value;
    return !!value && (type === 'object' || type === 'function');
  };
  funcTag = '[object Function]';

  /**
  * Checks if `value` is classified as a `Function` object.
  * @function Util.isFunction
  * @param {*} value The value to check.
  * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
  * @example
  *
  * function Foo(){};  
  * isFunction(Foo);
  * // => true
  *
  * isFunction(/abc/);
  * // => false
   */
  isFunction = function(value) {
    return isObject(value) && objToString.call(value) === funcTag;
  };

  /*********** lodash functions */

  /** Used to match words to create compound words. */
  reWords = (function() {
    var lower, upper;
    upper = '[A-Z]';
    lower = '[a-z]+';
    return RegExp(upper + '+(?=' + upper + lower + ')|' + upper + '?' + lower + '|' + upper + '+|[0-9]+', 'g');
  })();

  /**
  * Convert string to camelCase
  * @function Util.camelCase
  * @param {string} string - the string to convert
  * @return {string} in camelCase format
   */
  camelCase = function(source) {
    var i, word, words;
    words = source.match(reWords);
    words = (function() {
      var j, len, results;
      results = [];
      for (i = j = 0, len = words.length; j < len; i = ++j) {
        word = words[i];
        word = word.toLocaleLowerCase();
        if (i) {
          results.push(word.charAt(0).toLocaleUpperCase() + word.slice(1));
        } else {
          results.push(word);
        }
      }
      return results;
    })();
    return words.join('');
  };

  /**
   * Convert string to snake_case
   * @function Util.snakeCase
   * @param {string} string - the string to convert
   * @return {string} in snake_case format
   */
  snakeCase = function(source) {
    var i, word, words;
    words = source.match(reWords);
    words = (function() {
      var j, len, results;
      results = [];
      for (i = j = 0, len = words.length; j < len; i = ++j) {
        word = words[i];
        results.push(word.toLocaleLowerCase());
      }
      return results;
    })();
    return words.join('_');
  };
  convertKeys = function(source, converter) {
    var key, result, value;
    if (converter == null) {
      converter = Util.identity;
    }
    result = {};
    for (key in source) {
      value = source[key];
      key = converter(key);
      if (!Util.isEmpty(key)) {
        result[key] = value;
      }
    }
    return result;
  };

  /**
   * Create a copy of the source object with all keys in camelCase
   * @function Util.withCamelCaseKeys
   * @param {Object} value - the object to copy
   * @return {Object} a new object
   */
  withCamelCaseKeys = function(source) {
    return convertKeys(source, Util.camelCase);
  };

  /**
   * Create a copy of the source object with all keys in snake_case
   * @function Util.withSnakeCaseKeys
   * @param {Object} value - the object to copy
   * @return {Object} a new object
   */
  withSnakeCaseKeys = function(source) {
    return convertKeys(source, Util.snakeCase);
  };
  base64Encode = typeof btoa !== 'undefined' && isFunction(btoa) ? btoa : typeof Buffer !== 'undefined' && isFunction(Buffer) ? function(input) {
    if (!(input instanceof Buffer)) {
      input = new Buffer.from(String(input), 'binary');
    }
    return input.toString('base64');
  } : function(input) {
    throw new Error("No base64 encoding function found");
  };

  /**
  * Returns the Base64-decoded version of url.<br>
  * This method delegates to `btoa` if present. Otherwise it tries `Buffer`.
  * @function Util.base64EncodeURL
  * @param {string} url - the url to encode. the value is URIdecoded and then re-encoded before converting to base64 representation
  * @return {string} the base64 representation of the URL
   */
  base64EncodeURL = function(input) {
    var error1, ignore;
    try {
      input = decodeURI(input);
    } catch (error1) {
      ignore = error1;
    }
    input = encodeURI(input);
    return base64Encode(input);
  };
  BaseUtil = {
    allStrings: allStrings,
    camelCase: camelCase,
    convertKeys: convertKeys,
    defaults: defaults,
    snakeCase: snakeCase,
    without: without,
    isFunction: isFunction,
    isNumberLike: isNumberLike,
    smartEscape: smartEscape,
    withCamelCaseKeys: withCamelCaseKeys,
    withSnakeCaseKeys: withSnakeCaseKeys,
    base64EncodeURL: base64EncodeURL
  };

  /**
    * Includes utility methods and lodash / jQuery shims
   */

  /**
    * Get data from the DOM element.
    *
    * This method will use jQuery's `data()` method if it is available, otherwise it will get the `data-` attribute
    * @param {Element} element - the element to get the data from
    * @param {string} name - the name of the data item
    * @returns the value associated with the `name`
    * @function Util.getData
   */
  getData = function(element, name) {
    return jQuery(element).data(name);
  };

  /**
    * Set data in the DOM element.
    *
    * This method will use jQuery's `data()` method if it is available, otherwise it will set the `data-` attribute
    * @function Util.setData
    * @param {Element} element - the element to set the data in
    * @param {string} name - the name of the data item
    * @param {*} value - the value to be set
    *
   */
  setData = function(element, name, value) {
    return jQuery(element).data(name, value);
  };

  /**
    * Get attribute from the DOM element.
    *
    * This method will use jQuery's `attr()` method if it is available, otherwise it will get the attribute directly
    * @function Util.getAttribute
    * @param {Element} element - the element to set the attribute for
    * @param {string} name - the name of the attribute
    * @returns {*} the value of the attribute
    *
   */
  getAttribute = function(element, name) {
    return jQuery(element).attr(name);
  };

  /**
    * Set attribute in the DOM element.
    *
    * This method will use jQuery's `attr()` method if it is available, otherwise it will set the attribute directly
    * @function Util.setAttribute
    * @param {Element} element - the element to set the attribute for
    * @param {string} name - the name of the attribute
    * @param {*} value - the value to be set
   */
  setAttribute = function(element, name, value) {
    return jQuery(element).attr(name, value);
  };

  /**
   * Remove an attribute in the DOM element.
   *
   * @function Util.removeAttribute
   * @param {Element} element - the element to set the attribute for
   * @param {string} name - the name of the attribute
   */
  removeAttribute = function(element, name) {
    return jQuery(element).removeAttr(name);
  };

  /**
    * Set a group of attributes to the element
    * @function Util.setAttributes
    * @param {Element} element - the element to set the attributes for
    * @param {Object} attributes - a hash of attribute names and values
   */
  setAttributes = function(element, attributes) {
    return jQuery(element).attr(attributes);
  };

  /**
    * Checks if element has a css class
    * @function Util.hasClass
    * @param {Element} element - the element to check
    * @param {string} name - the class name
    @returns {boolean} true if the element has the class
   */
  hasClass = function(element, name) {
    return jQuery(element).hasClass(name);
  };

  /**
    * Add class to the element
    * @function Util.addClass
    * @param {Element} element - the element
    * @param {string} name - the class name to add
   */
  addClass = function(element, name) {
    return jQuery(element).addClass(name);
  };
  width = function(element) {
    return jQuery(element).width();
  };

  /**
   * Returns true if item is empty:
   * <ul>
   *   <li>item is null or undefined</li>
   *   <li>item is an array or string of length 0</li>
   *   <li>item is an object with no keys</li>
   * </ul>
   * @function Util.isEmpty
   * @param item
   * @returns {boolean} true if item is empty
   */
  isEmpty = function(item) {
    return (item == null) || (jQuery.isArray(item) || Util.isString(item)) && item.length === 0 || (jQuery.isPlainObject(item) && jQuery.isEmptyObject(item));
  };

  /**
   * Returns true if item is a string
   * @param item
   * @returns {boolean} true if item is a string
   */
  isString = function(item) {
    return typeof item === 'string' || (item != null ? item.toString() : void 0) === '[object String]';
  };

  /**
   * Recursively assign source properties to destination
   * @function Util.merge
   * @param {Object} destination - the object to assign to
   * @param {...Object} [sources] The source objects.
   */
  merge = function() {
    var args, i;
    args = (function() {
      var j, len, results;
      results = [];
      for (j = 0, len = arguments.length; j < len; j++) {
        i = arguments[j];
        results.push(i);
      }
      return results;
    }).apply(this, arguments);
    args.unshift(true);
    return jQuery.extend.apply(this, args);
  };

  /**
   * Creates a new array from the parameter with "falsey" values removed
   * @function Util.compact
   * @param {Array} array - the array to remove values from
   * @return {Array} a new array without falsey values
   */
  compact = function(arr) {
    var item, j, len, results;
    results = [];
    for (j = 0, len = arr.length; j < len; j++) {
      item = arr[j];
      if (item) {
        results.push(item);
      }
    }
    return results;
  };

  /**
   * Create a new copy of the given object, including all internal objects.
   * @function Util.cloneDeep
   * @param {Object} value - the object to clone
   * @return {Object} a new deep copy of the object
   */
  cloneDeep = function() {
    var args;
    args = jQuery.makeArray(arguments);
    args.unshift({});
    args.unshift(true);
    return jQuery.extend.apply(this, args);
  };

  /**
   * Check if a given item is included in the given array
   * @function Util.contains
   * @param {Array} array - the array to search in
   * @param {*} item - the item to search for
   * @return {boolean} true if the item is included in the array
   */
  contains = function(arr, item) {
    var i, j, len;
    for (j = 0, len = arr.length; j < len; j++) {
      i = arr[j];
      if (i === item) {
        return true;
      }
    }
    return false;
  };

  /**
   * Returns values in the given array that are not included in the other array
   * @function Util.difference
   * @param {Array} arr - the array to select from
   * @param {Array} values - values to filter from arr
   * @return {Array} the filtered values
   */
  difference = function(arr, values) {
    var item, j, len, results;
    results = [];
    for (j = 0, len = arr.length; j < len; j++) {
      item = arr[j];
      if (!contains(values, item)) {
        results.push(item);
      }
    }
    return results;
  };

  /**
   * Returns a list of all the function names in obj
   * @function Util.functions
   * @param {Object} object - the object to inspect
   * @return {Array} a list of functions of object
   */
  functions = function(object) {
    var i, results;
    results = [];
    for (i in object) {
      if (jQuery.isFunction(object[i])) {
        results.push(i);
      }
    }
    return results;
  };

  /**
   * Returns the provided value. This functions is used as a default predicate function.
   * @function Util.identity
   * @param {*} value
   * @return {*} the provided value
   */
  identity = function(value) {
    return value;
  };

  /**
   * @class Util
   */
  Util = jQuery.extend(BaseUtil, {
    hasClass: hasClass,
    addClass: addClass,
    getAttribute: getAttribute,
    setAttribute: setAttribute,
    removeAttribute: removeAttribute,
    setAttributes: setAttributes,
    getData: getData,
    setData: setData,
    width: width,
    isString: isString,
    isArray: jQuery.isArray,
    isEmpty: isEmpty,

    /**
     * Assign source properties to destination.
     * If the property is an object it is assigned as a whole, overriding the destination object.
     * @function Util.assign
     * @param {Object} destination - the object to assign to
     */
    assign: jQuery.extend,
    merge: merge,
    cloneDeep: cloneDeep,
    compact: compact,
    contains: contains,
    difference: difference,
    functions: functions,
    identity: identity,
    isPlainObject: jQuery.isPlainObject,

    /**
     * Remove leading or trailing spaces from text
     * @function Util.trim
     * @param {string} text
     * @return {string} the `text` without leading or trailing spaces
     */
    trim: jQuery.trim
  });

  /**
   * UTF8 encoder
   *
   */
  utf8_encode = function(argString) {
    var c1, enc, end, n, start, string, stringl, utftext;
    if (argString === null || typeof argString === 'undefined') {
      return '';
    }
    string = argString + '';
    utftext = '';
    start = void 0;
    end = void 0;
    stringl = 0;
    start = end = 0;
    stringl = string.length;
    n = 0;
    while (n < stringl) {
      c1 = string.charCodeAt(n);
      enc = null;
      if (c1 < 128) {
        end++;
      } else if (c1 > 127 && c1 < 2048) {
        enc = String.fromCharCode(c1 >> 6 | 192, c1 & 63 | 128);
      } else {
        enc = String.fromCharCode(c1 >> 12 | 224, c1 >> 6 & 63 | 128, c1 & 63 | 128);
      }
      if (enc !== null) {
        if (end > start) {
          utftext += string.slice(start, end);
        }
        utftext += enc;
        start = end = n + 1;
      }
      n++;
    }
    if (end > start) {
      utftext += string.slice(start, stringl);
    }
    return utftext;
  };

  /**
   * CRC32 calculator
   * Depends on 'utf8_encode'
   */
  crc32 = function(str) {
    var crc, i, iTop, table, x, y;
    str = utf8_encode(str);
    table = '00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D';
    crc = 0;
    x = 0;
    y = 0;
    crc = crc ^ -1;
    i = 0;
    iTop = str.length;
    while (i < iTop) {
      y = (crc ^ str.charCodeAt(i)) & 0xFF;
      x = '0x' + table.substr(y * 9, 8);
      crc = crc >>> 8 ^ x;
      i++;
    }
    crc = crc ^ -1;
    if (crc < 0) {
      crc += 4294967296;
    }
    return crc;
  };
  Layer = (function() {

    /**
     * Layer
     * @constructor Layer
     * @param {Object} options - layer parameters
     */
    function Layer(options) {
      this.options = {};
      if (options != null) {
        ["resourceType", "type", "publicId", "format"].forEach((function(_this) {
          return function(key) {
            var ref;
            return _this.options[key] = (ref = options[key]) != null ? ref : options[Util.snakeCase(key)];
          };
        })(this));
      }
    }

    Layer.prototype.resourceType = function(value) {
      this.options.resourceType = value;
      return this;
    };

    Layer.prototype.type = function(value) {
      this.options.type = value;
      return this;
    };

    Layer.prototype.publicId = function(value) {
      this.options.publicId = value;
      return this;
    };


    /**
     * Get the public ID, formatted for layer parameter
     * @function Layer#getPublicId
     * @return {String} public ID
     */

    Layer.prototype.getPublicId = function() {
      var ref;
      return (ref = this.options.publicId) != null ? ref.replace(/\//g, ":") : void 0;
    };


    /**
     * Get the public ID, with format if present
     * @function Layer#getFullPublicId
     * @return {String} public ID
     */

    Layer.prototype.getFullPublicId = function() {
      if (this.options.format != null) {
        return this.getPublicId() + "." + this.options.format;
      } else {
        return this.getPublicId();
      }
    };

    Layer.prototype.format = function(value) {
      this.options.format = value;
      return this;
    };


    /**
     * generate the string representation of the layer
     * @function Layer#toString
     */

    Layer.prototype.toString = function() {
      var components;
      components = [];
      if (this.options.publicId == null) {
        throw "Must supply publicId";
      }
      if (!(this.options.resourceType === "image")) {
        components.push(this.options.resourceType);
      }
      if (!(this.options.type === "upload")) {
        components.push(this.options.type);
      }
      components.push(this.getFullPublicId());
      return Util.compact(components).join(":");
    };

    return Layer;

  })();
  FetchLayer = (function(superClass) {
    extend(FetchLayer, superClass);


    /**
     * @constructor FetchLayer
     * @param {Object|string} options - layer parameters or a url
     * @param {string} options.url the url of the image to fetch
     */

    function FetchLayer(options) {
      FetchLayer.__super__.constructor.call(this, options);
      if (Util.isString(options)) {
        this.options.url = options;
      } else if (options != null ? options.url : void 0) {
        this.options.url = options.url;
      }
    }

    FetchLayer.prototype.url = function(url) {
      this.options.url = url;
      return this;
    };


    /**
     * generate the string representation of the layer
     * @function FetchLayer#toString
     * @return {String}
     */

    FetchLayer.prototype.toString = function() {
      return "fetch:" + (cloudinary.Util.base64EncodeURL(this.options.url));
    };

    return FetchLayer;

  })(Layer);
  TextLayer = (function(superClass) {
    extend(TextLayer, superClass);


    /**
     * @constructor TextLayer
     * @param {Object} options - layer parameters
     */

    function TextLayer(options) {
      var keys;
      TextLayer.__super__.constructor.call(this, options);
      keys = ["resourceType", "resourceType", "fontFamily", "fontSize", "fontWeight", "fontStyle", "textDecoration", "textAlign", "stroke", "letterSpacing", "lineSpacing", "text"];
      if (options != null) {
        keys.forEach((function(_this) {
          return function(key) {
            var ref;
            return _this.options[key] = (ref = options[key]) != null ? ref : options[Util.snakeCase(key)];
          };
        })(this));
      }
      this.options.resourceType = "text";
    }

    TextLayer.prototype.resourceType = function(resourceType) {
      throw "Cannot modify resourceType for text layers";
    };

    TextLayer.prototype.type = function(type) {
      throw "Cannot modify type for text layers";
    };

    TextLayer.prototype.format = function(format) {
      throw "Cannot modify format for text layers";
    };

    TextLayer.prototype.fontFamily = function(fontFamily) {
      this.options.fontFamily = fontFamily;
      return this;
    };

    TextLayer.prototype.fontSize = function(fontSize) {
      this.options.fontSize = fontSize;
      return this;
    };

    TextLayer.prototype.fontWeight = function(fontWeight) {
      this.options.fontWeight = fontWeight;
      return this;
    };

    TextLayer.prototype.fontStyle = function(fontStyle) {
      this.options.fontStyle = fontStyle;
      return this;
    };

    TextLayer.prototype.textDecoration = function(textDecoration) {
      this.options.textDecoration = textDecoration;
      return this;
    };

    TextLayer.prototype.textAlign = function(textAlign) {
      this.options.textAlign = textAlign;
      return this;
    };

    TextLayer.prototype.stroke = function(stroke) {
      this.options.stroke = stroke;
      return this;
    };

    TextLayer.prototype.letterSpacing = function(letterSpacing) {
      this.options.letterSpacing = letterSpacing;
      return this;
    };

    TextLayer.prototype.lineSpacing = function(lineSpacing) {
      this.options.lineSpacing = lineSpacing;
      return this;
    };

    TextLayer.prototype.text = function(text) {
      this.options.text = text;
      return this;
    };


    /**
     * generate the string representation of the layer
     * @function TextLayer#toString
     * @return {String}
     */

    TextLayer.prototype.toString = function() {
      var components, hasPublicId, hasStyle, publicId, re, res, start, style, text, textSource;
      style = this.textStyleIdentifier();
      if (this.options.publicId != null) {
        publicId = this.getFullPublicId();
      }
      if (this.options.text != null) {
        hasPublicId = !Util.isEmpty(publicId);
        hasStyle = !Util.isEmpty(style);
        if (hasPublicId && hasStyle || !hasPublicId && !hasStyle) {
          throw "Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";
        }
        re = /\$\([a-zA-Z]\w*\)/g;
        start = 0;
        textSource = Util.smartEscape(this.options.text, /[,\/]/g);
        text = "";
        while (res = re.exec(textSource)) {
          text += Util.smartEscape(textSource.slice(start, res.index));
          text += res[0];
          start = res.index + res[0].length;
        }
        text += Util.smartEscape(textSource.slice(start));
      }
      components = [this.options.resourceType, style, publicId, text];
      return Util.compact(components).join(":");
    };

    TextLayer.prototype.textStyleIdentifier = function() {
      var components;
      components = [];
      if (this.options.fontWeight !== "normal") {
        components.push(this.options.fontWeight);
      }
      if (this.options.fontStyle !== "normal") {
        components.push(this.options.fontStyle);
      }
      if (this.options.textDecoration !== "none") {
        components.push(this.options.textDecoration);
      }
      components.push(this.options.textAlign);
      if (this.options.stroke !== "none") {
        components.push(this.options.stroke);
      }
      if (!(Util.isEmpty(this.options.letterSpacing) && !Util.isNumberLike(this.options.letterSpacing))) {
        components.push("letter_spacing_" + this.options.letterSpacing);
      }
      if (!(Util.isEmpty(this.options.lineSpacing) && !Util.isNumberLike(this.options.lineSpacing))) {
        components.push("line_spacing_" + this.options.lineSpacing);
      }
      if (!Util.isEmpty(Util.compact(components))) {
        if (Util.isEmpty(this.options.fontFamily)) {
          throw "Must supply fontFamily. " + components;
        }
        if (Util.isEmpty(this.options.fontSize) && !Util.isNumberLike(this.options.fontSize)) {
          throw "Must supply fontSize.";
        }
      }
      components.unshift(this.options.fontFamily, this.options.fontSize);
      components = Util.compact(components).join("_");
      return components;
    };

    return TextLayer;

  })(Layer);
  SubtitlesLayer = (function(superClass) {
    extend(SubtitlesLayer, superClass);


    /**
     * Represent a subtitles layer
     * @constructor SubtitlesLayer
     * @param {Object} options - layer parameters
     */

    function SubtitlesLayer(options) {
      SubtitlesLayer.__super__.constructor.call(this, options);
      this.options.resourceType = "subtitles";
    }

    return SubtitlesLayer;

  })(TextLayer);

  /**
   * Transformation parameters
   * Depends on 'util', 'transformation'
   */
  Param = (function() {

    /**
     * Represents a single parameter
     * @class Param
     * @param {string} name - The name of the parameter in snake_case
     * @param {string} shortName - The name of the serialized form of the parameter.
     *                         If a value is not provided, the parameter will not be serialized.
     * @param {function} [process=cloudinary.Util.identity ] - Manipulate origValue when value is called
     * @ignore
     */
    function Param(name, shortName, process) {
      if (process == null) {
        process = cloudinary.Util.identity;
      }

      /**
       * The name of the parameter in snake_case
       * @member {string} Param#name
       */
      this.name = name;

      /**
       * The name of the serialized form of the parameter
       * @member {string} Param#shortName
       */
      this.shortName = shortName;

      /**
       * Manipulate origValue when value is called
       * @member {function} Param#process
       */
      this.process = process;
    }


    /**
     * Set a (unprocessed) value for this parameter
     * @function Param#set
     * @param {*} origValue - the value of the parameter
     * @return {Param} self for chaining
     */

    Param.prototype.set = function(origValue) {
      this.origValue = origValue;
      return this;
    };


    /**
     * Generate the serialized form of the parameter
     * @function Param#serialize
     * @return {string} the serialized form of the parameter
     */

    Param.prototype.serialize = function() {
      var val, valid;
      val = this.value();
      valid = cloudinary.Util.isArray(val) || cloudinary.Util.isPlainObject(val) || cloudinary.Util.isString(val) ? !cloudinary.Util.isEmpty(val) : val != null;
      if ((this.shortName != null) && valid) {
        return this.shortName + "_" + val;
      } else {
        return '';
      }
    };


    /**
     * Return the processed value of the parameter
     * @function Param#value
     */

    Param.prototype.value = function() {
      return this.process(this.origValue);
    };

    Param.norm_color = function(value) {
      return value != null ? value.replace(/^#/, 'rgb:') : void 0;
    };

    Param.prototype.build_array = function(arg) {
      if (arg == null) {
        arg = [];
      }
      if (cloudinary.Util.isArray(arg)) {
        return arg;
      } else {
        return [arg];
      }
    };


    /**
    * Covert value to video codec string.
    *
    * If the parameter is an object,
    * @param {(string|Object)} param - the video codec as either a String or a Hash
    * @return {string} the video codec string in the format codec:profile:level
    * @example
    * vc_[ :profile : [level]]
    * or
      { codec: 'h264', profile: 'basic', level: '3.1' }
    * @ignore
     */

    Param.process_video_params = function(param) {
      var video;
      switch (param.constructor) {
        case Object:
          video = "";
          if ('codec' in param) {
            video = param['codec'];
            if ('profile' in param) {
              video += ":" + param['profile'];
              if ('level' in param) {
                video += ":" + param['level'];
              }
            }
          }
          return video;
        case String:
          return param;
        default:
          return null;
      }
    };

    return Param;

  })();
  ArrayParam = (function(superClass) {
    extend(ArrayParam, superClass);


    /**
     * A parameter that represents an array
     * @param {string} name - The name of the parameter in snake_case
     * @param {string} shortName - The name of the serialized form of the parameter
     *                         If a value is not provided, the parameter will not be serialized.
     * @param {string} [sep='.'] - The separator to use when joining the array elements together
     * @param {function} [process=cloudinary.Util.identity ] - Manipulate origValue when value is called
     * @class ArrayParam
     * @extends Param
     * @ignore
     */

    function ArrayParam(name, shortName, sep, process) {
      if (sep == null) {
        sep = '.';
      }
      this.sep = sep;
      ArrayParam.__super__.constructor.call(this, name, shortName, process);
    }

    ArrayParam.prototype.serialize = function() {
      var arrayValue, flat, t;
      if (this.shortName != null) {
        arrayValue = this.value();
        if (cloudinary.Util.isEmpty(arrayValue)) {
          return '';
        } else if (cloudinary.Util.isString(arrayValue)) {
          return this.shortName + "_" + arrayValue;
        } else {
          flat = (function() {
            var j, len, results;
            results = [];
            for (j = 0, len = arrayValue.length; j < len; j++) {
              t = arrayValue[j];
              if (cloudinary.Util.isFunction(t.serialize)) {
                results.push(t.serialize());
              } else {
                results.push(t);
              }
            }
            return results;
          })();
          return this.shortName + "_" + (flat.join(this.sep));
        }
      } else {
        return '';
      }
    };

    ArrayParam.prototype.value = function() {
      var j, len, ref, results, v;
      if (cloudinary.Util.isArray(this.origValue)) {
        ref = this.origValue;
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          v = ref[j];
          results.push(this.process(v));
        }
        return results;
      } else {
        return this.process(this.origValue);
      }
    };

    ArrayParam.prototype.set = function(origValue) {
      if ((origValue == null) || cloudinary.Util.isArray(origValue)) {
        return ArrayParam.__super__.set.call(this, origValue);
      } else {
        return ArrayParam.__super__.set.call(this, [origValue]);
      }
    };

    return ArrayParam;

  })(Param);
  TransformationParam = (function(superClass) {
    extend(TransformationParam, superClass);


    /**
     * A parameter that represents a transformation
     * @param {string} name - The name of the parameter in snake_case
     * @param {string} [shortName='t'] - The name of the serialized form of the parameter
     * @param {string} [sep='.'] - The separator to use when joining the array elements together
     * @param {function} [process=cloudinary.Util.identity ] - Manipulate origValue when value is called
     * @class TransformationParam
     * @extends Param
     * @ignore
     */

    function TransformationParam(name, shortName, sep, process) {
      if (shortName == null) {
        shortName = "t";
      }
      if (sep == null) {
        sep = '.';
      }
      this.sep = sep;
      TransformationParam.__super__.constructor.call(this, name, shortName, process);
    }

    TransformationParam.prototype.serialize = function() {
      var joined, result, t;
      if (cloudinary.Util.isEmpty(this.value())) {
        return '';
      } else if (cloudinary.Util.allStrings(this.value())) {
        joined = this.value().join(this.sep);
        if (!cloudinary.Util.isEmpty(joined)) {
          return this.shortName + "_" + joined;
        } else {
          return '';
        }
      } else {
        result = (function() {
          var j, len, ref, results;
          ref = this.value();
          results = [];
          for (j = 0, len = ref.length; j < len; j++) {
            t = ref[j];
            if (t != null) {
              if (cloudinary.Util.isString(t) && !cloudinary.Util.isEmpty(t)) {
                results.push(this.shortName + "_" + t);
              } else if (cloudinary.Util.isFunction(t.serialize)) {
                results.push(t.serialize());
              } else if (cloudinary.Util.isPlainObject(t) && !cloudinary.Util.isEmpty(t)) {
                results.push(new Transformation(t).serialize());
              } else {
                results.push(void 0);
              }
            }
          }
          return results;
        }).call(this);
        return cloudinary.Util.compact(result);
      }
    };

    TransformationParam.prototype.set = function(origValue1) {
      this.origValue = origValue1;
      if (cloudinary.Util.isArray(this.origValue)) {
        return TransformationParam.__super__.set.call(this, this.origValue);
      } else {
        return TransformationParam.__super__.set.call(this, [this.origValue]);
      }
    };

    return TransformationParam;

  })(Param);
  RangeParam = (function(superClass) {
    extend(RangeParam, superClass);


    /**
     * A parameter that represents a range
     * @param {string} name - The name of the parameter in snake_case
     * @param {string} shortName - The name of the serialized form of the parameter
     *                         If a value is not provided, the parameter will not be serialized.
     * @param {function} [process=norm_range_value ] - Manipulate origValue when value is called
     * @class RangeParam
     * @extends Param
     * @ignore
     */

    function RangeParam(name, shortName, process) {
      if (process == null) {
        process = this.norm_range_value;
      }
      RangeParam.__super__.constructor.call(this, name, shortName, process);
    }

    RangeParam.norm_range_value = function(value) {
      var modifier, offset;
      offset = String(value).match(new RegExp('^' + offset_any_pattern + '$'));
      if (offset) {
        modifier = offset[5] != null ? 'p' : '';
        value = (offset[1] || offset[4]) + modifier;
      }
      return value;
    };

    return RangeParam;

  })(Param);
  RawParam = (function(superClass) {
    extend(RawParam, superClass);

    function RawParam(name, shortName, process) {
      if (process == null) {
        process = cloudinary.Util.identity;
      }
      RawParam.__super__.constructor.call(this, name, shortName, process);
    }

    RawParam.prototype.serialize = function() {
      return this.value();
    };

    return RawParam;

  })(Param);
  LayerParam = (function(superClass) {
    var LAYER_KEYWORD_PARAMS;

    extend(LayerParam, superClass);

    function LayerParam() {
      return LayerParam.__super__.constructor.apply(this, arguments);
    }

    LayerParam.prototype.value = function() {
      var layerOptions, result;
      layerOptions = this.origValue;
      if (cloudinary.Util.isPlainObject(layerOptions)) {
        layerOptions = Util.withCamelCaseKeys(layerOptions);
        if (layerOptions.resourceType === "text" || (layerOptions.text != null)) {
          result = new cloudinary.TextLayer(layerOptions).toString();
        } else if (layerOptions.resourceType === "subtitles") {
          result = new cloudinary.SubtitlesLayer(layerOptions).toString();
        } else if (layerOptions.resourceType === "fetch" || (layerOptions.url != null)) {
          result = new cloudinary.FetchLayer(layerOptions).toString();
        } else {
          result = new cloudinary.Layer(layerOptions).toString();
        }
      } else if (/^fetch:.+/.test(layerOptions)) {
        result = new FetchLayer(layerOptions.substr(6)).toString();
      } else {
        result = layerOptions;
      }
      return result;
    };

    LAYER_KEYWORD_PARAMS = [["font_weight", "normal"], ["font_style", "normal"], ["text_decoration", "none"], ["text_align", null], ["stroke", "none"], ["letter_spacing", null], ["line_spacing", null]];

    LayerParam.prototype.textStyle = function(layer) {
      return (new cloudinary.TextLayer(layer)).textStyleIdentifier();
    };

    return LayerParam;

  })(Param);
  ExpressionParam = (function(superClass) {
    extend(ExpressionParam, superClass);

    function ExpressionParam() {
      return ExpressionParam.__super__.constructor.apply(this, arguments);
    }

    ExpressionParam.prototype.serialize = function() {
      return Expression.normalize(ExpressionParam.__super__.serialize.call(this));
    };

    return ExpressionParam;

  })(Param);
  parameters = {};
  parameters.Param = Param;
  parameters.ArrayParam = ArrayParam;
  parameters.RangeParam = RangeParam;
  parameters.RawParam = RawParam;
  parameters.TransformationParam = TransformationParam;
  parameters.LayerParam = LayerParam;
  parameters.ExpressionParam = ExpressionParam;
  Expression = (function() {

    /**
     * @internal
     */
    var faceCount;

    Expression.OPERATORS = {
      "=": 'eq',
      "!=": 'ne',
      "<": 'lt',
      ">": 'gt',
      "<=": 'lte',
      ">=": 'gte',
      "&&": 'and',
      "||": 'or',
      "*": "mul",
      "/": "div",
      "+": "add",
      "-": "sub"
    };


    /**
     * @internal
     */

    Expression.PREDEFINED_VARS = {
      "aspect_ratio": "ar",
      "aspectRatio": "ar",
      "current_page": "cp",
      "currentPage": "cp",
      "face_count": "fc",
      "faceCount": "fc",
      "height": "h",
      "initial_aspect_ratio": "iar",
      "initial_height": "ih",
      "initial_width": "iw",
      "initialAspectRatio": "iar",
      "initialHeight": "ih",
      "initialWidth": "iw",
      "page_count": "pc",
      "page_x": "px",
      "page_y": "py",
      "pageCount": "pc",
      "pageX": "px",
      "pageY": "py",
      "tags": "tags",
      "width": "w"
    };


    /**
     * @internal
     */

    Expression.BOUNDRY = "[ _]+";


    /**
     * Represents a transformation expression
     * @param {string} expressionStr - a expression in string format
     * @class Expression
     *
     */

    function Expression(expressionStr) {

      /**
        * @protected
        * @inner Expression-expressions
       */
      this.expressions = [];
      if (expressionStr != null) {
        this.expressions.push(Expression.normalize(expressionStr));
      }
    }


    /**
     * Convenience constructor method
     * @function Expression.new
     */

    Expression["new"] = function(expressionStr) {
      return new this(expressionStr);
    };


    /**
     * Normalize a string expression
     * @function Cloudinary#normalize
     * @param {string} expression a expression, e.g. "w gt 100", "width_gt_100", "width > 100"
     * @return {string} the normalized form of the value expression, e.g. "w_gt_100"
     */

    Expression.normalize = function(expression) {
      var operators, pattern, replaceRE;
      if (expression == null) {
        return expression;
      }
      expression = String(expression);
      operators = "\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*";
      pattern = "((" + operators + ")(?=[ _])|" + Object.keys(Expression.PREDEFINED_VARS).join("|") + ")";
      replaceRE = new RegExp(pattern, "g");
      expression = expression.replace(replaceRE, function(match) {
        return Expression.OPERATORS[match] || Expression.PREDEFINED_VARS[match];
      });
      return expression.replace(/[ _]+/g, '_');
    };


    /**
     * Serialize the expression
     * @return {string} the expression as a string
     */

    Expression.prototype.serialize = function() {
      return Expression.normalize(this.expressions.join("_"));
    };

    Expression.prototype.toString = function() {
      return this.serialize();
    };


    /**
     * Get the parent transformation of this expression
     * @return Transformation
     */

    Expression.prototype.getParent = function() {
      return this.parent;
    };


    /**
     * Set the parent transformation of this expression
     * @param {Transformation} the parent transformation
     * @return {Expression} this expression
     */

    Expression.prototype.setParent = function(parent) {
      this.parent = parent;
      return this;
    };


    /**
     * Add a expression
     * @function Expression#predicate
     * @internal
     */

    Expression.prototype.predicate = function(name, operator, value) {
      if (Expression.OPERATORS[operator] != null) {
        operator = Expression.OPERATORS[operator];
      }
      this.expressions.push(name + "_" + operator + "_" + value);
      return this;
    };


    /**
     * @function Expression#and
     */

    Expression.prototype.and = function() {
      this.expressions.push("and");
      return this;
    };


    /**
     * @function Expression#or
     */

    Expression.prototype.or = function() {
      this.expressions.push("or");
      return this;
    };


    /**
     * Conclude expression
     * @function Expression#then
     * @return {Transformation} the transformation this expression is defined for
     */

    Expression.prototype.then = function() {
      return this.getParent()["if"](this.toString());
    };


    /**
     * @function Expression#height
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Expression} this expression
     */

    Expression.prototype.height = function(operator, value) {
      return this.predicate("h", operator, value);
    };


    /**
     * @function Expression#width
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Expression} this expression
     */

    Expression.prototype.width = function(operator, value) {
      return this.predicate("w", operator, value);
    };


    /**
     * @function Expression#aspectRatio
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Expression} this expression
     */

    Expression.prototype.aspectRatio = function(operator, value) {
      return this.predicate("ar", operator, value);
    };


    /**
     * @function Expression#pages
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Expression} this expression
     */

    Expression.prototype.pageCount = function(operator, value) {
      return this.predicate("pc", operator, value);
    };


    /**
     * @function Expression#faces
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Expression} this expression
     */

    Expression.prototype.faceCount = function(operator, value) {
      return this.predicate("fc", operator, value);
    };

    Expression.prototype.value = function(value) {
      this.expressions.push(value);
      return this;
    };


    /**
     */

    Expression.variable = function(name, value) {
      return new this(name).value(value);
    };


    /**
      * @returns a new expression with the predefined variable "width"
      * @function Expression.width
     */

    Expression.width = function() {
      return new this("width");
    };


    /**
      * @returns a new expression with the predefined variable "height"
      * @function Expression.height
     */

    Expression.height = function() {
      return new this("height");
    };


    /**
      * @returns a new expression with the predefined variable "initialWidth"
      * @function Expression.initialWidth
     */

    Expression.initialWidth = function() {
      return new this("initialWidth");
    };


    /**
      * @returns a new expression with the predefined variable "initialHeight"
      * @function Expression.initialHeight
     */

    Expression.initialHeight = function() {
      return new this("initialHeight");
    };


    /**
      * @returns a new expression with the predefined variable "aspectRatio"
      * @function Expression.aspectRatio
     */

    Expression.aspectRatio = function() {
      return new this("aspectRatio");
    };


    /**
      * @returns a new expression with the predefined variable "initialAspectRatio"
      * @function Expression.initialAspectRatio
     */

    Expression.initialAspectRatio = function() {
      return new this("initialAspectRatio");
    };


    /**
      * @returns a new expression with the predefined variable "pageCount"
      * @function Expression.pageCount
     */

    Expression.pageCount = function() {
      return new this("pageCount");
    };


    /**
      * @returns a new expression with the predefined variable "faceCount"
      * @function Expression.faceCount
     */

    faceCount = function() {
      return new this("faceCount");
    };


    /**
      * @returns a new expression with the predefined variable "currentPage"
      * @function Expression.currentPage
     */

    Expression.currentPage = function() {
      return new this("currentPage");
    };


    /**
      * @returns a new expression with the predefined variable "tags"
      * @function Expression.tags
     */

    Expression.tags = function() {
      return new this("tags");
    };


    /**
      * @returns a new expression with the predefined variable "pageX"
      * @function Expression.pageX
     */

    Expression.pageX = function() {
      return new this("pageX");
    };


    /**
      * @returns a new expression with the predefined variable "pageY"
      * @function Expression.pageY
     */

    Expression.pageY = function() {
      return new this("pageY");
    };

    return Expression;

  })();
  Condition = (function(superClass) {
    extend(Condition, superClass);


    /**
     * Represents a transformation condition
     * @param {string} conditionStr - a condition in string format
     * @class Condition
     * @example
     * // normally this class is not instantiated directly
     * var tr = cloudinary.Transformation.new()
     *    .if().width( ">", 1000).and().aspectRatio("<", "3:4").then()
     *      .width(1000)
     *      .crop("scale")
     *    .else()
     *      .width(500)
     *      .crop("scale")
     *
     * var tr = cloudinary.Transformation.new()
     *    .if("w > 1000 and aspectRatio < 3:4")
     *      .width(1000)
     *      .crop("scale")
     *    .else()
     *      .width(500)
     *      .crop("scale")
     *
     */

    function Condition(conditionStr) {
      Condition.__super__.constructor.call(this, conditionStr);
    }


    /**
     * @function Condition#height
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Condition} this condition
     */

    Condition.prototype.height = function(operator, value) {
      return this.predicate("h", operator, value);
    };


    /**
     * @function Condition#width
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Condition} this condition
     */

    Condition.prototype.width = function(operator, value) {
      return this.predicate("w", operator, value);
    };


    /**
     * @function Condition#aspectRatio
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Condition} this condition
     */

    Condition.prototype.aspectRatio = function(operator, value) {
      return this.predicate("ar", operator, value);
    };


    /**
     * @function Condition#pages
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Condition} this condition
     */

    Condition.prototype.pageCount = function(operator, value) {
      return this.predicate("pc", operator, value);
    };


    /**
     * @function Condition#faces
     * @param {string} operator the comparison operator (e.g. "<", "lt")
     * @param {string|number} value the right hand side value
     * @return {Condition} this condition
     */

    Condition.prototype.faceCount = function(operator, value) {
      return this.predicate("fc", operator, value);
    };

    return Condition;

  })(Expression);

  /**
   * Cloudinary configuration class
   * Depends on 'utils'
   */
  Configuration = (function() {

    /**
     * Defaults configuration.
     */
    var DEFAULT_CONFIGURATION_PARAMS, ref;

    DEFAULT_CONFIGURATION_PARAMS = {
      responsive_class: 'cld-responsive',
      responsive_use_breakpoints: true,
      round_dpr: true,
      secure: (typeof window !== "undefined" && window !== null ? (ref = window.location) != null ? ref.protocol : void 0 : void 0) === 'https:'
    };

    Configuration.CONFIG_PARAMS = ["api_key", "api_secret", "callback", "cdn_subdomain", "cloud_name", "cname", "private_cdn", "protocol", "resource_type", "responsive", "responsive_class", "responsive_use_breakpoints", "responsive_width", "round_dpr", "secure", "secure_cdn_subdomain", "secure_distribution", "shorten", "type", "upload_preset", "url_suffix", "use_root_path", "version"];


    /**
     * Cloudinary configuration class
     * @constructor Configuration
     * @param {Object} options - configuration parameters
     */

    function Configuration(options) {
      if (options == null) {
        options = {};
      }
      this.configuration = Util.cloneDeep(options);
      Util.defaults(this.configuration, DEFAULT_CONFIGURATION_PARAMS);
    }


    /**
     * Initialize the configuration.
     * The function first tries to retrieve the configuration form the environment and then from the document.
     * @function Configuration#init
     * @return {Configuration} returns this for chaining
     * @see fromDocument
     * @see fromEnvironment
     */

    Configuration.prototype.init = function() {
      this.fromEnvironment();
      this.fromDocument();
      return this;
    };


    /**
     * Set a new configuration item
     * @function Configuration#set
     * @param {string} name - the name of the item to set
     * @param {*} value - the value to be set
     * @return {Configuration}
     *
     */

    Configuration.prototype.set = function(name, value) {
      this.configuration[name] = value;
      return this;
    };


    /**
     * Get the value of a configuration item
     * @function Configuration#get
     * @param {string} name - the name of the item to set
     * @return {*} the configuration item
     */

    Configuration.prototype.get = function(name) {
      return this.configuration[name];
    };

    Configuration.prototype.merge = function(config) {
      if (config == null) {
        config = {};
      }
      Util.assign(this.configuration, Util.cloneDeep(config));
      return this;
    };


    /**
     * Initialize Cloudinary from HTML meta tags.
     * @function Configuration#fromDocument
     * @return {Configuration}
     * @example <meta name="cloudinary_cloud_name" content="mycloud">
     *
     */

    Configuration.prototype.fromDocument = function() {
      var el, j, len, meta_elements;
      meta_elements = typeof document !== "undefined" && document !== null ? document.querySelectorAll('meta[name^="cloudinary_"]') : void 0;
      if (meta_elements) {
        for (j = 0, len = meta_elements.length; j < len; j++) {
          el = meta_elements[j];
          this.configuration[el.getAttribute('name').replace('cloudinary_', '')] = el.getAttribute('content');
        }
      }
      return this;
    };


    /**
     * Initialize Cloudinary from the `CLOUDINARY_URL` environment variable.
     *
     * This function will only run under Node.js environment.
     * @function Configuration#fromEnvironment
     * @requires Node.js
     */

    Configuration.prototype.fromEnvironment = function() {
      var cloudinary_url, j, k, len, query, ref1, ref2, ref3, uri, uriRegex, v, value;
      cloudinary_url = typeof process !== "undefined" && process !== null ? (ref1 = process.env) != null ? ref1.CLOUDINARY_URL : void 0 : void 0;
      if (cloudinary_url != null) {
        uriRegex = /cloudinary:\/\/(?:(\w+)(?:\:([\w-]+))?@)?([\w\.-]+)(?:\/([^?]*))?(?:\?(.+))?/;
        uri = uriRegex.exec(cloudinary_url);
        if (uri) {
          if (uri[3] != null) {
            this.configuration['cloud_name'] = uri[3];
          }
          if (uri[1] != null) {
            this.configuration['api_key'] = uri[1];
          }
          if (uri[2] != null) {
            this.configuration['api_secret'] = uri[2];
          }
          if (uri[4] != null) {
            this.configuration['private_cdn'] = uri[4] != null;
          }
          if (uri[4] != null) {
            this.configuration['secure_distribution'] = uri[4];
          }
          query = uri[5];
          if (query != null) {
            ref2 = query.split('&');
            for (j = 0, len = ref2.length; j < len; j++) {
              value = ref2[j];
              ref3 = value.split('='), k = ref3[0], v = ref3[1];
              if (v == null) {
                v = true;
              }
              this.configuration[k] = v;
            }
          }
        }
      }
      return this;
    };


    /**
     * Create or modify the Cloudinary client configuration
     *
     * Warning: `config()` returns the actual internal configuration object. modifying it will change the configuration.
     *
     * This is a backward compatibility method. For new code, use get(), merge() etc.
     * @function Configuration#config
     * @param {hash|string|boolean} new_config
     * @param {string} new_value
     * @returns {*} configuration, or value
     *
     * @see {@link fromEnvironment} for initialization using environment variables
     * @see {@link fromDocument} for initialization using HTML meta tags
     */

    Configuration.prototype.config = function(new_config, new_value) {
      switch (false) {
        case new_value === void 0:
          this.set(new_config, new_value);
          return this.configuration;
        case !Util.isString(new_config):
          return this.get(new_config);
        case !Util.isPlainObject(new_config):
          this.merge(new_config);
          return this.configuration;
        default:
          return this.configuration;
      }
    };


    /**
     * Returns a copy of the configuration parameters
     * @function Configuration#toOptions
     * @returns {Object} a key:value collection of the configuration parameters
     */

    Configuration.prototype.toOptions = function() {
      return Util.cloneDeep(this.configuration);
    };

    return Configuration;

  })();

  /**
   * TransformationBase
   * Depends on 'configuration', 'parameters','util'
   * @internal
   */
  TransformationBase = (function() {
    var VAR_NAME_RE, lastArgCallback, processVar;

    VAR_NAME_RE = /^\$[a-zA-Z0-9]+$/;

    TransformationBase.prototype.trans_separator = '/';

    TransformationBase.prototype.param_separator = ',';

    lastArgCallback = function(args) {
      var callback;
      callback = args != null ? args[args.length - 1] : void 0;
      if (Util.isFunction(callback)) {
        return callback;
      } else {
        return void 0;
      }
    };


    /**
     * The base class for transformations.
     * Members of this class are documented as belonging to the {@link Transformation} class for convenience.
     * @class TransformationBase
     */

    function TransformationBase(options) {
      var parent, trans;
      if (options == null) {
        options = {};
      }

      /** @private */
      parent = void 0;

      /** @private */
      trans = {};

      /**
       * Return an options object that can be used to create an identical Transformation
       * @function Transformation#toOptions
       * @return {Object} Returns a plain object representing this transformation
       */
      this.toOptions || (this.toOptions = function(withChain) {
        var key, list, opt, ref, ref1, tr, value;
        if (withChain == null) {
          withChain = true;
        }
        opt = {};
        for (key in trans) {
          value = trans[key];
          opt[key] = value.origValue;
        }
        ref = this.otherOptions;
        for (key in ref) {
          value = ref[key];
          if (value !== void 0) {
            opt[key] = value;
          }
        }
        if (withChain && !Util.isEmpty(this.chained)) {
          list = (function() {
            var j, len, ref1, results;
            ref1 = this.chained;
            results = [];
            for (j = 0, len = ref1.length; j < len; j++) {
              tr = ref1[j];
              results.push(tr.toOptions());
            }
            return results;
          }).call(this);
          list.push(opt);
          opt = {};
          ref1 = this.otherOptions;
          for (key in ref1) {
            value = ref1[key];
            if (value !== void 0) {
              opt[key] = value;
            }
          }
          opt.transformation = list;
        }
        return opt;
      });

      /**
       * Set a parent for this object for chaining purposes.
       *
       * @function Transformation#setParent
       * @param {Object} object - the parent to be assigned to
       * @returns {Transformation} Returns this instance for chaining purposes.
       */
      this.setParent || (this.setParent = function(object) {
        parent = object;
        if (object != null) {
          this.fromOptions(typeof object.toOptions === "function" ? object.toOptions() : void 0);
        }
        return this;
      });

      /**
       * Returns the parent of this object in the chain
       * @function Transformation#getParent
       * @protected
       * @return {Object} Returns the parent of this object if there is any
       */
      this.getParent || (this.getParent = function() {
        return parent;
      });

      /** @protected */
      this.param || (this.param = function(value, name, abbr, defaultValue, process) {
        if (process == null) {
          if (Util.isFunction(defaultValue)) {
            process = defaultValue;
          } else {
            process = Util.identity;
          }
        }
        trans[name] = new Param(name, abbr, process).set(value);
        return this;
      });

      /** @protected */
      this.rawParam || (this.rawParam = function(value, name, abbr, defaultValue, process) {
        if (process == null) {
          process = Util.identity;
        }
        process = lastArgCallback(arguments);
        trans[name] = new RawParam(name, abbr, process).set(value);
        return this;
      });

      /** @protected */
      this.rangeParam || (this.rangeParam = function(value, name, abbr, defaultValue, process) {
        if (process == null) {
          process = Util.identity;
        }
        process = lastArgCallback(arguments);
        trans[name] = new RangeParam(name, abbr, process).set(value);
        return this;
      });

      /** @protected */
      this.arrayParam || (this.arrayParam = function(value, name, abbr, sep, defaultValue, process) {
        if (sep == null) {
          sep = ":";
        }
        if (defaultValue == null) {
          defaultValue = [];
        }
        if (process == null) {
          process = Util.identity;
        }
        process = lastArgCallback(arguments);
        trans[name] = new ArrayParam(name, abbr, sep, process).set(value);
        return this;
      });

      /** @protected */
      this.transformationParam || (this.transformationParam = function(value, name, abbr, sep, defaultValue, process) {
        if (sep == null) {
          sep = ".";
        }
        if (process == null) {
          process = Util.identity;
        }
        process = lastArgCallback(arguments);
        trans[name] = new TransformationParam(name, abbr, sep, process).set(value);
        return this;
      });
      this.layerParam || (this.layerParam = function(value, name, abbr) {
        trans[name] = new LayerParam(name, abbr).set(value);
        return this;
      });

      /**
       * Get the value associated with the given name.
       * @function Transformation#getValue
       * @param {string} name - the name of the parameter
       * @return {*} the processed value associated with the given name
       * @description Use {@link get}.origValue for the value originally provided for the parameter
       */
      this.getValue || (this.getValue = function(name) {
        var ref, ref1;
        return (ref = (ref1 = trans[name]) != null ? ref1.value() : void 0) != null ? ref : this.otherOptions[name];
      });

      /**
       * Get the parameter object for the given parameter name
       * @function Transformation#get
       * @param {string} name the name of the transformation parameter
       * @returns {Param} the param object for the given name, or undefined
       */
      this.get || (this.get = function(name) {
        return trans[name];
      });

      /**
       * Remove a transformation option from the transformation.
       * @function Transformation#remove
       * @param {string} name - the name of the option to remove
       * @return {*} Returns the option that was removed or null if no option by that name was found. The type of the
       *              returned value depends on the value.
       */
      this.remove || (this.remove = function(name) {
        var temp;
        switch (false) {
          case trans[name] == null:
            temp = trans[name];
            delete trans[name];
            return temp.origValue;
          case this.otherOptions[name] == null:
            temp = this.otherOptions[name];
            delete this.otherOptions[name];
            return temp;
          default:
            return null;
        }
      });

      /**
       * Return an array of all the keys (option names) in the transformation.
       * @return {Array<string>} the keys in snakeCase format
       */
      this.keys || (this.keys = function() {
        var key;
        return ((function() {
          var results;
          results = [];
          for (key in trans) {
            if (key != null) {
              results.push(key.match(VAR_NAME_RE) ? key : Util.snakeCase(key));
            }
          }
          return results;
        })()).sort();
      });

      /**
       * Returns a plain object representation of the transformation. Values are processed.
       * @function Transformation#toPlainObject
       * @return {Object} the transformation options as plain object
       */
      this.toPlainObject || (this.toPlainObject = function() {
        var hash, key, list, tr;
        hash = {};
        for (key in trans) {
          hash[key] = trans[key].value();
          if (Util.isPlainObject(hash[key])) {
            hash[key] = Util.cloneDeep(hash[key]);
          }
        }
        if (!Util.isEmpty(this.chained)) {
          list = (function() {
            var j, len, ref, results;
            ref = this.chained;
            results = [];
            for (j = 0, len = ref.length; j < len; j++) {
              tr = ref[j];
              results.push(tr.toPlainObject());
            }
            return results;
          }).call(this);
          list.push(hash);
          hash = {
            transformation: list
          };
        }
        return hash;
      });

      /**
       * Complete the current transformation and chain to a new one.
       * In the URL, transformations are chained together by slashes.
       * @function Transformation#chain
       * @return {Transformation} Returns this transformation for chaining
       * @example
       * var tr = cloudinary.Transformation.new();
       * tr.width(10).crop('fit').chain().angle(15).serialize()
       * // produces "c_fit,w_10/a_15"
       */
      this.chain || (this.chain = function() {
        var names, tr;
        names = Object.getOwnPropertyNames(trans);
        if (names.length !== 0) {
          tr = new this.constructor(this.toOptions(false));
          this.resetTransformations();
          this.chained.push(tr);
        }
        return this;
      });
      this.resetTransformations || (this.resetTransformations = function() {
        trans = {};
        return this;
      });
      this.otherOptions || (this.otherOptions = {});
      this.chained = [];
      if (!Util.isEmpty(options)) {
        this.fromOptions(options);
      }
    }


    /**
     * Merge the provided options with own's options
     * @param {Object} [options={}] key-value list of options
     * @returns {Transformation} Returns this instance for chaining
     */

    TransformationBase.prototype.fromOptions = function(options) {
      var key, opt;
      if (options instanceof TransformationBase) {
        this.fromTransformation(options);
      } else {
        options || (options = {});
        if (Util.isString(options) || Util.isArray(options)) {
          options = {
            transformation: options
          };
        }
        options = Util.cloneDeep(options, function(value) {
          if (value instanceof TransformationBase) {
            return new value.constructor(value.toOptions());
          }
        });
        if (options["if"]) {
          this.set("if", options["if"]);
          delete options["if"];
        }
        for (key in options) {
          opt = options[key];
          if (key.match(VAR_NAME_RE)) {
            if (key !== '$attr') {
              this.set('variable', key, opt);
            }
          } else {
            this.set(key, opt);
          }
        }
      }
      return this;
    };

    TransformationBase.prototype.fromTransformation = function(other) {
      var j, key, len, ref;
      if (other instanceof TransformationBase) {
        ref = other.keys();
        for (j = 0, len = ref.length; j < len; j++) {
          key = ref[j];
          this.set(key, other.get(key).origValue);
        }
      }
      return this;
    };


    /**
     * Set a parameter.
     * The parameter name `key` is converted to
     * @param {string} key - the name of the parameter
     * @param {*} value - the value of the parameter
     * @returns {Transformation} Returns this instance for chaining
     */

    TransformationBase.prototype.set = function() {
      var camelKey, key, values;
      key = arguments[0], values = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      camelKey = Util.camelCase(key);
      if (Util.contains(Transformation.methods, camelKey)) {
        this[camelKey].apply(this, values);
      } else {
        this.otherOptions[key] = values[0];
      }
      return this;
    };

    TransformationBase.prototype.hasLayer = function() {
      return this.getValue("overlay") || this.getValue("underlay");
    };


    /**
     * Generate a string representation of the transformation.
     * @function Transformation#serialize
     * @return {string} Returns the transformation as a string
     */

    TransformationBase.prototype.serialize = function() {
      var ifParam, j, len, paramList, ref, ref1, ref2, ref3, ref4, resultArray, t, tr, transformationList, transformationString, transformations, value, variables, vars;
      resultArray = (function() {
        var j, len, ref, results;
        ref = this.chained;
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          tr = ref[j];
          results.push(tr.serialize());
        }
        return results;
      }).call(this);
      paramList = this.keys();
      transformations = (ref = this.get("transformation")) != null ? ref.serialize() : void 0;
      ifParam = (ref1 = this.get("if")) != null ? ref1.serialize() : void 0;
      variables = processVar((ref2 = this.get("variables")) != null ? ref2.value() : void 0);
      paramList = Util.difference(paramList, ["transformation", "if", "variables"]);
      vars = [];
      transformationList = [];
      for (j = 0, len = paramList.length; j < len; j++) {
        t = paramList[j];
        if (t.match(VAR_NAME_RE)) {
          vars.push(t + "_" + Expression.normalize((ref3 = this.get(t)) != null ? ref3.value() : void 0));
        } else {
          transformationList.push((ref4 = this.get(t)) != null ? ref4.serialize() : void 0);
        }
      }
      switch (false) {
        case !Util.isString(transformations):
          transformationList.push(transformations);
          break;
        case !Util.isArray(transformations):
          resultArray = resultArray.concat(transformations);
      }
      transformationList = (function() {
        var l, len1, results;
        results = [];
        for (l = 0, len1 = transformationList.length; l < len1; l++) {
          value = transformationList[l];
          if (Util.isArray(value) && !Util.isEmpty(value) || !Util.isArray(value) && value) {
            results.push(value);
          }
        }
        return results;
      })();
      transformationList = vars.sort().concat(variables).concat(transformationList.sort());
      if (ifParam === "if_end") {
        transformationList.push(ifParam);
      } else if (!Util.isEmpty(ifParam)) {
        transformationList.unshift(ifParam);
      }
      transformationString = Util.compact(transformationList).join(this.param_separator);
      if (!Util.isEmpty(transformationString)) {
        resultArray.push(transformationString);
      }
      return Util.compact(resultArray).join(this.trans_separator);
    };


    /**
     * Provide a list of all the valid transformation option names
     * @function Transformation#listNames
     * @private
     * @return {Array<string>} a array of all the valid option names
     */

    TransformationBase.prototype.listNames = function() {
      return Transformation.methods;
    };


    /**
     * Returns attributes for an HTML tag.
     * @function Cloudinary.toHtmlAttributes
     * @return PlainObject
     */

    TransformationBase.prototype.toHtmlAttributes = function() {
      var attrName, height, j, key, len, options, ref, ref1, ref2, ref3, value;
      options = {};
      ref = this.otherOptions;
      for (key in ref) {
        value = ref[key];
        if (!(!Util.contains(Transformation.PARAM_NAMES, Util.snakeCase(key)))) {
          continue;
        }
        attrName = /^html_/.test(key) ? key.slice(5) : key;
        options[attrName] = value;
      }
      ref1 = this.keys();
      for (j = 0, len = ref1.length; j < len; j++) {
        key = ref1[j];
        if (/^html_/.test(key)) {
          options[Util.camelCase(key.slice(5))] = this.getValue(key);
        }
      }
      if (!(this.hasLayer() || this.getValue("angle") || Util.contains(["fit", "limit", "lfill"], this.getValue("crop")))) {
        width = (ref2 = this.get("width")) != null ? ref2.origValue : void 0;
        height = (ref3 = this.get("height")) != null ? ref3.origValue : void 0;
        if (parseFloat(width) >= 1.0) {
          if (options['width'] == null) {
            options['width'] = width;
          }
        }
        if (parseFloat(height) >= 1.0) {
          if (options['height'] == null) {
            options['height'] = height;
          }
        }
      }
      return options;
    };

    TransformationBase.prototype.isValidParamName = function(name) {
      return Transformation.methods.indexOf(Util.camelCase(name)) >= 0;
    };


    /**
     * Delegate to the parent (up the call chain) to produce HTML
     * @function Transformation#toHtml
     * @return {string} HTML representation of the parent if possible.
     * @example
     * tag = cloudinary.ImageTag.new("sample", {cloud_name: "demo"})
     * // ImageTag {name: "img", publicId: "sample"}
     * tag.toHtml()
     * // <img src="http://res.cloudinary.com/demo/image/upload/sample">
     * tag.transformation().crop("fit").width(300).toHtml()
     * // <img src="http://res.cloudinary.com/demo/image/upload/c_fit,w_300/sample">
     */

    TransformationBase.prototype.toHtml = function() {
      var ref;
      return (ref = this.getParent()) != null ? typeof ref.toHtml === "function" ? ref.toHtml() : void 0 : void 0;
    };

    TransformationBase.prototype.toString = function() {
      return this.serialize();
    };

    processVar = function(varArray) {
      var j, len, name, ref, results, v;
      if (Util.isArray(varArray)) {
        results = [];
        for (j = 0, len = varArray.length; j < len; j++) {
          ref = varArray[j], name = ref[0], v = ref[1];
          results.push(name + "_" + (Expression.normalize(v)));
        }
        return results;
      } else {
        return varArray;
      }

      /**
       * Transformation Class methods.
       * This is a list of the parameters defined in Transformation.
       * Values are camelCased.
       * @const Transformation.methods
       * @private
       * @ignore
       * @type {Array<string>}
       */

      /**
       * Parameters that are filtered out before passing the options to an HTML tag.
       *
       * The list of parameters is a combination of `Transformation::methods` and `Configuration::CONFIG_PARAMS`
       * @const {Array<string>} Transformation.PARAM_NAMES
       * @private
       * @ignore
       * @see toHtmlAttributes
       */
    };

    return TransformationBase;

  })();
  Transformation = (function(superClass) {
    extend(Transformation, superClass);


    /**
     *  Represents a single transformation.
     *  @class Transformation
     *  @example
     *  t = new cloudinary.Transformation();
     * t.angle(20).crop("scale").width("auto");
     *
     * // or
     *
     * t = new cloudinary.Transformation( {angle: 20, crop: "scale", width: "auto"});
     */

    function Transformation(options) {
      if (options == null) {
        options = {};
      }
      Transformation.__super__.constructor.call(this, options);
      this;
    }


    /**
     * Convenience constructor
     * @param {Object} options
     * @return {Transformation}
     * @example cl = cloudinary.Transformation.new( {angle: 20, crop: "scale", width: "auto"})
     */

    Transformation["new"] = function(args) {
      return new Transformation(args);
    };


    /*
      Transformation Parameters
     */

    Transformation.prototype.angle = function(value) {
      return this.arrayParam(value, "angle", "a", ".", Expression.normalize);
    };

    Transformation.prototype.audioCodec = function(value) {
      return this.param(value, "audio_codec", "ac");
    };

    Transformation.prototype.audioFrequency = function(value) {
      return this.param(value, "audio_frequency", "af");
    };

    Transformation.prototype.aspectRatio = function(value) {
      return this.param(value, "aspect_ratio", "ar", Expression.normalize);
    };

    Transformation.prototype.background = function(value) {
      return this.param(value, "background", "b", Param.norm_color);
    };

    Transformation.prototype.bitRate = function(value) {
      return this.param(value, "bit_rate", "br");
    };

    Transformation.prototype.border = function(value) {
      return this.param(value, "border", "bo", function(border) {
        if (Util.isPlainObject(border)) {
          border = Util.assign({}, {
            color: "black",
            width: 2
          }, border);
          return border.width + "px_solid_" + (Param.norm_color(border.color));
        } else {
          return border;
        }
      });
    };

    Transformation.prototype.color = function(value) {
      return this.param(value, "color", "co", Param.norm_color);
    };

    Transformation.prototype.colorSpace = function(value) {
      return this.param(value, "color_space", "cs");
    };

    Transformation.prototype.crop = function(value) {
      return this.param(value, "crop", "c");
    };

    Transformation.prototype.defaultImage = function(value) {
      return this.param(value, "default_image", "d");
    };

    Transformation.prototype.delay = function(value) {
      return this.param(value, "delay", "dl");
    };

    Transformation.prototype.density = function(value) {
      return this.param(value, "density", "dn");
    };

    Transformation.prototype.duration = function(value) {
      return this.rangeParam(value, "duration", "du");
    };

    Transformation.prototype.dpr = function(value) {
      return this.param(value, "dpr", "dpr", (function(_this) {
        return function(dpr) {
          dpr = dpr.toString();
          if (dpr != null ? dpr.match(/^\d+$/) : void 0) {
            return dpr + ".0";
          } else {
            return Expression.normalize(dpr);
          }
        };
      })(this));
    };

    Transformation.prototype.effect = function(value) {
      return this.arrayParam(value, "effect", "e", ":", Expression.normalize);
    };

    Transformation.prototype["else"] = function() {
      return this["if"]('else');
    };

    Transformation.prototype.endIf = function() {
      return this["if"]('end');
    };

    Transformation.prototype.endOffset = function(value) {
      return this.rangeParam(value, "end_offset", "eo");
    };

    Transformation.prototype.fallbackContent = function(value) {
      return this.param(value, "fallback_content");
    };

    Transformation.prototype.fetchFormat = function(value) {
      return this.param(value, "fetch_format", "f");
    };

    Transformation.prototype.format = function(value) {
      return this.param(value, "format");
    };

    Transformation.prototype.flags = function(value) {
      return this.arrayParam(value, "flags", "fl", ".");
    };

    Transformation.prototype.gravity = function(value) {
      return this.param(value, "gravity", "g");
    };

    Transformation.prototype.height = function(value) {
      return this.param(value, "height", "h", (function(_this) {
        return function() {
          if (_this.getValue("crop") || _this.getValue("overlay") || _this.getValue("underlay")) {
            return Expression.normalize(value);
          } else {
            return null;
          }
        };
      })(this));
    };

    Transformation.prototype.htmlHeight = function(value) {
      return this.param(value, "html_height");
    };

    Transformation.prototype.htmlWidth = function(value) {
      return this.param(value, "html_width");
    };

    Transformation.prototype["if"] = function(value) {
      var i, ifVal, j, ref, trIf, trRest;
      if (value == null) {
        value = "";
      }
      switch (value) {
        case "else":
          this.chain();
          return this.param(value, "if", "if");
        case "end":
          this.chain();
          for (i = j = ref = this.chained.length - 1; j >= 0; i = j += -1) {
            ifVal = this.chained[i].getValue("if");
            if (ifVal === "end") {
              break;
            } else if (ifVal != null) {
              trIf = Transformation["new"]()["if"](ifVal);
              this.chained[i].remove("if");
              trRest = this.chained[i];
              this.chained[i] = Transformation["new"]().transformation([trIf, trRest]);
              if (ifVal !== "else") {
                break;
              }
            }
          }
          return this.param(value, "if", "if");
        case "":
          return Condition["new"]().setParent(this);
        default:
          return this.param(value, "if", "if", function(value) {
            return Condition["new"](value).toString();
          });
      }
    };

    Transformation.prototype.keyframeInterval = function(value) {
      return this.param(value, "keyframe_interval", "ki");
    };

    Transformation.prototype.offset = function(value) {
      var end_o, ref, start_o;
      ref = Util.isFunction(value != null ? value.split : void 0) ? value.split('..') : Util.isArray(value) ? value : [null, null], start_o = ref[0], end_o = ref[1];
      if (start_o != null) {
        this.startOffset(start_o);
      }
      if (end_o != null) {
        return this.endOffset(end_o);
      }
    };

    Transformation.prototype.opacity = function(value) {
      return this.param(value, "opacity", "o", Expression.normalize);
    };

    Transformation.prototype.overlay = function(value) {
      return this.layerParam(value, "overlay", "l");
    };

    Transformation.prototype.page = function(value) {
      return this.param(value, "page", "pg");
    };

    Transformation.prototype.poster = function(value) {
      return this.param(value, "poster");
    };

    Transformation.prototype.prefix = function(value) {
      return this.param(value, "prefix", "p");
    };

    Transformation.prototype.quality = function(value) {
      return this.param(value, "quality", "q", Expression.normalize);
    };

    Transformation.prototype.radius = function(value) {
      return this.param(value, "radius", "r", Expression.normalize);
    };

    Transformation.prototype.rawTransformation = function(value) {
      return this.rawParam(value, "raw_transformation");
    };

    Transformation.prototype.size = function(value) {
      var height, ref;
      if (Util.isFunction(value != null ? value.split : void 0)) {
        ref = value.split('x'), width = ref[0], height = ref[1];
        this.width(width);
        return this.height(height);
      }
    };

    Transformation.prototype.sourceTypes = function(value) {
      return this.param(value, "source_types");
    };

    Transformation.prototype.sourceTransformation = function(value) {
      return this.param(value, "source_transformation");
    };

    Transformation.prototype.startOffset = function(value) {
      return this.rangeParam(value, "start_offset", "so");
    };

    Transformation.prototype.streamingProfile = function(value) {
      return this.param(value, "streaming_profile", "sp");
    };

    Transformation.prototype.transformation = function(value) {
      return this.transformationParam(value, "transformation", "t");
    };

    Transformation.prototype.underlay = function(value) {
      return this.layerParam(value, "underlay", "u");
    };

    Transformation.prototype.variable = function(name, value) {
      return this.param(value, name, name);
    };

    Transformation.prototype.variables = function(values) {
      return this.arrayParam(values, "variables");
    };

    Transformation.prototype.videoCodec = function(value) {
      return this.param(value, "video_codec", "vc", Param.process_video_params);
    };

    Transformation.prototype.videoSampling = function(value) {
      return this.param(value, "video_sampling", "vs");
    };

    Transformation.prototype.width = function(value) {
      return this.param(value, "width", "w", (function(_this) {
        return function() {
          if (_this.getValue("crop") || _this.getValue("overlay") || _this.getValue("underlay")) {
            return Expression.normalize(value);
          } else {
            return null;
          }
        };
      })(this));
    };

    Transformation.prototype.x = function(value) {
      return this.param(value, "x", "x", Expression.normalize);
    };

    Transformation.prototype.y = function(value) {
      return this.param(value, "y", "y", Expression.normalize);
    };

    Transformation.prototype.zoom = function(value) {
      return this.param(value, "zoom", "z", Expression.normalize);
    };

    return Transformation;

  })(TransformationBase);

  /**
   * Transformation Class methods.
   * This is a list of the parameters defined in Transformation.
   * Values are camelCased.
   */
  Transformation.methods || (Transformation.methods = Util.difference(Util.functions(Transformation.prototype), Util.functions(TransformationBase.prototype)));

  /**
   * Parameters that are filtered out before passing the options to an HTML tag.
   *
   * The list of parameters is a combination of `Transformation::methods` and `Configuration::CONFIG_PARAMS`
   */
  Transformation.PARAM_NAMES || (Transformation.PARAM_NAMES = ((function() {
    var j, len, ref, results;
    ref = Transformation.methods;
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      m = ref[j];
      results.push(Util.snakeCase(m));
    }
    return results;
  })()).concat(Configuration.CONFIG_PARAMS));

  /**
   * Generic HTML tag
   * Depends on 'transformation', 'util'
   */
  HtmlTag = (function() {

    /**
     * Represents an HTML (DOM) tag
     * @constructor HtmlTag
     * @param {string} name - the name of the tag
     * @param {string} [publicId]
     * @param {Object} options
     * @example tag = new HtmlTag( 'div', { 'width': 10})
     */
    var toAttribute;

    function HtmlTag(name, publicId, options) {
      var transformation;
      this.name = name;
      this.publicId = publicId;
      if (options == null) {
        if (Util.isPlainObject(publicId)) {
          options = publicId;
          this.publicId = void 0;
        } else {
          options = {};
        }
      }
      transformation = new Transformation(options);
      transformation.setParent(this);
      this.transformation = function() {
        return transformation;
      };
    }


    /**
     * Convenience constructor
     * Creates a new instance of an HTML (DOM) tag
     * @function HtmlTag.new
     * @param {string} name - the name of the tag
     * @param {string} [publicId]
     * @param {Object} options
     * @return {HtmlTag}
     * @example tag = HtmlTag.new( 'div', { 'width': 10})
     */

    HtmlTag["new"] = function(name, publicId, options) {
      return new this(name, publicId, options);
    };


    /**
     * Represent the given key and value as an HTML attribute.
     * @function HtmlTag#toAttribute
     * @protected
     * @param {string} key - attribute name
     * @param {*|boolean} value - the value of the attribute. If the value is boolean `true`, return the key only.
     * @returns {string} the attribute  
     *
     */

    toAttribute = function(key, value) {
      if (!value) {
        return void 0;
      } else if (value === true) {
        return key;
      } else {
        return key + "=\"" + value + "\"";
      }
    };


    /**
     * combine key and value from the `attr` to generate an HTML tag attributes string.
     * `Transformation::toHtmlTagOptions` is used to filter out transformation and configuration keys.
     * @protected
     * @param {Object} attrs
     * @return {string} the attributes in the format `'key1="value1" key2="value2"'`
     * @ignore
     */

    HtmlTag.prototype.htmlAttrs = function(attrs) {
      var key, pairs, value;
      return pairs = ((function() {
        var results;
        results = [];
        for (key in attrs) {
          value = attrs[key];
          if (value) {
            results.push(toAttribute(key, value));
          }
        }
        return results;
      })()).sort().join(' ');
    };


    /**
     * Get all options related to this tag.
     * @function HtmlTag#getOptions
     * @returns {Object} the options
     *
     */

    HtmlTag.prototype.getOptions = function() {
      return this.transformation().toOptions();
    };


    /**
     * Get the value of option `name`
     * @function HtmlTag#getOption
     * @param {string} name - the name of the option
     * @returns {*} Returns the value of the option
     *
     */

    HtmlTag.prototype.getOption = function(name) {
      return this.transformation().getValue(name);
    };


    /**
     * Get the attributes of the tag.
     * @function HtmlTag#attributes
     * @returns {Object} attributes
     */

    HtmlTag.prototype.attributes = function() {
      return this.transformation().toHtmlAttributes();
    };


    /**
     * Set a tag attribute named `name` to `value`
     * @function HtmlTag#setAttr
     * @param {string} name - the name of the attribute
     * @param {string} value - the value of the attribute
     */

    HtmlTag.prototype.setAttr = function(name, value) {
      this.transformation().set("html_" + name, value);
      return this;
    };


    /**
     * Get the value of the tag attribute `name`
     * @function HtmlTag#getAttr
     * @param {string} name - the name of the attribute
     * @returns {*}
     */

    HtmlTag.prototype.getAttr = function(name) {
      return this.attributes()["html_" + name] || this.attributes()[name];
    };


    /**
     * Remove the tag attributed named `name`
     * @function HtmlTag#removeAttr
     * @param {string} name - the name of the attribute
     * @returns {*}
     */

    HtmlTag.prototype.removeAttr = function(name) {
      var ref;
      return (ref = this.transformation().remove("html_" + name)) != null ? ref : this.transformation().remove(name);
    };


    /**
     * @function HtmlTag#content
     * @protected
     * @ignore
     */

    HtmlTag.prototype.content = function() {
      return "";
    };


    /**
     * @function HtmlTag#openTag
     * @protected
     * @ignore
     */

    HtmlTag.prototype.openTag = function() {
      return "<" + this.name + " " + (this.htmlAttrs(this.attributes())) + ">";
    };


    /**
     * @function HtmlTag#closeTag
     * @protected
     * @ignore
     */

    HtmlTag.prototype.closeTag = function() {
      return "</" + this.name + ">";
    };


    /**
     * Generates an HTML representation of the tag.
     * @function HtmlTag#toHtml
     * @returns {string} Returns HTML in string format
     */

    HtmlTag.prototype.toHtml = function() {
      return this.openTag() + this.content() + this.closeTag();
    };


    /**
     * Creates a DOM object representing the tag.
     * @function HtmlTag#toDOM
     * @returns {Element}
     */

    HtmlTag.prototype.toDOM = function() {
      var element, name, ref, value;
      if (!Util.isFunction(typeof document !== "undefined" && document !== null ? document.createElement : void 0)) {
        throw "Can't create DOM if document is not present!";
      }
      element = document.createElement(this.name);
      ref = this.attributes();
      for (name in ref) {
        value = ref[name];
        element[name] = value;
      }
      return element;
    };

    HtmlTag.isResponsive = function(tag, responsiveClass) {
      var dataSrc;
      dataSrc = Util.getData(tag, 'src-cache') || Util.getData(tag, 'src');
      return Util.hasClass(tag, responsiveClass) && /\bw_auto\b/.exec(dataSrc);
    };

    return HtmlTag;

  })();

  /**
   * Image Tag
   * Depends on 'tags/htmltag', 'cloudinary'
   */
  ImageTag = (function(superClass) {
    extend(ImageTag, superClass);


    /**
     * Creates an HTML (DOM) Image tag using Cloudinary as the source.
     * @constructor ImageTag
     * @extends HtmlTag
     * @param {string} [publicId]
     * @param {Object} [options]
     */

    function ImageTag(publicId, options) {
      if (options == null) {
        options = {};
      }
      ImageTag.__super__.constructor.call(this, "img", publicId, options);
    }


    /** @override */

    ImageTag.prototype.closeTag = function() {
      return "";
    };


    /** @override */

    ImageTag.prototype.attributes = function() {
      var attr, options, srcAttribute;
      attr = ImageTag.__super__.attributes.call(this) || [];
      options = this.getOptions();
      srcAttribute = options.responsive && !options.client_hints ? 'data-src' : 'src';
      if (attr[srcAttribute] == null) {
        attr[srcAttribute] = new Cloudinary(this.getOptions()).url(this.publicId);
      }
      return attr;
    };

    return ImageTag;

  })(HtmlTag);

  /**
   * Video Tag
   * Depends on 'tags/htmltag', 'util', 'cloudinary'
   */
  VideoTag = (function(superClass) {
    var DEFAULT_POSTER_OPTIONS, DEFAULT_VIDEO_SOURCE_TYPES, VIDEO_TAG_PARAMS;

    extend(VideoTag, superClass);

    VIDEO_TAG_PARAMS = ['source_types', 'source_transformation', 'fallback_content', 'poster'];

    DEFAULT_VIDEO_SOURCE_TYPES = ['webm', 'mp4', 'ogv'];

    DEFAULT_POSTER_OPTIONS = {
      format: 'jpg',
      resource_type: 'video'
    };


    /**
     * Creates an HTML (DOM) Video tag using Cloudinary as the source.
     * @constructor VideoTag
     * @extends HtmlTag
     * @param {string} [publicId]
     * @param {Object} [options]
     */

    function VideoTag(publicId, options) {
      if (options == null) {
        options = {};
      }
      options = Util.defaults({}, options, Cloudinary.DEFAULT_VIDEO_PARAMS);
      VideoTag.__super__.constructor.call(this, "video", publicId.replace(/\.(mp4|ogv|webm)$/, ''), options);
    }


    /**
     * Set the transformation to apply on each source
     * @function VideoTag#setSourceTransformation
     * @param {Object} an object with pairs of source type and source transformation
     * @returns {VideoTag} Returns this instance for chaining purposes.
     */

    VideoTag.prototype.setSourceTransformation = function(value) {
      this.transformation().sourceTransformation(value);
      return this;
    };


    /**
     * Set the source types to include in the video tag
     * @function VideoTag#setSourceTypes
     * @param {Array<string>} an array of source types
     * @returns {VideoTag} Returns this instance for chaining purposes.
     */

    VideoTag.prototype.setSourceTypes = function(value) {
      this.transformation().sourceTypes(value);
      return this;
    };


    /**
     * Set the poster to be used in the video tag
     * @function VideoTag#setPoster
     * @param {string|Object} value
     * - string: a URL to use for the poster
     * - Object: transformation parameters to apply to the poster. May optionally include a public_id to use instead of the video public_id.
     * @returns {VideoTag} Returns this instance for chaining purposes.
     */

    VideoTag.prototype.setPoster = function(value) {
      this.transformation().poster(value);
      return this;
    };


    /**
     * Set the content to use as fallback in the video tag
     * @function VideoTag#setFallbackContent
     * @param {string} value - the content to use, in HTML format
     * @returns {VideoTag} Returns this instance for chaining purposes.
     */

    VideoTag.prototype.setFallbackContent = function(value) {
      this.transformation().fallbackContent(value);
      return this;
    };

    VideoTag.prototype.content = function() {
      var cld, fallback, innerTags, mimeType, sourceTransformation, sourceTypes, src, srcType, transformation, videoType;
      sourceTypes = this.transformation().getValue('source_types');
      sourceTransformation = this.transformation().getValue('source_transformation');
      fallback = this.transformation().getValue('fallback_content');
      if (Util.isArray(sourceTypes)) {
        cld = new Cloudinary(this.getOptions());
        innerTags = (function() {
          var j, len, results;
          results = [];
          for (j = 0, len = sourceTypes.length; j < len; j++) {
            srcType = sourceTypes[j];
            transformation = sourceTransformation[srcType] || {};
            src = cld.url("" + this.publicId, Util.defaults({}, transformation, {
              resource_type: 'video',
              format: srcType
            }));
            videoType = srcType === 'ogv' ? 'ogg' : srcType;
            mimeType = 'video/' + videoType;
            results.push("<source " + (this.htmlAttrs({
              src: src,
              type: mimeType
            })) + ">");
          }
          return results;
        }).call(this);
      } else {
        innerTags = [];
      }
      return innerTags.join('') + fallback;
    };

    VideoTag.prototype.attributes = function() {
      var a, attr, j, len, poster, ref, ref1, sourceTypes;
      sourceTypes = this.getOption('source_types');
      poster = (ref = this.getOption('poster')) != null ? ref : {};
      if (Util.isPlainObject(poster)) {
        defaults = poster.public_id != null ? Cloudinary.DEFAULT_IMAGE_PARAMS : DEFAULT_POSTER_OPTIONS;
        poster = new Cloudinary(this.getOptions()).url((ref1 = poster.public_id) != null ? ref1 : this.publicId, Util.defaults({}, poster, defaults));
      }
      attr = VideoTag.__super__.attributes.call(this) || [];
      for (j = 0, len = attr.length; j < len; j++) {
        a = attr[j];
        if (!Util.contains(VIDEO_TAG_PARAMS)) {
          attr = a;
        }
      }
      if (!Util.isArray(sourceTypes)) {
        attr["src"] = new Cloudinary(this.getOptions()).url(this.publicId, {
          resource_type: 'video',
          format: sourceTypes
        });
      }
      if (poster != null) {
        attr["poster"] = poster;
      }
      return attr;
    };

    return VideoTag;

  })(HtmlTag);

  /**
   * Image Tag
   * Depends on 'tags/htmltag', 'cloudinary'
   */
  ClientHintsMetaTag = (function(superClass) {
    extend(ClientHintsMetaTag, superClass);


    /**
     * Creates an HTML (DOM) Meta tag that enables client-hints.
     * @constructor ClientHintsMetaTag
     * @extends HtmlTag
     */

    function ClientHintsMetaTag(options) {
      ClientHintsMetaTag.__super__.constructor.call(this, 'meta', void 0, Util.assign({
        "http-equiv": "Accept-CH",
        content: "DPR, Viewport-Width, Width"
      }, options));
    }


    /** @override */

    ClientHintsMetaTag.prototype.closeTag = function() {
      return "";
    };

    return ClientHintsMetaTag;

  })(HtmlTag);
  Cloudinary = (function() {
    var AKAMAI_SHARED_CDN, CF_SHARED_CDN, DEFAULT_POSTER_OPTIONS, DEFAULT_VIDEO_SOURCE_TYPES, OLD_AKAMAI_SHARED_CDN, SEO_TYPES, SHARED_CDN, VERSION, absolutize, applyBreakpoints, cdnSubdomainNumber, closestAbove, cloudinaryUrlPrefix, defaultBreakpoints, finalizeResourceType, findContainerWidth, maxWidth, updateDpr;

    VERSION = "2.5.0";

    CF_SHARED_CDN = "d3jpl91pxevbkh.cloudfront.net";

    OLD_AKAMAI_SHARED_CDN = "cloudinary-a.akamaihd.net";

    AKAMAI_SHARED_CDN = "res.cloudinary.com";

    SHARED_CDN = AKAMAI_SHARED_CDN;

    DEFAULT_POSTER_OPTIONS = {
      format: 'jpg',
      resource_type: 'video'
    };

    DEFAULT_VIDEO_SOURCE_TYPES = ['webm', 'mp4', 'ogv'];

    SEO_TYPES = {
      "image/upload": "images",
      "image/private": "private_images",
      "image/authenticated": "authenticated_images",
      "raw/upload": "files",
      "video/upload": "videos"
    };


    /**
    * @const {Object} Cloudinary.DEFAULT_IMAGE_PARAMS
    * Defaults values for image parameters.
    *
    * (Previously defined using option_consume() )
     */

    Cloudinary.DEFAULT_IMAGE_PARAMS = {
      resource_type: "image",
      transformation: [],
      type: 'upload'
    };


    /**
    * Defaults values for video parameters.
    * @const {Object} Cloudinary.DEFAULT_VIDEO_PARAMS
    * (Previously defined using option_consume() )
     */

    Cloudinary.DEFAULT_VIDEO_PARAMS = {
      fallback_content: '',
      resource_type: "video",
      source_transformation: {},
      source_types: DEFAULT_VIDEO_SOURCE_TYPES,
      transformation: [],
      type: 'upload'
    };


    /**
     * Main Cloudinary class
     * @class Cloudinary
     * @param {Object} options - options to configure Cloudinary
     * @see Configuration for more details
     * @example
     *    var cl = new cloudinary.Cloudinary( { cloud_name: "mycloud"});
     *    var imgTag = cl.image("myPicID");
     */

    function Cloudinary(options) {
      var configuration;
      this.devicePixelRatioCache = {};
      this.responsiveConfig = {};
      this.responsiveResizeInitialized = false;
      configuration = new Configuration(options);
      this.config = function(newConfig, newValue) {
        return configuration.config(newConfig, newValue);
      };

      /**
       * Use \<meta\> tags in the document to configure this Cloudinary instance.
       * @return {Cloudinary} this for chaining
       */
      this.fromDocument = function() {
        configuration.fromDocument();
        return this;
      };

      /**
       * Use environment variables to configure this Cloudinary instance.
       * @return {Cloudinary} this for chaining
       */
      this.fromEnvironment = function() {
        configuration.fromEnvironment();
        return this;
      };

      /**
       * Initialize configuration.
       * @function Cloudinary#init
       * @see Configuration#init
       * @return {Cloudinary} this for chaining
       */
      this.init = function() {
        configuration.init();
        return this;
      };
    }


    /**
     * Convenience constructor
     * @param {Object} options
     * @return {Cloudinary}
     * @example cl = cloudinary.Cloudinary.new( { cloud_name: "mycloud"})
     */

    Cloudinary["new"] = function(options) {
      return new this(options);
    };


    /**
     * Return the resource type and action type based on the given configuration
     * @function Cloudinary#finalizeResourceType
     * @param {Object|string} resourceType
     * @param {string} [type='upload']
     * @param {string} [urlSuffix]
     * @param {boolean} [useRootPath]
     * @param {boolean} [shorten]
     * @returns {string} resource_type/type
     * @ignore
     */

    finalizeResourceType = function(resourceType, type, urlSuffix, useRootPath, shorten) {
      var key, options;
      if (resourceType == null) {
        resourceType = "image";
      }
      if (type == null) {
        type = "upload";
      }
      if (Util.isPlainObject(resourceType)) {
        options = resourceType;
        resourceType = options.resource_type;
        type = options.type;
        urlSuffix = options.url_suffix;
        useRootPath = options.use_root_path;
        shorten = options.shorten;
      }
      if (type == null) {
        type = 'upload';
      }
      if (urlSuffix != null) {
        resourceType = SEO_TYPES[resourceType + "/" + type];
        type = null;
        if (resourceType == null) {
          throw new Error("URL Suffix only supported for " + (((function() {
            var results;
            results = [];
            for (key in SEO_TYPES) {
              results.push(key);
            }
            return results;
          })()).join(', ')));
        }
      }
      if (useRootPath) {
        if (resourceType === 'image' && type === 'upload' || resourceType === "images") {
          resourceType = null;
          type = null;
        } else {
          throw new Error("Root path only supported for image/upload");
        }
      }
      if (shorten && resourceType === 'image' && type === 'upload') {
        resourceType = 'iu';
        type = null;
      }
      return [resourceType, type].join("/");
    };

    absolutize = function(url) {
      var prefix;
      if (!url.match(/^https?:\//)) {
        prefix = document.location.protocol + '//' + document.location.host;
        if (url[0] === '?') {
          prefix += document.location.pathname;
        } else if (url[0] !== '/') {
          prefix += document.location.pathname.replace(/\/[^\/]*$/, '/');
        }
        url = prefix + url;
      }
      return url;
    };


    /**
     * Generate an resource URL.
     * @function Cloudinary#url
     * @param {string} publicId - the public ID of the resource
     * @param {Object} [options] - options for the tag and transformations, possible values include all {@link Transformation} parameters
     *                          and {@link Configuration} parameters
     * @param {string} [options.type='upload'] - the classification of the resource
     * @param {Object} [options.resource_type='image'] - the type of the resource
     * @return {string} The resource URL
     */

    Cloudinary.prototype.url = function(publicId, options) {
      var error, error1, prefix, ref, resourceTypeAndType, transformation, transformationString, url, version;
      if (options == null) {
        options = {};
      }
      if (!publicId) {
        return publicId;
      }
      if (options instanceof Transformation) {
        options = options.toOptions();
      }
      options = Util.defaults({}, options, this.config(), Cloudinary.DEFAULT_IMAGE_PARAMS);
      if (options.type === 'fetch') {
        options.fetch_format = options.fetch_format || options.format;
        publicId = absolutize(publicId);
      }
      transformation = new Transformation(options);
      transformationString = transformation.serialize();
      if (!options.cloud_name) {
        throw 'Unknown cloud_name';
      }
      if (publicId.search('/') >= 0 && !publicId.match(/^v[0-9]+/) && !publicId.match(/^https?:\//) && !((ref = options.version) != null ? ref.toString() : void 0)) {
        options.version = 1;
      }
      if (publicId.match(/^https?:/)) {
        if (options.type === 'upload' || options.type === 'asset') {
          url = publicId;
        } else {
          publicId = encodeURIComponent(publicId).replace(/%3A/g, ':').replace(/%2F/g, '/');
        }
      } else {
        try {
          publicId = decodeURIComponent(publicId);
        } catch (error1) {
          error = error1;
        }
        publicId = encodeURIComponent(publicId).replace(/%3A/g, ':').replace(/%2F/g, '/');
        if (options.url_suffix) {
          if (options.url_suffix.match(/[\.\/]/)) {
            throw 'url_suffix should not include . or /';
          }
          publicId = publicId + '/' + options.url_suffix;
        }
        if (options.format) {
          if (!options.trust_public_id) {
            publicId = publicId.replace(/\.(jpg|png|gif|webp)$/, '');
          }
          publicId = publicId + '.' + options.format;
        }
      }
      prefix = cloudinaryUrlPrefix(publicId, options);
      resourceTypeAndType = finalizeResourceType(options.resource_type, options.type, options.url_suffix, options.use_root_path, options.shorten);
      version = options.version ? 'v' + options.version : '';
      return url || Util.compact([prefix, resourceTypeAndType, transformationString, version, publicId]).join('/').replace(/([^:])\/+/g, '$1/');
    };


    /**
     * Generate an video resource URL.
     * @function Cloudinary#video_url
     * @param {string} publicId - the public ID of the resource
     * @param {Object} [options] - options for the tag and transformations, possible values include all {@link Transformation} parameters
     *                          and {@link Configuration} parameters
     * @param {string} [options.type='upload'] - the classification of the resource
     * @return {string} The video URL
     */

    Cloudinary.prototype.video_url = function(publicId, options) {
      options = Util.assign({
        resource_type: 'video'
      }, options);
      return this.url(publicId, options);
    };


    /**
     * Generate an video thumbnail URL.
     * @function Cloudinary#video_thumbnail_url
     * @param {string} publicId - the public ID of the resource
     * @param {Object} [options] - options for the tag and transformations, possible values include all {@link Transformation} parameters
     *                          and {@link Configuration} parameters
     * @param {string} [options.type='upload'] - the classification of the resource
     * @return {string} The video thumbnail URL
     */

    Cloudinary.prototype.video_thumbnail_url = function(publicId, options) {
      options = Util.assign({}, DEFAULT_POSTER_OPTIONS, options);
      return this.url(publicId, options);
    };


    /**
     * Generate a string representation of the provided transformation options.
     * @function Cloudinary#transformation_string
     * @param {Object} options - the transformation options
     * @returns {string} The transformation string
     */

    Cloudinary.prototype.transformation_string = function(options) {
      return new Transformation(options).serialize();
    };


    /**
     * Generate an image tag.
     * @function Cloudinary#image
     * @param {string} publicId - the public ID of the image
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} an image tag element
     */

    Cloudinary.prototype.image = function(publicId, options) {
      var client_hints, img, ref, ref1;
      if (options == null) {
        options = {};
      }
      img = this.imageTag(publicId, options);
      client_hints = (ref = (ref1 = options.client_hints) != null ? ref1 : this.config('client_hints')) != null ? ref : false;
      if (!((options.src != null) || client_hints)) {
        img.setAttr("src", '');
      }
      img = img.toDOM();
      if (!client_hints) {
        Util.setData(img, 'src-cache', this.url(publicId, options));
        this.cloudinary_update(img, options);
      }
      return img;
    };


    /**
     * Creates a new ImageTag instance, configured using this own's configuration.
     * @function Cloudinary#imageTag
     * @param {string} publicId - the public ID of the resource
     * @param {Object} options - additional options to pass to the new ImageTag instance
     * @return {ImageTag} An ImageTag that is attached (chained) to this Cloudinary instance
     */

    Cloudinary.prototype.imageTag = function(publicId, options) {
      var tag;
      tag = new ImageTag(publicId, this.config());
      tag.transformation().fromOptions(options);
      return tag;
    };


    /**
     * Generate an image tag for the video thumbnail.
     * @function Cloudinary#video_thumbnail
     * @param {string} publicId - the public ID of the video
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} An image tag element
     */

    Cloudinary.prototype.video_thumbnail = function(publicId, options) {
      return this.image(publicId, Util.merge({}, DEFAULT_POSTER_OPTIONS, options));
    };


    /**
     * @function Cloudinary#facebook_profile_image
     * @param {string} publicId - the public ID of the image
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} an image tag element
     */

    Cloudinary.prototype.facebook_profile_image = function(publicId, options) {
      return this.image(publicId, Util.assign({
        type: 'facebook'
      }, options));
    };


    /**
     * @function Cloudinary#twitter_profile_image
     * @param {string} publicId - the public ID of the image
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} an image tag element
     */

    Cloudinary.prototype.twitter_profile_image = function(publicId, options) {
      return this.image(publicId, Util.assign({
        type: 'twitter'
      }, options));
    };


    /**
     * @function Cloudinary#twitter_name_profile_image
     * @param {string} publicId - the public ID of the image
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} an image tag element
     */

    Cloudinary.prototype.twitter_name_profile_image = function(publicId, options) {
      return this.image(publicId, Util.assign({
        type: 'twitter_name'
      }, options));
    };


    /**
     * @function Cloudinary#gravatar_image
     * @param {string} publicId - the public ID of the image
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} an image tag element
     */

    Cloudinary.prototype.gravatar_image = function(publicId, options) {
      return this.image(publicId, Util.assign({
        type: 'gravatar'
      }, options));
    };


    /**
     * @function Cloudinary#fetch_image
     * @param {string} publicId - the public ID of the image
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} an image tag element
     */

    Cloudinary.prototype.fetch_image = function(publicId, options) {
      return this.image(publicId, Util.assign({
        type: 'fetch'
      }, options));
    };


    /**
     * @function Cloudinary#video
     * @param {string} publicId - the public ID of the image
     * @param {Object} [options] - options for the tag and transformations
     * @return {HTMLImageElement} an image tag element
     */

    Cloudinary.prototype.video = function(publicId, options) {
      if (options == null) {
        options = {};
      }
      return this.videoTag(publicId, options).toHtml();
    };


    /**
     * Creates a new VideoTag instance, configured using this own's configuration.
     * @function Cloudinary#videoTag
     * @param {string} publicId - the public ID of the resource
     * @param {Object} options - additional options to pass to the new VideoTag instance
     * @return {VideoTag} A VideoTag that is attached (chained) to this Cloudinary instance
     */

    Cloudinary.prototype.videoTag = function(publicId, options) {
      options = Util.defaults({}, options, this.config());
      return new VideoTag(publicId, options);
    };


    /**
     * Generate the URL of the sprite image
     * @function Cloudinary#sprite_css
     * @param {string} publicId - the public ID of the resource
     * @param {Object} [options] - options for the tag and transformations
     * @see {@link http://cloudinary.com/documentation/sprite_generation Sprite generation}
     */

    Cloudinary.prototype.sprite_css = function(publicId, options) {
      options = Util.assign({
        type: 'sprite'
      }, options);
      if (!publicId.match(/.css$/)) {
        options.format = 'css';
      }
      return this.url(publicId, options);
    };


    /**
    * Initialize the responsive behaviour.<br>
    * Calls {@link Cloudinary#cloudinary_update} to modify image tags.
     * @function Cloudinary#responsive
    * @param {Object} options
    * @param {String} [options.responsive_class='cld-responsive'] - provide an alternative class used to locate img tags
    * @param {number} [options.responsive_debounce=100] - the debounce interval in milliseconds.
    * @param {boolean} [bootstrap=true] if true processes the img tags by calling cloudinary_update. When false the tags will be processed only after a resize event.
    * @see {@link Cloudinary#cloudinary_update} for additional configuration parameters
     */

    Cloudinary.prototype.responsive = function(options, bootstrap) {
      var ref, ref1, ref2, responsiveClass, responsiveResize, timeout;
      if (bootstrap == null) {
        bootstrap = true;
      }
      this.responsiveConfig = Util.merge(this.responsiveConfig || {}, options);
      responsiveClass = (ref = this.responsiveConfig['responsive_class']) != null ? ref : this.config('responsive_class');
      if (bootstrap) {
        this.cloudinary_update("img." + responsiveClass + ", img.cld-hidpi", this.responsiveConfig);
      }
      responsiveResize = (ref1 = (ref2 = this.responsiveConfig['responsive_resize']) != null ? ref2 : this.config('responsive_resize')) != null ? ref1 : true;
      if (responsiveResize && !this.responsiveResizeInitialized) {
        this.responsiveConfig.resizing = this.responsiveResizeInitialized = true;
        timeout = null;
        return window.addEventListener('resize', (function(_this) {
          return function() {
            var debounce, ref3, ref4, reset, run, wait, waitFunc;
            debounce = (ref3 = (ref4 = _this.responsiveConfig['responsive_debounce']) != null ? ref4 : _this.config('responsive_debounce')) != null ? ref3 : 100;
            reset = function() {
              if (timeout) {
                clearTimeout(timeout);
                return timeout = null;
              }
            };
            run = function() {
              return _this.cloudinary_update("img." + responsiveClass, _this.responsiveConfig);
            };
            waitFunc = function() {
              reset();
              return run();
            };
            wait = function() {
              reset();
              return timeout = setTimeout(waitFunc, debounce);
            };
            if (debounce) {
              return wait();
            } else {
              return run();
            }
          };
        })(this));
      }
    };


    /**
     * @function Cloudinary#calc_breakpoint
     * @private
     * @ignore
     */

    Cloudinary.prototype.calc_breakpoint = function(element, width, steps) {
      var breakpoints, point;
      breakpoints = Util.getData(element, 'breakpoints') || Util.getData(element, 'stoppoints') || this.config('breakpoints') || this.config('stoppoints') || defaultBreakpoints;
      if (Util.isFunction(breakpoints)) {
        return breakpoints(width, steps);
      } else {
        if (Util.isString(breakpoints)) {
          breakpoints = ((function() {
            var j, len, ref, results;
            ref = breakpoints.split(',');
            results = [];
            for (j = 0, len = ref.length; j < len; j++) {
              point = ref[j];
              results.push(parseInt(point));
            }
            return results;
          })()).sort(function(a, b) {
            return a - b;
          });
        }
        return closestAbove(breakpoints, width);
      }
    };


    /**
     * @function Cloudinary#calc_stoppoint
     * @deprecated Use {@link calc_breakpoint} instead.
     * @private
     * @ignore
     */

    Cloudinary.prototype.calc_stoppoint = Cloudinary.prototype.calc_breakpoint;


    /**
     * @function Cloudinary#device_pixel_ratio
     * @private
     */

    Cloudinary.prototype.device_pixel_ratio = function(roundDpr) {
      var dpr, dprString;
      if (roundDpr == null) {
        roundDpr = true;
      }
      dpr = (typeof window !== "undefined" && window !== null ? window.devicePixelRatio : void 0) || 1;
      if (roundDpr) {
        dpr = Math.ceil(dpr);
      }
      if (dpr <= 0 || dpr === NaN) {
        dpr = 1;
      }
      dprString = dpr.toString();
      if (dprString.match(/^\d+$/)) {
        dprString += '.0';
      }
      return dprString;
    };

    defaultBreakpoints = function(width, steps) {
      if (steps == null) {
        steps = 100;
      }
      return steps * Math.ceil(width / steps);
    };

    closestAbove = function(list, value) {
      var i;
      i = list.length - 2;
      while (i >= 0 && list[i] >= value) {
        i--;
      }
      return list[i + 1];
    };

    cdnSubdomainNumber = function(publicId) {
      return crc32(publicId) % 5 + 1;
    };

    cloudinaryUrlPrefix = function(publicId, options) {
      var cdnPart, host, path, protocol, ref, subdomain;
      if (((ref = options.cloud_name) != null ? ref.indexOf("/") : void 0) === 0) {
        return '/res' + options.cloud_name;
      }
      protocol = "http://";
      cdnPart = "";
      subdomain = "res";
      host = ".cloudinary.com";
      path = "/" + options.cloud_name;
      if (options.protocol) {
        protocol = options.protocol + '//';
      }
      if (options.private_cdn) {
        cdnPart = options.cloud_name + "-";
        path = "";
      }
      if (options.cdn_subdomain) {
        subdomain = "res-" + cdnSubdomainNumber(publicId);
      }
      if (options.secure) {
        protocol = "https://";
        if (options.secure_cdn_subdomain === false) {
          subdomain = "res";
        }
        if ((options.secure_distribution != null) && options.secure_distribution !== OLD_AKAMAI_SHARED_CDN && options.secure_distribution !== SHARED_CDN) {
          cdnPart = "";
          subdomain = "";
          host = options.secure_distribution;
        }
      } else if (options.cname) {
        protocol = "http://";
        cdnPart = "";
        subdomain = options.cdn_subdomain ? 'a' + ((crc32(publicId) % 5) + 1) + '.' : '';
        host = options.cname;
      }
      return [protocol, cdnPart, subdomain, host, path].join("");
    };


    /**
    * Finds all `img` tags under each node and sets it up to provide the image through Cloudinary
    * @param {Element[]} nodes the parent nodes to search for img under
    * @param {Object} [options={}] options and transformations params
    * @function Cloudinary#processImageTags
     */

    Cloudinary.prototype.processImageTags = function(nodes, options) {
      var images, imgOptions, node, publicId, url;
      if (options == null) {
        options = {};
      }
      if (Util.isEmpty(nodes)) {
        return this;
      }
      options = Util.defaults({}, options, this.config());
      images = (function() {
        var j, len, ref, results;
        results = [];
        for (j = 0, len = nodes.length; j < len; j++) {
          node = nodes[j];
          if (!(((ref = node.tagName) != null ? ref.toUpperCase() : void 0) === 'IMG')) {
            continue;
          }
          imgOptions = Util.assign({
            width: node.getAttribute('width'),
            height: node.getAttribute('height'),
            src: node.getAttribute('src')
          }, options);
          publicId = imgOptions['source'] || imgOptions['src'];
          delete imgOptions['source'];
          delete imgOptions['src'];
          url = this.url(publicId, imgOptions);
          imgOptions = new Transformation(imgOptions).toHtmlAttributes();
          Util.setData(node, 'src-cache', url);
          node.setAttribute('width', imgOptions.width);
          node.setAttribute('height', imgOptions.height);
          results.push(node);
        }
        return results;
      }).call(this);
      this.cloudinary_update(images, options);
      return this;
    };

    applyBreakpoints = function(tag, width, steps, options) {
      var ref, ref1, ref2, responsive_use_breakpoints;
      responsive_use_breakpoints = (ref = (ref1 = (ref2 = options['responsive_use_breakpoints']) != null ? ref2 : options['responsive_use_stoppoints']) != null ? ref1 : this.config('responsive_use_breakpoints')) != null ? ref : this.config('responsive_use_stoppoints');
      if ((!responsive_use_breakpoints) || (responsive_use_breakpoints === 'resize' && !options.resizing)) {
        return width;
      } else {
        return this.calc_breakpoint(tag, width, steps);
      }
    };

    findContainerWidth = function(element) {
      var containerWidth, style;
      containerWidth = 0;
      while (((element = element != null ? element.parentNode : void 0) instanceof Element) && !containerWidth) {
        style = window.getComputedStyle(element);
        if (!/^inline/.test(style.display)) {
          containerWidth = Util.width(element);
        }
      }
      return containerWidth;
    };

    updateDpr = function(dataSrc, roundDpr) {
      return dataSrc.replace(/\bdpr_(1\.0|auto)\b/g, 'dpr_' + this.device_pixel_ratio(roundDpr));
    };

    maxWidth = function(requiredWidth, tag) {
      var imageWidth;
      imageWidth = Util.getData(tag, 'width') || 0;
      if (requiredWidth > imageWidth) {
        imageWidth = requiredWidth;
        Util.setData(tag, 'width', requiredWidth);
      }
      return imageWidth;
    };


    /**
    * Update hidpi (dpr_auto) and responsive (w_auto) fields according to the current container size and the device pixel ratio.
    * Only images marked with the cld-responsive class have w_auto updated.
    * @function Cloudinary#cloudinary_update
    * @param {(Array|string|NodeList)} elements - the elements to modify
    * @param {Object} options
    * @param {boolean|string} [options.responsive_use_breakpoints=true]
    *  - when `true`, always use breakpoints for width
    * - when `"resize"` use exact width on first render and breakpoints on resize
    * - when `false` always use exact width
    * @param {boolean} [options.responsive] - if `true`, enable responsive on this element. Can be done by adding cld-responsive.
    * @param {boolean} [options.responsive_preserve_height] - if set to true, original css height is preserved.
    *   Should only be used if the transformation supports different aspect ratios.
     */

    Cloudinary.prototype.cloudinary_update = function(elements, options) {
      var containerWidth, dataSrc, j, len, match, ref, ref1, ref2, ref3, ref4, ref5, requiredWidth, responsive, responsiveClass, roundDpr, setUrl, tag;
      if (options == null) {
        options = {};
      }
      if (elements === null) {
        return this;
      }
      responsive = (ref = (ref1 = options.responsive) != null ? ref1 : this.config('responsive')) != null ? ref : false;
      elements = (function() {
        switch (false) {
          case !Util.isArray(elements):
            return elements;
          case elements.constructor.name !== "NodeList":
            return elements;
          case !Util.isString(elements):
            return document.querySelectorAll(elements);
          default:
            return [elements];
        }
      })();
      responsiveClass = (ref2 = (ref3 = this.responsiveConfig['responsive_class']) != null ? ref3 : options['responsive_class']) != null ? ref2 : this.config('responsive_class');
      roundDpr = (ref4 = options['round_dpr']) != null ? ref4 : this.config('round_dpr');
      for (j = 0, len = elements.length; j < len; j++) {
        tag = elements[j];
        if (!((ref5 = tag.tagName) != null ? ref5.match(/img/i) : void 0)) {
          continue;
        }
        setUrl = true;
        if (responsive) {
          Util.addClass(tag, responsiveClass);
        }
        dataSrc = Util.getData(tag, 'src-cache') || Util.getData(tag, 'src');
        if (!Util.isEmpty(dataSrc)) {
          dataSrc = updateDpr.call(this, dataSrc, roundDpr);
          if (HtmlTag.isResponsive(tag, responsiveClass)) {
            containerWidth = findContainerWidth(tag);
            if (containerWidth !== 0) {
              switch (false) {
                case !/w_auto:breakpoints/.test(dataSrc):
                  requiredWidth = maxWidth(containerWidth, tag);
                  dataSrc = dataSrc.replace(/w_auto:breakpoints([_0-9]*)(:[0-9]+)?/, "w_auto:breakpoints$1:" + requiredWidth);
                  break;
                case !(match = /w_auto(:(\d+))?/.exec(dataSrc)):
                  requiredWidth = applyBreakpoints.call(this, tag, containerWidth, match[2], options);
                  requiredWidth = maxWidth(requiredWidth, tag);
                  dataSrc = dataSrc.replace(/w_auto[^,\/]*/g, "w_" + requiredWidth);
              }
              Util.removeAttribute(tag, 'width');
              if (!options.responsive_preserve_height) {
                Util.removeAttribute(tag, 'height');
              }
            } else {
              setUrl = false;
            }
          }
          if (setUrl) {
            Util.setAttribute(tag, 'src', dataSrc);
          }
        }
      }
      return this;
    };


    /**
     * Provide a transformation object, initialized with own's options, for chaining purposes.
     * @function Cloudinary#transformation
     * @param {Object} options
     * @return {Transformation}
     */

    Cloudinary.prototype.transformation = function(options) {
      return Transformation["new"](this.config()).fromOptions(options).setParent(this);
    };

    return Cloudinary;

  })();

  /**
   * Cloudinary jQuery plugin
   * Depends on 'jquery', 'util', 'transformation', 'cloudinary'
   */
  CloudinaryJQuery = (function(superClass) {
    extend(CloudinaryJQuery, superClass);


    /**
     * Cloudinary class with jQuery support
     * @constructor CloudinaryJQuery
     * @extends Cloudinary
     */

    function CloudinaryJQuery(options) {
      CloudinaryJQuery.__super__.constructor.call(this, options);
    }


    /**
     * @override
     */

    CloudinaryJQuery.prototype.image = function(publicId, options) {
      var client_hints, img, ref, ref1;
      if (options == null) {
        options = {};
      }
      img = this.imageTag(publicId, options);
      client_hints = (ref = (ref1 = options.client_hints) != null ? ref1 : this.config('client_hints')) != null ? ref : false;
      if (!((options.src != null) || client_hints)) {
        img.setAttr("src", '');
      }
      img = jQuery(img.toHtml());
      if (!client_hints) {
        img.data('src-cache', this.url(publicId, options)).cloudinary_update(options);
      }
      return img;
    };


    /**
     * @override
     */

    CloudinaryJQuery.prototype.responsive = function(options) {
      var ref, ref1, ref2, responsiveClass, responsiveConfig, responsiveResizeInitialized, responsive_resize, timeout;
      responsiveConfig = jQuery.extend(responsiveConfig || {}, options);
      responsiveClass = (ref = this.responsiveConfig['responsive_class']) != null ? ref : this.config('responsive_class');
      jQuery("img." + responsiveClass + ", img.cld-hidpi").cloudinary_update(responsiveConfig);
      responsive_resize = (ref1 = (ref2 = responsiveConfig['responsive_resize']) != null ? ref2 : this.config('responsive_resize')) != null ? ref1 : true;
      if (responsive_resize && !responsiveResizeInitialized) {
        responsiveConfig.resizing = responsiveResizeInitialized = true;
        timeout = null;
        return jQuery(window).on('resize', (function(_this) {
          return function() {
            var debounce, ref3, ref4, reset, run, wait;
            debounce = (ref3 = (ref4 = responsiveConfig['responsive_debounce']) != null ? ref4 : _this.config('responsive_debounce')) != null ? ref3 : 100;
            reset = function() {
              if (timeout) {
                clearTimeout(timeout);
                return timeout = null;
              }
            };
            run = function() {
              return jQuery("img." + responsiveClass).cloudinary_update(responsiveConfig);
            };
            wait = function() {
              reset();
              return setTimeout((function() {
                reset();
                return run();
              }), debounce);
            };
            if (debounce) {
              return wait();
            } else {
              return run();
            }
          };
        })(this));
      }
    };

    return CloudinaryJQuery;

  })(Cloudinary);

  /**
   * The following methods are provided through the jQuery class
   * @class jQuery
   */

  /**
   * Convert all img tags in the collection to utilize Cloudinary.
   * @function jQuery#cloudinary
   * @param {Object} [options] - options for the tag and transformations
   * @returns {jQuery}
   */
  jQuery.fn.cloudinary = function(options) {
    this.filter('img').each(function() {
      var img_options, public_id, url;
      img_options = jQuery.extend({
        width: jQuery(this).attr('width'),
        height: jQuery(this).attr('height'),
        src: jQuery(this).attr('src')
      }, jQuery(this).data(), options);
      public_id = img_options.source || img_options.src;
      delete img_options.source;
      delete img_options.src;
      url = jQuery.cloudinary.url(public_id, img_options);
      img_options = new Transformation(img_options).toHtmlAttributes();
      return jQuery(this).data('src-cache', url).attr({
        width: img_options.width,
        height: img_options.height
      });
    }).cloudinary_update(options);
    return this;
  };

  /**
   * Update hidpi (dpr_auto) and responsive (w_auto) fields according to the current container size and the device pixel ratio.
   * Only images marked with the cld-responsive class have w_auto updated.
   * options:
   * - responsive_use_stoppoints:
   *   - true - always use stoppoints for width
   *   - "resize" - use exact width on first render and stoppoints on resize (default)
   *   - false - always use exact width
   * - responsive:
   *   - true - enable responsive on this element. Can be done by adding cld-responsive.
   *            Note that jQuery.cloudinary.responsive() should be called once on the page.
   * - responsive_preserve_height: if set to true, original css height is perserved. Should only be used if the transformation supports different aspect ratios.
   */
  jQuery.fn.cloudinary_update = function(options) {
    if (options == null) {
      options = {};
    }
    jQuery.cloudinary.cloudinary_update(this.filter('img').toArray(), options);
    return this;
  };
  webp = null;

  /**
   * @function jQuery#webpify
   */
  jQuery.fn.webpify = function(options, webp_options) {
    var that, webp_canary;
    if (options == null) {
      options = {};
    }
    that = this;
    webp_options = webp_options != null ? webp_options : options;
    if (!webp) {
      webp = jQuery.Deferred();
      webp_canary = new Image;
      webp_canary.onerror = webp.reject;
      webp_canary.onload = webp.resolve;
      webp_canary.src = 'data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA';
    }
    jQuery(function() {
      return webp.done(function() {
        return jQuery(that).cloudinary(jQuery.extend({}, webp_options, {
          format: 'webp'
        }));
      }).fail(function() {
        return jQuery(that).cloudinary(options);
      });
    });
    return this;
  };
  jQuery.fn.fetchify = function(options) {
    return this.cloudinary(jQuery.extend(options, {
      'type': 'fetch'
    }));
  };
  jQuery.cloudinary = new CloudinaryJQuery();
  jQuery.cloudinary.fromDocument();

  /**
   * This module extends CloudinaryJquery to support jQuery File Upload
   * Depends on 'jquery', 'util', 'cloudinaryjquery', 'jquery.ui.widget', 'jquery.iframe-transport','jquery.fileupload'
   */

  /**
   * Delete a resource using the upload token
   * @function CloudinaryJQuery#delete_by_token
   * @param {string} delete_token - the delete token
   * @param {Object} [options]
   * @param {string} [options.url] - an alternative URL to use for the API
   * @param {string} [options.cloud_name] - an alternative cloud_name to use. This parameter is ignored if `options.url` is provided.
   */
  CloudinaryJQuery.prototype.delete_by_token = function(delete_token, options) {
    var cloud_name, dataType, url;
    options = options || {};
    url = options.url;
    if (!url) {
      cloud_name = options.cloud_name || jQuery.cloudinary.config().cloud_name;
      url = 'https://api.cloudinary.com/v1_1/' + cloud_name + '/delete_by_token';
    }
    dataType = jQuery.support.xhrFileUpload ? 'json' : 'iframe json';
    return jQuery.ajax({
      url: url,
      method: 'POST',
      data: {
        token: delete_token
      },
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      },
      dataType: dataType
    });
  };

  /**
   * Creates an `input` tag and sets it up to upload files to cloudinary
   * @function CloudinaryJQuery#unsigned_upload_tag
   * @param {string}
   */
  CloudinaryJQuery.prototype.unsigned_upload_tag = function(upload_preset, upload_params, options) {
    return jQuery('<input/>').attr({
      type: 'file',
      name: 'file'
    }).unsigned_cloudinary_upload(upload_preset, upload_params, options);
  };

  /**
   * Initialize the jQuery File Upload plugin to upload to Cloudinary
   * @function jQuery#cloudinary_fileupload
   * @param {Object} options
   * @returns {jQuery}
   */
  jQuery.fn.cloudinary_fileupload = function(options) {
    var cloud_name, initializing, resource_type, type, upload_url;
    if (!Util.isFunction(jQuery.fn.fileupload)) {
      return this;
    }
    initializing = !this.data('blueimpFileupload');
    if (initializing) {
      options = jQuery.extend({
        maxFileSize: 20000000,
        dataType: 'json',
        headers: {
          'X-Requested-With': 'XMLHttpRequest'
        }
      }, options);
    }
    this.fileupload(options);
    if (initializing) {
      this.bind('fileuploaddone', function(e, data) {
        var add_field, field, multiple, upload_info;
        if (data.result.error) {
          return;
        }
        data.result.path = ['v', data.result.version, '/', data.result.public_id, data.result.format ? '.' + data.result.format : ''].join('');
        if (data.cloudinaryField && data.form.length > 0) {
          upload_info = [data.result.resource_type, data.result.type, data.result.path].join('/') + '#' + data.result.signature;
          multiple = jQuery(e.target).prop('multiple');
          add_field = function() {
            return jQuery('<input/>').attr({
              type: 'hidden',
              name: data.cloudinaryField
            }).val(upload_info).appendTo(data.form);
          };
          if (multiple) {
            add_field();
          } else {
            field = jQuery(data.form).find('input[name="' + data.cloudinaryField + '"]');
            if (field.length > 0) {
              field.val(upload_info);
            } else {
              add_field();
            }
          }
        }
        return jQuery(e.target).trigger('cloudinarydone', data);
      });
      this.bind('fileuploadsend', function(e, data) {
        data.headers = jQuery.extend({}, data.headers, {
          'X-Unique-Upload-Id': (Math.random() * 10000000000).toString(16)
        });
        return true;
      });
      this.bind('fileuploadstart', function(e) {
        return jQuery(e.target).trigger('cloudinarystart');
      });
      this.bind('fileuploadstop', function(e) {
        return jQuery(e.target).trigger('cloudinarystop');
      });
      this.bind('fileuploadprogress', function(e, data) {
        return jQuery(e.target).trigger('cloudinaryprogress', data);
      });
      this.bind('fileuploadprogressall', function(e, data) {
        return jQuery(e.target).trigger('cloudinaryprogressall', data);
      });
      this.bind('fileuploadfail', function(e, data) {
        return jQuery(e.target).trigger('cloudinaryfail', data);
      });
      this.bind('fileuploadalways', function(e, data) {
        return jQuery(e.target).trigger('cloudinaryalways', data);
      });
      if (!this.fileupload('option').url) {
        cloud_name = options.cloud_name || jQuery.cloudinary.config().cloud_name;
        resource_type = options.resource_type || 'auto';
        type = options.type || 'upload';
        upload_url = 'https://api.cloudinary.com/v1_1/' + cloud_name + '/' + resource_type + '/' + type;
        this.fileupload('option', 'url', upload_url);
      }
    }
    return this;
  };

  /**
   * Add a file to upload
   * @function jQuery#cloudinary_upload_url
   * @param {string} remote_url - the url to add
   * @returns {jQuery}
   */
  jQuery.fn.cloudinary_upload_url = function(remote_url) {
    if (!Util.isFunction(jQuery.fn.fileupload)) {
      return this;
    }
    this.fileupload('option', 'formData').file = remote_url;
    this.fileupload('add', {
      files: [remote_url]
    });
    delete this.fileupload('option', 'formData').file;
    return this;
  };

  /**
   * Initialize the jQuery File Upload plugin to upload to Cloudinary using unsigned upload
   * @function jQuery#unsigned_cloudinary_upload
   * @param {string} upload_preset - the upload preset to use
   * @param {Object} [upload_params] - parameters that should be past to the server
   * @param {Object} [options]
   * @returns {jQuery}
   */
  jQuery.fn.unsigned_cloudinary_upload = function(upload_preset, upload_params, options) {
    var attr, attrs_to_move, html_options, i, key, value;
    if (upload_params == null) {
      upload_params = {};
    }
    if (options == null) {
      options = {};
    }
    upload_params = Util.cloneDeep(upload_params);
    options = Util.cloneDeep(options);
    attrs_to_move = ['cloud_name', 'resource_type', 'type'];
    i = 0;
    while (i < attrs_to_move.length) {
      attr = attrs_to_move[i];
      if (upload_params[attr]) {
        options[attr] = upload_params[attr];
        delete upload_params[attr];
      }
      i++;
    }
    for (key in upload_params) {
      value = upload_params[key];
      if (Util.isPlainObject(value)) {
        upload_params[key] = jQuery.map(value, function(v, k) {
          if (Util.isString(v)) {
            v = v.replace(/[\|=]/g, "\\$&");
          }
          return k + '=' + v;
        }).join('|');
      } else if (Util.isArray(value)) {
        if (value.length > 0 && jQuery.isArray(value[0])) {
          upload_params[key] = jQuery.map(value, function(array_value) {
            return array_value.join(',');
          }).join('|');
        } else {
          upload_params[key] = value.join(',');
        }
      }
    }
    if (!upload_params.callback) {
      upload_params.callback = '/cloudinary_cors.html';
    }
    upload_params.upload_preset = upload_preset;
    options.formData = upload_params;
    if (options.cloudinary_field) {
      options.cloudinaryField = options.cloudinary_field;
      delete options.cloudinary_field;
    }
    html_options = options.html || {};
    html_options["class"] = Util.trim("cloudinary_fileupload " + (html_options["class"] || ''));
    if (options.multiple) {
      html_options.multiple = true;
    }
    this.attr(html_options).cloudinary_fileupload(options);
    return this;
  };
  jQuery.cloudinary = new CloudinaryJQuery();
  cloudinary = {
    utf8_encode: utf8_encode,
    crc32: crc32,
    Util: Util,
    Condition: Condition,
    Transformation: Transformation,
    Configuration: Configuration,
    HtmlTag: HtmlTag,
    ImageTag: ImageTag,
    VideoTag: VideoTag,
    ClientHintsMetaTag: ClientHintsMetaTag,
    Layer: Layer,
    FetchLayer: FetchLayer,
    TextLayer: TextLayer,
    SubtitlesLayer: SubtitlesLayer,
    Cloudinary: Cloudinary,
    VERSION: "2.5.0",
    CloudinaryJQuery: CloudinaryJQuery
  };
  return cloudinary;
});






// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, or any plugin's
// vendor/assets/javascripts directory can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file. JavaScript code in this file should be added after the last require_* statement.
//
// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details
// about supported directives.
//



















;
